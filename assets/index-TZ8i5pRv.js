var Mm=Object.defineProperty;var Bm=(t,e,r)=>e in t?Mm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ye=(t,e,r)=>(Bm(t,typeof e!="symbol"?e+"":e,r),r),vl=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var o=(t,e,r)=>(vl(t,e,"read from private field"),r?r.call(t):e.get(t)),M=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Q=(t,e,r,n)=>(vl(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var ge=(t,e,r)=>(vl(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Nf(t,e){const r=Object.create(null),n=t.split(",");for(let a=0;a<n.length;a++)r[n[a]]=!0;return e?a=>!!r[a.toLowerCase()]:a=>!!r[a]}const at={},js=[],dn=()=>{},Fm=()=>!1,nl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),vf=t=>t.startsWith("onUpdate:"),jt=Object.assign,_f=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Um=Object.prototype.hasOwnProperty,Fe=(t,e)=>Um.call(t,e),xe=Array.isArray,Vs=t=>il(t)==="[object Map]",qd=t=>il(t)==="[object Set]",qe=t=>typeof t=="function",Dt=t=>typeof t=="string",qo=t=>typeof t=="symbol",ht=t=>t!==null&&typeof t=="object",Cd=t=>(ht(t)||qe(t))&&qe(t.then)&&qe(t.catch),Id=Object.prototype.toString,il=t=>Id.call(t),$m=t=>il(t).slice(8,-1),Sd=t=>il(t)==="[object Object]",xf=t=>Dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pu=Nf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sl=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Qm=/-(\w)/g,go=sl(t=>t.replace(Qm,(e,r)=>r?r.toUpperCase():"")),jm=/\B([A-Z])/g,Co=sl(t=>t.replace(jm,"-$1").toLowerCase()),Td=sl(t=>t.charAt(0).toUpperCase()+t.slice(1)),_l=sl(t=>t?`on${Td(t)}`:""),ds=(t,e)=>!Object.is(t,e),xl=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Ku=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Vm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ah;const Pl=()=>ah||(ah=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ef(t){if(xe(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=Dt(n)?Jm(n):Ef(n);if(a)for(const l in a)e[l]=a[l]}return e}else if(Dt(t)||ht(t))return t}const zm=/;(?![^(]*\))/g,Hm=/:([^]+)/,Km=/\/\*[^]*?\*\//g;function Jm(t){const e={};return t.replace(Km,"").split(zm).forEach(r=>{if(r){const n=r.split(Hm);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Of(t){let e="";if(Dt(t))e=t;else if(xe(t))for(let r=0;r<t.length;r++){const n=Of(t[r]);n&&(e+=n+" ")}else if(ht(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Gm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ym=Nf(Gm);function Ad(t){return!!t||t===""}const Xm=t=>Dt(t)?t:t==null?"":xe(t)||ht(t)&&(t.toString===Id||!qe(t.toString))?JSON.stringify(t,kd,2):String(t),kd=(t,e)=>e&&e.__v_isRef?kd(t,e.value):Vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],l)=>(r[El(n,l)+" =>"]=a,r),{})}:qd(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>El(r))}:qo(e)?El(e):ht(e)&&!xe(e)&&!Sd(e)?String(e):e,El=(t,e="")=>{var r;return qo(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};let Pr;class Zm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Pr,!e&&Pr&&(this.index=(Pr.scopes||(Pr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=Pr;try{return Pr=this,e()}finally{Pr=r}}}on(){Pr=this}off(){Pr=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function ey(t,e=Pr){e&&e.active&&e.effects.push(t)}function ty(){return Pr}const qf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Wd=t=>(t.w&wi)>0,Rd=t=>(t.n&wi)>0,ry=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=wi},ny=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const a=e[n];Wd(a)&&!Rd(a)?a.delete(t):e[r++]=a,a.w&=~wi,a.n&=~wi}e.length=r}},Ll=new WeakMap;let ia=0,wi=1;const Ml=30;let Qr;const cs=Symbol(""),Bl=Symbol("");class Cf{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,ey(this,n)}run(){if(!this.active)return this.fn();let e=Qr,r=pi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Qr,Qr=this,pi=!0,wi=1<<++ia,ia<=Ml?ry(this):uh(this),this.fn()}finally{ia<=Ml&&ny(this),wi=1<<--ia,Qr=this.parent,pi=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Qr===this?this.deferStop=!0:this.active&&(uh(this),this.onStop&&this.onStop(),this.active=!1)}}function uh(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let pi=!0;const Dd=[];function Io(){Dd.push(pi),pi=!1}function So(){const t=Dd.pop();pi=t===void 0?!0:t}function pr(t,e,r){if(pi&&Qr){let n=Ll.get(t);n||Ll.set(t,n=new Map);let a=n.get(r);a||n.set(r,a=qf()),Pd(a)}}function Pd(t,e){let r=!1;ia<=Ml?Rd(t)||(t.n|=wi,r=!Wd(t)):r=!t.has(Qr),r&&(t.add(Qr),Qr.deps.push(t))}function Rn(t,e,r,n,a,l){const m=Ll.get(t);if(!m)return;let _=[];if(e==="clear")_=[...m.values()];else if(r==="length"&&xe(t)){const x=Number(n);m.forEach((y,k)=>{(k==="length"||!qo(k)&&k>=x)&&_.push(y)})}else switch(r!==void 0&&_.push(m.get(r)),e){case"add":xe(t)?xf(r)&&_.push(m.get("length")):(_.push(m.get(cs)),Vs(t)&&_.push(m.get(Bl)));break;case"delete":xe(t)||(_.push(m.get(cs)),Vs(t)&&_.push(m.get(Bl)));break;case"set":Vs(t)&&_.push(m.get(cs));break}if(_.length===1)_[0]&&Fl(_[0]);else{const x=[];for(const y of _)y&&x.push(...y);Fl(qf(x))}}function Fl(t,e){const r=xe(t)?t:[...t];for(const n of r)n.computed&&ch(n);for(const n of r)n.computed||ch(n)}function ch(t,e){(t!==Qr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const iy=Nf("__proto__,__v_isRef,__isVue"),Ld=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qo)),lh=sy();function sy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=Qe(this);for(let l=0,m=this.length;l<m;l++)pr(n,"get",l+"");const a=n[e](...r);return a===-1||a===!1?n[e](...r.map(Qe)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Io();const n=Qe(this)[e].apply(this,r);return So(),n}}),t}function oy(t){const e=Qe(this);return pr(e,"has",t),e.hasOwnProperty(t)}class Md{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,n){const a=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return n===(a?l?by:$d:l?Ud:Fd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const m=xe(e);if(!a){if(m&&Fe(lh,r))return Reflect.get(lh,r,n);if(r==="hasOwnProperty")return oy}const _=Reflect.get(e,r,n);return(qo(r)?Ld.has(r):iy(r))||(a||pr(e,"get",r),l)?_:Gt(_)?m&&xf(r)?_:_.value:ht(_)?a?Qd(_):Tf(_):_}}class Bd extends Md{constructor(e=!1){super(!1,e)}set(e,r,n,a){let l=e[r];if(bo(l)&&Gt(l)&&!Gt(n))return!1;if(!this._shallow&&(!Ju(n)&&!bo(n)&&(l=Qe(l),n=Qe(n)),!xe(e)&&Gt(l)&&!Gt(n)))return l.value=n,!0;const m=xe(e)&&xf(r)?Number(r)<e.length:Fe(e,r),_=Reflect.set(e,r,n,a);return e===Qe(a)&&(m?ds(n,l)&&Rn(e,"set",r,n):Rn(e,"add",r,n)),_}deleteProperty(e,r){const n=Fe(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Rn(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!qo(r)||!Ld.has(r))&&pr(e,"has",r),n}ownKeys(e){return pr(e,"iterate",xe(e)?"length":cs),Reflect.ownKeys(e)}}class ay extends Md{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const uy=new Bd,cy=new ay,ly=new Bd(!0),If=t=>t,ol=t=>Reflect.getPrototypeOf(t);function Cu(t,e,r=!1,n=!1){t=t.__v_raw;const a=Qe(t),l=Qe(e);r||(ds(e,l)&&pr(a,"get",e),pr(a,"get",l));const{has:m}=ol(a),_=n?If:r?kf:ba;if(m.call(a,e))return _(t.get(e));if(m.call(a,l))return _(t.get(l));t!==a&&t.get(e)}function Iu(t,e=!1){const r=this.__v_raw,n=Qe(r),a=Qe(t);return e||(ds(t,a)&&pr(n,"has",t),pr(n,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Su(t,e=!1){return t=t.__v_raw,!e&&pr(Qe(t),"iterate",cs),Reflect.get(t,"size",t)}function fh(t){t=Qe(t);const e=Qe(this);return ol(e).has.call(e,t)||(e.add(t),Rn(e,"add",t,t)),this}function hh(t,e){e=Qe(e);const r=Qe(this),{has:n,get:a}=ol(r);let l=n.call(r,t);l||(t=Qe(t),l=n.call(r,t));const m=a.call(r,t);return r.set(t,e),l?ds(e,m)&&Rn(r,"set",t,e):Rn(r,"add",t,e),this}function dh(t){const e=Qe(this),{has:r,get:n}=ol(e);let a=r.call(e,t);a||(t=Qe(t),a=r.call(e,t)),n&&n.call(e,t);const l=e.delete(t);return a&&Rn(e,"delete",t,void 0),l}function ph(){const t=Qe(this),e=t.size!==0,r=t.clear();return e&&Rn(t,"clear",void 0,void 0),r}function Tu(t,e){return function(n,a){const l=this,m=l.__v_raw,_=Qe(m),x=e?If:t?kf:ba;return!t&&pr(_,"iterate",cs),m.forEach((y,k)=>n.call(a,x(y),x(k),l))}}function Au(t,e,r){return function(...n){const a=this.__v_raw,l=Qe(a),m=Vs(l),_=t==="entries"||t===Symbol.iterator&&m,x=t==="keys"&&m,y=a[t](...n),k=r?If:e?kf:ba;return!e&&pr(l,"iterate",x?Bl:cs),{next(){const{value:R,done:G}=y.next();return G?{value:R,done:G}:{value:_?[k(R[0]),k(R[1])]:k(R),done:G}},[Symbol.iterator](){return this}}}}function Gn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function fy(){const t={get(l){return Cu(this,l)},get size(){return Su(this)},has:Iu,add:fh,set:hh,delete:dh,clear:ph,forEach:Tu(!1,!1)},e={get(l){return Cu(this,l,!1,!0)},get size(){return Su(this)},has:Iu,add:fh,set:hh,delete:dh,clear:ph,forEach:Tu(!1,!0)},r={get(l){return Cu(this,l,!0)},get size(){return Su(this,!0)},has(l){return Iu.call(this,l,!0)},add:Gn("add"),set:Gn("set"),delete:Gn("delete"),clear:Gn("clear"),forEach:Tu(!0,!1)},n={get(l){return Cu(this,l,!0,!0)},get size(){return Su(this,!0)},has(l){return Iu.call(this,l,!0)},add:Gn("add"),set:Gn("set"),delete:Gn("delete"),clear:Gn("clear"),forEach:Tu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Au(l,!1,!1),r[l]=Au(l,!0,!1),e[l]=Au(l,!1,!0),n[l]=Au(l,!0,!0)}),[t,r,e,n]}const[hy,dy,py,my]=fy();function Sf(t,e){const r=e?t?my:py:t?dy:hy;return(n,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Fe(r,a)&&a in n?r:n,a,l)}const yy={get:Sf(!1,!1)},wy={get:Sf(!1,!0)},gy={get:Sf(!0,!1)},Fd=new WeakMap,Ud=new WeakMap,$d=new WeakMap,by=new WeakMap;function Ny(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vy(t){return t.__v_skip||!Object.isExtensible(t)?0:Ny($m(t))}function Tf(t){return bo(t)?t:Af(t,!1,uy,yy,Fd)}function _y(t){return Af(t,!1,ly,wy,Ud)}function Qd(t){return Af(t,!0,cy,gy,$d)}function Af(t,e,r,n,a){if(!ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const m=vy(t);if(m===0)return t;const _=new Proxy(t,m===2?n:r);return a.set(t,_),_}function zs(t){return bo(t)?zs(t.__v_raw):!!(t&&t.__v_isReactive)}function bo(t){return!!(t&&t.__v_isReadonly)}function Ju(t){return!!(t&&t.__v_isShallow)}function jd(t){return zs(t)||bo(t)}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function Vd(t){return Ku(t,"__v_skip",!0),t}const ba=t=>ht(t)?Tf(t):t,kf=t=>ht(t)?Qd(t):t;function zd(t){pi&&Qr&&(t=Qe(t),Pd(t.dep||(t.dep=qf())))}function Hd(t,e){t=Qe(t);const r=t.dep;r&&Fl(r)}function Gt(t){return!!(t&&t.__v_isRef===!0)}function xy(t){return Ey(t,!1)}function Ey(t,e){return Gt(t)?t:new Oy(t,e)}class Oy{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Qe(e),this._value=r?e:ba(e)}get value(){return zd(this),this._value}set value(e){const r=this.__v_isShallow||Ju(e)||bo(e);e=r?e:Qe(e),ds(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:ba(e),Hd(this))}}function Kd(t){return Gt(t)?t.value:t}const qy={get:(t,e,r)=>Kd(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return Gt(a)&&!Gt(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function Jd(t){return zs(t)?t:new Proxy(t,qy)}class Cy{constructor(e,r,n,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Cf(e,()=>{this._dirty||(this._dirty=!0,Hd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=n}get value(){const e=Qe(this);return zd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Iy(t,e,r=!1){let n,a;const l=qe(t);return l?(n=t,a=dn):(n=t.get,a=t.set),new Cy(n,a,l||!a,r)}function mi(t,e,r,n){let a;try{a=n?t(...n):t()}catch(l){al(l,e,r)}return a}function zr(t,e,r,n){if(qe(t)){const l=mi(t,e,r,n);return l&&Cd(l)&&l.catch(m=>{al(m,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(zr(t[l],e,r,n));return a}function al(t,e,r,n=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const m=e.proxy,_=r;for(;l;){const y=l.ec;if(y){for(let k=0;k<y.length;k++)if(y[k](t,m,_)===!1)return}l=l.parent}const x=e.appContext.config.errorHandler;if(x){mi(x,null,10,[t,m,_]);return}}Sy(t,r,a,n)}function Sy(t,e,r,n=!0){console.error(t)}let Na=!1,Ul=!1;const Kt=[];let cn=0;const Hs=[];let qn=null,Fi=0;const Gd=Promise.resolve();let Wf=null;function Ty(t){const e=Wf||Gd;return t?e.then(this?t.bind(this):t):e}function Ay(t){let e=cn+1,r=Kt.length;for(;e<r;){const n=e+r>>>1,a=Kt[n],l=va(a);l<t||l===t&&a.pre?e=n+1:r=n}return e}function Rf(t){(!Kt.length||!Kt.includes(t,Na&&t.allowRecurse?cn+1:cn))&&(t.id==null?Kt.push(t):Kt.splice(Ay(t.id),0,t),Yd())}function Yd(){!Na&&!Ul&&(Ul=!0,Wf=Gd.then(Zd))}function ky(t){const e=Kt.indexOf(t);e>cn&&Kt.splice(e,1)}function Wy(t){xe(t)?Hs.push(...t):(!qn||!qn.includes(t,t.allowRecurse?Fi+1:Fi))&&Hs.push(t),Yd()}function mh(t,e,r=Na?cn+1:0){for(;r<Kt.length;r++){const n=Kt[r];if(n&&n.pre){if(t&&n.id!==t.uid)continue;Kt.splice(r,1),r--,n()}}}function Xd(t){if(Hs.length){const e=[...new Set(Hs)];if(Hs.length=0,qn){qn.push(...e);return}for(qn=e,qn.sort((r,n)=>va(r)-va(n)),Fi=0;Fi<qn.length;Fi++)qn[Fi]();qn=null,Fi=0}}const va=t=>t.id==null?1/0:t.id,Ry=(t,e)=>{const r=va(t)-va(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Zd(t){Ul=!1,Na=!0,Kt.sort(Ry);try{for(cn=0;cn<Kt.length;cn++){const e=Kt[cn];e&&e.active!==!1&&mi(e,null,14)}}finally{cn=0,Kt.length=0,Xd(),Na=!1,Wf=null,(Kt.length||Hs.length)&&Zd()}}function Dy(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||at;let a=r;const l=e.startsWith("update:"),m=l&&e.slice(7);if(m&&m in n){const k=`${m==="modelValue"?"model":m}Modifiers`,{number:R,trim:G}=n[k]||at;G&&(a=r.map(H=>Dt(H)?H.trim():H)),R&&(a=r.map(Vm))}let _,x=n[_=_l(e)]||n[_=_l(go(e))];!x&&l&&(x=n[_=_l(Co(e))]),x&&zr(x,t,6,a);const y=n[_+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[_])return;t.emitted[_]=!0,zr(y,t,6,a)}}function ep(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const l=t.emits;let m={},_=!1;if(!qe(t)){const x=y=>{const k=ep(y,e,!0);k&&(_=!0,jt(m,k))};!r&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}return!l&&!_?(ht(t)&&n.set(t,null),null):(xe(l)?l.forEach(x=>m[x]=null):jt(m,l),ht(t)&&n.set(t,m),m)}function ul(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,Co(e))||Fe(t,e))}let fn=null,tp=null;function Gu(t){const e=fn;return fn=t,tp=t&&t.type.__scopeId||null,e}function Py(t,e=fn,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&Oh(-1);const l=Gu(e);let m;try{m=t(...a)}finally{Gu(l),n._d&&Oh(1)}return m};return n._n=!0,n._c=!0,n._d=!0,n}function Ol(t){const{type:e,vnode:r,proxy:n,withProxy:a,props:l,propsOptions:[m],slots:_,attrs:x,emit:y,render:k,renderCache:R,data:G,setupState:H,ctx:ae,inheritAttrs:N}=t;let q,b;const S=Gu(t);try{if(r.shapeFlag&4){const X=a||n,re=X;q=an(k.call(re,X,R,l,H,G,ae)),b=x}else{const X=e;q=an(X.length>1?X(l,{attrs:x,slots:_,emit:y}):X(l,null)),b=e.props?x:Ly(x)}}catch(X){ua.length=0,al(X,t,1),q=ls(_a)}let T=q;if(b&&N!==!1){const X=Object.keys(b),{shapeFlag:re}=T;X.length&&re&7&&(m&&X.some(vf)&&(b=My(b,m)),T=No(T,b))}return r.dirs&&(T=No(T),T.dirs=T.dirs?T.dirs.concat(r.dirs):r.dirs),r.transition&&(T.transition=r.transition),q=T,Gu(S),q}const Ly=t=>{let e;for(const r in t)(r==="class"||r==="style"||nl(r))&&((e||(e={}))[r]=t[r]);return e},My=(t,e)=>{const r={};for(const n in t)(!vf(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function By(t,e,r){const{props:n,children:a,component:l}=t,{props:m,children:_,patchFlag:x}=e,y=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&x>=0){if(x&1024)return!0;if(x&16)return n?yh(n,m,y):!!m;if(x&8){const k=e.dynamicProps;for(let R=0;R<k.length;R++){const G=k[R];if(m[G]!==n[G]&&!ul(y,G))return!0}}}else return(a||_)&&(!_||!_.$stable)?!0:n===m?!1:n?m?yh(n,m,y):!0:!!m;return!1}function yh(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const l=n[a];if(e[l]!==t[l]&&!ul(r,l))return!0}return!1}function Fy({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const Uy=Symbol.for("v-ndc"),$y=t=>t.__isSuspense;function Qy(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):Wy(t)}const ku={};function ql(t,e,r){return rp(t,e,r)}function rp(t,e,{immediate:r,deep:n,flush:a,onTrack:l,onTrigger:m}=at){var _;const x=ty()===((_=Jt)==null?void 0:_.scope)?Jt:null;let y,k=!1,R=!1;if(Gt(t)?(y=()=>t.value,k=Ju(t)):zs(t)?(y=()=>t,n=!0):xe(t)?(R=!0,k=t.some(X=>zs(X)||Ju(X)),y=()=>t.map(X=>{if(Gt(X))return X.value;if(zs(X))return Ls(X);if(qe(X))return mi(X,x,2)})):qe(t)?e?y=()=>mi(t,x,2):y=()=>{if(!(x&&x.isUnmounted))return G&&G(),zr(t,x,3,[H])}:y=dn,e&&n){const X=y;y=()=>Ls(X())}let G,H=X=>{G=S.onStop=()=>{mi(X,x,4),G=S.onStop=void 0}},ae;if(Oa)if(H=dn,e?r&&zr(e,x,3,[y(),R?[]:void 0,H]):y(),a==="sync"){const X=Uw();ae=X.__watcherHandles||(X.__watcherHandles=[])}else return dn;let N=R?new Array(t.length).fill(ku):ku;const q=()=>{if(S.active)if(e){const X=S.run();(n||k||(R?X.some((re,ce)=>ds(re,N[ce])):ds(X,N)))&&(G&&G(),zr(e,x,3,[X,N===ku?void 0:R&&N[0]===ku?[]:N,H]),N=X)}else S.run()};q.allowRecurse=!!e;let b;a==="sync"?b=q:a==="post"?b=()=>cr(q,x&&x.suspense):(q.pre=!0,x&&(q.id=x.uid),b=()=>Rf(q));const S=new Cf(y,b);e?r?q():N=S.run():a==="post"?cr(S.run.bind(S),x&&x.suspense):S.run();const T=()=>{S.stop(),x&&x.scope&&_f(x.scope.effects,S)};return ae&&ae.push(T),T}function jy(t,e,r){const n=this.proxy,a=Dt(t)?t.includes(".")?np(n,t):()=>n[t]:t.bind(n,n);let l;qe(e)?l=e:(l=e.handler,r=e);const m=Jt;vo(this);const _=rp(a,l.bind(n),r);return m?vo(m):fs(),_}function np(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}function Ls(t,e){if(!ht(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Gt(t))Ls(t.value,e);else if(xe(t))for(let r=0;r<t.length;r++)Ls(t[r],e);else if(qd(t)||Vs(t))t.forEach(r=>{Ls(r,e)});else if(Sd(t))for(const r in t)Ls(t[r],e);return t}function Li(t,e,r,n){const a=t.dirs,l=e&&e.dirs;for(let m=0;m<a.length;m++){const _=a[m];l&&(_.oldValue=l[m].value);let x=_.dir[n];x&&(Io(),zr(x,r,8,[t.el,_,t,e]),So())}}/*! #__NO_SIDE_EFFECTS__ */function Vy(t,e){return qe(t)?jt({name:t.name},e,{setup:t}):t}const Lu=t=>!!t.type.__asyncLoader,ip=t=>t.type.__isKeepAlive;function zy(t,e){sp(t,"a",e)}function Hy(t,e){sp(t,"da",e)}function sp(t,e,r=Jt){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(cl(e,n,r),r){let a=r.parent;for(;a&&a.parent;)ip(a.parent.vnode)&&Ky(n,e,r,a),a=a.parent}}function Ky(t,e,r,n){const a=cl(e,t,n,!0);op(()=>{_f(n[e],a)},r)}function cl(t,e,r=Jt,n=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...m)=>{if(r.isUnmounted)return;Io(),vo(r);const _=zr(e,r,t,m);return fs(),So(),_});return n?a.unshift(l):a.push(l),l}}const Ln=t=>(e,r=Jt)=>(!Oa||t==="sp")&&cl(t,(...n)=>e(...n),r),Jy=Ln("bm"),Gy=Ln("m"),Yy=Ln("bu"),Xy=Ln("u"),Zy=Ln("bum"),op=Ln("um"),ew=Ln("sp"),tw=Ln("rtg"),rw=Ln("rtc");function nw(t,e=Jt){cl("ec",t,e)}const $l=t=>t?yp(t)?Bf(t)||t.proxy:$l(t.parent):null,aa=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$l(t.parent),$root:t=>$l(t.root),$emit:t=>t.emit,$options:t=>Df(t),$forceUpdate:t=>t.f||(t.f=()=>Rf(t.update)),$nextTick:t=>t.n||(t.n=Ty.bind(t.proxy)),$watch:t=>jy.bind(t)}),Cl=(t,e)=>t!==at&&!t.__isScriptSetup&&Fe(t,e),iw={get({_:t},e){const{ctx:r,setupState:n,data:a,props:l,accessCache:m,type:_,appContext:x}=t;let y;if(e[0]!=="$"){const H=m[e];if(H!==void 0)switch(H){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(Cl(n,e))return m[e]=1,n[e];if(a!==at&&Fe(a,e))return m[e]=2,a[e];if((y=t.propsOptions[0])&&Fe(y,e))return m[e]=3,l[e];if(r!==at&&Fe(r,e))return m[e]=4,r[e];Ql&&(m[e]=0)}}const k=aa[e];let R,G;if(k)return e==="$attrs"&&pr(t,"get",e),k(t);if((R=_.__cssModules)&&(R=R[e]))return R;if(r!==at&&Fe(r,e))return m[e]=4,r[e];if(G=x.config.globalProperties,Fe(G,e))return G[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:l}=t;return Cl(a,e)?(a[e]=r,!0):n!==at&&Fe(n,e)?(n[e]=r,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:l}},m){let _;return!!r[m]||t!==at&&Fe(t,m)||Cl(e,m)||(_=l[0])&&Fe(_,m)||Fe(n,m)||Fe(aa,m)||Fe(a.config.globalProperties,m)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Fe(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function wh(t){return xe(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Ql=!0;function sw(t){const e=Df(t),r=t.proxy,n=t.ctx;Ql=!1,e.beforeCreate&&gh(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:m,watch:_,provide:x,inject:y,created:k,beforeMount:R,mounted:G,beforeUpdate:H,updated:ae,activated:N,deactivated:q,beforeDestroy:b,beforeUnmount:S,destroyed:T,unmounted:X,render:re,renderTracked:ce,renderTriggered:Le,errorCaptured:ft,serverPrefetch:Tr,expose:Me,inheritAttrs:Re,components:Er,directives:de,filters:je}=e;if(y&&ow(y,n,null),m)for(const Ie in m){const Ue=m[Ie];qe(Ue)&&(n[Ie]=Ue.bind(r))}if(a){const Ie=a.call(r,r);ht(Ie)&&(t.data=Tf(Ie))}if(Ql=!0,l)for(const Ie in l){const Ue=l[Ie],Tt=qe(Ue)?Ue.bind(r,r):qe(Ue.get)?Ue.get.bind(r,r):dn,Hr=!qe(Ue)&&qe(Ue.set)?Ue.set.bind(r):dn,Or=Bw({get:Tt,set:Hr});Object.defineProperty(n,Ie,{enumerable:!0,configurable:!0,get:()=>Or.value,set:Nt=>Or.value=Nt})}if(_)for(const Ie in _)ap(_[Ie],n,r,Ie);if(x){const Ie=qe(x)?x.call(r):x;Reflect.ownKeys(Ie).forEach(Ue=>{hw(Ue,Ie[Ue])})}k&&gh(k,t,"c");function it(Ie,Ue){xe(Ue)?Ue.forEach(Tt=>Ie(Tt.bind(r))):Ue&&Ie(Ue.bind(r))}if(it(Jy,R),it(Gy,G),it(Yy,H),it(Xy,ae),it(zy,N),it(Hy,q),it(nw,ft),it(rw,ce),it(tw,Le),it(Zy,S),it(op,X),it(ew,Tr),xe(Me))if(Me.length){const Ie=t.exposed||(t.exposed={});Me.forEach(Ue=>{Object.defineProperty(Ie,Ue,{get:()=>r[Ue],set:Tt=>r[Ue]=Tt})})}else t.exposed||(t.exposed={});re&&t.render===dn&&(t.render=re),Re!=null&&(t.inheritAttrs=Re),Er&&(t.components=Er),de&&(t.directives=de)}function ow(t,e,r=dn){xe(t)&&(t=jl(t));for(const n in t){const a=t[n];let l;ht(a)?"default"in a?l=Mu(a.from||n,a.default,!0):l=Mu(a.from||n):l=Mu(a),Gt(l)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:m=>l.value=m}):e[n]=l}}function gh(t,e,r){zr(xe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function ap(t,e,r,n){const a=n.includes(".")?np(r,n):()=>r[n];if(Dt(t)){const l=e[t];qe(l)&&ql(a,l)}else if(qe(t))ql(a,t.bind(r));else if(ht(t))if(xe(t))t.forEach(l=>ap(l,e,r,n));else{const l=qe(t.handler)?t.handler.bind(r):e[t.handler];qe(l)&&ql(a,l,t)}}function Df(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:m}}=t.appContext,_=l.get(e);let x;return _?x=_:!a.length&&!r&&!n?x=e:(x={},a.length&&a.forEach(y=>Yu(x,y,m,!0)),Yu(x,e,m)),ht(e)&&l.set(e,x),x}function Yu(t,e,r,n=!1){const{mixins:a,extends:l}=e;l&&Yu(t,l,r,!0),a&&a.forEach(m=>Yu(t,m,r,!0));for(const m in e)if(!(n&&m==="expose")){const _=aw[m]||r&&r[m];t[m]=_?_(t[m],e[m]):e[m]}return t}const aw={data:bh,props:Nh,emits:Nh,methods:sa,computed:sa,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:sa,directives:sa,watch:cw,provide:bh,inject:uw};function bh(t,e){return e?t?function(){return jt(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function uw(t,e){return sa(jl(t),jl(e))}function jl(t){if(xe(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function sa(t,e){return t?jt(Object.create(null),t,e):e}function Nh(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:jt(Object.create(null),wh(t),wh(e??{})):e}function cw(t,e){if(!t)return e;if(!e)return t;const r=jt(Object.create(null),t);for(const n in e)r[n]=Xt(t[n],e[n]);return r}function up(){return{app:null,config:{isNativeTag:Fm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lw=0;function fw(t,e){return function(n,a=null){qe(n)||(n=jt({},n)),a!=null&&!ht(a)&&(a=null);const l=up(),m=new WeakSet;let _=!1;const x=l.app={_uid:lw++,_component:n,_props:a,_container:null,_context:l,_instance:null,version:$w,get config(){return l.config},set config(y){},use(y,...k){return m.has(y)||(y&&qe(y.install)?(m.add(y),y.install(x,...k)):qe(y)&&(m.add(y),y(x,...k))),x},mixin(y){return l.mixins.includes(y)||l.mixins.push(y),x},component(y,k){return k?(l.components[y]=k,x):l.components[y]},directive(y,k){return k?(l.directives[y]=k,x):l.directives[y]},mount(y,k,R){if(!_){const G=ls(n,a);return G.appContext=l,k&&e?e(G,y):t(G,y,R),_=!0,x._container=y,y.__vue_app__=x,Bf(G.component)||G.component.proxy}},unmount(){_&&(t(null,x._container),delete x._container.__vue_app__)},provide(y,k){return l.provides[y]=k,x},runWithContext(y){Xu=x;try{return y()}finally{Xu=null}}};return x}}let Xu=null;function hw(t,e){if(Jt){let r=Jt.provides;const n=Jt.parent&&Jt.parent.provides;n===r&&(r=Jt.provides=Object.create(n)),r[t]=e}}function Mu(t,e,r=!1){const n=Jt||fn;if(n||Xu){const a=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Xu._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&qe(e)?e.call(n&&n.proxy):e}}function dw(t,e,r,n=!1){const a={},l={};Ku(l,fl,1),t.propsDefaults=Object.create(null),cp(t,e,a,l);for(const m in t.propsOptions[0])m in a||(a[m]=void 0);r?t.props=n?a:_y(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function pw(t,e,r,n){const{props:a,attrs:l,vnode:{patchFlag:m}}=t,_=Qe(a),[x]=t.propsOptions;let y=!1;if((n||m>0)&&!(m&16)){if(m&8){const k=t.vnode.dynamicProps;for(let R=0;R<k.length;R++){let G=k[R];if(ul(t.emitsOptions,G))continue;const H=e[G];if(x)if(Fe(l,G))H!==l[G]&&(l[G]=H,y=!0);else{const ae=go(G);a[ae]=Vl(x,_,ae,H,t,!1)}else H!==l[G]&&(l[G]=H,y=!0)}}}else{cp(t,e,a,l)&&(y=!0);let k;for(const R in _)(!e||!Fe(e,R)&&((k=Co(R))===R||!Fe(e,k)))&&(x?r&&(r[R]!==void 0||r[k]!==void 0)&&(a[R]=Vl(x,_,R,void 0,t,!0)):delete a[R]);if(l!==_)for(const R in l)(!e||!Fe(e,R))&&(delete l[R],y=!0)}y&&Rn(t,"set","$attrs")}function cp(t,e,r,n){const[a,l]=t.propsOptions;let m=!1,_;if(e)for(let x in e){if(Pu(x))continue;const y=e[x];let k;a&&Fe(a,k=go(x))?!l||!l.includes(k)?r[k]=y:(_||(_={}))[k]=y:ul(t.emitsOptions,x)||(!(x in n)||y!==n[x])&&(n[x]=y,m=!0)}if(l){const x=Qe(r),y=_||at;for(let k=0;k<l.length;k++){const R=l[k];r[R]=Vl(a,x,R,y[R],t,!Fe(y,R))}}return m}function Vl(t,e,r,n,a,l){const m=t[r];if(m!=null){const _=Fe(m,"default");if(_&&n===void 0){const x=m.default;if(m.type!==Function&&!m.skipFactory&&qe(x)){const{propsDefaults:y}=a;r in y?n=y[r]:(vo(a),n=y[r]=x.call(null,e),fs())}else n=x}m[0]&&(l&&!_?n=!1:m[1]&&(n===""||n===Co(r))&&(n=!0))}return n}function lp(t,e,r=!1){const n=e.propsCache,a=n.get(t);if(a)return a;const l=t.props,m={},_=[];let x=!1;if(!qe(t)){const k=R=>{x=!0;const[G,H]=lp(R,e,!0);jt(m,G),H&&_.push(...H)};!r&&e.mixins.length&&e.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}if(!l&&!x)return ht(t)&&n.set(t,js),js;if(xe(l))for(let k=0;k<l.length;k++){const R=go(l[k]);vh(R)&&(m[R]=at)}else if(l)for(const k in l){const R=go(k);if(vh(R)){const G=l[k],H=m[R]=xe(G)||qe(G)?{type:G}:jt({},G);if(H){const ae=Eh(Boolean,H.type),N=Eh(String,H.type);H[0]=ae>-1,H[1]=N<0||ae<N,(ae>-1||Fe(H,"default"))&&_.push(R)}}}const y=[m,_];return ht(t)&&n.set(t,y),y}function vh(t){return t[0]!=="$"}function _h(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function xh(t,e){return _h(t)===_h(e)}function Eh(t,e){return xe(e)?e.findIndex(r=>xh(r,t)):qe(e)&&xh(e,t)?0:-1}const fp=t=>t[0]==="_"||t==="$stable",Pf=t=>xe(t)?t.map(an):[an(t)],mw=(t,e,r)=>{if(e._n)return e;const n=Py((...a)=>Pf(e(...a)),r);return n._c=!1,n},hp=(t,e,r)=>{const n=t._ctx;for(const a in t){if(fp(a))continue;const l=t[a];if(qe(l))e[a]=mw(a,l,n);else if(l!=null){const m=Pf(l);e[a]=()=>m}}},dp=(t,e)=>{const r=Pf(e);t.slots.default=()=>r},yw=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Qe(e),Ku(e,"_",r)):hp(e,t.slots={})}else t.slots={},e&&dp(t,e);Ku(t.slots,fl,1)},ww=(t,e,r)=>{const{vnode:n,slots:a}=t;let l=!0,m=at;if(n.shapeFlag&32){const _=e._;_?r&&_===1?l=!1:(jt(a,e),!r&&_===1&&delete a._):(l=!e.$stable,hp(e,a)),m=e}else e&&(dp(t,e),m={default:1});if(l)for(const _ in a)!fp(_)&&m[_]==null&&delete a[_]};function zl(t,e,r,n,a=!1){if(xe(t)){t.forEach((G,H)=>zl(G,e&&(xe(e)?e[H]:e),r,n,a));return}if(Lu(n)&&!a)return;const l=n.shapeFlag&4?Bf(n.component)||n.component.proxy:n.el,m=a?null:l,{i:_,r:x}=t,y=e&&e.r,k=_.refs===at?_.refs={}:_.refs,R=_.setupState;if(y!=null&&y!==x&&(Dt(y)?(k[y]=null,Fe(R,y)&&(R[y]=null)):Gt(y)&&(y.value=null)),qe(x))mi(x,_,12,[m,k]);else{const G=Dt(x),H=Gt(x);if(G||H){const ae=()=>{if(t.f){const N=G?Fe(R,x)?R[x]:k[x]:x.value;a?xe(N)&&_f(N,l):xe(N)?N.includes(l)||N.push(l):G?(k[x]=[l],Fe(R,x)&&(R[x]=k[x])):(x.value=[l],t.k&&(k[t.k]=x.value))}else G?(k[x]=m,Fe(R,x)&&(R[x]=m)):H&&(x.value=m,t.k&&(k[t.k]=m))};m?(ae.id=-1,cr(ae,r)):ae()}}}const cr=Qy;function gw(t){return bw(t)}function bw(t,e){const r=Pl();r.__VUE__=!0;const{insert:n,remove:a,patchProp:l,createElement:m,createText:_,createComment:x,setText:y,setElementText:k,parentNode:R,nextSibling:G,setScopeId:H=dn,insertStaticContent:ae}=t,N=(O,v,W,$=null,j=null,Y=null,ie=!1,V=null,te=!!v.dynamicChildren)=>{if(O===v)return;O&&!ta(O,v)&&($=ir(O),Nt(O,j,Y,!0),O=null),v.patchFlag===-2&&(te=!1,v.dynamicChildren=null);const{type:z,ref:se,shapeFlag:oe}=v;switch(z){case ll:q(O,v,W,$);break;case _a:b(O,v,W,$);break;case Il:O==null&&S(v,W,$,ie);break;case on:Er(O,v,W,$,j,Y,ie,V,te);break;default:oe&1?re(O,v,W,$,j,Y,ie,V,te):oe&6?de(O,v,W,$,j,Y,ie,V,te):(oe&64||oe&128)&&z.process(O,v,W,$,j,Y,ie,V,te,Ge)}se!=null&&j&&zl(se,O&&O.ref,Y,v||O,!v)},q=(O,v,W,$)=>{if(O==null)n(v.el=_(v.children),W,$);else{const j=v.el=O.el;v.children!==O.children&&y(j,v.children)}},b=(O,v,W,$)=>{O==null?n(v.el=x(v.children||""),W,$):v.el=O.el},S=(O,v,W,$)=>{[O.el,O.anchor]=ae(O.children,v,W,$,O.el,O.anchor)},T=({el:O,anchor:v},W,$)=>{let j;for(;O&&O!==v;)j=G(O),n(O,W,$),O=j;n(v,W,$)},X=({el:O,anchor:v})=>{let W;for(;O&&O!==v;)W=G(O),a(O),O=W;a(v)},re=(O,v,W,$,j,Y,ie,V,te)=>{ie=ie||v.type==="svg",O==null?ce(v,W,$,j,Y,ie,V,te):Tr(O,v,j,Y,ie,V,te)},ce=(O,v,W,$,j,Y,ie,V)=>{let te,z;const{type:se,props:oe,shapeFlag:ue,transition:me,dirs:Oe}=O;if(te=O.el=m(O.type,Y,oe&&oe.is,oe),ue&8?k(te,O.children):ue&16&&ft(O.children,te,null,$,j,Y&&se!=="foreignObject",ie,V),Oe&&Li(O,null,$,"created"),Le(te,O,O.scopeId,ie,$),oe){for(const De in oe)De!=="value"&&!Pu(De)&&l(te,De,null,oe[De],Y,O.children,$,j,Ce);"value"in oe&&l(te,"value",null,oe.value),(z=oe.onVnodeBeforeMount)&&Zr(z,$,O)}Oe&&Li(O,null,$,"beforeMount");const Be=Nw(j,me);Be&&me.beforeEnter(te),n(te,v,W),((z=oe&&oe.onVnodeMounted)||Be||Oe)&&cr(()=>{z&&Zr(z,$,O),Be&&me.enter(te),Oe&&Li(O,null,$,"mounted")},j)},Le=(O,v,W,$,j)=>{if(W&&H(O,W),$)for(let Y=0;Y<$.length;Y++)H(O,$[Y]);if(j){let Y=j.subTree;if(v===Y){const ie=j.vnode;Le(O,ie,ie.scopeId,ie.slotScopeIds,j.parent)}}},ft=(O,v,W,$,j,Y,ie,V,te=0)=>{for(let z=te;z<O.length;z++){const se=O[z]=V?ei(O[z]):an(O[z]);N(null,se,v,W,$,j,Y,ie,V)}},Tr=(O,v,W,$,j,Y,ie)=>{const V=v.el=O.el;let{patchFlag:te,dynamicChildren:z,dirs:se}=v;te|=O.patchFlag&16;const oe=O.props||at,ue=v.props||at;let me;W&&Mi(W,!1),(me=ue.onVnodeBeforeUpdate)&&Zr(me,W,v,O),se&&Li(v,O,W,"beforeUpdate"),W&&Mi(W,!0);const Oe=j&&v.type!=="foreignObject";if(z?Me(O.dynamicChildren,z,V,W,$,Oe,Y):ie||Ue(O,v,V,null,W,$,Oe,Y,!1),te>0){if(te&16)Re(V,v,oe,ue,W,$,j);else if(te&2&&oe.class!==ue.class&&l(V,"class",null,ue.class,j),te&4&&l(V,"style",oe.style,ue.style,j),te&8){const Be=v.dynamicProps;for(let De=0;De<Be.length;De++){const Ve=Be[De],le=oe[Ve],kr=ue[Ve];(kr!==le||Ve==="value")&&l(V,Ve,le,kr,j,O.children,W,$,Ce)}}te&1&&O.children!==v.children&&k(V,v.children)}else!ie&&z==null&&Re(V,v,oe,ue,W,$,j);((me=ue.onVnodeUpdated)||se)&&cr(()=>{me&&Zr(me,W,v,O),se&&Li(v,O,W,"updated")},$)},Me=(O,v,W,$,j,Y,ie)=>{for(let V=0;V<v.length;V++){const te=O[V],z=v[V],se=te.el&&(te.type===on||!ta(te,z)||te.shapeFlag&70)?R(te.el):W;N(te,z,se,null,$,j,Y,ie,!0)}},Re=(O,v,W,$,j,Y,ie)=>{if(W!==$){if(W!==at)for(const V in W)!Pu(V)&&!(V in $)&&l(O,V,W[V],null,ie,v.children,j,Y,Ce);for(const V in $){if(Pu(V))continue;const te=$[V],z=W[V];te!==z&&V!=="value"&&l(O,V,z,te,ie,v.children,j,Y,Ce)}"value"in $&&l(O,"value",W.value,$.value)}},Er=(O,v,W,$,j,Y,ie,V,te)=>{const z=v.el=O?O.el:_(""),se=v.anchor=O?O.anchor:_("");let{patchFlag:oe,dynamicChildren:ue,slotScopeIds:me}=v;me&&(V=V?V.concat(me):me),O==null?(n(z,W,$),n(se,W,$),ft(v.children,W,se,j,Y,ie,V,te)):oe>0&&oe&64&&ue&&O.dynamicChildren?(Me(O.dynamicChildren,ue,W,j,Y,ie,V),(v.key!=null||j&&v===j.subTree)&&pp(O,v,!0)):Ue(O,v,W,se,j,Y,ie,V,te)},de=(O,v,W,$,j,Y,ie,V,te)=>{v.slotScopeIds=V,O==null?v.shapeFlag&512?j.ctx.activate(v,W,$,ie,te):je(v,W,$,j,Y,ie,te):nr(O,v,te)},je=(O,v,W,$,j,Y,ie)=>{const V=O.component=Ww(O,$,j);if(ip(O)&&(V.ctx.renderer=Ge),Rw(V),V.asyncDep){if(j&&j.registerDep(V,it),!O.el){const te=V.subTree=ls(_a);b(null,te,v,W)}return}it(V,O,v,W,j,Y,ie)},nr=(O,v,W)=>{const $=v.component=O.component;if(By(O,v,W))if($.asyncDep&&!$.asyncResolved){Ie($,v,W);return}else $.next=v,ky($.update),$.update();else v.el=O.el,$.vnode=v},it=(O,v,W,$,j,Y,ie)=>{const V=()=>{if(O.isMounted){let{next:se,bu:oe,u:ue,parent:me,vnode:Oe}=O,Be=se,De;Mi(O,!1),se?(se.el=Oe.el,Ie(O,se,ie)):se=Oe,oe&&xl(oe),(De=se.props&&se.props.onVnodeBeforeUpdate)&&Zr(De,me,se,Oe),Mi(O,!0);const Ve=Ol(O),le=O.subTree;O.subTree=Ve,N(le,Ve,R(le.el),ir(le),O,j,Y),se.el=Ve.el,Be===null&&Fy(O,Ve.el),ue&&cr(ue,j),(De=se.props&&se.props.onVnodeUpdated)&&cr(()=>Zr(De,me,se,Oe),j)}else{let se;const{el:oe,props:ue}=v,{bm:me,m:Oe,parent:Be}=O,De=Lu(v);if(Mi(O,!1),me&&xl(me),!De&&(se=ue&&ue.onVnodeBeforeMount)&&Zr(se,Be,v),Mi(O,!0),oe&&Pt){const Ve=()=>{O.subTree=Ol(O),Pt(oe,O.subTree,O,j,null)};De?v.type.__asyncLoader().then(()=>!O.isUnmounted&&Ve()):Ve()}else{const Ve=O.subTree=Ol(O);N(null,Ve,W,$,O,j,Y),v.el=Ve.el}if(Oe&&cr(Oe,j),!De&&(se=ue&&ue.onVnodeMounted)){const Ve=v;cr(()=>Zr(se,Be,Ve),j)}(v.shapeFlag&256||Be&&Lu(Be.vnode)&&Be.vnode.shapeFlag&256)&&O.a&&cr(O.a,j),O.isMounted=!0,v=W=$=null}},te=O.effect=new Cf(V,()=>Rf(z),O.scope),z=O.update=()=>te.run();z.id=O.uid,Mi(O,!0),z()},Ie=(O,v,W)=>{v.component=O;const $=O.vnode.props;O.vnode=v,O.next=null,pw(O,v.props,$,W),ww(O,v.children,W),Io(),mh(O),So()},Ue=(O,v,W,$,j,Y,ie,V,te=!1)=>{const z=O&&O.children,se=O?O.shapeFlag:0,oe=v.children,{patchFlag:ue,shapeFlag:me}=v;if(ue>0){if(ue&128){Hr(z,oe,W,$,j,Y,ie,V,te);return}else if(ue&256){Tt(z,oe,W,$,j,Y,ie,V,te);return}}me&8?(se&16&&Ce(z,j,Y),oe!==z&&k(W,oe)):se&16?me&16?Hr(z,oe,W,$,j,Y,ie,V,te):Ce(z,j,Y,!0):(se&8&&k(W,""),me&16&&ft(oe,W,$,j,Y,ie,V,te))},Tt=(O,v,W,$,j,Y,ie,V,te)=>{O=O||js,v=v||js;const z=O.length,se=v.length,oe=Math.min(z,se);let ue;for(ue=0;ue<oe;ue++){const me=v[ue]=te?ei(v[ue]):an(v[ue]);N(O[ue],me,W,null,j,Y,ie,V,te)}z>se?Ce(O,j,Y,!0,!1,oe):ft(v,W,$,j,Y,ie,V,te,oe)},Hr=(O,v,W,$,j,Y,ie,V,te)=>{let z=0;const se=v.length;let oe=O.length-1,ue=se-1;for(;z<=oe&&z<=ue;){const me=O[z],Oe=v[z]=te?ei(v[z]):an(v[z]);if(ta(me,Oe))N(me,Oe,W,null,j,Y,ie,V,te);else break;z++}for(;z<=oe&&z<=ue;){const me=O[oe],Oe=v[ue]=te?ei(v[ue]):an(v[ue]);if(ta(me,Oe))N(me,Oe,W,null,j,Y,ie,V,te);else break;oe--,ue--}if(z>oe){if(z<=ue){const me=ue+1,Oe=me<se?v[me].el:$;for(;z<=ue;)N(null,v[z]=te?ei(v[z]):an(v[z]),W,Oe,j,Y,ie,V,te),z++}}else if(z>ue)for(;z<=oe;)Nt(O[z],j,Y,!0),z++;else{const me=z,Oe=z,Be=new Map;for(z=Oe;z<=ue;z++){const Lt=v[z]=te?ei(v[z]):an(v[z]);Lt.key!=null&&Be.set(Lt.key,z)}let De,Ve=0;const le=ue-Oe+1;let kr=!1,wn=0;const Wr=new Array(le);for(z=0;z<le;z++)Wr[z]=0;for(z=me;z<=oe;z++){const Lt=O[z];if(Ve>=le){Nt(Lt,j,Y,!0);continue}let dt;if(Lt.key!=null)dt=Be.get(Lt.key);else for(De=Oe;De<=ue;De++)if(Wr[De-Oe]===0&&ta(Lt,v[De])){dt=De;break}dt===void 0?Nt(Lt,j,Y,!0):(Wr[dt-Oe]=z+1,dt>=wn?wn=dt:kr=!0,N(Lt,v[dt],W,null,j,Y,ie,V,te),Ve++)}const Jr=kr?vw(Wr):js;for(De=Jr.length-1,z=le-1;z>=0;z--){const Lt=Oe+z,dt=v[Lt],Bn=Lt+1<se?v[Lt+1].el:$;Wr[z]===0?N(null,dt,W,Bn,j,Y,ie,V,te):kr&&(De<0||z!==Jr[De]?Or(dt,W,Bn,2):De--)}}},Or=(O,v,W,$,j=null)=>{const{el:Y,type:ie,transition:V,children:te,shapeFlag:z}=O;if(z&6){Or(O.component.subTree,v,W,$);return}if(z&128){O.suspense.move(v,W,$);return}if(z&64){ie.move(O,v,W,Ge);return}if(ie===on){n(Y,v,W);for(let oe=0;oe<te.length;oe++)Or(te[oe],v,W,$);n(O.anchor,v,W);return}if(ie===Il){T(O,v,W);return}if($!==2&&z&1&&V)if($===0)V.beforeEnter(Y),n(Y,v,W),cr(()=>V.enter(Y),j);else{const{leave:oe,delayLeave:ue,afterLeave:me}=V,Oe=()=>n(Y,v,W),Be=()=>{oe(Y,()=>{Oe(),me&&me()})};ue?ue(Y,Oe,Be):Be()}else n(Y,v,W)},Nt=(O,v,W,$=!1,j=!1)=>{const{type:Y,props:ie,ref:V,children:te,dynamicChildren:z,shapeFlag:se,patchFlag:oe,dirs:ue}=O;if(V!=null&&zl(V,null,W,O,!0),se&256){v.ctx.deactivate(O);return}const me=se&1&&ue,Oe=!Lu(O);let Be;if(Oe&&(Be=ie&&ie.onVnodeBeforeUnmount)&&Zr(Be,v,O),se&6)he(O.component,W,$);else{if(se&128){O.suspense.unmount(W,$);return}me&&Li(O,null,v,"beforeUnmount"),se&64?O.type.remove(O,v,W,j,Ge,$):z&&(Y!==on||oe>0&&oe&64)?Ce(z,v,W,!1,!0):(Y===on&&oe&384||!j&&se&16)&&Ce(te,v,W),$&&Ar(O)}(Oe&&(Be=ie&&ie.onVnodeUnmounted)||me)&&cr(()=>{Be&&Zr(Be,v,O),me&&Li(O,null,v,"unmounted")},W)},Ar=O=>{const{type:v,el:W,anchor:$,transition:j}=O;if(v===on){mr(W,$);return}if(v===Il){X(O);return}const Y=()=>{a(W),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(O.shapeFlag&1&&j&&!j.persisted){const{leave:ie,delayLeave:V}=j,te=()=>ie(W,Y);V?V(O.el,Y,te):te()}else Y()},mr=(O,v)=>{let W;for(;O!==v;)W=G(O),a(O),O=W;a(v)},he=(O,v,W)=>{const{bum:$,scope:j,update:Y,subTree:ie,um:V}=O;$&&xl($),j.stop(),Y&&(Y.active=!1,Nt(ie,O,v,W)),V&&cr(V,v),cr(()=>{O.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Ce=(O,v,W,$=!1,j=!1,Y=0)=>{for(let ie=Y;ie<O.length;ie++)Nt(O[ie],v,W,$,j)},ir=O=>O.shapeFlag&6?ir(O.component.subTree):O.shapeFlag&128?O.suspense.next():G(O.anchor||O.el),Kr=(O,v,W)=>{O==null?v._vnode&&Nt(v._vnode,null,null,!0):N(v._vnode||null,O,v,null,null,null,W),mh(),Xd(),v._vnode=O},Ge={p:N,um:Nt,m:Or,r:Ar,mt:je,mc:ft,pc:Ue,pbc:Me,n:ir,o:t};let Mn,Pt;return e&&([Mn,Pt]=e(Ge)),{render:Kr,hydrate:Mn,createApp:fw(Kr,Mn)}}function Mi({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Nw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pp(t,e,r=!1){const n=t.children,a=e.children;if(xe(n)&&xe(a))for(let l=0;l<n.length;l++){const m=n[l];let _=a[l];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=a[l]=ei(a[l]),_.el=m.el),r||pp(m,_)),_.type===ll&&(_.el=m.el)}}function vw(t){const e=t.slice(),r=[0];let n,a,l,m,_;const x=t.length;for(n=0;n<x;n++){const y=t[n];if(y!==0){if(a=r[r.length-1],t[a]<y){e[n]=a,r.push(n);continue}for(l=0,m=r.length-1;l<m;)_=l+m>>1,t[r[_]]<y?l=_+1:m=_;y<t[r[l]]&&(l>0&&(e[n]=r[l-1]),r[l]=n)}}for(l=r.length,m=r[l-1];l-- >0;)r[l]=m,m=e[m];return r}const _w=t=>t.__isTeleport,on=Symbol.for("v-fgt"),ll=Symbol.for("v-txt"),_a=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),ua=[];let jr=null;function xw(t=!1){ua.push(jr=t?null:[])}function Ew(){ua.pop(),jr=ua[ua.length-1]||null}let xa=1;function Oh(t){xa+=t}function Ow(t){return t.dynamicChildren=xa>0?jr||js:null,Ew(),xa>0&&jr&&jr.push(t),t}function qw(t,e,r,n,a,l){return Ow(Ot(t,e,r,n,a,l,!0))}function Cw(t){return t?t.__v_isVNode===!0:!1}function ta(t,e){return t.type===e.type&&t.key===e.key}const fl="__vInternal",mp=({key:t})=>t??null,Bu=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Dt(t)||Gt(t)||qe(t)?{i:fn,r:t,k:e,f:!!r}:t:null);function Ot(t,e=null,r=null,n=0,a=null,l=t===on?0:1,m=!1,_=!1){const x={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&mp(e),ref:e&&Bu(e),scopeId:tp,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:fn};return _?(Lf(x,r),l&128&&t.normalize(x)):r&&(x.shapeFlag|=Dt(r)?8:16),xa>0&&!m&&jr&&(x.patchFlag>0||l&6)&&x.patchFlag!==32&&jr.push(x),x}const ls=Iw;function Iw(t,e=null,r=null,n=0,a=null,l=!1){if((!t||t===Uy)&&(t=_a),Cw(t)){const _=No(t,e,!0);return r&&Lf(_,r),xa>0&&!l&&jr&&(_.shapeFlag&6?jr[jr.indexOf(t)]=_:jr.push(_)),_.patchFlag|=-2,_}if(Mw(t)&&(t=t.__vccOpts),e){e=Sw(e);let{class:_,style:x}=e;_&&!Dt(_)&&(e.class=Of(_)),ht(x)&&(jd(x)&&!xe(x)&&(x=jt({},x)),e.style=Ef(x))}const m=Dt(t)?1:$y(t)?128:_w(t)?64:ht(t)?4:qe(t)?2:0;return Ot(t,e,r,n,a,m,l,!0)}function Sw(t){return t?jd(t)||fl in t?jt({},t):t:null}function No(t,e,r=!1){const{props:n,ref:a,patchFlag:l,children:m}=t,_=e?Tw(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:_,key:_&&mp(_),ref:e&&e.ref?r&&a?xe(a)?a.concat(Bu(e)):[a,Bu(e)]:Bu(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==on?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&No(t.ssContent),ssFallback:t.ssFallback&&No(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ea(t=" ",e=0){return ls(ll,null,t,e)}function an(t){return t==null||typeof t=="boolean"?ls(_a):xe(t)?ls(on,null,t.slice()):typeof t=="object"?ei(t):ls(ll,null,String(t))}function ei(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:No(t)}function Lf(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(xe(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),Lf(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(fl in e)?e._ctx=fn:a===3&&fn&&(fn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:fn},r=32):(e=String(e),n&64?(r=16,e=[Ea(e)]):r=8);t.children=e,t.shapeFlag|=r}function Tw(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=Of([e.class,n.class]));else if(a==="style")e.style=Ef([e.style,n.style]);else if(nl(a)){const l=e[a],m=n[a];m&&l!==m&&!(xe(l)&&l.includes(m))&&(e[a]=l?[].concat(l,m):m)}else a!==""&&(e[a]=n[a])}return e}function Zr(t,e,r,n=null){zr(t,e,7,[r,n])}const Aw=up();let kw=0;function Ww(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||Aw,l={uid:kw++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lp(n,a),emitsOptions:ep(n,a),emit:null,emitted:null,propsDefaults:at,inheritAttrs:n.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=Dy.bind(null,l),t.ce&&t.ce(l),l}let Jt=null,Mf,As,qh="__VUE_INSTANCE_SETTERS__";(As=Pl()[qh])||(As=Pl()[qh]=[]),As.push(t=>Jt=t),Mf=t=>{As.length>1?As.forEach(e=>e(t)):As[0](t)};const vo=t=>{Mf(t),t.scope.on()},fs=()=>{Jt&&Jt.scope.off(),Mf(null)};function yp(t){return t.vnode.shapeFlag&4}let Oa=!1;function Rw(t,e=!1){Oa=e;const{props:r,children:n}=t.vnode,a=yp(t);dw(t,r,a,e),yw(t,n);const l=a?Dw(t,e):void 0;return Oa=!1,l}function Dw(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=Vd(new Proxy(t.ctx,iw));const{setup:n}=r;if(n){const a=t.setupContext=n.length>1?Lw(t):null;vo(t),Io();const l=mi(n,t,0,[t.props,a]);if(So(),fs(),Cd(l)){if(l.then(fs,fs),e)return l.then(m=>{Ch(t,m,e)}).catch(m=>{al(m,t,0)});t.asyncDep=l}else Ch(t,l,e)}else wp(t,e)}function Ch(t,e,r){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ht(e)&&(t.setupState=Jd(e)),wp(t,r)}let Ih;function wp(t,e,r){const n=t.type;if(!t.render){if(!e&&Ih&&!n.render){const a=n.template||Df(t).template;if(a){const{isCustomElement:l,compilerOptions:m}=t.appContext.config,{delimiters:_,compilerOptions:x}=n,y=jt(jt({isCustomElement:l,delimiters:_},m),x);n.render=Ih(a,y)}}t.render=n.render||dn}{vo(t),Io();try{sw(t)}finally{So(),fs()}}}function Pw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return pr(t,"get","$attrs"),e[r]}}))}function Lw(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Pw(t)},slots:t.slots,emit:t.emit,expose:e}}function Bf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Jd(Vd(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in aa)return aa[r](t)},has(e,r){return r in e||r in aa}}))}function Mw(t){return qe(t)&&"__vccOpts"in t}const Bw=(t,e)=>Iy(t,e,Oa),Fw=Symbol.for("v-scx"),Uw=()=>Mu(Fw),$w="3.3.11",Qw="http://www.w3.org/2000/svg",Ui=typeof document<"u"?document:null,Sh=Ui&&Ui.createElement("template"),jw={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e?Ui.createElementNS(Qw,t):Ui.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Ui.createTextNode(t),createComment:t=>Ui.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ui.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,l){const m=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{Sh.innerHTML=n?`<svg>${t}</svg>`:t;const _=Sh.content;if(n){const x=_.firstChild;for(;x.firstChild;)_.appendChild(x.firstChild);_.removeChild(x)}e.insertBefore(_,r)}return[m?m.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Vw=Symbol("_vtc");function zw(t,e,r){const n=t[Vw];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Hw=Symbol("_vod");function Kw(t,e,r){const n=t.style,a=Dt(r);if(r&&!a){if(e&&!Dt(e))for(const l in e)r[l]==null&&Hl(n,l,"");for(const l in r)Hl(n,l,r[l])}else{const l=n.display;a?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),Hw in t&&(n.display=l)}}const Th=/\s*!important$/;function Hl(t,e,r){if(xe(r))r.forEach(n=>Hl(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Jw(t,e);Th.test(r)?t.setProperty(Co(n),r.replace(Th,""),"important"):t[n]=r}}const Ah=["Webkit","Moz","ms"],Sl={};function Jw(t,e){const r=Sl[e];if(r)return r;let n=go(e);if(n!=="filter"&&n in t)return Sl[e]=n;n=Td(n);for(let a=0;a<Ah.length;a++){const l=Ah[a]+n;if(l in t)return Sl[e]=l}return e}const kh="http://www.w3.org/1999/xlink";function Gw(t,e,r,n,a){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,r);else{const l=Ym(e);r==null||l&&!Ad(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function Yw(t,e,r,n,a,l,m){if(e==="innerHTML"||e==="textContent"){n&&m(n,a,l),t[e]=r??"";return}const _=t.tagName;if(e==="value"&&_!=="PROGRESS"&&!_.includes("-")){t._value=r;const y=_==="OPTION"?t.getAttribute("value"):t.value,k=r??"";y!==k&&(t.value=k),r==null&&t.removeAttribute(e);return}let x=!1;if(r===""||r==null){const y=typeof t[e];y==="boolean"?r=Ad(r):r==null&&y==="string"?(r="",x=!0):y==="number"&&(r=0,x=!0)}try{t[e]=r}catch{}x&&t.removeAttribute(e)}function Xw(t,e,r,n){t.addEventListener(e,r,n)}function Zw(t,e,r,n){t.removeEventListener(e,r,n)}const Wh=Symbol("_vei");function eg(t,e,r,n,a=null){const l=t[Wh]||(t[Wh]={}),m=l[e];if(n&&m)m.value=n;else{const[_,x]=tg(e);if(n){const y=l[e]=ig(n,a);Xw(t,_,y,x)}else m&&(Zw(t,_,m,x),l[e]=void 0)}}const Rh=/(?:Once|Passive|Capture)$/;function tg(t){let e;if(Rh.test(t)){e={};let n;for(;n=t.match(Rh);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Co(t.slice(2)),e]}let Tl=0;const rg=Promise.resolve(),ng=()=>Tl||(rg.then(()=>Tl=0),Tl=Date.now());function ig(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;zr(sg(n,r.value),e,5,[n])};return r.value=t,r.attached=ng(),r}function sg(t,e){if(xe(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const Dh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,og=(t,e,r,n,a=!1,l,m,_,x)=>{e==="class"?zw(t,n,a):e==="style"?Kw(t,r,n):nl(e)?vf(e)||eg(t,e,r,n,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ag(t,e,n,a))?Yw(t,e,n,l,m,_,x):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Gw(t,e,n,a))};function ag(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Dh(e)&&qe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Dh(e)&&Dt(r)?!1:e in t}const ug=jt({patchProp:og},jw);let Ph;function cg(){return Ph||(Ph=gw(ug))}const lg=(...t)=>{const e=cg().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=fg(n);if(!a)return;const l=e._component;!qe(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const m=r(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),m},e};function fg(t){return Dt(t)?document.querySelector(t):t}function hs(t){return typeof t>"u"||t===void 0}function mn(t){return typeof t=="string"}function gp(t){return typeof t=="number"}function Zu(t){return typeof t=="boolean"}function Ff(t){return t===null}function hg(t){return t instanceof Date}function dg(t){return typeof t=="bigint"}function xr(t){return typeof t=="function"}function ln(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function gi(t){return Array.isArray(t)}function _o(t){return t}const gt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),lt=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Xn=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:lt.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),bp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:lt.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),pg=["preserve rows","delete rows","drop"],Dr=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),bi=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:lt.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:lt.create(t),identifier:lt.create(e)})}}),Fu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:bi.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Kl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:lt.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Jl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),_i=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),yi=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:bi.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:bi.createWithSchema(t,e)})}});function Sr(t){return ln(t)&&xr(t.toOperationNode)}function mg(t){return ln(t)&&"expressionType"in t&&Sr(t)}function yg(t){return ln(t)&&"expression"in t&&mn(t.alias)&&Sr(t)}const En=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),Ni=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),To=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),Al=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return p({...t,on:e==="And"?Ni.create(t.on,r):To.create(t.on,r)})}}),ca=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return p({kind:"JoinNode",joinType:t,table:e,on:Al.create(r)})},cloneWithOn(t,e){return p({...t,on:t.on?Al.cloneWithOperation(t.on,"And",e):Al.create(e)})}}),qa=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),wg=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],gg=["+","-","*","/","%","^","&","|","#","<<",">>"],Np=["->","->>"],bg=[...wg,...gg,"&&","||"],Ng=["exists","not exists"],vg=["not","-",...Ng],_g=[...bg,...Np,...vg,"between","between symmetric"],ps=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Lh(t){return mn(t)&&Np.includes(t)}const bt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:lt.create(t)})}}),Uf=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),hl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Uf.create()})}});var Ks;class xg{constructor(e){M(this,Ks,void 0);Q(this,Ks,e)}get dynamicReference(){return o(this,Ks)}get refType(){}toOperationNode(){return Op(o(this,Ks))}}Ks=new WeakMap;function vp(t){return ln(t)&&Sr(t)&&mn(t.dynamicReference)}const Gl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),tr=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return tr.create([t],[])},createWithChild(t){return tr.create(["",""],[t])},createWithChildren(t){return tr.create(new Array(t.length+1).fill(""),t)}});function _p(t){return t==="asc"||t==="desc"}function dl(t){if(t.length===2)return[kl(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>kl(r)):[kl(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function kl(t,e){const r=Eg(t);if(Gl.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Gl.create(r,xp(e))}function Eg(t){if(ru(t))return ko(t);if(vp(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!_p(r))throw new Error(`Invalid order by direction: ${r}`);return Gl.create(Dn(e),xp(r))}return Dn(t)}function xp(t){if(t)return t==="asc"||t==="desc"?tr.createWithSql(t):t.toOperationNode()}const Yl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),Ep=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Xl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function Op(t){return mn(t)?Dn(t):t.toOperationNode()}function Ca(t){return gi(t)?t.map(e=>Vr(e)):[Vr(t)]}function Vr(t){return ru(t)?ko(t):Op(t)}function Og(t,e){const r=Dn(t);if(Lh(e))return Yl.create(r,Ep.create(ps.create(e)));const n=e.slice(0,-1);if(Lh(n))return Yl.create(r,Xl.create(ps.create(n)));throw new Error(`Invalid JSON operator: ${e}`)}function Dn(t){const e=".";if(!t.includes(e))return hl.create(bt.create(t));const r=t.split(e).map($f);if(r.length===3)return Cg(r);if(r.length===2)return Ig(r);throw new Error(`invalid column reference ${t}`)}function qg(t){const e=" as ";if(t.includes(e)){const[r,n]=t.split(e).map($f);return _i.create(Dn(r),lt.create(n))}else return Dn(t)}function qp(t){return bt.create(t)}function Mh(t){const e=" ";if(t.includes(e)){const[r,n]=t.split(e).map($f);if(!_p(n))throw new Error(`invalid order direction "${n}" next to "${r}"`);return dl([r,n])[0]}else return qp(t)}function Cg(t){const[e,r,n]=t;return hl.create(bt.create(n),yi.createWithSchema(e,r))}function Ig(t){const[e,r]=t;return hl.create(bt.create(r),yi.create(e))}function $f(t){return t.trim()}const Cp=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),Qf=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),yn=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function Ip(t){return gi(t)?Sg(t):rr(t)}function rr(t){return ru(t)?ko(t):yn.create(t)}function jf(t){return gp(t)||Zu(t)||Ff(t)}function Vf(t){if(!jf(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return yn.createImmediate(t)}function Sg(t){return t.some(ru)?Qf.create(t.map(e=>rr(e))):Cp.create(t)}const xo=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Yt(t){if(t.length===3)return la(t[0],t[1],t[2]);if(t.length===1)return rr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function la(t,e,r){return Tg(e)&&Sp(r)?qa.create(Vr(t),ef(e),yn.createImmediate(r)):qa.create(Vr(t),ef(e),Ip(r))}function Pn(t,e,r){return qa.create(Vr(t),ef(e),Vr(r))}function Bh(t,e){return Zl(Object.entries(t).filter(([,r])=>!hs(r)).map(([r,n])=>la(r,Sp(n)?"is":"=",n)),e)}function Zl(t,e){const r=e==="and"?Ni.create:To.create;if(t.length===0)return yn.createImmediate(e==="and");let n=Fh(t[0]);for(let a=1;a<t.length;++a)n=r(n,Fh(t[a]));return t.length>1?xo.create(n):n}function Tg(t){return t==="is"||t==="is not"}function Sp(t){return Ff(t)||Zu(t)}function ef(t){if(mn(t)&&_g.includes(t))return ps.create(t);if(Sr(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Fh(t){return Sr(t)?t.toOperationNode():t}const Eo=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Uh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),tf=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Eo.cloneWithItems(t.orderBy,e):Eo.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Uh.cloneWithItems(t.partitionBy,e):Uh.create(e)})}}),ec=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),$h=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Qh=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return p({...t,having:e==="And"?Ni.create(t.having,r):To.create(t.having,r)})}}),ke=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Eo.cloneWithItems(t.orderBy,e):Eo.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?$h.cloneWithItems(t.groupBy,e):$h.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?Qh.cloneWithOperation(t.having,"And",e):Qh.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Pe(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Lr;const da=class da{constructor(e){M(this,Lr,void 0);Q(this,Lr,p(e))}on(...e){return new da({...o(this,Lr),joinNode:ca.cloneWithOn(o(this,Lr).joinNode,Yt(e))})}onRef(e,r,n){return new da({...o(this,Lr),joinNode:ca.cloneWithOn(o(this,Lr).joinNode,Pn(e,r,n))})}onTrue(){return new da({...o(this,Lr),joinNode:ca.cloneWithOn(o(this,Lr).joinNode,tr.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return o(this,Lr).joinNode}};Lr=new WeakMap;let tc=da;Pe(tc,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Ag=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function kg(t){return Ca(t).map(Ag.create)}var zi;const Sc=class Sc{constructor(e){M(this,zi,void 0);Q(this,zi,p(e))}orderBy(e,r){return new Sc({overNode:tf.cloneWithOrderByItems(o(this,zi).overNode,dl([e,r]))})}partitionBy(e){return new Sc({overNode:tf.cloneWithPartitionByItems(o(this,zi).overNode,kg(e))})}$call(e){return e(this)}toOperationNode(){return o(this,zi).overNode}};zi=new WeakMap;let rc=Sc;Pe(rc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const fa=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Uf.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:hl.createSelectAll(t)})}});function ms(t){return xr(t)?ms(t(Ao())):gi(t)?t.map(e=>jh(e)):[jh(t)]}function jh(t){return mn(t)?fa.create(qg(t)):vp(t)?fa.create(t.toOperationNode()):fa.create(Qp(t))}function eu(t){return t?Array.isArray(t)?t.map(Vh):[Vh(t)]:[fa.createSelectAll()]}function Vh(t){if(mn(t))return fa.createSelectAllFromTable(dr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Wg=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),Rg=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function Dg(t){const e=xr(t)?t(Ao()):t,r=gi(e)?e:p([e]);return Pg(r)}function Pg(t){const e=Lg(t);return[p([...e.keys()].map(bt.create)),Wg.create(t.map(r=>Mg(r,e)))]}function Lg(t){const e=new Map;for(const r of t){const n=Object.keys(r);for(const a of n)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Mg(t,e){const r=Object.keys(t),n=Array.from({length:e.size});let a=!1;for(const m of r){const _=e.get(m);if(hs(_))continue;const x=t[m];(hs(x)||ru(x))&&(a=!0),n[_]=x}if(r.length<e.size||a){const m=Rg.create();return Qf.create(n.map(_=>hs(_)?m:rr(_)))}return Cp.create(n)}const un=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?ec.cloneWithFroms(t.from,e):ec.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),zh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),ha=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Eo.cloneWithItems(t.orderBy,e):Eo.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?zh.cloneWithTables(t.using,e):zh.create(e)})}}),fr=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return p({...t,where:e==="And"?Ni.create(t.where,r):To.create(t.where,r)})}}),Hh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),Bg=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),We=p({is(t){return ke.is(t)||un.is(t)||nc.is(t)||ha.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?fr.cloneWithOperation(t.where,"And",e):fr.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?Hh.cloneWithSelections(t.returning,e):Hh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,r){return p({...t,explain:Bg.create(e,r?.toOperationNode())})}}),Fg=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function zf(t){const e=xr(t)?t(Ao()):t;return Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>Fg.create(bt.create(r),rr(n)))}const Ug=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class $g{constructor(e,r){ye(this,"insertId");ye(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class pl extends Error{constructor(r){super("no result");ye(this,"node");this.node=r}}function ml(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const _r=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?fr.cloneWithOperation(t.indexWhere,"And",e):fr.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?fr.cloneWithOperation(t.indexWhere,"Or",e):fr.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?fr.cloneWithOperation(t.updateWhere,"And",e):fr.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?fr.cloneWithOperation(t.updateWhere,"Or",e):fr.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var nt;const Cn=class Cn{constructor(e){M(this,nt,void 0);Q(this,nt,p(e))}column(e){const r=bt.create(e);return new Cn({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{columns:o(this,nt).onConflictNode.columns?p([...o(this,nt).onConflictNode.columns,r]):p([r])})})}columns(e){const r=e.map(bt.create);return new Cn({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{columns:o(this,nt).onConflictNode.columns?p([...o(this,nt).onConflictNode.columns,...r]):p(r)})})}constraint(e){return new Cn({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{constraint:lt.create(e)})})}expression(e){return new Cn({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Cn({...o(this,nt),onConflictNode:_r.cloneWithIndexWhere(o(this,nt).onConflictNode,Yt(e))})}whereRef(e,r,n){return new Cn({...o(this,nt),onConflictNode:_r.cloneWithIndexWhere(o(this,nt).onConflictNode,Pn(e,r,n))})}clearWhere(){return new Cn({...o(this,nt),onConflictNode:_r.cloneWithoutIndexWhere(o(this,nt).onConflictNode)})}doNothing(){return new Tp({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new sc({...o(this,nt),onConflictNode:_r.cloneWith(o(this,nt).onConflictNode,{updates:zf(e)})})}$call(e){return e(this)}};nt=new WeakMap;let ic=Cn;Pe(ic,"don't await OnConflictBuilder instances.");var Ra;class Tp{constructor(e){M(this,Ra,void 0);Q(this,Ra,p(e))}toOperationNode(){return o(this,Ra).onConflictNode}}Ra=new WeakMap;Pe(Tp,"don't await OnConflictDoNothingBuilder instances.");var Mr;const pa=class pa{constructor(e){M(this,Mr,void 0);Q(this,Mr,p(e))}where(...e){return new pa({...o(this,Mr),onConflictNode:_r.cloneWithUpdateWhere(o(this,Mr).onConflictNode,Yt(e))})}whereRef(e,r,n){return new pa({...o(this,Mr),onConflictNode:_r.cloneWithUpdateWhere(o(this,Mr).onConflictNode,Pn(e,r,n))})}clearWhere(){return new pa({...o(this,Mr),onConflictNode:_r.cloneWithoutUpdateWhere(o(this,Mr).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return o(this,Mr).onConflictNode}};Mr=new WeakMap;let sc=pa;Pe(sc,"don't await OnConflictUpdateBuilder instances.");var Te;const zt=class zt{constructor(e){M(this,Te,void 0);Q(this,Te,p(e))}values(e){const[r,n]=Dg(e);return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{columns:r,values:n})})}columns(e){return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{columns:p(e.map(bt.create))})})}expression(e){return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{values:ko(e)})})}ignore(){return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{ignore:!0})})}onConflict(e){return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{onConflict:e(new ic({onConflictNode:_r.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new zt({...o(this,Te),queryNode:un.cloneWith(o(this,Te).queryNode,{onDuplicateKey:Ug.create(zf(e))})})}returning(e){return new zt({...o(this,Te),queryNode:We.cloneWithReturning(o(this,Te).queryNode,ms(e))})}returningAll(){return new zt({...o(this,Te),queryNode:We.cloneWithReturning(o(this,Te).queryNode,eu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new zt({...o(this,Te)})}$castTo(){return new zt(o(this,Te))}$narrowType(){return new zt(o(this,Te))}$assertType(){return new zt(o(this,Te))}withPlugin(e){return new zt({...o(this,Te),executor:o(this,Te).executor.withPlugin(e)})}toOperationNode(){return o(this,Te).executor.transformQuery(o(this,Te).queryNode,o(this,Te).queryId)}compile(){return o(this,Te).executor.compileQuery(this.toOperationNode(),o(this,Te).queryId)}async execute(){const e=this.compile(),r=e.query,n=await o(this,Te).executor.executeQuery(e,o(this,Te).queryId);return o(this,Te).executor.adapter.supportsReturning&&r.returning?n.rows:[new $g(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const r=await this.executeTakeFirst();if(r===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),n=o(this,Te).executor.stream(r,e,o(this,Te).queryId);for await(const a of n)yield*a.rows}async explain(e,r){return await new zt({...o(this,Te),queryNode:We.cloneWithExplain(o(this,Te).queryNode,e,r)}).execute()}};Te=new WeakMap;let Ia=zt;Pe(Ia,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Qg{constructor(e){ye(this,"numDeletedRows");this.numDeletedRows=e}}const Ap=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:yn.create(t)})}});var we;const xt=class xt{constructor(e){M(this,we,void 0);Q(this,we,p(e))}where(...e){return new xt({...o(this,we),queryNode:We.cloneWithWhere(o(this,we).queryNode,Yt(e))})}whereRef(e,r,n){return new xt({...o(this,we),queryNode:We.cloneWithWhere(o(this,we).queryNode,Pn(e,r,n))})}clearWhere(){return new xt({...o(this,we),queryNode:We.cloneWithoutWhere(o(this,we).queryNode)})}using(e){return new xt({...o(this,we),queryNode:ha.cloneWithUsing(o(this,we).queryNode,Ta(e))})}innerJoin(...e){return new xt({...o(this,we),queryNode:We.cloneWithJoin(o(this,we).queryNode,hr("InnerJoin",e))})}leftJoin(...e){return new xt({...o(this,we),queryNode:We.cloneWithJoin(o(this,we).queryNode,hr("LeftJoin",e))})}rightJoin(...e){return new xt({...o(this,we),queryNode:We.cloneWithJoin(o(this,we).queryNode,hr("RightJoin",e))})}fullJoin(...e){return new xt({...o(this,we),queryNode:We.cloneWithJoin(o(this,we).queryNode,hr("FullJoin",e))})}returning(e){return new xt({...o(this,we),queryNode:We.cloneWithReturning(o(this,we).queryNode,ms(e))})}returningAll(e){return new xt({...o(this,we),queryNode:We.cloneWithReturning(o(this,we).queryNode,eu(e))})}orderBy(e,r){return new xt({...o(this,we),queryNode:ha.cloneWithOrderByItems(o(this,we).queryNode,dl([e,r]))})}limit(e){return new xt({...o(this,we),queryNode:ha.cloneWithLimit(o(this,we).queryNode,Ap.create(e))})}$call(e){return e(this)}$if(e,r){return e?r(this):new xt({...o(this,we)})}$castTo(){return new xt(o(this,we))}$narrowType(){return new xt(o(this,we))}$assertType(){return new xt(o(this,we))}withPlugin(e){return new xt({...o(this,we),executor:o(this,we).executor.withPlugin(e)})}toOperationNode(){return o(this,we).executor.transformQuery(o(this,we).queryNode,o(this,we).queryId)}compile(){return o(this,we).executor.compileQuery(this.toOperationNode(),o(this,we).queryId)}async execute(){const e=this.compile(),r=e.query,n=await o(this,we).executor.executeQuery(e,o(this,we).queryId);return o(this,we).executor.adapter.supportsReturning&&r.returning?n.rows:[new Qg(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const r=await this.executeTakeFirst();if(r===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),n=o(this,we).executor.stream(r,e,o(this,we).queryId);for await(const a of n)yield*a.rows}async explain(e,r){return await new xt({...o(this,we),queryNode:We.cloneWithExplain(o(this,we).queryNode,e,r)}).execute()}};we=new WeakMap;let oc=xt;Pe(oc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class jg{constructor(e,r){ye(this,"numUpdatedRows");ye(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var _e;const Ct=class Ct{constructor(e){M(this,_e,void 0);Q(this,_e,p(e))}where(...e){return new Ct({...o(this,_e),queryNode:We.cloneWithWhere(o(this,_e).queryNode,Yt(e))})}whereRef(e,r,n){return new Ct({...o(this,_e),queryNode:We.cloneWithWhere(o(this,_e).queryNode,Pn(e,r,n))})}clearWhere(){return new Ct({...o(this,_e),queryNode:We.cloneWithoutWhere(o(this,_e).queryNode)})}from(e){return new Ct({...o(this,_e),queryNode:nc.cloneWithFromItems(o(this,_e).queryNode,Ta(e))})}innerJoin(...e){return new Ct({...o(this,_e),queryNode:We.cloneWithJoin(o(this,_e).queryNode,hr("InnerJoin",e))})}leftJoin(...e){return new Ct({...o(this,_e),queryNode:We.cloneWithJoin(o(this,_e).queryNode,hr("LeftJoin",e))})}rightJoin(...e){return new Ct({...o(this,_e),queryNode:We.cloneWithJoin(o(this,_e).queryNode,hr("RightJoin",e))})}fullJoin(...e){return new Ct({...o(this,_e),queryNode:We.cloneWithJoin(o(this,_e).queryNode,hr("FullJoin",e))})}set(e){return new Ct({...o(this,_e),queryNode:nc.cloneWithUpdates(o(this,_e).queryNode,zf(e))})}returning(e){return new Ct({...o(this,_e),queryNode:We.cloneWithReturning(o(this,_e).queryNode,ms(e))})}returningAll(){return new Ct({...o(this,_e),queryNode:We.cloneWithReturning(o(this,_e).queryNode,eu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new Ct({...o(this,_e)})}$castTo(){return new Ct(o(this,_e))}$narrowType(){return new Ct(o(this,_e))}$assertType(){return new Ct(o(this,_e))}withPlugin(e){return new Ct({...o(this,_e),executor:o(this,_e).executor.withPlugin(e)})}toOperationNode(){return o(this,_e).executor.transformQuery(o(this,_e).queryNode,o(this,_e).queryId)}compile(){return o(this,_e).executor.compileQuery(this.toOperationNode(),o(this,_e).queryId)}async execute(){const e=this.compile(),r=e.query,n=await o(this,_e).executor.executeQuery(e,o(this,_e).queryId);return o(this,_e).executor.adapter.supportsReturning&&r.returning?n.rows:[new jg(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const r=await this.executeTakeFirst();if(r===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),n=o(this,_e).executor.stream(r,e,o(this,_e).queryId);for await(const a of n)yield*a.rows}async explain(e,r){return await new Ct({...o(this,_e),queryNode:We.cloneWithExplain(o(this,_e).queryNode,e,r)}).execute()}};_e=new WeakMap;let ac=Ct;Pe(ac,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Kh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:yi.create(t),columns:e?p(e.map(bt.create)):void 0})}}),uc=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var In;const Tc=class Tc{constructor(e){M(this,In,void 0);Q(this,In,p(e))}materialized(){return new Tc({...o(this,In),node:uc.cloneWith(o(this,In).node,{materialized:!0})})}notMaterialized(){return new Tc({...o(this,In),node:uc.cloneWith(o(this,In).node,{materialized:!1})})}toOperationNode(){return o(this,In).node}};In=new WeakMap;let cc=Tc;Pe(cc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Jh(t,e){const r=e(eb()).toOperationNode();return xr(t)?t(Vg(r)).toOperationNode():uc.create(kp(t),r)}function Vg(t){return e=>new cc({node:uc.create(kp(e),t)})}function kp(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],n=e[1].split(",").map(a=>a.trim());return Kh.create(r,n)}else return Kh.create(t)}const Wu=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Gh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function zg(t){let e="";for(let r=0;r<t;++r)e+=Hg();return e}function Hg(){return Gh[~~(Math.random()*Gh.length)]}function Ze(){return new Kg}var Js;class Kg{constructor(){M(this,Js,void 0)}get queryId(){return o(this,Js)===void 0&&Q(this,Js,zg(8)),o(this,Js)}}Js=new WeakMap;var Ac;class Hf{constructor(){ye(this,"nodeStack",[]);M(this,Ac,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),p(r)}transformNodeImpl(e){return o(this,Ac)[e.kind](e)}transformNodeList(e){return e&&p(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Ac=new WeakMap;const Jg=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Gs,Hi,Ki,kc,Wp,Wc,Rp,Rc,Dp,Ji,oa,Da,rf,Dc,Pp;class Gg extends Hf{constructor(r){super();M(this,kc);M(this,Wc);M(this,Rc);M(this,Ji);M(this,Da);M(this,Dc);M(this,Gs,void 0);M(this,Hi,new Set);M(this,Ki,new Set);Q(this,Gs,r)}transformNodeImpl(r){if(!ge(this,kc,Wp).call(this,r))return super.transformNodeImpl(r);const n=ge(this,Rc,Dp).call(this,r);for(const m of n)o(this,Ki).add(m);const a=ge(this,Wc,Rp).call(this,r);for(const m of a)o(this,Hi).add(m);const l=super.transformNodeImpl(r);for(const m of a)o(this,Hi).delete(m);for(const m of n)o(this,Ki).delete(m);return l}transformSchemableIdentifier(r){const n=super.transformSchemableIdentifier(r);return n.schema||!o(this,Hi).has(r.identifier.name)?n:{...n,schema:lt.create(o(this,Gs))}}transformReferences(r){const n=super.transformReferences(r);return n.table.table.schema?n:{...n,table:yi.createWithSchema(o(this,Gs),n.table.table.identifier.name)}}}Gs=new WeakMap,Hi=new WeakMap,Ki=new WeakMap,kc=new WeakSet,Wp=function(r){return r.kind in Jg},Wc=new WeakSet,Rp=function(r){const n=new Set;if("name"in r&&r.name&&bi.is(r.name)&&ge(this,Da,rf).call(this,r.name,n),"from"in r&&r.from)for(const a of r.from.froms)ge(this,Ji,oa).call(this,a,n);if("into"in r&&r.into&&ge(this,Ji,oa).call(this,r.into,n),"table"in r&&r.table&&ge(this,Ji,oa).call(this,r.table,n),"joins"in r&&r.joins)for(const a of r.joins)ge(this,Ji,oa).call(this,a.table,n);return n},Rc=new WeakSet,Dp=function(r){const n=new Set;return"with"in r&&r.with&&ge(this,Dc,Pp).call(this,r.with,n),n},Ji=new WeakSet,oa=function(r,n){const a=yi.is(r)?r:_i.is(r)&&yi.is(r.node)?r.node:null;a&&ge(this,Da,rf).call(this,a.table,n)},Da=new WeakSet,rf=function(r,n){const a=r.identifier.name;!o(this,Hi).has(a)&&!o(this,Ki).has(a)&&n.add(a)},Dc=new WeakSet,Pp=function(r,n){for(const a of r.expressions){const l=a.name.table.table.identifier.name;o(this,Ki).has(l)||n.add(l)}};var Pa;class tu{constructor(e){M(this,Pa,void 0);Q(this,Pa,new Gg(e))}transformQuery(e){return o(this,Pa).transformNode(e.node)}async transformResult(e){return e.result}}Pa=new WeakMap;var Xe;const Qi=class Qi{constructor(e){M(this,Xe,void 0);Q(this,Xe,p(e))}selectFrom(e){return hc({queryId:Ze(),executor:o(this,Xe).executor,queryNode:ke.createFrom(Ta(e),o(this,Xe).withNode)})}selectNoFrom(e){return hc({queryId:Ze(),executor:o(this,Xe).executor,queryNode:ke.cloneWithSelections(ke.create(o(this,Xe).withNode),ms(e))})}insertInto(e){return new Ia({queryId:Ze(),executor:o(this,Xe).executor,queryNode:un.create(dr(e),o(this,Xe).withNode)})}replaceInto(e){return new Ia({queryId:Ze(),executor:o(this,Xe).executor,queryNode:un.create(dr(e),o(this,Xe).withNode,!0)})}deleteFrom(e){return new oc({queryId:Ze(),executor:o(this,Xe).executor,queryNode:ha.create(Ta(e),o(this,Xe).withNode)})}updateTable(e){return new ac({queryId:Ze(),executor:o(this,Xe).executor,queryNode:nc.create(Aa(e),o(this,Xe).withNode)})}with(e,r){const n=Jh(e,r);return new Qi({...o(this,Xe),withNode:o(this,Xe).withNode?Wu.cloneWithExpression(o(this,Xe).withNode,n):Wu.create(n)})}withRecursive(e,r){const n=Jh(e,r);return new Qi({...o(this,Xe),withNode:o(this,Xe).withNode?Wu.cloneWithExpression(o(this,Xe).withNode,n):Wu.create(n,{recursive:!0})})}withPlugin(e){return new Qi({...o(this,Xe),executor:o(this,Xe).executor.withPlugin(e)})}withoutPlugins(){return new Qi({...o(this,Xe),executor:o(this,Xe).executor.withoutPlugins()})}withSchema(e){return new Qi({...o(this,Xe),executor:o(this,Xe).executor.withPluginAtFront(new tu(e))})}};Xe=new WeakMap;let lc=Qi;var La,Ys,Xs;class Yh{constructor(){M(this,La,void 0);M(this,Ys,void 0);M(this,Xs,void 0);ye(this,"resolve",e=>{o(this,Ys)&&o(this,Ys).call(this,e)});ye(this,"reject",e=>{o(this,Xs)&&o(this,Xs).call(this,e)});Q(this,La,new Promise((e,r)=>{Q(this,Xs,r),Q(this,Ys,e)}))}get promise(){return o(this,La)}}La=new WeakMap,Ys=new WeakMap,Xs=new WeakMap;const Xh=new Set;function Yg(t){Xh.has(t)||(Xh.add(t),console.log(t))}const Xg=p([]);var Gi,Ma,nf;class Lp{constructor(e=Xg){M(this,Ma);M(this,Gi,void 0);Q(this,Gi,e)}get plugins(){return o(this,Gi)}transformQuery(e,r){for(const n of o(this,Gi)){const a=n.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async n=>{const a=await n.executeQuery(e),l=await ge(this,Ma,nf).call(this,a,r);return Zg(a,l),l})}async*stream(e,r,n){const a=new Yh,l=new Yh;this.provideConnection(async _=>(a.resolve(_),await l.promise)).catch(_=>a.reject(_));const m=await a.promise;try{for await(const _ of m.streamQuery(e,r))yield await ge(this,Ma,nf).call(this,_,n)}finally{l.resolve()}}}Gi=new WeakMap,Ma=new WeakSet,nf=async function(e,r){for(const n of o(this,Gi))e=await n.transformResult({result:e,queryId:r});return e};function Zg(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Yg("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Ms extends Lp{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Ms([...this.plugins,e])}withPlugins(e){return new Ms([...this.plugins,...e])}withPluginAtFront(e){return new Ms([e,...this.plugins])}withoutPlugins(){return new Ms([])}}const Kf=new Ms;function eb(){return new lc({executor:Kf})}function tb(t,e){return new tc({joinNode:ca.create(t,Aa(e))})}function rb(){return new rc({overNode:tf.create()})}function hr(t,e){if(e.length===3)return ib(t,e[0],e[1],e[2]);if(e.length===2)return nb(t,e[0],e[1]);throw new Error("not implemented")}function nb(t,e,r){return r(tb(t,e)).toOperationNode()}function ib(t,e,r,n){return ca.createWithOn(t,Aa(e),Pn(r,"=",n))}const sb=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:yn.create(t)})}}),ob=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function ab(t){return t=xr(t)?t(Ao()):t,Ca(t).map(ob.create)}const Mp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return p({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function ks(t,e,r){return xr(e)&&(e=e(Yf())),gi(e)||(e=[e]),e.map(n=>Mp.create(t,ko(n),r))}var ii;const rh=class rh{constructor(e){M(this,ii,void 0);Q(this,ii,e)}get expressionType(){}as(e){return new Jf(this,e)}or(...e){return new sf(To.create(o(this,ii),Yt(e)))}and(...e){return new of(Ni.create(o(this,ii),Yt(e)))}$castTo(){return new rh(o(this,ii))}toOperationNode(){return o(this,ii)}};ii=new WeakMap;let st=rh;var Zs,si;class Jf{constructor(e,r){M(this,Zs,void 0);M(this,si,void 0);Q(this,Zs,e),Q(this,si,r)}get expression(){return o(this,Zs)}get alias(){return o(this,si)}toOperationNode(){return _i.create(o(this,Zs).toOperationNode(),Sr(o(this,si))?o(this,si).toOperationNode():lt.create(o(this,si)))}}Zs=new WeakMap,si=new WeakMap;var Yi;const Pc=class Pc{constructor(e){M(this,Yi,void 0);Q(this,Yi,e)}get expressionType(){}as(e){return new Jf(this,e)}or(...e){return new Pc(To.create(o(this,Yi),Yt(e)))}$castTo(){return new Pc(o(this,Yi))}toOperationNode(){return xo.create(o(this,Yi))}};Yi=new WeakMap;let sf=Pc;var Xi;const Lc=class Lc{constructor(e){M(this,Xi,void 0);Q(this,Xi,e)}get expressionType(){}as(e){return new Jf(this,e)}and(...e){return new Lc(Ni.create(o(this,Xi),Yt(e)))}$castTo(){return new Lc(o(this,Xi))}toOperationNode(){return xo.create(o(this,Xi))}};Xi=new WeakMap;let of=Lc;var J;const be=class be{constructor(e){M(this,J,void 0);Q(this,J,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new be({...o(this,J),queryNode:We.cloneWithWhere(o(this,J).queryNode,Yt(e))})}whereRef(e,r,n){return new be({...o(this,J),queryNode:We.cloneWithWhere(o(this,J).queryNode,Pn(e,r,n))})}having(...e){return new be({...o(this,J),queryNode:ke.cloneWithHaving(o(this,J).queryNode,Yt(e))})}havingRef(e,r,n){return new be({...o(this,J),queryNode:ke.cloneWithHaving(o(this,J).queryNode,Pn(e,r,n))})}select(e){return new be({...o(this,J),queryNode:ke.cloneWithSelections(o(this,J).queryNode,ms(e))})}distinctOn(e){return new be({...o(this,J),queryNode:ke.cloneWithDistinctOn(o(this,J).queryNode,Ca(e))})}modifyFront(e){return new be({...o(this,J),queryNode:ke.cloneWithFrontModifier(o(this,J).queryNode,En.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.createWithExpression(e.toOperationNode()))})}distinct(){return new be({...o(this,J),queryNode:ke.cloneWithFrontModifier(o(this,J).queryNode,En.create("Distinct"))})}forUpdate(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("ForUpdate"))})}forShare(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("ForShare"))})}forKeyShare(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("ForKeyShare"))})}forNoKeyUpdate(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("ForNoKeyUpdate"))})}skipLocked(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("SkipLocked"))})}noWait(){return new be({...o(this,J),queryNode:ke.cloneWithEndModifier(o(this,J).queryNode,En.create("NoWait"))})}selectAll(e){return new be({...o(this,J),queryNode:ke.cloneWithSelections(o(this,J).queryNode,eu(e))})}innerJoin(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("InnerJoin",e))})}leftJoin(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("LeftJoin",e))})}rightJoin(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("RightJoin",e))})}fullJoin(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("FullJoin",e))})}innerJoinLateral(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("LateralInnerJoin",e))})}leftJoinLateral(...e){return new be({...o(this,J),queryNode:We.cloneWithJoin(o(this,J).queryNode,hr("LateralLeftJoin",e))})}orderBy(...e){return new be({...o(this,J),queryNode:ke.cloneWithOrderByItems(o(this,J).queryNode,dl(e))})}groupBy(e){return new be({...o(this,J),queryNode:ke.cloneWithGroupByItems(o(this,J).queryNode,ab(e))})}limit(e){return new be({...o(this,J),queryNode:ke.cloneWithLimit(o(this,J).queryNode,Ap.create(e))})}offset(e){return new be({...o(this,J),queryNode:ke.cloneWithOffset(o(this,J).queryNode,sb.create(e))})}union(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("union",e,!1))})}unionAll(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("union",e,!0))})}intersect(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("intersect",e,!1))})}intersectAll(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("intersect",e,!0))})}except(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("except",e,!1))})}exceptAll(e){return new be({...o(this,J),queryNode:ke.cloneWithSetOperations(o(this,J).queryNode,ks("except",e,!0))})}as(e){return new Bp(this,e)}clearSelect(){return new be({...o(this,J),queryNode:ke.cloneWithoutSelections(o(this,J).queryNode)})}clearWhere(){return new be({...o(this,J),queryNode:We.cloneWithoutWhere(o(this,J).queryNode)})}clearLimit(){return new be({...o(this,J),queryNode:ke.cloneWithoutLimit(o(this,J).queryNode)})}clearOffset(){return new be({...o(this,J),queryNode:ke.cloneWithoutOffset(o(this,J).queryNode)})}clearOrderBy(){return new be({...o(this,J),queryNode:ke.cloneWithoutOrderBy(o(this,J).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new be({...o(this,J)})}$castTo(){return new be(o(this,J))}$narrowType(){return new be(o(this,J))}$assertType(){return new be(o(this,J))}$asTuple(){return new st(this.toOperationNode())}withPlugin(e){return new be({...o(this,J),executor:o(this,J).executor.withPlugin(e)})}toOperationNode(){return o(this,J).executor.transformQuery(o(this,J).queryNode,o(this,J).queryId)}compile(){return o(this,J).executor.compileQuery(this.toOperationNode(),o(this,J).queryId)}async execute(){const e=this.compile();return(await o(this,J).executor.executeQuery(e,o(this,J).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const r=await this.executeTakeFirst();if(r===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),n=o(this,J).executor.stream(r,e,o(this,J).queryId);for await(const a of n)yield*a.rows}async explain(e,r){return await new be({...o(this,J),queryNode:We.cloneWithExplain(o(this,J).queryNode,e,r)}).execute()}};J=new WeakMap;let fc=be;Pe(fc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function hc(t){return new fc(t)}var eo,to;class Bp{constructor(e,r){M(this,eo,void 0);M(this,to,void 0);Q(this,eo,e),Q(this,to,r)}get expression(){return o(this,eo)}get alias(){return o(this,to)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return _i.create(o(this,eo).toOperationNode(),lt.create(o(this,to)))}}eo=new WeakMap,to=new WeakMap;Pe(Bp,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Bs=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?fr.cloneWithOperation(t.filter,"And",e):fr.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?fr.cloneWithOperation(t.filter,"Or",e):fr.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),ub=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var gr;const Us=class Us{constructor(e){M(this,gr,void 0);Q(this,gr,p(e))}get expressionType(){}as(e){return new cb(this,e)}distinct(){return new Us({...o(this,gr),aggregateFunctionNode:Bs.cloneWithDistinct(o(this,gr).aggregateFunctionNode)})}filterWhere(...e){return new Us({...o(this,gr),aggregateFunctionNode:Bs.cloneWithFilter(o(this,gr).aggregateFunctionNode,Yt(e))})}filterWhereRef(e,r,n){return new Us({...o(this,gr),aggregateFunctionNode:Bs.cloneWithFilter(o(this,gr).aggregateFunctionNode,Pn(e,r,n))})}over(e){const r=rb();return new Us({...o(this,gr),aggregateFunctionNode:Bs.cloneWithOver(o(this,gr).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return o(this,gr).aggregateFunctionNode}};gr=new WeakMap;let Sa=Us;Pe(Sa,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var ro,no;class cb{constructor(e,r){M(this,ro,void 0);M(this,no,void 0);Q(this,ro,e),Q(this,no,r)}get expression(){return o(this,ro)}get alias(){return o(this,no)}toOperationNode(){return _i.create(o(this,ro).toOperationNode(),lt.create(o(this,no)))}}ro=new WeakMap,no=new WeakMap;function Fp(){const t=(r,n)=>new st(ub.create(r,Ca(n))),e=(r,n)=>new Sa({aggregateFunctionNode:Bs.create(r,n?Ca(n):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...n){return t("coalesce",[r,...n])},count(r){return e("count",[r])},countAll(r){return new Sa({aggregateFunctionNode:Bs.create("count",eu(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])}})}const lb=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function fb(t,e){return lb.create(ps.create(t),Vr(e))}const Gf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),hn=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Gf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var io;class Up{constructor(e){M(this,io,void 0);Q(this,io,p(e))}when(...e){return new $p({...o(this,io),node:hn.cloneWithWhen(o(this,io).node,Gf.create(Yt(e)))})}}io=new WeakMap;var so;class $p{constructor(e){M(this,so,void 0);Q(this,so,p(e))}then(e){return new hb({...o(this,so),node:hn.cloneWithThen(o(this,so).node,jf(e)?Vf(e):rr(e))})}}so=new WeakMap;var rn;class hb{constructor(e){M(this,rn,void 0);Q(this,rn,p(e))}when(...e){return new $p({...o(this,rn),node:hn.cloneWithWhen(o(this,rn).node,Gf.create(Yt(e)))})}else(e){return new db({...o(this,rn),node:hn.cloneWith(o(this,rn).node,{else:jf(e)?Vf(e):rr(e)})})}end(){return new st(hn.cloneWith(o(this,rn).node,{isStatement:!1}))}endCase(){return new st(hn.cloneWith(o(this,rn).node,{isStatement:!0}))}}rn=new WeakMap;var oo;class db{constructor(e){M(this,oo,void 0);Q(this,oo,p(e))}end(){return new st(hn.cloneWith(o(this,oo).node,{isStatement:!1}))}endCase(){return new st(hn.cloneWith(o(this,oo).node,{isStatement:!0}))}}oo=new WeakMap;const pb=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var oi,Ba,uf;class af{constructor(e){M(this,Ba);M(this,oi,void 0);Q(this,oi,e)}at(e){return ge(this,Ba,uf).call(this,"ArrayLocation",e)}key(e){return ge(this,Ba,uf).call(this,"Member",e)}}oi=new WeakMap,Ba=new WeakSet,uf=function(e,r){return new mb(Yl.cloneWithTraversal(o(this,oi),Xl.is(o(this,oi).traversal)?Xl.cloneWithLeg(o(this,oi).traversal,pb.create(e,r)):Ep.cloneWithValue(o(this,oi).traversal,yn.createImmediate(r))))};var ao;class mb extends af{constructor(r){super(r);M(this,ao,void 0);Q(this,ao,r)}get expressionType(){}as(r){return new yb(this,r)}$castTo(){return new af(o(this,ao))}toOperationNode(){return o(this,ao)}}ao=new WeakMap;var uo,ai;class yb{constructor(e,r){M(this,uo,void 0);M(this,ai,void 0);Q(this,uo,e),Q(this,ai,r)}get expression(){return o(this,uo)}get alias(){return o(this,ai)}toOperationNode(){return _i.create(o(this,uo).toOperationNode(),Sr(o(this,ai))?o(this,ai).toOperationNode():lt.create(o(this,ai)))}}uo=new WeakMap,ai=new WeakMap;const Zh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Yf(t=Kf){function e(a,l,m){return new st(la(a,l,m))}function r(a,l){return new st(fb(a,l))}const n=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return hc({queryId:Ze(),executor:t,queryNode:ke.createFrom(Ta(a))})},selectNoFrom(a){return hc({queryId:Ze(),executor:t,queryNode:ke.cloneWithSelections(ke.create(),ms(a))})},case(a){return new Up({node:hn.create(hs(a)?void 0:Vr(a))})},ref(a,l){return hs(l)?new st(Dn(a)):new af(Og(a,l))},val(a){return new st(Ip(a))},refTuple(...a){return new st(Zh.create(a.map(Vr)))},tuple(...a){return new st(Zh.create(a.map(rr)))},lit(a){return new st(Vf(a))},cmpr(a,l,m){return new st(la(a,l,m))},bxp(a,l,m){return new st(la(a,l,m))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,m){return new st(qa.create(Vr(a),ps.create("between"),Ni.create(rr(l),rr(m))))},betweenSymmetric(a,l,m){return new st(qa.create(Vr(a),ps.create("between symmetric"),Ni.create(rr(l),rr(m))))},and(a){return gi(a)?new st(Zl(a,"and")):new st(Bh(a,"and"))},or(a){return gi(a)?new st(Zl(a,"or")):new st(Bh(a,"or"))},parens(...a){const l=Yt(a);return xo.is(l)?new st(l):new st(xo.create(l))},withSchema(a){return Yf(t.withPluginAtFront(new tu(a)))}});return n.fn=Fp(),n.eb=n,n}function Ao(t){return Yf()}function ko(t){if(Sr(t))return t.toOperationNode();if(xr(t))return t(Ao()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Qp(t){if(Sr(t))return t.toOperationNode();if(xr(t))return t(Ao()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ru(t){return mg(t)||yg(t)||xr(t)}function Ta(t){return gi(t)?t.map(e=>Aa(e)):[Aa(t)]}function Aa(t){return mn(t)?wb(t):Qp(t)}function wb(t){const e=" as ";if(t.includes(e)){const[r,n]=t.split(e).map(jp);return _i.create(dr(r),lt.create(n))}else return dr(t)}function dr(t){const e=".";if(t.includes(e)){const[r,n]=t.split(e).map(jp);return yi.createWithSchema(r,n)}else return yi.create(t)}function jp(t){return t.trim()}const Vp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),yt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:bt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),zp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:bt.create(t)})}}),Hp=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:bt.create(t),renameTo:bt.create(e)})}}),Xf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?lt.create(e):void 0})}}),gb=["no action","restrict","cascade","set null","set default"],Uu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function Kp(t){return Sr(t)?t.toOperationNode():yn.createImmediate(t)}const Ru=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),bb=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function dc(t){if(gb.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var et;const kt=class kt{constructor(e){M(this,et,void 0);Q(this,et,e)}autoIncrement(){return new kt(yt.cloneWith(o(this,et),{autoIncrement:!0}))}primaryKey(){return new kt(yt.cloneWith(o(this,et),{primaryKey:!0}))}references(e){const r=Dn(e);if(!r.table||Uf.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new kt(yt.cloneWith(o(this,et),{references:Uu.create(r.table,[r.column])}))}onDelete(e){if(!o(this,et).references)throw new Error("on delete constraint can only be added for foreign keys");return new kt(yt.cloneWith(o(this,et),{references:Uu.cloneWithOnDelete(o(this,et).references,dc(e))}))}onUpdate(e){if(!o(this,et).references)throw new Error("on update constraint can only be added for foreign keys");return new kt(yt.cloneWith(o(this,et),{references:Uu.cloneWithOnUpdate(o(this,et).references,dc(e))}))}unique(){return new kt(yt.cloneWith(o(this,et),{unique:!0}))}notNull(){return new kt(yt.cloneWith(o(this,et),{notNull:!0}))}unsigned(){return new kt(yt.cloneWith(o(this,et),{unsigned:!0}))}defaultTo(e){return new kt(yt.cloneWith(o(this,et),{defaultTo:bb.create(Kp(e))}))}check(e){return new kt(yt.cloneWith(o(this,et),{check:Xf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new kt(yt.cloneWith(o(this,et),{generated:Ru.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new kt(yt.cloneWith(o(this,et),{generated:Ru.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new kt(yt.cloneWith(o(this,et),{generated:Ru.create({identity:!0,byDefault:!0})}))}stored(){if(!o(this,et).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new kt(yt.cloneWith(o(this,et),{generated:Ru.cloneWith(o(this,et).generated,{stored:!0})}))}modifyFront(e){return new kt(yt.cloneWithFrontModifier(o(this,et),e.toOperationNode()))}modifyEnd(e){return new kt(yt.cloneWithEndModifier(o(this,et),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return o(this,et)}};et=new WeakMap;let vi=kt;Pe(vi,"don't await ColumnDefinitionBuilder instances directly.");const Jp=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),Nb=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function Oo(t){return Sr(t)?t.toOperationNode():Nb.create(t)}const pc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,n){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Uu.create(e,r),name:n?lt.create(n):void 0})},cloneWith(t,e){return p({...t,...e})}});var Zi;const Mc=class Mc{constructor(e){M(this,Zi,void 0);Q(this,Zi,e)}onDelete(e){return new Mc(pc.cloneWith(o(this,Zi),{onDelete:dc(e)}))}onUpdate(e){return new Mc(pc.cloneWith(o(this,Zi),{onUpdate:dc(e)}))}$call(e){return e(this)}toOperationNode(){return o(this,Zi)}};Zi=new WeakMap;let ka=Mc;Pe(ka,"don't await ForeignKeyConstraintBuilder instances directly.");const $u=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),Gp=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(bt.create)),name:e?lt.create(e):void 0})}}),Qu=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:lt.create(t)})},cloneWith(t,e){return p({...t,...e})}}),ra=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return p({kind:"AlterColumnNode",column:bt.create(t),[e]:r})}});var Sn;class Zf{constructor(e){M(this,Sn,void 0);Q(this,Sn,e)}setDataType(e){return new na(ra.create(o(this,Sn),"dataType",Oo(e)))}setDefault(e){return new na(ra.create(o(this,Sn),"setDefault",Kp(e)))}dropDefault(){return new na(ra.create(o(this,Sn),"dropDefault",!0))}setNotNull(){return new na(ra.create(o(this,Sn),"setNotNull",!0))}dropNotNull(){return new na(ra.create(o(this,Sn),"dropNotNull",!0))}$call(e){return e(this)}}Sn=new WeakMap;var Fa;class na{constructor(e){M(this,Fa,void 0);Q(this,Fa,e)}toOperationNode(){return o(this,Fa)}}Fa=new WeakMap;var Br;class Rs{constructor(e){M(this,Br,void 0);Q(this,Br,p(e))}toOperationNode(){return o(this,Br).executor.transformQuery(o(this,Br).node,o(this,Br).queryId)}compile(){return o(this,Br).executor.compileQuery(this.toOperationNode(),o(this,Br).queryId)}async execute(){await o(this,Br).executor.executeQuery(this.compile(),o(this,Br).queryId)}}Br=new WeakMap;Pe(Rs,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Ht;const Bc=class Bc{constructor(e){M(this,Ht,void 0);Q(this,Ht,p(e))}onDelete(e){return new Bc({...o(this,Ht),constraintBuilder:o(this,Ht).constraintBuilder.onDelete(e)})}onUpdate(e){return new Bc({...o(this,Ht),constraintBuilder:o(this,Ht).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return o(this,Ht).executor.transformQuery(gt.cloneWithTableProps(o(this,Ht).node,{addConstraint:$u.create(o(this,Ht).constraintBuilder.toOperationNode())}),o(this,Ht).queryId)}compile(){return o(this,Ht).executor.compileQuery(this.toOperationNode(),o(this,Ht).queryId)}async execute(){await o(this,Ht).executor.executeQuery(this.compile(),o(this,Ht).queryId)}};Ht=new WeakMap;let mc=Bc;Pe(mc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Et;const ma=class ma{constructor(e){M(this,Et,void 0);Q(this,Et,p(e))}ifExists(){return new ma({...o(this,Et),node:gt.cloneWithTableProps(o(this,Et).node,{dropConstraint:Qu.cloneWith(o(this,Et).node.dropConstraint,{ifExists:!0})})})}cascade(){return new ma({...o(this,Et),node:gt.cloneWithTableProps(o(this,Et).node,{dropConstraint:Qu.cloneWith(o(this,Et).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ma({...o(this,Et),node:gt.cloneWithTableProps(o(this,Et).node,{dropConstraint:Qu.cloneWith(o(this,Et).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return o(this,Et).executor.transformQuery(o(this,Et).node,o(this,Et).queryId)}compile(){return o(this,Et).executor.compileQuery(this.toOperationNode(),o(this,Et).queryId)}async execute(){await o(this,Et).executor.executeQuery(this.compile(),o(this,Et).queryId)}};Et=new WeakMap;let yc=ma;Pe(yc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Yp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(bt.create)),name:e?lt.create(e):void 0})}});var tt;class Xp{constructor(e){M(this,tt,void 0);Q(this,tt,p(e))}renameTo(e){return new Rs({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{renameTo:dr(e)})})}setSchema(e){return new Rs({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{setSchema:lt.create(e)})})}alterColumn(e,r){const n=r(new Zf(e));return new ni({...o(this,tt),node:gt.cloneWithColumnAlteration(o(this,tt).node,n.toOperationNode())})}dropColumn(e){return new ni({...o(this,tt),node:gt.cloneWithColumnAlteration(o(this,tt).node,zp.create(e))})}renameColumn(e,r){return new ni({...o(this,tt),node:gt.cloneWithColumnAlteration(o(this,tt).node,Hp.create(e,r))})}addColumn(e,r,n=_o){const a=n(new vi(yt.create(e,Oo(r))));return new ni({...o(this,tt),node:gt.cloneWithColumnAlteration(o(this,tt).node,Vp.create(a.toOperationNode()))})}modifyColumn(e,r,n=_o){const a=n(new vi(yt.create(e,Oo(r))));return new ni({...o(this,tt),node:gt.cloneWithColumnAlteration(o(this,tt).node,Jp.create(a.toOperationNode()))})}addUniqueConstraint(e,r){return new Rs({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{addConstraint:$u.create(Gp.create(r,e))})})}addCheckConstraint(e,r){return new Rs({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{addConstraint:$u.create(Xf.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,n,a){return new mc({...o(this,tt),constraintBuilder:new ka(pc.create(r.map(bt.create),dr(n),a.map(bt.create),e))})}addPrimaryKeyConstraint(e,r){return new Rs({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{addConstraint:$u.create(Yp.create(r,e))})})}dropConstraint(e){return new yc({...o(this,tt),node:gt.cloneWithTableProps(o(this,tt).node,{dropConstraint:Qu.create(e)})})}$call(e){return e(this)}}tt=new WeakMap;var mt;const ji=class ji{constructor(e){M(this,mt,void 0);Q(this,mt,p(e))}alterColumn(e,r){const n=r(new Zf(e));return new ji({...o(this,mt),node:gt.cloneWithColumnAlteration(o(this,mt).node,n.toOperationNode())})}dropColumn(e){return new ji({...o(this,mt),node:gt.cloneWithColumnAlteration(o(this,mt).node,zp.create(e))})}renameColumn(e,r){return new ji({...o(this,mt),node:gt.cloneWithColumnAlteration(o(this,mt).node,Hp.create(e,r))})}addColumn(e,r,n=_o){const a=n(new vi(yt.create(e,Oo(r))));return new ji({...o(this,mt),node:gt.cloneWithColumnAlteration(o(this,mt).node,Vp.create(a.toOperationNode()))})}modifyColumn(e,r,n=_o){const a=n(new vi(yt.create(e,Oo(r))));return new ji({...o(this,mt),node:gt.cloneWithColumnAlteration(o(this,mt).node,Jp.create(a.toOperationNode()))})}toOperationNode(){return o(this,mt).executor.transformQuery(o(this,mt).node,o(this,mt).queryId)}compile(){return o(this,mt).executor.compileQuery(this.toOperationNode(),o(this,mt).queryId)}async execute(){await o(this,mt).executor.executeQuery(this.compile(),o(this,mt).queryId)}};mt=new WeakMap;let ni=ji;Pe(Xp,"don't await AlterTableBuilder instances");Pe(Zf,"don't await AlterColumnBuilder instances");Pe(ni,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Zp extends Hf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var rt;const en=class en{constructor(e){M(this,rt,void 0);Q(this,rt,p(e))}ifNotExists(){return new en({...o(this,rt),node:Xn.cloneWith(o(this,rt).node,{ifNotExists:!0})})}unique(){return new en({...o(this,rt),node:Xn.cloneWith(o(this,rt).node,{unique:!0})})}on(e){return new en({...o(this,rt),node:Xn.cloneWith(o(this,rt).node,{table:dr(e)})})}column(e){return new en({...o(this,rt),node:Xn.cloneWithColumns(o(this,rt).node,[Mh(e)])})}columns(e){return new en({...o(this,rt),node:Xn.cloneWithColumns(o(this,rt).node,e.map(Mh))})}expression(e){return new en({...o(this,rt),node:Xn.cloneWithColumns(o(this,rt).node,[e.toOperationNode()])})}using(e){return new en({...o(this,rt),node:Xn.cloneWith(o(this,rt).node,{using:tr.createWithSql(e)})})}where(...e){const r=new Zp;return new en({...o(this,rt),node:We.cloneWithWhere(o(this,rt).node,r.transformNode(Yt(e)))})}$call(e){return e(this)}toOperationNode(){return o(this,rt).executor.transformQuery(o(this,rt).node,o(this,rt).queryId)}compile(){return o(this,rt).executor.compileQuery(this.toOperationNode(),o(this,rt).queryId)}async execute(){await o(this,rt).executor.executeQuery(this.compile(),o(this,rt).queryId)}};rt=new WeakMap;let wc=en;Pe(wc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var br;const nh=class nh{constructor(e){M(this,br,void 0);Q(this,br,p(e))}ifNotExists(){return new nh({...o(this,br),node:bp.cloneWith(o(this,br).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,br).executor.transformQuery(o(this,br).node,o(this,br).queryId)}compile(){return o(this,br).executor.compileQuery(this.toOperationNode(),o(this,br).queryId)}async execute(){await o(this,br).executor.executeQuery(this.compile(),o(this,br).queryId)}};br=new WeakMap;let gc=nh;Pe(gc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function vb(t){if(pg.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var $e;const Ir=class Ir{constructor(e){M(this,$e,void 0);Q(this,$e,p(e))}temporary(){return new Ir({...o(this,$e),node:Dr.cloneWith(o(this,$e).node,{temporary:!0})})}onCommit(e){return new Ir({...o(this,$e),node:Dr.cloneWith(o(this,$e).node,{onCommit:vb(e)})})}ifNotExists(){return new Ir({...o(this,$e),node:Dr.cloneWith(o(this,$e).node,{ifNotExists:!0})})}addColumn(e,r,n=_o){const a=n(new vi(yt.create(e,Oo(r))));return new Ir({...o(this,$e),node:Dr.cloneWithColumn(o(this,$e).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Ir({...o(this,$e),node:Dr.cloneWithConstraint(o(this,$e).node,Yp.create(r,e))})}addUniqueConstraint(e,r){return new Ir({...o(this,$e),node:Dr.cloneWithConstraint(o(this,$e).node,Gp.create(r,e))})}addCheckConstraint(e,r){return new Ir({...o(this,$e),node:Dr.cloneWithConstraint(o(this,$e).node,Xf.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,n,a,l=_o){const m=l(new ka(pc.create(r.map(bt.create),dr(n),a.map(bt.create),e)));return new Ir({...o(this,$e),node:Dr.cloneWithConstraint(o(this,$e).node,m.toOperationNode())})}modifyFront(e){return new Ir({...o(this,$e),node:Dr.cloneWithFrontModifier(o(this,$e).node,e.toOperationNode())})}modifyEnd(e){return new Ir({...o(this,$e),node:Dr.cloneWithEndModifier(o(this,$e).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return o(this,$e).executor.transformQuery(o(this,$e).node,o(this,$e).queryId)}compile(){return o(this,$e).executor.compileQuery(this.toOperationNode(),o(this,$e).queryId)}async execute(){await o(this,$e).executor.executeQuery(this.compile(),o(this,$e).queryId)}};$e=new WeakMap;let bc=Ir;Pe(bc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Bt;const ya=class ya{constructor(e){M(this,Bt,void 0);Q(this,Bt,p(e))}on(e){return new ya({...o(this,Bt),node:Fu.cloneWith(o(this,Bt).node,{table:dr(e)})})}ifExists(){return new ya({...o(this,Bt),node:Fu.cloneWith(o(this,Bt).node,{ifExists:!0})})}cascade(){return new ya({...o(this,Bt),node:Fu.cloneWith(o(this,Bt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,Bt).executor.transformQuery(o(this,Bt).node,o(this,Bt).queryId)}compile(){return o(this,Bt).executor.compileQuery(this.toOperationNode(),o(this,Bt).queryId)}async execute(){await o(this,Bt).executor.executeQuery(this.compile(),o(this,Bt).queryId)}};Bt=new WeakMap;let Nc=ya;Pe(Nc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Zt;const Fc=class Fc{constructor(e){M(this,Zt,void 0);Q(this,Zt,p(e))}ifExists(){return new Fc({...o(this,Zt),node:Kl.cloneWith(o(this,Zt).node,{ifExists:!0})})}cascade(){return new Fc({...o(this,Zt),node:Kl.cloneWith(o(this,Zt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,Zt).executor.transformQuery(o(this,Zt).node,o(this,Zt).queryId)}compile(){return o(this,Zt).executor.compileQuery(this.toOperationNode(),o(this,Zt).queryId)}async execute(){await o(this,Zt).executor.executeQuery(this.compile(),o(this,Zt).queryId)}};Zt=new WeakMap;let vc=Fc;Pe(vc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var er;const Uc=class Uc{constructor(e){M(this,er,void 0);Q(this,er,p(e))}ifExists(){return new Uc({...o(this,er),node:Jl.cloneWith(o(this,er).node,{ifExists:!0})})}cascade(){return new Uc({...o(this,er),node:Jl.cloneWith(o(this,er).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,er).executor.transformQuery(o(this,er).node,o(this,er).queryId)}compile(){return o(this,er).executor.compileQuery(this.toOperationNode(),o(this,er).queryId)}async execute(){await o(this,er).executor.executeQuery(this.compile(),o(this,er).queryId)}};er=new WeakMap;let _c=Uc;Pe(_c,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const ti=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:bi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var $c;class _b{constructor(){M(this,$c,new Zp)}transformQuery(e){return o(this,$c).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}$c=new WeakMap;var ct;const ri=class ri{constructor(e){M(this,ct,void 0);Q(this,ct,p(e))}temporary(){return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{temporary:!0})})}materialized(){return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{materialized:!0})})}ifNotExists(){return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{ifNotExists:!0})})}orReplace(){return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{orReplace:!0})})}columns(e){return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{columns:e.map(qp)})})}as(e){const r=e.withPlugin(new _b).toOperationNode();return new ri({...o(this,ct),node:ti.cloneWith(o(this,ct).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return o(this,ct).executor.transformQuery(o(this,ct).node,o(this,ct).queryId)}compile(){return o(this,ct).executor.compileQuery(this.toOperationNode(),o(this,ct).queryId)}async execute(){await o(this,ct).executor.executeQuery(this.compile(),o(this,ct).queryId)}};ct=new WeakMap;let xc=ri;Pe(xc,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const ju=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:bi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Ft;const wa=class wa{constructor(e){M(this,Ft,void 0);Q(this,Ft,p(e))}materialized(){return new wa({...o(this,Ft),node:ju.cloneWith(o(this,Ft).node,{materialized:!0})})}ifExists(){return new wa({...o(this,Ft),node:ju.cloneWith(o(this,Ft).node,{ifExists:!0})})}cascade(){return new wa({...o(this,Ft),node:ju.cloneWith(o(this,Ft).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,Ft).executor.transformQuery(o(this,Ft).node,o(this,Ft).queryId)}compile(){return o(this,Ft).executor.compileQuery(this.toOperationNode(),o(this,Ft).queryId)}async execute(){await o(this,Ft).executor.executeQuery(this.compile(),o(this,Ft).queryId)}};Ft=new WeakMap;let Ec=wa;Pe(Ec,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const em=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:Qf.create(e.map(r=>yn.createImmediate(r)))})}});var Nr;const ih=class ih{constructor(e){M(this,Nr,void 0);Q(this,Nr,p(e))}toOperationNode(){return o(this,Nr).executor.transformQuery(o(this,Nr).node,o(this,Nr).queryId)}asEnum(e){return new ih({...o(this,Nr),node:em.cloneWithEnum(o(this,Nr).node,e)})}$call(e){return e(this)}compile(){return o(this,Nr).executor.compileQuery(this.toOperationNode(),o(this,Nr).queryId)}async execute(){await o(this,Nr).executor.executeQuery(this.compile(),o(this,Nr).queryId)}};Nr=new WeakMap;let Oc=ih;Pe(Oc,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const tm=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var vr;const sh=class sh{constructor(e){M(this,vr,void 0);Q(this,vr,p(e))}ifExists(){return new sh({...o(this,vr),node:tm.cloneWith(o(this,vr).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return o(this,vr).executor.transformQuery(o(this,vr).node,o(this,vr).queryId)}compile(){return o(this,vr).executor.compileQuery(this.toOperationNode(),o(this,vr).queryId)}async execute(){await o(this,vr).executor.executeQuery(this.compile(),o(this,vr).queryId)}};vr=new WeakMap;let qc=sh;Pe(qc,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function ed(t){const e=".";if(t.includes(e)){const r=t.split(e).map(xb);if(r.length===2)return bi.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return bi.create(t)}function xb(t){return t.trim()}var Wt;const ga=class ga{constructor(e){M(this,Wt,void 0);Q(this,Wt,e)}createTable(e){return new bc({queryId:Ze(),executor:o(this,Wt),node:Dr.create(dr(e))})}dropTable(e){return new _c({queryId:Ze(),executor:o(this,Wt),node:Jl.create(dr(e))})}createIndex(e){return new wc({queryId:Ze(),executor:o(this,Wt),node:Xn.create(e)})}dropIndex(e){return new Nc({queryId:Ze(),executor:o(this,Wt),node:Fu.create(e)})}createSchema(e){return new gc({queryId:Ze(),executor:o(this,Wt),node:bp.create(e)})}dropSchema(e){return new vc({queryId:Ze(),executor:o(this,Wt),node:Kl.create(e)})}alterTable(e){return new Xp({queryId:Ze(),executor:o(this,Wt),node:gt.create(dr(e))})}createView(e){return new xc({queryId:Ze(),executor:o(this,Wt),node:ti.create(e)})}dropView(e){return new Ec({queryId:Ze(),executor:o(this,Wt),node:ju.create(e)})}createType(e){return new Oc({queryId:Ze(),executor:o(this,Wt),node:em.create(ed(e))})}dropType(e){return new qc({queryId:Ze(),executor:o(this,Wt),node:tm.create(ed(e))})}withPlugin(e){return new ga(o(this,Wt).withPlugin(e))}withoutPlugins(){return new ga(o(this,Wt).withoutPlugins())}withSchema(e){return new ga(o(this,Wt).withPluginAtFront(new tu(e)))}};Wt=new WeakMap;let cf=ga;class Eb{ref(e){return new xg(e)}}var co;class Ob{constructor(e){M(this,co,void 0);Q(this,co,e)}async provideConnection(e){const r=await o(this,co).acquireConnection();try{return await e(r)}finally{await o(this,co).releaseConnection(r)}}}co=new WeakMap;var nn,sn,Tn;const Vi=class Vi extends Lp{constructor(r,n,a,l=[]){super(l);M(this,nn,void 0);M(this,sn,void 0);M(this,Tn,void 0);Q(this,nn,r),Q(this,sn,n),Q(this,Tn,a)}get adapter(){return o(this,sn)}compileQuery(r){return o(this,nn).compileQuery(r)}provideConnection(r){return o(this,Tn).provideConnection(r)}withPlugins(r){return new Vi(o(this,nn),o(this,sn),o(this,Tn),[...this.plugins,...r])}withPlugin(r){return new Vi(o(this,nn),o(this,sn),o(this,Tn),[...this.plugins,r])}withPluginAtFront(r){return new Vi(o(this,nn),o(this,sn),o(this,Tn),[r,...this.plugins])}withConnectionProvider(r){return new Vi(o(this,nn),o(this,sn),r,[...this.plugins])}withoutPlugins(){return new Vi(o(this,nn),o(this,sn),o(this,Tn),[])}};nn=new WeakMap,sn=new WeakMap,Tn=new WeakMap;let lf=Vi;function td(){return typeof performance<"u"&&xr(performance.now)?performance.now():Date.now()}var Fr,ui,An,lo,kn,Ua,Qc,rm,jc,nm,Vc,im,zc,sm,$a,ff;class qb{constructor(e,r){M(this,Qc);M(this,jc);M(this,Vc);M(this,zc);M(this,$a);M(this,Fr,void 0);M(this,ui,void 0);M(this,An,void 0);M(this,lo,void 0);M(this,kn,void 0);M(this,Ua,new WeakSet);Q(this,lo,!1),Q(this,Fr,e),Q(this,ui,r)}async init(){if(o(this,kn))throw new Error("driver has already been destroyed");o(this,An)||Q(this,An,o(this,Fr).init().then(()=>{Q(this,lo,!0)}).catch(e=>(Q(this,An,void 0),Promise.reject(e)))),await o(this,An)}async acquireConnection(){if(o(this,kn))throw new Error("driver has already been destroyed");o(this,lo)||await this.init();const e=await o(this,Fr).acquireConnection();return o(this,Ua).has(e)||(ge(this,Qc,rm).call(this)&&ge(this,jc,nm).call(this,e),o(this,Ua).add(e)),e}async releaseConnection(e){await o(this,Fr).releaseConnection(e)}beginTransaction(e,r){return o(this,Fr).beginTransaction(e,r)}commitTransaction(e){return o(this,Fr).commitTransaction(e)}rollbackTransaction(e){return o(this,Fr).rollbackTransaction(e)}async destroy(){o(this,An)&&(await o(this,An),o(this,kn)||Q(this,kn,o(this,Fr).destroy().catch(e=>(Q(this,kn,void 0),Promise.reject(e)))),await o(this,kn))}}Fr=new WeakMap,ui=new WeakMap,An=new WeakMap,lo=new WeakMap,kn=new WeakMap,Ua=new WeakMap,Qc=new WeakSet,rm=function(){return o(this,ui).isLevelEnabled("query")||o(this,ui).isLevelEnabled("error")},jc=new WeakSet,nm=function(e){const r=e.executeQuery;e.executeQuery=async n=>{const a=td();try{return await r.call(e,n)}catch(l){throw await ge(this,Vc,im).call(this,l,n,a),l}finally{await ge(this,zc,sm).call(this,n,a)}}},Vc=new WeakSet,im=async function(e,r,n){await o(this,ui).error(()=>({level:"error",error:e,query:r,queryDurationMillis:ge(this,$a,ff).call(this,n)}))},zc=new WeakSet,sm=async function(e,r){await o(this,ui).query(()=>({level:"query",query:e,queryDurationMillis:ge(this,$a,ff).call(this,r)}))},$a=new WeakSet,ff=function(e){return td()-e};var Qa,ci,Hc,am;class om{constructor(e){M(this,Hc);M(this,Qa,void 0);M(this,ci,void 0);Q(this,Qa,e)}async provideConnection(e){for(;o(this,ci);)await o(this,ci);const r=ge(this,Hc,am).call(this,e);return Q(this,ci,r.then(()=>{Q(this,ci,void 0)}).catch(()=>{Q(this,ci,void 0)})),r}}Qa=new WeakMap,ci=new WeakMap,Hc=new WeakSet,am=async function(e){return await e(o(this,Qa))};const Cb=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var li,es;class Ib{constructor(e){M(this,li,void 0);M(this,es,void 0);xr(e)?(Q(this,es,e),Q(this,li,p({query:!0,error:!0}))):(Q(this,es,Sb),Q(this,li,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return o(this,li)[e]}async query(e){o(this,li).query&&await o(this,es).call(this,e())}async error(e){o(this,li).error&&await o(this,es).call(this,e())}}li=new WeakMap,es=new WeakMap;function Sb(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function Tb(t){return ln(t)&&xr(t.compile)}var Ut;const $s=class $s extends lc{constructor(r){let n,a;if(Ab(r))n={executor:r.executor},a={...r};else{const l=r.dialect,m=l.createDriver(),_=l.createQueryCompiler(),x=l.createAdapter(),y=new Ib(r.log??[]),k=new qb(m,y),R=new Ob(k),G=new lf(_,x,R,r.plugins??[]);n={executor:G},a={config:r,executor:G,dialect:l,driver:k}}super(n);M(this,Ut,void 0);Q(this,Ut,p(a))}get schema(){return new cf(o(this,Ut).executor)}get dynamic(){return new Eb}get introspection(){return o(this,Ut).dialect.createIntrospector(this.withoutPlugins())}case(r){return new Up({node:hn.create(hs(r)?void 0:ko(r))})}get fn(){return Fp()}transaction(){return new Cc({...o(this,Ut)})}connection(){return new um({...o(this,Ut)})}withPlugin(r){return new $s({...o(this,Ut),executor:o(this,Ut).executor.withPlugin(r)})}withoutPlugins(){return new $s({...o(this,Ut),executor:o(this,Ut).executor.withoutPlugins()})}withSchema(r){return new $s({...o(this,Ut),executor:o(this,Ut).executor.withPluginAtFront(new tu(r))})}withTables(){return new $s({...o(this,Ut)})}async destroy(){await o(this,Ut).driver.destroy()}get isTransaction(){return!1}getExecutor(){return o(this,Ut).executor}executeQuery(r,n=Ze()){const a=Tb(r)?r.compile():r;return this.getExecutor().executeQuery(a,n)}};Ut=new WeakMap;let Wa=$s;var Ur;const Qs=class Qs extends Wa{constructor(r){super(r);M(this,Ur,void 0);Q(this,Ur,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new Qs({...o(this,Ur),executor:o(this,Ur).executor.withPlugin(r)})}withoutPlugins(){return new Qs({...o(this,Ur),executor:o(this,Ur).executor.withoutPlugins()})}withSchema(r){return new Qs({...o(this,Ur),executor:o(this,Ur).executor.withPluginAtFront(new tu(r))})}withTables(){return new Qs({...o(this,Ur)})}};Ur=new WeakMap;let hf=Qs;function Ab(t){return ln(t)&&ln(t.config)&&ln(t.driver)&&ln(t.executor)&&ln(t.dialect)}var ts;class um{constructor(e){M(this,ts,void 0);Q(this,ts,p(e))}async execute(e){return o(this,ts).executor.provideConnection(async r=>{const n=o(this,ts).executor.withConnectionProvider(new om(r)),a=new Wa({...o(this,ts),executor:n});return await e(a)})}}ts=new WeakMap;Pe(um,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var $r;const oh=class oh{constructor(e){M(this,$r,void 0);Q(this,$r,p(e))}setIsolationLevel(e){return new oh({...o(this,$r),isolationLevel:e})}async execute(e){const{isolationLevel:r,...n}=o(this,$r),a={isolationLevel:r};return kb(a),o(this,$r).executor.provideConnection(async l=>{const m=o(this,$r).executor.withConnectionProvider(new om(l)),_=new hf({...n,executor:m});try{await o(this,$r).driver.beginTransaction(l,a);const x=await e(_);return await o(this,$r).driver.commitTransaction(l),x}catch(x){throw await o(this,$r).driver.rollbackTransaction(l),x}})}};$r=new WeakMap;let Cc=oh;Pe(Cc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function kb(t){if(t.isolationLevel&&!Cb.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var lr,fo,Vu,ja,df,Va,pf;const Kc=class Kc{constructor(e){M(this,fo);M(this,ja);M(this,Va);M(this,lr,void 0);Q(this,lr,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new cm(this,e)}$castTo(){return new Kc({...o(this,lr)})}withPlugin(e){return new Kc({...o(this,lr),plugins:o(this,lr).plugins!==void 0?p([...o(this,lr).plugins,e]):p([e])})}toOperationNode(){return ge(this,ja,df).call(this,ge(this,fo,Vu).call(this))}compile(e){return ge(this,Va,pf).call(this,ge(this,fo,Vu).call(this,e))}async execute(e){const r=ge(this,fo,Vu).call(this,e);return r.executeQuery(ge(this,Va,pf).call(this,r),o(this,lr).queryId)}};lr=new WeakMap,fo=new WeakSet,Vu=function(e){const r=e!==void 0?e.getExecutor():Kf;return o(this,lr).plugins!==void 0?r.withPlugins(o(this,lr).plugins):r},ja=new WeakSet,df=function(e){return e.transformQuery(o(this,lr).rawNode,o(this,lr).queryId)},Va=new WeakSet,pf=function(e){return e.compileQuery(ge(this,ja,df).call(this,e),o(this,lr).queryId)};let Ic=Kc;function Yn(t){return new Ic(t)}Pe(Ic,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var rs,fi;class cm{constructor(e,r){M(this,rs,void 0);M(this,fi,void 0);Q(this,rs,e),Q(this,fi,r)}get expression(){return o(this,rs)}get alias(){return o(this,fi)}get rawBuilder(){return o(this,rs)}toOperationNode(){return _i.create(o(this,rs).toOperationNode(),Sr(o(this,fi))?o(this,fi).toOperationNode():lt.create(o(this,fi)))}}rs=new WeakMap,fi=new WeakMap;Pe(cm,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const St=Object.assign((t,...e)=>Yn({queryId:Ze(),rawNode:tr.create(t,e?.map(rr)??[])}),{ref(t){return Yn({queryId:Ze(),rawNode:tr.createWithChild(Dn(t))})},val(t){return Yn({queryId:Ze(),rawNode:tr.createWithChild(rr(t))})},value(t){return this.val(t)},table(t){return Yn({queryId:Ze(),rawNode:tr.createWithChild(dr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Yn({queryId:Ze(),rawNode:tr.create(e,t.map(lt.create))})},lit(t){return Yn({queryId:Ze(),rawNode:tr.createWithChild(yn.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Yn({queryId:Ze(),rawNode:tr.createWithSql(t)})},join(t,e=St`, `){const r=new Array(2*t.length-1),n=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=rr(t[a]),a!==t.length-1&&(r[2*a+1]=n);return Yn({queryId:Ze(),rawNode:tr.createWithChildren(r)})}});var Jc;class Wb{constructor(){ye(this,"nodeStack",[]);M(this,Jc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));ye(this,"visitNode",e=>{this.nodeStack.push(e),o(this,Jc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Jc=new WeakMap;var ho,ns;class Rb extends Wb{constructor(){super(...arguments);M(this,ho,"");M(this,ns,[])}get numParameters(){return o(this,ns).length}compileQuery(r){return Q(this,ho,""),Q(this,ns,[]),this.visitNode(r),p({query:r,sql:this.getSql(),parameters:[...o(this,ns)]})}getSql(){return o(this,ho)}visitSelectQuery(r){const n=this.parentNode!==void 0&&!xo.is(this.parentNode)&&!un.is(this.parentNode)&&!ti.is(this.parentNode)&&!Mp.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),n&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),n&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,n=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(n)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const n=this.nodeStack.find(We.is)!==r;!n&&r.explain&&(this.visitNode(r.explain),this.append(" ")),n&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),n&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const n=this.nodeStack.find(We.is)!==r;!n&&r.explain&&(this.visitNode(r.explain),this.append(" ")),n&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),n&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!mn(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:n}=r;for(let a=0;a<n.length;++a)this.appendValue(n[a]),a!==n.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(Pb[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:n,parameters:a}=r;for(let l=0;l<n.length;++l)this.append(n[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const n=this.nodeStack.find(We.is)!==r;!n&&r.explain&&(this.visitNode(r.explain),this.append(" ")),n&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),n&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Zu(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileList(r.columnAlterations)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(Db[r.modifier])}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return ps.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const n of r.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(r){const n=r.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(r.value)),n&&this.append("]")}visitJSONOperatorChain(r){for(let n=0,a=r.values.length;n<a;n++)n===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[n])}append(r){Q(this,ho,o(this,ho)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const n=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const m of r)l+=m,m===n?l+=n:m===a&&(l+=a);return l}addParameter(r){o(this,ns).push(r)}appendImmediateValue(r){if(mn(r))this.append(`'${r}'`);else if(gp(r)||Zu(r))this.append(r.toString());else if(Ff(r))this.append("null");else if(hg(r))this.appendImmediateValue(r.toISOString());else if(dg(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((n,a)=>n.modifier&&a.modifier?rd[n.modifier]-rd[a.modifier]:1),p(r)}}ho=new WeakMap,ns=new WeakMap;const Db=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),rd=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Pb=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),pn=p({raw(t,e=[]){return p({sql:t,query:tr.createWithSql(t),parameters:p(e)})}}),Lb=/"/g;class lm extends Rb{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(Lb,'""')}visitDefaultInsertValue(e){this.append("null")}}const fm="kysely_migration",hm="kysely_migration_lock";p({__noMigrations__:!0});var po,Gc,pm;class dm{constructor(e){M(this,Gc);M(this,po,void 0);Q(this,po,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=o(this,po).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",fm).where("name","!=",hm));const n=await r.execute();return Promise.all(n.map(({name:a})=>ge(this,Gc,pm).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}po=new WeakMap,Gc=new WeakSet,pm=async function(e){const r=o(this,po),n=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=n.sql?.split(/[\(\),]/)?.find(m=>m.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(St`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:n.type==="view",columns:l.map(m=>({name:m.name,dataType:m.type,isNullable:!m.notnull,isAutoIncrementing:m.name===a,hasDefaultValue:m.dflt_value!=null}))}};class mm{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var ym=class{createQueryCompiler(){return new lm}createAdapter(){return new mm}createIntrospector(t){return new dm(t)}},za,gd,wm=(gd=class{constructor(){M(this,za,new Mb);ye(this,"connection")}async acquireConnection(){return await o(this,za).lock(),this.connection}async beginTransaction(t){await t.executeQuery(pn.raw("begin"))}async commitTransaction(t){await t.executeQuery(pn.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(pn.raw("rollback"))}async releaseConnection(){o(this,za).unlock()}},za=new WeakMap,gd),Mb=class{constructor(){ye(this,"promise");ye(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},gm=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const n=await this.query(r,t);return ke.is(e)||n.length?{rows:n}:{rows:n,...await this.info()}}};function Bb(t,e,r){let n,a=0,l=null;function m(){n&&clearTimeout(n),a=0,l=null}function _(){a>=r?(t(l),m()):(n&&clearTimeout(n),n=setTimeout(()=>{t(l),m(),n=void 0},e))}return x=>{a++,l=x,n===void 0&&a===0?(t(x),a++):_()}}var Fb=class extends wm{constructor(e){super();ye(this,"config");ye(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Ub(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},Ub=class extends gm{constructor(e,r,n=!1,a=2e3,l=1e3){super();ye(this,"db");ye(this,"onWrite");ye(this,"trxCount",0);this.db=e,this.onWrite=r?n?Bb(r,a,l):r:void 0}async query(e,r){const n=this.db.prepare(e);n.bind(r);const a=[];for(;n.step();)a.push(n.getAsObject());return n.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},$b=class extends ym{constructor(e){super();ye(this,"config");this.config=e}createDriver(){return new Fb(this.config)}},Qb=class extends wm{constructor(e){super();ye(this,"config");ye(this,"db");this.config=e}async init(){this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new jb(this.db),await this.config.onCreateConnection?.(this.connection)}async destroy(){await this.db?.sqlite.close(this.db.db)}},jb=class extends gm{constructor(e){super();ye(this,"sqlite");ye(this,"db");this.db=e.db,this.sqlite=e.sqlite}async query(e,r){const n=[],a=this.sqlite.str_new(this.db,e);try{const l=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(a));if(l){const m=l.stmt;try{r?.length&&this.sqlite.bind_collection(m,r);const _=this.sqlite.column_names(m);for(;await this.sqlite.step(m)===100;){const x=this.sqlite.row(m);n.push(Object.fromEntries(_.map((y,k)=>[y,x[k]])))}}finally{await this.sqlite.finalize(m)}}}finally{this.sqlite.str_finish(a)}return n}async info(){return{insertId:await new Promise(e=>this.sqlite.exec(this.db,"SELECT last_insert_rowid()",([r])=>e(BigInt(r)))),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ha,bd,Vb=(bd=class extends ym{constructor(e){super();M(this,Ha,void 0);Q(this,Ha,e)}createDriver(){return new Qb(o(this,Ha))}},Ha=new WeakMap,bd);function zb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Hb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var bm={exports:{}};const Kb={},Jb=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"})),Wl=Hb(Jb);(function(t,e){var r=void 0,n=function(a){return r||(r=new Promise(function(l,m){var _=typeof a<"u"?a:{},x=_.onAbort;_.onAbort=function(i){m(new Error(i)),x&&x(i)},_.postRun=_.postRun||[],_.postRun.push(function(){l(_)}),t=void 0;var y;y||(y=typeof _<"u"?_:{}),y.onRuntimeInitialized=function(){function i(f,w){switch(typeof w){case"boolean":qu(f,w?1:0);break;case"number":Eu(f,w);break;case"string":Ss(f,w,-1,-1);break;case"object":if(w===null)ea(f);else if(w.length!=null){var C=ki(w,Ai);Ou(f,C,w.length,-1),Di(C)}else s(f,"Wrong API use : tried to return a value of an unknown type ("+w+").",-1);break;default:ea(f)}}function c(f,w){for(var C=[],I=0;I<f;I+=1){var P=j(w+4*I,"i32"),A=Nu(P);if(A===1||A===2)P=xu(P);else if(A===3)P=Zo(P);else if(A===4){A=P,P=vu(A),A=_u(A);for(var L=new Uint8Array(P),Z=0;Z<P;Z+=1)L[Z]=Me[A+Z];P=L}else P=null;C.push(P)}return C}function h(f,w){this.La=f,this.db=w,this.Ja=1,this.fb=[]}function g(f,w){if(this.db=w,w=Ve(f)+1,this.Ya=Ri(w),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");le(f,Re,this.Ya,w),this.eb=this.Ya,this.Ua=this.ib=null}function E(f){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),f!=null){var w=this.filename,C="/",I=w;if(C&&(C=typeof C=="string"?C:Fn(C),I=w?se(C+"/"+w):C),w=ys(!0,!0),I=Ei(I,(w!==void 0?w:438)&4095|32768,0),f){if(typeof f=="string"){C=Array(f.length);for(var P=0,A=f.length;P<A;++P)C[P]=f.charCodeAt(P);f=C}Gr(I,w|146),C=or(I,577),jn(C,f,0,f.length,0),Qn(C),Gr(I,w)}}this.handleError(pe(this.filename,D)),this.db=j(D,"i32"),d(this.db),this.Za={},this.Na={}}var D=Rr(4),U=y.cwrap,pe=U("sqlite3_open","number",["string","number"]),Se=U("sqlite3_close_v2","number",["number"]),Ee=U("sqlite3_exec","number",["number","string","number","number","number"]),He=U("sqlite3_changes","number",["number"]),Ke=U("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ho=U("sqlite3_sql","string",["number"]),Is=U("sqlite3_normalized_sql","string",["number"]),Ko=U("sqlite3_prepare_v2","number",["number","number","number","number","number"]),fu=U("sqlite3_bind_text","number",["number","number","number","number","number"]),hu=U("sqlite3_bind_blob","number",["number","number","number","number","number"]),Jo=U("sqlite3_bind_double","number",["number","number","number"]),wl=U("sqlite3_bind_int","number",["number","number","number"]),gl=U("sqlite3_bind_parameter_index","number",["number","string"]),bl=U("sqlite3_step","number",["number"]),du=U("sqlite3_errmsg","string",["number"]),pu=U("sqlite3_column_count","number",["number"]),mu=U("sqlite3_data_count","number",["number"]),Cr=U("sqlite3_column_double","number",["number","number"]),Go=U("sqlite3_column_text","string",["number","number"]),Nl=U("sqlite3_column_blob","number",["number","number"]),ne=U("sqlite3_column_bytes","number",["number","number"]),yu=U("sqlite3_column_type","number",["number","number"]),Yo=U("sqlite3_column_name","string",["number","number"]),wu=U("sqlite3_reset","number",["number"]),gu=U("sqlite3_clear_bindings","number",["number"]),bu=U("sqlite3_finalize","number",["number"]),Xo=U("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Nu=U("sqlite3_value_type","number",["number"]),vu=U("sqlite3_value_bytes","number",["number"]),Zo=U("sqlite3_value_text","string",["number"]),_u=U("sqlite3_value_blob","number",["number"]),xu=U("sqlite3_value_double","number",["number"]),Eu=U("sqlite3_result_double","",["number","number"]),ea=U("sqlite3_result_null","",["number"]),Ss=U("sqlite3_result_text","",["number","string","number","number"]),Ou=U("sqlite3_result_blob","",["number","number","number","number"]),qu=U("sqlite3_result_int","",["number","number"]),s=U("sqlite3_result_error","",["number","string","number"]),u=U("sqlite3_aggregate_context","number",["number","number"]),d=U("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(f){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(f)?this.wb(f):f!=null&&typeof f=="object"?this.xb(f):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var f=bl(this.La);switch(f){case 100:return!0;case 101:return!1;default:throw this.db.handleError(f)}},h.prototype.rb=function(f){return f==null&&(f=this.Ja,this.Ja+=1),Cr(this.La,f)},h.prototype.Ab=function(f){if(f==null&&(f=this.Ja,this.Ja+=1),f=Go(this.La,f),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(f)},h.prototype.Bb=function(f){return f==null&&(f=this.Ja,this.Ja+=1),Go(this.La,f)},h.prototype.getBlob=function(f){f==null&&(f=this.Ja,this.Ja+=1);var w=ne(this.La,f);f=Nl(this.La,f);for(var C=new Uint8Array(w),I=0;I<w;I+=1)C[I]=Me[f+I];return C},h.prototype.get=function(f,w){w=w||{},f!=null&&this.bind(f)&&this.step(),f=[];for(var C=mu(this.La),I=0;I<C;I+=1)switch(yu(this.La,I)){case 1:var P=w.useBigInt?this.Ab(I):this.rb(I);f.push(P);break;case 2:f.push(this.rb(I));break;case 3:f.push(this.Bb(I));break;case 4:f.push(this.getBlob(I));break;default:f.push(null)}return f},h.prototype.getColumnNames=function(){for(var f=[],w=pu(this.La),C=0;C<w;C+=1)f.push(Yo(this.La,C));return f},h.prototype.getAsObject=function(f,w){f=this.get(f,w),w=this.getColumnNames();for(var C={},I=0;I<w.length;I+=1)C[w[I]]=f[I];return C},h.prototype.getSQL=function(){return Ho(this.La)},h.prototype.getNormalizedSQL=function(){return Is(this.La)},h.prototype.run=function(f){return f!=null&&this.bind(f),this.step(),this.reset()},h.prototype.nb=function(f,w){w==null&&(w=this.Ja,this.Ja+=1),f=kr(f);var C=ki(f,Ai);this.fb.push(C),this.db.handleError(fu(this.La,w,C,f.length-1,0))},h.prototype.vb=function(f,w){w==null&&(w=this.Ja,this.Ja+=1);var C=ki(f,Ai);this.fb.push(C),this.db.handleError(hu(this.La,w,C,f.length,0))},h.prototype.mb=function(f,w){w==null&&(w=this.Ja,this.Ja+=1),this.db.handleError((f===(f|0)?wl:Jo)(this.La,w,f))},h.prototype.yb=function(f){f==null&&(f=this.Ja,this.Ja+=1),hu(this.La,f,0,0,0)},h.prototype.ob=function(f,w){switch(w==null&&(w=this.Ja,this.Ja+=1),typeof f){case"string":this.nb(f,w);return;case"number":this.mb(f,w);return;case"bigint":this.nb(f.toString(),w);return;case"boolean":this.mb(f+0,w);return;case"object":if(f===null){this.yb(w);return}if(f.length!=null){this.vb(f,w);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+f+")."},h.prototype.xb=function(f){var w=this;return Object.keys(f).forEach(function(C){var I=gl(w.La,C);I!==0&&w.ob(f[C],I)}),!0},h.prototype.wb=function(f){for(var w=0;w<f.length;w+=1)this.ob(f[w],w+1);return!0},h.prototype.reset=function(){return this.freemem(),gu(this.La)===0&&wu(this.La)===0},h.prototype.freemem=function(){for(var f;(f=this.fb.pop())!==void 0;)Di(f)},h.prototype.free=function(){this.freemem();var f=bu(this.La)===0;return delete this.db.Za[this.La],this.La=0,f},g.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var f=Hn(),w=Rr(4);Y(D),Y(w);try{this.db.handleError(Ko(this.db.db,this.eb,-1,D,w)),this.eb=j(w,"i32");var C=j(D,"i32");return C===0?(this.gb(),{done:!0}):(this.Ua=new h(C,this.db),this.db.Za[C]=this.Ua,{value:this.Ua,done:!1})}catch(I){throw this.ib=te(this.eb),this.gb(),I}finally{Kn(f)}},g.prototype.gb=function(){Di(this.Ya),this.Ya=null},g.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:te(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(g.prototype[Symbol.iterator]=function(){return this}),E.prototype.run=function(f,w){if(!this.db)throw"Database closed";if(w){f=this.prepare(f,w);try{f.step()}finally{f.free()}}else this.handleError(Ee(this.db,f,0,0,D));return this},E.prototype.exec=function(f,w,C){if(!this.db)throw"Database closed";var I=Hn(),P=null;try{var A=qs(f),L=Rr(4);for(f=[];j(A,"i8")!==0;){Y(D),Y(L),this.handleError(Ko(this.db,A,-1,D,L));var Z=j(D,"i32");if(A=j(L,"i32"),Z!==0){var F=null;for(P=new h(Z,this),w!=null&&P.bind(w);P.step();)F===null&&(F={columns:P.getColumnNames(),values:[]},f.push(F)),F.values.push(P.get(null,C));P.free()}}return f}catch(ee){throw P&&P.free(),ee}finally{Kn(I)}},E.prototype.each=function(f,w,C,I,P){typeof w=="function"&&(I=C,C=w,w=void 0),f=this.prepare(f,w);try{for(;f.step();)C(f.getAsObject(null,P))}finally{f.free()}if(typeof I=="function")return I()},E.prototype.prepare=function(f,w){if(Y(D),this.handleError(Ke(this.db,f,-1,D,0)),f=j(D,"i32"),f===0)throw"Nothing to prepare";var C=new h(f,this);return w!=null&&C.bind(w),this.Za[f]=C},E.prototype.iterateStatements=function(f){return new g(f,this)},E.prototype.export=function(){Object.values(this.Za).forEach(function(w){w.free()}),Object.values(this.Na).forEach(xn),this.Na={},this.handleError(Se(this.db));var f=yl(this.filename);return this.handleError(pe(this.filename,D)),this.db=j(D,"i32"),f},E.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(f){f.free()}),Object.values(this.Na).forEach(xn),this.Na={},this.handleError(Se(this.db)),Mo("/"+this.filename),this.db=null)},E.prototype.handleError=function(f){if(f===0)return null;throw f=du(this.db),Error(f)},E.prototype.getRowsModified=function(){return He(this.db)},E.prototype.create_function=function(f,w){Object.prototype.hasOwnProperty.call(this.Na,f)&&(xn(this.Na[f]),delete this.Na[f]);var C=Wi(function(I,P,A){P=c(P,A);try{var L=w.apply(null,P)}catch(Z){s(I,Z,-1);return}i(I,L)},"viii");return this.Na[f]=C,this.handleError(Xo(this.db,f,w.length,1,0,C,0,0,0)),this},E.prototype.create_aggregate=function(f,w){var C=w.init||function(){return null},I=w.finalize||function(F){return F},P=w.step;if(!P)throw"An aggregate function must have a step function in "+f;var A={};Object.hasOwnProperty.call(this.Na,f)&&(xn(this.Na[f]),delete this.Na[f]),w=f+"__finalize",Object.hasOwnProperty.call(this.Na,w)&&(xn(this.Na[w]),delete this.Na[w]);var L=Wi(function(F,ee,Ne){var Ae=u(F,1);Object.hasOwnProperty.call(A,Ae)||(A[Ae]=C()),ee=c(ee,Ne),ee=[A[Ae]].concat(ee);try{A[Ae]=P.apply(null,ee)}catch(vt){delete A[Ae],s(F,vt,-1)}},"viii"),Z=Wi(function(F){var ee=u(F,1);try{var Ne=I(A[ee])}catch(Ae){delete A[ee],s(F,Ae,-1);return}i(F,Ne),delete A[ee]},"vi");return this.Na[f]=L,this.Na[w]=Z,this.handleError(Xo(this.db,f,P.length-1,1,0,0,L,Z,0)),this},y.Database=E};var k=Object.assign({},y),R="./this.program",G=typeof window=="object",H=typeof importScripts=="function",ae=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",N="",q,b,S;if(ae){var T=Wl,X=Wl;N=H?X.dirname(N)+"/":__dirname+"/",q=(i,c)=>(i=Ce(i)?new URL(i):X.normalize(i),T.readFileSync(i,c?void 0:"utf8")),S=i=>(i=q(i,!0),i.buffer||(i=new Uint8Array(i)),i),b=(i,c,h,g=!0)=>{i=Ce(i)?new URL(i):X.normalize(i),T.readFile(i,g?void 0:"utf8",(E,D)=>{E?h(E):c(g?D.buffer:D)})},!y.thisProgram&&1<process.argv.length&&(R=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=y,y.inspect=()=>"[Emscripten Module object]"}else(G||H)&&(H?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),N=N.indexOf("blob:")!==0?N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):"",q=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.send(null),c.responseText},H&&(S=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),b=(i,c,h)=>{var g=new XMLHttpRequest;g.open("GET",i,!0),g.responseType="arraybuffer",g.onload=()=>{g.status==200||g.status==0&&g.response?c(g.response):h()},g.onerror=h,g.send(null)});var re=y.print||console.log.bind(console),ce=y.printErr||console.error.bind(console);Object.assign(y,k),k=null,y.thisProgram&&(R=y.thisProgram);var Le;y.wasmBinary&&(Le=y.wasmBinary),typeof WebAssembly!="object"&&mr("no native wasm support detected");var ft,Tr=!1,Me,Re,Er,de,je,nr,it;function Ie(){var i=ft.buffer;y.HEAP8=Me=new Int8Array(i),y.HEAP16=Er=new Int16Array(i),y.HEAPU8=Re=new Uint8Array(i),y.HEAPU16=new Uint16Array(i),y.HEAP32=de=new Int32Array(i),y.HEAPU32=je=new Uint32Array(i),y.HEAPF32=nr=new Float32Array(i),y.HEAPF64=it=new Float64Array(i)}var Ue=[],Tt=[],Hr=[];function Or(){var i=y.preRun.shift();Ue.unshift(i)}var Nt=0,Ar=null;function mr(i){throw y.onAbort&&y.onAbort(i),i="Aborted("+i+")",ce(i),Tr=!0,new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info.")}var he=i=>i.startsWith("data:application/octet-stream;base64,"),Ce=i=>i.startsWith("file://"),ir;if(ir="sql-wasm.wasm",!he(ir)){var Kr=ir;ir=y.locateFile?y.locateFile(Kr,N):N+Kr}function Ge(i){if(i==ir&&Le)return new Uint8Array(Le);if(S)return S(i);throw"both async and sync fetching of the wasm failed"}function Mn(i){if(!Le&&(G||H)){if(typeof fetch=="function"&&!Ce(i))return fetch(i,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at '"+i+"'";return c.arrayBuffer()}).catch(()=>Ge(i));if(b)return new Promise((c,h)=>{b(i,g=>c(new Uint8Array(g)),h)})}return Promise.resolve().then(()=>Ge(i))}function Pt(i,c,h){return Mn(i).then(g=>WebAssembly.instantiate(g,c)).then(g=>g).then(h,g=>{ce(`failed to asynchronously prepare wasm: ${g}`),mr(g)})}function O(i,c){var h=ir;Le||typeof WebAssembly.instantiateStreaming!="function"||he(h)||Ce(h)||ae||typeof fetch!="function"?Pt(h,i,c):fetch(h,{credentials:"same-origin"}).then(g=>WebAssembly.instantiateStreaming(g,i).then(c,function(E){return ce(`wasm streaming compile failed: ${E}`),ce("falling back to ArrayBuffer instantiation"),Pt(h,i,c)}))}var v,W,$=i=>{for(;0<i.length;)i.shift()(y)};function j(i,c="i8"){switch(c.endsWith("*")&&(c="*"),c){case"i1":return Me[i>>0];case"i8":return Me[i>>0];case"i16":return Er[i>>1];case"i32":return de[i>>2];case"i64":mr("to do getValue(i64) use WASM_BIGINT");case"float":return nr[i>>2];case"double":return it[i>>3];case"*":return je[i>>2];default:mr(`invalid type for getValue: ${c}`)}}function Y(i){var c="i32";switch(c.endsWith("*")&&(c="*"),c){case"i1":Me[i>>0]=0;break;case"i8":Me[i>>0]=0;break;case"i16":Er[i>>1]=0;break;case"i32":de[i>>2]=0;break;case"i64":mr("to do setValue(i64) use WASM_BIGINT");case"float":nr[i>>2]=0;break;case"double":it[i>>3]=0;break;case"*":je[i>>2]=0;break;default:mr(`invalid type for setValue: ${c}`)}}var ie=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,V=(i,c,h)=>{var g=c+h;for(h=c;i[h]&&!(h>=g);)++h;if(16<h-c&&i.buffer&&ie)return ie.decode(i.subarray(c,h));for(g="";c<h;){var E=i[c++];if(E&128){var D=i[c++]&63;if((E&224)==192)g+=String.fromCharCode((E&31)<<6|D);else{var U=i[c++]&63;E=(E&240)==224?(E&15)<<12|D<<6|U:(E&7)<<18|D<<12|U<<6|i[c++]&63,65536>E?g+=String.fromCharCode(E):(E-=65536,g+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else g+=String.fromCharCode(E)}return g},te=(i,c)=>i?V(Re,i,c):"",z=(i,c)=>{for(var h=0,g=i.length-1;0<=g;g--){var E=i[g];E==="."?i.splice(g,1):E===".."?(i.splice(g,1),h++):h&&(i.splice(g,1),h--)}if(c)for(;h;h--)i.unshift("..");return i},se=i=>{var c=i.charAt(0)==="/",h=i.substr(-1)==="/";return(i=z(i.split("/").filter(g=>!!g),!c).join("/"))||c||(i="."),i&&h&&(i+="/"),(c?"/":"")+i},oe=i=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(i).slice(1);return i=c[0],c=c[1],!i&&!c?".":(c&&(c=c.substr(0,c.length-1)),i+c)},ue=i=>{if(i==="/")return"/";i=se(i),i=i.replace(/\/$/,"");var c=i.lastIndexOf("/");return c===-1?i:i.substr(c+1)},me=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return h=>crypto.getRandomValues(h);if(ae)try{var i=Wl;if(i.randomFillSync)return h=>i.randomFillSync(h);var c=i.randomBytes;return h=>(h.set(c(h.byteLength)),h)}catch{}mr("initRandomDevice")},Oe=i=>(Oe=me())(i);function Be(){for(var i="",c=!1,h=arguments.length-1;-1<=h&&!c;h--){if(c=0<=h?arguments[h]:"/",typeof c!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!c)return"";i=c+"/"+i,c=c.charAt(0)==="/"}return i=z(i.split("/").filter(g=>!!g),!c).join("/"),(c?"/":"")+i||"."}var De=[],Ve=i=>{for(var c=0,h=0;h<i.length;++h){var g=i.charCodeAt(h);127>=g?c++:2047>=g?c+=2:55296<=g&&57343>=g?(c+=4,++h):c+=3}return c},le=(i,c,h,g)=>{if(!(0<g))return 0;var E=h;g=h+g-1;for(var D=0;D<i.length;++D){var U=i.charCodeAt(D);if(55296<=U&&57343>=U){var pe=i.charCodeAt(++D);U=65536+((U&1023)<<10)|pe&1023}if(127>=U){if(h>=g)break;c[h++]=U}else{if(2047>=U){if(h+1>=g)break;c[h++]=192|U>>6}else{if(65535>=U){if(h+2>=g)break;c[h++]=224|U>>12}else{if(h+3>=g)break;c[h++]=240|U>>18,c[h++]=128|U>>12&63}c[h++]=128|U>>6&63}c[h++]=128|U&63}}return c[h]=0,h-E};function kr(i,c){var h=Array(Ve(i)+1);return i=le(i,h,0,h.length),c&&(h.length=i),h}var wn=[];function Wr(i,c){wn[i]={input:[],output:[],Xa:c},Un(i,Jr)}var Jr={open(i){var c=wn[i.node.rdev];if(!c)throw new K(43);i.tty=c,i.seekable=!1},close(i){i.tty.Xa.fsync(i.tty)},fsync(i){i.tty.Xa.fsync(i.tty)},read(i,c,h,g){if(!i.tty||!i.tty.Xa.sb)throw new K(60);for(var E=0,D=0;D<g;D++){try{var U=i.tty.Xa.sb(i.tty)}catch{throw new K(29)}if(U===void 0&&E===0)throw new K(6);if(U==null)break;E++,c[h+D]=U}return E&&(i.node.timestamp=Date.now()),E},write(i,c,h,g){if(!i.tty||!i.tty.Xa.jb)throw new K(60);try{for(var E=0;E<g;E++)i.tty.Xa.jb(i.tty,c[h+E])}catch{throw new K(29)}return g&&(i.node.timestamp=Date.now()),E}},Lt={sb(){e:{if(!De.length){var i=null;if(ae){var c=Buffer.alloc(256),h=0,g=process.stdin.fd;try{h=T.readSync(g,c)}catch(E){if(E.toString().includes("EOF"))h=0;else throw E}0<h?i=c.slice(0,h).toString("utf-8"):i=null}else typeof window<"u"&&typeof window.prompt=="function"?(i=window.prompt("Input: "),i!==null&&(i+=`
`)):typeof readline=="function"&&(i=readline(),i!==null&&(i+=`
`));if(!i){i=null;break e}De=kr(i,!0)}i=De.shift()}return i},jb(i,c){c===null||c===10?(re(V(i.output,0)),i.output=[]):c!=0&&i.output.push(c)},fsync(i){i.output&&0<i.output.length&&(re(V(i.output,0)),i.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},dt={jb(i,c){c===null||c===10?(ce(V(i.output,0)),i.output=[]):c!=0&&i.output.push(c)},fsync(i){i.output&&0<i.output.length&&(ce(V(i.output,0)),i.output=[])}};function Bn(i,c){var h=i.Ia?i.Ia.length:0;h>=c||(c=Math.max(c,h*(1048576>h?2:1.125)>>>0),h!=0&&(c=Math.max(c,256)),h=i.Ia,i.Ia=new Uint8Array(c),0<i.Ma&&i.Ia.set(h.subarray(0,i.Ma),0))}var B={Qa:null,Ra(){return B.createNode(null,"/",16895,0)},createNode(i,c,h,g){if((h&61440)===24576||(h&61440)===4096)throw new K(63);return B.Qa||(B.Qa={dir:{node:{Pa:B.Ga.Pa,Oa:B.Ga.Oa,lookup:B.Ga.lookup,ab:B.Ga.ab,rename:B.Ga.rename,unlink:B.Ga.unlink,rmdir:B.Ga.rmdir,readdir:B.Ga.readdir,symlink:B.Ga.symlink},stream:{Ta:B.Ha.Ta}},file:{node:{Pa:B.Ga.Pa,Oa:B.Ga.Oa},stream:{Ta:B.Ha.Ta,read:B.Ha.read,write:B.Ha.write,lb:B.Ha.lb,bb:B.Ha.bb,cb:B.Ha.cb}},link:{node:{Pa:B.Ga.Pa,Oa:B.Ga.Oa,readlink:B.Ga.readlink},stream:{}},pb:{node:{Pa:B.Ga.Pa,Oa:B.Ga.Oa},stream:su}}),h=Ro(i,c,h,g),sr(h.mode)?(h.Ga=B.Qa.dir.node,h.Ha=B.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=B.Qa.file.node,h.Ha=B.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=B.Qa.link.node,h.Ha=B.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=B.Qa.pb.node,h.Ha=B.Qa.pb.stream),h.timestamp=Date.now(),i&&(i.Ia[c]=h,i.timestamp=h.timestamp),h},Lb(i){return i.Ia?i.Ia.subarray?i.Ia.subarray(0,i.Ma):new Uint8Array(i.Ia):new Uint8Array(0)},Ga:{Pa(i){var c={};return c.dev=(i.mode&61440)===8192?i.id:1,c.ino=i.id,c.mode=i.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=i.rdev,sr(i.mode)?c.size=4096:(i.mode&61440)===32768?c.size=i.Ma:(i.mode&61440)===40960?c.size=i.link.length:c.size=0,c.atime=new Date(i.timestamp),c.mtime=new Date(i.timestamp),c.ctime=new Date(i.timestamp),c.zb=4096,c.blocks=Math.ceil(c.size/c.zb),c},Oa(i,c){if(c.mode!==void 0&&(i.mode=c.mode),c.timestamp!==void 0&&(i.timestamp=c.timestamp),c.size!==void 0&&(c=c.size,i.Ma!=c))if(c==0)i.Ia=null,i.Ma=0;else{var h=i.Ia;i.Ia=new Uint8Array(c),h&&i.Ia.set(h.subarray(0,Math.min(c,i.Ma))),i.Ma=c}},lookup(){throw ws[44]},ab(i,c,h,g){return B.createNode(i,c,h,g)},rename(i,c,h){if(sr(i.mode)){try{var g=ut(c,h)}catch{}if(g)for(var E in g.Ia)throw new K(55)}delete i.parent.Ia[i.name],i.parent.timestamp=Date.now(),i.name=h,c.Ia[h]=i,c.timestamp=i.parent.timestamp,i.parent=c},unlink(i,c){delete i.Ia[c],i.timestamp=Date.now()},rmdir(i,c){var h=ut(i,c),g;for(g in h.Ia)throw new K(55);delete i.Ia[c],i.timestamp=Date.now()},readdir(i){var c=[".",".."],h;for(h in i.Ia)i.Ia.hasOwnProperty(h)&&c.push(h);return c},symlink(i,c,h){return i=B.createNode(i,c,41471,0),i.link=h,i},readlink(i){if((i.mode&61440)!==40960)throw new K(28);return i.link}},Ha:{read(i,c,h,g,E){var D=i.node.Ia;if(E>=i.node.Ma)return 0;if(i=Math.min(i.node.Ma-E,g),8<i&&D.subarray)c.set(D.subarray(E,E+i),h);else for(g=0;g<i;g++)c[h+g]=D[E+g];return i},write(i,c,h,g,E,D){if(c.buffer===Me.buffer&&(D=!1),!g)return 0;if(i=i.node,i.timestamp=Date.now(),c.subarray&&(!i.Ia||i.Ia.subarray)){if(D)return i.Ia=c.subarray(h,h+g),i.Ma=g;if(i.Ma===0&&E===0)return i.Ia=c.slice(h,h+g),i.Ma=g;if(E+g<=i.Ma)return i.Ia.set(c.subarray(h,h+g),E),g}if(Bn(i,E+g),i.Ia.subarray&&c.subarray)i.Ia.set(c.subarray(h,h+g),E);else for(D=0;D<g;D++)i.Ia[E+D]=c[h+D];return i.Ma=Math.max(i.Ma,E+g),g},Ta(i,c,h){if(h===1?c+=i.position:h===2&&(i.node.mode&61440)===32768&&(c+=i.node.Ma),0>c)throw new K(28);return c},lb(i,c,h){Bn(i.node,c+h),i.node.Ma=Math.max(i.node.Ma,c+h)},bb(i,c,h,g,E){if((i.node.mode&61440)!==32768)throw new K(43);if(i=i.node.Ia,E&2||i.buffer!==Me.buffer){if((0<h||h+c<i.length)&&(i.subarray?i=i.subarray(h,h+c):i=Array.prototype.slice.call(i,h,h+c)),h=!0,c=65536*Math.ceil(c/65536),(E=Vo(65536,c))?(Re.fill(0,E,E+c),c=E):c=0,!c)throw new K(48);Me.set(i,c)}else h=!1,c=i.byteOffset;return{Db:c,ub:h}},cb(i,c,h,g){return B.Ha.write(i,c,0,g,h,!1),0}}},ys=(i,c)=>{var h=0;return i&&(h|=365),c&&(h|=146),h},At=null,xi={},gn=[],nu=1,Vt=null,Wo=!0,K=null,ws={};function pt(i,c={}){if(i=Be(i),!i)return{path:"",node:null};if(c=Object.assign({qb:!0,kb:0},c),8<c.kb)throw new K(32);i=i.split("/").filter(U=>!!U);for(var h=At,g="/",E=0;E<i.length;E++){var D=E===i.length-1;if(D&&c.parent)break;if(h=ut(h,i[E]),g=se(g+"/"+i[E]),h.Va&&(!D||D&&c.qb)&&(h=h.Va.root),!D||c.Sa){for(D=0;(h.mode&61440)===40960;)if(h=$n(g),g=Be(oe(g),h),h=pt(g,{kb:c.kb+1}).node,40<D++)throw new K(32)}}return{path:g,node:h}}function Fn(i){for(var c;;){if(i===i.parent)return i=i.Ra.tb,c?i[i.length-1]!=="/"?`${i}/${c}`:i+c:i;c=c?`${i.name}/${c}`:i.name,i=i.parent}}function gs(i,c){for(var h=0,g=0;g<c.length;g++)h=(h<<5)-h+c.charCodeAt(g)|0;return(i+h>>>0)%Vt.length}function iu(i){var c=gs(i.parent.id,i.name);if(Vt[c]===i)Vt[c]=i.Wa;else for(c=Vt[c];c;){if(c.Wa===i){c.Wa=i.Wa;break}c=c.Wa}}function ut(i,c){var h;if(h=(h=bn(i,"x"))?h:i.Ga.lookup?0:2)throw new K(h,i);for(h=Vt[gs(i.id,c)];h;h=h.Wa){var g=h.name;if(h.parent.id===i.id&&g===c)return h}return i.Ga.lookup(i,c)}function Ro(i,c,h,g){return i=new Qo(i,c,h,g),c=gs(i.parent.id,i.name),i.Wa=Vt[c],Vt[c]=i}function sr(i){return(i&61440)===16384}function bs(i){var c=["r","w","rw"][i&3];return i&512&&(c+="w"),c}function bn(i,c){if(Wo)return 0;if(!c.includes("r")||i.mode&292){if(c.includes("w")&&!(i.mode&146)||c.includes("x")&&!(i.mode&73))return 2}else return 2;return 0}function Ns(i,c){try{return ut(i,c),20}catch{}return bn(i,"wx")}function yr(i,c,h){try{var g=ut(i,c)}catch(E){return E.Ka}if(i=bn(i,"wx"))return i;if(h){if(!sr(g.mode))return 54;if(g===g.parent||Fn(g)==="/")return 10}else if(sr(g.mode))return 31;return 0}function vs(){for(var i=0;4096>=i;i++)if(!gn[i])return i;throw new K(33)}function qt(i){if(i=gn[i],!i)throw new K(8);return i}function Do(i,c=-1){return Vn||(Vn=function(){this.$a={}},Vn.prototype={},Object.defineProperties(Vn.prototype,{object:{get(){return this.node},set(h){this.node=h}},flags:{get(){return this.$a.flags},set(h){this.$a.flags=h}},position:{get(){return this.$a.position},set(h){this.$a.position=h}}})),i=Object.assign(new Vn,i),c==-1&&(c=vs()),i.fd=c,gn[c]=i}var su={open(i){i.Ha=xi[i.node.rdev].Ha,i.Ha.open&&i.Ha.open(i)},Ta(){throw new K(70)}};function Un(i,c){xi[i]={Ha:c}}function Po(i,c){var h=c==="/",g=!c;if(h&&At)throw new K(10);if(!h&&!g){var E=pt(c,{qb:!1});if(c=E.path,E=E.node,E.Va)throw new K(10);if(!sr(E.mode))throw new K(54)}c={type:i,Pb:{},tb:c,Cb:[]},i=i.Ra(c),i.Ra=c,c.root=i,h?At=i:E&&(E.Va=c,E.Ra&&E.Ra.Cb.push(c))}function Ei(i,c,h){var g=pt(i,{parent:!0}).node;if(i=ue(i),!i||i==="."||i==="..")throw new K(28);var E=Ns(g,i);if(E)throw new K(E);if(!g.Ga.ab)throw new K(63);return g.Ga.ab(g,i,c,h)}function wr(i,c){return Ei(i,(c!==void 0?c:511)&1023|16384,0)}function Nn(i,c,h){typeof h>"u"&&(h=c,c=438),Ei(i,c|8192,h)}function _s(i,c){if(!Be(i))throw new K(44);var h=pt(c,{parent:!0}).node;if(!h)throw new K(44);c=ue(c);var g=Ns(h,c);if(g)throw new K(g);if(!h.Ga.symlink)throw new K(63);h.Ga.symlink(h,c,i)}function Lo(i){var c=pt(i,{parent:!0}).node;i=ue(i);var h=ut(c,i),g=yr(c,i,!0);if(g)throw new K(g);if(!c.Ga.rmdir)throw new K(63);if(h.Va)throw new K(10);c.Ga.rmdir(c,i),iu(h)}function Mo(i){var c=pt(i,{parent:!0}).node;if(!c)throw new K(44);i=ue(i);var h=ut(c,i),g=yr(c,i,!1);if(g)throw new K(g);if(!c.Ga.unlink)throw new K(63);if(h.Va)throw new K(10);c.Ga.unlink(c,i),iu(h)}function $n(i){if(i=pt(i).node,!i)throw new K(44);if(!i.Ga.readlink)throw new K(28);return Be(Fn(i.parent),i.Ga.readlink(i))}function vn(i,c){if(i=pt(i,{Sa:!c}).node,!i)throw new K(44);if(!i.Ga.Pa)throw new K(63);return i.Ga.Pa(i)}function Ye(i){return vn(i,!0)}function Gr(i,c){if(i=typeof i=="string"?pt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new K(63);i.Ga.Oa(i,{mode:c&4095|i.mode&-4096,timestamp:Date.now()})}function Oi(i,c){if(0>c)throw new K(28);if(i=typeof i=="string"?pt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new K(63);if(sr(i.mode))throw new K(31);if((i.mode&61440)!==32768)throw new K(28);var h=bn(i,"w");if(h)throw new K(h);i.Ga.Oa(i,{size:c,timestamp:Date.now()})}function or(i,c,h){if(i==="")throw new K(44);if(typeof c=="string"){var g={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[c];if(typeof g>"u")throw Error(`Unknown file open mode: ${c}`);c=g}if(h=c&64?(typeof h>"u"?438:h)&4095|32768:0,typeof i=="object")var E=i;else{i=se(i);try{E=pt(i,{Sa:!(c&131072)}).node}catch{}}if(g=!1,c&64)if(E){if(c&128)throw new K(20)}else E=Ei(i,h,0),g=!0;if(!E)throw new K(44);if((E.mode&61440)===8192&&(c&=-513),c&65536&&!sr(E.mode))throw new K(54);if(!g&&(h=E?(E.mode&61440)===40960?32:sr(E.mode)&&(bs(c)!=="r"||c&512)?31:bn(E,bs(c)):44))throw new K(h);return c&512&&!g&&Oi(E,0),c&=-131713,E=Do({node:E,path:Fn(E),flags:c,seekable:!0,position:0,Ha:E.Ha,Fb:[],error:!1}),E.Ha.open&&E.Ha.open(E),!y.logReadFiles||c&1||(xs||(xs={}),i in xs||(xs[i]=1)),E}function Qn(i){if(i.fd===null)throw new K(8);i.hb&&(i.hb=null);try{i.Ha.close&&i.Ha.close(i)}catch(c){throw c}finally{gn[i.fd]=null}i.fd=null}function qi(i,c,h){if(i.fd===null)throw new K(8);if(!i.seekable||!i.Ha.Ta)throw new K(70);if(h!=0&&h!=1&&h!=2)throw new K(28);i.position=i.Ha.Ta(i,c,h),i.Fb=[]}function Ci(i,c,h,g,E){if(0>g||0>E)throw new K(28);if(i.fd===null)throw new K(8);if((i.flags&2097155)===1)throw new K(8);if(sr(i.node.mode))throw new K(31);if(!i.Ha.read)throw new K(28);var D=typeof E<"u";if(!D)E=i.position;else if(!i.seekable)throw new K(70);return c=i.Ha.read(i,c,h,g,E),D||(i.position+=c),c}function jn(i,c,h,g,E){if(0>g||0>E)throw new K(28);if(i.fd===null)throw new K(8);if(!(i.flags&2097155))throw new K(8);if(sr(i.node.mode))throw new K(31);if(!i.Ha.write)throw new K(28);i.seekable&&i.flags&1024&&qi(i,0,2);var D=typeof E<"u";if(!D)E=i.position;else if(!i.seekable)throw new K(70);return c=i.Ha.write(i,c,h,g,E,void 0),D||(i.position+=c),c}function yl(i){var c,h=or(i,h||0);i=vn(i).size;var g=new Uint8Array(i);return Ci(h,g,0,i,0),c=g,Qn(h),c}function ou(){K||(K=function(i,c){this.name="ErrnoError",this.node=c,this.Eb=function(h){this.Ka=h},this.Eb(i),this.message="FS error"},K.prototype=Error(),K.prototype.constructor=K,[44].forEach(i=>{ws[i]=new K(i),ws[i].stack="<generic error, no stack>"}))}var Bo;function _n(i,c,h){i=se("/dev/"+i);var g=ys(!!c,!!h);Fo||(Fo=64);var E=Fo++<<8|0;Un(E,{open(D){D.seekable=!1},close(){h&&h.buffer&&h.buffer.length&&h(10)},read(D,U,pe,Se){for(var Ee=0,He=0;He<Se;He++){try{var Ke=c()}catch{throw new K(29)}if(Ke===void 0&&Ee===0)throw new K(6);if(Ke==null)break;Ee++,U[pe+He]=Ke}return Ee&&(D.node.timestamp=Date.now()),Ee},write(D,U,pe,Se){for(var Ee=0;Ee<Se;Ee++)try{h(U[pe+Ee])}catch{throw new K(29)}return Se&&(D.node.timestamp=Date.now()),Ee}}),Nn(i,g,E)}var Fo,ze={},Vn,xs;function Yr(i,c,h){if(c.charAt(0)==="/")return c;if(i=i===-100?"/":qt(i).path,c.length==0){if(!h)throw new K(44);return i}return se(i+"/"+c)}function Ii(i,c,h){try{var g=i(c)}catch(D){if(D&&D.node&&se(c)!==se(Fn(D.node)))return-54;throw D}de[h>>2]=g.dev,de[h+4>>2]=g.mode,je[h+8>>2]=g.nlink,de[h+12>>2]=g.uid,de[h+16>>2]=g.gid,de[h+20>>2]=g.rdev,W=[g.size>>>0,(v=g.size,1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[h+24>>2]=W[0],de[h+28>>2]=W[1],de[h+32>>2]=4096,de[h+36>>2]=g.blocks,i=g.atime.getTime(),c=g.mtime.getTime();var E=g.ctime.getTime();return W=[Math.floor(i/1e3)>>>0,(v=Math.floor(i/1e3),1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[h+40>>2]=W[0],de[h+44>>2]=W[1],je[h+48>>2]=i%1e3*1e3,W=[Math.floor(c/1e3)>>>0,(v=Math.floor(c/1e3),1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[h+56>>2]=W[0],de[h+60>>2]=W[1],je[h+64>>2]=c%1e3*1e3,W=[Math.floor(E/1e3)>>>0,(v=Math.floor(E/1e3),1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[h+72>>2]=W[0],de[h+76>>2]=W[1],je[h+80>>2]=E%1e3*1e3,W=[g.ino>>>0,(v=g.ino,1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[h+88>>2]=W[0],de[h+92>>2]=W[1],0}var Si=void 0;function Ti(){var i=de[+Si>>2];return Si+=4,i}var zn=(i,c)=>c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,au=[0,31,60,91,121,152,182,213,244,274,305,335],uu=[0,31,59,90,120,151,181,212,243,273,304,334],Uo=i=>{var c=Ve(i)+1,h=Ri(c);return h&&le(i,Re,h,c),h},Es={},$o=()=>{if(!Os){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"},c;for(c in Es)Es[c]===void 0?delete i[c]:i[c]=Es[c];var h=[];for(c in i)h.push(`${c}=${i[c]}`);Os=h}return Os},Os,qs=i=>{var c=Ve(i)+1,h=Rr(c);return le(i,Re,h,c),h},cu=(i,c,h,g)=>{var E={string:Ee=>{var He=0;return Ee!=null&&Ee!==0&&(He=qs(Ee)),He},array:Ee=>{var He=Rr(Ee.length);return Me.set(Ee,He),He}};i=y["_"+i];var D=[],U=0;if(g)for(var pe=0;pe<g.length;pe++){var Se=E[h[pe]];Se?(U===0&&(U=Hn()),D[pe]=Se(g[pe])):D[pe]=g[pe]}return h=i.apply(null,D),h=function(Ee){return U!==0&&Kn(U),c==="string"?Ee?V(Re,Ee):"":c==="boolean"?!!Ee:Ee}(h)},Ai=0,ki=(i,c)=>(c=c==1?Rr(i.length):Ri(i.length),i.subarray||i.slice||(i=new Uint8Array(i)),Re.set(i,c),c),Xr,Cs=[],qr,xn=i=>{Xr.delete(qr.get(i)),qr.set(i,null),Cs.push(i)},Wi=(i,c)=>{if(!Xr){Xr=new WeakMap;var h=qr.length;if(Xr)for(var g=0;g<0+h;g++){var E=qr.get(g);E&&Xr.set(E,g)}}if(h=Xr.get(i)||0)return h;if(Cs.length)h=Cs.pop();else{try{qr.grow(1)}catch(pe){throw pe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":pe}h=qr.length-1}try{qr.set(h,i)}catch(pe){if(!(pe instanceof TypeError))throw pe;if(typeof WebAssembly.Function=="function"){g=WebAssembly.Function,E={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var D={parameters:[],results:c[0]=="v"?[]:[E[c[0]]]},U=1;U<c.length;++U)D.parameters.push(E[c[U]]);c=new g(D,i)}else{for(g=[1],E=c.slice(0,1),c=c.slice(1),D={i:127,p:127,j:126,f:125,d:124,e:111},g.push(96),U=c.length,128>U?g.push(U):g.push(U%128|128,U>>7),U=0;U<c.length;++U)g.push(D[c[U]]);E=="v"?g.push(0):g.push(1,D[E]),c=[0,97,115,109,1,0,0,0,1],E=g.length,128>E?c.push(E):c.push(E%128|128,E>>7),c.push.apply(c,g),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:i}}).exports.f}qr.set(h,c)}return Xr.set(i,h),h};function Qo(i,c,h,g){i||(i=this),this.parent=i,this.Ra=i.Ra,this.Va=null,this.id=nu++,this.name=c,this.mode=h,this.Ga={},this.Ha={},this.rdev=g}Object.defineProperties(Qo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(i){i?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(i){i?this.mode|=146:this.mode&=-147}}}),ou(),Vt=Array(4096),Po(B,"/"),wr("/tmp"),wr("/home"),wr("/home/web_user"),function(){wr("/dev"),Un(259,{read:()=>0,write:(g,E,D,U)=>U}),Nn("/dev/null",259),Wr(1280,Lt),Wr(1536,dt),Nn("/dev/tty",1280),Nn("/dev/tty1",1536);var i=new Uint8Array(1024),c=0,h=()=>(c===0&&(c=Oe(i).byteLength),i[--c]);_n("random",h),_n("urandom",h),wr("/dev/shm"),wr("/dev/shm/tmp")}(),function(){wr("/proc");var i=wr("/proc/self");wr("/proc/self/fd"),Po({Ra(){var c=Ro(i,"fd",16895,73);return c.Ga={lookup(h,g){var E=qt(+g);return h={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>E.path}},h.parent=h}},c}},"/proc/self/fd")}();var lu={a:(i,c,h,g)=>{mr(`Assertion failed: ${i?V(Re,i):""}, at: `+[c?c?V(Re,c):"":"unknown filename",h,g?g?V(Re,g):"":"unknown function"])},h:function(i,c){try{return i=i?V(Re,i):"",Gr(i,c),0}catch(h){if(typeof ze>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},H:function(i,c,h){try{if(c=c?V(Re,c):"",c=Yr(i,c),h&-8)return-28;var g=pt(c,{Sa:!0}).node;return g?(i="",h&4&&(i+="r"),h&2&&(i+="w"),h&1&&(i+="x"),i&&bn(g,i)?-2:0):-44}catch(E){if(typeof ze>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},i:function(i,c){try{var h=qt(i);return Gr(h.node,c),0}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},g:function(i){try{var c=qt(i).node,h=typeof c=="string"?pt(c,{Sa:!0}).node:c;if(!h.Ga.Oa)throw new K(63);return h.Ga.Oa(h,{timestamp:Date.now()}),0}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},b:function(i,c,h){Si=h;try{var g=qt(i);switch(c){case 0:var E=Ti();if(0>E)return-28;for(;gn[E];)E++;return Do(g,E).fd;case 1:case 2:return 0;case 3:return g.flags;case 4:return E=Ti(),g.flags|=E,0;case 5:return E=Ti(),Er[E+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return de[jo()>>2]=28,-1;default:return-28}}catch(D){if(typeof ze>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},f:function(i,c){try{var h=qt(i);return Ii(vn,h.path,c)}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},n:function(i,c,h){c=zn(c,h);try{if(isNaN(c))return 61;var g=qt(i);if(!(g.flags&2097155))throw new K(28);return Oi(g.node,c),0}catch(E){if(typeof ze>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},C:function(i,c){try{if(c===0)return-28;var h=Ve("/")+1;return c<h?-68:(le("/",Re,i,c),h)}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},F:function(i,c){try{return i=i?V(Re,i):"",Ii(Ye,i,c)}catch(h){if(typeof ze>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},z:function(i,c,h){try{return c=c?V(Re,c):"",c=Yr(i,c),c=se(c),c[c.length-1]==="/"&&(c=c.substr(0,c.length-1)),wr(c,h),0}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},E:function(i,c,h,g){try{c=c?V(Re,c):"";var E=g&256;return c=Yr(i,c,g&4096),Ii(E?Ye:vn,c,h)}catch(D){if(typeof ze>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},y:function(i,c,h,g){Si=g;try{c=c?V(Re,c):"",c=Yr(i,c);var E=g?Ti():0;return or(c,h,E).fd}catch(D){if(typeof ze>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},w:function(i,c,h,g){try{if(c=c?V(Re,c):"",c=Yr(i,c),0>=g)return-28;var E=$n(c),D=Math.min(g,Ve(E)),U=Me[h+D];return le(E,Re,h,g+1),Me[h+D]=U,D}catch(pe){if(typeof ze>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Ka}},v:function(i){try{return i=i?V(Re,i):"",Lo(i),0}catch(c){if(typeof ze>"u"||c.name!=="ErrnoError")throw c;return-c.Ka}},G:function(i,c){try{return i=i?V(Re,i):"",Ii(vn,i,c)}catch(h){if(typeof ze>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},r:function(i,c,h){try{return c=c?V(Re,c):"",c=Yr(i,c),h===0?Mo(c):h===512?Lo(c):mr("Invalid flags passed to unlinkat"),0}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},q:function(i,c,h){try{if(c=c?V(Re,c):"",c=Yr(i,c,!0),h){var g=je[h>>2]+4294967296*de[h+4>>2],E=de[h+8>>2];D=1e3*g+E/1e6,h+=16,g=je[h>>2]+4294967296*de[h+4>>2],E=de[h+8>>2],U=1e3*g+E/1e6}else var D=Date.now(),U=D;i=D;var pe=pt(c,{Sa:!0}).node;return pe.Ga.Oa(pe,{timestamp:Math.max(i,U)}),0}catch(Se){if(typeof ze>"u"||Se.name!=="ErrnoError")throw Se;return-Se.Ka}},l:function(i,c,h){i=new Date(1e3*zn(i,c)),de[h>>2]=i.getSeconds(),de[h+4>>2]=i.getMinutes(),de[h+8>>2]=i.getHours(),de[h+12>>2]=i.getDate(),de[h+16>>2]=i.getMonth(),de[h+20>>2]=i.getFullYear()-1900,de[h+24>>2]=i.getDay(),c=i.getFullYear(),de[h+28>>2]=(c%4!==0||c%100===0&&c%400!==0?uu:au)[i.getMonth()]+i.getDate()-1|0,de[h+36>>2]=-(60*i.getTimezoneOffset()),c=new Date(i.getFullYear(),6,1).getTimezoneOffset();var g=new Date(i.getFullYear(),0,1).getTimezoneOffset();de[h+32>>2]=(c!=g&&i.getTimezoneOffset()==Math.min(g,c))|0},j:function(i,c,h,g,E,D,U,pe){E=zn(E,D);try{if(isNaN(E))return 61;var Se=qt(g);if(c&2&&!(h&2)&&(Se.flags&2097155)!==2)throw new K(2);if((Se.flags&2097155)===1)throw new K(2);if(!Se.Ha.bb)throw new K(43);var Ee=Se.Ha.bb(Se,i,E,c,h),He=Ee.Db;return de[U>>2]=Ee.ub,je[pe>>2]=He,0}catch(Ke){if(typeof ze>"u"||Ke.name!=="ErrnoError")throw Ke;return-Ke.Ka}},k:function(i,c,h,g,E,D,U){D=zn(D,U);try{if(isNaN(D))return 61;var pe=qt(E);if(h&2){if((pe.node.mode&61440)!==32768)throw new K(43);if(!(g&2)){var Se=Re.slice(i,i+c);pe.Ha.cb&&pe.Ha.cb(pe,Se,D,c,g)}}}catch(Ee){if(typeof ze>"u"||Ee.name!=="ErrnoError")throw Ee;return-Ee.Ka}},s:(i,c,h)=>{function g(Se){return(Se=Se.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Se[1]:"GMT"}var E=new Date().getFullYear(),D=new Date(E,0,1),U=new Date(E,6,1);E=D.getTimezoneOffset();var pe=U.getTimezoneOffset();je[i>>2]=60*Math.max(E,pe),de[c>>2]=+(E!=pe),i=g(D),c=g(U),i=Uo(i),c=Uo(c),pe<E?(je[h>>2]=i,je[h+4>>2]=c):(je[h>>2]=c,je[h+4>>2]=i)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:i=>{var c=Re.length;if(i>>>=0,2147483648<i)return!1;for(var h=1;4>=h;h*=2){var g=c*(1+.2/h);g=Math.min(g,i+100663296);var E=Math;g=Math.max(i,g);e:{E=(E.min.call(E,2147483648,g+(65536-g%65536)%65536)-ft.buffer.byteLength+65535)/65536;try{ft.grow(E),Ie();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},A:(i,c)=>{var h=0;return $o().forEach((g,E)=>{var D=c+h;for(E=je[i+4*E>>2]=D,D=0;D<g.length;++D)Me[E++>>0]=g.charCodeAt(D);Me[E>>0]=0,h+=g.length+1}),0},B:(i,c)=>{var h=$o();je[i>>2]=h.length;var g=0;return h.forEach(E=>g+=E.length+1),je[c>>2]=g,0},e:function(i){try{var c=qt(i);return Qn(c),0}catch(h){if(typeof ze>"u"||h.name!=="ErrnoError")throw h;return h.Ka}},p:function(i,c){try{var h=qt(i);return Me[c>>0]=h.tty?2:sr(h.mode)?3:(h.mode&61440)===40960?7:4,Er[c+2>>1]=0,W=[0,(v=0,1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[c+8>>2]=W[0],de[c+12>>2]=W[1],W=[0,(v=0,1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[c+16>>2]=W[0],de[c+20>>2]=W[1],0}catch(g){if(typeof ze>"u"||g.name!=="ErrnoError")throw g;return g.Ka}},x:function(i,c,h,g){try{e:{var E=qt(i);i=c;for(var D,U=c=0;U<h;U++){var pe=je[i>>2],Se=je[i+4>>2];i+=8;var Ee=Ci(E,Me,pe,Se,D);if(0>Ee){var He=-1;break e}if(c+=Ee,Ee<Se)break;typeof D<"u"&&(D+=Ee)}He=c}return je[g>>2]=He,0}catch(Ke){if(typeof ze>"u"||Ke.name!=="ErrnoError")throw Ke;return Ke.Ka}},m:function(i,c,h,g,E){c=zn(c,h);try{if(isNaN(c))return 61;var D=qt(i);return qi(D,c,g),W=[D.position>>>0,(v=D.position,1<=+Math.abs(v)?0<v?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],de[E>>2]=W[0],de[E+4>>2]=W[1],D.hb&&c===0&&g===0&&(D.hb=null),0}catch(U){if(typeof ze>"u"||U.name!=="ErrnoError")throw U;return U.Ka}},D:function(i){try{var c=qt(i);return c.Ha&&c.Ha.fsync?c.Ha.fsync(c):0}catch(h){if(typeof ze>"u"||h.name!=="ErrnoError")throw h;return h.Ka}},u:function(i,c,h,g){try{e:{var E=qt(i);i=c;for(var D,U=c=0;U<h;U++){var pe=je[i>>2],Se=je[i+4>>2];i+=8;var Ee=jn(E,Me,pe,Se,D);if(0>Ee){var He=-1;break e}c+=Ee,typeof D<"u"&&(D+=Ee)}He=c}return je[g>>2]=He,0}catch(Ke){if(typeof ze>"u"||Ke.name!=="ErrnoError")throw Ke;return Ke.Ka}}},fe=function(){function i(h){return fe=h.exports,ft=fe.I,Ie(),qr=fe.Aa,Tt.unshift(fe.J),Nt--,y.monitorRunDependencies&&y.monitorRunDependencies(Nt),Nt==0&&Ar&&(h=Ar,Ar=null,h()),fe}var c={a:lu};if(Nt++,y.monitorRunDependencies&&y.monitorRunDependencies(Nt),y.instantiateWasm)try{return y.instantiateWasm(c,i)}catch(h){return ce(`Module.instantiateWasm callback failed with error: ${h}`),!1}return O(c,function(h){i(h.instance)}),{}}();y._sqlite3_free=i=>(y._sqlite3_free=fe.K)(i),y._sqlite3_value_text=i=>(y._sqlite3_value_text=fe.L)(i);var jo=()=>(jo=fe.M)();y._sqlite3_prepare_v2=(i,c,h,g,E)=>(y._sqlite3_prepare_v2=fe.N)(i,c,h,g,E),y._sqlite3_step=i=>(y._sqlite3_step=fe.O)(i),y._sqlite3_finalize=i=>(y._sqlite3_finalize=fe.P)(i),y._sqlite3_reset=i=>(y._sqlite3_reset=fe.Q)(i),y._sqlite3_clear_bindings=i=>(y._sqlite3_clear_bindings=fe.R)(i),y._sqlite3_value_blob=i=>(y._sqlite3_value_blob=fe.S)(i),y._sqlite3_value_bytes=i=>(y._sqlite3_value_bytes=fe.T)(i),y._sqlite3_value_double=i=>(y._sqlite3_value_double=fe.U)(i),y._sqlite3_value_int=i=>(y._sqlite3_value_int=fe.V)(i),y._sqlite3_value_type=i=>(y._sqlite3_value_type=fe.W)(i),y._sqlite3_result_blob=(i,c,h,g)=>(y._sqlite3_result_blob=fe.X)(i,c,h,g),y._sqlite3_result_double=(i,c)=>(y._sqlite3_result_double=fe.Y)(i,c),y._sqlite3_result_error=(i,c,h)=>(y._sqlite3_result_error=fe.Z)(i,c,h),y._sqlite3_result_int=(i,c)=>(y._sqlite3_result_int=fe._)(i,c),y._sqlite3_result_int64=(i,c,h)=>(y._sqlite3_result_int64=fe.$)(i,c,h),y._sqlite3_result_null=i=>(y._sqlite3_result_null=fe.aa)(i),y._sqlite3_result_text=(i,c,h,g)=>(y._sqlite3_result_text=fe.ba)(i,c,h,g),y._sqlite3_aggregate_context=(i,c)=>(y._sqlite3_aggregate_context=fe.ca)(i,c),y._sqlite3_column_count=i=>(y._sqlite3_column_count=fe.da)(i),y._sqlite3_data_count=i=>(y._sqlite3_data_count=fe.ea)(i),y._sqlite3_column_blob=(i,c)=>(y._sqlite3_column_blob=fe.fa)(i,c),y._sqlite3_column_bytes=(i,c)=>(y._sqlite3_column_bytes=fe.ga)(i,c),y._sqlite3_column_double=(i,c)=>(y._sqlite3_column_double=fe.ha)(i,c),y._sqlite3_column_text=(i,c)=>(y._sqlite3_column_text=fe.ia)(i,c),y._sqlite3_column_type=(i,c)=>(y._sqlite3_column_type=fe.ja)(i,c),y._sqlite3_column_name=(i,c)=>(y._sqlite3_column_name=fe.ka)(i,c),y._sqlite3_bind_blob=(i,c,h,g,E)=>(y._sqlite3_bind_blob=fe.la)(i,c,h,g,E),y._sqlite3_bind_double=(i,c,h)=>(y._sqlite3_bind_double=fe.ma)(i,c,h),y._sqlite3_bind_int=(i,c,h)=>(y._sqlite3_bind_int=fe.na)(i,c,h),y._sqlite3_bind_text=(i,c,h,g,E)=>(y._sqlite3_bind_text=fe.oa)(i,c,h,g,E),y._sqlite3_bind_parameter_index=(i,c)=>(y._sqlite3_bind_parameter_index=fe.pa)(i,c),y._sqlite3_sql=i=>(y._sqlite3_sql=fe.qa)(i),y._sqlite3_normalized_sql=i=>(y._sqlite3_normalized_sql=fe.ra)(i),y._sqlite3_errmsg=i=>(y._sqlite3_errmsg=fe.sa)(i),y._sqlite3_exec=(i,c,h,g,E)=>(y._sqlite3_exec=fe.ta)(i,c,h,g,E),y._sqlite3_changes=i=>(y._sqlite3_changes=fe.ua)(i),y._sqlite3_close_v2=i=>(y._sqlite3_close_v2=fe.va)(i),y._sqlite3_create_function_v2=(i,c,h,g,E,D,U,pe,Se)=>(y._sqlite3_create_function_v2=fe.wa)(i,c,h,g,E,D,U,pe,Se),y._sqlite3_open=(i,c)=>(y._sqlite3_open=fe.xa)(i,c);var Ri=y._malloc=i=>(Ri=y._malloc=fe.ya)(i),Di=y._free=i=>(Di=y._free=fe.za)(i);y._RegisterExtensionFunctions=i=>(y._RegisterExtensionFunctions=fe.Ba)(i);var Vo=(i,c)=>(Vo=fe.Ca)(i,c),Hn=()=>(Hn=fe.Da)(),Kn=i=>(Kn=fe.Ea)(i),Rr=i=>(Rr=fe.Fa)(i);y.stackAlloc=Rr,y.stackSave=Hn,y.stackRestore=Kn,y.cwrap=(i,c,h,g)=>{var E=!h||h.every(D=>D==="number"||D==="boolean");return c!=="string"&&E&&!g?y["_"+i]:function(){return cu(i,c,h,arguments)}},y.addFunction=Wi,y.removeFunction=xn,y.UTF8ToString=te,y.ALLOC_NORMAL=Ai,y.allocate=ki,y.allocateUTF8OnStack=qs;var Pi;Ar=function i(){Pi||zo(),Pi||(Ar=i)};function zo(){function i(){if(!Pi&&(Pi=!0,y.calledRun=!0,!Tr)){if(y.noFSInit||Bo||(Bo=!0,ou(),y.stdin=y.stdin,y.stdout=y.stdout,y.stderr=y.stderr,y.stdin?_n("stdin",y.stdin):_s("/dev/tty","/dev/stdin"),y.stdout?_n("stdout",null,y.stdout):_s("/dev/tty","/dev/stdout"),y.stderr?_n("stderr",null,y.stderr):_s("/dev/tty1","/dev/stderr"),or("/dev/stdin",0),or("/dev/stdout",1),or("/dev/stderr",1)),Wo=!1,$(Tt),y.onRuntimeInitialized&&y.onRuntimeInitialized(),y.postRun)for(typeof y.postRun=="function"&&(y.postRun=[y.postRun]);y.postRun.length;){var c=y.postRun.shift();Hr.unshift(c)}$(Hr)}}if(!(0<Nt)){if(y.preRun)for(typeof y.preRun=="function"&&(y.preRun=[y.preRun]);y.preRun.length;)Or();$(Ue),0<Nt||(y.setStatus?(y.setStatus("Running..."),setTimeout(function(){setTimeout(function(){y.setStatus("")},1),i()},1)):i())}}if(y.preInit)for(typeof y.preInit=="function"&&(y.preInit=[y.preInit]);0<y.preInit.length;)y.preInit.pop()();return zo(),_}),r)};t.exports=n,t.exports.default=n})(bm);var Gb=bm.exports;const Yb=zb(Gb),Xb=""+new URL("sql-wasm-Ko6OkY9T.wasm",import.meta.url).href,Zb="sqlitevfs",Fs=new Map,eN=2048,tN=65536;class rN{constructor(e){ye(this,"_data");ye(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const n=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(n),n.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,n=Math.min(tN,Math.max(eN,this._data.length)),a=new Uint8Array(this._data.length+Math.max(n,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const nN=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,eh=new Promise((t,e)=>{const r=nN.open(Zb,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function iN(t){const e=await eh,r=await new Promise((n,a)=>{const m=e.transaction("files","readonly").objectStore("files").get(t);m.onsuccess=()=>n(m.result),m.onerror=()=>a(m.error)});if(r&&!Fs.has(t)){const n=new rN(r.data);return Fs.set(t,n),n}else return Fs.has(t)?Fs.get(t):null}async function sN(t,e){const r=await eh;await new Promise((n,a)=>{const m=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});m.onsuccess=()=>n(!0),m.onerror=()=>a(m.error)})}async function nd(t){const e=await eh;await new Promise((r,n)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>n(l.error)})}async function oN(t,e){if(await sN(t,e),Fs.has(t)){const r=Fs.get(t);r.truncate(0),r.write(0,e)}}var aN=class extends Hf{constructor(e){super();ye(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:n,...a}=r,l=this.serializer(n);return n===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},Nm=t=>{if(vm(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},id=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,uN=t=>{if(vm(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(id.test(t))return new Date(t);try{return JSON.parse(t,(e,r)=>typeof r=="string"&&id.exec(r)?new Date(r):r)}catch{return t}}};function vm(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var cN=class{constructor(t={}){ye(this,"transformer");ye(this,"deserializer");ye(this,"skipNodeSet");ye(this,"ctx");const{deserializer:e=uN,serializer:r=Nm,skipNodeKind:n=[]}=t;this.transformer=new aN(r),this.deserializer=e,n.length&&(this.skipNodeSet=new Set(n),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:t.rows.map(r=>Object.fromEntries(Object.entries(r).map(([n,a])=>[n,this.deserializer(a)])))}}};function sd(t){const{logger:e,merge:r,queryNode:n}=t;return a=>{const{level:l,queryDurationMillis:m,query:{parameters:_,sql:x,query:y}}=a,k=l==="error"?a.error:void 0;let R=x.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&_.forEach(H=>{R=R.replace("?",typeof H=="string"?H:JSON.stringify(H))});const G={sql:R,params:_,duration:m,error:k};n&&(G.queryNode=y),e(G)}}async function lN(t){const{rows:e}=await t.executeQuery(pn.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function od(t,e){if(e)return await t.executeQuery(pn.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(pn.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function fN(t){return`__pre_${t}`}function hN(t,e=r=>r){return{setParam:r=>{let n;return(a,l)=>{if(!n){const{parameters:m,sql:_,query:x}=r({qb:t,param:fN}).compile();n={sql:_,query:l?.(x)||{kind:x.kind},parameters:m}}return{...n,parameters:n.parameters.map(m=>typeof m=="string"&&m.startsWith("__pre_")?e(a[m.slice(6)]):m)}}}}}async function dN(t,e,r){const n=r||`sp_${Date.now()%1e8}`;await St`savepoint ${St.raw(n)}`.execute(t);try{const a=await e(t);return await St`release savepoint ${St.raw(n)}`.execute(t),a}catch(a){throw await St`rollback to savepoint ${St.raw(n)}`.execute(t),a}}var pN=class extends Error{constructor(){super("db file maybe broken")}};function mN(t){return t.toOperationNode().kind==="SelectQueryNode"}var yN=class{constructor(t){ye(this,"kysely");ye(this,"trxCount",0);ye(this,"trx");ye(this,"logger");ye(this,"serializer",Nm);const{dialect:e,logger:r,onQuery:n,plugins:a=[],serializerPluginOptions:l}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new cN(l));let m;n===!0?m=sd({logger:this.logger?.debug||console.log,merge:!0}):n&&(m=sd(n)),this.kysely=new Wa({dialect:e,log:m,plugins:a})}async updateTableSchema(t,e){try{if(e&&!await lN(this.kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new pN};await t(this.kysely,this.logger)}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}return this.logger?.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await dN(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trxCount--)):await this.kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.getDB()).execute():await this.getDB().executeQuery(t)}async executeTakeFirst(t){let e=t(this.getDB());return mN(e)&&(e=e.limit(1)),await e.executeTakeFirstOrThrow()}precompile(t){return this.logger?.debug?.("precompile"),hN(t(this.kysely),this.serializer)}async raw(t,e){return typeof t=="string"?await this.getDB().executeQuery(pn.raw(t,e)):await t.execute(this.getDB())}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},_m="__TIME_TRIGGER__";function wN(t,e){const{create:r,update:n}=e?.timeTrigger||{},a={type:"date",defaultTo:_m};return r===!0?t.createAt=a:r&&(t[r]=a),n===!0?t.updateAt={...a,notNull:0}:n&&(t[n]={...a,notNull:0}),{columns:t,...e}}function xm(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function mf(t){return Array.isArray(t)?t:[t]}function gN(t){return typeof t=="function"}async function Du(t,e){await t.schema.dropTable(e).execute()}async function ad(t,e,r){const{index:n,...a}=r;await t.transaction().execute(async l=>{const m=await yf(l,e,a);await Om(l,e,m),await Em(l,e,n)})}async function Em(t,e,r){for(const n of r||[]){const a=mf(n);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function yf(t,e,{columns:r,primary:n,timeTrigger:a,unique:l},m=!1){const _=a?{triggerKey:"rowid",update:void 0}:void 0;let x=!1,y=t.schema.createTable(e);m&&(y=y.temporary());for(const[k,R]of Object.entries(r)){let G="text";const{type:H,notNull:ae,defaultTo:N}=R,q=xm(H);G=q.dataType,y=y.addColumn(k,G,b=>q.isIncrements?(x=!0,_&&(_.triggerKey=k),b.autoIncrement().primaryKey()):N===_m?(_&&ae===0&&(_.update=k),b.defaultTo(St`CURRENT_TIMESTAMP`)):(ae===!0&&(b=b.notNull()),N!==void 0&&(b=b.defaultTo(gN(N)?N(St):N)),b))}if(!x&&n){const k=mf(n);y=y.addPrimaryKeyConstraint(`pk#${k.join("#")}`,k)}for(const k of l||[]){const R=mf(k);y=y.addUniqueConstraint(`un#${R.join("#")}`,R)}return await y.ifNotExists().execute(),_}async function Om(t,e,r){if(!r||!r.update)return;const{triggerKey:n,update:a}=r,l=`tgr_${e}_${a}`;await St`create trigger if not exists ${St.ref(l)}
after update
on ${St.table(e)}
begin
  update ${St.table(e)}
  set ${St.ref(a)} = CURRENT_TIMESTAMP
  where ${St.ref(n)} = NEW.${St.ref(n)};
end`.execute(t)}function bN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,n,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:n,primary:void 0,unique:[]},m=a.matchAll(r);for(const _ of m){const[,x,y,k]=_;if(x.startsWith("pk#")){const[,...R]=x.split("#");l.primary=R}else if(x.startsWith("un#")){const[,...R]=x.split("#");l.unique.push(R)}else l.columns[x]={type:y,notNull:!!k}}return l}async function NN(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",fm).where("name","!=",hm).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(m=>l("name","not like",`${m}%`))))).select(["name","sql","type"]).$castTo().execute(),n={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:m}of r)l&&(m==="table"?n.existTables[a]=bN(l):m==="index"?n.indexList.push(a):n.triggerList.push(a));return n}async function vN(t,e,r={},n){const{reserveOldData:a,truncateIfExists:l=[],log:m,version:{current:_,skipSyncWhenSame:x}={},excludeTablePrefix:y,afterUpdate:k}=r;if(_){if(x&&_===await od(t))return;await od(t,_)}const R=b=>m&&n?.debug(b),{existTables:G,indexList:H,triggerList:ae}=await NN(t,y);R("====== update tables start ======");const N=new Set(Array.isArray(l)?l:l?Object.keys(G):[]);for(const b of H)await t.schema.dropIndex(b).ifExists().execute();for(const b of ae)await St`drop trigger if exists ${St.ref(b)}`.execute(t);for(const[b,S]of Object.entries(G))b in e?(R(`diff table: ${b}`),await q(b,S,e[b])):(R(`remove table: ${b}`),await Du(t,b));for(const[b,S]of Object.entries(e))b in G||(R(`create table: ${b}`),await ad(t,b,S));R("======= after update hook ======="),await k?.(t),R("======= update tables end =======");async function q(b,S,T){if(N.has(b)){await t.transaction().execute(async Le=>{await Du(Le,b),await ad(Le,b,T),R("clear and sync structure")});return}const{index:X,...re}=T,ce=_N(S.columns,T.columns);if(ce.length===Object.keys(S.columns).length){R("same table structure, skip");return}R("different table structure, update"),await t.transaction().execute(async Le=>{const ft=`_temp_${b}`;await yf(Le,ft,S,!0),await Le.insertInto(ft).expression(Me=>Me.selectFrom(b).selectAll()).execute(),await Du(Le,b);const Tr=await yf(Le,b,re);ce.length&&await Le.insertInto(b).columns(ce).expression(Me=>Me.selectFrom(ft).select(ce)).execute(),await Em(Le,b,X),await Om(Le,b,Tr),!a&&await Du(Le,ft)}).then(()=>R(`restore columns: ${ce}`)).catch(Le=>n?.error(`fail to sync ${b}`,Le))}}function _N(t,e){const r=[];for(const[n,a]of Object.entries(e))if(n in t){const{type:l,notNull:m=!1}=t[n];xm(a.type).dataType===l&&(a.notNull||!1)===m&&r.push(n)}return r}function xN(t,e={}){const{log:r}=e;return async(n,a)=>{await vN(n,t,e,r?a:void 0)}}const EN={test:wN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function th(t){const e=new yN({dialect:t}),r=await e.updateTableSchema(xN(EN));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let n=0;n<10;n++)await e.transaction(async()=>{await e.transaction(async()=>{if(n>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(n=>n.selectFrom("test").selectAll()).then(async n=>(await e.destroy(),console.log(n),n))}const ON=new $b({async database(){const t=await Yb({locateFile:()=>Xb});return new t.Database(await iN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),oN("sqljs",t)},isThrottle:!0}});function qN(){const t=xy();function e(){th(ON).then(r=>{t.value=r})}return{result:t,run:e}}function CN(t){return new Worker(""+new URL("sqljsWorker-nTM7Xg96.js",import.meta.url).href,{type:"module",name:t?.name})}function IN(t){return new Worker(""+new URL("officialWasmWorker-uAsyyHsN.js",import.meta.url).href,{type:"module",name:t?.name})}var Je=0,SN=5,wt=10,qm=12,Cm=14,Bi=21,Rl=25,TN=27,wf=100,AN=101,kN=3850,WN=522,Im=1,RN=2,Sm=4,DN=8,Ds=0,$i=1,zu=2,PN=3,Hu=4,LN=512,MN=1024,BN=2048,FN=16384,ud=1,cd=2,ld=3,fd=4,hd=5,dd=0x7fffffffffffffffn,pd=-0x8000000000000000n,On=class extends Error{constructor(t,e){super(t),this.code=e}},Ws=!0;function UN(t){const e={},r=t._getSqliteFree(),n=t._malloc(8),a=[n,n+4];function l(N){if(typeof N!="string")return 0;const q=t.lengthBytesUTF8(N),b=t._sqlite3_malloc(q+1);return t.stringToUTF8(N,b,q+1),b}function m(N,q){return BigInt(q)<<32n|BigInt(N)&0xffffffffn}const _=function(){const N=BigInt(Number.MAX_SAFE_INTEGER)>>32n,q=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(b,S){return S>N||S<q?m(b,S):S*4294967296+(b&2147483647)-(b&2147483648)}}(),x=new Set;function y(N){if(!x.has(N))throw new On("not a database",Bi)}const k=new Map;function R(N){if(!k.has(N))throw new On("not a statement",Bi)}e.bind_collection=function(N,q){R(N);const b=Array.isArray(q),S=e.bind_parameter_count(N);for(let T=1;T<=S;++T){const X=b?T-1:e.bind_parameter_name(N,T),re=q[X];re!==void 0&&e.bind(N,T,re)}return Je},e.bind=function(N,q,b){switch(R(N),typeof b){case"number":return b===(b|0)?e.bind_int(N,q,b):e.bind_double(N,q,b);case"string":return e.bind_text(N,q,b);default:return b instanceof Uint8Array||Array.isArray(b)?e.bind_blob(N,q,b):b===null?e.bind_null(N,q):typeof b=="bigint"?e.bind_int64(N,q,b):b===void 0?TN:(console.warn("unknown binding converted to null",b),e.bind_null(N,q))}},e.bind_blob=function(){const N="sqlite3_bind_blob",q=t.cwrap(N,...ve("nnnnn:n"));return function(b,S,T){R(b);const X=T.byteLength??T.length,re=t._sqlite3_malloc(X);t.HEAPU8.subarray(re).set(T);const ce=q(b,S,re,X,r);return ae(N,ce,k.get(b))}}(),e.bind_parameter_count=function(){const N="sqlite3_bind_parameter_count",q=t.cwrap(N,...ve("n:n"));return function(b){return R(b),q(b)}}(),e.bind_double=function(){const N="sqlite3_bind_double",q=t.cwrap(N,...ve("nnn:n"));return function(b,S,T){R(b);const X=q(b,S,T);return ae(N,X,k.get(b))}}(),e.bind_int=function(){const N="sqlite3_bind_int",q=t.cwrap(N,...ve("nnn:n"));return function(b,S,T){if(R(b),T>2147483647||T<-2147483648)return Rl;const X=q(b,S,T);return ae(N,X,k.get(b))}}(),e.bind_int64=function(){const N="sqlite3_bind_int64",q=t.cwrap(N,...ve("nnnn:n"));return function(b,S,T){if(R(b),T>dd||T<pd)return Rl;const X=T&0xffffffffn,re=T>>32n,ce=q(b,S,Number(X),Number(re));return ae(N,ce,k.get(b))}}(),e.bind_null=function(){const N="sqlite3_bind_null",q=t.cwrap(N,...ve("nn:n"));return function(b,S){R(b);const T=q(b,S);return ae(N,T,k.get(b))}}(),e.bind_parameter_name=function(){const N="sqlite3_bind_parameter_name",q=t.cwrap(N,...ve("n:s"));return function(b,S){return R(b),q(b,S)}}(),e.bind_text=function(){const N="sqlite3_bind_text",q=t.cwrap(N,...ve("nnnnn:n"));return function(b,S,T){R(b);const X=l(T),re=q(b,S,X,-1,r);return ae(N,re,k.get(b))}}(),e.changes=function(){const N="sqlite3_changes",q=t.cwrap(N,...ve("n:n"));return function(b){return y(b),q(b)}}(),e.close=function(){const N="sqlite3_close",q=t.cwrap(N,...ve("n:n"),{async:Ws});return async function(b){y(b);const S=await q(b);return x.delete(b),ae(N,S,b)}}(),e.column=function(N,q){R(N);const b=e.column_type(N,q);switch(b){case fd:return e.column_blob(N,q);case cd:return e.column_double(N,q);case ud:const S=e.column_int(N,q),T=t.getTempRet0();return _(S,T);case hd:return null;case ld:return e.column_text(N,q);default:throw new On("unknown type",b)}},e.column_blob=function(){const N="sqlite3_column_blob",q=t.cwrap(N,...ve("nn:n"));return function(b,S){R(b);const T=e.column_bytes(b,S),X=q(b,S);return t.HEAPU8.subarray(X,X+T)}}(),e.column_bytes=function(){const N="sqlite3_column_bytes",q=t.cwrap(N,...ve("nn:n"));return function(b,S){return R(b),q(b,S)}}(),e.column_count=function(){const N="sqlite3_column_count",q=t.cwrap(N,...ve("n:n"));return function(b){return R(b),q(b)}}(),e.column_double=function(){const N="sqlite3_column_double",q=t.cwrap(N,...ve("nn:n"));return function(b,S){return R(b),q(b,S)}}(),e.column_int=function(){const N="sqlite3_column_int64",q=t.cwrap(N,...ve("nn:n"));return function(b,S){return R(b),q(b,S)}}(),e.column_int64=function(){const N="sqlite3_column_int64",q=t.cwrap(N,...ve("nn:n"));return function(b,S){R(b);const T=q(b,S),X=t.getTempRet0();return m(T,X)}}(),e.column_name=function(){const N="sqlite3_column_name",q=t.cwrap(N,...ve("nn:s"));return function(b,S){return R(b),q(b,S)}}(),e.column_names=function(N){const q=[],b=e.column_count(N);for(let S=0;S<b;++S)q.push(e.column_name(N,S));return q},e.column_text=function(){const N="sqlite3_column_text",q=t.cwrap(N,...ve("nn:s"));return function(b,S){return R(b),q(b,S)}}(),e.column_type=function(){const N="sqlite3_column_type",q=t.cwrap(N,...ve("nn:n"));return function(b,S){return R(b),q(b,S)}}(),e.create_function=function(N,q,b,S,T,X,re,ce){if(y(N),X&&!re&&!ce){const Le=t.createFunction(N,q,b,S,T,X);return ae("sqlite3_create_function",Le,N)}if(!X&&re&&ce){const Le=t.createAggregate(N,q,b,S,T,re,ce);return ae("sqlite3_create_function",Le,N)}throw new On("invalid function combination",Bi)},e.create_module=function(N,q,b,S){y(N);const T=t.createModule(N,q,b,S);return ae("sqlite3_create_module",T,N)},e.data_count=function(){const N="sqlite3_data_count",q=t.cwrap(N,...ve("n:n"));return function(b){return R(b),q(b)}}(),e.declare_vtab=function(){const N="sqlite3_declare_vtab",q=t.cwrap(N,...ve("ns:n"));return function(b,S){const T=q(b,S);return ae("sqlite3_declare_vtab",T)}}(),e.exec=async function(N,q,b){for await(const S of e.statements(N,q)){let T;for(;await e.step(S)===wf;)if(b){T=T??e.column_names(S);const X=e.row(S);await b(X,T)}}return Je},e.finalize=function(){const N="sqlite3_finalize",q=t.cwrap(N,...ve("n:n"),{async:Ws});return async function(b){if(!k.has(b))return Bi;const S=await q(b);return k.get(b),k.delete(b),S}}(),e.get_autocommit=function(){const N="sqlite3_get_autocommit",q=t.cwrap(N,...ve("n:n"));return function(b){return q(b)}}(),e.libversion=function(){const N="sqlite3_libversion",q=t.cwrap(N,...ve(":s"));return function(){return q()}}(),e.libversion_number=function(){const N="sqlite3_libversion_number",q=t.cwrap(N,...ve(":n"));return function(){return q()}}(),e.limit=function(){const N="sqlite3_limit",q=t.cwrap(N,...ve("nnn:n"));return function(b,S,T){return q(b,S,T)}}(),e.open_v2=function(){const N="sqlite3_open_v2",q=t.cwrap(N,...ve("snnn:n"),{async:Ws});return async function(b,S,T){S=S||Sm|RN,T=l(T);const X=await q(b,a[0],S,T),re=t.getValue(a[0],"*");return x.add(re),t._sqlite3_free(T),t.ccall("RegisterExtensionFunctions","void",["number"],[re]),ae(N,X),re}}(),e.prepare_v2=function(){const N="sqlite3_prepare_v2",q=t.cwrap(N,...ve("nnnnn:n"),{async:Ws});return async function(b,S){const T=await q(b,S,-1,a[0],a[1]);ae(N,T,b);const X=t.getValue(a[0],"*");return X?(k.set(X,b),{stmt:X,sql:t.getValue(a[1],"*")}):null}}(),e.progress_handler=function(N,q,b,S){y(N),t.progressHandler(N,q,b,S)},e.reset=function(){const N="sqlite3_reset",q=t.cwrap(N,...ve("n:n"),{async:Ws});return async function(b){R(b);const S=await q(b);return ae(N,S,k.get(b))}}(),e.result=function(N,q){switch(typeof q){case"number":q===(q|0)?e.result_int(N,q):e.result_double(N,q);break;case"string":e.result_text(N,q);break;default:if(q instanceof Uint8Array||Array.isArray(q))e.result_blob(N,q);else if(q===null)e.result_null(N);else{if(typeof q=="bigint")return e.result_int64(N,q);console.warn("unknown result converted to null",q),e.result_null(N)}break}},e.result_blob=function(){const N="sqlite3_result_blob",q=t.cwrap(N,...ve("nnnn:n"));return function(b,S){const T=S.byteLength??S.length,X=t._sqlite3_malloc(T);t.HEAPU8.subarray(X).set(S),q(b,X,T,r)}}(),e.result_double=function(){const N="sqlite3_result_double",q=t.cwrap(N,...ve("nn:n"));return function(b,S){q(b,S)}}(),e.result_int=function(){const N="sqlite3_result_int",q=t.cwrap(N,...ve("nn:n"));return function(b,S){q(b,S)}}(),e.result_int64=function(){const N="sqlite3_result_int64",q=t.cwrap(N,...ve("nnn:n"));return function(b,S){if(S>dd||S<pd)return Rl;const T=S&0xffffffffn,X=S>>32n;q(b,Number(T),Number(X))}}(),e.result_null=function(){const N="sqlite3_result_null",q=t.cwrap(N,...ve("n:n"));return function(b){q(b)}}(),e.result_text=function(){const N="sqlite3_result_text",q=t.cwrap(N,...ve("nnnn:n"));return function(b,S){const T=l(S);q(b,T,-1,r)}}(),e.row=function(N){const q=[],b=e.data_count(N);for(let S=0;S<b;++S){const T=e.column(N,S);q.push(T?.buffer===t.HEAPU8.buffer?T.slice():T)}return q},e.set_authorizer=function(N,q,b){y(N);const S=t.setAuthorizer(N,q,b);return ae("sqlite3_set_authorizer",S,N)},e.sql=function(){const N="sqlite3_sql",q=t.cwrap(N,...ve("n:s"));return function(b){return R(b),q(b)}}(),e.statements=function(N,q){return async function*(){const b=e.str_new(N,q);let S={stmt:null,sql:e.str_value(b)};try{for(;S=await e.prepare_v2(N,S.sql);)yield S.stmt,e.finalize(S.stmt),S.stmt=null}finally{S?.stmt&&e.finalize(S.stmt),e.str_finish(b)}}()},e.step=function(){const N="sqlite3_step",q=t.cwrap(N,...ve("n:n"),{async:Ws});return async function(b){R(b);const S=await q(b);return ae(N,S,k.get(b),[wf,AN])}}();let G=0;const H=new Map;e.str_new=function(N,q=""){const b=t.lengthBytesUTF8(q),S=G++&4294967295,T={offset:t._sqlite3_malloc(b+1),bytes:b};return H.set(S,T),t.stringToUTF8(q,T.offset,T.bytes+1),S},e.str_appendall=function(N,q){if(!H.has(N))throw new On("not a string",Bi);const b=H.get(N),S=t.lengthBytesUTF8(q),T=b.bytes+S,X=t._sqlite3_malloc(T+1);t.HEAPU8.subarray(X,X+T+1).set(t.HEAPU8.subarray(b.offset,b.offset+b.bytes)),t.stringToUTF8(q,X+b.bytes,S+1),t._sqlite3_free(b.offset),b.offset=X,b.bytes=T,H.set(N,b)},e.str_finish=function(N){if(!H.has(N))throw new On("not a string",Bi);const q=H.get(N);H.delete(N),t._sqlite3_free(q.offset)},e.str_value=function(N){if(!H.has(N))throw new On("not a string",Bi);return H.get(N).offset},e.user_data=function(N){return t.getFunctionUserData(N)},e.value=function(N){const q=e.value_type(N);switch(q){case fd:return e.value_blob(N);case cd:return e.value_double(N);case ud:const b=e.value_int(N),S=t.getTempRet0();return _(b,S);case hd:return null;case ld:return e.value_text(N);default:throw new On("unknown type",q)}},e.value_blob=function(){const N="sqlite3_value_blob",q=t.cwrap(N,...ve("n:n"));return function(b){const S=e.value_bytes(b),T=q(b);return t.HEAPU8.subarray(T,T+S)}}(),e.value_bytes=function(){const N="sqlite3_value_bytes",q=t.cwrap(N,...ve("n:n"));return function(b){return q(b)}}(),e.value_double=function(){const N="sqlite3_value_double",q=t.cwrap(N,...ve("n:n"));return function(b){return q(b)}}(),e.value_int=function(){const N="sqlite3_value_int64",q=t.cwrap(N,...ve("n:n"));return function(b){return q(b)}}(),e.value_int64=function(){const N="sqlite3_value_int64",q=t.cwrap(N,...ve("n:n"));return function(b){const S=q(b),T=t.getTempRet0();return m(S,T)}}(),e.value_text=function(){const N="sqlite3_value_text",q=t.cwrap(N,...ve("n:s"));return function(b){return q(b)}}(),e.value_type=function(){const N="sqlite3_value_type",q=t.cwrap(N,...ve("n:n"));return function(b){return q(b)}}(),e.vfs_register=function(N,q){const b=t.registerVFS(N,q);return ae("sqlite3_vfs_register",b)};function ae(N,q,b=null,S=[Je]){if(S.includes(q))return q;const T=b?t.ccall("sqlite3_errmsg","string",["number"],[b]):N;throw new On(T,q)}return e}function ve(t){const e=[],r=t.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const n=[];for(let a of r[1])switch(a){case"n":n.push("number");break;case"s":n.push("string");break}return e.push(n),e}async function $N(t,e){const{path:r,sqliteModule:n,vfs:a}=await t,l=UN(n);l.vfs_register(a,!0);const m=await l.open_v2(r,e?Im:void 0);return{path:r,vfs:a,db:m,sqlite:l,async close(){await l.close(m)},changes(){return l.changes(m)},async lastInsertRowId(){return await new Promise(_=>l.exec(m,"SELECT last_insert_rowid()",([x])=>_(x)))},async run(_,x){const y=l.str_new(m,_);try{const k=await l.prepare_v2(m,l.str_value(y));if(!k)return[];const R=k.stmt;try{x?.length&&l.bind_collection(R,x);const G=[],H=l.column_names(R);for(;await l.step(R)===wf;){const ae=l.row(R);G.push(Object.fromEntries(H.map((N,q)=>[N,ae[q]])))}return G}finally{await l.finalize(R)}}finally{l.str_finish(y)}}}}var QN=class{constructor(){ye(this,"mxPathName",64)}xClose(t){return wt}xRead(t,e,r){return wt}xWrite(t,e,r){return wt}xTruncate(t,e){return wt}xSync(t,e){return Je}xFileSize(t,e){return wt}xLock(t,e){return Je}xUnlock(t,e){return Je}xCheckReservedLock(t,e){return e.setInt32(0,0,!0),Je}xFileControl(t,e,r){return qm}xSectorSize(t){return 512}xDeviceCharacteristics(t){return 0}xOpen(t,e,r,n){return Cm}xDelete(t,e){return wt}xAccess(t,e,r){return wt}handleAsync(t){return t()}},jN=(()=>{var t=import.meta.url;return function(e={}){var r=e,n,a;r.ready=new Promise((s,u)=>{n=s,a=u});var l=Object.assign({},r),m="./this.program",_=(s,u)=>{throw u},x=typeof window=="object",y=typeof importScripts=="function",k="",R;(x||y)&&(y?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),t&&(k=t),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",y&&(R=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var G=r.print||console.log.bind(console),H=r.printErr||console.error.bind(console);Object.assign(r,l),l=null,r.thisProgram&&(m=r.thisProgram),r.quit&&(_=r.quit);var ae;r.wasmBinary&&(ae=r.wasmBinary),typeof WebAssembly!="object"&&Ie("no native wasm support detected");var N,q=!1,b,S,T,X,re,ce,Le,ft;function Tr(){var s=N.buffer;r.HEAP8=S=new Int8Array(s),r.HEAP16=X=new Int16Array(s),r.HEAPU8=T=new Uint8Array(s),r.HEAPU16=new Uint16Array(s),r.HEAP32=re=new Int32Array(s),r.HEAPU32=ce=new Uint32Array(s),r.HEAPF32=Le=new Float32Array(s),r.HEAPF64=ft=new Float64Array(s)}var Me=[],Re=[],Er=[],de=[];function je(){var s=r.preRun.shift();Me.unshift(s)}var nr=0,it=null;function Ie(s){throw r.onAbort&&r.onAbort(s),s="Aborted("+s+")",H(s),q=!0,b=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),a(s),s}var Ue=s=>s.startsWith("data:application/octet-stream;base64,"),Tt;if(r.locateFile){if(Tt="wa-sqlite-async.wasm",!Ue(Tt)){var Hr=Tt;Tt=r.locateFile?r.locateFile(Hr,k):k+Hr}}else Tt=new URL(""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,import.meta.url).href;function Or(s){if(s==Tt&&ae)return new Uint8Array(ae);if(R)return R(s);throw"both async and sync fetching of the wasm failed"}function Nt(s){return ae||!x&&!y||typeof fetch!="function"?Promise.resolve().then(()=>Or(s)):fetch(s,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+s+"'";return u.arrayBuffer()}).catch(()=>Or(s))}function Ar(s,u,d){return Nt(s).then(f=>WebAssembly.instantiate(f,u)).then(f=>f).then(d,f=>{H(`failed to asynchronously prepare wasm: ${f}`),Ie(f)})}function mr(s,u){var d=Tt;return ae||typeof WebAssembly.instantiateStreaming!="function"||Ue(d)||typeof fetch!="function"?Ar(d,s,u):fetch(d,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,s).then(u,function(w){return H(`wasm streaming compile failed: ${w}`),H("falling back to ArrayBuffer instantiation"),Ar(d,s,u)}))}var he,Ce;function ir(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}var Kr=s=>{for(;0<s.length;)s.shift()(r)};function Ge(s,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return S[s>>0];case"i8":return S[s>>0];case"i16":return X[s>>1];case"i32":return re[s>>2];case"i64":Ie("to do getValue(i64) use WASM_BIGINT");case"float":return Le[s>>2];case"double":return ft[s>>3];case"*":return ce[s>>2];default:Ie(`invalid type for getValue: ${u}`)}}var Mn=r.noExitRuntime||!0;function Pt(s,u,d="i8"){switch(d.endsWith("*")&&(d="*"),d){case"i1":S[s>>0]=u;break;case"i8":S[s>>0]=u;break;case"i16":X[s>>1]=u;break;case"i32":re[s>>2]=u;break;case"i64":Ie("to do setValue(i64) use WASM_BIGINT");case"float":Le[s>>2]=u;break;case"double":ft[s>>3]=u;break;case"*":ce[s>>2]=u;break;default:Ie(`invalid type for setValue: ${d}`)}}var O=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,v=(s,u,d)=>{var f=u+d;for(d=u;s[d]&&!(d>=f);)++d;if(16<d-u&&s.buffer&&O)return O.decode(s.subarray(u,d));for(f="";u<d;){var w=s[u++];if(w&128){var C=s[u++]&63;if((w&224)==192)f+=String.fromCharCode((w&31)<<6|C);else{var I=s[u++]&63;w=(w&240)==224?(w&15)<<12|C<<6|I:(w&7)<<18|C<<12|I<<6|s[u++]&63,65536>w?f+=String.fromCharCode(w):(w-=65536,f+=String.fromCharCode(55296|w>>10,56320|w&1023))}}else f+=String.fromCharCode(w)}return f},W=(s,u)=>{for(var d=0,f=s.length-1;0<=f;f--){var w=s[f];w==="."?s.splice(f,1):w===".."?(s.splice(f,1),d++):d&&(s.splice(f,1),d--)}if(u)for(;d;d--)s.unshift("..");return s},$=s=>{var u=s.charAt(0)==="/",d=s.substr(-1)==="/";return(s=W(s.split("/").filter(f=>!!f),!u).join("/"))||u||(s="."),s&&d&&(s+="/"),(u?"/":"")+s},j=s=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=u[0],u=u[1],!s&&!u?".":(u&&(u=u.substr(0,u.length-1)),s+u)},Y=s=>{if(s==="/")return"/";s=$(s),s=s.replace(/\/$/,"");var u=s.lastIndexOf("/");return u===-1?s:s.substr(u+1)},ie=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return s=>crypto.getRandomValues(s);Ie("initRandomDevice")},V=s=>(V=ie())(s);function te(){for(var s="",u=!1,d=arguments.length-1;-1<=d&&!u;d--){if(u=0<=d?arguments[d]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";s=u+"/"+s,u=u.charAt(0)==="/"}return s=W(s.split("/").filter(f=>!!f),!u).join("/"),(u?"/":"")+s||"."}var z=[],se=s=>{for(var u=0,d=0;d<s.length;++d){var f=s.charCodeAt(d);127>=f?u++:2047>=f?u+=2:55296<=f&&57343>=f?(u+=4,++d):u+=3}return u},oe=(s,u,d,f)=>{if(!(0<f))return 0;var w=d;f=d+f-1;for(var C=0;C<s.length;++C){var I=s.charCodeAt(C);if(55296<=I&&57343>=I){var P=s.charCodeAt(++C);I=65536+((I&1023)<<10)|P&1023}if(127>=I){if(d>=f)break;u[d++]=I}else{if(2047>=I){if(d+1>=f)break;u[d++]=192|I>>6}else{if(65535>=I){if(d+2>=f)break;u[d++]=224|I>>12}else{if(d+3>=f)break;u[d++]=240|I>>18,u[d++]=128|I>>12&63}u[d++]=128|I>>6&63}u[d++]=128|I&63}}return u[d]=0,d-w},ue=[];function me(s,u){ue[s]={input:[],Rb:[],bc:u},bs(s,Oe)}var Oe={open(s){var u=ue[s.node.ec];if(!u)throw new B(43);s.Sb=u,s.seekable=!1},close(s){s.Sb.bc.ic(s.Sb)},ic(s){s.Sb.bc.ic(s.Sb)},read(s,u,d,f){if(!s.Sb||!s.Sb.bc.xc)throw new B(60);for(var w=0,C=0;C<f;C++){try{var I=s.Sb.bc.xc(s.Sb)}catch{throw new B(29)}if(I===void 0&&w===0)throw new B(6);if(I==null)break;w++,u[d+C]=I}return w&&(s.node.timestamp=Date.now()),w},write(s,u,d,f){if(!s.Sb||!s.Sb.bc.rc)throw new B(60);try{for(var w=0;w<f;w++)s.Sb.bc.rc(s.Sb,u[d+w])}catch{throw new B(29)}return f&&(s.node.timestamp=Date.now()),w}},Be={xc(){e:{if(!z.length){var s=null;if(typeof window<"u"&&typeof window.prompt=="function"?(s=window.prompt("Input: "),s!==null&&(s+=`
`)):typeof readline=="function"&&(s=readline(),s!==null&&(s+=`
`)),!s){var u=null;break e}u=Array(se(s)+1),s=oe(s,u,0,u.length),u.length=s,z=u}u=z.shift()}return u},rc(s,u){u===null||u===10?(G(v(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic(s){s.Rb&&0<s.Rb.length&&(G(v(s.Rb,0)),s.Rb=[])},Yc(){return{Uc:25856,Wc:5,Tc:191,Vc:35387,Sc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Zc(){return 0},$c(){return[24,80]}},De={rc(s,u){u===null||u===10?(H(v(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic(s){s.Rb&&0<s.Rb.length&&(H(v(s.Rb,0)),s.Rb=[])}};function Ve(s,u){var d=s.Nb?s.Nb.length:0;d>=u||(u=Math.max(u,d*(1048576>d?2:1.125)>>>0),d!=0&&(u=Math.max(u,256)),d=s.Nb,s.Nb=new Uint8Array(u),0<s.Pb&&s.Nb.set(d.subarray(0,s.Pb),0))}var le={Vb:null,Ub(){return le.createNode(null,"/",16895,0)},createNode(s,u,d,f){if((d&61440)===24576||(d&61440)===4096)throw new B(63);return le.Vb||(le.Vb={dir:{node:{Tb:le.Cb.Tb,Qb:le.Cb.Qb,cc:le.Cb.cc,jc:le.Cb.jc,Bc:le.Cb.Bc,oc:le.Cb.oc,mc:le.Cb.mc,Ac:le.Cb.Ac,nc:le.Cb.nc},stream:{Zb:le.Mb.Zb}},file:{node:{Tb:le.Cb.Tb,Qb:le.Cb.Qb},stream:{Zb:le.Mb.Zb,read:le.Mb.read,write:le.Mb.write,uc:le.Mb.uc,kc:le.Mb.kc,lc:le.Mb.lc}},link:{node:{Tb:le.Cb.Tb,Qb:le.Cb.Qb,fc:le.Cb.fc},stream:{}},vc:{node:{Tb:le.Cb.Tb,Qb:le.Cb.Qb},stream:sr}}),d=Wo(s,u,d,f),K(d.mode)?(d.Cb=le.Vb.dir.node,d.Mb=le.Vb.dir.stream,d.Nb={}):(d.mode&61440)===32768?(d.Cb=le.Vb.file.node,d.Mb=le.Vb.file.stream,d.Pb=0,d.Nb=null):(d.mode&61440)===40960?(d.Cb=le.Vb.link.node,d.Mb=le.Vb.link.stream):(d.mode&61440)===8192&&(d.Cb=le.Vb.vc.node,d.Mb=le.Vb.vc.stream),d.timestamp=Date.now(),s&&(s.Nb[u]=d,s.timestamp=d.timestamp),d},Xc(s){return s.Nb?s.Nb.subarray?s.Nb.subarray(0,s.Pb):new Uint8Array(s.Nb):new Uint8Array(0)},Cb:{Tb(s){var u={};return u.Hc=(s.mode&61440)===8192?s.id:1,u.yc=s.id,u.mode=s.mode,u.Nc=1,u.uid=0,u.Kc=0,u.ec=s.ec,K(s.mode)?u.size=4096:(s.mode&61440)===32768?u.size=s.Pb:(s.mode&61440)===40960?u.size=s.link.length:u.size=0,u.Dc=new Date(s.timestamp),u.Mc=new Date(s.timestamp),u.Gc=new Date(s.timestamp),u.Ec=4096,u.Fc=Math.ceil(u.size/u.Ec),u},Qb(s,u){if(u.mode!==void 0&&(s.mode=u.mode),u.timestamp!==void 0&&(s.timestamp=u.timestamp),u.size!==void 0&&(u=u.size,s.Pb!=u))if(u==0)s.Nb=null,s.Pb=0;else{var d=s.Nb;s.Nb=new Uint8Array(u),d&&s.Nb.set(d.subarray(0,Math.min(u,s.Pb))),s.Pb=u}},cc(){throw ys[44]},jc(s,u,d,f){return le.createNode(s,u,d,f)},Bc(s,u,d){if(K(s.mode)){try{var f=Vt(u,d)}catch{}if(f)for(var w in f.Nb)throw new B(55)}delete s.parent.Nb[s.name],s.parent.timestamp=Date.now(),s.name=d,u.Nb[d]=s,u.timestamp=s.parent.timestamp,s.parent=u},oc(s,u){delete s.Nb[u],s.timestamp=Date.now()},mc(s,u){var d=Vt(s,u),f;for(f in d.Nb)throw new B(55);delete s.Nb[u],s.timestamp=Date.now()},Ac(s){var u=[".",".."],d;for(d in s.Nb)s.Nb.hasOwnProperty(d)&&u.push(d);return u},nc(s,u,d){return s=le.createNode(s,u,41471,0),s.link=d,s},fc(s){if((s.mode&61440)!==40960)throw new B(28);return s.link}},Mb:{read(s,u,d,f,w){var C=s.node.Nb;if(w>=s.node.Pb)return 0;if(s=Math.min(s.node.Pb-w,f),8<s&&C.subarray)u.set(C.subarray(w,w+s),d);else for(f=0;f<s;f++)u[d+f]=C[w+f];return s},write(s,u,d,f,w,C){if(u.buffer===S.buffer&&(C=!1),!f)return 0;if(s=s.node,s.timestamp=Date.now(),u.subarray&&(!s.Nb||s.Nb.subarray)){if(C)return s.Nb=u.subarray(d,d+f),s.Pb=f;if(s.Pb===0&&w===0)return s.Nb=u.slice(d,d+f),s.Pb=f;if(w+f<=s.Pb)return s.Nb.set(u.subarray(d,d+f),w),f}if(Ve(s,w+f),s.Nb.subarray&&u.subarray)s.Nb.set(u.subarray(d,d+f),w);else for(C=0;C<f;C++)s.Nb[w+C]=u[d+C];return s.Pb=Math.max(s.Pb,w+f),f},Zb(s,u,d){if(d===1?u+=s.position:d===2&&(s.node.mode&61440)===32768&&(u+=s.node.Pb),0>u)throw new B(28);return u},uc(s,u,d){Ve(s.node,u+d),s.node.Pb=Math.max(s.node.Pb,u+d)},kc(s,u,d,f,w){if((s.node.mode&61440)!==32768)throw new B(43);if(s=s.node.Nb,w&2||s.buffer!==S.buffer){if((0<d||d+u<s.length)&&(s.subarray?s=s.subarray(d,d+u):s=Array.prototype.slice.call(s,d,d+u)),d=!0,u=65536*Math.ceil(u/65536),(w=bu(65536,u))?(T.fill(0,w,w+u),u=w):u=0,!u)throw new B(48);S.set(s,u)}else d=!1,u=s.byteOffset;return{Oc:u,Cc:d}},lc(s,u,d,f){return le.Mb.write(s,u,0,f,d,!1),0}}},kr=(s,u)=>{var d=0;return s&&(d|=365),u&&(d|=146),d},wn=null,Wr={},Jr=[],Lt=1,dt=null,Bn=!0,B=null,ys={};function At(s,u={}){if(s=te(s),!s)return{path:"",node:null};if(u=Object.assign({wc:!0,sc:0},u),8<u.sc)throw new B(32);s=s.split("/").filter(I=>!!I);for(var d=wn,f="/",w=0;w<s.length;w++){var C=w===s.length-1;if(C&&u.parent)break;if(d=Vt(d,s[w]),f=$(f+"/"+s[w]),d.$b&&(!C||C&&u.wc)&&(d=d.$b.root),!C||u.Yb){for(C=0;(d.mode&61440)===40960;)if(d=su(f),f=te(j(f),d),d=At(f,{sc:u.sc+1}).node,40<C++)throw new B(32)}}return{path:f,node:d}}function xi(s){for(var u;;){if(s===s.parent)return s=s.Ub.zc,u?s[s.length-1]!=="/"?`${s}/${u}`:s+u:s;u=u?`${s.name}/${u}`:s.name,s=s.parent}}function gn(s,u){for(var d=0,f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f)|0;return(s+d>>>0)%dt.length}function nu(s){var u=gn(s.parent.id,s.name);if(dt[u]===s)dt[u]=s.ac;else for(u=dt[u];u;){if(u.ac===s){u.ac=s.ac;break}u=u.ac}}function Vt(s,u){var d;if(d=(d=pt(s,"x"))?d:s.Cb.cc?0:2)throw new B(d,s);for(d=dt[gn(s.id,u)];d;d=d.ac){var f=d.name;if(d.parent.id===s.id&&f===u)return d}return s.Cb.cc(s,u)}function Wo(s,u,d,f){return s=new Go(s,u,d,f),u=gn(s.parent.id,s.name),s.ac=dt[u],dt[u]=s}function K(s){return(s&61440)===16384}function ws(s){var u=["r","w","rw"][s&3];return s&512&&(u+="w"),u}function pt(s,u){if(Bn)return 0;if(!u.includes("r")||s.mode&292){if(u.includes("w")&&!(s.mode&146)||u.includes("x")&&!(s.mode&73))return 2}else return 2;return 0}function Fn(s,u){try{return Vt(s,u),20}catch{}return pt(s,"wx")}function gs(s,u,d){try{var f=Vt(s,u)}catch(w){return w.Ob}if(s=pt(s,"wx"))return s;if(d){if(!K(f.mode))return 54;if(f===f.parent||xi(f)==="/")return 10}else if(K(f.mode))return 31;return 0}function iu(){for(var s=0;4096>=s;s++)if(!Jr[s])return s;throw new B(33)}function ut(s){if(s=Jr[s],!s)throw new B(8);return s}function Ro(s,u=-1){return Gr||(Gr=function(){this.hc={}},Gr.prototype={},Object.defineProperties(Gr.prototype,{object:{get(){return this.node},set(d){this.node=d}},flags:{get(){return this.hc.flags},set(d){this.hc.flags=d}},position:{get(){return this.hc.position},set(d){this.hc.position=d}}})),s=Object.assign(new Gr,s),u==-1&&(u=iu()),s.Wb=u,Jr[u]=s}var sr={open(s){s.Mb=Wr[s.node.ec].Mb,s.Mb.open&&s.Mb.open(s)},Zb(){throw new B(70)}};function bs(s,u){Wr[s]={Mb:u}}function bn(s,u){var d=u==="/",f=!u;if(d&&wn)throw new B(10);if(!d&&!f){var w=At(u,{wc:!1});if(u=w.path,w=w.node,w.$b)throw new B(10);if(!K(w.mode))throw new B(54)}u={type:s,bd:{},zc:u,Lc:[]},s=s.Ub(u),s.Ub=u,u.root=s,d?wn=s:w&&(w.$b=u,w.Ub&&w.Ub.Lc.push(u))}function Ns(s,u,d){var f=At(s,{parent:!0}).node;if(s=Y(s),!s||s==="."||s==="..")throw new B(28);var w=Fn(f,s);if(w)throw new B(w);if(!f.Cb.jc)throw new B(63);return f.Cb.jc(f,s,u,d)}function yr(s,u){return Ns(s,(u!==void 0?u:511)&1023|16384,0)}function vs(s,u,d){typeof d>"u"&&(d=u,u=438),Ns(s,u|8192,d)}function qt(s,u){if(!te(s))throw new B(44);var d=At(u,{parent:!0}).node;if(!d)throw new B(44);u=Y(u);var f=Fn(d,u);if(f)throw new B(f);if(!d.Cb.nc)throw new B(63);d.Cb.nc(d,u,s)}function Do(s){var u=At(s,{parent:!0}).node;s=Y(s);var d=Vt(u,s),f=gs(u,s,!0);if(f)throw new B(f);if(!u.Cb.mc)throw new B(63);if(d.$b)throw new B(10);u.Cb.mc(u,s),nu(d)}function su(s){if(s=At(s).node,!s)throw new B(44);if(!s.Cb.fc)throw new B(28);return te(xi(s.parent),s.Cb.fc(s))}function Un(s,u){if(s=At(s,{Yb:!u}).node,!s)throw new B(44);if(!s.Cb.Tb)throw new B(63);return s.Cb.Tb(s)}function Po(s){return Un(s,!0)}function Ei(s,u){if(s=typeof s=="string"?At(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new B(63);s.Cb.Qb(s,{mode:u&4095|s.mode&-4096,timestamp:Date.now()})}function wr(s,u){if(0>u)throw new B(28);if(s=typeof s=="string"?At(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new B(63);if(K(s.mode))throw new B(31);if((s.mode&61440)!==32768)throw new B(28);var d=pt(s,"w");if(d)throw new B(d);s.Cb.Qb(s,{size:u,timestamp:Date.now()})}function Nn(s,u,d){if(s==="")throw new B(44);if(typeof u=="string"){var f={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof f>"u")throw Error(`Unknown file open mode: ${u}`);u=f}if(d=u&64?(typeof d>"u"?438:d)&4095|32768:0,typeof s=="object")var w=s;else{s=$(s);try{w=At(s,{Yb:!(u&131072)}).node}catch{}}if(f=!1,u&64)if(w){if(u&128)throw new B(20)}else w=Ns(s,d,0),f=!0;if(!w)throw new B(44);if((w.mode&61440)===8192&&(u&=-513),u&65536&&!K(w.mode))throw new B(54);if(!f&&(d=w?(w.mode&61440)===40960?32:K(w.mode)&&(ws(u)!=="r"||u&512)?31:pt(w,ws(u)):44))throw new B(d);return u&512&&!f&&wr(w,0),u&=-131713,w=Ro({node:w,path:xi(w),flags:u,seekable:!0,position:0,Mb:w.Mb,Rc:[],error:!1}),w.Mb.open&&w.Mb.open(w),!r.logReadFiles||u&1||(Oi||(Oi={}),s in Oi||(Oi[s]=1)),w}function _s(s,u,d){if(s.Wb===null)throw new B(8);if(!s.seekable||!s.Mb.Zb)throw new B(70);if(d!=0&&d!=1&&d!=2)throw new B(28);s.position=s.Mb.Zb(s,u,d),s.Rc=[]}function Lo(){B||(B=function(s,u){this.name="ErrnoError",this.node=u,this.Pc=function(d){this.Ob=d},this.Pc(s),this.message="FS error"},B.prototype=Error(),B.prototype.constructor=B,[44].forEach(s=>{ys[s]=new B(s),ys[s].stack="<generic error, no stack>"}))}var Mo;function $n(s,u,d){s=$("/dev/"+s);var f=kr(!!u,!!d);vn||(vn=64);var w=vn++<<8|0;bs(w,{open(C){C.seekable=!1},close(){d&&d.buffer&&d.buffer.length&&d(10)},read(C,I,P,A){for(var L=0,Z=0;Z<A;Z++){try{var F=u()}catch{throw new B(29)}if(F===void 0&&L===0)throw new B(6);if(F==null)break;L++,I[P+Z]=F}return L&&(C.node.timestamp=Date.now()),L},write(C,I,P,A){for(var L=0;L<A;L++)try{d(I[P+L])}catch{throw new B(29)}return A&&(C.node.timestamp=Date.now()),L}}),vs(s,f,w)}var vn,Ye={},Gr,Oi;function or(s,u,d){if(u.charAt(0)==="/")return u;if(s=s===-100?"/":ut(s).path,u.length==0){if(!d)throw new B(44);return s}return $(s+"/"+u)}function Qn(s,u,d){try{var f=s(u)}catch(C){if(C&&C.node&&$(u)!==$(xi(C.node)))return-54;throw C}re[d>>2]=f.Hc,re[d+4>>2]=f.mode,ce[d+8>>2]=f.Nc,re[d+12>>2]=f.uid,re[d+16>>2]=f.Kc,re[d+20>>2]=f.ec,Ce=[f.size>>>0,(he=f.size,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[d+24>>2]=Ce[0],re[d+28>>2]=Ce[1],re[d+32>>2]=4096,re[d+36>>2]=f.Fc,s=f.Dc.getTime(),u=f.Mc.getTime();var w=f.Gc.getTime();return Ce=[Math.floor(s/1e3)>>>0,(he=Math.floor(s/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[d+40>>2]=Ce[0],re[d+44>>2]=Ce[1],ce[d+48>>2]=s%1e3*1e3,Ce=[Math.floor(u/1e3)>>>0,(he=Math.floor(u/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[d+56>>2]=Ce[0],re[d+60>>2]=Ce[1],ce[d+64>>2]=u%1e3*1e3,Ce=[Math.floor(w/1e3)>>>0,(he=Math.floor(w/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[d+72>>2]=Ce[0],re[d+76>>2]=Ce[1],ce[d+80>>2]=w%1e3*1e3,Ce=[f.yc>>>0,(he=f.yc,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[d+88>>2]=Ce[0],re[d+92>>2]=Ce[1],0}var qi=void 0;function Ci(){var s=re[+qi>>2];return qi+=4,s}var jn=(s,u)=>u+2097152>>>0<4194305-!!s?(s>>>0)+4294967296*u:NaN,yl=[0,31,60,91,121,152,182,213,244,274,305,335],ou=[0,31,59,90,120,151,181,212,243,273,304,334],Bo=s=>{var u=se(s)+1,d=Yo(u);return d&&oe(s,T,d,u),d},_n={},Fo=()=>{if(!ze){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},u;for(u in _n)_n[u]===void 0?delete s[u]:s[u]=_n[u];var d=[];for(u in s)d.push(`${u}=${s[u]}`);ze=d}return ze},ze;function Vn(){}function xs(){}function Yr(){}function Ii(){}function Si(){}function Ti(){}function zn(){}function au(){}function uu(){}function Uo(){}function Es(){}function $o(){}function Os(){}function qs(){}function cu(){}function Ai(){}function ki(){}function Xr(){}function Cs(){}function qr(){}function xn(){}function Wi(){}function Qo(){}function lu(){}function fe(){}function jo(){}function Ri(){}function Di(){}function Vo(){}function Hn(){}function Kn(){}function Rr(){}function Pi(){}function zo(){}function i(){}function c(){}function h(){}function g(){}function E(){}var D=0,U=s=>{b=s,Mn||0<D||(r.onExit&&r.onExit(s),q=!0),_(s,new ir(s))},pe=s=>{s instanceof ir||s=="unwind"||_(1,s)},Se=s=>{try{s()}catch(u){Ie(u)}};function Ee(){var s=ne,u={},d;for(d in s)(function(f){var w=s[f];u[f]=typeof w=="function"?function(){Is.push(f);try{return w.apply(null,arguments)}finally{q||(Is.pop()===f||Ie(),Ke&&He===1&&Is.length===0&&(He=0,Se(xu),typeof Fibers<"u"&&Fibers.cd()))}}:w})(d);return u}var He=0,Ke=null,Ho=0,Is=[],Ko={},fu={},hu=0,Jo=null,wl=[];function gl(){return new Promise((s,u)=>{Jo={resolve:s,reject:u}})}function bl(){var s=Yo(16396),u=s+12;ce[s>>2]=u,ce[s+4>>2]=u+16384,u=Is[0];var d=Ko[u];return d===void 0&&(d=hu++,Ko[u]=d,fu[d]=u),re[s+8>>2]=d,s}function du(s){if(!q){if(He===0){var u=!1,d=!1;s((f=0)=>{if(!q&&(Ho=f,u=!0,d)){He=2,Se(()=>Eu(Ke)),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.resume(),f=!1;try{var w=(0,ne[fu[re[Ke+8>>2]]])()}catch(P){w=P,f=!0}var C=!1;if(!Ke){var I=Jo;I&&(Jo=null,(f?I.reject:I.resolve)(w),C=!0)}if(f&&!C)throw w}}),d=!0,u||(He=1,Ke=bl(),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.pause(),Se(()=>_u(Ke)))}else He===2?(He=0,Se(ea),wu(Ke),Ke=null,wl.forEach(f=>{if(!q)try{if(f(),!(Mn||0<D))try{b=f=b,U(f)}catch(w){pe(w)}}catch(w){pe(w)}})):Ie(`invalid state: ${He}`);return Ho}}function pu(s){return du(u=>{s().then(u)})}var mu={},Cr=(s,u,d,f,w)=>{function C(F){return--D,A!==0&&vu(A),u==="string"?F?v(T,F):"":u==="boolean"?!!F:F}var I={string:F=>{var ee=0;if(F!=null&&F!==0){ee=se(F)+1;var Ne=Zo(ee);oe(F,T,Ne,ee),ee=Ne}return ee},array:F=>{var ee=Zo(F.length);return S.set(F,ee),ee}};s=r["_"+s];var P=[],A=0;if(f)for(var L=0;L<f.length;L++){var Z=I[d[L]];Z?(A===0&&(A=Nu()),P[L]=Z(f[L])):P[L]=f[L]}return d=Ke,f=s.apply(null,P),w=w&&w.async,D+=1,Ke!=d?gl().then(C):(f=C(f),w?Promise.resolve(f):f)};function Go(s,u,d,f){s||(s=this),this.parent=s,this.Ub=s.Ub,this.$b=null,this.id=Lt++,this.name=u,this.mode=d,this.Cb={},this.Mb={},this.ec=f}Object.defineProperties(Go.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(s){s?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(s){s?this.mode|=146:this.mode&=-147}}}),Lo(),dt=Array(4096),bn(le,"/"),yr("/tmp"),yr("/home"),yr("/home/web_user"),function(){yr("/dev"),bs(259,{read:()=>0,write:(f,w,C,I)=>I}),vs("/dev/null",259),me(1280,Be),me(1536,De),vs("/dev/tty",1280),vs("/dev/tty1",1536);var s=new Uint8Array(1024),u=0,d=()=>(u===0&&(u=V(s).byteLength),s[--u]);$n("random",d),$n("urandom",d),yr("/dev/shm"),yr("/dev/shm/tmp")}(),function(){yr("/proc");var s=yr("/proc/self");yr("/proc/self/fd"),bn({Ub(){var u=Wo(s,"fd",16895,73);return u.Cb={cc(d,f){var w=ut(+f);return d={parent:null,Ub:{zc:"fake"},Cb:{fc:()=>w.path}},d.parent=d}},u}},"/proc/self/fd")}(),function(){const s=new Map;r.setAuthorizer=function(u,d,f){return d?s.set(u,{f:d,tc:f}):s.delete(u),Cr("set_authorizer","number",["number"],[u])},Vn=function(u,d,f,w,C,I){if(s.has(u)){const{f:P,tc:A}=s.get(u);return P(A,d,f?f?v(T,f):"":null,w?w?v(T,w):"":null,C?C?v(T,C):"":null,I?I?v(T,I):"":null)}return 0}}(),function(){const s=new Map,u=new Map;r.createFunction=function(d,f,w,C,I,P){const A=s.size;return s.set(A,{f:P,Xb:I}),Cr("create_function","number","number string number number number number".split(" "),[d,f,w,C,A,0])},r.createAggregate=function(d,f,w,C,I,P,A){const L=s.size;return s.set(L,{step:P,Ic:A,Xb:I}),Cr("create_function","number","number string number number number number".split(" "),[d,f,w,C,L,1])},r.getFunctionUserData=function(d){return u.get(d)},Yr=function(d,f,w,C){d=s.get(d),u.set(f,d.Xb),d.f(f,new Uint32Array(T.buffer,C,w)),u.delete(f)},Si=function(d,f,w,C){d=s.get(d),u.set(f,d.Xb),d.step(f,new Uint32Array(T.buffer,C,w)),u.delete(f)},xs=function(d,f){d=s.get(d),u.set(f,d.Xb),d.Ic(f),u.delete(f)}}(),function(){const s=new Map;r.progressHandler=function(u,d,f,w){return f?s.set(u,{f,tc:w}):s.delete(u),Cr("progress_handler",null,["number","number"],[u,d])},Ii=function(u){if(s.has(u)){const{f:d,tc:f}=s.get(u);return d(f)}return 0}}(),function(){function s(A,L){const Z=`get${A}`,F=`set${A}`;return new Proxy(new DataView(T.buffer,L,A==="Int32"?4:8),{get(ee,Ne){if(Ne===Z)return function(Ae,vt){if(!vt)throw Error("must be little endian");return ee[Ne](Ae,vt)};if(Ne===F)return function(Ae,vt,_t){if(!_t)throw Error("must be little endian");return ee[Ne](Ae,vt,_t)};if(typeof Ne=="string"&&Ne.match(/^(get)|(set)/))throw Error("invalid type");return ee[Ne]}})}const u=typeof mu=="object",d=new Map,f=new Map,w=new Map,C=u?new Set:null,I=u?new Set:null,P=new Map;Wi=function(A,L,Z,F){P.set(A?v(T,A):"",{size:L,dc:Array.from(new Uint32Array(T.buffer,F,Z))})},r.createModule=function(A,L,Z,F){u&&(Z.handleAsync=pu);const ee=d.size;return d.set(ee,{module:Z,Xb:F}),F=0,Z.xCreate&&(F|=1),Z.xConnect&&(F|=2),Z.xBestIndex&&(F|=4),Z.xDisconnect&&(F|=8),Z.xDestroy&&(F|=16),Z.xOpen&&(F|=32),Z.xClose&&(F|=64),Z.xFilter&&(F|=128),Z.xNext&&(F|=256),Z.xEof&&(F|=512),Z.xColumn&&(F|=1024),Z.xRowid&&(F|=2048),Z.xUpdate&&(F|=4096),Z.xBegin&&(F|=8192),Z.xSync&&(F|=16384),Z.xCommit&&(F|=32768),Z.xRollback&&(F|=65536),Z.xFindFunction&&(F|=131072),Z.xRename&&(F|=262144),Cr("create_module","number",["number","string","number","number"],[A,L,ee,F])},$o=function(A,L,Z,F,ee,Ne){if(L=d.get(L),f.set(ee,L),u){C.delete(ee);for(const Ae of C)f.delete(Ae)}return F=Array.from(new Uint32Array(T.buffer,F,Z)).map(Ae=>Ae?v(T,Ae):""),L.module.xCreate(A,L.Xb,F,ee,s("Int32",Ne))},Es=function(A,L,Z,F,ee,Ne){if(L=d.get(L),f.set(ee,L),u){C.delete(ee);for(const Ae of C)f.delete(Ae)}return F=Array.from(new Uint32Array(T.buffer,F,Z)).map(Ae=>Ae?v(T,Ae):""),L.module.xConnect(A,L.Xb,F,ee,s("Int32",Ne))},zn=function(A,L){var Z=f.get(A),F=P.get("sqlite3_index_info").dc;const ee={};ee.nConstraint=Ge(L+F[0],"i32"),ee.aConstraint=[];for(var Ne=Ge(L+F[1],"*"),Ae=P.get("sqlite3_index_constraint").size,vt=0;vt<ee.nConstraint;++vt){var _t=ee.aConstraint,ar=_t.push,Mt=Ne+vt*Ae,Ts=P.get("sqlite3_index_constraint").dc,Jn={};Jn.iColumn=Ge(Mt+Ts[0],"i32"),Jn.op=Ge(Mt+Ts[1],"i8"),Jn.usable=!!Ge(Mt+Ts[2],"i8"),ar.call(_t,Jn)}for(ee.nOrderBy=Ge(L+F[2],"i32"),ee.aOrderBy=[],Ne=Ge(L+F[3],"*"),Ae=P.get("sqlite3_index_orderby").size,vt=0;vt<ee.nOrderBy;++vt)_t=ee.aOrderBy,ar=_t.push,Mt=Ne+vt*Ae,Ts=P.get("sqlite3_index_orderby").dc,Jn={},Jn.iColumn=Ge(Mt+Ts[0],"i32"),Jn.desc=!!Ge(Mt+Ts[1],"i8"),ar.call(_t,Jn);for(ee.aConstraintUsage=[],Ne=0;Ne<ee.nConstraint;++Ne)ee.aConstraintUsage.push({argvIndex:0,omit:!1});for(ee.idxNum=Ge(L+F[5],"i32"),ee.idxStr=null,ee.orderByConsumed=!!Ge(L+F[8],"i8"),ee.estimatedCost=Ge(L+F[9],"double"),ee.estimatedRows=Ge(L+F[10],"i32"),ee.idxFlags=Ge(L+F[11],"i32"),ee.colUsed=Ge(L+F[12],"i32"),A=Z.module.xBestIndex(A,ee),Z=P.get("sqlite3_index_info").dc,F=Ge(L+Z[4],"*"),Ne=P.get("sqlite3_index_constraint_usage").size,ar=0;ar<ee.nConstraint;++ar)Ae=F+ar*Ne,_t=ee.aConstraintUsage[ar],Mt=P.get("sqlite3_index_constraint_usage").dc,Pt(Ae+Mt[0],_t.argvIndex,"i32"),Pt(Ae+Mt[1],_t.omit?1:0,"i8");return Pt(L+Z[5],ee.idxNum,"i32"),typeof ee.idxStr=="string"&&(F=se(ee.idxStr),Ne=Cr("sqlite3_malloc","number",["number"],[F+1]),oe(ee.idxStr,T,Ne,F+1),Pt(L+Z[6],Ne,"*"),Pt(L+Z[7],1,"i32")),Pt(L+Z[8],ee.orderByConsumed,"i32"),Pt(L+Z[9],ee.estimatedCost,"double"),Pt(L+Z[10],ee.estimatedRows,"i32"),Pt(L+Z[11],ee.idxFlags,"i32"),A},qs=function(A){const L=f.get(A);return u?C.add(A):f.delete(A),L.module.xDisconnect(A)},Os=function(A){const L=f.get(A);return u?C.add(A):f.delete(A),L.module.xDestroy(A)},Xr=function(A,L){const Z=f.get(A);if(w.set(L,Z),u){I.delete(L);for(const F of I)w.delete(F)}return Z.module.xOpen(A,L)},au=function(A){const L=w.get(A);return u?I.add(A):w.delete(A),L.module.xClose(A)},cu=function(A){return w.get(A).module.xEof(A)?1:0},Ai=function(A,L,Z,F,ee){const Ne=w.get(A);return Z=Z?Z?v(T,Z):"":null,ee=new Uint32Array(T.buffer,ee,F),Ne.module.xFilter(A,L,Z,ee)},ki=function(A){return w.get(A).module.xNext(A)},uu=function(A,L,Z){return w.get(A).module.xColumn(A,L,Z)},xn=function(A,L){return w.get(A).module.xRowid(A,s("BigInt64",L))},lu=function(A,L,Z,F){const ee=f.get(A);return Z=new Uint32Array(T.buffer,Z,L),ee.module.xUpdate(A,Z,s("BigInt64",F))},Ti=function(A){return f.get(A).module.xBegin(A)},Qo=function(A){return f.get(A).module.xSync(A)},Uo=function(A){return f.get(A).module.xCommit(A)},qr=function(A){return f.get(A).module.xRollback(A)},Cs=function(A,L){const Z=f.get(A);return L=L?v(T,L):"",Z.module.xRename(A,L)}}(),function(){function s(I,P){const A=`get${I}`,L=`set${I}`;return new Proxy(new DataView(T.buffer,P,I==="Int32"?4:8),{get(Z,F){if(F===A)return function(ee,Ne){if(!Ne)throw Error("must be little endian");return Z[F](ee,Ne)};if(F===L)return function(ee,Ne,Ae){if(!Ae)throw Error("must be little endian");return Z[F](ee,Ne,Ae)};if(typeof F=="string"&&F.match(/^(get)|(set)/))throw Error("invalid type");return Z[F]}})}function u(I){return I>>=2,ce[I]+ce[I+1]*2**32}const d=typeof mu=="object",f=new Map,w=new Map;r.registerVFS=function(I,P){if(Cr("sqlite3_vfs_find","number",["string"],[I.name]))throw Error(`VFS '${I.name}' already registered`);d&&(I.handleAsync=pu);var A=I.ad??64;const L=r._malloc(4);return P=Cr("register_vfs","number",["string","number","number","number"],[I.name,A,P?1:0,L]),P||(A=Ge(L,"*"),f.set(A,I)),r._free(L),P};const C=d?new Set:null;Ri=function(I){const P=w.get(I);return d?C.add(I):w.delete(I),P.xClose(I)},zo=function(I,P,A,L){return w.get(I).xRead(I,T.subarray(P,P+A),u(L))},E=function(I,P,A,L){return w.get(I).xWrite(I,T.subarray(P,P+A),u(L))},h=function(I,P){return w.get(I).xTruncate(I,u(P))},c=function(I,P){return w.get(I).xSync(I,P)},Kn=function(I,P){const A=w.get(I);return P=s("BigInt64",P),A.xFileSize(I,P)},Rr=function(I,P){return w.get(I).xLock(I,P)},g=function(I,P){return w.get(I).xUnlock(I,P)},jo=function(I,P){const A=w.get(I);return P=s("Int32",P),A.xCheckReservedLock(I,P)},Hn=function(I,P,A){const L=w.get(I);return A=new DataView(T.buffer,A),L.xFileControl(I,P,A)},i=function(I){return w.get(I).xSectorSize(I)},Vo=function(I){return w.get(I).xDeviceCharacteristics(I)},Pi=function(I,P,A,L,Z){if(I=f.get(I),w.set(A,I),d){C.delete(A);for(var F of C)w.delete(F)}if(F=null,L&64){F=1;const ee=[];for(;F;){const Ne=T[P++];if(Ne)ee.push(Ne);else switch(T[P]||(F=null),F){case 1:ee.push(63),F=2;break;case 2:ee.push(61),F=3;break;case 3:ee.push(38),F=2}}F=new TextDecoder().decode(new Uint8Array(ee))}else P&&(F=P?v(T,P):"");return Z=s("Int32",Z),I.xOpen(F,A,L,Z)},Di=function(I,P,A){return f.get(I).xDelete(P?v(T,P):"",A)},fe=function(I,P,A,L){return I=f.get(I),L=s("Int32",L),I.xAccess(P?v(T,P):"",A,L)}}();var Nl={a:(s,u,d,f)=>{Ie(`Assertion failed: ${s?v(T,s):""}, at: `+[u?u?v(T,u):"":"unknown filename",d,f?f?v(T,f):"":"unknown function"])},K:function(s,u){try{return s=s?v(T,s):"",Ei(s,u),0}catch(d){if(typeof Ye>"u"||d.name!=="ErrnoError")throw d;return-d.Ob}},M:function(s,u,d){try{if(u=u?v(T,u):"",u=or(s,u),d&-8)return-28;var f=At(u,{Yb:!0}).node;return f?(s="",d&4&&(s+="r"),d&2&&(s+="w"),d&1&&(s+="x"),s&&pt(f,s)?-2:0):-44}catch(w){if(typeof Ye>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},L:function(s,u){try{var d=ut(s);return Ei(d.node,u),0}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},J:function(s){try{var u=ut(s).node,d=typeof u=="string"?At(u,{Yb:!0}).node:u;if(!d.Cb.Qb)throw new B(63);return d.Cb.Qb(d,{timestamp:Date.now()}),0}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},b:function(s,u,d){qi=d;try{var f=ut(s);switch(u){case 0:var w=Ci();if(0>w)return-28;for(;Jr[w];)w++;return Ro(f,w).Wb;case 1:case 2:return 0;case 3:return f.flags;case 4:return w=Ci(),f.flags|=w,0;case 5:return w=Ci(),X[w+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return re[yu()>>2]=28,-1;default:return-28}}catch(C){if(typeof Ye>"u"||C.name!=="ErrnoError")throw C;return-C.Ob}},I:function(s,u){try{var d=ut(s);return Qn(Un,d.path,u)}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},n:function(s,u,d){u=jn(u,d);try{if(isNaN(u))return 61;var f=ut(s);if(!(f.flags&2097155))throw new B(28);return wr(f.node,u),0}catch(w){if(typeof Ye>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},C:function(s,u){try{if(u===0)return-28;var d=se("/")+1;return u<d?-68:(oe("/",T,s,u),d)}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},F:function(s,u){try{return s=s?v(T,s):"",Qn(Po,s,u)}catch(d){if(typeof Ye>"u"||d.name!=="ErrnoError")throw d;return-d.Ob}},z:function(s,u,d){try{return u=u?v(T,u):"",u=or(s,u),u=$(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),yr(u,d),0}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},E:function(s,u,d,f){try{u=u?v(T,u):"";var w=f&256;return u=or(s,u,f&4096),Qn(w?Po:Un,u,d)}catch(C){if(typeof Ye>"u"||C.name!=="ErrnoError")throw C;return-C.Ob}},y:function(s,u,d,f){qi=f;try{u=u?v(T,u):"",u=or(s,u);var w=f?Ci():0;return Nn(u,d,w).Wb}catch(C){if(typeof Ye>"u"||C.name!=="ErrnoError")throw C;return-C.Ob}},w:function(s,u,d,f){try{if(u=u?v(T,u):"",u=or(s,u),0>=f)return-28;var w=su(u),C=Math.min(f,se(w)),I=S[d+C];return oe(w,T,d,f+1),S[d+C]=I,C}catch(P){if(typeof Ye>"u"||P.name!=="ErrnoError")throw P;return-P.Ob}},u:function(s){try{return s=s?v(T,s):"",Do(s),0}catch(u){if(typeof Ye>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(s,u){try{return s=s?v(T,s):"",Qn(Un,s,u)}catch(d){if(typeof Ye>"u"||d.name!=="ErrnoError")throw d;return-d.Ob}},r:function(s,u,d){try{if(u=u?v(T,u):"",u=or(s,u),d===0){s=u;var f=At(s,{parent:!0}).node;if(!f)throw new B(44);var w=Y(s),C=Vt(f,w),I=gs(f,w,!1);if(I)throw new B(I);if(!f.Cb.oc)throw new B(63);if(C.$b)throw new B(10);f.Cb.oc(f,w),nu(C)}else d===512?Do(u):Ie("Invalid flags passed to unlinkat");return 0}catch(P){if(typeof Ye>"u"||P.name!=="ErrnoError")throw P;return-P.Ob}},q:function(s,u,d){try{if(u=u?v(T,u):"",u=or(s,u,!0),d){var f=ce[d>>2]+4294967296*re[d+4>>2],w=re[d+8>>2];C=1e3*f+w/1e6,d+=16,f=ce[d>>2]+4294967296*re[d+4>>2],w=re[d+8>>2],I=1e3*f+w/1e6}else var C=Date.now(),I=C;s=C;var P=At(u,{Yb:!0}).node;return P.Cb.Qb(P,{timestamp:Math.max(s,I)}),0}catch(A){if(typeof Ye>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},l:function(s,u,d){s=new Date(1e3*jn(s,u)),re[d>>2]=s.getSeconds(),re[d+4>>2]=s.getMinutes(),re[d+8>>2]=s.getHours(),re[d+12>>2]=s.getDate(),re[d+16>>2]=s.getMonth(),re[d+20>>2]=s.getFullYear()-1900,re[d+24>>2]=s.getDay(),u=s.getFullYear(),re[d+28>>2]=(u%4!==0||u%100===0&&u%400!==0?ou:yl)[s.getMonth()]+s.getDate()-1|0,re[d+36>>2]=-(60*s.getTimezoneOffset()),u=new Date(s.getFullYear(),6,1).getTimezoneOffset();var f=new Date(s.getFullYear(),0,1).getTimezoneOffset();re[d+32>>2]=(u!=f&&s.getTimezoneOffset()==Math.min(f,u))|0},i:function(s,u,d,f,w,C,I,P){w=jn(w,C);try{if(isNaN(w))return 61;var A=ut(f);if(u&2&&!(d&2)&&(A.flags&2097155)!==2)throw new B(2);if((A.flags&2097155)===1)throw new B(2);if(!A.Mb.kc)throw new B(43);var L=A.Mb.kc(A,s,w,u,d),Z=L.Oc;return re[I>>2]=L.Cc,ce[P>>2]=Z,0}catch(F){if(typeof Ye>"u"||F.name!=="ErrnoError")throw F;return-F.Ob}},j:function(s,u,d,f,w,C,I){C=jn(C,I);try{if(isNaN(C))return 61;var P=ut(w);if(d&2){if((P.node.mode&61440)!==32768)throw new B(43);f&2||P.Mb.lc&&P.Mb.lc(P,T.slice(s,s+u),C,u,f)}}catch(A){if(typeof Ye>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},s:(s,u,d)=>{function f(A){return(A=A.toTimeString().match(/\(([A-Za-z ]+)\)$/))?A[1]:"GMT"}var w=new Date().getFullYear(),C=new Date(w,0,1),I=new Date(w,6,1);w=C.getTimezoneOffset();var P=I.getTimezoneOffset();ce[s>>2]=60*Math.max(w,P),re[u>>2]=+(w!=P),s=f(C),u=f(I),s=Bo(s),u=Bo(u),P<w?(ce[d>>2]=s,ce[d+4>>2]=u):(ce[d>>2]=u,ce[d+4>>2]=s)},e:()=>Date.now(),d:()=>performance.now(),o:s=>{var u=T.length;if(s>>>=0,2147483648<s)return!1;for(var d=1;4>=d;d*=2){var f=u*(1+.2/d);f=Math.min(f,s+100663296);var w=Math;f=Math.max(s,f);e:{w=(w.min.call(w,2147483648,f+(65536-f%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(w),Tr();var C=1;break e}catch{}C=void 0}if(C)return!0}return!1},A:(s,u)=>{var d=0;return Fo().forEach((f,w)=>{var C=u+d;for(w=ce[s+4*w>>2]=C,C=0;C<f.length;++C)S[w++>>0]=f.charCodeAt(C);S[w>>0]=0,d+=f.length+1}),0},B:(s,u)=>{var d=Fo();ce[s>>2]=d.length;var f=0;return d.forEach(w=>f+=w.length+1),ce[u>>2]=f,0},f:function(s){try{var u=ut(s);if(u.Wb===null)throw new B(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(d){throw d}finally{Jr[u.Wb]=null}return u.Wb=null,0}catch(d){if(typeof Ye>"u"||d.name!=="ErrnoError")throw d;return d.Ob}},p:function(s,u){try{var d=ut(s);return S[u>>0]=d.Sb?2:K(d.mode)?3:(d.mode&61440)===40960?7:4,X[u+2>>1]=0,Ce=[0,(he=0,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[u+8>>2]=Ce[0],re[u+12>>2]=Ce[1],Ce=[0,(he=0,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[u+16>>2]=Ce[0],re[u+20>>2]=Ce[1],0}catch(f){if(typeof Ye>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},x:function(s,u,d,f){try{e:{var w=ut(s);s=u;for(var C,I=u=0;I<d;I++){var P=ce[s>>2],A=ce[s+4>>2];s+=8;var L=w,Z=P,F=A,ee=C,Ne=S;if(0>F||0>ee)throw new B(28);if(L.Wb===null)throw new B(8);if((L.flags&2097155)===1)throw new B(8);if(K(L.node.mode))throw new B(31);if(!L.Mb.read)throw new B(28);var Ae=typeof ee<"u";if(!Ae)ee=L.position;else if(!L.seekable)throw new B(70);var vt=L.Mb.read(L,Ne,Z,F,ee);Ae||(L.position+=vt);var _t=vt;if(0>_t){var ar=-1;break e}if(u+=_t,_t<A)break;typeof C<"u"&&(C+=_t)}ar=u}return ce[f>>2]=ar,0}catch(Mt){if(typeof Ye>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ob}},m:function(s,u,d,f,w){u=jn(u,d);try{if(isNaN(u))return 61;var C=ut(s);return _s(C,u,f),Ce=[C.position>>>0,(he=C.position,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],re[w>>2]=Ce[0],re[w+4>>2]=Ce[1],C.pc&&u===0&&f===0&&(C.pc=null),0}catch(I){if(typeof Ye>"u"||I.name!=="ErrnoError")throw I;return I.Ob}},D:function(s){try{var u=ut(s);return du(d=>{var f=u.node.Ub;f.type.Qc?f.type.Qc(f,!1,w=>{d(w?29:0)}):d(0)})}catch(d){if(typeof Ye>"u"||d.name!=="ErrnoError")throw d;return d.Ob}},t:function(s,u,d,f){try{e:{var w=ut(s);s=u;for(var C,I=u=0;I<d;I++){var P=ce[s>>2],A=ce[s+4>>2];s+=8;var L=w,Z=P,F=A,ee=C,Ne=S;if(0>F||0>ee)throw new B(28);if(L.Wb===null)throw new B(8);if(!(L.flags&2097155))throw new B(8);if(K(L.node.mode))throw new B(31);if(!L.Mb.write)throw new B(28);L.seekable&&L.flags&1024&&_s(L,0,2);var Ae=typeof ee<"u";if(!Ae)ee=L.position;else if(!L.seekable)throw new B(70);var vt=L.Mb.write(L,Ne,Z,F,ee,void 0);Ae||(L.position+=vt);var _t=vt;if(0>_t){var ar=-1;break e}u+=_t,typeof C<"u"&&(C+=_t)}ar=u}return ce[f>>2]=ar,0}catch(Mt){if(typeof Ye>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ob}},ra:Vn,N:xs,ga:Yr,ca:Ii,Y:Si,la:Ti,G:zn,h:au,oa:uu,ja:Uo,ea:Es,fa:$o,k:Os,v:qs,pa:cu,g:Ai,qa:ki,da:Xr,ha:Cs,ia:qr,na:xn,c:Wi,ka:Qo,ma:lu,aa:fe,V:jo,$:Ri,ba:Di,S:Vo,U:Hn,Z:Kn,X:Rr,R:Pi,Q:zo,T:i,_:c,O:h,W:g,P:E},ne=function(){function s(d){return ne=d.exports,ne=Ee(),N=ne.sa,Tr(),Re.unshift(ne.ta),nr--,r.monitorRunDependencies&&r.monitorRunDependencies(nr),nr==0&&it&&(d=it,it=null,d()),ne}var u={a:Nl};if(nr++,r.monitorRunDependencies&&r.monitorRunDependencies(nr),r.instantiateWasm)try{return r.instantiateWasm(u,s)}catch(d){H(`Module.instantiateWasm callback failed with error: ${d}`),a(d)}return mr(u,function(d){s(d.instance)}).catch(a),{}}();r._sqlite3_vfs_find=s=>(r._sqlite3_vfs_find=ne.ua)(s),r._sqlite3_malloc=s=>(r._sqlite3_malloc=ne.va)(s),r._sqlite3_free=s=>(r._sqlite3_free=ne.wa)(s),r._sqlite3_prepare_v2=(s,u,d,f,w)=>(r._sqlite3_prepare_v2=ne.xa)(s,u,d,f,w),r._sqlite3_step=s=>(r._sqlite3_step=ne.ya)(s),r._sqlite3_column_int64=(s,u)=>(r._sqlite3_column_int64=ne.za)(s,u),r._sqlite3_column_int=(s,u)=>(r._sqlite3_column_int=ne.Aa)(s,u),r._sqlite3_finalize=s=>(r._sqlite3_finalize=ne.Ba)(s),r._sqlite3_reset=s=>(r._sqlite3_reset=ne.Ca)(s),r._sqlite3_clear_bindings=s=>(r._sqlite3_clear_bindings=ne.Da)(s),r._sqlite3_value_blob=s=>(r._sqlite3_value_blob=ne.Ea)(s),r._sqlite3_value_text=s=>(r._sqlite3_value_text=ne.Fa)(s),r._sqlite3_value_bytes=s=>(r._sqlite3_value_bytes=ne.Ga)(s),r._sqlite3_value_double=s=>(r._sqlite3_value_double=ne.Ha)(s),r._sqlite3_value_int=s=>(r._sqlite3_value_int=ne.Ia)(s),r._sqlite3_value_int64=s=>(r._sqlite3_value_int64=ne.Ja)(s),r._sqlite3_value_type=s=>(r._sqlite3_value_type=ne.Ka)(s),r._sqlite3_result_blob=(s,u,d,f)=>(r._sqlite3_result_blob=ne.La)(s,u,d,f),r._sqlite3_result_double=(s,u)=>(r._sqlite3_result_double=ne.Ma)(s,u),r._sqlite3_result_error=(s,u,d)=>(r._sqlite3_result_error=ne.Na)(s,u,d),r._sqlite3_result_int=(s,u)=>(r._sqlite3_result_int=ne.Oa)(s,u),r._sqlite3_result_int64=(s,u,d)=>(r._sqlite3_result_int64=ne.Pa)(s,u,d),r._sqlite3_result_null=s=>(r._sqlite3_result_null=ne.Qa)(s),r._sqlite3_result_text=(s,u,d,f)=>(r._sqlite3_result_text=ne.Ra)(s,u,d,f),r._sqlite3_column_count=s=>(r._sqlite3_column_count=ne.Sa)(s),r._sqlite3_data_count=s=>(r._sqlite3_data_count=ne.Ta)(s),r._sqlite3_column_blob=(s,u)=>(r._sqlite3_column_blob=ne.Ua)(s,u),r._sqlite3_column_bytes=(s,u)=>(r._sqlite3_column_bytes=ne.Va)(s,u),r._sqlite3_column_double=(s,u)=>(r._sqlite3_column_double=ne.Wa)(s,u),r._sqlite3_column_text=(s,u)=>(r._sqlite3_column_text=ne.Xa)(s,u),r._sqlite3_column_type=(s,u)=>(r._sqlite3_column_type=ne.Ya)(s,u),r._sqlite3_column_name=(s,u)=>(r._sqlite3_column_name=ne.Za)(s,u),r._sqlite3_bind_blob=(s,u,d,f,w)=>(r._sqlite3_bind_blob=ne._a)(s,u,d,f,w),r._sqlite3_bind_double=(s,u,d)=>(r._sqlite3_bind_double=ne.$a)(s,u,d),r._sqlite3_bind_int=(s,u,d)=>(r._sqlite3_bind_int=ne.ab)(s,u,d),r._sqlite3_bind_int64=(s,u,d,f)=>(r._sqlite3_bind_int64=ne.bb)(s,u,d,f),r._sqlite3_bind_null=(s,u)=>(r._sqlite3_bind_null=ne.cb)(s,u),r._sqlite3_bind_text=(s,u,d,f,w)=>(r._sqlite3_bind_text=ne.db)(s,u,d,f,w),r._sqlite3_bind_parameter_count=s=>(r._sqlite3_bind_parameter_count=ne.eb)(s),r._sqlite3_bind_parameter_name=(s,u)=>(r._sqlite3_bind_parameter_name=ne.fb)(s,u),r._sqlite3_sql=s=>(r._sqlite3_sql=ne.gb)(s),r._sqlite3_exec=(s,u,d,f,w)=>(r._sqlite3_exec=ne.hb)(s,u,d,f,w),r._sqlite3_errmsg=s=>(r._sqlite3_errmsg=ne.ib)(s),r._sqlite3_declare_vtab=(s,u)=>(r._sqlite3_declare_vtab=ne.jb)(s,u),r._sqlite3_libversion=()=>(r._sqlite3_libversion=ne.kb)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=ne.lb)(),r._sqlite3_changes=s=>(r._sqlite3_changes=ne.mb)(s),r._sqlite3_close=s=>(r._sqlite3_close=ne.nb)(s),r._sqlite3_limit=(s,u,d)=>(r._sqlite3_limit=ne.ob)(s,u,d),r._sqlite3_open_v2=(s,u,d,f)=>(r._sqlite3_open_v2=ne.pb)(s,u,d,f),r._sqlite3_get_autocommit=s=>(r._sqlite3_get_autocommit=ne.qb)(s);var yu=()=>(yu=ne.rb)(),Yo=r._malloc=s=>(Yo=r._malloc=ne.sb)(s),wu=r._free=s=>(wu=r._free=ne.tb)(s);r._RegisterExtensionFunctions=s=>(r._RegisterExtensionFunctions=ne.ub)(s),r._set_authorizer=s=>(r._set_authorizer=ne.vb)(s),r._create_function=(s,u,d,f,w,C)=>(r._create_function=ne.wb)(s,u,d,f,w,C),r._create_module=(s,u,d,f)=>(r._create_module=ne.xb)(s,u,d,f),r._progress_handler=(s,u)=>(r._progress_handler=ne.yb)(s,u),r._register_vfs=(s,u,d,f)=>(r._register_vfs=ne.zb)(s,u,d,f),r._getSqliteFree=()=>(r._getSqliteFree=ne.Ab)();var gu=r._main=(s,u)=>(gu=r._main=ne.Bb)(s,u),bu=(s,u)=>(bu=ne.Db)(s,u),Xo=()=>(Xo=ne.Eb)(),Nu=()=>(Nu=ne.Fb)(),vu=s=>(vu=ne.Gb)(s),Zo=s=>(Zo=ne.Hb)(s),_u=s=>(_u=ne.Ib)(s),xu=()=>(xu=ne.Jb)(),Eu=s=>(Eu=ne.Kb)(s),ea=()=>(ea=ne.Lb)();r.getTempRet0=Xo,r.ccall=Cr,r.cwrap=(s,u,d,f)=>{var w=!d||d.every(C=>C==="number"||C==="boolean");return u!=="string"&&w&&!f?r["_"+s]:function(){return Cr(s,u,d,arguments,f)}},r.setValue=Pt,r.getValue=Ge,r.UTF8ToString=(s,u)=>s?v(T,s,u):"",r.stringToUTF8=(s,u,d)=>oe(s,T,u,d),r.lengthBytesUTF8=se;var Ss;it=function s(){Ss||Ou(),Ss||(it=s)};function Ou(){function s(){if(!Ss&&(Ss=!0,r.calledRun=!0,!q)){if(r.noFSInit||Mo||(Mo=!0,Lo(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?$n("stdin",r.stdin):qt("/dev/tty","/dev/stdin"),r.stdout?$n("stdout",null,r.stdout):qt("/dev/tty","/dev/stdout"),r.stderr?$n("stderr",null,r.stderr):qt("/dev/tty1","/dev/stderr"),Nn("/dev/stdin",0),Nn("/dev/stdout",1),Nn("/dev/stderr",1)),Bn=!1,Kr(Re),Kr(Er),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),qu){var u=gu;try{var d=u(0,0);b=d,U(d)}catch(f){pe(f)}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)u=r.postRun.shift(),de.unshift(u);Kr(de)}}if(!(0<nr)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)je();Kr(Me),0<nr||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),s()},1)):s())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var qu=!0;return r.noInitialRun&&(qu=!1),Ou(),e.ready}})(),VN=jN,zN=Ds|$i|zu|PN|Hu,$t,mo,Ka,Ja,gf,Yc,Tm,Xc,Am,Nd,HN=(Nd=class{constructor(){M(this,Ja);M(this,Yc);M(this,Xc);M(this,$t,Ds);ye(this,"timeoutMillis",0);M(this,mo,new Map);M(this,Ka,Promise.resolve(0))}get state(){return o(this,$t)}async lock(t){return ge(this,Ja,gf).call(this,ge(this,Yc,Tm),t)}async unlock(t){return ge(this,Ja,gf).call(this,ge(this,Xc,Am),t)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(t,e){return new Promise(async(r,n)=>{try{await navigator.locks.request(t,e,a=>{if(r(a),a)return new Promise(l=>o(this,mo).set(t,l))})}catch(a){n(a)}})}_releaseWebLock(t){o(this,mo).get(t)?.(),o(this,mo).delete(t)}async _pollWebLock(t){return(await navigator.locks.query()).held.find(({name:r})=>r===t)?.mode}_getTimeoutSignal(){if(this.timeoutMillis){const t=new AbortController;return setTimeout(()=>t.abort(),this.timeoutMillis),t.signal}}},$t=new WeakMap,mo=new WeakMap,Ka=new WeakMap,Ja=new WeakSet,gf=async function(t,e){const r=e&zN;try{const n=()=>t.call(this,r);return await Q(this,Ka,o(this,Ka).then(n,n)),Q(this,$t,r),Je}catch(n){return n.name==="AbortError"?SN:(console.error(n),kN)}},Yc=new WeakSet,Tm=async function(t){if(t===o(this,$t))return Je;switch(o(this,$t)){case Ds:switch(t){case $i:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}case $i:switch(t){case zu:return this._SHAREDtoRESERVED();case Hu:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}case zu:switch(t){case Hu:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}},Xc=new WeakSet,Am=async function(t){if(t===o(this,$t))return Je;switch(o(this,$t)){case Hu:switch(t){case $i:return this._EXCLUSIVEtoSHARED();case Ds:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}case zu:switch(t){case $i:return this._RESERVEDtoSHARED();case Ds:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}case $i:switch(t){case Ds:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}default:throw new Error(`unexpected transition ${o(this,$t)} -> ${t}`)}},Nd),KN=class extends HN{constructor(t){super(),this._lockName=t+"-outer",this._reservedName=t+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},JN=5e3,GN=0,Dl=new WeakMap;function tn(...t){}var yo,wo,Ga,Rt,Ya,is,ss,Zc,km,vd,YN=(vd=class{constructor(t,e={durability:"default"}){M(this,Zc);M(this,yo,void 0);M(this,wo,void 0);M(this,Ga,void 0);M(this,Rt,null);M(this,Ya,0);M(this,is,Promise.resolve());M(this,ss,Promise.resolve());Q(this,wo,Promise.resolve(t).then(r=>Q(this,yo,r))),Q(this,Ga,e)}async close(){const t=o(this,yo)??await o(this,wo);await o(this,is),await this.sync(),t.close()}async run(t,e){const r=o(this,is).then(()=>ge(this,Zc,km).call(this,t,e));return Q(this,is,r.catch(()=>{})),r}async sync(){await o(this,is),await o(this,ss),Q(this,ss,Promise.resolve())}},yo=new WeakMap,wo=new WeakMap,Ga=new WeakMap,Rt=new WeakMap,Ya=new WeakMap,is=new WeakMap,ss=new WeakMap,Zc=new WeakSet,km=async function(t,e){const r=o(this,yo)??await o(this,wo);if(t==="readwrite"&&o(this,Rt)?.mode==="readonly")Q(this,Rt,null);else if(performance.now()-o(this,Ya)>JN){try{o(this,Rt)?.commit()}catch(n){if(n.name!=="InvalidStateError")throw n}await new Promise(n=>setTimeout(n)),Q(this,Rt,null)}for(let n=0;n<2;++n){if(!o(this,Rt)){Q(this,Rt,r.transaction(r.objectStoreNames,t,o(this,Ga)));const a=Q(this,Ya,performance.now());Q(this,ss,o(this,ss).then(()=>new Promise((l,m)=>{o(this,Rt).addEventListener("complete",_=>{l(),o(this,Rt)===_.target&&Q(this,Rt,null),tn(`transaction ${Dl.get(_.target)} complete`)}),o(this,Rt).addEventListener("abort",_=>{console.warn("tx abort",(performance.now()-a)/1e3);const x=_.target.error;m(x),o(this,Rt)===_.target&&Q(this,Rt,null),tn(`transaction ${Dl.get(_.target)} aborted`,x)})}))),Dl.set(o(this,Rt),GN++)}try{const a=Object.fromEntries(Array.from(r.objectStoreNames,l=>[l,new XN(o(this,Rt).objectStore(l))]));return await e(a)}catch(a){if(Q(this,Rt,null),n)throw a}}},vd);function Zn(t){return new Promise((e,r)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>r(t.error))})}var It,_d,XN=(_d=class{constructor(t){M(this,It,void 0);Q(this,It,t)}get(t){tn(`get ${o(this,It).name}`,t);const e=o(this,It).get(t);return Zn(e)}getAll(t,e){tn(`getAll ${o(this,It).name}`,t,e);const r=o(this,It).getAll(t,e);return Zn(r)}getKey(t){tn(`getKey ${o(this,It).name}`,t);const e=o(this,It).getKey(t);return Zn(e)}getAllKeys(t,e){tn(`getAllKeys ${o(this,It).name}`,t,e);const r=o(this,It).getAllKeys(t,e);return Zn(r)}put(t,e){tn(`put ${o(this,It).name}`,t,e);const r=o(this,It).put(t,e);return Zn(r)}delete(t){tn(`delete ${o(this,It).name}`,t);const e=o(this,It).delete(t);return Zn(e)}clear(){tn(`clear ${o(this,It).name}`);const t=o(this,It).clear();return Zn(t)}index(t){return new ZN(o(this,It).index(t))}},It=new WeakMap,_d),os,xd,ZN=(xd=class{constructor(t){M(this,os,void 0);Q(this,os,t)}getAllKeys(t,e){tn(`IDBIndex.getAllKeys ${o(this,os).objectStore.name}<${o(this,os).name}>`,t,e);const r=o(this,os).getAllKeys(t,e);return Zn(r)}},os=new WeakMap,xd),ev=512,md=3e3,yd={durability:"default",purge:"deferred",purgeAtLeast:16};function ur(...t){}var hi,Qt,ot,as,us,Wn,Xa,bf,el,Wm,tl,Rm,di,Ps,rl,Dm,Ed,tv=(Ed=class extends QN{constructor(e="wa-sqlite",r=yd){super();M(this,Xa);M(this,el);M(this,tl);M(this,di);M(this,rl);M(this,hi,void 0);M(this,Qt,new Map);M(this,ot,void 0);M(this,as,new Set);M(this,us,performance.now());M(this,Wn,new Set);this.name=e,Q(this,hi,Object.assign({},yd,r)),Q(this,ot,new YN(rv(e),{durability:o(this,hi).durability}))}async close(){for(const e of o(this,Qt).keys())await this.xClose(e);await o(this,ot)?.close(),Q(this,ot,null)}xOpen(e,r,n,a){return this.handleAsync(async()=>{e===null&&(e=`null_${r}`),ur(`xOpen ${e} 0x${r.toString(16)} 0x${n.toString(16)}`);try{const l=new URL(e,"http://localhost/"),m={path:l.pathname,flags:n,block0:null,isMetadataChanged:!0,locks:new KN(l.pathname)};return o(this,Qt).set(r,m),await o(this,ot).run("readwrite",async({blocks:_})=>{if(m.block0=await _.get(ge(this,di,Ps).call(this,m,0)),!m.block0)if(n&Sm)m.block0={path:m.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},_.put(m.block0);else throw new Error(`file not found: ${m.path}`)}),a.setInt32(0,n&Im,!0),Je}catch(l){return console.error(l),Cm}})}xClose(e){return this.handleAsync(async()=>{try{const r=o(this,Qt).get(e);return r&&(ur(`xClose ${r.path}`),o(this,Qt).delete(e),r.flags&DN&&o(this,ot).run("readwrite",({blocks:n})=>{n.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),Je}catch(r){return console.error(r),wt}})}xRead(e,r,n){return this.handleAsync(async()=>{const a=o(this,Qt).get(e);ur(`xRead ${a.path} ${r.byteLength} ${n}`);try{return await o(this,ot).run("readonly",async({blocks:m})=>{let _=0;for(;_<r.byteLength;){const x=n+_,y=x<a.block0.data.byteLength?a.block0:await m.get(ge(this,di,Ps).call(this,a,-x));if(!y||y.data.byteLength-y.offset<=x)return r.fill(0,_),WN;const k=r.subarray(_),R=x+y.offset,G=Math.min(Math.max(y.data.byteLength-R,0),k.byteLength);k.set(y.data.subarray(R,R+G)),_+=G}return Je})}catch(l){return console.error(l),wt}})}xWrite(e,r,n){const a=o(this,Wn).has(e);if(a||performance.now()-o(this,us)>md){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&o(this,Wn).add(e),await new Promise(_=>setTimeout(_));const m=ge(this,Xa,bf).call(this,e,r,n);return Q(this,us,performance.now()),m});return a&&o(this,Wn).delete(e),l}return ge(this,Xa,bf).call(this,e,r,n)}xTruncate(e,r){const n=o(this,Qt).get(e);ur(`xTruncate ${n.path} ${r}`);try{Object.assign(n.block0,{fileSize:r,data:n.block0.data.slice(0,r)});const a=Object.assign({},n.block0);return o(this,ot).run("readwrite",({blocks:l})=>{l.delete(ge(this,di,Ps).call(this,n,-1/0,-r)),l.put(a)}),Je}catch(a){return console.error(a),wt}}xSync(e,r){const n=o(this,Wn).has(e);if(n||o(this,hi).durability!=="relaxed"||performance.now()-o(this,us)>md){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&o(this,Wn).add(e);const m=await ge(this,el,Wm).call(this,e,r);return Q(this,us,performance.now()),m});return n&&o(this,Wn).delete(e),l}const a=o(this,Qt).get(e);return ur(`xSync ${a.path} ${r}`),Je}xFileSize(e,r){const n=o(this,Qt).get(e);return ur(`xFileSize ${n.path}`),r.setBigInt64(0,BigInt(n.block0.fileSize),!0),Je}xLock(e,r){return this.handleAsync(async()=>{const n=o(this,Qt).get(e);ur(`xLock ${n.path} ${r}`);try{const a=await n.locks.lock(r);return a===Je&&n.locks.state===$i&&(n.block0=await o(this,ot).run("readonly",({blocks:l})=>l.get(ge(this,di,Ps).call(this,n,0)))),a}catch(a){return console.error(a),wt}})}xUnlock(e,r){return this.handleAsync(async()=>{const n=o(this,Qt).get(e);ur(`xUnlock ${n.path} ${r}`);try{return n.locks.unlock(r)}catch(a){return console.error(a),wt}})}xCheckReservedLock(e,r){return this.handleAsync(async()=>{const n=o(this,Qt).get(e);ur(`xCheckReservedLock ${n.path}`);const a=await n.locks.isSomewhereReserved();return r.setInt32(0,a?1:0,!0),Je})}xSectorSize(e){return ev}xDeviceCharacteristics(e){return FN|LN|MN|BN}xFileControl(e,r,n){const a=o(this,Qt).get(e);switch(ur(`xFileControl ${a.path} ${r}`),r){case 11:return a.overwrite=!0,Je;case 21:if(a.overwrite)try{return this.handleAsync(async()=>(await ge(this,rl,Dm).call(this,a),Je))}catch(l){return console.error(l),wt}if(a.isMetadataChanged)try{o(this,ot).run("readwrite",async({blocks:l})=>{await l.put(a.block0)}),a.isMetadataChanged=!1}catch(l){return console.error(l),wt}return Je;case 22:return a.overwrite=!1,Je;case 31:return this.handleAsync(async()=>{try{return a.block0.version--,a.changedPages=new Set,o(this,ot).run("readwrite",async({blocks:l})=>{const m=await l.index("version").getAllKeys(IDBKeyRange.bound([a.path],[a.path,a.block0.version]));for(const _ of m)l.delete(_)}),Je}catch(l){return console.error(l),wt}});case 32:try{const l=Object.assign({},a.block0);l.data=l.data.slice();const m=a.changedPages;return a.changedPages=null,a.isMetadataChanged=!1,o(this,ot).run("readwrite",async({blocks:_})=>{_.put(l);const x=await _.get([a.path,"purge",0])??{path:a.path,offset:"purge",version:0,data:new Map,count:0};x.count+=m.size;for(const y of m)x.data.set(y,l.version);_.put(x),ge(this,tl,Rm).call(this,a.path,x.count)}),Je}catch(l){return console.error(l),wt}case 33:return this.handleAsync(async()=>{try{return a.changedPages=null,a.isMetadataChanged=!1,a.block0=await o(this,ot).run("readonly",({blocks:l})=>l.get([a.path,0,a.block0.version+1])),Je}catch(l){return console.error(l),wt}});default:return qm}}xAccess(e,r,n){return this.handleAsync(async()=>{try{const a=new URL(e,"file://localhost/").pathname;ur(`xAccess ${a} ${r}`);const l=await o(this,ot).run("readonly",({blocks:m})=>m.getKey(ge(this,di,Ps).call(this,{path:a},0)));return n.setInt32(0,l?1:0,!0),Je}catch(a){return console.error(a),wt}})}xDelete(e,r){return this.handleAsync(async()=>{const n=new URL(e,"file://localhost/").pathname;try{return o(this,ot).run("readwrite",({blocks:a})=>a.delete(IDBKeyRange.bound([n],[n,[]]))),r&&await o(this,ot).sync(),Je}catch(a){return console.error(a),wt}})}async purge(e){const r=Date.now();await o(this,ot).run("readwrite",async({blocks:n})=>{const a=await n.get([e,"purge",0]);if(a){for(const[l,m]of a.data)n.delete(IDBKeyRange.bound([e,l,m],[e,l,1/0],!0,!1));await n.delete([e,"purge",0])}ur(`purge ${e} ${a?.data.size??0} pages in ${Date.now()-r} ms`)})}},hi=new WeakMap,Qt=new WeakMap,ot=new WeakMap,as=new WeakMap,us=new WeakMap,Wn=new WeakMap,Xa=new WeakSet,bf=function(e,r,n){const a=o(this,Qt).get(e);ur(`xWrite ${a.path} ${r.byteLength} ${n}`);try{const l=a.block0.fileSize;a.block0.fileSize<n+r.byteLength&&(a.block0.fileSize=n+r.byteLength,a.isMetadataChanged=!0);const m=n===0?a.block0:{path:a.path,offset:-n,version:a.block0.version,data:null};return m.data=r.slice(),a.changedPages?(l===a.block0.fileSize&&a.changedPages.add(-n),n!==0&&o(this,ot).run("readwrite",({blocks:_})=>_.put(m))):o(this,ot).run("readwrite",({blocks:_})=>_.put(m)),a.isMetadataChanged=n===0?!1:a.isMetadataChanged,Je}catch(l){return console.error(l),wt}},el=new WeakSet,Wm=async function(e,r){const n=o(this,Qt).get(e);ur(`xSync ${n.path} ${r}`);try{n.isMetadataChanged&&(o(this,ot).run("readwrite",async({blocks:a})=>{await a.put(n.block0)}),n.isMetadataChanged=!1),await o(this,ot).sync()}catch(a){return console.error(a),wt}return Je},tl=new WeakSet,Rm=function(e,r){o(this,hi).purge==="manual"||o(this,as).has(e)||r<o(this,hi).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(e),o(this,as).delete(e)}):setTimeout(()=>{this.purge(e),o(this,as).delete(e)}),o(this,as).add(e))},di=new WeakSet,Ps=function(e,r,n=0){const a=!r||-r<e.block0.data.length?-1/0:e.block0.version;return IDBKeyRange.bound([e.path,r,a],[e.path,n,1/0])},rl=new WeakSet,Dm=async function(e){const r=e.block0.data.length;if(r<18)return;const n=new DataView(e.block0.data.buffer,e.block0.data.byteOffset);let a=n.getUint16(16);if(a===1&&(a=65536),a===r)return;const l=Math.max(r,a),m=l/r,_=l/a,y=n.getUint32(28)*a,k=e.block0.version;await o(this,ot).run("readwrite",async({blocks:R})=>{const G=await R.index("version").getAllKeys(IDBKeyRange.bound([e.path,k+1],[e.path,1/0]));for(const H of G)R.delete(H);R.delete([e.path,"purge",0]);for(let H=0;H<y;H+=l){const ae=await R.getAll(IDBKeyRange.lowerBound([e.path,-(H+l),1/0]),m);for(const N of ae)R.delete([N.path,N.offset,N.version]);if(_===1){const N=new Uint8Array(a);for(const b of ae)N.set(b.data,-(H+b.offset));const q={path:e.path,offset:-H,version:k,data:N};q.offset===0&&(q.fileSize=y,e.block0=q),R.put(q)}else{const N=ae[0];for(let q=0;q<_;++q){const b=-(H+q*a);if(-b>=y)break;const S={path:N.path,offset:b,version:k,data:N.data.subarray(q*a,(q+1)*a)};S.offset===0&&(S.fileSize=y,e.block0=S),R.put(S)}}}})},Ed);function rv(t){return new Promise((e,r)=>{const n=globalThis.indexedDB.open(t,5);n.addEventListener("upgradeneeded",function(){n.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),n.addEventListener("success",()=>{e(n.result)}),n.addEventListener("error",()=>{r(n.error)})})}async function nv(t,e={}){const{url:r,idbName:n="idb-sqlite-vfs",...a}=e,l=await VN(r?{locateFile:()=>r}:void 0),m=new tv(n,{durability:"relaxed",...a});return{path:t.endsWith(".db")?t:`${t}.db`,sqliteModule:l,vfs:m}}const iv=""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,sv=new Vb({async database(){return await $N(nv("test idb",{url:iv}))}});function ov(){console.log("start wa-sqlite test"),th(sv).then(t=>{t?.forEach(e=>console.log("[wa-sqlite]",e))})}var av=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let n;e?r?(n=t.get(e))&&n.splice(n.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(n=>n(...r))},once(e,r){let n=(...a)=>{r(...a),this.off(e,n)};this.on(e,n)}});function uv(){return"locks"in navigator}async function Pm(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),n=await new Promise((a,l)=>{r.onmessage=({data:m})=>{a(m)},r.onerror=m=>{m.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),n}catch{return!1}}function Lm(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function wd(t,e){return typeof t=="function"?t(e):t}function cv(t){return t?new Worker(new URL(""+new URL("worker-Cs2xuRzF.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-z_uG8b6d.js",import.meta.url).href,import.meta.url))}function lv(t){return t?new URL(""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-1p_8Y4mq.wasm",import.meta.url).href,import.meta.url).href}var fv=class{constructor(t){ye(this,"config");ye(this,"worker");ye(this,"connection");ye(this,"connectionMutex",new hv);ye(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await Pm():!1;this.mitt=av(),this.worker=wd(this.config.worker||cv,t||Lm()),this.worker.onmessage=({data:{type:e,...r}})=>{this.mitt?.emit(e,r)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:wd(this.config.url||lv,!t),useOPFS:t}),await new Promise((e,r)=>{this.mitt?.once("init",({err:n})=>{n?r(n):e()})}),this.connection=new dv(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(pn.raw("begin"))}async commitTransaction(t){await t.executeQuery(pn.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(pn.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},hv=class{constructor(){ye(this,"promise");ye(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},dv=class{constructor(t,e){ye(this,"worker");ye(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:n}=t,a=ke.is(n);return this.worker.postMessage({type:"run",isSelect:a,sql:r,parameters:e}),new Promise((l,m)=>{!this.mitt&&m("kysely instance has been destroyed"),this.mitt.once("run",({data:_,err:x})=>{!x&&_?l(_):m(x)})})}},Za,Od,pv=(Od=class{constructor(t){M(this,Za,void 0);Q(this,Za,t)}createDriver(){return new fv(o(this,Za))}createQueryCompiler(){return new lm}createAdapter(){return new mm}createIntrospector(t){return new dm(t)}},Za=new WeakMap,Od);const mv=new pv({fileName:"wa-sqlite-worker-test"});async function yv(){console.log("start wa-sqlite-worker test"),th(mv).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=Lm(),r=uv(),n=await Pm();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",n)})}const wv=Ot("h1",null,[Ea(" test "),Ot("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ea(" WASM dialect ")],-1),gv=Ot("br",null,null,-1),bv=Ot("h3",null,"see worker result in console",-1),Nv=Ot("h3",null,[Ea(" you can explore "),Ot("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ea(" file using "),Ot("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),vv=Ot("br",null,null,-1),_v={class:"buttons"},xv=Ot("br",null,null,-1),Ev=Ot("div",null," result run in main thread: ",-1),Ov=Vy({__name:"App",setup(t){const e=new CN,{result:r,run:n}=qN(),a=new IN;function l(){n()}function m(){e.postMessage("")}function _(){a.postMessage("")}function x(){ov()}function y(){yv()}async function k(){try{(await window.indexedDB.databases()).forEach(H=>window.indexedDB.deleteDatabase(H.name))}catch{}}async function R(){console.clear(),await nd("sqljs"),await nd("sqljsWorker"),await k();const G=await navigator.storage?.getDirectory();try{await G.removeEntry("test.db")}catch{}try{await G.removeEntry("test.db-journal")}catch{}try{await G.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(G,H)=>(xw(),qw(on,null,[wv,gv,bv,Nv,vv,Ot("div",_v,[Ot("button",{onClick:H[0]||(H[0]=ae=>l())}," test sqljs in main thread "),Ot("button",{onClick:H[1]||(H[1]=ae=>m())}," test sqljs in Worker "),Ot("button",{onClick:H[2]||(H[2]=ae=>_())}," test officialWasm in Worker "),Ot("button",{onClick:H[3]||(H[3]=ae=>x())}," test wa-sqlite in main thread "),Ot("button",{onClick:H[4]||(H[4]=ae=>y())}," test wa-sqlite in Worker "),Ot("button",{onClick:H[5]||(H[5]=ae=>R())}," clear ")]),xv,Ev,Ot("pre",null,""+Xm(Kd(r))+`
  `,1)],64))}});lg(Ov).mount("#root");
