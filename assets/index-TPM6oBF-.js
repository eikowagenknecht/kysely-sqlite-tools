var qp=Object.defineProperty;var Wp=(t,e,r)=>e in t?qp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Z=(t,e,r)=>(Wp(t,typeof e!="symbol"?e+"":e,r),r),gu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(gu(t,e,"read from private field"),r?r.call(t):e.get(t)),_=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},S=(t,e,r,i)=>(gu(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var xe=(t,e,r)=>(gu(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dl(t,e){const r=new Set(t.split(","));return e?i=>r.has(i.toLowerCase()):i=>r.has(i)}const Fe={},mi=[],Kt=()=>{},Ip=()=>!1,Ka=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hl=t=>t.startsWith("onUpdate:"),pt=Object.assign,fl=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Ep=Object.prototype.hasOwnProperty,me=(t,e)=>Ep.call(t,e),ee=Array.isArray,yi=t=>Ha(t)==="[object Map]",Ud=t=>Ha(t)==="[object Set]",ae=t=>typeof t=="function",ut=t=>typeof t=="string",Ki=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",$d=t=>(je(t)||ae(t))&&ae(t.then)&&ae(t.catch),Qd=Object.prototype.toString,Ha=t=>Qd.call(t),Tp=t=>Ha(t).slice(8,-1),jd=t=>Ha(t)==="[object Object]",pl=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ps=dl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ga=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},kp=/-(\w)/g,Fi=Ga(t=>t.replace(kp,(e,r)=>r?r.toUpperCase():"")),Sp=/\B([A-Z])/g,Hi=Ga(t=>t.replace(Sp,"-$1").toLowerCase()),Vd=Ga(t=>t.charAt(0).toUpperCase()+t.slice(1)),bu=Ga(t=>t?`on${Vd(t)}`:""),mn=(t,e)=>!Object.is(t,e),vu=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},$o=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Ap=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Rc;const Jd=()=>Rc||(Rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ml(t){if(ee(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],a=ut(i)?Lp(i):ml(i);if(a)for(const l in a)e[l]=a[l]}return e}else if(ut(t)||je(t))return t}const Rp=/;(?![^(]*\))/g,Dp=/:([^]+)/,Pp=/\/\*[^]*?\*\//g;function Lp(t){const e={};return t.replace(Pp,"").split(Rp).forEach(r=>{if(r){const i=r.split(Dp);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function yl(t){let e="";if(ut(t))e=t;else if(ee(t))for(let r=0;r<t.length;r++){const i=yl(t[r]);i&&(e+=i+" ")}else if(je(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Mp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bp=dl(Mp);function Kd(t){return!!t||t===""}const Fp=t=>ut(t)?t:t==null?"":ee(t)||je(t)&&(t.toString===Qd||!ae(t.toString))?JSON.stringify(t,Hd,2):String(t),Hd=(t,e)=>e&&e.__v_isRef?Hd(t,e.value):yi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,a],l)=>(r[xu(i,l)+" =>"]=a,r),{})}:Ud(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>xu(r))}:Ki(e)?xu(e):je(e)&&!ee(e)&&!jd(e)?String(e):e,xu=(t,e="")=>{var r;return Ki(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let er;class Up{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=er,!e&&er&&(this.index=(er.scopes||(er.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=er;try{return er=this,e()}finally{er=r}}}on(){er=this}off(){er=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function $p(t,e=er){e&&e.active&&e.effects.push(t)}function Qp(){return er}let Gn;class wl{constructor(e,r,i,a){this.fn=e,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,$p(this,a)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Zn();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(jp(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ei()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=dn,r=Gn;try{return dn=!0,Gn=this,this._runnings++,Dc(this),this.fn()}finally{Pc(this),this._runnings--,Gn=r,dn=e}}stop(){var e;this.active&&(Dc(this),Pc(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function jp(t){return t.value}function Dc(t){t._trackId++,t._depsLength=0}function Pc(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Gd(t.deps[e],t);t.deps.length=t._depsLength}}function Gd(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let dn=!0,Ru=0;const zd=[];function Zn(){zd.push(dn),dn=!1}function ei(){const t=zd.pop();dn=t===void 0?!0:t}function Nl(){Ru++}function gl(){for(Ru--;!Ru&&Du.length;)Du.shift()()}function Yd(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&Gd(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Du=[];function Xd(t,e,r){Nl();for(const i of t.keys()){let a;i._dirtyLevel<e&&(a??(a=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(a??(a=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Du.push(i.scheduler)))}gl()}const Zd=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},Pu=new WeakMap,zn=Symbol(""),Lu=Symbol("");function At(t,e,r){if(dn&&Gn){let i=Pu.get(t);i||Pu.set(t,i=new Map);let a=i.get(r);a||i.set(r,a=Zd(()=>i.delete(r))),Yd(Gn,a)}}function Mr(t,e,r,i,a,l){const f=Pu.get(t);if(!f)return;let m=[];if(e==="clear")m=[...f.values()];else if(r==="length"&&ee(t)){const N=Number(i);f.forEach((h,x)=>{(x==="length"||!Ki(x)&&x>=N)&&m.push(h)})}else switch(r!==void 0&&m.push(f.get(r)),e){case"add":ee(t)?pl(r)&&m.push(f.get("length")):(m.push(f.get(zn)),yi(t)&&m.push(f.get(Lu)));break;case"delete":ee(t)||(m.push(f.get(zn)),yi(t)&&m.push(f.get(Lu)));break;case"set":yi(t)&&m.push(f.get(zn));break}Nl();for(const N of m)N&&Xd(N,4);gl()}const Vp=dl("__proto__,__v_isRef,__isVue"),eh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ki)),Lc=Jp();function Jp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=ve(this);for(let l=0,f=this.length;l<f;l++)At(i,"get",l+"");const a=i[e](...r);return a===-1||a===!1?i[e](...r.map(ve)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Zn(),Nl();const i=ve(this)[e].apply(this,r);return gl(),ei(),i}}),t}function Kp(t){const e=ve(this);return At(e,"has",t),e.hasOwnProperty(t)}class th{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,i){const a=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(a?l?om:sh:l?ih:nh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const f=ee(e);if(!a){if(f&&me(Lc,r))return Reflect.get(Lc,r,i);if(r==="hasOwnProperty")return Kp}const m=Reflect.get(e,r,i);return(Ki(r)?eh.has(r):Vp(r))||(a||At(e,"get",r),l)?m:Rt(m)?f&&pl(r)?m:m.value:je(m)?a?oh(m):xl(m):m}}class rh extends th{constructor(e=!1){super(!1,e)}set(e,r,i,a){let l=e[r];if(!this._shallow){const N=Ui(l);if(!Qo(i)&&!Ui(i)&&(l=ve(l),i=ve(i)),!ee(e)&&Rt(l)&&!Rt(i))return N?!1:(l.value=i,!0)}const f=ee(e)&&pl(r)?Number(r)<e.length:me(e,r),m=Reflect.set(e,r,i,a);return e===ve(a)&&(f?mn(i,l)&&Mr(e,"set",r,i):Mr(e,"add",r,i)),m}deleteProperty(e,r){const i=me(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&i&&Mr(e,"delete",r,void 0),a}has(e,r){const i=Reflect.has(e,r);return(!Ki(r)||!eh.has(r))&&At(e,"has",r),i}ownKeys(e){return At(e,"iterate",ee(e)?"length":zn),Reflect.ownKeys(e)}}class Hp extends th{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Gp=new rh,zp=new Hp,Yp=new rh(!0),bl=t=>t,za=t=>Reflect.getPrototypeOf(t);function Co(t,e,r=!1,i=!1){t=t.__v_raw;const a=ve(t),l=ve(e);r||(mn(e,l)&&At(a,"get",e),At(a,"get",l));const{has:f}=za(a),m=i?bl:r?Cl:ks;if(f.call(a,e))return m(t.get(e));if(f.call(a,l))return m(t.get(l));t!==a&&t.get(e)}function _o(t,e=!1){const r=this.__v_raw,i=ve(r),a=ve(t);return e||(mn(t,a)&&At(i,"has",t),At(i,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function qo(t,e=!1){return t=t.__v_raw,!e&&At(ve(t),"iterate",zn),Reflect.get(t,"size",t)}function Mc(t){t=ve(t);const e=ve(this);return za(e).has.call(e,t)||(e.add(t),Mr(e,"add",t,t)),this}function Bc(t,e){e=ve(e);const r=ve(this),{has:i,get:a}=za(r);let l=i.call(r,t);l||(t=ve(t),l=i.call(r,t));const f=a.call(r,t);return r.set(t,e),l?mn(e,f)&&Mr(r,"set",t,e):Mr(r,"add",t,e),this}function Fc(t){const e=ve(this),{has:r,get:i}=za(e);let a=r.call(e,t);a||(t=ve(t),a=r.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return a&&Mr(e,"delete",t,void 0),l}function Uc(){const t=ve(this),e=t.size!==0,r=t.clear();return e&&Mr(t,"clear",void 0,void 0),r}function Wo(t,e){return function(i,a){const l=this,f=l.__v_raw,m=ve(f),N=e?bl:t?Cl:ks;return!t&&At(m,"iterate",zn),f.forEach((h,x)=>i.call(a,N(h),N(x),l))}}function Io(t,e,r){return function(...i){const a=this.__v_raw,l=ve(a),f=yi(l),m=t==="entries"||t===Symbol.iterator&&f,N=t==="keys"&&f,h=a[t](...i),x=r?bl:e?Cl:ks;return!e&&At(l,"iterate",N?Lu:zn),{next(){const{value:q,done:R}=h.next();return R?{value:q,done:R}:{value:m?[x(q[0]),x(q[1])]:x(q),done:R}},[Symbol.iterator](){return this}}}}function Gr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Xp(){const t={get(l){return Co(this,l)},get size(){return qo(this)},has:_o,add:Mc,set:Bc,delete:Fc,clear:Uc,forEach:Wo(!1,!1)},e={get(l){return Co(this,l,!1,!0)},get size(){return qo(this)},has:_o,add:Mc,set:Bc,delete:Fc,clear:Uc,forEach:Wo(!1,!0)},r={get(l){return Co(this,l,!0)},get size(){return qo(this,!0)},has(l){return _o.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:Wo(!0,!1)},i={get(l){return Co(this,l,!0,!0)},get size(){return qo(this,!0)},has(l){return _o.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:Wo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Io(l,!1,!1),r[l]=Io(l,!0,!1),e[l]=Io(l,!1,!0),i[l]=Io(l,!0,!0)}),[t,r,e,i]}const[Zp,em,tm,rm]=Xp();function vl(t,e){const r=e?t?rm:tm:t?em:Zp;return(i,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?i:Reflect.get(me(r,a)&&a in i?r:i,a,l)}const nm={get:vl(!1,!1)},im={get:vl(!1,!0)},sm={get:vl(!0,!1)},nh=new WeakMap,ih=new WeakMap,sh=new WeakMap,om=new WeakMap;function am(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function um(t){return t.__v_skip||!Object.isExtensible(t)?0:am(Tp(t))}function xl(t){return Ui(t)?t:Ol(t,!1,Gp,nm,nh)}function lm(t){return Ol(t,!1,Yp,im,ih)}function oh(t){return Ol(t,!0,zp,sm,sh)}function Ol(t,e,r,i,a){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const f=um(t);if(f===0)return t;const m=new Proxy(t,f===2?i:r);return a.set(t,m),m}function wi(t){return Ui(t)?wi(t.__v_raw):!!(t&&t.__v_isReactive)}function Ui(t){return!!(t&&t.__v_isReadonly)}function Qo(t){return!!(t&&t.__v_isShallow)}function ah(t){return wi(t)||Ui(t)}function ve(t){const e=t&&t.__v_raw;return e?ve(e):t}function uh(t){return Object.isExtensible(t)&&$o(t,"__v_skip",!0),t}const ks=t=>je(t)?xl(t):t,Cl=t=>je(t)?oh(t):t;class lh{constructor(e,r,i,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new wl(()=>e(this._value),()=>Ao(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=i}get value(){const e=ve(this);return(!e._cacheable||e.effect.dirty)&&mn(e._value,e._value=e.effect.run())&&Ao(e,4),ch(e),e.effect._dirtyLevel>=2&&Ao(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function cm(t,e,r=!1){let i,a;const l=ae(t);return l?(i=t,a=Kt):(i=t.get,a=t.set),new lh(i,a,l||!a,r)}function ch(t){var e;dn&&Gn&&(t=ve(t),Yd(Gn,(e=t.dep)!=null?e:t.dep=Zd(()=>t.dep=void 0,t instanceof lh?t:void 0)))}function Ao(t,e=4,r){t=ve(t);const i=t.dep;i&&Xd(i,e)}function Rt(t){return!!(t&&t.__v_isRef===!0)}function dm(t){return hm(t,!1)}function hm(t,e){return Rt(t)?t:new fm(t,e)}class fm{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:ve(e),this._value=r?e:ks(e)}get value(){return ch(this),this._value}set value(e){const r=this.__v_isShallow||Qo(e)||Ui(e);e=r?e:ve(e),mn(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:ks(e),Ao(this,4))}}function dh(t){return Rt(t)?t.value:t}const pm={get:(t,e,r)=>dh(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const a=t[e];return Rt(a)&&!Rt(r)?(a.value=r,!0):Reflect.set(t,e,r,i)}};function hh(t){return wi(t)?t:new Proxy(t,pm)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hn(t,e,r,i){try{return i?t(...i):t()}catch(a){Ya(a,e,r)}}function cr(t,e,r,i){if(ae(t)){const l=hn(t,e,r,i);return l&&$d(l)&&l.catch(f=>{Ya(f,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(cr(t[l],e,r,i));return a}function Ya(t,e,r,i=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const f=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const h=l.ec;if(h){for(let x=0;x<h.length;x++)if(h[x](t,f,m)===!1)return}l=l.parent}const N=e.appContext.config.errorHandler;if(N){hn(N,null,10,[t,f,m]);return}}mm(t,r,a,i)}function mm(t,e,r,i=!0){console.error(t)}let Ss=!1,Mu=!1;const wt=[];let vr=0;const Ni=[];let Yr=null,Tn=0;const fh=Promise.resolve();let _l=null;function ym(t){const e=_l||fh;return t?e.then(this?t.bind(this):t):e}function wm(t){let e=vr+1,r=wt.length;for(;e<r;){const i=e+r>>>1,a=wt[i],l=As(a);l<t||l===t&&a.pre?e=i+1:r=i}return e}function ql(t){(!wt.length||!wt.includes(t,Ss&&t.allowRecurse?vr+1:vr))&&(t.id==null?wt.push(t):wt.splice(wm(t.id),0,t),ph())}function ph(){!Ss&&!Mu&&(Mu=!0,_l=fh.then(yh))}function Nm(t){const e=wt.indexOf(t);e>vr&&wt.splice(e,1)}function gm(t){ee(t)?Ni.push(...t):(!Yr||!Yr.includes(t,t.allowRecurse?Tn+1:Tn))&&Ni.push(t),ph()}function $c(t,e,r=Ss?vr+1:0){for(;r<wt.length;r++){const i=wt[r];if(i&&i.pre){if(t&&i.id!==t.uid)continue;wt.splice(r,1),r--,i()}}}function mh(t){if(Ni.length){const e=[...new Set(Ni)].sort((r,i)=>As(r)-As(i));if(Ni.length=0,Yr){Yr.push(...e);return}for(Yr=e,Tn=0;Tn<Yr.length;Tn++)Yr[Tn]();Yr=null,Tn=0}}const As=t=>t.id==null?1/0:t.id,bm=(t,e)=>{const r=As(t)-As(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function yh(t){Mu=!1,Ss=!0,wt.sort(bm);try{for(vr=0;vr<wt.length;vr++){const e=wt[vr];e&&e.active!==!1&&hn(e,null,14)}}finally{vr=0,wt.length=0,mh(),Ss=!1,_l=null,(wt.length||Ni.length)&&yh()}}function vm(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||Fe;let a=r;const l=e.startsWith("update:"),f=l&&e.slice(7);if(f&&f in i){const x=`${f==="modelValue"?"model":f}Modifiers`,{number:q,trim:R}=i[x]||Fe;R&&(a=r.map(B=>ut(B)?B.trim():B)),q&&(a=r.map(Ap))}let m,N=i[m=bu(e)]||i[m=bu(Fi(e))];!N&&l&&(N=i[m=bu(Hi(e))]),N&&cr(N,t,6,a);const h=i[m+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[m])return;t.emitted[m]=!0,cr(h,t,6,a)}}function wh(t,e,r=!1){const i=e.emitsCache,a=i.get(t);if(a!==void 0)return a;const l=t.emits;let f={},m=!1;if(!ae(t)){const N=h=>{const x=wh(h,e,!0);x&&(m=!0,pt(f,x))};!r&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!l&&!m?(je(t)&&i.set(t,null),null):(ee(l)?l.forEach(N=>f[N]=null):pt(f,l),je(t)&&i.set(t,f),f)}function Xa(t,e){return!t||!Ka(e)?!1:(e=e.slice(2).replace(/Once$/,""),me(t,e[0].toLowerCase()+e.slice(1))||me(t,Hi(e))||me(t,e))}let Or=null,Nh=null;function jo(t){const e=Or;return Or=t,Nh=t&&t.type.__scopeId||null,e}function xm(t,e=Or,r){if(!e||t._n)return t;const i=(...a)=>{i._d&&Xc(-1);const l=jo(e);let f;try{f=t(...a)}finally{jo(l),i._d&&Xc(1)}return f};return i._n=!0,i._c=!0,i._d=!0,i}function Ou(t){const{type:e,vnode:r,proxy:i,withProxy:a,props:l,propsOptions:[f],slots:m,attrs:N,emit:h,render:x,renderCache:q,data:R,setupState:B,ctx:Ne,inheritAttrs:J}=t;let ke,j;const te=jo(t);try{if(r.shapeFlag&4){const Oe=a||i,lt=Oe;ke=br(x.call(lt,Oe,q,l,B,R,Ne)),j=N}else{const Oe=e;ke=br(Oe.length>1?Oe(l,{attrs:N,slots:m,emit:h}):Oe(l,null)),j=e.props?N:Om(N)}}catch(Oe){ws.length=0,Ya(Oe,t,1),ke=Yn(Rs)}let le=ke;if(j&&J!==!1){const Oe=Object.keys(j),{shapeFlag:lt}=le;Oe.length&&lt&7&&(f&&Oe.some(hl)&&(j=Cm(j,f)),le=$i(le,j))}return r.dirs&&(le=$i(le),le.dirs=le.dirs?le.dirs.concat(r.dirs):r.dirs),r.transition&&(le.transition=r.transition),ke=le,jo(te),ke}const Om=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ka(r))&&((e||(e={}))[r]=t[r]);return e},Cm=(t,e)=>{const r={};for(const i in t)(!hl(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function _m(t,e,r){const{props:i,children:a,component:l}=t,{props:f,children:m,patchFlag:N}=e,h=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&N>=0){if(N&1024)return!0;if(N&16)return i?Qc(i,f,h):!!f;if(N&8){const x=e.dynamicProps;for(let q=0;q<x.length;q++){const R=x[q];if(f[R]!==i[R]&&!Xa(h,R))return!0}}}else return(a||m)&&(!m||!m.$stable)?!0:i===f?!1:i?f?Qc(i,f,h):!0:!!f;return!1}function Qc(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let a=0;a<i.length;a++){const l=i[a];if(e[l]!==t[l]&&!Xa(r,l))return!0}return!1}function qm({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const Wm=Symbol.for("v-ndc"),Im=t=>t.__isSuspense;function Em(t,e){e&&e.pendingBranch?ee(t)?e.effects.push(...t):e.effects.push(t):gm(t)}const Tm=Symbol.for("v-scx"),km=()=>Do(Tm),Eo={};function Cu(t,e,r){return gh(t,e,r)}function gh(t,e,{immediate:r,deep:i,flush:a,once:l,onTrack:f,onTrigger:m}=Fe){if(e&&l){const re=e;e=(...Ve)=>{re(...Ve),lt()}}const N=qt,h=re=>i===!0?re:ci(re,i===!1?1:void 0);let x,q=!1,R=!1;if(Rt(t)?(x=()=>t.value,q=Qo(t)):wi(t)?(x=()=>h(t),q=!0):ee(t)?(R=!0,q=t.some(re=>wi(re)||Qo(re)),x=()=>t.map(re=>{if(Rt(re))return re.value;if(wi(re))return h(re);if(ae(re))return hn(re,N,2)})):ae(t)?e?x=()=>hn(t,N,2):x=()=>(B&&B(),cr(t,N,3,[Ne])):x=Kt,e&&i){const re=x;x=()=>ci(re())}let B,Ne=re=>{B=le.onStop=()=>{hn(re,N,4),B=le.onStop=void 0}},J;if(ru)if(Ne=Kt,e?r&&cr(e,N,3,[x(),R?[]:void 0,Ne]):x(),a==="sync"){const re=km();J=re.__watcherHandles||(re.__watcherHandles=[])}else return Kt;let ke=R?new Array(t.length).fill(Eo):Eo;const j=()=>{if(!(!le.active||!le.dirty))if(e){const re=le.run();(i||q||(R?re.some((Ve,Xe)=>mn(Ve,ke[Xe])):mn(re,ke)))&&(B&&B(),cr(e,N,3,[re,ke===Eo?void 0:R&&ke[0]===Eo?[]:ke,Ne]),ke=re)}else le.run()};j.allowRecurse=!!e;let te;a==="sync"?te=j:a==="post"?te=()=>Tt(j,N&&N.suspense):(j.pre=!0,N&&(j.id=N.uid),te=()=>ql(j));const le=new wl(x,Kt,te),Oe=Qp(),lt=()=>{le.stop(),Oe&&fl(Oe.effects,le)};return e?r?j():ke=le.run():a==="post"?Tt(le.run.bind(le),N&&N.suspense):le.run(),J&&J.push(lt),lt}function Sm(t,e,r){const i=this.proxy,a=ut(t)?t.includes(".")?bh(i,t):()=>i[t]:t.bind(i,i);let l;ae(e)?l=e:(l=e.handler,r=e);const f=io(this),m=gh(a,l.bind(i),r);return f(),m}function bh(t,e){const r=e.split(".");return()=>{let i=t;for(let a=0;a<r.length&&i;a++)i=i[r[a]];return i}}function ci(t,e,r=0,i){if(!je(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(i=i||new Set,i.has(t))return t;if(i.add(t),Rt(t))ci(t.value,e,r,i);else if(ee(t))for(let a=0;a<t.length;a++)ci(t[a],e,r,i);else if(Ud(t)||yi(t))t.forEach(a=>{ci(a,e,r,i)});else if(jd(t))for(const a in t)ci(t[a],e,r,i);return t}function Wn(t,e,r,i){const a=t.dirs,l=e&&e.dirs;for(let f=0;f<a.length;f++){const m=a[f];l&&(m.oldValue=l[f].value);let N=m.dir[i];N&&(Zn(),cr(N,r,8,[t.el,m,t,e]),ei())}}/*! #__NO_SIDE_EFFECTS__ */function Am(t,e){return ae(t)?pt({name:t.name},e,{setup:t}):t}const Ro=t=>!!t.type.__asyncLoader,vh=t=>t.type.__isKeepAlive;function Rm(t,e){xh(t,"a",e)}function Dm(t,e){xh(t,"da",e)}function xh(t,e,r=qt){const i=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Za(e,i,r),r){let a=r.parent;for(;a&&a.parent;)vh(a.parent.vnode)&&Pm(i,e,r,a),a=a.parent}}function Pm(t,e,r,i){const a=Za(e,t,i,!0);Oh(()=>{fl(i[e],a)},r)}function Za(t,e,r=qt,i=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...f)=>{if(r.isUnmounted)return;Zn();const m=io(r),N=cr(e,r,t,f);return m(),ei(),N});return i?a.unshift(l):a.push(l),l}}const Qr=t=>(e,r=qt)=>(!ru||t==="sp")&&Za(t,(...i)=>e(...i),r),Lm=Qr("bm"),Mm=Qr("m"),Bm=Qr("bu"),Fm=Qr("u"),Um=Qr("bum"),Oh=Qr("um"),$m=Qr("sp"),Qm=Qr("rtg"),jm=Qr("rtc");function Vm(t,e=qt){Za("ec",t,e)}const Bu=t=>t?Rh(t)?Tl(t)||t.proxy:Bu(t.parent):null,ms=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bu(t.parent),$root:t=>Bu(t.root),$emit:t=>t.emit,$options:t=>Wl(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,ql(t.update)}),$nextTick:t=>t.n||(t.n=ym.bind(t.proxy)),$watch:t=>Sm.bind(t)}),_u=(t,e)=>t!==Fe&&!t.__isScriptSetup&&me(t,e),Jm={get({_:t},e){const{ctx:r,setupState:i,data:a,props:l,accessCache:f,type:m,appContext:N}=t;let h;if(e[0]!=="$"){const B=f[e];if(B!==void 0)switch(B){case 1:return i[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(_u(i,e))return f[e]=1,i[e];if(a!==Fe&&me(a,e))return f[e]=2,a[e];if((h=t.propsOptions[0])&&me(h,e))return f[e]=3,l[e];if(r!==Fe&&me(r,e))return f[e]=4,r[e];Fu&&(f[e]=0)}}const x=ms[e];let q,R;if(x)return e==="$attrs"&&At(t,"get",e),x(t);if((q=m.__cssModules)&&(q=q[e]))return q;if(r!==Fe&&me(r,e))return f[e]=4,r[e];if(R=N.config.globalProperties,me(R,e))return R[e]},set({_:t},e,r){const{data:i,setupState:a,ctx:l}=t;return _u(a,e)?(a[e]=r,!0):i!==Fe&&me(i,e)?(i[e]=r,!0):me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:a,propsOptions:l}},f){let m;return!!r[f]||t!==Fe&&me(t,f)||_u(e,f)||(m=l[0])&&me(m,f)||me(i,f)||me(ms,f)||me(a.config.globalProperties,f)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:me(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function jc(t){return ee(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Fu=!0;function Km(t){const e=Wl(t),r=t.proxy,i=t.ctx;Fu=!1,e.beforeCreate&&Vc(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:f,watch:m,provide:N,inject:h,created:x,beforeMount:q,mounted:R,beforeUpdate:B,updated:Ne,activated:J,deactivated:ke,beforeDestroy:j,beforeUnmount:te,destroyed:le,unmounted:Oe,render:lt,renderTracked:re,renderTriggered:Ve,errorCaptured:Xe,serverPrefetch:jr,expose:qe,inheritAttrs:ye,components:dr,directives:V,filters:We}=e;if(h&&Hm(h,i,null),f)for(const Ae in f){const Ce=f[Ae];ae(Ce)&&(i[Ae]=Ce.bind(r))}if(a){const Ae=a.call(r,r);je(Ae)&&(t.data=xl(Ae))}if(Fu=!0,l)for(const Ae in l){const Ce=l[Ae],hr=ae(Ce)?Ce.bind(r,r):ae(Ce.get)?Ce.get.bind(r,r):Kt,vn=!ae(Ce)&&ae(Ce.set)?Ce.set.bind(r):Kt,qr=Wy({get:hr,set:vn});Object.defineProperty(i,Ae,{enumerable:!0,configurable:!0,get:()=>qr.value,set:st=>qr.value=st})}if(m)for(const Ae in m)Ch(m[Ae],i,r,Ae);if(N){const Ae=ae(N)?N.call(r):N;Reflect.ownKeys(Ae).forEach(Ce=>{ey(Ce,Ae[Ce])})}x&&Vc(x,t,"c");function Ze(Ae,Ce){ee(Ce)?Ce.forEach(hr=>Ae(hr.bind(r))):Ce&&Ae(Ce.bind(r))}if(Ze(Lm,q),Ze(Mm,R),Ze(Bm,B),Ze(Fm,Ne),Ze(Rm,J),Ze(Dm,ke),Ze(Vm,Xe),Ze(jm,re),Ze(Qm,Ve),Ze(Um,te),Ze(Oh,Oe),Ze($m,jr),ee(qe))if(qe.length){const Ae=t.exposed||(t.exposed={});qe.forEach(Ce=>{Object.defineProperty(Ae,Ce,{get:()=>r[Ce],set:hr=>r[Ce]=hr})})}else t.exposed||(t.exposed={});lt&&t.render===Kt&&(t.render=lt),ye!=null&&(t.inheritAttrs=ye),dr&&(t.components=dr),V&&(t.directives=V)}function Hm(t,e,r=Kt){ee(t)&&(t=Uu(t));for(const i in t){const a=t[i];let l;je(a)?"default"in a?l=Do(a.from||i,a.default,!0):l=Do(a.from||i):l=Do(a),Rt(l)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:f=>l.value=f}):e[i]=l}}function Vc(t,e,r){cr(ee(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function Ch(t,e,r,i){const a=i.includes(".")?bh(r,i):()=>r[i];if(ut(t)){const l=e[t];ae(l)&&Cu(a,l)}else if(ae(t))Cu(a,t.bind(r));else if(je(t))if(ee(t))t.forEach(l=>Ch(l,e,r,i));else{const l=ae(t.handler)?t.handler.bind(r):e[t.handler];ae(l)&&Cu(a,l,t)}}function Wl(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:f}}=t.appContext,m=l.get(e);let N;return m?N=m:!a.length&&!r&&!i?N=e:(N={},a.length&&a.forEach(h=>Vo(N,h,f,!0)),Vo(N,e,f)),je(e)&&l.set(e,N),N}function Vo(t,e,r,i=!1){const{mixins:a,extends:l}=e;l&&Vo(t,l,r,!0),a&&a.forEach(f=>Vo(t,f,r,!0));for(const f in e)if(!(i&&f==="expose")){const m=Gm[f]||r&&r[f];t[f]=m?m(t[f],e[f]):e[f]}return t}const Gm={data:Jc,props:Kc,emits:Kc,methods:hs,computed:hs,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:hs,directives:hs,watch:Ym,provide:Jc,inject:zm};function Jc(t,e){return e?t?function(){return pt(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function zm(t,e){return hs(Uu(t),Uu(e))}function Uu(t){if(ee(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function hs(t,e){return t?pt(Object.create(null),t,e):e}function Kc(t,e){return t?ee(t)&&ee(e)?[...new Set([...t,...e])]:pt(Object.create(null),jc(t),jc(e??{})):e}function Ym(t,e){if(!t)return e;if(!e)return t;const r=pt(Object.create(null),t);for(const i in e)r[i]=vt(t[i],e[i]);return r}function _h(){return{app:null,config:{isNativeTag:Ip,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xm=0;function Zm(t,e){return function(i,a=null){ae(i)||(i=pt({},i)),a!=null&&!je(a)&&(a=null);const l=_h(),f=new WeakSet;let m=!1;const N=l.app={_uid:Xm++,_component:i,_props:a,_container:null,_context:l,_instance:null,version:Iy,get config(){return l.config},set config(h){},use(h,...x){return f.has(h)||(h&&ae(h.install)?(f.add(h),h.install(N,...x)):ae(h)&&(f.add(h),h(N,...x))),N},mixin(h){return l.mixins.includes(h)||l.mixins.push(h),N},component(h,x){return x?(l.components[h]=x,N):l.components[h]},directive(h,x){return x?(l.directives[h]=x,N):l.directives[h]},mount(h,x,q){if(!m){const R=Yn(i,a);return R.appContext=l,q===!0?q="svg":q===!1&&(q=void 0),x&&e?e(R,h):t(R,h,q),m=!0,N._container=h,h.__vue_app__=N,Tl(R.component)||R.component.proxy}},unmount(){m&&(t(null,N._container),delete N._container.__vue_app__)},provide(h,x){return l.provides[h]=x,N},runWithContext(h){const x=ys;ys=N;try{return h()}finally{ys=x}}};return N}}let ys=null;function ey(t,e){if(qt){let r=qt.provides;const i=qt.parent&&qt.parent.provides;i===r&&(r=qt.provides=Object.create(i)),r[t]=e}}function Do(t,e,r=!1){const i=qt||Or;if(i||ys){const a=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ys._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&ae(e)?e.call(i&&i.proxy):e}}function ty(t,e,r,i=!1){const a={},l={};$o(l,tu,1),t.propsDefaults=Object.create(null),qh(t,e,a,l);for(const f in t.propsOptions[0])f in a||(a[f]=void 0);r?t.props=i?a:lm(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function ry(t,e,r,i){const{props:a,attrs:l,vnode:{patchFlag:f}}=t,m=ve(a),[N]=t.propsOptions;let h=!1;if((i||f>0)&&!(f&16)){if(f&8){const x=t.vnode.dynamicProps;for(let q=0;q<x.length;q++){let R=x[q];if(Xa(t.emitsOptions,R))continue;const B=e[R];if(N)if(me(l,R))B!==l[R]&&(l[R]=B,h=!0);else{const Ne=Fi(R);a[Ne]=$u(N,m,Ne,B,t,!1)}else B!==l[R]&&(l[R]=B,h=!0)}}}else{qh(t,e,a,l)&&(h=!0);let x;for(const q in m)(!e||!me(e,q)&&((x=Hi(q))===q||!me(e,x)))&&(N?r&&(r[q]!==void 0||r[x]!==void 0)&&(a[q]=$u(N,m,q,void 0,t,!0)):delete a[q]);if(l!==m)for(const q in l)(!e||!me(e,q))&&(delete l[q],h=!0)}h&&Mr(t,"set","$attrs")}function qh(t,e,r,i){const[a,l]=t.propsOptions;let f=!1,m;if(e)for(let N in e){if(ps(N))continue;const h=e[N];let x;a&&me(a,x=Fi(N))?!l||!l.includes(x)?r[x]=h:(m||(m={}))[x]=h:Xa(t.emitsOptions,N)||(!(N in i)||h!==i[N])&&(i[N]=h,f=!0)}if(l){const N=ve(r),h=m||Fe;for(let x=0;x<l.length;x++){const q=l[x];r[q]=$u(a,N,q,h[q],t,!me(h,q))}}return f}function $u(t,e,r,i,a,l){const f=t[r];if(f!=null){const m=me(f,"default");if(m&&i===void 0){const N=f.default;if(f.type!==Function&&!f.skipFactory&&ae(N)){const{propsDefaults:h}=a;if(r in h)i=h[r];else{const x=io(a);i=h[r]=N.call(null,e),x()}}else i=N}f[0]&&(l&&!m?i=!1:f[1]&&(i===""||i===Hi(r))&&(i=!0))}return i}function Wh(t,e,r=!1){const i=e.propsCache,a=i.get(t);if(a)return a;const l=t.props,f={},m=[];let N=!1;if(!ae(t)){const x=q=>{N=!0;const[R,B]=Wh(q,e,!0);pt(f,R),B&&m.push(...B)};!r&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}if(!l&&!N)return je(t)&&i.set(t,mi),mi;if(ee(l))for(let x=0;x<l.length;x++){const q=Fi(l[x]);Hc(q)&&(f[q]=Fe)}else if(l)for(const x in l){const q=Fi(x);if(Hc(q)){const R=l[x],B=f[q]=ee(R)||ae(R)?{type:R}:pt({},R);if(B){const Ne=Yc(Boolean,B.type),J=Yc(String,B.type);B[0]=Ne>-1,B[1]=J<0||Ne<J,(Ne>-1||me(B,"default"))&&m.push(q)}}}const h=[f,m];return je(t)&&i.set(t,h),h}function Hc(t){return t[0]!=="$"&&!ps(t)}function Gc(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function zc(t,e){return Gc(t)===Gc(e)}function Yc(t,e){return ee(e)?e.findIndex(r=>zc(r,t)):ae(e)&&zc(e,t)?0:-1}const Ih=t=>t[0]==="_"||t==="$stable",Il=t=>ee(t)?t.map(br):[br(t)],ny=(t,e,r)=>{if(e._n)return e;const i=xm((...a)=>Il(e(...a)),r);return i._c=!1,i},Eh=(t,e,r)=>{const i=t._ctx;for(const a in t){if(Ih(a))continue;const l=t[a];if(ae(l))e[a]=ny(a,l,i);else if(l!=null){const f=Il(l);e[a]=()=>f}}},Th=(t,e)=>{const r=Il(e);t.slots.default=()=>r},iy=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=ve(e),$o(e,"_",r)):Eh(e,t.slots={})}else t.slots={},e&&Th(t,e);$o(t.slots,tu,1)},sy=(t,e,r)=>{const{vnode:i,slots:a}=t;let l=!0,f=Fe;if(i.shapeFlag&32){const m=e._;m?r&&m===1?l=!1:(pt(a,e),!r&&m===1&&delete a._):(l=!e.$stable,Eh(e,a)),f=e}else e&&(Th(t,e),f={default:1});if(l)for(const m in a)!Ih(m)&&f[m]==null&&delete a[m]};function Qu(t,e,r,i,a=!1){if(ee(t)){t.forEach((R,B)=>Qu(R,e&&(ee(e)?e[B]:e),r,i,a));return}if(Ro(i)&&!a)return;const l=i.shapeFlag&4?Tl(i.component)||i.component.proxy:i.el,f=a?null:l,{i:m,r:N}=t,h=e&&e.r,x=m.refs===Fe?m.refs={}:m.refs,q=m.setupState;if(h!=null&&h!==N&&(ut(h)?(x[h]=null,me(q,h)&&(q[h]=null)):Rt(h)&&(h.value=null)),ae(N))hn(N,m,12,[f,x]);else{const R=ut(N),B=Rt(N);if(R||B){const Ne=()=>{if(t.f){const J=R?me(q,N)?q[N]:x[N]:N.value;a?ee(J)&&fl(J,l):ee(J)?J.includes(l)||J.push(l):R?(x[N]=[l],me(q,N)&&(q[N]=x[N])):(N.value=[l],t.k&&(x[t.k]=N.value))}else R?(x[N]=f,me(q,N)&&(q[N]=f)):B&&(N.value=f,t.k&&(x[t.k]=f))};f?(Ne.id=-1,Tt(Ne,r)):Ne()}}}const Tt=Em;function oy(t){return ay(t)}function ay(t,e){const r=Jd();r.__VUE__=!0;const{insert:i,remove:a,patchProp:l,createElement:f,createText:m,createComment:N,setText:h,setElementText:x,parentNode:q,nextSibling:R,setScopeId:B=Kt,insertStaticContent:Ne}=t,J=(p,w,v,C=null,W=null,D=null,k=void 0,A=null,L=!!w.dynamicChildren)=>{if(p===w)return;p&&!ls(p,w)&&(C=Yt(p),st(p,W,D,!0),p=null),w.patchFlag===-2&&(L=!1,w.dynamicChildren=null);const{type:I,ref:M,shapeFlag:U}=w;switch(I){case eu:ke(p,w,v,C);break;case Rs:j(p,w,v,C);break;case Wu:p==null&&te(w,v,C,k);break;case gr:dr(p,w,v,C,W,D,k,A,L);break;default:U&1?lt(p,w,v,C,W,D,k,A,L):U&6?V(p,w,v,C,W,D,k,A,L):(U&64||U&128)&&I.process(p,w,v,C,W,D,k,A,L,Jr)}M!=null&&W&&Qu(M,p&&p.ref,D,w||p,!w)},ke=(p,w,v,C)=>{if(p==null)i(w.el=m(w.children),v,C);else{const W=w.el=p.el;w.children!==p.children&&h(W,w.children)}},j=(p,w,v,C)=>{p==null?i(w.el=N(w.children||""),v,C):w.el=p.el},te=(p,w,v,C)=>{[p.el,p.anchor]=Ne(p.children,w,v,C,p.el,p.anchor)},le=({el:p,anchor:w},v,C)=>{let W;for(;p&&p!==w;)W=R(p),i(p,v,C),p=W;i(w,v,C)},Oe=({el:p,anchor:w})=>{let v;for(;p&&p!==w;)v=R(p),a(p),p=v;a(w)},lt=(p,w,v,C,W,D,k,A,L)=>{w.type==="svg"?k="svg":w.type==="math"&&(k="mathml"),p==null?re(w,v,C,W,D,k,A,L):jr(p,w,W,D,k,A,L)},re=(p,w,v,C,W,D,k,A)=>{let L,I;const{props:M,shapeFlag:U,transition:$,dirs:K}=p;if(L=p.el=f(p.type,D,M&&M.is,M),U&8?x(L,p.children):U&16&&Xe(p.children,L,null,C,W,qu(p,D),k,A),K&&Wn(p,null,C,"created"),Ve(L,p,p.scopeId,k,C),M){for(const we in M)we!=="value"&&!ps(we)&&l(L,we,null,M[we],D,p.children,C,W,Wt);"value"in M&&l(L,"value",null,M.value,D),(I=M.onVnodeBeforeMount)&&pr(I,C,p)}K&&Wn(p,null,C,"beforeMount");const ne=uy(W,$);ne&&$.beforeEnter(L),i(L,w,v),((I=M&&M.onVnodeMounted)||ne||K)&&Tt(()=>{I&&pr(I,C,p),ne&&$.enter(L),K&&Wn(p,null,C,"mounted")},W)},Ve=(p,w,v,C,W)=>{if(v&&B(p,v),C)for(let D=0;D<C.length;D++)B(p,C[D]);if(W){let D=W.subTree;if(w===D){const k=W.vnode;Ve(p,k,k.scopeId,k.slotScopeIds,W.parent)}}},Xe=(p,w,v,C,W,D,k,A,L=0)=>{for(let I=L;I<p.length;I++){const M=p[I]=A?Xr(p[I]):br(p[I]);J(null,M,w,v,C,W,D,k,A)}},jr=(p,w,v,C,W,D,k)=>{const A=w.el=p.el;let{patchFlag:L,dynamicChildren:I,dirs:M}=w;L|=p.patchFlag&16;const U=p.props||Fe,$=w.props||Fe;let K;if(v&&In(v,!1),(K=$.onVnodeBeforeUpdate)&&pr(K,v,w,p),M&&Wn(w,p,v,"beforeUpdate"),v&&In(v,!0),I?qe(p.dynamicChildren,I,A,v,C,qu(w,W),D):k||Ce(p,w,A,null,v,C,qu(w,W),D,!1),L>0){if(L&16)ye(A,w,U,$,v,C,W);else if(L&2&&U.class!==$.class&&l(A,"class",null,$.class,W),L&4&&l(A,"style",U.style,$.style,W),L&8){const ne=w.dynamicProps;for(let we=0;we<ne.length;we++){const ge=ne[we],Le=U[ge],It=$[ge];(It!==Le||ge==="value")&&l(A,ge,Le,It,W,p.children,v,C,Wt)}}L&1&&p.children!==w.children&&x(A,w.children)}else!k&&I==null&&ye(A,w,U,$,v,C,W);((K=$.onVnodeUpdated)||M)&&Tt(()=>{K&&pr(K,v,w,p),M&&Wn(w,p,v,"updated")},C)},qe=(p,w,v,C,W,D,k)=>{for(let A=0;A<w.length;A++){const L=p[A],I=w[A],M=L.el&&(L.type===gr||!ls(L,I)||L.shapeFlag&70)?q(L.el):v;J(L,I,M,null,C,W,D,k,!0)}},ye=(p,w,v,C,W,D,k)=>{if(v!==C){if(v!==Fe)for(const A in v)!ps(A)&&!(A in C)&&l(p,A,v[A],null,k,w.children,W,D,Wt);for(const A in C){if(ps(A))continue;const L=C[A],I=v[A];L!==I&&A!=="value"&&l(p,A,I,L,k,w.children,W,D,Wt)}"value"in C&&l(p,"value",v.value,C.value,k)}},dr=(p,w,v,C,W,D,k,A,L)=>{const I=w.el=p?p.el:m(""),M=w.anchor=p?p.anchor:m("");let{patchFlag:U,dynamicChildren:$,slotScopeIds:K}=w;K&&(A=A?A.concat(K):K),p==null?(i(I,v,C),i(M,v,C),Xe(w.children||[],v,M,W,D,k,A,L)):U>0&&U&64&&$&&p.dynamicChildren?(qe(p.dynamicChildren,$,v,W,D,k,A),(w.key!=null||W&&w===W.subTree)&&kh(p,w,!0)):Ce(p,w,v,M,W,D,k,A,L)},V=(p,w,v,C,W,D,k,A,L)=>{w.slotScopeIds=A,p==null?w.shapeFlag&512?W.ctx.activate(w,v,C,k,L):We(w,v,C,W,D,k,L):ri(p,w,L)},We=(p,w,v,C,W,D,k)=>{const A=p.component=vy(p,C,W);if(vh(p)&&(A.ctx.renderer=Jr),xy(A),A.asyncDep){if(W&&W.registerDep(A,Ze),!p.el){const L=A.subTree=Yn(Rs);j(null,L,w,v)}}else Ze(A,p,w,v,W,D,k)},ri=(p,w,v)=>{const C=w.component=p.component;if(_m(p,w,v))if(C.asyncDep&&!C.asyncResolved){Ae(C,w,v);return}else C.next=w,Nm(C.update),C.effect.dirty=!0,C.update();else w.el=p.el,C.vnode=w},Ze=(p,w,v,C,W,D,k)=>{const A=()=>{if(p.isMounted){let{next:M,bu:U,u:$,parent:K,vnode:ne}=p;{const Wr=Sh(p);if(Wr){M&&(M.el=ne.el,Ae(p,M,k)),Wr.asyncDep.then(()=>{p.isUnmounted||A()});return}}let we=M,ge;In(p,!1),M?(M.el=ne.el,Ae(p,M,k)):M=ne,U&&vu(U),(ge=M.props&&M.props.onVnodeBeforeUpdate)&&pr(ge,K,M,ne),In(p,!0);const Le=Ou(p),It=p.subTree;p.subTree=Le,J(It,Le,q(It.el),Yt(It),p,W,D),M.el=Le.el,we===null&&qm(p,Le.el),$&&Tt($,W),(ge=M.props&&M.props.onVnodeUpdated)&&Tt(()=>pr(ge,K,M,ne),W)}else{let M;const{el:U,props:$}=w,{bm:K,m:ne,parent:we}=p,ge=Ro(w);if(In(p,!1),K&&vu(K),!ge&&(M=$&&$.onVnodeBeforeMount)&&pr(M,we,w),In(p,!0),U&&Zi){const Le=()=>{p.subTree=Ou(p),Zi(U,p.subTree,p,W,null)};ge?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Le()):Le()}else{const Le=p.subTree=Ou(p);J(null,Le,v,C,p,W,D),w.el=Le.el}if(ne&&Tt(ne,W),!ge&&(M=$&&$.onVnodeMounted)){const Le=w;Tt(()=>pr(M,we,Le),W)}(w.shapeFlag&256||we&&Ro(we.vnode)&&we.vnode.shapeFlag&256)&&p.a&&Tt(p.a,W),p.isMounted=!0,w=v=C=null}},L=p.effect=new wl(A,Kt,()=>ql(I),p.scope),I=p.update=()=>{L.dirty&&L.run()};I.id=p.uid,In(p,!0),I()},Ae=(p,w,v)=>{w.component=p;const C=p.vnode.props;p.vnode=w,p.next=null,ry(p,w.props,C,v),sy(p,w.children,v),Zn(),$c(p),ei()},Ce=(p,w,v,C,W,D,k,A,L=!1)=>{const I=p&&p.children,M=p?p.shapeFlag:0,U=w.children,{patchFlag:$,shapeFlag:K}=w;if($>0){if($&128){vn(I,U,v,C,W,D,k,A,L);return}else if($&256){hr(I,U,v,C,W,D,k,A,L);return}}K&8?(M&16&&Wt(I,W,D),U!==I&&x(v,U)):M&16?K&16?vn(I,U,v,C,W,D,k,A,L):Wt(I,W,D,!0):(M&8&&x(v,""),K&16&&Xe(U,v,C,W,D,k,A,L))},hr=(p,w,v,C,W,D,k,A,L)=>{p=p||mi,w=w||mi;const I=p.length,M=w.length,U=Math.min(I,M);let $;for($=0;$<U;$++){const K=w[$]=L?Xr(w[$]):br(w[$]);J(p[$],K,v,null,W,D,k,A,L)}I>M?Wt(p,W,D,!0,!1,U):Xe(w,v,C,W,D,k,A,L,U)},vn=(p,w,v,C,W,D,k,A,L)=>{let I=0;const M=w.length;let U=p.length-1,$=M-1;for(;I<=U&&I<=$;){const K=p[I],ne=w[I]=L?Xr(w[I]):br(w[I]);if(ls(K,ne))J(K,ne,v,null,W,D,k,A,L);else break;I++}for(;I<=U&&I<=$;){const K=p[U],ne=w[$]=L?Xr(w[$]):br(w[$]);if(ls(K,ne))J(K,ne,v,null,W,D,k,A,L);else break;U--,$--}if(I>U){if(I<=$){const K=$+1,ne=K<M?w[K].el:C;for(;I<=$;)J(null,w[I]=L?Xr(w[I]):br(w[I]),v,ne,W,D,k,A,L),I++}}else if(I>$)for(;I<=U;)st(p[I],W,D,!0),I++;else{const K=I,ne=I,we=new Map;for(I=ne;I<=$;I++){const gt=w[I]=L?Xr(w[I]):br(w[I]);gt.key!=null&&we.set(gt.key,I)}let ge,Le=0;const It=$-ne+1;let Wr=!1,es=0;const xn=new Array(It);for(I=0;I<It;I++)xn[I]=0;for(I=K;I<=U;I++){const gt=p[I];if(Le>=It){st(gt,W,D,!0);continue}let Dt;if(gt.key!=null)Dt=we.get(gt.key);else for(ge=ne;ge<=$;ge++)if(xn[ge-ne]===0&&ls(gt,w[ge])){Dt=ge;break}Dt===void 0?st(gt,W,D,!0):(xn[Dt-ne]=I+1,Dt>=es?es=Dt:Wr=!0,J(gt,w[Dt],v,null,W,D,k,A,L),Le++)}const lo=Wr?ly(xn):mi;for(ge=lo.length-1,I=It-1;I>=0;I--){const gt=ne+I,Dt=w[gt],ie=gt+1<M?w[gt+1].el:C;xn[I]===0?J(null,Dt,v,ie,W,D,k,A,L):Wr&&(ge<0||I!==lo[ge]?qr(Dt,v,ie,2):ge--)}}},qr=(p,w,v,C,W=null)=>{const{el:D,type:k,transition:A,children:L,shapeFlag:I}=p;if(I&6){qr(p.component.subTree,w,v,C);return}if(I&128){p.suspense.move(w,v,C);return}if(I&64){k.move(p,w,v,Jr);return}if(k===gr){i(D,w,v);for(let U=0;U<L.length;U++)qr(L[U],w,v,C);i(p.anchor,w,v);return}if(k===Wu){le(p,w,v);return}if(C!==2&&I&1&&A)if(C===0)A.beforeEnter(D),i(D,w,v),Tt(()=>A.enter(D),W);else{const{leave:U,delayLeave:$,afterLeave:K}=A,ne=()=>i(D,w,v),we=()=>{U(D,()=>{ne(),K&&K()})};$?$(D,ne,we):we()}else i(D,w,v)},st=(p,w,v,C=!1,W=!1)=>{const{type:D,props:k,ref:A,children:L,dynamicChildren:I,shapeFlag:M,patchFlag:U,dirs:$}=p;if(A!=null&&Qu(A,null,v,p,!0),M&256){w.ctx.deactivate(p);return}const K=M&1&&$,ne=!Ro(p);let we;if(ne&&(we=k&&k.onVnodeBeforeUnmount)&&pr(we,w,p),M&6)uo(p.component,v,C);else{if(M&128){p.suspense.unmount(v,C);return}K&&Wn(p,null,w,"beforeUnmount"),M&64?p.type.remove(p,w,v,W,Jr,C):I&&(D!==gr||U>0&&U&64)?Wt(I,w,v,!1,!0):(D===gr&&U&384||!W&&M&16)&&Wt(L,w,v),C&&Vr(p)}(ne&&(we=k&&k.onVnodeUnmounted)||K)&&Tt(()=>{we&&pr(we,w,p),K&&Wn(p,null,w,"unmounted")},v)},Vr=p=>{const{type:w,el:v,anchor:C,transition:W}=p;if(w===gr){zt(v,C);return}if(w===Wu){Oe(p);return}const D=()=>{a(v),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(p.shapeFlag&1&&W&&!W.persisted){const{leave:k,delayLeave:A}=W,L=()=>k(v,D);A?A(p.el,D,L):L()}else D()},zt=(p,w)=>{let v;for(;p!==w;)v=R(p),a(p),p=v;a(w)},uo=(p,w,v)=>{const{bum:C,scope:W,update:D,subTree:k,um:A}=p;C&&vu(C),W.stop(),D&&(D.active=!1,st(k,p,w,v)),A&&Tt(A,w),Tt(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Wt=(p,w,v,C=!1,W=!1,D=0)=>{for(let k=D;k<p.length;k++)st(p[k],w,v,C,W)},Yt=p=>p.shapeFlag&6?Yt(p.component.subTree):p.shapeFlag&128?p.suspense.next():R(p.anchor||p.el);let ni=!1;const Xi=(p,w,v)=>{p==null?w._vnode&&st(w._vnode,null,null,!0):J(w._vnode||null,p,w,null,null,null,v),ni||(ni=!0,$c(),mh(),ni=!1),w._vnode=p},Jr={p:J,um:st,m:qr,r:Vr,mt:We,mc:Xe,pc:Ce,pbc:qe,n:Yt,o:t};let ii,Zi;return e&&([ii,Zi]=e(Jr)),{render:Xi,hydrate:ii,createApp:Zm(Xi,ii)}}function qu({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function In({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function uy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function kh(t,e,r=!1){const i=t.children,a=e.children;if(ee(i)&&ee(a))for(let l=0;l<i.length;l++){const f=i[l];let m=a[l];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=a[l]=Xr(a[l]),m.el=f.el),r||kh(f,m)),m.type===eu&&(m.el=f.el)}}function ly(t){const e=t.slice(),r=[0];let i,a,l,f,m;const N=t.length;for(i=0;i<N;i++){const h=t[i];if(h!==0){if(a=r[r.length-1],t[a]<h){e[i]=a,r.push(i);continue}for(l=0,f=r.length-1;l<f;)m=l+f>>1,t[r[m]]<h?l=m+1:f=m;h<t[r[l]]&&(l>0&&(e[i]=r[l-1]),r[l]=i)}}for(l=r.length,f=r[l-1];l-- >0;)r[l]=f,f=e[f];return r}function Sh(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Sh(e)}const cy=t=>t.__isTeleport,gr=Symbol.for("v-fgt"),eu=Symbol.for("v-txt"),Rs=Symbol.for("v-cmt"),Wu=Symbol.for("v-stc"),ws=[];let lr=null;function dy(t=!1){ws.push(lr=t?null:[])}function hy(){ws.pop(),lr=ws[ws.length-1]||null}let Ds=1;function Xc(t){Ds+=t}function fy(t){return t.dynamicChildren=Ds>0?lr||mi:null,hy(),Ds>0&&lr&&lr.push(t),t}function py(t,e,r,i,a,l){return fy(rt(t,e,r,i,a,l,!0))}function my(t){return t?t.__v_isVNode===!0:!1}function ls(t,e){return t.type===e.type&&t.key===e.key}const tu="__vInternal",Ah=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ut(t)||Rt(t)||ae(t)?{i:Or,r:t,k:e,f:!!r}:t:null);function rt(t,e=null,r=null,i=0,a=null,l=t===gr?0:1,f=!1,m=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ah(e),ref:e&&Po(e),scopeId:Nh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Or};return m?(El(N,r),l&128&&t.normalize(N)):r&&(N.shapeFlag|=ut(r)?8:16),Ds>0&&!f&&lr&&(N.patchFlag>0||l&6)&&N.patchFlag!==32&&lr.push(N),N}const Yn=yy;function yy(t,e=null,r=null,i=0,a=null,l=!1){if((!t||t===Wm)&&(t=Rs),my(t)){const m=$i(t,e,!0);return r&&El(m,r),Ds>0&&!l&&lr&&(m.shapeFlag&6?lr[lr.indexOf(t)]=m:lr.push(m)),m.patchFlag|=-2,m}if(qy(t)&&(t=t.__vccOpts),e){e=wy(e);let{class:m,style:N}=e;m&&!ut(m)&&(e.class=yl(m)),je(N)&&(ah(N)&&!ee(N)&&(N=pt({},N)),e.style=ml(N))}const f=ut(t)?1:Im(t)?128:cy(t)?64:je(t)?4:ae(t)?2:0;return rt(t,e,r,i,a,f,l,!0)}function wy(t){return t?ah(t)||tu in t?pt({},t):t:null}function $i(t,e,r=!1){const{props:i,ref:a,patchFlag:l,children:f}=t,m=e?Ny(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&Ah(m),ref:e&&e.ref?r&&a?ee(a)?a.concat(Po(e)):[a,Po(e)]:Po(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$i(t.ssContent),ssFallback:t.ssFallback&&$i(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ps(t=" ",e=0){return Yn(eu,null,t,e)}function br(t){return t==null||typeof t=="boolean"?Yn(Rs):ee(t)?Yn(gr,null,t.slice()):typeof t=="object"?Xr(t):Yn(eu,null,String(t))}function Xr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$i(t)}function El(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ee(e))r=16;else if(typeof e=="object")if(i&65){const a=e.default;a&&(a._c&&(a._d=!1),El(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(tu in e)?e._ctx=Or:a===3&&Or&&(Or.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:Or},r=32):(e=String(e),i&64?(r=16,e=[Ps(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ny(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const a in i)if(a==="class")e.class!==i.class&&(e.class=yl([e.class,i.class]));else if(a==="style")e.style=ml([e.style,i.style]);else if(Ka(a)){const l=e[a],f=i[a];f&&l!==f&&!(ee(l)&&l.includes(f))&&(e[a]=l?[].concat(l,f):f)}else a!==""&&(e[a]=i[a])}return e}function pr(t,e,r,i=null){cr(t,e,7,[r,i])}const gy=_h();let by=0;function vy(t,e,r){const i=t.type,a=(e?e.appContext:t.appContext)||gy,l={uid:by++,vnode:t,type:i,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wh(i,a),emitsOptions:wh(i,a),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:i.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=vm.bind(null,l),t.ce&&t.ce(l),l}let qt=null,Jo,ju;{const t=Jd(),e=(r,i)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(i),l=>{a.length>1?a.forEach(f=>f(l)):a[0](l)}};Jo=e("__VUE_INSTANCE_SETTERS__",r=>qt=r),ju=e("__VUE_SSR_SETTERS__",r=>ru=r)}const io=t=>{const e=qt;return Jo(t),t.scope.on(),()=>{t.scope.off(),Jo(e)}},Zc=()=>{qt&&qt.scope.off(),Jo(null)};function Rh(t){return t.vnode.shapeFlag&4}let ru=!1;function xy(t,e=!1){e&&ju(e);const{props:r,children:i}=t.vnode,a=Rh(t);ty(t,r,a,e),iy(t,i);const l=a?Oy(t,e):void 0;return e&&ju(!1),l}function Oy(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=uh(new Proxy(t.ctx,Jm));const{setup:i}=r;if(i){const a=t.setupContext=i.length>1?_y(t):null,l=io(t);Zn();const f=hn(i,t,0,[t.props,a]);if(ei(),l(),$d(f)){if(f.then(Zc,Zc),e)return f.then(m=>{ed(t,m,e)}).catch(m=>{Ya(m,t,0)});t.asyncDep=f}else ed(t,f,e)}else Dh(t,e)}function ed(t,e,r){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=hh(e)),Dh(t,r)}let td;function Dh(t,e,r){const i=t.type;if(!t.render){if(!e&&td&&!i.render){const a=i.template||Wl(t).template;if(a){const{isCustomElement:l,compilerOptions:f}=t.appContext.config,{delimiters:m,compilerOptions:N}=i,h=pt(pt({isCustomElement:l,delimiters:m},f),N);i.render=td(a,h)}}t.render=i.render||Kt}{const a=io(t);Zn();try{Km(t)}finally{ei(),a()}}}function Cy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return At(t,"get","$attrs"),e[r]}}))}function _y(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Cy(t)},slots:t.slots,emit:t.emit,expose:e}}function Tl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hh(uh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ms)return ms[r](t)},has(e,r){return r in e||r in ms}}))}function qy(t){return ae(t)&&"__vccOpts"in t}const Wy=(t,e)=>cm(t,e,ru),Iy="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ey="http://www.w3.org/2000/svg",Ty="http://www.w3.org/1998/Math/MathML",Zr=typeof document<"u"?document:null,rd=Zr&&Zr.createElement("template"),ky={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const a=e==="svg"?Zr.createElementNS(Ey,t):e==="mathml"?Zr.createElementNS(Ty,t):Zr.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:t=>Zr.createTextNode(t),createComment:t=>Zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,a,l){const f=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{rd.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const m=rd.content;if(i==="svg"||i==="mathml"){const N=m.firstChild;for(;N.firstChild;)m.appendChild(N.firstChild);m.removeChild(N)}e.insertBefore(m,r)}return[f?f.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Sy=Symbol("_vtc");function Ay(t,e,r){const i=t[Sy];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const nd=Symbol("_vod"),Ry=Symbol(""),Dy=/(^|;)\s*display\s*:/;function Py(t,e,r){const i=t.style,a=ut(r),l=i.display;let f=!1;if(r&&!a){if(e&&!ut(e))for(const m in e)r[m]==null&&Vu(i,m,"");for(const m in r)m==="display"&&(f=!0),Vu(i,m,r[m])}else if(a){if(e!==r){const m=i[Ry];m&&(r+=";"+m),i.cssText=r,f=Dy.test(r)}}else e&&t.removeAttribute("style");nd in t&&(t[nd]=f?i.display:"",i.display=l)}const id=/\s*!important$/;function Vu(t,e,r){if(ee(r))r.forEach(i=>Vu(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Ly(t,e);id.test(r)?t.setProperty(Hi(i),r.replace(id,""),"important"):t[i]=r}}const sd=["Webkit","Moz","ms"],Iu={};function Ly(t,e){const r=Iu[e];if(r)return r;let i=Fi(e);if(i!=="filter"&&i in t)return Iu[e]=i;i=Vd(i);for(let a=0;a<sd.length;a++){const l=sd[a]+i;if(l in t)return Iu[e]=l}return e}const od="http://www.w3.org/1999/xlink";function My(t,e,r,i,a){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(od,e.slice(6,e.length)):t.setAttributeNS(od,e,r);else{const l=Bp(e);r==null||l&&!Kd(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function By(t,e,r,i,a,l,f){if(e==="innerHTML"||e==="textContent"){i&&f(i,a,l),t[e]=r??"";return}const m=t.tagName;if(e==="value"&&m!=="PROGRESS"&&!m.includes("-")){t._value=r;const h=m==="OPTION"?t.getAttribute("value"):t.value,x=r??"";h!==x&&(t.value=x),r==null&&t.removeAttribute(e);return}let N=!1;if(r===""||r==null){const h=typeof t[e];h==="boolean"?r=Kd(r):r==null&&h==="string"?(r="",N=!0):h==="number"&&(r=0,N=!0)}try{t[e]=r}catch{}N&&t.removeAttribute(e)}function Fy(t,e,r,i){t.addEventListener(e,r,i)}function Uy(t,e,r,i){t.removeEventListener(e,r,i)}const ad=Symbol("_vei");function $y(t,e,r,i,a=null){const l=t[ad]||(t[ad]={}),f=l[e];if(i&&f)f.value=i;else{const[m,N]=Qy(e);if(i){const h=l[e]=Jy(i,a);Fy(t,m,h,N)}else f&&(Uy(t,m,f,N),l[e]=void 0)}}const ud=/(?:Once|Passive|Capture)$/;function Qy(t){let e;if(ud.test(t)){e={};let i;for(;i=t.match(ud);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Hi(t.slice(2)),e]}let Eu=0;const jy=Promise.resolve(),Vy=()=>Eu||(jy.then(()=>Eu=0),Eu=Date.now());function Jy(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;cr(Ky(i,r.value),e,5,[i])};return r.value=t,r.attached=Vy(),r}function Ky(t,e){if(ee(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>a=>!a._stopped&&i&&i(a))}else return e}const ld=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Hy=(t,e,r,i,a,l,f,m,N)=>{const h=a==="svg";e==="class"?Ay(t,i,h):e==="style"?Py(t,r,i):Ka(e)?hl(e)||$y(t,e,r,i,f):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gy(t,e,i,h))?By(t,e,i,l,f,m,N):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),My(t,e,i,h))};function Gy(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&ld(e)&&ae(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return ld(e)&&ut(r)?!1:e in t}const zy=pt({patchProp:Hy},ky);let cd;function Yy(){return cd||(cd=oy(zy))}const Xy=(...t)=>{const e=Yy().createApp(...t),{mount:r}=e;return e.mount=i=>{const a=ew(i);if(!a)return;const l=e._component;!ae(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const f=r(a,!1,Zy(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),f},e};function Zy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ew(t){return ut(t)?document.querySelector(t):t}function Xn(t){return typeof t>"u"||t===void 0}function Gt(t){return typeof t=="string"}function Ph(t){return typeof t=="number"}function Ko(t){return typeof t=="boolean"}function kl(t){return t===null}function tw(t){return t instanceof Date}function rw(t){return typeof t=="bigint"}function Qt(t){return typeof t=="function"}function xr(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function To(t){return Br(t)?t:[t]}function Br(t){return Array.isArray(t)}function fn(t){return t}const Te=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Ue=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}}),Tr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}}),Lh=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),nw=["preserve rows","delete rows","drop"],Lt=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}}),yn=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:Ue.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:Ue.create(t),identifier:Ue.create(e)})}}),Ns=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:yn.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ju=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ku=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}}),bn=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}}),pn=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:yn.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:yn.createWithSchema(t,e)})}});function jt(t){return xr(t)&&Qt(t.toOperationNode)}function iw(t){return xr(t)&&"expressionType"in t&&jt(t)}function sw(t){return xr(t)&&"expression"in t&&Gt(t.alias)&&jt(t)}const Er=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}}),wn=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}}),Gi=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}}),Tu=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?wn.create(t.on,r):Gi.create(t.on,r)})}}),gs=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Tu.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Tu.cloneWithOperation(t.on,"And",e):Tu.create(e)})}}),Qi=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),ow=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],aw=["+","-","*","/","%","^","&","|","#","<<",">>"],Mh=["->","->>"],uw=[...ow,...aw,"&&","||"],lw=["exists","not exists"],cw=["not","-",...lw],dw=[...uw,...Mh,...cw,"between","between symmetric"],Nn=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function dd(t){return Gt(t)&&Mh.includes(t)}const He=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:Ue.create(t)})}}),Sl=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}}),nu=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Sl.create()})}});var bi;class hw{constructor(e){_(this,bi,void 0);S(this,bi,e)}get dynamicReference(){return s(this,bi)}get refType(){}toOperationNode(){return Qh(s(this,bi))}}bi=new WeakMap;function Bh(t){return xr(t)&&jt(t)&&Gt(t.dynamicReference)}const Hu=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}}),yt=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return yt.create([t],[])},createWithChild(t){return yt.create(["",""],[t])},createWithChildren(t){return yt.create(new Array(t.length+1).fill(""),t)}});function Fh(t){return t==="asc"||t==="desc"}function iu(t){if(t.length===2)return[ku(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>ku(r)):[ku(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function ku(t,e){const r=fw(t);if(Hu.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Hu.create(r,Uh(e))}function fw(t){if(ao(t))return ti(t);if(Bh(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!Fh(r))throw new Error(`Invalid order by direction: ${r}`);return Hu.create(Fr(e),Uh(r))}return Fr(t)}function Uh(t){if(t)return t==="asc"||t==="desc"?yt.createWithSql(t):t.toOperationNode()}const Ho=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}}),$h=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}}),bs=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function Qh(t){return Gt(t)?Fr(t):t.toOperationNode()}function Ls(t){return Br(t)?t.map(e=>Ht(e)):[Ht(t)]}function Ht(t){return ao(t)?ti(t):Qh(t)}function pw(t,e){const r=Fr(t);if(dd(e))return Ho.create(r,$h.create(Nn.create(e)));const i=e.slice(0,-1);if(dd(i))return Ho.create(r,bs.create(Nn.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Fr(t){const e=".";if(!t.includes(e))return nu.create(He.create(t));const r=t.split(e).map(Al);if(r.length===3)return yw(r);if(r.length===2)return ww(r);throw new Error(`invalid column reference ${t}`)}function mw(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Al);return bn.create(Fr(r),Ue.create(i))}else return Fr(t)}function jh(t){return He.create(t)}function Go(t){const e=" ";if(t.includes(e)){const[r,i]=t.split(e).map(Al);if(!Fh(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return iu([r,i])[0]}else return jh(t)}function yw(t){const[e,r,i]=t;return nu.create(He.create(i),pn.createWithSchema(e,r))}function ww(t){const[e,r]=t;return nu.create(He.create(r),pn.create(e))}function Al(t){return t.trim()}const Vh=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}}),Rl=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}}),Ur=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Nw(t){return Br(t)?gw(t):it(t)}function it(t){return ao(t)?ti(t):Ur.create(t)}function Dl(t){return Ph(t)||Ko(t)||kl(t)}function Pl(t){if(!Dl(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Ur.createImmediate(t)}function gw(t){return t.some(ao)?Rl.create(t.map(e=>it(e))):Vh.create(t)}const ji=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function Nt(t){if(t.length===3)return Ll(t[0],t[1],t[2]);if(t.length===1)return it(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Ll(t,e,r){return bw(e)&&Jh(r)?Qi.create(Ht(t),zu(e),Ur.createImmediate(r)):Qi.create(Ht(t),zu(e),Nw(r))}function $r(t,e,r){return Qi.create(Ht(t),zu(e),Ht(r))}function hd(t,e){return Gu(Object.entries(t).filter(([,r])=>!Xn(r)).map(([r,i])=>Ll(r,Jh(i)?"is":"=",i)),e)}function Gu(t,e){const r=e==="and"?wn.create:Gi.create;if(t.length===0)return Qi.create(Ur.createImmediate(1),Nn.create("="),Ur.createImmediate(e==="and"?1:0));let i=fd(t[0]);for(let a=1;a<t.length;++a)i=r(i,fd(t[a]));return t.length>1?ji.create(i):i}function bw(t){return t==="is"||t==="is not"}function Jh(t){return kl(t)||Ko(t)}function zu(t){if(Gt(t)&&dw.includes(t))return Nn.create(t);if(jt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function fd(t){return jt(t)?t.toOperationNode():t}const Vi=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),pd=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Yu=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?pd.cloneWithItems(t.partitionBy,e):pd.create(e)})}}),zo=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}}),md=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),yd=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?wn.create(t.having,r):Gi.create(t.having,r)})}}),he=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:zo.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?md.cloneWithItems(t.groupBy,e):md.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithHaving(t,e){return c({...t,having:t.having?yd.cloneWithOperation(t.having,"And",e):yd.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});function de(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var rr;const Cs=class Cs{constructor(e){_(this,rr,void 0);S(this,rr,c(e))}on(...e){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,Nt(e))})}onRef(e,r,i){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,$r(e,r,i))})}onTrue(){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,yt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return s(this,rr).joinNode}};rr=new WeakMap;let Yo=Cs;de(Yo,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const vw=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function xw(t){return Ls(t).map(vw.create)}var Pn;const _a=class _a{constructor(e){_(this,Pn,void 0);S(this,Pn,c(e))}orderBy(e,r){return new _a({overNode:Yu.cloneWithOrderByItems(s(this,Pn).overNode,iu([e,r]))})}partitionBy(e){return new _a({overNode:Yu.cloneWithPartitionByItems(s(this,Pn).overNode,xw(e))})}$call(e){return e(this)}toOperationNode(){return s(this,Pn).overNode}};Pn=new WeakMap;let Xo=_a;de(Xo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const vs=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Sl.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:nu.createSelectAll(t)})}});function zi(t){return Qt(t)?zi(t(Yi())):Br(t)?t.map(e=>wd(e)):[wd(t)]}function wd(t){return Gt(t)?vs.create(mw(t)):Bh(t)?vs.create(t.toOperationNode()):vs.create(uf(t))}function so(t){return t?Array.isArray(t)?t.map(Nd):[Nd(t)]:[vs.createSelectAll()]}function Nd(t){if(Gt(t))return vs.createSelectAllFromTable(Ke(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Ow=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}}),Cw=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function _w(t){const e=Qt(t)?t(Yi()):t,r=Br(e)?e:c([e]);return qw(r)}function qw(t){const e=Ww(t);return[c([...e.keys()].map(He.create)),Ow.create(t.map(r=>Iw(r,e)))]}function Ww(t){const e=new Map;for(const r of t){const i=Object.keys(r);for(const a of i)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Iw(t,e){const r=Object.keys(t),i=Array.from({length:e.size});let a=!1;for(const f of r){const m=e.get(f);if(Xn(m))continue;const N=t[f];(Xn(N)||ao(N))&&(a=!0),i[m]=N}if(r.length<e.size||a){const f=Cw.create();return Rl.create(i.map(m=>Xn(m)?f:it(m)))}return Vh.create(i)}const ur=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return c({...t,...e})}}),Zo=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return c({...t,from:t.from?zo.cloneWithFroms(t.from,e):zo.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})}}),gd=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}}),xs=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:zo.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?gd.cloneWithTables(t.using,e):gd.create(e)})}}),kt=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?wn.create(t.where,r):Gi.create(t.where,r)})}}),bd=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}}),Ew=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}}),ce=c({is(t){return he.is(t)||ur.is(t)||Zo.is(t)||xs.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?kt.cloneWithOperation(t.where,"And",e):kt.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?bd.cloneWithSelections(t.returning,e):bd.create(e)})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Ew.create(e,r?.toOperationNode())})}}),Kh=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function Tw(...t){return t.length===2?[Kh.create(Ht(t[0]),it(t[1]))]:Ml(t[0])}function Ml(t){const e=Qt(t)?t(Yi()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Kh.create(He.create(r),it(i)))}const kw=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});class Sw{constructor(e,r){Z(this,"insertId");Z(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class su extends Error{constructor(r){super("no result");Z(this,"node");this.node=r}}function ou(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const $t=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?kt.cloneWithOperation(t.indexWhere,"And",e):kt.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?kt.cloneWithOperation(t.indexWhere,"Or",e):kt.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?kt.cloneWithOperation(t.updateWhere,"And",e):kt.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?kt.cloneWithOperation(t.updateWhere,"Or",e):kt.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var De;const kr=class kr{constructor(e){_(this,De,void 0);S(this,De,c(e))}column(e){const r=He.create(e);return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{columns:s(this,De).onConflictNode.columns?c([...s(this,De).onConflictNode.columns,r]):c([r])})})}columns(e){const r=e.map(He.create);return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{columns:s(this,De).onConflictNode.columns?c([...s(this,De).onConflictNode.columns,...r]):c(r)})})}constraint(e){return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{constraint:Ue.create(e)})})}expression(e){return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new kr({...s(this,De),onConflictNode:$t.cloneWithIndexWhere(s(this,De).onConflictNode,Nt(e))})}whereRef(e,r,i){return new kr({...s(this,De),onConflictNode:$t.cloneWithIndexWhere(s(this,De).onConflictNode,$r(e,r,i))})}clearWhere(){return new kr({...s(this,De),onConflictNode:$t.cloneWithoutIndexWhere(s(this,De).onConflictNode)})}doNothing(){return new Hh({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ta({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{updates:Ml(e)})})}$call(e){return e(this)}};De=new WeakMap;let ea=kr;de(ea,"don't await OnConflictBuilder instances.");var js;class Hh{constructor(e){_(this,js,void 0);S(this,js,c(e))}toOperationNode(){return s(this,js).onConflictNode}}js=new WeakMap;de(Hh,"don't await OnConflictDoNothingBuilder instances.");var nr;const _s=class _s{constructor(e){_(this,nr,void 0);S(this,nr,c(e))}where(...e){return new _s({...s(this,nr),onConflictNode:$t.cloneWithUpdateWhere(s(this,nr).onConflictNode,Nt(e))})}whereRef(e,r,i){return new _s({...s(this,nr),onConflictNode:$t.cloneWithUpdateWhere(s(this,nr).onConflictNode,$r(e,r,i))})}clearWhere(){return new _s({...s(this,nr),onConflictNode:$t.cloneWithoutUpdateWhere(s(this,nr).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return s(this,nr).onConflictNode}};nr=new WeakMap;let ta=_s;de(ta,"don't await OnConflictUpdateBuilder instances.");var oe;const ct=class ct{constructor(e){_(this,oe,void 0);S(this,oe,c(e))}values(e){const[r,i]=_w(e);return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{columns:r,values:i})})}columns(e){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{columns:c(e.map(He.create))})})}expression(e){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{values:ti(e)})})}defaultValues(){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{defaultValues:!0})})}ignore(){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{ignore:!0})})}onConflict(e){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{onConflict:e(new ea({onConflictNode:$t.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ct({...s(this,oe),queryNode:ur.cloneWith(s(this,oe).queryNode,{onDuplicateKey:kw.create(Ml(e))})})}returning(e){return new ct({...s(this,oe),queryNode:ce.cloneWithReturning(s(this,oe).queryNode,zi(e))})}returningAll(){return new ct({...s(this,oe),queryNode:ce.cloneWithReturning(s(this,oe).queryNode,so())})}$call(e){return e(this)}$if(e,r){return e?r(this):new ct({...s(this,oe)})}$castTo(){return new ct(s(this,oe))}$narrowType(){return new ct(s(this,oe))}$assertType(){return new ct(s(this,oe))}withPlugin(e){return new ct({...s(this,oe),executor:s(this,oe).executor.withPlugin(e)})}toOperationNode(){return s(this,oe).executor.transformQuery(s(this,oe).queryNode,s(this,oe).queryId)}compile(){return s(this,oe).executor.compileQuery(this.toOperationNode(),s(this,oe).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,oe).executor.executeQuery(e,s(this,oe).queryId);return s(this,oe).executor.adapter.supportsReturning&&r.returning?i.rows:[new Sw(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,oe).executor.stream(r,e,s(this,oe).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new ct({...s(this,oe),queryNode:ce.cloneWithExplain(s(this,oe).queryNode,e,r)}).execute()}};oe=new WeakMap;let Ms=ct;de(Ms,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Aw{constructor(e){Z(this,"numDeletedRows");this.numDeletedRows=e}}const Gh=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var G;const ze=class ze{constructor(e){_(this,G,void 0);S(this,G,c(e))}where(...e){return new ze({...s(this,G),queryNode:ce.cloneWithWhere(s(this,G).queryNode,Nt(e))})}whereRef(e,r,i){return new ze({...s(this,G),queryNode:ce.cloneWithWhere(s(this,G).queryNode,$r(e,r,i))})}clearWhere(){return new ze({...s(this,G),queryNode:ce.cloneWithoutWhere(s(this,G).queryNode)})}using(e){return new ze({...s(this,G),queryNode:xs.cloneWithUsing(s(this,G).queryNode,Bs(e))})}innerJoin(...e){return new ze({...s(this,G),queryNode:ce.cloneWithJoin(s(this,G).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new ze({...s(this,G),queryNode:ce.cloneWithJoin(s(this,G).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new ze({...s(this,G),queryNode:ce.cloneWithJoin(s(this,G).queryNode,St("RightJoin",e))})}fullJoin(...e){return new ze({...s(this,G),queryNode:ce.cloneWithJoin(s(this,G).queryNode,St("FullJoin",e))})}returning(e){return new ze({...s(this,G),queryNode:ce.cloneWithReturning(s(this,G).queryNode,zi(e))})}returningAll(e){return new ze({...s(this,G),queryNode:ce.cloneWithReturning(s(this,G).queryNode,so(e))})}orderBy(e,r){return new ze({...s(this,G),queryNode:xs.cloneWithOrderByItems(s(this,G).queryNode,iu([e,r]))})}limit(e){return new ze({...s(this,G),queryNode:xs.cloneWithLimit(s(this,G).queryNode,Gh.create(it(e)))})}$call(e){return e(this)}$if(e,r){return e?r(this):new ze({...s(this,G)})}$castTo(){return new ze(s(this,G))}$narrowType(){return new ze(s(this,G))}$assertType(){return new ze(s(this,G))}withPlugin(e){return new ze({...s(this,G),executor:s(this,G).executor.withPlugin(e)})}toOperationNode(){return s(this,G).executor.transformQuery(s(this,G).queryNode,s(this,G).queryId)}compile(){return s(this,G).executor.compileQuery(this.toOperationNode(),s(this,G).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,G).executor.executeQuery(e,s(this,G).queryId);return s(this,G).executor.adapter.supportsReturning&&r.returning?i.rows:[new Aw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,G).executor.stream(r,e,s(this,G).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new ze({...s(this,G),queryNode:ce.cloneWithExplain(s(this,G).queryNode,e,r)}).execute()}};G=new WeakMap;let ra=ze;de(ra,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Rw{constructor(e,r){Z(this,"numUpdatedRows");Z(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var X;const et=class et{constructor(e){_(this,X,void 0);S(this,X,c(e))}where(...e){return new et({...s(this,X),queryNode:ce.cloneWithWhere(s(this,X).queryNode,Nt(e))})}whereRef(e,r,i){return new et({...s(this,X),queryNode:ce.cloneWithWhere(s(this,X).queryNode,$r(e,r,i))})}clearWhere(){return new et({...s(this,X),queryNode:ce.cloneWithoutWhere(s(this,X).queryNode)})}from(e){return new et({...s(this,X),queryNode:Zo.cloneWithFromItems(s(this,X).queryNode,Bs(e))})}innerJoin(...e){return new et({...s(this,X),queryNode:ce.cloneWithJoin(s(this,X).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new et({...s(this,X),queryNode:ce.cloneWithJoin(s(this,X).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new et({...s(this,X),queryNode:ce.cloneWithJoin(s(this,X).queryNode,St("RightJoin",e))})}fullJoin(...e){return new et({...s(this,X),queryNode:ce.cloneWithJoin(s(this,X).queryNode,St("FullJoin",e))})}set(...e){return new et({...s(this,X),queryNode:Zo.cloneWithUpdates(s(this,X).queryNode,Tw(...e))})}returning(e){return new et({...s(this,X),queryNode:ce.cloneWithReturning(s(this,X).queryNode,zi(e))})}returningAll(){return new et({...s(this,X),queryNode:ce.cloneWithReturning(s(this,X).queryNode,so())})}$call(e){return e(this)}$if(e,r){return e?r(this):new et({...s(this,X)})}$castTo(){return new et(s(this,X))}$narrowType(){return new et(s(this,X))}$assertType(){return new et(s(this,X))}withPlugin(e){return new et({...s(this,X),executor:s(this,X).executor.withPlugin(e)})}toOperationNode(){return s(this,X).executor.transformQuery(s(this,X).queryNode,s(this,X).queryId)}compile(){return s(this,X).executor.compileQuery(this.toOperationNode(),s(this,X).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,X).executor.executeQuery(e,s(this,X).queryId);return s(this,X).executor.adapter.supportsReturning&&r.returning?i.rows:[new Rw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0),i.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,X).executor.stream(r,e,s(this,X).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new et({...s(this,X),queryNode:ce.cloneWithExplain(s(this,X).queryNode,e,r)}).execute()}};X=new WeakMap;let na=et;de(na,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const vd=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:pn.create(t),columns:e?c(e.map(He.create)):void 0})}}),ia=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var Sr;const qa=class qa{constructor(e){_(this,Sr,void 0);S(this,Sr,c(e))}materialized(){return new qa({...s(this,Sr),node:ia.cloneWith(s(this,Sr).node,{materialized:!0})})}notMaterialized(){return new qa({...s(this,Sr),node:ia.cloneWith(s(this,Sr).node,{materialized:!1})})}toOperationNode(){return s(this,Sr).node}};Sr=new WeakMap;let sa=qa;de(sa,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function xd(t,e){const r=e(jw()).toOperationNode();return Qt(t)?t(Dw(r)).toOperationNode():ia.create(zh(t),r)}function Dw(t){return e=>new sa({node:ia.create(zh(e),t)})}function zh(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(a=>a.trim());return vd.create(r,i)}else return vd.create(t)}const ko=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}}),Od=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Pw(t){let e="";for(let r=0;r<t;++r)e+=Lw();return e}function Lw(){return Od[~~(Math.random()*Od.length)]}function Se(){return new Mw}var vi;class Mw{constructor(){_(this,vi,void 0)}get queryId(){return s(this,vi)===void 0&&S(this,vi,Pw(8)),s(this,vi)}}vi=new WeakMap;var Wa;class Bl{constructor(){Z(this,"nodeStack",[]);_(this,Wa,c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),AddIndexNode:this.transformAddIndex.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return s(this,Wa)[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Wa=new WeakMap;const Bw=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var xi,Ln,Mn,Ia,Yh,Ea,Xh,Ta,Zh,Bn,fs,Vs,Xu,ka,ef;class Fw extends Bl{constructor(r){super();_(this,Ia);_(this,Ea);_(this,Ta);_(this,Bn);_(this,Vs);_(this,ka);_(this,xi,void 0);_(this,Ln,new Set);_(this,Mn,new Set);S(this,xi,r)}transformNodeImpl(r){if(!xe(this,Ia,Yh).call(this,r))return super.transformNodeImpl(r);const i=xe(this,Ta,Zh).call(this,r);for(const f of i)s(this,Mn).add(f);const a=xe(this,Ea,Xh).call(this,r);for(const f of a)s(this,Ln).add(f);const l=super.transformNodeImpl(r);for(const f of a)s(this,Ln).delete(f);for(const f of i)s(this,Mn).delete(f);return l}transformSchemableIdentifier(r){const i=super.transformSchemableIdentifier(r);return i.schema||!s(this,Ln).has(r.identifier.name)?i:{...i,schema:Ue.create(s(this,xi))}}transformReferences(r){const i=super.transformReferences(r);return i.table.table.schema?i:{...i,table:pn.createWithSchema(s(this,xi),i.table.table.identifier.name)}}}xi=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Ia=new WeakSet,Yh=function(r){return r.kind in Bw},Ea=new WeakSet,Xh=function(r){const i=new Set;if("name"in r&&r.name&&yn.is(r.name)&&xe(this,Vs,Xu).call(this,r.name,i),"from"in r&&r.from)for(const a of r.from.froms)xe(this,Bn,fs).call(this,a,i);if("into"in r&&r.into&&xe(this,Bn,fs).call(this,r.into,i),"table"in r&&r.table&&xe(this,Bn,fs).call(this,r.table,i),"joins"in r&&r.joins)for(const a of r.joins)xe(this,Bn,fs).call(this,a.table,i);return i},Ta=new WeakSet,Zh=function(r){const i=new Set;return"with"in r&&r.with&&xe(this,ka,ef).call(this,r.with,i),i},Bn=new WeakSet,fs=function(r,i){const a=pn.is(r)?r:bn.is(r)&&pn.is(r.node)?r.node:null;a&&xe(this,Vs,Xu).call(this,a.table,i)},Vs=new WeakSet,Xu=function(r,i){const a=r.identifier.name;!s(this,Ln).has(a)&&!s(this,Mn).has(a)&&i.add(a)},ka=new WeakSet,ef=function(r,i){for(const a of r.expressions){const l=a.name.table.table.identifier.name;s(this,Mn).has(l)||i.add(l)}};var Js;class oo{constructor(e){_(this,Js,void 0);S(this,Js,new Fw(e))}transformQuery(e){return s(this,Js).transformNode(e.node)}async transformResult(e){return e.result}}Js=new WeakMap;var Ie;const kn=class kn{constructor(e){_(this,Ie,void 0);S(this,Ie,c(e))}selectFrom(e){return rl({queryId:Se(),executor:s(this,Ie).executor,queryNode:he.createFrom(Bs(e),s(this,Ie).withNode)})}selectNoFrom(e){return rl({queryId:Se(),executor:s(this,Ie).executor,queryNode:he.cloneWithSelections(he.create(s(this,Ie).withNode),zi(e))})}insertInto(e){return new Ms({queryId:Se(),executor:s(this,Ie).executor,queryNode:ur.create(Ke(e),s(this,Ie).withNode)})}replaceInto(e){return new Ms({queryId:Se(),executor:s(this,Ie).executor,queryNode:ur.create(Ke(e),s(this,Ie).withNode,!0)})}deleteFrom(e){return new ra({queryId:Se(),executor:s(this,Ie).executor,queryNode:xs.create(Bs(e),s(this,Ie).withNode)})}updateTable(e){return new na({queryId:Se(),executor:s(this,Ie).executor,queryNode:Zo.create(Fs(e),s(this,Ie).withNode)})}with(e,r){const i=xd(e,r);return new kn({...s(this,Ie),withNode:s(this,Ie).withNode?ko.cloneWithExpression(s(this,Ie).withNode,i):ko.create(i)})}withRecursive(e,r){const i=xd(e,r);return new kn({...s(this,Ie),withNode:s(this,Ie).withNode?ko.cloneWithExpression(s(this,Ie).withNode,i):ko.create(i,{recursive:!0})})}withPlugin(e){return new kn({...s(this,Ie),executor:s(this,Ie).executor.withPlugin(e)})}withoutPlugins(){return new kn({...s(this,Ie),executor:s(this,Ie).executor.withoutPlugins()})}withSchema(e){return new kn({...s(this,Ie),executor:s(this,Ie).executor.withPluginAtFront(new oo(e))})}};Ie=new WeakMap;let oa=kn;var Ks,Oi,Ci;class Cd{constructor(){_(this,Ks,void 0);_(this,Oi,void 0);_(this,Ci,void 0);Z(this,"resolve",e=>{s(this,Oi)&&s(this,Oi).call(this,e)});Z(this,"reject",e=>{s(this,Ci)&&s(this,Ci).call(this,e)});S(this,Ks,new Promise((e,r)=>{S(this,Ci,r),S(this,Oi,e)}))}get promise(){return s(this,Ks)}}Ks=new WeakMap,Oi=new WeakMap,Ci=new WeakMap;const _d=new Set;function Uw(t){_d.has(t)||(_d.add(t),console.log(t))}const $w=c([]);var Fn,Hs,Zu;class tf{constructor(e=$w){_(this,Hs);_(this,Fn,void 0);S(this,Fn,e)}get plugins(){return s(this,Fn)}transformQuery(e,r){for(const i of s(this,Fn)){const a=i.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{const a=await i.executeQuery(e),l=await xe(this,Hs,Zu).call(this,a,r);return Qw(a,l),l})}async*stream(e,r,i){const a=new Cd,l=new Cd;this.provideConnection(async m=>(a.resolve(m),await l.promise)).catch(m=>a.reject(m));const f=await a.promise;try{for await(const m of f.streamQuery(e,r))yield await xe(this,Hs,Zu).call(this,m,i)}finally{l.resolve()}}}Fn=new WeakMap,Hs=new WeakSet,Zu=async function(e,r){for(const i of s(this,Fn))e=await i.transformResult({result:e,queryId:r});return e};function Qw(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Uw("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class di extends tf{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new di([...this.plugins,e])}withPlugins(e){return new di([...this.plugins,...e])}withPluginAtFront(e){return new di([e,...this.plugins])}withoutPlugins(){return new di([])}}const Fl=new di;function jw(){return new oa({executor:Fl})}function Vw(t,e){return new Yo({joinNode:gs.create(t,Fs(e))})}function Jw(){return new Xo({overNode:Yu.create()})}function St(t,e){if(e.length===3)return Hw(t,e[0],e[1],e[2]);if(e.length===2)return Kw(t,e[0],e[1]);throw new Error("not implemented")}function Kw(t,e,r){return r(Vw(t,e)).toOperationNode()}function Hw(t,e,r,i){return gs.createWithOn(t,Fs(e),$r(r,"=",i))}const Gw=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}}),zw=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function Yw(t){return t=Qt(t)?t(Yi()):t,Ls(t).map(zw.create)}const rf=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function ui(t,e,r){return Qt(e)&&(e=e(Ql())),Br(e)||(e=[e]),e.map(i=>rf.create(t,ti(i),r))}var Ar;const Sa=class Sa{constructor(e){_(this,Ar,void 0);S(this,Ar,e)}get expressionType(){}as(e){return new Ul(this,e)}or(...e){return new el(Gi.create(s(this,Ar),Nt(e)))}and(...e){return new tl(wn.create(s(this,Ar),Nt(e)))}$castTo(){return new Sa(s(this,Ar))}$notNull(){return new Sa(s(this,Ar))}toOperationNode(){return s(this,Ar)}};Ar=new WeakMap;let Be=Sa;var _i,sn;class Ul{constructor(e,r){_(this,_i,void 0);_(this,sn,void 0);S(this,_i,e),S(this,sn,r)}get expression(){return s(this,_i)}get alias(){return s(this,sn)}toOperationNode(){return bn.create(s(this,_i).toOperationNode(),jt(s(this,sn))?s(this,sn).toOperationNode():Ue.create(s(this,sn)))}}_i=new WeakMap,sn=new WeakMap;var Un;const Aa=class Aa{constructor(e){_(this,Un,void 0);S(this,Un,e)}get expressionType(){}as(e){return new Ul(this,e)}or(...e){return new Aa(Gi.create(s(this,Un),Nt(e)))}$castTo(){return new Aa(s(this,Un))}toOperationNode(){return ji.create(s(this,Un))}};Un=new WeakMap;let el=Aa;var $n;const Ra=class Ra{constructor(e){_(this,$n,void 0);S(this,$n,e)}get expressionType(){}as(e){return new Ul(this,e)}and(...e){return new Ra(wn.create(s(this,$n),Nt(e)))}$castTo(){return new Ra(s(this,$n))}toOperationNode(){return ji.create(s(this,$n))}};$n=new WeakMap;let tl=Ra;var T;const Y=class Y{constructor(e){_(this,T,void 0);S(this,T,c(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new Y({...s(this,T),queryNode:ce.cloneWithWhere(s(this,T).queryNode,Nt(e))})}whereRef(e,r,i){return new Y({...s(this,T),queryNode:ce.cloneWithWhere(s(this,T).queryNode,$r(e,r,i))})}having(...e){return new Y({...s(this,T),queryNode:he.cloneWithHaving(s(this,T).queryNode,Nt(e))})}havingRef(e,r,i){return new Y({...s(this,T),queryNode:he.cloneWithHaving(s(this,T).queryNode,$r(e,r,i))})}select(e){return new Y({...s(this,T),queryNode:he.cloneWithSelections(s(this,T).queryNode,zi(e))})}distinctOn(e){return new Y({...s(this,T),queryNode:he.cloneWithDistinctOn(s(this,T).queryNode,Ls(e))})}modifyFront(e){return new Y({...s(this,T),queryNode:he.cloneWithFrontModifier(s(this,T).queryNode,Er.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.createWithExpression(e.toOperationNode()))})}distinct(){return new Y({...s(this,T),queryNode:he.cloneWithFrontModifier(s(this,T).queryNode,Er.create("Distinct"))})}forUpdate(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForUpdate",e?To(e).map(Ke):void 0))})}forShare(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForShare",e?To(e).map(Ke):void 0))})}forKeyShare(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForKeyShare",e?To(e).map(Ke):void 0))})}forNoKeyUpdate(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForNoKeyUpdate",e?To(e).map(Ke):void 0))})}skipLocked(){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("SkipLocked"))})}noWait(){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Er.create("NoWait"))})}selectAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSelections(s(this,T).queryNode,so(e))})}innerJoin(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("RightJoin",e))})}fullJoin(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("FullJoin",e))})}innerJoinLateral(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("LateralInnerJoin",e))})}leftJoinLateral(...e){return new Y({...s(this,T),queryNode:ce.cloneWithJoin(s(this,T).queryNode,St("LateralLeftJoin",e))})}orderBy(...e){return new Y({...s(this,T),queryNode:he.cloneWithOrderByItems(s(this,T).queryNode,iu(e))})}groupBy(e){return new Y({...s(this,T),queryNode:he.cloneWithGroupByItems(s(this,T).queryNode,Yw(e))})}limit(e){return new Y({...s(this,T),queryNode:he.cloneWithLimit(s(this,T).queryNode,Gh.create(it(e)))})}offset(e){return new Y({...s(this,T),queryNode:he.cloneWithOffset(s(this,T).queryNode,Gw.create(it(e)))})}union(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("union",e,!1))})}unionAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("union",e,!0))})}intersect(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("intersect",e,!1))})}intersectAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("intersect",e,!0))})}except(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("except",e,!1))})}exceptAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("except",e,!0))})}as(e){return new nf(this,e)}clearSelect(){return new Y({...s(this,T),queryNode:he.cloneWithoutSelections(s(this,T).queryNode)})}clearWhere(){return new Y({...s(this,T),queryNode:ce.cloneWithoutWhere(s(this,T).queryNode)})}clearLimit(){return new Y({...s(this,T),queryNode:he.cloneWithoutLimit(s(this,T).queryNode)})}clearOffset(){return new Y({...s(this,T),queryNode:he.cloneWithoutOffset(s(this,T).queryNode)})}clearOrderBy(){return new Y({...s(this,T),queryNode:he.cloneWithoutOrderBy(s(this,T).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new Y({...s(this,T)})}$castTo(){return new Y(s(this,T))}$narrowType(){return new Y(s(this,T))}$assertType(){return new Y(s(this,T))}$asTuple(){return new Be(this.toOperationNode())}withPlugin(e){return new Y({...s(this,T),executor:s(this,T).executor.withPlugin(e)})}toOperationNode(){return s(this,T).executor.transformQuery(s(this,T).queryNode,s(this,T).queryId)}compile(){return s(this,T).executor.compileQuery(this.toOperationNode(),s(this,T).queryId)}async execute(){const e=this.compile();return(await s(this,T).executor.executeQuery(e,s(this,T).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,T).executor.stream(r,e,s(this,T).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new Y({...s(this,T),queryNode:ce.cloneWithExplain(s(this,T).queryNode,e,r)}).execute()}};T=new WeakMap;let aa=Y;de(aa,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function rl(t){return new aa(t)}var qi,Wi;class nf{constructor(e,r){_(this,qi,void 0);_(this,Wi,void 0);S(this,qi,e),S(this,Wi,r)}get expression(){return s(this,qi)}get alias(){return s(this,Wi)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return bn.create(s(this,qi).toOperationNode(),Ue.create(s(this,Wi)))}}qi=new WeakMap,Wi=new WeakMap;de(nf,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Dn=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?kt.cloneWithOperation(t.filter,"And",e):kt.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?kt.cloneWithOperation(t.filter,"Or",e):kt.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}}),qd=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var xt;const tn=class tn{constructor(e){_(this,xt,void 0);S(this,xt,c(e))}get expressionType(){}as(e){return new Xw(this,e)}distinct(){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithDistinct(s(this,xt).aggregateFunctionNode)})}filterWhere(...e){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,Nt(e))})}filterWhereRef(e,r,i){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,$r(e,r,i))})}over(e){const r=Jw();return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithOver(s(this,xt).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new tn(s(this,xt))}$notNull(){return new tn(s(this,xt))}toOperationNode(){return s(this,xt).aggregateFunctionNode}};xt=new WeakMap;let gi=tn;de(gi,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Ii,Ei;class Xw{constructor(e,r){_(this,Ii,void 0);_(this,Ei,void 0);S(this,Ii,e),S(this,Ei,r)}get expression(){return s(this,Ii)}get alias(){return s(this,Ei)}toOperationNode(){return bn.create(s(this,Ii).toOperationNode(),Ue.create(s(this,Ei)))}}Ii=new WeakMap,Ei=new WeakMap;function sf(){const t=(r,i)=>new Be(qd.create(r,Ls(i??[]))),e=(r,i)=>new gi({aggregateFunctionNode:Dn.create(r,i?Ls(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new gi({aggregateFunctionNode:Dn.create("count",so(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new gi({aggregateFunctionNode:Dn.create("json_agg",[Gt(r)?Ke(r):r.toOperationNode()])})},toJson(r){return new Be(qd.create("to_json",[Gt(r)?Ke(r):r.toOperationNode()]))}})}const Zw=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function eN(t,e){return Zw.create(Nn.create(t),Ht(e))}const $l=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}}),Cr=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),$l.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var Ti;class of{constructor(e){_(this,Ti,void 0);S(this,Ti,c(e))}when(...e){return new af({...s(this,Ti),node:Cr.cloneWithWhen(s(this,Ti).node,$l.create(Nt(e)))})}}Ti=new WeakMap;var ki;class af{constructor(e){_(this,ki,void 0);S(this,ki,c(e))}then(e){return new tN({...s(this,ki),node:Cr.cloneWithThen(s(this,ki).node,Dl(e)?Pl(e):it(e))})}}ki=new WeakMap;var mr;class tN{constructor(e){_(this,mr,void 0);S(this,mr,c(e))}when(...e){return new af({...s(this,mr),node:Cr.cloneWithWhen(s(this,mr).node,$l.create(Nt(e)))})}else(e){return new rN({...s(this,mr),node:Cr.cloneWith(s(this,mr).node,{else:Dl(e)?Pl(e):it(e)})})}end(){return new Be(Cr.cloneWith(s(this,mr).node,{isStatement:!1}))}endCase(){return new Be(Cr.cloneWith(s(this,mr).node,{isStatement:!0}))}}mr=new WeakMap;var Si;class rN{constructor(e){_(this,Si,void 0);S(this,Si,c(e))}end(){return new Be(Cr.cloneWith(s(this,Si).node,{isStatement:!1}))}endCase(){return new Be(Cr.cloneWith(s(this,Si).node,{isStatement:!0}))}}Si=new WeakMap;const Wd=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var yr,Gs,nl;class Os{constructor(e){_(this,Gs);_(this,yr,void 0);S(this,yr,e)}at(e){return xe(this,Gs,nl).call(this,"ArrayLocation",e)}key(e){return xe(this,Gs,nl).call(this,"Member",e)}}yr=new WeakMap,Gs=new WeakSet,nl=function(e,r){return Ho.is(s(this,yr))?new Id(Ho.cloneWithTraversal(s(this,yr),bs.is(s(this,yr).traversal)?bs.cloneWithLeg(s(this,yr).traversal,Wd.create(e,r)):$h.cloneWithValue(s(this,yr).traversal,Ur.createImmediate(r)))):new Id(bs.cloneWithLeg(s(this,yr),Wd.create(e,r)))};var Qn;class Id extends Os{constructor(r){super(r);_(this,Qn,void 0);S(this,Qn,r)}get expressionType(){}as(r){return new nN(this,r)}$castTo(){return new Os(s(this,Qn))}$notNull(){return new Os(s(this,Qn))}toOperationNode(){return s(this,Qn)}}Qn=new WeakMap;var Ai,on;class nN{constructor(e,r){_(this,Ai,void 0);_(this,on,void 0);S(this,Ai,e),S(this,on,r)}get expression(){return s(this,Ai)}get alias(){return s(this,on)}toOperationNode(){return bn.create(s(this,Ai).toOperationNode(),jt(s(this,on))?s(this,on).toOperationNode():Ue.create(s(this,on)))}}Ai=new WeakMap,on=new WeakMap;const Ed=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}});function Ql(t=Fl){function e(a,l,f){return new Be(Ll(a,l,f))}function r(a,l){return new Be(eN(a,l))}const i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return rl({queryId:Se(),executor:t,queryNode:he.createFrom(Bs(a))})},case(a){return new of({node:Cr.create(Xn(a)?void 0:Ht(a))})},ref(a,l){return Xn(l)?new Be(Fr(a)):new Os(pw(a,l))},jsonPath(){return new Os(bs.create())},table(a){return new Be(Ke(a))},val(a){return new Be(it(a))},refTuple(...a){return new Be(Ed.create(a.map(Ht)))},tuple(...a){return new Be(Ed.create(a.map(it)))},lit(a){return new Be(Pl(a))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,f){return new Be(Qi.create(Ht(a),Nn.create("between"),wn.create(it(l),it(f))))},betweenSymmetric(a,l,f){return new Be(Qi.create(Ht(a),Nn.create("between symmetric"),wn.create(it(l),it(f))))},and(a){return Br(a)?new Be(Gu(a,"and")):new Be(hd(a,"and"))},or(a){return Br(a)?new Be(Gu(a,"or")):new Be(hd(a,"or"))},parens(...a){const l=Nt(a);return ji.is(l)?new Be(l):new Be(ji.create(l))},withSchema(a){return Ql(t.withPluginAtFront(new oo(a)))}});return i.fn=sf(),i.eb=i,i}function Yi(t){return Ql()}function ti(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Yi()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function uf(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Yi()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ao(t){return iw(t)||sw(t)||Qt(t)}function Bs(t){return Br(t)?t.map(e=>Fs(e)):[Fs(t)]}function Fs(t){return Gt(t)?iN(t):uf(t)}function iN(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(lf);return bn.create(Ke(r),Ue.create(i))}else return Ke(t)}function Ke(t){const e=".";if(t.includes(e)){const[r,i]=t.split(e).map(lf);return pn.createWithSchema(r,i)}else return pn.create(t)}function lf(t){return t.trim()}const cf=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}}),Qe=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:He.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}}),df=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:He.create(t)})}}),hf=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:He.create(t),renameTo:He.create(e)})}}),jl=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?Ue.create(e):void 0})}}),sN=["no action","restrict","cascade","set null","set default"],Lo=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function ff(t){return jt(t)?t.toOperationNode():Ur.createImmediate(t)}const So=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}}),oN=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function ua(t){if(sN.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ee;const tt=class tt{constructor(e){_(this,Ee,void 0);S(this,Ee,e)}autoIncrement(){return new tt(Qe.cloneWith(s(this,Ee),{autoIncrement:!0}))}primaryKey(){return new tt(Qe.cloneWith(s(this,Ee),{primaryKey:!0}))}references(e){const r=Fr(e);if(!r.table||Sl.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new tt(Qe.cloneWith(s(this,Ee),{references:Lo.create(r.table,[r.column])}))}onDelete(e){if(!s(this,Ee).references)throw new Error("on delete constraint can only be added for foreign keys");return new tt(Qe.cloneWith(s(this,Ee),{references:Lo.cloneWithOnDelete(s(this,Ee).references,ua(e))}))}onUpdate(e){if(!s(this,Ee).references)throw new Error("on update constraint can only be added for foreign keys");return new tt(Qe.cloneWith(s(this,Ee),{references:Lo.cloneWithOnUpdate(s(this,Ee).references,ua(e))}))}unique(){return new tt(Qe.cloneWith(s(this,Ee),{unique:!0}))}notNull(){return new tt(Qe.cloneWith(s(this,Ee),{notNull:!0}))}unsigned(){return new tt(Qe.cloneWith(s(this,Ee),{unsigned:!0}))}defaultTo(e){return new tt(Qe.cloneWith(s(this,Ee),{defaultTo:oN.create(ff(e))}))}check(e){return new tt(Qe.cloneWith(s(this,Ee),{check:jl.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new tt(Qe.cloneWith(s(this,Ee),{generated:So.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new tt(Qe.cloneWith(s(this,Ee),{generated:So.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new tt(Qe.cloneWith(s(this,Ee),{generated:So.create({identity:!0,byDefault:!0})}))}stored(){if(!s(this,Ee).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new tt(Qe.cloneWith(s(this,Ee),{generated:So.cloneWith(s(this,Ee).generated,{stored:!0})}))}modifyFront(e){return new tt(Qe.cloneWithFrontModifier(s(this,Ee),e.toOperationNode()))}nullsNotDistinct(){return new tt(Qe.cloneWith(s(this,Ee),{nullsNotDistinct:!0}))}modifyEnd(e){return new tt(Qe.cloneWithEndModifier(s(this,Ee),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return s(this,Ee)}};Ee=new WeakMap;let gn=tt;de(gn,"don't await ColumnDefinitionBuilder instances directly.");const pf=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}}),aN=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function Ji(t){return jt(t)?t.toOperationNode():aN.create(t)}const la=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Lo.create(e,r),name:i?Ue.create(i):void 0})},cloneWith(t,e){return c({...t,...e})}});var jn;const Da=class Da{constructor(e){_(this,jn,void 0);S(this,jn,e)}onDelete(e){return new Da(la.cloneWith(s(this,jn),{onDelete:ua(e)}))}onUpdate(e){return new Da(la.cloneWith(s(this,jn),{onUpdate:ua(e)}))}$call(e){return e(this)}toOperationNode(){return s(this,jn)}};jn=new WeakMap;let Us=Da;de(Us,"don't await ForeignKeyConstraintBuilder instances directly.");const Mo=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}}),Vl=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(He.create)),name:e?Ue.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}}),Bo=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})}}),cs=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:He.create(t),[e]:r})}});var Rr;class Jl{constructor(e){_(this,Rr,void 0);S(this,Rr,e)}setDataType(e){return new ds(cs.create(s(this,Rr),"dataType",Ji(e)))}setDefault(e){return new ds(cs.create(s(this,Rr),"setDefault",ff(e)))}dropDefault(){return new ds(cs.create(s(this,Rr),"dropDefault",!0))}setNotNull(){return new ds(cs.create(s(this,Rr),"setNotNull",!0))}dropNotNull(){return new ds(cs.create(s(this,Rr),"dropNotNull",!0))}$call(e){return e(this)}}Rr=new WeakMap;var zs;class ds{constructor(e){_(this,zs,void 0);S(this,zs,e)}toOperationNode(){return s(this,zs)}}zs=new WeakMap;var ir;class En{constructor(e){_(this,ir,void 0);S(this,ir,c(e))}toOperationNode(){return s(this,ir).executor.transformQuery(s(this,ir).node,s(this,ir).queryId)}compile(){return s(this,ir).executor.compileQuery(this.toOperationNode(),s(this,ir).queryId)}async execute(){await s(this,ir).executor.executeQuery(this.compile(),s(this,ir).queryId)}}ir=new WeakMap;de(En,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var mt;const Pa=class Pa{constructor(e){_(this,mt,void 0);S(this,mt,c(e))}onDelete(e){return new Pa({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Pa({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return s(this,mt).executor.transformQuery(Te.cloneWithTableProps(s(this,mt).node,{addConstraint:Mo.create(s(this,mt).constraintBuilder.toOperationNode())}),s(this,mt).queryId)}compile(){return s(this,mt).executor.compileQuery(this.toOperationNode(),s(this,mt).queryId)}async execute(){await s(this,mt).executor.executeQuery(this.compile(),s(this,mt).queryId)}};mt=new WeakMap;let ca=Pa;de(ca,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ye;const qs=class qs{constructor(e){_(this,Ye,void 0);S(this,Ye,c(e))}ifExists(){return new qs({...s(this,Ye),node:Te.cloneWithTableProps(s(this,Ye).node,{dropConstraint:Bo.cloneWith(s(this,Ye).node.dropConstraint,{ifExists:!0})})})}cascade(){return new qs({...s(this,Ye),node:Te.cloneWithTableProps(s(this,Ye).node,{dropConstraint:Bo.cloneWith(s(this,Ye).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new qs({...s(this,Ye),node:Te.cloneWithTableProps(s(this,Ye).node,{dropConstraint:Bo.cloneWith(s(this,Ye).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return s(this,Ye).executor.transformQuery(s(this,Ye).node,s(this,Ye).queryId)}compile(){return s(this,Ye).executor.compileQuery(this.toOperationNode(),s(this,Ye).queryId)}async execute(){await s(this,Ye).executor.executeQuery(this.compile(),s(this,Ye).queryId)}};Ye=new WeakMap;let da=qs;de(da,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const mf=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(He.create)),name:e?Ue.create(e):void 0})}}),li=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var Pe;const Sn=class Sn{constructor(e){_(this,Pe,void 0);S(this,Pe,c(e))}unique(){return new Sn({...s(this,Pe),node:Te.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWith(s(this,Pe).node.addIndex,{unique:!0})})})}column(e){return new Sn({...s(this,Pe),node:Te.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,[Go(e)])})})}columns(e){return new Sn({...s(this,Pe),node:Te.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,e.map(Go))})})}expression(e){return new Sn({...s(this,Pe),node:Te.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,[e.toOperationNode()])})})}using(e){return new Sn({...s(this,Pe),node:Te.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWith(s(this,Pe).node.addIndex,{using:yt.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return s(this,Pe).executor.transformQuery(s(this,Pe).node,s(this,Pe).queryId)}compile(){return s(this,Pe).executor.compileQuery(this.toOperationNode(),s(this,Pe).queryId)}async execute(){await s(this,Pe).executor.executeQuery(this.compile(),s(this,Pe).queryId)}};Pe=new WeakMap;let ha=Sn;de(ha,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");var Ri;const Hl=class Hl{constructor(e){_(this,Ri,void 0);S(this,Ri,e)}toOperationNode(){return s(this,Ri)}nullsNotDistinct(){return new Hl(Vl.cloneWith(s(this,Ri),{nullsNotDistinct:!0}))}};Ri=new WeakMap;let $s=Hl;de($s,"don't await UniqueConstraintNodeBuilder instances directly.");var be;class yf{constructor(e){_(this,be,void 0);S(this,be,c(e))}renameTo(e){return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{renameTo:Ke(e)})})}setSchema(e){return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{setSchema:Ue.create(e)})})}alterColumn(e,r){const i=r(new Jl(e));return new nn({...s(this,be),node:Te.cloneWithColumnAlteration(s(this,be).node,i.toOperationNode())})}dropColumn(e){return new nn({...s(this,be),node:Te.cloneWithColumnAlteration(s(this,be).node,df.create(e))})}renameColumn(e,r){return new nn({...s(this,be),node:Te.cloneWithColumnAlteration(s(this,be).node,hf.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(Qe.create(e,Ji(r))));return new nn({...s(this,be),node:Te.cloneWithColumnAlteration(s(this,be).node,cf.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(Qe.create(e,Ji(r))));return new nn({...s(this,be),node:Te.cloneWithColumnAlteration(s(this,be).node,pf.create(a.toOperationNode()))})}addUniqueConstraint(e,r,i=fn){const a=i(new $s(Vl.create(r,e)));return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(a.toOperationNode())})})}addCheckConstraint(e,r){return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(jl.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,a){return new ca({...s(this,be),constraintBuilder:new Us(la.create(r.map(He.create),Ke(i),a.map(He.create),e))})}addPrimaryKeyConstraint(e,r){return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(mf.create(r,e))})})}dropConstraint(e){return new da({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{dropConstraint:Bo.create(e)})})}addIndex(e){return new ha({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{addIndex:li.create(e)})})}dropIndex(e){return new En({...s(this,be),node:Te.cloneWithTableProps(s(this,be).node,{dropIndex:Ns.create(e)})})}$call(e){return e(this)}}be=new WeakMap;var Je;const An=class An{constructor(e){_(this,Je,void 0);S(this,Je,c(e))}alterColumn(e,r){const i=r(new Jl(e));return new An({...s(this,Je),node:Te.cloneWithColumnAlteration(s(this,Je).node,i.toOperationNode())})}dropColumn(e){return new An({...s(this,Je),node:Te.cloneWithColumnAlteration(s(this,Je).node,df.create(e))})}renameColumn(e,r){return new An({...s(this,Je),node:Te.cloneWithColumnAlteration(s(this,Je).node,hf.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(Qe.create(e,Ji(r))));return new An({...s(this,Je),node:Te.cloneWithColumnAlteration(s(this,Je).node,cf.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(Qe.create(e,Ji(r))));return new An({...s(this,Je),node:Te.cloneWithColumnAlteration(s(this,Je).node,pf.create(a.toOperationNode()))})}toOperationNode(){return s(this,Je).executor.transformQuery(s(this,Je).node,s(this,Je).queryId)}compile(){return s(this,Je).executor.compileQuery(this.toOperationNode(),s(this,Je).queryId)}async execute(){await s(this,Je).executor.executeQuery(this.compile(),s(this,Je).queryId)}};Je=new WeakMap;let nn=An;de(yf,"don't await AlterTableBuilder instances");de(Jl,"don't await AlterColumnBuilder instances");de(nn,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class wf extends Bl{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var _e;const tr=class tr{constructor(e){_(this,_e,void 0);S(this,_e,c(e))}ifNotExists(){return new tr({...s(this,_e),node:Tr.cloneWith(s(this,_e).node,{ifNotExists:!0})})}unique(){return new tr({...s(this,_e),node:Tr.cloneWith(s(this,_e).node,{unique:!0})})}nullsNotDistinct(){return new tr({...s(this,_e),node:Tr.cloneWith(s(this,_e).node,{nullsNotDistinct:!0})})}on(e){return new tr({...s(this,_e),node:Tr.cloneWith(s(this,_e).node,{table:Ke(e)})})}column(e){return new tr({...s(this,_e),node:Tr.cloneWithColumns(s(this,_e).node,[Go(e)])})}columns(e){return new tr({...s(this,_e),node:Tr.cloneWithColumns(s(this,_e).node,e.map(Go))})}expression(e){return new tr({...s(this,_e),node:Tr.cloneWithColumns(s(this,_e).node,[e.toOperationNode()])})}using(e){return new tr({...s(this,_e),node:Tr.cloneWith(s(this,_e).node,{using:yt.createWithSql(e)})})}where(...e){const r=new wf;return new tr({...s(this,_e),node:ce.cloneWithWhere(s(this,_e).node,r.transformNode(Nt(e)))})}$call(e){return e(this)}toOperationNode(){return s(this,_e).executor.transformQuery(s(this,_e).node,s(this,_e).queryId)}compile(){return s(this,_e).executor.compileQuery(this.toOperationNode(),s(this,_e).queryId)}async execute(){await s(this,_e).executor.executeQuery(this.compile(),s(this,_e).queryId)}};_e=new WeakMap;let fa=tr;de(fa,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Bt;const Gl=class Gl{constructor(e){_(this,Bt,void 0);S(this,Bt,c(e))}ifNotExists(){return new Gl({...s(this,Bt),node:Lh.cloneWith(s(this,Bt).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Bt).executor.transformQuery(s(this,Bt).node,s(this,Bt).queryId)}compile(){return s(this,Bt).executor.compileQuery(this.toOperationNode(),s(this,Bt).queryId)}async execute(){await s(this,Bt).executor.executeQuery(this.compile(),s(this,Bt).queryId)}};Bt=new WeakMap;let pa=Gl;de(pa,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function uN(t){if(nw.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var pe;const Mt=class Mt{constructor(e){_(this,pe,void 0);S(this,pe,c(e))}temporary(){return new Mt({...s(this,pe),node:Lt.cloneWith(s(this,pe).node,{temporary:!0})})}onCommit(e){return new Mt({...s(this,pe),node:Lt.cloneWith(s(this,pe).node,{onCommit:uN(e)})})}ifNotExists(){return new Mt({...s(this,pe),node:Lt.cloneWith(s(this,pe).node,{ifNotExists:!0})})}addColumn(e,r,i=fn){const a=i(new gn(Qe.create(e,Ji(r))));return new Mt({...s(this,pe),node:Lt.cloneWithColumn(s(this,pe).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Mt({...s(this,pe),node:Lt.cloneWithConstraint(s(this,pe).node,mf.create(r,e))})}addUniqueConstraint(e,r,i=fn){const a=i(new $s(Vl.create(r,e)));return new Mt({...s(this,pe),node:Lt.cloneWithConstraint(s(this,pe).node,a.toOperationNode())})}addCheckConstraint(e,r){return new Mt({...s(this,pe),node:Lt.cloneWithConstraint(s(this,pe).node,jl.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,a,l=fn){const f=l(new Us(la.create(r.map(He.create),Ke(i),a.map(He.create),e)));return new Mt({...s(this,pe),node:Lt.cloneWithConstraint(s(this,pe).node,f.toOperationNode())})}modifyFront(e){return new Mt({...s(this,pe),node:Lt.cloneWithFrontModifier(s(this,pe).node,e.toOperationNode())})}modifyEnd(e){return new Mt({...s(this,pe),node:Lt.cloneWithEndModifier(s(this,pe).node,e.toOperationNode())})}as(e){return new Mt({...s(this,pe),node:Lt.cloneWith(s(this,pe).node,{selectQuery:ti(e)})})}$call(e){return e(this)}toOperationNode(){return s(this,pe).executor.transformQuery(s(this,pe).node,s(this,pe).queryId)}compile(){return s(this,pe).executor.compileQuery(this.toOperationNode(),s(this,pe).queryId)}async execute(){await s(this,pe).executor.executeQuery(this.compile(),s(this,pe).queryId)}};pe=new WeakMap;let ma=Mt;de(ma,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var dt;const Ws=class Ws{constructor(e){_(this,dt,void 0);S(this,dt,c(e))}on(e){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{table:Ke(e)})})}ifExists(){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{ifExists:!0})})}cascade(){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,dt).executor.transformQuery(s(this,dt).node,s(this,dt).queryId)}compile(){return s(this,dt).executor.compileQuery(this.toOperationNode(),s(this,dt).queryId)}async execute(){await s(this,dt).executor.executeQuery(this.compile(),s(this,dt).queryId)}};dt=new WeakMap;let ya=Ws;de(ya,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ot;const La=class La{constructor(e){_(this,Ot,void 0);S(this,Ot,c(e))}ifExists(){return new La({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{ifExists:!0})})}cascade(){return new La({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ot).executor.transformQuery(s(this,Ot).node,s(this,Ot).queryId)}compile(){return s(this,Ot).executor.compileQuery(this.toOperationNode(),s(this,Ot).queryId)}async execute(){await s(this,Ot).executor.executeQuery(this.compile(),s(this,Ot).queryId)}};Ot=new WeakMap;let wa=La;de(wa,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Ct;const Ma=class Ma{constructor(e){_(this,Ct,void 0);S(this,Ct,c(e))}ifExists(){return new Ma({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{ifExists:!0})})}cascade(){return new Ma({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ct).executor.transformQuery(s(this,Ct).node,s(this,Ct).queryId)}compile(){return s(this,Ct).executor.compileQuery(this.toOperationNode(),s(this,Ct).queryId)}async execute(){await s(this,Ct).executor.executeQuery(this.compile(),s(this,Ct).queryId)}};Ct=new WeakMap;let Na=Ma;de(Na,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const en=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Ba;class lN{constructor(){_(this,Ba,new wf)}transformQuery(e){return s(this,Ba).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Ba=new WeakMap;var $e;const rn=class rn{constructor(e){_(this,$e,void 0);S(this,$e,c(e))}temporary(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{temporary:!0})})}materialized(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{materialized:!0})})}ifNotExists(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{ifNotExists:!0})})}orReplace(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{orReplace:!0})})}columns(e){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{columns:e.map(jh)})})}as(e){const r=e.withPlugin(new lN).toOperationNode();return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return s(this,$e).executor.transformQuery(s(this,$e).node,s(this,$e).queryId)}compile(){return s(this,$e).executor.compileQuery(this.toOperationNode(),s(this,$e).queryId)}async execute(){await s(this,$e).executor.executeQuery(this.compile(),s(this,$e).queryId)}};$e=new WeakMap;let ga=rn;de(ga,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Fo=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var ht;const Is=class Is{constructor(e){_(this,ht,void 0);S(this,ht,c(e))}materialized(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{materialized:!0})})}ifExists(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{ifExists:!0})})}cascade(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,ht).executor.transformQuery(s(this,ht).node,s(this,ht).queryId)}compile(){return s(this,ht).executor.compileQuery(this.toOperationNode(),s(this,ht).queryId)}async execute(){await s(this,ht).executor.executeQuery(this.compile(),s(this,ht).queryId)}};ht=new WeakMap;let ba=Is;de(ba,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Nf=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Rl.create(e.map(r=>Ur.createImmediate(r)))})}});var Ft;const zl=class zl{constructor(e){_(this,Ft,void 0);S(this,Ft,c(e))}toOperationNode(){return s(this,Ft).executor.transformQuery(s(this,Ft).node,s(this,Ft).queryId)}asEnum(e){return new zl({...s(this,Ft),node:Nf.cloneWithEnum(s(this,Ft).node,e)})}$call(e){return e(this)}compile(){return s(this,Ft).executor.compileQuery(this.toOperationNode(),s(this,Ft).queryId)}async execute(){await s(this,Ft).executor.executeQuery(this.compile(),s(this,Ft).queryId)}};Ft=new WeakMap;let va=zl;de(va,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const gf=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var Ut;const Yl=class Yl{constructor(e){_(this,Ut,void 0);S(this,Ut,c(e))}ifExists(){return new Yl({...s(this,Ut),node:gf.cloneWith(s(this,Ut).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ut).executor.transformQuery(s(this,Ut).node,s(this,Ut).queryId)}compile(){return s(this,Ut).executor.compileQuery(this.toOperationNode(),s(this,Ut).queryId)}async execute(){await s(this,Ut).executor.executeQuery(this.compile(),s(this,Ut).queryId)}};Ut=new WeakMap;let xa=Yl;de(xa,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Td(t){const e=".";if(t.includes(e)){const r=t.split(e).map(cN);if(r.length===2)return yn.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return yn.create(t)}function cN(t){return t.trim()}var at;const Es=class Es{constructor(e){_(this,at,void 0);S(this,at,e)}createTable(e){return new ma({queryId:Se(),executor:s(this,at),node:Lt.create(Ke(e))})}dropTable(e){return new Na({queryId:Se(),executor:s(this,at),node:Ku.create(Ke(e))})}createIndex(e){return new fa({queryId:Se(),executor:s(this,at),node:Tr.create(e)})}dropIndex(e){return new ya({queryId:Se(),executor:s(this,at),node:Ns.create(e)})}createSchema(e){return new pa({queryId:Se(),executor:s(this,at),node:Lh.create(e)})}dropSchema(e){return new wa({queryId:Se(),executor:s(this,at),node:Ju.create(e)})}alterTable(e){return new yf({queryId:Se(),executor:s(this,at),node:Te.create(Ke(e))})}createView(e){return new ga({queryId:Se(),executor:s(this,at),node:en.create(e)})}dropView(e){return new ba({queryId:Se(),executor:s(this,at),node:Fo.create(e)})}createType(e){return new va({queryId:Se(),executor:s(this,at),node:Nf.create(Td(e))})}dropType(e){return new xa({queryId:Se(),executor:s(this,at),node:gf.create(Td(e))})}withPlugin(e){return new Es(s(this,at).withPlugin(e))}withoutPlugins(){return new Es(s(this,at).withoutPlugins())}withSchema(e){return new Es(s(this,at).withPluginAtFront(new oo(e)))}};at=new WeakMap;let il=Es;class dN{ref(e){return new hw(e)}}var Di;class hN{constructor(e){_(this,Di,void 0);S(this,Di,e)}async provideConnection(e){const r=await s(this,Di).acquireConnection();try{return await e(r)}finally{await s(this,Di).releaseConnection(r)}}}Di=new WeakMap;var wr,Nr,Dr;const Rn=class Rn extends tf{constructor(r,i,a,l=[]){super(l);_(this,wr,void 0);_(this,Nr,void 0);_(this,Dr,void 0);S(this,wr,r),S(this,Nr,i),S(this,Dr,a)}get adapter(){return s(this,Nr)}compileQuery(r){return s(this,wr).compileQuery(r)}provideConnection(r){return s(this,Dr).provideConnection(r)}withPlugins(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[...this.plugins,...r])}withPlugin(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[...this.plugins,r])}withPluginAtFront(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[r,...this.plugins])}withConnectionProvider(r){return new Rn(s(this,wr),s(this,Nr),r,[...this.plugins])}withoutPlugins(){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[])}};wr=new WeakMap,Nr=new WeakMap,Dr=new WeakMap;let sl=Rn;function kd(){return typeof performance<"u"&&Qt(performance.now)?performance.now():Date.now()}var sr,an,Pr,Pi,Lr,Ys,Fa,bf,Ua,vf,$a,xf,Qa,Of,Xs,ol;class fN{constructor(e,r){_(this,Fa);_(this,Ua);_(this,$a);_(this,Qa);_(this,Xs);_(this,sr,void 0);_(this,an,void 0);_(this,Pr,void 0);_(this,Pi,void 0);_(this,Lr,void 0);_(this,Ys,new WeakSet);S(this,Pi,!1),S(this,sr,e),S(this,an,r)}async init(){if(s(this,Lr))throw new Error("driver has already been destroyed");s(this,Pr)||S(this,Pr,s(this,sr).init().then(()=>{S(this,Pi,!0)}).catch(e=>(S(this,Pr,void 0),Promise.reject(e)))),await s(this,Pr)}async acquireConnection(){if(s(this,Lr))throw new Error("driver has already been destroyed");s(this,Pi)||await this.init();const e=await s(this,sr).acquireConnection();return s(this,Ys).has(e)||(xe(this,Fa,bf).call(this)&&xe(this,Ua,vf).call(this,e),s(this,Ys).add(e)),e}async releaseConnection(e){await s(this,sr).releaseConnection(e)}beginTransaction(e,r){return s(this,sr).beginTransaction(e,r)}commitTransaction(e){return s(this,sr).commitTransaction(e)}rollbackTransaction(e){return s(this,sr).rollbackTransaction(e)}async destroy(){s(this,Pr)&&(await s(this,Pr),s(this,Lr)||S(this,Lr,s(this,sr).destroy().catch(e=>(S(this,Lr,void 0),Promise.reject(e)))),await s(this,Lr))}}sr=new WeakMap,an=new WeakMap,Pr=new WeakMap,Pi=new WeakMap,Lr=new WeakMap,Ys=new WeakMap,Fa=new WeakSet,bf=function(){return s(this,an).isLevelEnabled("query")||s(this,an).isLevelEnabled("error")},Ua=new WeakSet,vf=function(e){const r=e.executeQuery;e.executeQuery=async i=>{let a;const l=kd();try{return await r.call(e,i)}catch(f){throw a=f,await xe(this,$a,xf).call(this,f,i,l),f}finally{a||await xe(this,Qa,Of).call(this,i,l)}}},$a=new WeakSet,xf=async function(e,r,i){await s(this,an).error(()=>({level:"error",error:e,query:r,queryDurationMillis:xe(this,Xs,ol).call(this,i)}))},Qa=new WeakSet,Of=async function(e,r){await s(this,an).query(()=>({level:"query",query:e,queryDurationMillis:xe(this,Xs,ol).call(this,r)}))},Xs=new WeakSet,ol=function(e){return kd()-e};const pN=()=>{};var Zs,un,ja,_f;class Cf{constructor(e){_(this,ja);_(this,Zs,void 0);_(this,un,void 0);S(this,Zs,e)}async provideConnection(e){for(;s(this,un);)await s(this,un).catch(pN);return S(this,un,xe(this,ja,_f).call(this,e).finally(()=>{S(this,un,void 0)})),s(this,un)}}Zs=new WeakMap,un=new WeakMap,ja=new WeakSet,_f=async function(e){return await e(s(this,Zs))};const mN=["read uncommitted","read committed","repeatable read","serializable","snapshot"];c(["query","error"]);var ln,Vn;class yN{constructor(e){_(this,ln,void 0);_(this,Vn,void 0);Qt(e)?(S(this,Vn,e),S(this,ln,c({query:!0,error:!0}))):(S(this,Vn,wN),S(this,ln,c({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return s(this,ln)[e]}async query(e){s(this,ln).query&&await s(this,Vn).call(this,e())}async error(e){s(this,ln).error&&await s(this,Vn).call(this,e())}}ln=new WeakMap,Vn=new WeakMap;function wN(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function NN(t){return xr(t)&&Qt(t.compile)}var ft;const fi=class fi extends oa{constructor(r){let i,a;if(gN(r))i={executor:r.executor},a={...r};else{const l=r.dialect,f=l.createDriver(),m=l.createQueryCompiler(),N=l.createAdapter(),h=new yN(r.log??[]),x=new fN(f,h),q=new hN(x),R=new sl(m,N,q,r.plugins??[]);i={executor:R},a={config:r,executor:R,dialect:l,driver:x}}super(i);_(this,ft,void 0);S(this,ft,c(a))}get schema(){return new il(s(this,ft).executor)}get dynamic(){return new dN}get introspection(){return s(this,ft).dialect.createIntrospector(this.withoutPlugins())}case(r){return new of({node:Cr.create(Xn(r)?void 0:ti(r))})}get fn(){return sf()}transaction(){return new Oa({...s(this,ft)})}connection(){return new qf({...s(this,ft)})}withPlugin(r){return new fi({...s(this,ft),executor:s(this,ft).executor.withPlugin(r)})}withoutPlugins(){return new fi({...s(this,ft),executor:s(this,ft).executor.withoutPlugins()})}withSchema(r){return new fi({...s(this,ft),executor:s(this,ft).executor.withPluginAtFront(new oo(r))})}withTables(){return new fi({...s(this,ft)})}async destroy(){await s(this,ft).driver.destroy()}get isTransaction(){return!1}getExecutor(){return s(this,ft).executor}executeQuery(r,i=Se()){const a=NN(r)?r.compile():r;return this.getExecutor().executeQuery(a,i)}};ft=new WeakMap;let Qs=fi;var or;const pi=class pi extends Qs{constructor(r){super(r);_(this,or,void 0);S(this,or,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new pi({...s(this,or),executor:s(this,or).executor.withPlugin(r)})}withoutPlugins(){return new pi({...s(this,or),executor:s(this,or).executor.withoutPlugins()})}withSchema(r){return new pi({...s(this,or),executor:s(this,or).executor.withPluginAtFront(new oo(r))})}withTables(){return new pi({...s(this,or)})}};or=new WeakMap;let al=pi;function gN(t){return xr(t)&&xr(t.config)&&xr(t.driver)&&xr(t.executor)&&xr(t.dialect)}var Jn;class qf{constructor(e){_(this,Jn,void 0);S(this,Jn,c(e))}async execute(e){return s(this,Jn).executor.provideConnection(async r=>{const i=s(this,Jn).executor.withConnectionProvider(new Cf(r)),a=new Qs({...s(this,Jn),executor:i});return await e(a)})}}Jn=new WeakMap;de(qf,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var ar;const Xl=class Xl{constructor(e){_(this,ar,void 0);S(this,ar,c(e))}setIsolationLevel(e){return new Xl({...s(this,ar),isolationLevel:e})}async execute(e){const{isolationLevel:r,...i}=s(this,ar),a={isolationLevel:r};return bN(a),s(this,ar).executor.provideConnection(async l=>{const f=s(this,ar).executor.withConnectionProvider(new Cf(l)),m=new al({...i,executor:f});try{await s(this,ar).driver.beginTransaction(l,a);const N=await e(m);return await s(this,ar).driver.commitTransaction(l),N}catch(N){throw await s(this,ar).driver.rollbackTransaction(l),N}})}};ar=new WeakMap;let Oa=Xl;de(Oa,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function bN(t){if(t.isolationLevel&&!mN.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var _t,Li,Uo,eo,ul,to,ll;const Ts=class Ts{constructor(e){_(this,Li);_(this,eo);_(this,to);_(this,_t,void 0);S(this,_t,c(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new Wf(this,e)}$castTo(){return new Ts({...s(this,_t)})}$notNull(){return new Ts(s(this,_t))}withPlugin(e){return new Ts({...s(this,_t),plugins:s(this,_t).plugins!==void 0?c([...s(this,_t).plugins,e]):c([e])})}toOperationNode(){return xe(this,eo,ul).call(this,xe(this,Li,Uo).call(this))}compile(e){return xe(this,to,ll).call(this,xe(this,Li,Uo).call(this,e))}async execute(e){const r=xe(this,Li,Uo).call(this,e);return r.executeQuery(xe(this,to,ll).call(this,r),s(this,_t).queryId)}};_t=new WeakMap,Li=new WeakSet,Uo=function(e){const r=e!==void 0?e.getExecutor():Fl;return s(this,_t).plugins!==void 0?r.withPlugins(s(this,_t).plugins):r},eo=new WeakSet,ul=function(e){return e.transformQuery(s(this,_t).rawNode,s(this,_t).queryId)},to=new WeakSet,ll=function(e){return e.compileQuery(xe(this,eo,ul).call(this,e),s(this,_t).queryId)};let Ca=Ts;function zr(t){return new Ca(t)}de(Ca,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Kn,cn;class Wf{constructor(e,r){_(this,Kn,void 0);_(this,cn,void 0);S(this,Kn,e),S(this,cn,r)}get expression(){return s(this,Kn)}get alias(){return s(this,cn)}get rawBuilder(){return s(this,Kn)}toOperationNode(){return bn.create(s(this,Kn).toOperationNode(),jt(s(this,cn))?s(this,cn).toOperationNode():Ue.create(s(this,cn)))}}Kn=new WeakMap,cn=new WeakMap;de(Wf,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const nt=Object.assign((t,...e)=>zr({queryId:Se(),rawNode:yt.create(t,e?.map(Sd)??[])}),{ref(t){return zr({queryId:Se(),rawNode:yt.createWithChild(Fr(t))})},val(t){return zr({queryId:Se(),rawNode:yt.createWithChild(it(t))})},value(t){return this.val(t)},table(t){return zr({queryId:Se(),rawNode:yt.createWithChild(Ke(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:Se(),rawNode:yt.create(e,t.map(Ue.create))})},lit(t){return zr({queryId:Se(),rawNode:yt.createWithChild(Ur.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:Se(),rawNode:yt.createWithSql(t)})},join(t,e=nt`, `){const r=new Array(2*t.length-1),i=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=Sd(t[a]),a!==t.length-1&&(r[2*a+1]=i);return zr({queryId:Se(),rawNode:yt.createWithChildren(r)})}});function Sd(t){return jt(t)?t.toOperationNode():it(t)}var Va;class vN{constructor(){Z(this,"nodeStack",[]);_(this,Va,c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),AddIndexNode:this.visitAddIndex.bind(this)}));Z(this,"visitNode",e=>{this.nodeStack.push(e),s(this,Va)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Va=new WeakMap;var Mi,Hn;class xN extends vN{constructor(){super(...arguments);_(this,Mi,"");_(this,Hn,[])}get numParameters(){return s(this,Hn).length}compileQuery(r){return S(this,Mi,""),S(this,Hn,[]),this.visitNode(r),c({query:r,sql:this.getSql(),parameters:[...s(this,Hn)]})}getSql(){return s(this,Mi)}visitSelectQuery(r){const i=this.parentNode!==void 0&&!ji.is(this.parentNode)&&!ur.is(this.parentNode)&&!Lt.is(this.parentNode)&&!en.is(this.parentNode)&&!rf.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),i&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,i=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(i)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const i=this.nodeStack.find(ce.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.defaultValues&&(this.append(" "),this.append("default values")),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const i=this.nodeStack.find(ce.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!Gt(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:i}=r;for(let a=0;a<i.length;++a)this.appendValue(i[a]),a!==i.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(CN[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:i,parameters:a}=r;for(let l=0;l<i.length;++l)this.append(i[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),r.selectQuery?(this.append(" as "),this.visitNode(r.selectQuery)):(this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," ")))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const i=this.nodeStack.find(ce.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Ko(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileColumnAlterations(r.columnAlterations),r.addIndex&&this.visitNode(r.addIndex),r.dropIndex&&this.visitNode(r.dropIndex)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(ON[r.modifier]),r.of&&(this.append(" of "),this.compileList(r.of,", "))}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return Nn.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const i of r.pathLegs)this.visitNode(i);this.append("'")}visitJSONPathLeg(r){const i=r.type==="ArrayLocation";this.append(i?"[":"."),this.append(String(r.value)),i&&this.append("]")}visitJSONOperatorChain(r){for(let i=0,a=r.values.length;i<a;i++)i===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[i])}visitAddIndex(r){this.append("add "),r.unique&&this.append("unique "),this.append("index "),this.visitNode(r.name),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.using&&(this.append(" using "),this.visitNode(r.using))}append(r){S(this,Mi,s(this,Mi)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const i=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const f of r)l+=f,f===i?l+=i:f===a&&(l+=a);return l}addParameter(r){s(this,Hn).push(r)}appendImmediateValue(r){if(Gt(r))this.append(`'${r}'`);else if(Ph(r)||Ko(r))this.append(r.toString());else if(kl(r))this.append("null");else if(tw(r))this.appendImmediateValue(r.toISOString());else if(rw(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((i,a)=>i.modifier&&a.modifier?Ad[i.modifier]-Ad[a.modifier]:1),c(r)}compileColumnAlterations(r){this.compileList(r)}announcesNewColumnDataType(){return!0}}Mi=new WeakMap,Hn=new WeakMap;const ON=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Ad=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),CN=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),_r=c({raw(t,e=[]){return c({sql:t,query:yt.createWithSql(t),parameters:c(e)})}});class _N{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}const qN=/"/g;class If extends xN{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(qN,'""')}visitDefaultInsertValue(e){this.append("null")}}const Ef="kysely_migration",Tf="kysely_migration_lock";c({__noMigrations__:!0});var Bi,Ja,Sf;class kf{constructor(e){_(this,Ja);_(this,Bi,void 0);S(this,Bi,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=s(this,Bi).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",Ef).where("name","!=",Tf));const i=await r.execute();return Promise.all(i.map(({name:a})=>xe(this,Ja,Sf).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}Bi=new WeakMap,Ja=new WeakSet,Sf=async function(e){const r=s(this,Bi),i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=i.sql?.split(/[\(\),]/)?.find(f=>f.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(nt`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:l.map(f=>({name:f.name,dataType:f.type,isNullable:!f.notnull,isAutoIncrementing:f.name===a,hasDefaultValue:f.dflt_value!=null}))}};class Af extends _N{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var WN=class{createQueryCompiler(){return new If}createAdapter(){return new Af}createIntrospector(t){return new kf(t)}},ro,Bd,IN=(Bd=class{constructor(){_(this,ro,new EN);Z(this,"connection")}async acquireConnection(){return await s(this,ro).lock(),this.connection}async beginTransaction(t){await t.executeQuery(_r.raw("begin"))}async commitTransaction(t){await t.executeQuery(_r.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(_r.raw("rollback"))}async releaseConnection(){s(this,ro).unlock()}},ro=new WeakMap,Bd),EN=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},TN=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const i=await this.query(r,t);return he.is(e)||i.length?{rows:i}:{rows:i,...await this.info()}}};function kN(t,e,r){let i,a=0,l=null;function f(){i&&clearTimeout(i),a=0,l=null}function m(){a>=r?(t(l),f()):(i&&clearTimeout(i),i=setTimeout(()=>{t(l),f(),i=void 0},e))}return N=>{a++,l=N,i===void 0&&a===0?(t(N),a++):m()}}var SN=class extends IN{constructor(e){super();Z(this,"config");Z(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new AN(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},AN=class extends TN{constructor(e,r,i=!1,a=2e3,l=1e3){super();Z(this,"db");Z(this,"onWrite");Z(this,"trxCount",0);this.db=e,this.onWrite=r?i?kN(r,a,l):r:void 0}async query(e,r){const i=this.db.prepare(e);i.bind(r);const a=[];for(;i.step();)a.push(i.getAsObject());return i.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},RN=class extends WN{constructor(e){super();Z(this,"config");this.config=e}createDriver(){return new SN(this.config)}};function DN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PN(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),r}var Rf={exports:{}};const LN={},MN=Object.freeze(Object.defineProperty({__proto__:null,default:LN},Symbol.toStringTag,{value:"Module"})),Su=PN(MN);(function(t,e){var r=void 0,i=function(a){return r||(r=new Promise(function(l,f){var m=typeof a<"u"?a:{},N=m.onAbort;m.onAbort=function(n){f(new Error(n)),N&&N(n)},m.postRun=m.postRun||[],m.postRun.push(function(){l(m)}),t=void 0;var h;h||(h=typeof m<"u"?m:{}),h.onRuntimeInitialized=function(){function n(g,E){switch(typeof E){case"boolean":Cp(g,E?1:0);break;case"number":vp(g,E);break;case"string":xp(g,E,-1,-1);break;case"object":if(E===null)kc(g);else if(E.length!=null){var F=No(E,wo);Op(g,F,E.length,-1),vo(F)}else Oo(g,"Wrong API use : tried to return a value of an unknown type ("+E+").",-1);break;default:kc(g)}}function o(g,E){for(var F=[],z=0;z<g;z+=1){var ue=C(E+4*z,"i32"),Re=yp(ue);if(Re===1||Re===2)ue=bp(ue);else if(Re===3)ue=Np(ue);else if(Re===4){Re=ue,ue=wp(Re),Re=gp(Re);for(var Xt=new Uint8Array(ue),Jt=0;Jt<ue;Jt+=1)Xt[Jt]=qe[Re+Jt];ue=Xt}else ue=null;F.push(ue)}return F}function u(g,E){this.La=g,this.db=E,this.Ja=1,this.fb=[]}function d(g,E){if(this.db=E,E=ge(g)+1,this.Ya=bo(E),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Le(g,ye,this.Ya,E),this.eb=this.Ya,this.Ua=this.ib=null}function y(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var E=this.filename,F="/",z=E;if(F&&(F=typeof F=="string"?F:rs(F),z=E?I(F+"/"+E):F),E=Zl(!0,!0),z=co(z,(E!==void 0?E:438)&4095|32768,0),g){if(typeof g=="string"){F=Array(g.length);for(var ue=0,Re=g.length;ue<Re;++ue)F[ue]=g.charCodeAt(ue);g=F}fo(z,E|146),F=oi(z,577),yc(F,g,0,g.length,0),hu(F),fo(z,E)}}this.handleError(H(this.filename,b)),this.db=C(b,"i32"),Ac(this.db),this.Za={},this.Na={}}var b=Hr(4),O=h.cwrap,H=O("sqlite3_open","number",["string","number"]),fe=O("sqlite3_close_v2","number",["number"]),se=O("sqlite3_exec","number",["number","string","number","number","number"]),Ge=O("sqlite3_changes","number",["number"]),ot=O("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qc=O("sqlite3_sql","string",["number"]),Zf=O("sqlite3_normalized_sql","string",["number"]),Wc=O("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ep=O("sqlite3_bind_text","number",["number","number","number","number","number"]),Ic=O("sqlite3_bind_blob","number",["number","number","number","number","number"]),tp=O("sqlite3_bind_double","number",["number","number","number"]),rp=O("sqlite3_bind_int","number",["number","number","number"]),np=O("sqlite3_bind_parameter_index","number",["number","string"]),ip=O("sqlite3_step","number",["number"]),sp=O("sqlite3_errmsg","string",["number"]),op=O("sqlite3_column_count","number",["number"]),ap=O("sqlite3_data_count","number",["number"]),up=O("sqlite3_column_double","number",["number","number"]),Ec=O("sqlite3_column_text","string",["number","number"]),lp=O("sqlite3_column_blob","number",["number","number"]),cp=O("sqlite3_column_bytes","number",["number","number"]),dp=O("sqlite3_column_type","number",["number","number"]),hp=O("sqlite3_column_name","string",["number","number"]),fp=O("sqlite3_reset","number",["number"]),pp=O("sqlite3_clear_bindings","number",["number"]),mp=O("sqlite3_finalize","number",["number"]),Tc=O("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),yp=O("sqlite3_value_type","number",["number"]),wp=O("sqlite3_value_bytes","number",["number"]),Np=O("sqlite3_value_text","string",["number"]),gp=O("sqlite3_value_blob","number",["number"]),bp=O("sqlite3_value_double","number",["number"]),vp=O("sqlite3_result_double","",["number","number"]),kc=O("sqlite3_result_null","",["number"]),xp=O("sqlite3_result_text","",["number","string","number","number"]),Op=O("sqlite3_result_blob","",["number","number","number","number"]),Cp=O("sqlite3_result_int","",["number","number"]),Oo=O("sqlite3_result_error","",["number","string","number"]),Sc=O("sqlite3_aggregate_context","number",["number","number"]),Ac=O("RegisterExtensionFunctions","number",["number"]);u.prototype.bind=function(g){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(g)?this.wb(g):g!=null&&typeof g=="object"?this.xb(g):!0},u.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var g=ip(this.La);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},u.prototype.rb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),up(this.La,g)},u.prototype.Ab=function(g){if(g==null&&(g=this.Ja,this.Ja+=1),g=Ec(this.La,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},u.prototype.Bb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),Ec(this.La,g)},u.prototype.getBlob=function(g){g==null&&(g=this.Ja,this.Ja+=1);var E=cp(this.La,g);g=lp(this.La,g);for(var F=new Uint8Array(E),z=0;z<E;z+=1)F[z]=qe[g+z];return F},u.prototype.get=function(g,E){E=E||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var F=ap(this.La),z=0;z<F;z+=1)switch(dp(this.La,z)){case 1:var ue=E.useBigInt?this.Ab(z):this.rb(z);g.push(ue);break;case 2:g.push(this.rb(z));break;case 3:g.push(this.Bb(z));break;case 4:g.push(this.getBlob(z));break;default:g.push(null)}return g},u.prototype.getColumnNames=function(){for(var g=[],E=op(this.La),F=0;F<E;F+=1)g.push(hp(this.La,F));return g},u.prototype.getAsObject=function(g,E){g=this.get(g,E),E=this.getColumnNames();for(var F={},z=0;z<E.length;z+=1)F[E[z]]=g[z];return F},u.prototype.getSQL=function(){return qc(this.La)},u.prototype.getNormalizedSQL=function(){return Zf(this.La)},u.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},u.prototype.nb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1),g=It(g);var F=No(g,wo);this.fb.push(F),this.db.handleError(ep(this.La,E,F,g.length-1,0))},u.prototype.vb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1);var F=No(g,wo);this.fb.push(F),this.db.handleError(Ic(this.La,E,F,g.length,0))},u.prototype.mb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1),this.db.handleError((g===(g|0)?rp:tp)(this.La,E,g))},u.prototype.yb=function(g){g==null&&(g=this.Ja,this.Ja+=1),Ic(this.La,g,0,0,0)},u.prototype.ob=function(g,E){switch(E==null&&(E=this.Ja,this.Ja+=1),typeof g){case"string":this.nb(g,E);return;case"number":this.mb(g,E);return;case"bigint":this.nb(g.toString(),E);return;case"boolean":this.mb(g+0,E);return;case"object":if(g===null){this.yb(E);return}if(g.length!=null){this.vb(g,E);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},u.prototype.xb=function(g){var E=this;return Object.keys(g).forEach(function(F){var z=np(E.La,F);z!==0&&E.ob(g[F],z)}),!0},u.prototype.wb=function(g){for(var E=0;E<g.length;E+=1)this.ob(g[E],E+1);return!0},u.prototype.reset=function(){return this.freemem(),pp(this.La)===0&&fp(this.La)===0},u.prototype.freemem=function(){for(var g;(g=this.fb.pop())!==void 0;)vo(g)},u.prototype.free=function(){this.freemem();var g=mp(this.La)===0;return delete this.db.Za[this.La],this.La=0,g},d.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var g=as(),E=Hr(4);W(b),W(E);try{this.db.handleError(Wc(this.db.db,this.eb,-1,b,E)),this.eb=C(E,"i32");var F=C(b,"i32");return F===0?(this.gb(),{done:!0}):(this.Ua=new u(F,this.db),this.db.Za[F]=this.Ua,{value:this.Ua,done:!1})}catch(z){throw this.ib=A(this.eb),this.gb(),z}finally{us(g)}},d.prototype.gb=function(){vo(this.Ya),this.Ya=null},d.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),y.prototype.run=function(g,E){if(!this.db)throw"Database closed";if(E){g=this.prepare(g,E);try{g.step()}finally{g.free()}}else this.handleError(se(this.db,g,0,0,b));return this},y.prototype.exec=function(g,E,F){if(!this.db)throw"Database closed";var z=as(),ue=null;try{var Re=yu(g),Xt=Hr(4);for(g=[];C(Re,"i8")!==0;){W(b),W(Xt),this.handleError(Wc(this.db,Re,-1,b,Xt));var Jt=C(b,"i32");if(Re=C(Xt,"i32"),Jt!==0){var Pt=null;for(ue=new u(Jt,this),E!=null&&ue.bind(E);ue.step();)Pt===null&&(Pt={columns:ue.getColumnNames(),values:[]},g.push(Pt)),Pt.values.push(ue.get(null,F));ue.free()}}return g}catch(Zt){throw ue&&ue.free(),Zt}finally{us(z)}},y.prototype.each=function(g,E,F,z,ue){typeof E=="function"&&(z=F,F=E,E=void 0),g=this.prepare(g,E);try{for(;g.step();)F(g.getAsObject(null,ue))}finally{g.free()}if(typeof z=="function")return z()},y.prototype.prepare=function(g,E){if(W(b),this.handleError(ot(this.db,g,-1,b,0)),g=C(b,"i32"),g===0)throw"Nothing to prepare";var F=new u(g,this);return E!=null&&F.bind(E),this.Za[g]=F},y.prototype.iterateStatements=function(g){return new d(g,this)},y.prototype.export=function(){Object.values(this.Za).forEach(function(E){E.free()}),Object.values(this.Na).forEach(ai),this.Na={},this.handleError(fe(this.db));var g=Hf(this.filename);return this.handleError(H(this.filename,b)),this.db=C(b,"i32"),Ac(this.db),g},y.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(g){g.free()}),Object.values(this.Na).forEach(ai),this.Na={},this.handleError(fe(this.db)),cc("/"+this.filename),this.db=null)},y.prototype.handleError=function(g){if(g===0)return null;throw g=sp(this.db),Error(g)},y.prototype.getRowsModified=function(){return Ge(this.db)},y.prototype.create_function=function(g,E){Object.prototype.hasOwnProperty.call(this.Na,g)&&(ai(this.Na[g]),delete this.Na[g]);var F=go(function(z,ue,Re){ue=o(ue,Re);try{var Xt=E.apply(null,ue)}catch(Jt){Oo(z,Jt,-1);return}n(z,Xt)},"viii");return this.Na[g]=F,this.handleError(Tc(this.db,g,E.length,1,0,F,0,0,0)),this},y.prototype.create_aggregate=function(g,E){var F=E.init||function(){return null},z=E.finalize||function(Pt){return Pt},ue=E.step;if(!ue)throw"An aggregate function must have a step function in "+g;var Re={};Object.hasOwnProperty.call(this.Na,g)&&(ai(this.Na[g]),delete this.Na[g]),E=g+"__finalize",Object.hasOwnProperty.call(this.Na,E)&&(ai(this.Na[E]),delete this.Na[E]);var Xt=go(function(Pt,Zt,Nu){var qn=Sc(Pt,1);Object.hasOwnProperty.call(Re,qn)||(Re[qn]=F()),Zt=o(Zt,Nu),Zt=[Re[qn]].concat(Zt);try{Re[qn]=ue.apply(null,Zt)}catch(_p){delete Re[qn],Oo(Pt,_p,-1)}},"viii"),Jt=go(function(Pt){var Zt=Sc(Pt,1);try{var Nu=z(Re[Zt])}catch(qn){delete Re[Zt],Oo(Pt,qn,-1);return}n(Pt,Nu),delete Re[Zt]},"vi");return this.Na[g]=Xt,this.Na[E]=Jt,this.handleError(Tc(this.db,g,ue.length-1,1,0,0,Xt,Jt,0)),this},h.Database=y};var x=Object.assign({},h),q="./this.program",R=typeof window=="object",B=typeof importScripts=="function",Ne=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",J="",ke,j,te;if(Ne){var le=Su,Oe=Su;J=B?Oe.dirname(J)+"/":__dirname+"/",ke=(n,o)=>(n=Wt(n)?new URL(n):Oe.normalize(n),le.readFileSync(n,o?void 0:"utf8")),te=n=>(n=ke(n,!0),n.buffer||(n=new Uint8Array(n)),n),j=(n,o,u,d=!0)=>{n=Wt(n)?new URL(n):Oe.normalize(n),le.readFile(n,d?void 0:"utf8",(y,b)=>{y?u(y):o(d?b.buffer:b)})},!h.thisProgram&&1<process.argv.length&&(q=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=h,h.inspect=()=>"[Emscripten Module object]"}else(R||B)&&(B?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),J=J.indexOf("blob:")!==0?J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ke=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},B&&(te=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),j=(n,o,u)=>{var d=new XMLHttpRequest;d.open("GET",n,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?o(d.response):u()},d.onerror=u,d.send(null)});var lt=h.print||console.log.bind(console),re=h.printErr||console.error.bind(console);Object.assign(h,x),x=null,h.thisProgram&&(q=h.thisProgram);var Ve;h.wasmBinary&&(Ve=h.wasmBinary),typeof WebAssembly!="object"&&zt("no native wasm support detected");var Xe,jr=!1,qe,ye,dr,V,We,ri,Ze;function Ae(){var n=Xe.buffer;h.HEAP8=qe=new Int8Array(n),h.HEAP16=dr=new Int16Array(n),h.HEAPU8=ye=new Uint8Array(n),h.HEAPU16=new Uint16Array(n),h.HEAP32=V=new Int32Array(n),h.HEAPU32=We=new Uint32Array(n),h.HEAPF32=ri=new Float32Array(n),h.HEAPF64=Ze=new Float64Array(n)}var Ce=[],hr=[],vn=[];function qr(){var n=h.preRun.shift();Ce.unshift(n)}var st=0,Vr=null;function zt(n){throw h.onAbort?.(n),n="Aborted("+n+")",re(n),jr=!0,new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info.")}var uo=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),Yt;if(Yt="sql-wasm.wasm",!uo(Yt)){var ni=Yt;Yt=h.locateFile?h.locateFile(ni,J):J+ni}function Xi(n){if(n==Yt&&Ve)return new Uint8Array(Ve);if(te)return te(n);throw"both async and sync fetching of the wasm failed"}function Jr(n){if(!Ve&&(R||B)){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+n+"'";return o.arrayBuffer()}).catch(()=>Xi(n));if(j)return new Promise((o,u)=>{j(n,d=>o(new Uint8Array(d)),u)})}return Promise.resolve().then(()=>Xi(n))}function ii(n,o,u){return Jr(n).then(d=>WebAssembly.instantiate(d,o)).then(d=>d).then(u,d=>{re(`failed to asynchronously prepare wasm: ${d}`),zt(d)})}function Zi(n,o){var u=Yt;Ve||typeof WebAssembly.instantiateStreaming!="function"||uo(u)||Wt(u)||Ne||typeof fetch!="function"?ii(u,n,o):fetch(u,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,n).then(o,function(y){return re(`wasm streaming compile failed: ${y}`),re("falling back to ArrayBuffer instantiation"),ii(u,n,o)}))}var p,w,v=n=>{for(;0<n.length;)n.shift()(h)};function C(n,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return qe[n>>0];case"i8":return qe[n>>0];case"i16":return dr[n>>1];case"i32":return V[n>>2];case"i64":zt("to do getValue(i64) use WASM_BIGINT");case"float":return ri[n>>2];case"double":return Ze[n>>3];case"*":return We[n>>2];default:zt(`invalid type for getValue: ${o}`)}}function W(n){var o="i32";switch(o.endsWith("*")&&(o="*"),o){case"i1":qe[n>>0]=0;break;case"i8":qe[n>>0]=0;break;case"i16":dr[n>>1]=0;break;case"i32":V[n>>2]=0;break;case"i64":zt("to do setValue(i64) use WASM_BIGINT");case"float":ri[n>>2]=0;break;case"double":Ze[n>>3]=0;break;case"*":We[n>>2]=0;break;default:zt(`invalid type for setValue: ${o}`)}}var D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,k=(n,o,u)=>{var d=o+u;for(u=o;n[u]&&!(u>=d);)++u;if(16<u-o&&n.buffer&&D)return D.decode(n.subarray(o,u));for(d="";o<u;){var y=n[o++];if(y&128){var b=n[o++]&63;if((y&224)==192)d+=String.fromCharCode((y&31)<<6|b);else{var O=n[o++]&63;y=(y&240)==224?(y&15)<<12|b<<6|O:(y&7)<<18|b<<12|O<<6|n[o++]&63,65536>y?d+=String.fromCharCode(y):(y-=65536,d+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else d+=String.fromCharCode(y)}return d},A=(n,o)=>n?k(ye,n,o):"",L=(n,o)=>{for(var u=0,d=n.length-1;0<=d;d--){var y=n[d];y==="."?n.splice(d,1):y===".."?(n.splice(d,1),u++):u&&(n.splice(d,1),u--)}if(o)for(;u;u--)n.unshift("..");return n},I=n=>{var o=n.charAt(0)==="/",u=n.substr(-1)==="/";return(n=L(n.split("/").filter(d=>!!d),!o).join("/"))||o||(n="."),n&&u&&(n+="/"),(o?"/":"")+n},M=n=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=o[0],o=o[1],!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},U=n=>{if(n==="/")return"/";n=I(n),n=n.replace(/\/$/,"");var o=n.lastIndexOf("/");return o===-1?n:n.substr(o+1)},$=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(Ne)try{var n=Su;if(n.randomFillSync)return u=>n.randomFillSync(u);var o=n.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}zt("initRandomDevice")},K=n=>(K=$())(n);function ne(){for(var n="",o=!1,u=arguments.length-1;-1<=u&&!o;u--){if(o=0<=u?arguments[u]:"/",typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";n=o+"/"+n,o=o.charAt(0)==="/"}return n=L(n.split("/").filter(d=>!!d),!o).join("/"),(o?"/":"")+n||"."}var we=[],ge=n=>{for(var o=0,u=0;u<n.length;++u){var d=n.charCodeAt(u);127>=d?o++:2047>=d?o+=2:55296<=d&&57343>=d?(o+=4,++u):o+=3}return o},Le=(n,o,u,d)=>{if(!(0<d))return 0;var y=u;d=u+d-1;for(var b=0;b<n.length;++b){var O=n.charCodeAt(b);if(55296<=O&&57343>=O){var H=n.charCodeAt(++b);O=65536+((O&1023)<<10)|H&1023}if(127>=O){if(u>=d)break;o[u++]=O}else{if(2047>=O){if(u+1>=d)break;o[u++]=192|O>>6}else{if(65535>=O){if(u+2>=d)break;o[u++]=224|O>>12}else{if(u+3>=d)break;o[u++]=240|O>>18,o[u++]=128|O>>12&63}o[u++]=128|O>>6&63}o[u++]=128|O&63}}return o[u]=0,u-y};function It(n,o){var u=Array(ge(n)+1);return n=Le(n,u,0,u.length),o&&(u.length=n),u}var Wr=[];function es(n,o){Wr[n]={input:[],output:[],Xa:o},cu(n,xn)}var xn={open(n){var o=Wr[n.node.rdev];if(!o)throw new P(43);n.tty=o,n.seekable=!1},close(n){n.tty.Xa.fsync(n.tty)},fsync(n){n.tty.Xa.fsync(n.tty)},read(n,o,u,d){if(!n.tty||!n.tty.Xa.sb)throw new P(60);for(var y=0,b=0;b<d;b++){try{var O=n.tty.Xa.sb(n.tty)}catch{throw new P(29)}if(O===void 0&&y===0)throw new P(6);if(O==null)break;y++,o[u+b]=O}return y&&(n.node.timestamp=Date.now()),y},write(n,o,u,d){if(!n.tty||!n.tty.Xa.jb)throw new P(60);try{for(var y=0;y<d;y++)n.tty.Xa.jb(n.tty,o[u+y])}catch{throw new P(29)}return d&&(n.node.timestamp=Date.now()),y}},lo={sb(){e:{if(!we.length){var n=null;if(Ne){var o=Buffer.alloc(256),u=0,d=process.stdin.fd;try{u=le.readSync(d,o)}catch(y){if(y.toString().includes("EOF"))u=0;else throw y}0<u?n=o.slice(0,u).toString("utf-8"):n=null}else typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`));if(!n){n=null;break e}we=It(n,!0)}n=we.shift()}return n},jb(n,o){o===null||o===10?(lt(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(lt(k(n.output,0)),n.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},gt={jb(n,o){o===null||o===10?(re(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(re(k(n.output,0)),n.output=[])}};function Dt(n,o){var u=n.Ia?n.Ia.length:0;u>=o||(o=Math.max(o,u*(1048576>u?2:1.125)>>>0),u!=0&&(o=Math.max(o,256)),u=n.Ia,n.Ia=new Uint8Array(o),0<n.Ma&&n.Ia.set(u.subarray(0,n.Ma),0))}var ie={Qa:null,Ra(){return ie.createNode(null,"/",16895,0)},createNode(n,o,u,d){if((u&61440)===24576||(u&61440)===4096)throw new P(63);return ie.Qa||(ie.Qa={dir:{node:{Pa:ie.Ga.Pa,Oa:ie.Ga.Oa,lookup:ie.Ga.lookup,ab:ie.Ga.ab,rename:ie.Ga.rename,unlink:ie.Ga.unlink,rmdir:ie.Ga.rmdir,readdir:ie.Ga.readdir,symlink:ie.Ga.symlink},stream:{Ta:ie.Ha.Ta}},file:{node:{Pa:ie.Ga.Pa,Oa:ie.Ga.Oa},stream:{Ta:ie.Ha.Ta,read:ie.Ha.read,write:ie.Ha.write,lb:ie.Ha.lb,bb:ie.Ha.bb,cb:ie.Ha.cb}},link:{node:{Pa:ie.Ga.Pa,Oa:ie.Ga.Oa,readlink:ie.Ga.readlink},stream:{}},pb:{node:{Pa:ie.Ga.Pa,Oa:ie.Ga.Oa},stream:Kf}}),u=nc(n,o,u,d),Vt(u.mode)?(u.Ga=ie.Qa.dir.node,u.Ha=ie.Qa.dir.stream,u.Ia={}):(u.mode&61440)===32768?(u.Ga=ie.Qa.file.node,u.Ha=ie.Qa.file.stream,u.Ma=0,u.Ia=null):(u.mode&61440)===40960?(u.Ga=ie.Qa.link.node,u.Ha=ie.Qa.link.stream):(u.mode&61440)===8192&&(u.Ga=ie.Qa.pb.node,u.Ha=ie.Qa.pb.stream),u.timestamp=Date.now(),n&&(n.Ia[o]=u,n.timestamp=u.timestamp),u},Lb(n){return n.Ia?n.Ia.subarray?n.Ia.subarray(0,n.Ma):new Uint8Array(n.Ia):new Uint8Array(0)},Ga:{Pa(n){var o={};return o.dev=(n.mode&61440)===8192?n.id:1,o.ino=n.id,o.mode=n.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=n.rdev,Vt(n.mode)?o.size=4096:(n.mode&61440)===32768?o.size=n.Ma:(n.mode&61440)===40960?o.size=n.link.length:o.size=0,o.atime=new Date(n.timestamp),o.mtime=new Date(n.timestamp),o.ctime=new Date(n.timestamp),o.zb=4096,o.blocks=Math.ceil(o.size/o.zb),o},Oa(n,o){if(o.mode!==void 0&&(n.mode=o.mode),o.timestamp!==void 0&&(n.timestamp=o.timestamp),o.size!==void 0&&(o=o.size,n.Ma!=o))if(o==0)n.Ia=null,n.Ma=0;else{var u=n.Ia;n.Ia=new Uint8Array(o),u&&n.Ia.set(u.subarray(0,Math.min(o,n.Ma))),n.Ma=o}},lookup(){throw uu[44]},ab(n,o,u,d){return ie.createNode(n,o,u,d)},rename(n,o,u){if(Vt(n.mode)){try{var d=On(o,u)}catch{}if(d)for(var y in d.Ia)throw new P(55)}delete n.parent.Ia[n.name],n.parent.timestamp=Date.now(),n.name=u,o.Ia[u]=n,o.timestamp=n.parent.timestamp,n.parent=o},unlink(n,o){delete n.Ia[o],n.timestamp=Date.now()},rmdir(n,o){var u=On(n,o),d;for(d in u.Ia)throw new P(55);delete n.Ia[o],n.timestamp=Date.now()},readdir(n){var o=[".",".."],u;for(u of Object.keys(n.Ia))o.push(u);return o},symlink(n,o,u){return n=ie.createNode(n,o,41471,0),n.link=u,n},readlink(n){if((n.mode&61440)!==40960)throw new P(28);return n.link}},Ha:{read(n,o,u,d,y){var b=n.node.Ia;if(y>=n.node.Ma)return 0;if(n=Math.min(n.node.Ma-y,d),8<n&&b.subarray)o.set(b.subarray(y,y+n),u);else for(d=0;d<n;d++)o[u+d]=b[y+d];return n},write(n,o,u,d,y,b){if(o.buffer===qe.buffer&&(b=!1),!d)return 0;if(n=n.node,n.timestamp=Date.now(),o.subarray&&(!n.Ia||n.Ia.subarray)){if(b)return n.Ia=o.subarray(u,u+d),n.Ma=d;if(n.Ma===0&&y===0)return n.Ia=o.slice(u,u+d),n.Ma=d;if(y+d<=n.Ma)return n.Ia.set(o.subarray(u,u+d),y),d}if(Dt(n,y+d),n.Ia.subarray&&o.subarray)n.Ia.set(o.subarray(u,u+d),y);else for(b=0;b<d;b++)n.Ia[y+b]=o[u+b];return n.Ma=Math.max(n.Ma,y+d),d},Ta(n,o,u){if(u===1?o+=n.position:u===2&&(n.node.mode&61440)===32768&&(o+=n.node.Ma),0>o)throw new P(28);return o},lb(n,o,u){Dt(n.node,o+u),n.node.Ma=Math.max(n.node.Ma,o+u)},bb(n,o,u,d,y){if((n.node.mode&61440)!==32768)throw new P(43);if(n=n.node.Ia,y&2||n.buffer!==qe.buffer){if((0<u||u+o<n.length)&&(n.subarray?n=n.subarray(u,u+o):n=Array.prototype.slice.call(n,u,u+o)),u=!0,o=65536*Math.ceil(o/65536),(y=Cc(65536,o))?(ye.fill(0,y,y+o),o=y):o=0,!o)throw new P(48);qe.set(n,o)}else u=!1,o=n.byteOffset;return{Db:o,ub:u}},cb(n,o,u,d){return ie.Ha.write(n,o,0,d,u,!1),0}}},Zl=(n,o)=>{var u=0;return n&&(u|=365),o&&(u|=146),u},au=null,ec={},ts=[],Vf=1,Kr=null,tc=!0,P=null,uu={};function Et(n,o={}){if(n=ne(n),!n)return{path:"",node:null};if(o=Object.assign({qb:!0,kb:0},o),8<o.kb)throw new P(32);n=n.split("/").filter(O=>!!O);for(var u=au,d="/",y=0;y<n.length;y++){var b=y===n.length-1;if(b&&o.parent)break;if(u=On(u,n[y]),d=I(d+"/"+n[y]),u.Va&&(!b||b&&o.qb)&&(u=u.Va.root),!b||o.Sa){for(b=0;(u.mode&61440)===40960;)if(u=dc(d),d=ne(M(d),u),u=Et(d,{kb:o.kb+1}).node,40<b++)throw new P(32)}}return{path:d,node:u}}function rs(n){for(var o;;){if(n===n.parent)return n=n.Ra.tb,o?n[n.length-1]!=="/"?`${n}/${o}`:n+o:n;o=o?`${n.name}/${o}`:n.name,n=n.parent}}function lu(n,o){for(var u=0,d=0;d<o.length;d++)u=(u<<5)-u+o.charCodeAt(d)|0;return(n+u>>>0)%Kr.length}function rc(n){var o=lu(n.parent.id,n.name);if(Kr[o]===n)Kr[o]=n.Wa;else for(o=Kr[o];o;){if(o.Wa===n){o.Wa=n.Wa;break}o=o.Wa}}function On(n,o){var u;if(u=(u=si(n,"x"))?u:n.Ga.lookup?0:2)throw new P(u,n);for(u=Kr[lu(n.id,o)];u;u=u.Wa){var d=u.name;if(u.parent.id===n.id&&d===o)return u}return n.Ga.lookup(n,o)}function nc(n,o,u,d){return n=new xc(n,o,u,d),o=lu(n.parent.id,n.name),n.Wa=Kr[o],Kr[o]=n}function Vt(n){return(n&61440)===16384}function ic(n){var o=["r","w","rw"][n&3];return n&512&&(o+="w"),o}function si(n,o){if(tc)return 0;if(!o.includes("r")||n.mode&292){if(o.includes("w")&&!(n.mode&146)||o.includes("x")&&!(n.mode&73))return 2}else return 2;return 0}function sc(n,o){try{return On(n,o),20}catch{}return si(n,"wx")}function oc(n,o,u){try{var d=On(n,o)}catch(y){return y.Ka}if(n=si(n,"wx"))return n;if(u){if(!Vt(d.mode))return 54;if(d===d.parent||rs(d)==="/")return 10}else if(Vt(d.mode))return 31;return 0}function Jf(){for(var n=0;4096>=n;n++)if(!ts[n])return n;throw new P(33)}function bt(n){if(n=ts[n],!n)throw new P(8);return n}function ac(n,o=-1){return ss||(ss=function(){this.$a={}},ss.prototype={},Object.defineProperties(ss.prototype,{object:{get(){return this.node},set(u){this.node=u}},flags:{get(){return this.$a.flags},set(u){this.$a.flags=u}},position:{get(){return this.$a.position},set(u){this.$a.position=u}}})),n=Object.assign(new ss,n),o==-1&&(o=Jf()),n.fd=o,ts[o]=n}var Kf={open(n){n.Ha=ec[n.node.rdev].Ha,n.Ha.open?.(n)},Ta(){throw new P(70)}};function cu(n,o){ec[n]={Ha:o}}function uc(n,o){var u=o==="/",d=!o;if(u&&au)throw new P(10);if(!u&&!d){var y=Et(o,{qb:!1});if(o=y.path,y=y.node,y.Va)throw new P(10);if(!Vt(y.mode))throw new P(54)}o={type:n,Pb:{},tb:o,Cb:[]},n=n.Ra(o),n.Ra=o,o.root=n,u?au=n:y&&(y.Va=o,y.Ra&&y.Ra.Cb.push(o))}function co(n,o,u){var d=Et(n,{parent:!0}).node;if(n=U(n),!n||n==="."||n==="..")throw new P(28);var y=sc(d,n);if(y)throw new P(y);if(!d.Ga.ab)throw new P(63);return d.Ga.ab(d,n,o,u)}function fr(n,o){return co(n,(o!==void 0?o:511)&1023|16384,0)}function ho(n,o,u){typeof u>"u"&&(u=o,o=438),co(n,o|8192,u)}function du(n,o){if(!ne(n))throw new P(44);var u=Et(o,{parent:!0}).node;if(!u)throw new P(44);o=U(o);var d=sc(u,o);if(d)throw new P(d);if(!u.Ga.symlink)throw new P(63);u.Ga.symlink(u,o,n)}function lc(n){var o=Et(n,{parent:!0}).node;n=U(n);var u=On(o,n),d=oc(o,n,!0);if(d)throw new P(d);if(!o.Ga.rmdir)throw new P(63);if(u.Va)throw new P(10);o.Ga.rmdir(o,n),rc(u)}function cc(n){var o=Et(n,{parent:!0}).node;if(!o)throw new P(44);n=U(n);var u=On(o,n),d=oc(o,n,!1);if(d)throw new P(d);if(!o.Ga.unlink)throw new P(63);if(u.Va)throw new P(10);o.Ga.unlink(o,n),rc(u)}function dc(n){if(n=Et(n).node,!n)throw new P(44);if(!n.Ga.readlink)throw new P(28);return ne(rs(n.parent),n.Ga.readlink(n))}function ns(n,o){if(n=Et(n,{Sa:!o}).node,!n)throw new P(44);if(!n.Ga.Pa)throw new P(63);return n.Ga.Pa(n)}function hc(n){return ns(n,!0)}function fo(n,o){if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);n.Ga.Oa(n,{mode:o&4095|n.mode&-4096,timestamp:Date.now()})}function fc(n,o){if(0>o)throw new P(28);if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);if(Vt(n.mode))throw new P(31);if((n.mode&61440)!==32768)throw new P(28);var u=si(n,"w");if(u)throw new P(u);n.Ga.Oa(n,{size:o,timestamp:Date.now()})}function oi(n,o,u){if(n==="")throw new P(44);if(typeof o=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[o];if(typeof d>"u")throw Error(`Unknown file open mode: ${o}`);o=d}if(u=o&64?(typeof u>"u"?438:u)&4095|32768:0,typeof n=="object")var y=n;else{n=I(n);try{y=Et(n,{Sa:!(o&131072)}).node}catch{}}if(d=!1,o&64)if(y){if(o&128)throw new P(20)}else y=co(n,u,0),d=!0;if(!y)throw new P(44);if((y.mode&61440)===8192&&(o&=-513),o&65536&&!Vt(y.mode))throw new P(54);if(!d&&(u=y?(y.mode&61440)===40960?32:Vt(y.mode)&&(ic(o)!=="r"||o&512)?31:si(y,ic(o)):44))throw new P(u);return o&512&&!d&&fc(y,0),o&=-131713,y=ac({node:y,path:rs(y),flags:o,seekable:!0,position:0,Ha:y.Ha,Fb:[],error:!1}),y.Ha.open&&y.Ha.open(y),!h.logReadFiles||o&1||(fu||(fu={}),n in fu||(fu[n]=1)),y}function hu(n){if(n.fd===null)throw new P(8);n.hb&&(n.hb=null);try{n.Ha.close&&n.Ha.close(n)}catch(o){throw o}finally{ts[n.fd]=null}n.fd=null}function pc(n,o,u){if(n.fd===null)throw new P(8);if(!n.seekable||!n.Ha.Ta)throw new P(70);if(u!=0&&u!=1&&u!=2)throw new P(28);n.position=n.Ha.Ta(n,o,u),n.Fb=[]}function mc(n,o,u,d,y){if(0>d||0>y)throw new P(28);if(n.fd===null)throw new P(8);if((n.flags&2097155)===1)throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.read)throw new P(28);var b=typeof y<"u";if(!b)y=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.read(n,o,u,d,y),b||(n.position+=o),o}function yc(n,o,u,d,y){if(0>d||0>y)throw new P(28);if(n.fd===null)throw new P(8);if(!(n.flags&2097155))throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.write)throw new P(28);n.seekable&&n.flags&1024&&pc(n,0,2);var b=typeof y<"u";if(!b)y=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.write(n,o,u,d,y,void 0),b||(n.position+=o),o}function Hf(n){var o,u=oi(n,u||0);n=ns(n).size;var d=new Uint8Array(n);return mc(u,d,0,n,0),o=d,hu(u),o}function wc(){P||(P=function(n,o){this.name="ErrnoError",this.node=o,this.Eb=function(u){this.Ka=u},this.Eb(n),this.message="FS error"},P.prototype=Error(),P.prototype.constructor=P,[44].forEach(n=>{uu[n]=new P(n),uu[n].stack="<generic error, no stack>"}))}var Nc;function is(n,o,u){n=I("/dev/"+n);var d=Zl(!!o,!!u);gc||(gc=64);var y=gc++<<8|0;cu(y,{open(b){b.seekable=!1},close(){u?.buffer?.length&&u(10)},read(b,O,H,fe){for(var se=0,Ge=0;Ge<fe;Ge++){try{var ot=o()}catch{throw new P(29)}if(ot===void 0&&se===0)throw new P(6);if(ot==null)break;se++,O[H+Ge]=ot}return se&&(b.node.timestamp=Date.now()),se},write(b,O,H,fe){for(var se=0;se<fe;se++)try{u(O[H+se])}catch{throw new P(29)}return fe&&(b.node.timestamp=Date.now()),se}}),ho(n,d,y)}var gc,Me={},ss,fu;function Cn(n,o,u){if(o.charAt(0)==="/")return o;if(n=n===-100?"/":bt(n).path,o.length==0){if(!u)throw new P(44);return n}return I(n+"/"+o)}function po(n,o,u){try{var d=n(o)}catch(b){if(b&&b.node&&I(o)!==I(rs(b.node)))return-54;throw b}V[u>>2]=d.dev,V[u+4>>2]=d.mode,We[u+8>>2]=d.nlink,V[u+12>>2]=d.uid,V[u+16>>2]=d.gid,V[u+20>>2]=d.rdev,w=[d.size>>>0,(p=d.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+24>>2]=w[0],V[u+28>>2]=w[1],V[u+32>>2]=4096,V[u+36>>2]=d.blocks,n=d.atime.getTime(),o=d.mtime.getTime();var y=d.ctime.getTime();return w=[Math.floor(n/1e3)>>>0,(p=Math.floor(n/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+40>>2]=w[0],V[u+44>>2]=w[1],We[u+48>>2]=n%1e3*1e3,w=[Math.floor(o/1e3)>>>0,(p=Math.floor(o/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+56>>2]=w[0],V[u+60>>2]=w[1],We[u+64>>2]=o%1e3*1e3,w=[Math.floor(y/1e3)>>>0,(p=Math.floor(y/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+72>>2]=w[0],V[u+76>>2]=w[1],We[u+80>>2]=y%1e3*1e3,w=[d.ino>>>0,(p=d.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+88>>2]=w[0],V[u+92>>2]=w[1],0}var mo=void 0;function yo(){var n=V[+mo>>2];return mo+=4,n}var os=(n,o)=>o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN,Gf=[0,31,60,91,121,152,182,213,244,274,305,335],zf=[0,31,59,90,120,151,181,212,243,273,304,334],bc=n=>{var o=ge(n)+1,u=bo(o);return u&&Le(n,ye,u,o),u},pu={},vc=()=>{if(!mu){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:q||"./this.program"},o;for(o in pu)pu[o]===void 0?delete n[o]:n[o]=pu[o];var u=[];for(o in n)u.push(`${o}=${n[o]}`);mu=u}return mu},mu,yu=n=>{var o=ge(n)+1,u=Hr(o);return Le(n,ye,u,o),u},Yf=(n,o,u,d)=>{var y={string:se=>{var Ge=0;return se!=null&&se!==0&&(Ge=yu(se)),Ge},array:se=>{var Ge=Hr(se.length);return qe.set(se,Ge),Ge}};n=h["_"+n];var b=[],O=0;if(d)for(var H=0;H<d.length;H++){var fe=y[u[H]];fe?(O===0&&(O=as()),b[H]=fe(d[H])):b[H]=d[H]}return u=n.apply(null,b),u=function(se){return O!==0&&us(O),o==="string"?se?k(ye,se):"":o==="boolean"?!!se:se}(u)},wo=0,No=(n,o)=>(o=o==1?Hr(n.length):bo(n.length),n.subarray||n.slice||(n=new Uint8Array(n)),ye.set(n,o),o),_n,wu=[],Ir,ai=n=>{_n.delete(Ir.get(n)),Ir.set(n,null),wu.push(n)},go=(n,o)=>{if(!_n){_n=new WeakMap;var u=Ir.length;if(_n)for(var d=0;d<0+u;d++){var y=Ir.get(d);y&&_n.set(y,d)}}if(u=_n.get(n)||0)return u;if(wu.length)u=wu.pop();else{try{Ir.grow(1)}catch(H){throw H instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":H}u=Ir.length-1}try{Ir.set(u,n)}catch(H){if(!(H instanceof TypeError))throw H;if(typeof WebAssembly.Function=="function"){d=WebAssembly.Function,y={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:o[0]=="v"?[]:[y[o[0]]]},O=1;O<o.length;++O)b.parameters.push(y[o[O]]);o=new d(b,n)}else{for(d=[1],y=o.slice(0,1),o=o.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96),O=o.length,128>O?d.push(O):d.push(O%128|128,O>>7),O=0;O<o.length;++O)d.push(b[o[O]]);y=="v"?d.push(0):d.push(1,b[y]),o=[0,97,115,109,1,0,0,0,1],y=d.length,128>y?o.push(y):o.push(y%128|128,y>>7),o.push.apply(o,d),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:n}}).exports.f}Ir.set(u,o)}return _n.set(n,u),u};function xc(n,o,u,d){n||(n=this),this.parent=n,this.Ra=n.Ra,this.Va=null,this.id=Vf++,this.name=o,this.mode=u,this.Ga={},this.Ha={},this.rdev=d}Object.defineProperties(xc.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),wc(),Kr=Array(4096),uc(ie,"/"),fr("/tmp"),fr("/home"),fr("/home/web_user"),function(){fr("/dev"),cu(259,{read:()=>0,write:(d,y,b,O)=>O}),ho("/dev/null",259),es(1280,lo),es(1536,gt),ho("/dev/tty",1280),ho("/dev/tty1",1536);var n=new Uint8Array(1024),o=0,u=()=>(o===0&&(o=K(n).byteLength),n[--o]);is("random",u),is("urandom",u),fr("/dev/shm"),fr("/dev/shm/tmp")}(),function(){fr("/proc");var n=fr("/proc/self");fr("/proc/self/fd"),uc({Ra(){var o=nc(n,"fd",16895,73);return o.Ga={lookup(u,d){var y=bt(+d);return u={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>y.path}},u.parent=u}},o}},"/proc/self/fd")}();var Xf={a:(n,o,u,d)=>{zt(`Assertion failed: ${n?k(ye,n):""}, at: `+[o?o?k(ye,o):"":"unknown filename",u,d?d?k(ye,d):"":"unknown function"])},h:function(n,o){try{return n=n?k(ye,n):"",fo(n,o),0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},H:function(n,o,u){try{if(o=o?k(ye,o):"",o=Cn(n,o),u&-8)return-28;var d=Et(o,{Sa:!0}).node;return d?(n="",u&4&&(n+="r"),u&2&&(n+="w"),u&1&&(n+="x"),n&&si(d,n)?-2:0):-44}catch(y){if(typeof Me>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},i:function(n,o){try{var u=bt(n);return fo(u.node,o),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},g:function(n){try{var o=bt(n).node,u=typeof o=="string"?Et(o,{Sa:!0}).node:o;if(!u.Ga.Oa)throw new P(63);return u.Ga.Oa(u,{timestamp:Date.now()}),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},b:function(n,o,u){mo=u;try{var d=bt(n);switch(o){case 0:var y=yo();if(0>y)return-28;for(;ts[y];)y++;return ac(d,y).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return y=yo(),d.flags|=y,0;case 5:return y=yo(),dr[y+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return V[Oc()>>2]=28,-1;default:return-28}}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},f:function(n,o){try{var u=bt(n);return po(ns,u.path,o)}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},n:function(n,o,u){o=os(o,u);try{if(isNaN(o))return 61;var d=bt(n);if(!(d.flags&2097155))throw new P(28);return fc(d.node,o),0}catch(y){if(typeof Me>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},C:function(n,o){try{if(o===0)return-28;var u=ge("/")+1;return o<u?-68:(Le("/",ye,n,o),u)}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},F:function(n,o){try{return n=n?k(ye,n):"",po(hc,n,o)}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},z:function(n,o,u){try{return o=o?k(ye,o):"",o=Cn(n,o),o=I(o),o[o.length-1]==="/"&&(o=o.substr(0,o.length-1)),fr(o,u),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},E:function(n,o,u,d){try{o=o?k(ye,o):"";var y=d&256;return o=Cn(n,o,d&4096),po(y?hc:ns,o,u)}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},y:function(n,o,u,d){mo=d;try{o=o?k(ye,o):"",o=Cn(n,o);var y=d?yo():0;return oi(o,u,y).fd}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},w:function(n,o,u,d){try{if(o=o?k(ye,o):"",o=Cn(n,o),0>=d)return-28;var y=dc(o),b=Math.min(d,ge(y)),O=qe[u+b];return Le(y,ye,u,d+1),qe[u+b]=O,b}catch(H){if(typeof Me>"u"||H.name!=="ErrnoError")throw H;return-H.Ka}},v:function(n){try{return n=n?k(ye,n):"",lc(n),0}catch(o){if(typeof Me>"u"||o.name!=="ErrnoError")throw o;return-o.Ka}},G:function(n,o){try{return n=n?k(ye,n):"",po(ns,n,o)}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},r:function(n,o,u){try{return o=o?k(ye,o):"",o=Cn(n,o),u===0?cc(o):u===512?lc(o):zt("Invalid flags passed to unlinkat"),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},q:function(n,o,u){try{if(o=o?k(ye,o):"",o=Cn(n,o,!0),u){var d=We[u>>2]+4294967296*V[u+4>>2],y=V[u+8>>2];b=1e3*d+y/1e6,u+=16,d=We[u>>2]+4294967296*V[u+4>>2],y=V[u+8>>2],O=1e3*d+y/1e6}else var b=Date.now(),O=b;n=b;var H=Et(o,{Sa:!0}).node;return H.Ga.Oa(H,{timestamp:Math.max(n,O)}),0}catch(fe){if(typeof Me>"u"||fe.name!=="ErrnoError")throw fe;return-fe.Ka}},l:function(n,o,u){n=new Date(1e3*os(n,o)),V[u>>2]=n.getSeconds(),V[u+4>>2]=n.getMinutes(),V[u+8>>2]=n.getHours(),V[u+12>>2]=n.getDate(),V[u+16>>2]=n.getMonth(),V[u+20>>2]=n.getFullYear()-1900,V[u+24>>2]=n.getDay(),o=n.getFullYear(),V[u+28>>2]=(o%4!==0||o%100===0&&o%400!==0?zf:Gf)[n.getMonth()]+n.getDate()-1|0,V[u+36>>2]=-(60*n.getTimezoneOffset()),o=new Date(n.getFullYear(),6,1).getTimezoneOffset();var d=new Date(n.getFullYear(),0,1).getTimezoneOffset();V[u+32>>2]=(o!=d&&n.getTimezoneOffset()==Math.min(d,o))|0},j:function(n,o,u,d,y,b,O,H){y=os(y,b);try{if(isNaN(y))return 61;var fe=bt(d);if(o&2&&!(u&2)&&(fe.flags&2097155)!==2)throw new P(2);if((fe.flags&2097155)===1)throw new P(2);if(!fe.Ha.bb)throw new P(43);var se=fe.Ha.bb(fe,n,y,o,u),Ge=se.Db;return V[O>>2]=se.ub,We[H>>2]=Ge,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return-ot.Ka}},k:function(n,o,u,d,y,b,O){b=os(b,O);try{if(isNaN(b))return 61;var H=bt(y);if(u&2){if((H.node.mode&61440)!==32768)throw new P(43);if(!(d&2)){var fe=ye.slice(n,n+o);H.Ha.cb&&H.Ha.cb(H,fe,b,o,d)}}}catch(se){if(typeof Me>"u"||se.name!=="ErrnoError")throw se;return-se.Ka}},s:(n,o,u)=>{function d(fe){return(fe=fe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?fe[1]:"GMT"}var y=new Date().getFullYear(),b=new Date(y,0,1),O=new Date(y,6,1);y=b.getTimezoneOffset();var H=O.getTimezoneOffset();We[n>>2]=60*Math.max(y,H),V[o>>2]=+(y!=H),n=d(b),o=d(O),n=bc(n),o=bc(o),H<y?(We[u>>2]=n,We[u+4>>2]=o):(We[u>>2]=o,We[u+4>>2]=n)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:n=>{var o=ye.length;if(n>>>=0,2147483648<n)return!1;for(var u=1;4>=u;u*=2){var d=o*(1+.2/u);d=Math.min(d,n+100663296);var y=Math;d=Math.max(n,d);e:{y=(y.min.call(y,2147483648,d+(65536-d%65536)%65536)-Xe.buffer.byteLength+65535)/65536;try{Xe.grow(y),Ae();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(n,o)=>{var u=0;return vc().forEach((d,y)=>{var b=o+u;for(y=We[n+4*y>>2]=b,b=0;b<d.length;++b)qe[y++>>0]=d.charCodeAt(b);qe[y>>0]=0,u+=d.length+1}),0},B:(n,o)=>{var u=vc();We[n>>2]=u.length;var d=0;return u.forEach(y=>d+=y.length+1),We[o>>2]=d,0},e:function(n){try{var o=bt(n);return hu(o),0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},p:function(n,o){try{var u=bt(n);return qe[o>>0]=u.tty?2:Vt(u.mode)?3:(u.mode&61440)===40960?7:4,dr[o+2>>1]=0,w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+8>>2]=w[0],V[o+12>>2]=w[1],w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+16>>2]=w[0],V[o+20>>2]=w[1],0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return d.Ka}},x:function(n,o,u,d){try{e:{var y=bt(n);n=o;for(var b,O=o=0;O<u;O++){var H=We[n>>2],fe=We[n+4>>2];n+=8;var se=mc(y,qe,H,fe,b);if(0>se){var Ge=-1;break e}if(o+=se,se<fe)break;typeof b<"u"&&(b+=se)}Ge=o}return We[d>>2]=Ge,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}},m:function(n,o,u,d,y){o=os(o,u);try{if(isNaN(o))return 61;var b=bt(n);return pc(b,o,d),w=[b.position>>>0,(p=b.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[y>>2]=w[0],V[y+4>>2]=w[1],b.hb&&o===0&&d===0&&(b.hb=null),0}catch(O){if(typeof Me>"u"||O.name!=="ErrnoError")throw O;return O.Ka}},D:function(n){try{var o=bt(n);return o.Ha?.fsync?o.Ha.fsync(o):0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},u:function(n,o,u,d){try{e:{var y=bt(n);n=o;for(var b,O=o=0;O<u;O++){var H=We[n>>2],fe=We[n+4>>2];n+=8;var se=yc(y,qe,H,fe,b);if(0>se){var Ge=-1;break e}o+=se,typeof b<"u"&&(b+=se)}Ge=o}return We[d>>2]=Ge,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}}},Q=function(){function n(u){return Q=u.exports,Xe=Q.I,Ae(),Ir=Q.Aa,hr.unshift(Q.J),st--,h.monitorRunDependencies?.(st),st==0&&Vr&&(u=Vr,Vr=null,u()),Q}var o={a:Xf};if(st++,h.monitorRunDependencies?.(st),h.instantiateWasm)try{return h.instantiateWasm(o,n)}catch(u){return re(`Module.instantiateWasm callback failed with error: ${u}`),!1}return Zi(o,function(u){n(u.instance)}),{}}();h._sqlite3_free=n=>(h._sqlite3_free=Q.K)(n),h._sqlite3_value_text=n=>(h._sqlite3_value_text=Q.L)(n);var Oc=()=>(Oc=Q.M)();h._sqlite3_prepare_v2=(n,o,u,d,y)=>(h._sqlite3_prepare_v2=Q.N)(n,o,u,d,y),h._sqlite3_step=n=>(h._sqlite3_step=Q.O)(n),h._sqlite3_finalize=n=>(h._sqlite3_finalize=Q.P)(n),h._sqlite3_reset=n=>(h._sqlite3_reset=Q.Q)(n),h._sqlite3_clear_bindings=n=>(h._sqlite3_clear_bindings=Q.R)(n),h._sqlite3_value_blob=n=>(h._sqlite3_value_blob=Q.S)(n),h._sqlite3_value_bytes=n=>(h._sqlite3_value_bytes=Q.T)(n),h._sqlite3_value_double=n=>(h._sqlite3_value_double=Q.U)(n),h._sqlite3_value_int=n=>(h._sqlite3_value_int=Q.V)(n),h._sqlite3_value_type=n=>(h._sqlite3_value_type=Q.W)(n),h._sqlite3_result_blob=(n,o,u,d)=>(h._sqlite3_result_blob=Q.X)(n,o,u,d),h._sqlite3_result_double=(n,o)=>(h._sqlite3_result_double=Q.Y)(n,o),h._sqlite3_result_error=(n,o,u)=>(h._sqlite3_result_error=Q.Z)(n,o,u),h._sqlite3_result_int=(n,o)=>(h._sqlite3_result_int=Q._)(n,o),h._sqlite3_result_int64=(n,o,u)=>(h._sqlite3_result_int64=Q.$)(n,o,u),h._sqlite3_result_null=n=>(h._sqlite3_result_null=Q.aa)(n),h._sqlite3_result_text=(n,o,u,d)=>(h._sqlite3_result_text=Q.ba)(n,o,u,d),h._sqlite3_aggregate_context=(n,o)=>(h._sqlite3_aggregate_context=Q.ca)(n,o),h._sqlite3_column_count=n=>(h._sqlite3_column_count=Q.da)(n),h._sqlite3_data_count=n=>(h._sqlite3_data_count=Q.ea)(n),h._sqlite3_column_blob=(n,o)=>(h._sqlite3_column_blob=Q.fa)(n,o),h._sqlite3_column_bytes=(n,o)=>(h._sqlite3_column_bytes=Q.ga)(n,o),h._sqlite3_column_double=(n,o)=>(h._sqlite3_column_double=Q.ha)(n,o),h._sqlite3_column_text=(n,o)=>(h._sqlite3_column_text=Q.ia)(n,o),h._sqlite3_column_type=(n,o)=>(h._sqlite3_column_type=Q.ja)(n,o),h._sqlite3_column_name=(n,o)=>(h._sqlite3_column_name=Q.ka)(n,o),h._sqlite3_bind_blob=(n,o,u,d,y)=>(h._sqlite3_bind_blob=Q.la)(n,o,u,d,y),h._sqlite3_bind_double=(n,o,u)=>(h._sqlite3_bind_double=Q.ma)(n,o,u),h._sqlite3_bind_int=(n,o,u)=>(h._sqlite3_bind_int=Q.na)(n,o,u),h._sqlite3_bind_text=(n,o,u,d,y)=>(h._sqlite3_bind_text=Q.oa)(n,o,u,d,y),h._sqlite3_bind_parameter_index=(n,o)=>(h._sqlite3_bind_parameter_index=Q.pa)(n,o),h._sqlite3_sql=n=>(h._sqlite3_sql=Q.qa)(n),h._sqlite3_normalized_sql=n=>(h._sqlite3_normalized_sql=Q.ra)(n),h._sqlite3_errmsg=n=>(h._sqlite3_errmsg=Q.sa)(n),h._sqlite3_exec=(n,o,u,d,y)=>(h._sqlite3_exec=Q.ta)(n,o,u,d,y),h._sqlite3_changes=n=>(h._sqlite3_changes=Q.ua)(n),h._sqlite3_close_v2=n=>(h._sqlite3_close_v2=Q.va)(n),h._sqlite3_create_function_v2=(n,o,u,d,y,b,O,H,fe)=>(h._sqlite3_create_function_v2=Q.wa)(n,o,u,d,y,b,O,H,fe),h._sqlite3_open=(n,o)=>(h._sqlite3_open=Q.xa)(n,o);var bo=h._malloc=n=>(bo=h._malloc=Q.ya)(n),vo=h._free=n=>(vo=h._free=Q.za)(n);h._RegisterExtensionFunctions=n=>(h._RegisterExtensionFunctions=Q.Ba)(n);var Cc=(n,o)=>(Cc=Q.Ca)(n,o),as=()=>(as=Q.Da)(),us=n=>(us=Q.Ea)(n),Hr=n=>(Hr=Q.Fa)(n);h.stackAlloc=Hr,h.stackSave=as,h.stackRestore=us,h.cwrap=(n,o,u,d)=>{var y=!u||u.every(b=>b==="number"||b==="boolean");return o!=="string"&&y&&!d?h["_"+n]:function(){return Yf(n,o,u,arguments)}},h.addFunction=go,h.removeFunction=ai,h.UTF8ToString=A,h.ALLOC_NORMAL=wo,h.allocate=No,h.allocateUTF8OnStack=yu;var xo;Vr=function n(){xo||_c(),xo||(Vr=n)};function _c(){function n(){if(!xo&&(xo=!0,h.calledRun=!0,!jr)){if(h.noFSInit||Nc||(Nc=!0,wc(),h.stdin=h.stdin,h.stdout=h.stdout,h.stderr=h.stderr,h.stdin?is("stdin",h.stdin):du("/dev/tty","/dev/stdin"),h.stdout?is("stdout",null,h.stdout):du("/dev/tty","/dev/stdout"),h.stderr?is("stderr",null,h.stderr):du("/dev/tty1","/dev/stderr"),oi("/dev/stdin",0),oi("/dev/stdout",1),oi("/dev/stderr",1)),tc=!1,v(hr),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var o=h.postRun.shift();vn.unshift(o)}v(vn)}}if(!(0<st)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)qr();v(Ce),0<st||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),n()},1)):n())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return _c(),m}),r)};t.exports=i,t.exports.default=i})(Rf);var BN=Rf.exports;const FN=DN(BN),UN=""+new URL("sql-wasm-O_OSQASm.wasm",import.meta.url).href,$N="sqlitevfs",hi=new Map,QN=2048,jN=65536;class VN{constructor(e){Z(this,"_data");Z(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const i=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(i),i.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,i=Math.min(jN,Math.max(QN,this._data.length)),a=new Uint8Array(this._data.length+Math.max(i,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const JN=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Kl=new Promise((t,e)=>{const r=JN.open($N,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function KN(t){const e=await Kl,r=await new Promise((i,a)=>{const f=e.transaction("files","readonly").objectStore("files").get(t);f.onsuccess=()=>i(f.result),f.onerror=()=>a(f.error)});if(r&&!hi.has(t)){const i=new VN(r.data);return hi.set(t,i),i}else return hi.has(t)?hi.get(t):null}async function HN(t,e){const r=await Kl;await new Promise((i,a)=>{const f=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});f.onsuccess=()=>i(!0),f.onerror=()=>a(f.error)})}async function Rd(t){const e=await Kl;await new Promise((r,i)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>i(l.error)})}async function GN(t,e){if(await HN(t,e),hi.has(t)){const r=hi.get(t);r.truncate(0),r.write(0,e)}}var zN=class extends Bl{constructor(e){super();Z(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:i,...a}=r,l=this.serializer(i);return i===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},Df=t=>{if(Pf(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},YN=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,XN=t=>{if(Pf(t))return t;if(typeof t=="string"){if(t==="true")return!0;if(t==="false")return!1;if(YN.test(t))return new Date(t);if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch{}return t}};function Pf(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var ZN=class{constructor(t={}){Z(this,"transformer");Z(this,"deserializer");Z(this,"skipNodeSet");Z(this,"ctx");const{deserializer:e=XN,serializer:r=Df,skipNodeKind:i=[]}=t;this.transformer=new zN(r),this.deserializer=e,i.length&&(this.skipNodeSet=new Set(i),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:t.rows.map(r=>Object.fromEntries(Object.entries(r).map(([i,a])=>[i,this.deserializer(a)])))}}};function Dd(t){const{logger:e,merge:r,logQueryNode:i}=t;return a=>{const{level:l,queryDurationMillis:f,query:{parameters:m,sql:N,query:h}}=a,x=l==="error"?a.error:void 0;let q=N.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&m.forEach(B=>{q=q.replace("?",JSON.stringify(B))});const R={sql:q,params:m,duration:f,error:x};i&&(R.queryNode=h),e(R)}}async function eg(t){const{rows:e}=await t.executeQuery(_r.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function Pd(t,e){if(e)return await t.executeQuery(_r.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(_r.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function tg(t){return`__pre_${t}`}function rg(t){return typeof t=="string"&&t.startsWith("__pre_")?t.slice(6):void 0}async function ng(t,e){const r=e||`sp_${Date.now()%1e8}`;return await nt`savepoint ${nt.raw(r)}`.execute(t),{release:async()=>{await nt`release savepoint ${nt.raw(r)}`.execute(t)},rollback:async()=>{await nt`rollback to savepoint ${nt.raw(r)}`.execute(t)}}}async function ig(t,e,r){const{release:i,rollback:a}=await ng(t,r);try{const l=await e(t);return await i(),l}catch(l){throw await a(),l}}function sg(t){return{selectFrom:e=>t().selectFrom(e),insertInto:e=>t().insertInto(e),updateTable:e=>t().updateTable(e),deleteFrom:e=>t().deleteFrom(e)}}var og=class extends Error{constructor(){super("db file maybe broken")}};function ag(t){return t.toOperationNode().kind==="SelectQueryNode"}var ug=class{constructor(t){Z(this,"_kysely");Z(this,"trxCount",0);Z(this,"trx");Z(this,"logger");Z(this,"executor");Z(this,"serializer",Df);const{dialect:e,logger:r,onQuery:i,plugins:a=[],serializerPluginOptions:l,executorFn:f=sg}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new ZN(l));let m;i===!0?m=Dd({logger:this.logger?.debug||console.log,merge:!0}):i&&(m=Dd(i)),this._kysely=new Qs({dialect:e,log:m,plugins:a}),this.executor=f(()=>this.kysely)}get kysely(){return this.trx||this._kysely}async syncDB(t,e){try{if(e&&!await eg(this._kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new og};const r=await t(this._kysely,this.logger);return this.logger?.info("table updated"),r}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await ig(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trxCount--)):await this._kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.executor).execute():await this.kysely.executeQuery(t)}async executeTakeFirst(t){let e=t(this.executor);return ag(e)&&(e=e.limit(1)),await e.executeTakeFirst()}precompile(t=e=>({kind:e.kind})){return this.logger?.debug?.("precompile"),{build:e=>{let r;const i=()=>r=null;return{[Symbol.dispose]:i,dispose:i,compile:a=>{if(!r){const{parameters:l,sql:f,query:m}=e(this.executor,tg).compile();r={sql:f,query:t(m),parameters:l}}return{...r,parameters:r.parameters.map(l=>{const f=rg(l);return f?this.serializer(a[f]):l})}}}}}}async raw(t,e){return typeof t=="string"?await this.kysely.executeQuery(_r.raw(t,e)):await t.execute(this.kysely)}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this._kysely.destroy(),this.trx=void 0}},Lf="__TIME_TRIGGER__";function lg(t,e){const{create:r,update:i}=e?.timeTrigger||{},a={type:"date",defaultTo:Lf};r===!0?t.createAt=a:r&&(t[r]=a),i===!0?t.updateAt={...a,notNull:!0}:i&&(t[i]={...a,notNull:!0});const l=e?.softDelete,f={type:"int",defaultTo:0};return l===!0?t.isDeleted=f:l&&(t[l]=f),{columns:t,...e}}function Mf(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function cl(t){return Array.isArray(t)?t:[t]}function cg(t){return typeof t=="function"}async function Au(t,e){await t.schema.dropTable(e).execute()}async function Ld(t,e,r){const{index:i,...a}=r,l=await Ff(t,e,a);await Uf(t,e,l),await Bf(t,e,i)}async function Bf(t,e,r){for(const i of r||[]){const a=cl(i);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function Ff(t,e,{columns:r,primary:i,timeTrigger:a,unique:l},f=!1){const m=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,h=t.schema.createTable(e);f&&(h=h.temporary());for(const[x,q]of Object.entries(r)){let R="text";const{type:B,notNull:Ne,defaultTo:J}=q,ke=Mf(B);R=ke.dataType,h=h.addColumn(x,R,j=>ke.isIncrements?(N=!0,m&&(m.triggerKey=x),j.autoIncrement().primaryKey()):J===Lf?(m&&Ne&&(m.update=x),j.defaultTo(nt`CURRENT_TIMESTAMP`)):(Ne===!0&&(j=j.notNull()),J!==void 0&&(j=j.defaultTo(cg(J)?J(nt):J)),j))}if(!N&&i){const x=cl(i);h=h.addPrimaryKeyConstraint(`pk#${x.join("#")}`,x)}for(const x of l||[]){const q=cl(x);h=h.addUniqueConstraint(`un#${q.join("#")}`,q)}return await h.ifNotExists().execute(),m}async function Uf(t,e,r){if(!r||!r.update)return;const{triggerKey:i,update:a}=r,l=`tgr_${e}_${a}`;await nt`create trigger if not exists ${nt.ref(l)}
after update
on ${nt.table(e)}
begin
  update ${nt.table(e)}
  set ${nt.ref(a)} = CURRENT_TIMESTAMP
  where ${nt.ref(i)} = NEW.${nt.ref(i)};
end`.execute(t)}async function dg(t,e,r){await t.schema.alterTable(e).renameTo(r).execute()}function hg(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,i,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:i,primary:void 0,unique:[]},f=a.matchAll(r);for(const m of f){const[,N,h,x]=m;if(N.startsWith("pk#")){const[,...q]=N.split("#");l.primary=q}else if(N.startsWith("un#")){const[,...q]=N.split("#");l.unique.push(q)}else l.columns[N]={type:h,notNull:!!x}}return l}async function fg(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",Ef).where("name","!=",Tf).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(f=>l("name","not like",`${f}%`))))).select(["name","sql","type"]).$castTo().execute(),i={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:f}of r)l&&(f==="table"?i.existTables[a]=hg(l):f==="index"?i.indexList.push(a):i.triggerList.push(a));return i}async function pg(t,e,r={},i){const{truncateIfExists:a=[],log:l,version:{current:f,skipSyncWhenSame:m}={},excludeTablePrefix:N,onSyncSuccess:h,onSyncFail:x}=r;if(f){if(m&&f===await Pd(t))return{ready:!0};await Pd(t,f)}const q=j=>l&&i?.debug(j),{existTables:R,indexList:B,triggerList:Ne}=await fg(t,N);q("====== update tables start ======");const J=new Set(Array.isArray(a)?a:a?Object.keys(R):[]);return await t.transaction().execute(async j=>{for(const te of B)await j.schema.dropIndex(te).ifExists().execute();for(const te of Ne)await nt`drop trigger if exists ${nt.ref(te)}`.execute(j);for(const[te,le]of Object.entries(R))if(!(te in e))q(`remove table: ${te}`),await Au(j,te);else{q(`diff table: ${te}`);try{await ke(j,te,le,e[te])}catch(Oe){throw i?.error(`fail to sync ${te}`,Oe),Oe}}for(const[te,le]of Object.entries(e))te in R||(q(`create table: ${te}`),await Ld(j,te,le))}).then(()=>(h?.(t),q("======= update tables success ======="),{ready:!0})).catch(j=>(x?.(j),q("======= update tables fail ======="),{ready:!1,error:j}));async function ke(j,te,le,Oe){if(J.has(te)){await Au(j,te),await Ld(j,te,Oe),q("clear and sync structure");return}const{index:lt,...re}=Oe,Ve=mg(le.columns,Oe.columns);if(Ve.length===Object.keys(le.columns).length){q("same table structure, skip");return}q("different table structure, update");const Xe=`_temp_${te}`,jr=await Ff(j,Xe,re);Ve.length&&await j.insertInto(Xe).columns(Ve).expression(qe=>qe.selectFrom(te).select(Ve)).execute(),await Au(j,te),await dg(j,Xe,te),await Bf(j,te,lt),await Uf(j,te,jr),q(`restore columns: ${Ve}`)}}function mg(t,e){const r=[];for(const[i,a]of Object.entries(e))i in t&&Mf(a.type).dataType===t[i].type&&(a.notNull||!1)===(t[i].notNull||!1)&&r.push(i);return r}function yg(t,e={}){const{log:r}=e;return(i,a)=>pg(i,t,e,r?a:void 0)}const wg={test:lg({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function $f(t){const e=new ug({dialect:t}),r=await e.syncDB(yg(wg));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let i=0;i<10;i++)await e.transaction(async()=>{await e.transaction(async()=>{if(i>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(i=>i.selectFrom("test").selectAll()).then(async i=>(await e.destroy(),console.log(i),i))}const Ng=new RN({async database(){const t=await FN({locateFile:()=>UN});return new t.Database(await KN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),GN("sqljs",t)},isThrottle:!0}});function gg(){const t=dm();function e(){$f(Ng).then(r=>{t.value=r})}return{result:t,run:e}}function bg(t){return new Worker(""+new URL("sqljsWorker-_pOOIhYK.js",import.meta.url).href,{type:"module",name:t?.name})}function vg(t){return new Worker(""+new URL("officialWasmWorker-_Pnq3V8U.js",import.meta.url).href,{type:"module",name:t?.name})}var xg=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let i;e?r?(i=t.get(e))&&i.splice(i.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(i=>i(...r))},once(e,r){let i=(...a)=>{r(...a),this.off(e,i)};this.on(e,i)}});function Og(){return"locks"in navigator}async function Qf(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),i=await new Promise((a,l)=>{r.onmessage=({data:f})=>{a(f)},r.onerror=f=>{f.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),i}catch{return!1}}function jf(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function Md(t,e){return typeof t=="function"?t(e):t}function Cg(t){return t?new Worker(new URL(""+new URL("worker-Cs2xuRzF.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-z_uG8b6d.js",import.meta.url).href,import.meta.url))}function _g(t){return t?new URL(""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-1p_8Y4mq.wasm",import.meta.url).href,import.meta.url).href}var qg=class{constructor(t){Z(this,"config");Z(this,"worker");Z(this,"connection");Z(this,"connectionMutex",new Wg);Z(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await Qf():!1;this.mitt=xg(),this.worker=Md(this.config.worker||Cg,t||jf()),this.worker.onmessage=({data:{type:e,...r}})=>{this.mitt?.emit(e,r)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:Md(this.config.url||_g,!t),useOPFS:t}),await new Promise((e,r)=>{this.mitt?.once("init",({err:i})=>{i?r(i):e()})}),this.connection=new Ig(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(_r.raw("begin"))}async commitTransaction(t){await t.executeQuery(_r.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(_r.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},Wg=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},Ig=class{constructor(t,e){Z(this,"worker");Z(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:i}=t,a=he.is(i);return this.worker.postMessage({type:"run",isSelect:a,sql:r,parameters:e}),new Promise((l,f)=>{!this.mitt&&f("kysely instance has been destroyed"),this.mitt.once("run",({data:m,err:N})=>{!N&&m?l(m):f(N)})})}},no,Fd,Eg=(Fd=class{constructor(t){_(this,no,void 0);S(this,no,t)}createDriver(){return new qg(s(this,no))}createQueryCompiler(){return new If}createAdapter(){return new Af}createIntrospector(t){return new kf(t)}},no=new WeakMap,Fd);const Tg=new Eg({fileName:"wa-sqlite-worker-test"});async function kg(){console.log("start wa-sqlite-worker test"),$f(Tg).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=jf(),r=Og(),i=await Qf();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",i)})}const Sg=rt("h1",null,[Ps(" test "),rt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ps(" WASM dialect ")],-1),Ag=rt("br",null,null,-1),Rg=rt("h3",null,"see worker result in console",-1),Dg=rt("h3",null,[Ps(" you can explore "),rt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ps(" file using "),rt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),Pg=rt("br",null,null,-1),Lg={class:"buttons"},Mg=rt("br",null,null,-1),Bg=rt("div",null," result run in main thread: ",-1),Fg=Am({__name:"App",setup(t){const e=new bg,{result:r,run:i}=gg(),a=new vg;function l(){i()}function f(){e.postMessage("")}function m(){a.postMessage("")}function N(){kg()}async function h(){try{(await window.indexedDB.databases()).forEach(R=>window.indexedDB.deleteDatabase(R.name))}catch{}}async function x(){console.clear(),await Rd("sqljs"),await Rd("sqljsWorker"),await h();const q=await navigator.storage?.getDirectory();try{await q.removeEntry("test.db")}catch{}try{await q.removeEntry("test.db-journal")}catch{}try{await q.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(q,R)=>(dy(),py(gr,null,[Sg,Ag,Rg,Dg,Pg,rt("div",Lg,[rt("button",{onClick:R[0]||(R[0]=B=>l())}," test sqljs in main thread "),rt("button",{onClick:R[1]||(R[1]=B=>f())}," test sqljs in Worker "),rt("button",{onClick:R[2]||(R[2]=B=>m())}," test officialWasm in Worker "),rt("button",{onClick:R[3]||(R[3]=B=>N())}," test wa-sqlite in Worker (Better Compability) "),rt("button",{onClick:R[4]||(R[4]=B=>x())}," clear ")]),Mg,Bg,rt("pre",null,""+Fp(dh(r))+`
  `,1)],64))}});Xy(Fg).mount("#root");
