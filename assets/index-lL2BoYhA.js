var qp=Object.defineProperty;var Wp=(t,e,r)=>e in t?qp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Z=(t,e,r)=>(Wp(t,typeof e!="symbol"?e+"":e,r),r),bu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(bu(t,e,"read from private field"),r?r.call(t):e.get(t)),_=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},A=(t,e,r,i)=>(bu(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var Ce=(t,e,r)=>(bu(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hl(t,e){const r=new Set(t.split(","));return e?i=>r.has(i.toLowerCase()):i=>r.has(i)}const Fe={},mi=[],Kt=()=>{},Ip=()=>!1,Ha=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fl=t=>t.startsWith("onUpdate:"),pt=Object.assign,pl=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Ep=Object.prototype.hasOwnProperty,we=(t,e)=>Ep.call(t,e),ee=Array.isArray,yi=t=>Ga(t)==="[object Map]",Ud=t=>Ga(t)==="[object Set]",oe=t=>typeof t=="function",ut=t=>typeof t=="string",Ki=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",$d=t=>(Ve(t)||oe(t))&&oe(t.then)&&oe(t.catch),Qd=Object.prototype.toString,Ga=t=>Qd.call(t),Tp=t=>Ga(t).slice(8,-1),jd=t=>Ga(t)==="[object Object]",ml=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ko=hl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),za=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Sp=/-(\w)/g,Fi=za(t=>t.replace(Sp,(e,r)=>r?r.toUpperCase():"")),kp=/\B([A-Z])/g,Hi=za(t=>t.replace(kp,"-$1").toLowerCase()),Vd=za(t=>t.charAt(0).toUpperCase()+t.slice(1)),vu=za(t=>t?`on${Vd(t)}`:""),mn=(t,e)=>!Object.is(t,e),xu=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},$o=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Ap=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Dc;const Jd=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yl(t){if(ee(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],a=ut(i)?Lp(i):yl(i);if(a)for(const l in a)e[l]=a[l]}return e}else if(ut(t)||Ve(t))return t}const Rp=/;(?![^(]*\))/g,Dp=/:([^]+)/,Pp=/\/\*[^]*?\*\//g;function Lp(t){const e={};return t.replace(Pp,"").split(Rp).forEach(r=>{if(r){const i=r.split(Dp);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function wl(t){let e="";if(ut(t))e=t;else if(ee(t))for(let r=0;r<t.length;r++){const i=wl(t[r]);i&&(e+=i+" ")}else if(Ve(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Mp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bp=hl(Mp);function Kd(t){return!!t||t===""}const Fp=t=>ut(t)?t:t==null?"":ee(t)||Ve(t)&&(t.toString===Qd||!oe(t.toString))?JSON.stringify(t,Hd,2):String(t),Hd=(t,e)=>e&&e.__v_isRef?Hd(t,e.value):yi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,a],l)=>(r[Ou(i,l)+" =>"]=a,r),{})}:Ud(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Ou(r))}:Ki(e)?Ou(e):Ve(e)&&!ee(e)&&!jd(e)?String(e):e,Ou=(t,e="")=>{var r;return Ki(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tr;class Up{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tr,!e&&tr&&(this.index=(tr.scopes||(tr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=tr;try{return tr=this,e()}finally{tr=r}}}on(){tr=this}off(){tr=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function $p(t,e=tr){e&&e.active&&e.effects.push(t)}function Qp(){return tr}let Gn;class Nl{constructor(e,r,i,a){this.fn=e,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,$p(this,a)}get dirty(){if(this._dirtyLevel===1){Zn();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(jp(r.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),ei()}return this._dirtyLevel>=2}set dirty(e){this._dirtyLevel=e?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=dn,r=Gn;try{return dn=!0,Gn=this,this._runnings++,Pc(this),this.fn()}finally{Lc(this),this._runnings--,Gn=r,dn=e}}stop(){var e;this.active&&(Pc(this),Lc(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function jp(t){return t.value}function Pc(t){t._trackId++,t._depsLength=0}function Lc(t){if(t.deps&&t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Gd(t.deps[e],t);t.deps.length=t._depsLength}}function Gd(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let dn=!0,Ru=0;const zd=[];function Zn(){zd.push(dn),dn=!1}function ei(){const t=zd.pop();dn=t===void 0?!0:t}function gl(){Ru++}function bl(){for(Ru--;!Ru&&Du.length;)Du.shift()()}function Yd(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&Gd(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Du=[];function Xd(t,e,r){gl();for(const i of t.keys())if(i._dirtyLevel<e&&t.get(i)===i._trackId){const a=i._dirtyLevel;i._dirtyLevel=e,a===0&&(i._shouldSchedule=!0,i.trigger())}Zd(t),bl()}function Zd(t){for(const e of t.keys())e.scheduler&&e._shouldSchedule&&(!e._runnings||e.allowRecurse)&&t.get(e)===e._trackId&&(e._shouldSchedule=!1,Du.push(e.scheduler))}const eh=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},Pu=new WeakMap,zn=Symbol(""),Lu=Symbol("");function At(t,e,r){if(dn&&Gn){let i=Pu.get(t);i||Pu.set(t,i=new Map);let a=i.get(r);a||i.set(r,a=eh(()=>i.delete(r))),Yd(Gn,a)}}function Br(t,e,r,i,a,l){const h=Pu.get(t);if(!h)return;let y=[];if(e==="clear")y=[...h.values()];else if(r==="length"&&ee(t)){const N=Number(i);h.forEach((f,x)=>{(x==="length"||!Ki(x)&&x>=N)&&y.push(f)})}else switch(r!==void 0&&y.push(h.get(r)),e){case"add":ee(t)?ml(r)&&y.push(h.get("length")):(y.push(h.get(zn)),yi(t)&&y.push(h.get(Lu)));break;case"delete":ee(t)||(y.push(h.get(zn)),yi(t)&&y.push(h.get(Lu)));break;case"set":yi(t)&&y.push(h.get(zn));break}gl();for(const N of y)N&&Xd(N,2);bl()}const Vp=hl("__proto__,__v_isRef,__isVue"),th=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ki)),Mc=Jp();function Jp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=ve(this);for(let l=0,h=this.length;l<h;l++)At(i,"get",l+"");const a=i[e](...r);return a===-1||a===!1?i[e](...r.map(ve)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Zn(),gl();const i=ve(this)[e].apply(this,r);return bl(),ei(),i}}),t}function Kp(t){const e=ve(this);return At(e,"has",t),e.hasOwnProperty(t)}class rh{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,i){const a=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(a?l?om:oh:l?sh:ih).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const h=ee(e);if(!a){if(h&&we(Mc,r))return Reflect.get(Mc,r,i);if(r==="hasOwnProperty")return Kp}const y=Reflect.get(e,r,i);return(Ki(r)?th.has(r):Vp(r))||(a||At(e,"get",r),l)?y:Rt(y)?h&&ml(r)?y:y.value:Ve(y)?a?ah(y):Ol(y):y}}class nh extends rh{constructor(e=!1){super(!1,e)}set(e,r,i,a){let l=e[r];if(!this._shallow){const N=Ui(l);if(!Qo(i)&&!Ui(i)&&(l=ve(l),i=ve(i)),!ee(e)&&Rt(l)&&!Rt(i))return N?!1:(l.value=i,!0)}const h=ee(e)&&ml(r)?Number(r)<e.length:we(e,r),y=Reflect.set(e,r,i,a);return e===ve(a)&&(h?mn(i,l)&&Br(e,"set",r,i):Br(e,"add",r,i)),y}deleteProperty(e,r){const i=we(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&i&&Br(e,"delete",r,void 0),a}has(e,r){const i=Reflect.has(e,r);return(!Ki(r)||!th.has(r))&&At(e,"has",r),i}ownKeys(e){return At(e,"iterate",ee(e)?"length":zn),Reflect.ownKeys(e)}}class Hp extends rh{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Gp=new nh,zp=new Hp,Yp=new nh(!0),vl=t=>t,Ya=t=>Reflect.getPrototypeOf(t);function xo(t,e,r=!1,i=!1){t=t.__v_raw;const a=ve(t),l=ve(e);r||(mn(e,l)&&At(a,"get",e),At(a,"get",l));const{has:h}=Ya(a),y=i?vl:r?_l:Es;if(h.call(a,e))return y(t.get(e));if(h.call(a,l))return y(t.get(l));t!==a&&t.get(e)}function Oo(t,e=!1){const r=this.__v_raw,i=ve(r),a=ve(t);return e||(mn(t,a)&&At(i,"has",t),At(i,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Co(t,e=!1){return t=t.__v_raw,!e&&At(ve(t),"iterate",zn),Reflect.get(t,"size",t)}function Bc(t){t=ve(t);const e=ve(this);return Ya(e).has.call(e,t)||(e.add(t),Br(e,"add",t,t)),this}function Fc(t,e){e=ve(e);const r=ve(this),{has:i,get:a}=Ya(r);let l=i.call(r,t);l||(t=ve(t),l=i.call(r,t));const h=a.call(r,t);return r.set(t,e),l?mn(e,h)&&Br(r,"set",t,e):Br(r,"add",t,e),this}function Uc(t){const e=ve(this),{has:r,get:i}=Ya(e);let a=r.call(e,t);a||(t=ve(t),a=r.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return a&&Br(e,"delete",t,void 0),l}function $c(){const t=ve(this),e=t.size!==0,r=t.clear();return e&&Br(t,"clear",void 0,void 0),r}function _o(t,e){return function(i,a){const l=this,h=l.__v_raw,y=ve(h),N=e?vl:t?_l:Es;return!t&&At(y,"iterate",zn),h.forEach((f,x)=>i.call(a,N(f),N(x),l))}}function qo(t,e,r){return function(...i){const a=this.__v_raw,l=ve(a),h=yi(l),y=t==="entries"||t===Symbol.iterator&&h,N=t==="keys"&&h,f=a[t](...i),x=r?vl:e?_l:Es;return!e&&At(l,"iterate",N?Lu:zn),{next(){const{value:E,done:S}=f.next();return S?{value:E,done:S}:{value:y?[x(E[0]),x(E[1])]:x(E),done:S}},[Symbol.iterator](){return this}}}}function Gr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Xp(){const t={get(l){return xo(this,l)},get size(){return Co(this)},has:Oo,add:Bc,set:Fc,delete:Uc,clear:$c,forEach:_o(!1,!1)},e={get(l){return xo(this,l,!1,!0)},get size(){return Co(this)},has:Oo,add:Bc,set:Fc,delete:Uc,clear:$c,forEach:_o(!1,!0)},r={get(l){return xo(this,l,!0)},get size(){return Co(this,!0)},has(l){return Oo.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:_o(!0,!1)},i={get(l){return xo(this,l,!0,!0)},get size(){return Co(this,!0)},has(l){return Oo.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:_o(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=qo(l,!1,!1),r[l]=qo(l,!0,!1),e[l]=qo(l,!1,!0),i[l]=qo(l,!0,!0)}),[t,r,e,i]}const[Zp,em,tm,rm]=Xp();function xl(t,e){const r=e?t?rm:tm:t?em:Zp;return(i,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?i:Reflect.get(we(r,a)&&a in i?r:i,a,l)}const nm={get:xl(!1,!1)},im={get:xl(!1,!0)},sm={get:xl(!0,!1)},ih=new WeakMap,sh=new WeakMap,oh=new WeakMap,om=new WeakMap;function am(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function um(t){return t.__v_skip||!Object.isExtensible(t)?0:am(Tp(t))}function Ol(t){return Ui(t)?t:Cl(t,!1,Gp,nm,ih)}function lm(t){return Cl(t,!1,Yp,im,sh)}function ah(t){return Cl(t,!0,zp,sm,oh)}function Cl(t,e,r,i,a){if(!Ve(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const h=um(t);if(h===0)return t;const y=new Proxy(t,h===2?i:r);return a.set(t,y),y}function wi(t){return Ui(t)?wi(t.__v_raw):!!(t&&t.__v_isReactive)}function Ui(t){return!!(t&&t.__v_isReadonly)}function Qo(t){return!!(t&&t.__v_isShallow)}function uh(t){return wi(t)||Ui(t)}function ve(t){const e=t&&t.__v_raw;return e?ve(e):t}function lh(t){return $o(t,"__v_skip",!0),t}const Es=t=>Ve(t)?Ol(t):t,_l=t=>Ve(t)?ah(t):t;class ch{constructor(e,r,i,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Nl(()=>e(this._value),()=>Ao(this,1),()=>this.dep&&Zd(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=i}get value(){const e=ve(this);return(!e._cacheable||e.effect.dirty)&&mn(e._value,e._value=e.effect.run())&&Ao(e,2),dh(e),e.effect._dirtyLevel>=1&&Ao(e,1),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function cm(t,e,r=!1){let i,a;const l=oe(t);return l?(i=t,a=Kt):(i=t.get,a=t.set),new ch(i,a,l||!a,r)}function dh(t){dn&&Gn&&(t=ve(t),Yd(Gn,t.dep||(t.dep=eh(()=>t.dep=void 0,t instanceof ch?t:void 0))))}function Ao(t,e=2,r){t=ve(t);const i=t.dep;i&&Xd(i,e)}function Rt(t){return!!(t&&t.__v_isRef===!0)}function dm(t){return hm(t,!1)}function hm(t,e){return Rt(t)?t:new fm(t,e)}class fm{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:ve(e),this._value=r?e:Es(e)}get value(){return dh(this),this._value}set value(e){const r=this.__v_isShallow||Qo(e)||Ui(e);e=r?e:ve(e),mn(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Es(e),Ao(this,2))}}function hh(t){return Rt(t)?t.value:t}const pm={get:(t,e,r)=>hh(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const a=t[e];return Rt(a)&&!Rt(r)?(a.value=r,!0):Reflect.set(t,e,r,i)}};function fh(t){return wi(t)?t:new Proxy(t,pm)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hn(t,e,r,i){let a;try{a=i?t(...i):t()}catch(l){Xa(l,e,r)}return a}function dr(t,e,r,i){if(oe(t)){const l=hn(t,e,r,i);return l&&$d(l)&&l.catch(h=>{Xa(h,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(dr(t[l],e,r,i));return a}function Xa(t,e,r,i=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const h=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const f=l.ec;if(f){for(let x=0;x<f.length;x++)if(f[x](t,h,y)===!1)return}l=l.parent}const N=e.appContext.config.errorHandler;if(N){hn(N,null,10,[t,h,y]);return}}mm(t,r,a,i)}function mm(t,e,r,i=!0){console.error(t)}let Ts=!1,Mu=!1;const wt=[];let xr=0;const Ni=[];let Yr=null,Tn=0;const ph=Promise.resolve();let ql=null;function ym(t){const e=ql||ph;return t?e.then(this?t.bind(this):t):e}function wm(t){let e=xr+1,r=wt.length;for(;e<r;){const i=e+r>>>1,a=wt[i],l=Ss(a);l<t||l===t&&a.pre?e=i+1:r=i}return e}function Wl(t){(!wt.length||!wt.includes(t,Ts&&t.allowRecurse?xr+1:xr))&&(t.id==null?wt.push(t):wt.splice(wm(t.id),0,t),mh())}function mh(){!Ts&&!Mu&&(Mu=!0,ql=ph.then(wh))}function Nm(t){const e=wt.indexOf(t);e>xr&&wt.splice(e,1)}function gm(t){ee(t)?Ni.push(...t):(!Yr||!Yr.includes(t,t.allowRecurse?Tn+1:Tn))&&Ni.push(t),mh()}function Qc(t,e,r=Ts?xr+1:0){for(;r<wt.length;r++){const i=wt[r];if(i&&i.pre){if(t&&i.id!==t.uid)continue;wt.splice(r,1),r--,i()}}}function yh(t){if(Ni.length){const e=[...new Set(Ni)].sort((r,i)=>Ss(r)-Ss(i));if(Ni.length=0,Yr){Yr.push(...e);return}for(Yr=e,Tn=0;Tn<Yr.length;Tn++)Yr[Tn]();Yr=null,Tn=0}}const Ss=t=>t.id==null?1/0:t.id,bm=(t,e)=>{const r=Ss(t)-Ss(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function wh(t){Mu=!1,Ts=!0,wt.sort(bm);try{for(xr=0;xr<wt.length;xr++){const e=wt[xr];e&&e.active!==!1&&hn(e,null,14)}}finally{xr=0,wt.length=0,yh(),Ts=!1,ql=null,(wt.length||Ni.length)&&wh()}}function vm(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||Fe;let a=r;const l=e.startsWith("update:"),h=l&&e.slice(7);if(h&&h in i){const x=`${h==="modelValue"?"model":h}Modifiers`,{number:E,trim:S}=i[x]||Fe;S&&(a=r.map(B=>ut(B)?B.trim():B)),E&&(a=r.map(Ap))}let y,N=i[y=vu(e)]||i[y=vu(Fi(e))];!N&&l&&(N=i[y=vu(Hi(e))]),N&&dr(N,t,6,a);const f=i[y+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,dr(f,t,6,a)}}function Nh(t,e,r=!1){const i=e.emitsCache,a=i.get(t);if(a!==void 0)return a;const l=t.emits;let h={},y=!1;if(!oe(t)){const N=f=>{const x=Nh(f,e,!0);x&&(y=!0,pt(h,x))};!r&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!l&&!y?(Ve(t)&&i.set(t,null),null):(ee(l)?l.forEach(N=>h[N]=null):pt(h,l),Ve(t)&&i.set(t,h),h)}function Za(t,e){return!t||!Ha(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,Hi(e))||we(t,e))}let Cr=null,gh=null;function jo(t){const e=Cr;return Cr=t,gh=t&&t.type.__scopeId||null,e}function xm(t,e=Cr,r){if(!e||t._n)return t;const i=(...a)=>{i._d&&Zc(-1);const l=jo(e);let h;try{h=t(...a)}finally{jo(l),i._d&&Zc(1)}return h};return i._n=!0,i._c=!0,i._d=!0,i}function Cu(t){const{type:e,vnode:r,proxy:i,withProxy:a,props:l,propsOptions:[h],slots:y,attrs:N,emit:f,render:x,renderCache:E,data:S,setupState:B,ctx:xe,inheritAttrs:H}=t;let pe,fe;const ue=jo(t);try{if(r.shapeFlag&4){const Oe=a||i,Qe=Oe;pe=vr(x.call(Qe,Oe,E,l,B,S,xe)),fe=N}else{const Oe=e;pe=vr(Oe.length>1?Oe(l,{attrs:N,slots:y,emit:f}):Oe(l,null)),fe=e.props?N:Om(N)}}catch(Oe){ms.length=0,Xa(Oe,t,1),pe=Yn(ks)}let U=pe;if(fe&&H!==!1){const Oe=Object.keys(fe),{shapeFlag:Qe}=U;Oe.length&&Qe&7&&(h&&Oe.some(fl)&&(fe=Cm(fe,h)),U=$i(U,fe))}return r.dirs&&(U=$i(U),U.dirs=U.dirs?U.dirs.concat(r.dirs):r.dirs),r.transition&&(U.transition=r.transition),pe=U,jo(ue),pe}const Om=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ha(r))&&((e||(e={}))[r]=t[r]);return e},Cm=(t,e)=>{const r={};for(const i in t)(!fl(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function _m(t,e,r){const{props:i,children:a,component:l}=t,{props:h,children:y,patchFlag:N}=e,f=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&N>=0){if(N&1024)return!0;if(N&16)return i?jc(i,h,f):!!h;if(N&8){const x=e.dynamicProps;for(let E=0;E<x.length;E++){const S=x[E];if(h[S]!==i[S]&&!Za(f,S))return!0}}}else return(a||y)&&(!y||!y.$stable)?!0:i===h?!1:i?h?jc(i,h,f):!0:!!h;return!1}function jc(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let a=0;a<i.length;a++){const l=i[a];if(e[l]!==t[l]&&!Za(r,l))return!0}return!1}function qm({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const Wm=Symbol.for("v-ndc"),Im=t=>t.__isSuspense;function Em(t,e){e&&e.pendingBranch?ee(t)?e.effects.push(...t):e.effects.push(t):gm(t)}const Tm=Symbol.for("v-scx"),Sm=()=>Do(Tm),Wo={};function _u(t,e,r){return bh(t,e,r)}function bh(t,e,{immediate:r,deep:i,flush:a,once:l,onTrack:h,onTrigger:y}=Fe){if(e&&l){const te=e;e=(...lt)=>{te(...lt),Qe()}}const N=qt,f=te=>i===!0?te:ci(te,i===!1?1:void 0);let x,E=!1,S=!1;if(Rt(t)?(x=()=>t.value,E=Qo(t)):wi(t)?(x=()=>f(t),E=!0):ee(t)?(S=!0,E=t.some(te=>wi(te)||Qo(te)),x=()=>t.map(te=>{if(Rt(te))return te.value;if(wi(te))return f(te);if(oe(te))return hn(te,N,2)})):oe(t)?e?x=()=>hn(t,N,2):x=()=>(B&&B(),dr(t,N,3,[xe])):x=Kt,e&&i){const te=x;x=()=>ci(te())}let B,xe=te=>{B=U.onStop=()=>{hn(te,N,4),B=U.onStop=void 0}},H;if(nu)if(xe=Kt,e?r&&dr(e,N,3,[x(),S?[]:void 0,xe]):x(),a==="sync"){const te=Sm();H=te.__watcherHandles||(te.__watcherHandles=[])}else return Kt;let pe=S?new Array(t.length).fill(Wo):Wo;const fe=()=>{if(!(!U.active||!U.dirty))if(e){const te=U.run();(i||E||(S?te.some((lt,Je)=>mn(lt,pe[Je])):mn(te,pe)))&&(B&&B(),dr(e,N,3,[te,pe===Wo?void 0:S&&pe[0]===Wo?[]:pe,xe]),pe=te)}else U.run()};fe.allowRecurse=!!e;let ue;a==="sync"?ue=fe:a==="post"?ue=()=>Tt(fe,N&&N.suspense):(fe.pre=!0,N&&(fe.id=N.uid),ue=()=>Wl(fe));const U=new Nl(x,Kt,ue),Oe=Qp(),Qe=()=>{U.stop(),Oe&&pl(Oe.effects,U)};return e?r?fe():pe=U.run():a==="post"?Tt(U.run.bind(U),N&&N.suspense):U.run(),H&&H.push(Qe),Qe}function km(t,e,r){const i=this.proxy,a=ut(t)?t.includes(".")?vh(i,t):()=>i[t]:t.bind(i,i);let l;oe(e)?l=e:(l=e.handler,r=e);const h=ro(this),y=bh(a,l.bind(i),r);return h(),y}function vh(t,e){const r=e.split(".");return()=>{let i=t;for(let a=0;a<r.length&&i;a++)i=i[r[a]];return i}}function ci(t,e,r=0,i){if(!Ve(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(i=i||new Set,i.has(t))return t;if(i.add(t),Rt(t))ci(t.value,e,r,i);else if(ee(t))for(let a=0;a<t.length;a++)ci(t[a],e,r,i);else if(Ud(t)||yi(t))t.forEach(a=>{ci(a,e,r,i)});else if(jd(t))for(const a in t)ci(t[a],e,r,i);return t}function Wn(t,e,r,i){const a=t.dirs,l=e&&e.dirs;for(let h=0;h<a.length;h++){const y=a[h];l&&(y.oldValue=l[h].value);let N=y.dir[i];N&&(Zn(),dr(N,r,8,[t.el,y,t,e]),ei())}}/*! #__NO_SIDE_EFFECTS__ */function Am(t,e){return oe(t)?pt({name:t.name},e,{setup:t}):t}const Ro=t=>!!t.type.__asyncLoader,xh=t=>t.type.__isKeepAlive;function Rm(t,e){Oh(t,"a",e)}function Dm(t,e){Oh(t,"da",e)}function Oh(t,e,r=qt){const i=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(eu(e,i,r),r){let a=r.parent;for(;a&&a.parent;)xh(a.parent.vnode)&&Pm(i,e,r,a),a=a.parent}}function Pm(t,e,r,i){const a=eu(e,t,i,!0);Ch(()=>{pl(i[e],a)},r)}function eu(t,e,r=qt,i=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...h)=>{if(r.isUnmounted)return;Zn();const y=ro(r),N=dr(e,r,t,h);return y(),ei(),N});return i?a.unshift(l):a.push(l),l}}const jr=t=>(e,r=qt)=>(!nu||t==="sp")&&eu(t,(...i)=>e(...i),r),Lm=jr("bm"),Mm=jr("m"),Bm=jr("bu"),Fm=jr("u"),Um=jr("bum"),Ch=jr("um"),$m=jr("sp"),Qm=jr("rtg"),jm=jr("rtc");function Vm(t,e=qt){eu("ec",t,e)}const Bu=t=>t?Dh(t)?Sl(t)||t.proxy:Bu(t.parent):null,ps=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bu(t.parent),$root:t=>Bu(t.root),$emit:t=>t.emit,$options:t=>Il(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Wl(t.update)}),$nextTick:t=>t.n||(t.n=ym.bind(t.proxy)),$watch:t=>km.bind(t)}),qu=(t,e)=>t!==Fe&&!t.__isScriptSetup&&we(t,e),Jm={get({_:t},e){const{ctx:r,setupState:i,data:a,props:l,accessCache:h,type:y,appContext:N}=t;let f;if(e[0]!=="$"){const B=h[e];if(B!==void 0)switch(B){case 1:return i[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(qu(i,e))return h[e]=1,i[e];if(a!==Fe&&we(a,e))return h[e]=2,a[e];if((f=t.propsOptions[0])&&we(f,e))return h[e]=3,l[e];if(r!==Fe&&we(r,e))return h[e]=4,r[e];Fu&&(h[e]=0)}}const x=ps[e];let E,S;if(x)return e==="$attrs"&&At(t,"get",e),x(t);if((E=y.__cssModules)&&(E=E[e]))return E;if(r!==Fe&&we(r,e))return h[e]=4,r[e];if(S=N.config.globalProperties,we(S,e))return S[e]},set({_:t},e,r){const{data:i,setupState:a,ctx:l}=t;return qu(a,e)?(a[e]=r,!0):i!==Fe&&we(i,e)?(i[e]=r,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:a,propsOptions:l}},h){let y;return!!r[h]||t!==Fe&&we(t,h)||qu(e,h)||(y=l[0])&&we(y,h)||we(i,h)||we(ps,h)||we(a.config.globalProperties,h)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:we(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function Vc(t){return ee(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Fu=!0;function Km(t){const e=Il(t),r=t.proxy,i=t.ctx;Fu=!1,e.beforeCreate&&Jc(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:h,watch:y,provide:N,inject:f,created:x,beforeMount:E,mounted:S,beforeUpdate:B,updated:xe,activated:H,deactivated:pe,beforeDestroy:fe,beforeUnmount:ue,destroyed:U,unmounted:Oe,render:Qe,renderTracked:te,renderTriggered:lt,errorCaptured:Je,serverPrefetch:zt,expose:We,inheritAttrs:ce,components:hr,directives:V,filters:Ie}=e;if(f&&Hm(f,i,null),h)for(const Ae in h){const _e=h[Ae];oe(_e)&&(i[Ae]=_e.bind(r))}if(a){const Ae=a.call(r,r);Ve(Ae)&&(t.data=Ol(Ae))}if(Fu=!0,l)for(const Ae in l){const _e=l[Ae],fr=oe(_e)?_e.bind(r,r):oe(_e.get)?_e.get.bind(r,r):Kt,vn=!oe(_e)&&oe(_e.set)?_e.set.bind(r):Kt,Wr=Wy({get:fr,set:vn});Object.defineProperty(i,Ae,{enumerable:!0,configurable:!0,get:()=>Wr.value,set:st=>Wr.value=st})}if(y)for(const Ae in y)_h(y[Ae],i,r,Ae);if(N){const Ae=oe(N)?N.call(r):N;Reflect.ownKeys(Ae).forEach(_e=>{ey(_e,Ae[_e])})}x&&Jc(x,t,"c");function Ze(Ae,_e){ee(_e)?_e.forEach(fr=>Ae(fr.bind(r))):_e&&Ae(_e.bind(r))}if(Ze(Lm,E),Ze(Mm,S),Ze(Bm,B),Ze(Fm,xe),Ze(Rm,H),Ze(Dm,pe),Ze(Vm,Je),Ze(jm,te),Ze(Qm,lt),Ze(Um,ue),Ze(Ch,Oe),Ze($m,zt),ee(We))if(We.length){const Ae=t.exposed||(t.exposed={});We.forEach(_e=>{Object.defineProperty(Ae,_e,{get:()=>r[_e],set:fr=>r[_e]=fr})})}else t.exposed||(t.exposed={});Qe&&t.render===Kt&&(t.render=Qe),ce!=null&&(t.inheritAttrs=ce),hr&&(t.components=hr),V&&(t.directives=V)}function Hm(t,e,r=Kt){ee(t)&&(t=Uu(t));for(const i in t){const a=t[i];let l;Ve(a)?"default"in a?l=Do(a.from||i,a.default,!0):l=Do(a.from||i):l=Do(a),Rt(l)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:h=>l.value=h}):e[i]=l}}function Jc(t,e,r){dr(ee(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function _h(t,e,r,i){const a=i.includes(".")?vh(r,i):()=>r[i];if(ut(t)){const l=e[t];oe(l)&&_u(a,l)}else if(oe(t))_u(a,t.bind(r));else if(Ve(t))if(ee(t))t.forEach(l=>_h(l,e,r,i));else{const l=oe(t.handler)?t.handler.bind(r):e[t.handler];oe(l)&&_u(a,l,t)}}function Il(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:h}}=t.appContext,y=l.get(e);let N;return y?N=y:!a.length&&!r&&!i?N=e:(N={},a.length&&a.forEach(f=>Vo(N,f,h,!0)),Vo(N,e,h)),Ve(e)&&l.set(e,N),N}function Vo(t,e,r,i=!1){const{mixins:a,extends:l}=e;l&&Vo(t,l,r,!0),a&&a.forEach(h=>Vo(t,h,r,!0));for(const h in e)if(!(i&&h==="expose")){const y=Gm[h]||r&&r[h];t[h]=y?y(t[h],e[h]):e[h]}return t}const Gm={data:Kc,props:Hc,emits:Hc,methods:hs,computed:hs,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:hs,directives:hs,watch:Ym,provide:Kc,inject:zm};function Kc(t,e){return e?t?function(){return pt(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function zm(t,e){return hs(Uu(t),Uu(e))}function Uu(t){if(ee(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function hs(t,e){return t?pt(Object.create(null),t,e):e}function Hc(t,e){return t?ee(t)&&ee(e)?[...new Set([...t,...e])]:pt(Object.create(null),Vc(t),Vc(e??{})):e}function Ym(t,e){if(!t)return e;if(!e)return t;const r=pt(Object.create(null),t);for(const i in e)r[i]=vt(t[i],e[i]);return r}function qh(){return{app:null,config:{isNativeTag:Ip,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xm=0;function Zm(t,e){return function(i,a=null){oe(i)||(i=pt({},i)),a!=null&&!Ve(a)&&(a=null);const l=qh(),h=new WeakSet;let y=!1;const N=l.app={_uid:Xm++,_component:i,_props:a,_container:null,_context:l,_instance:null,version:Iy,get config(){return l.config},set config(f){},use(f,...x){return h.has(f)||(f&&oe(f.install)?(h.add(f),f.install(N,...x)):oe(f)&&(h.add(f),f(N,...x))),N},mixin(f){return l.mixins.includes(f)||l.mixins.push(f),N},component(f,x){return x?(l.components[f]=x,N):l.components[f]},directive(f,x){return x?(l.directives[f]=x,N):l.directives[f]},mount(f,x,E){if(!y){const S=Yn(i,a);return S.appContext=l,E===!0?E="svg":E===!1&&(E=void 0),x&&e?e(S,f):t(S,f,E),y=!0,N._container=f,f.__vue_app__=N,Sl(S.component)||S.component.proxy}},unmount(){y&&(t(null,N._container),delete N._container.__vue_app__)},provide(f,x){return l.provides[f]=x,N},runWithContext(f){Jo=N;try{return f()}finally{Jo=null}}};return N}}let Jo=null;function ey(t,e){if(qt){let r=qt.provides;const i=qt.parent&&qt.parent.provides;i===r&&(r=qt.provides=Object.create(i)),r[t]=e}}function Do(t,e,r=!1){const i=qt||Cr;if(i||Jo){const a=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Jo._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&oe(e)?e.call(i&&i.proxy):e}}function ty(t,e,r,i=!1){const a={},l={};$o(l,ru,1),t.propsDefaults=Object.create(null),Wh(t,e,a,l);for(const h in t.propsOptions[0])h in a||(a[h]=void 0);r?t.props=i?a:lm(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function ry(t,e,r,i){const{props:a,attrs:l,vnode:{patchFlag:h}}=t,y=ve(a),[N]=t.propsOptions;let f=!1;if((i||h>0)&&!(h&16)){if(h&8){const x=t.vnode.dynamicProps;for(let E=0;E<x.length;E++){let S=x[E];if(Za(t.emitsOptions,S))continue;const B=e[S];if(N)if(we(l,S))B!==l[S]&&(l[S]=B,f=!0);else{const xe=Fi(S);a[xe]=$u(N,y,xe,B,t,!1)}else B!==l[S]&&(l[S]=B,f=!0)}}}else{Wh(t,e,a,l)&&(f=!0);let x;for(const E in y)(!e||!we(e,E)&&((x=Hi(E))===E||!we(e,x)))&&(N?r&&(r[E]!==void 0||r[x]!==void 0)&&(a[E]=$u(N,y,E,void 0,t,!0)):delete a[E]);if(l!==y)for(const E in l)(!e||!we(e,E))&&(delete l[E],f=!0)}f&&Br(t,"set","$attrs")}function Wh(t,e,r,i){const[a,l]=t.propsOptions;let h=!1,y;if(e)for(let N in e){if(ko(N))continue;const f=e[N];let x;a&&we(a,x=Fi(N))?!l||!l.includes(x)?r[x]=f:(y||(y={}))[x]=f:Za(t.emitsOptions,N)||(!(N in i)||f!==i[N])&&(i[N]=f,h=!0)}if(l){const N=ve(r),f=y||Fe;for(let x=0;x<l.length;x++){const E=l[x];r[E]=$u(a,N,E,f[E],t,!we(f,E))}}return h}function $u(t,e,r,i,a,l){const h=t[r];if(h!=null){const y=we(h,"default");if(y&&i===void 0){const N=h.default;if(h.type!==Function&&!h.skipFactory&&oe(N)){const{propsDefaults:f}=a;if(r in f)i=f[r];else{const x=ro(a);i=f[r]=N.call(null,e),x()}}else i=N}h[0]&&(l&&!y?i=!1:h[1]&&(i===""||i===Hi(r))&&(i=!0))}return i}function Ih(t,e,r=!1){const i=e.propsCache,a=i.get(t);if(a)return a;const l=t.props,h={},y=[];let N=!1;if(!oe(t)){const x=E=>{N=!0;const[S,B]=Ih(E,e,!0);pt(h,S),B&&y.push(...B)};!r&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}if(!l&&!N)return Ve(t)&&i.set(t,mi),mi;if(ee(l))for(let x=0;x<l.length;x++){const E=Fi(l[x]);Gc(E)&&(h[E]=Fe)}else if(l)for(const x in l){const E=Fi(x);if(Gc(E)){const S=l[x],B=h[E]=ee(S)||oe(S)?{type:S}:pt({},S);if(B){const xe=Xc(Boolean,B.type),H=Xc(String,B.type);B[0]=xe>-1,B[1]=H<0||xe<H,(xe>-1||we(B,"default"))&&y.push(E)}}}const f=[h,y];return Ve(t)&&i.set(t,f),f}function Gc(t){return t[0]!=="$"}function zc(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Yc(t,e){return zc(t)===zc(e)}function Xc(t,e){return ee(e)?e.findIndex(r=>Yc(r,t)):oe(e)&&Yc(e,t)?0:-1}const Eh=t=>t[0]==="_"||t==="$stable",El=t=>ee(t)?t.map(vr):[vr(t)],ny=(t,e,r)=>{if(e._n)return e;const i=xm((...a)=>El(e(...a)),r);return i._c=!1,i},Th=(t,e,r)=>{const i=t._ctx;for(const a in t){if(Eh(a))continue;const l=t[a];if(oe(l))e[a]=ny(a,l,i);else if(l!=null){const h=El(l);e[a]=()=>h}}},Sh=(t,e)=>{const r=El(e);t.slots.default=()=>r},iy=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=ve(e),$o(e,"_",r)):Th(e,t.slots={})}else t.slots={},e&&Sh(t,e);$o(t.slots,ru,1)},sy=(t,e,r)=>{const{vnode:i,slots:a}=t;let l=!0,h=Fe;if(i.shapeFlag&32){const y=e._;y?r&&y===1?l=!1:(pt(a,e),!r&&y===1&&delete a._):(l=!e.$stable,Th(e,a)),h=e}else e&&(Sh(t,e),h={default:1});if(l)for(const y in a)!Eh(y)&&h[y]==null&&delete a[y]};function Qu(t,e,r,i,a=!1){if(ee(t)){t.forEach((S,B)=>Qu(S,e&&(ee(e)?e[B]:e),r,i,a));return}if(Ro(i)&&!a)return;const l=i.shapeFlag&4?Sl(i.component)||i.component.proxy:i.el,h=a?null:l,{i:y,r:N}=t,f=e&&e.r,x=y.refs===Fe?y.refs={}:y.refs,E=y.setupState;if(f!=null&&f!==N&&(ut(f)?(x[f]=null,we(E,f)&&(E[f]=null)):Rt(f)&&(f.value=null)),oe(N))hn(N,y,12,[h,x]);else{const S=ut(N),B=Rt(N),xe=t.f;if(S||B){const H=()=>{if(xe){const pe=S?we(E,N)?E[N]:x[N]:N.value;a?ee(pe)&&pl(pe,l):ee(pe)?pe.includes(l)||pe.push(l):S?(x[N]=[l],we(E,N)&&(E[N]=x[N])):(N.value=[l],t.k&&(x[t.k]=N.value))}else S?(x[N]=h,we(E,N)&&(E[N]=h)):B&&(N.value=h,t.k&&(x[t.k]=h))};a||xe?H():(H.id=-1,Tt(H,r))}}}const Tt=Em;function oy(t){return ay(t)}function ay(t,e){const r=Jd();r.__VUE__=!0;const{insert:i,remove:a,patchProp:l,createElement:h,createText:y,createComment:N,setText:f,setElementText:x,parentNode:E,nextSibling:S,setScopeId:B=Kt,insertStaticContent:xe}=t,H=(p,w,v,C=null,q=null,D=null,k=void 0,R=null,L=!!w.dynamicChildren)=>{if(p===w)return;p&&!ls(p,w)&&(C=Xt(p),st(p,q,D,!0),p=null),w.patchFlag===-2&&(L=!1,w.dynamicChildren=null);const{type:W,ref:M,shapeFlag:$}=w;switch(W){case tu:pe(p,w,v,C);break;case ks:fe(p,w,v,C);break;case Iu:p==null&&ue(w,v,C,k);break;case br:hr(p,w,v,C,q,D,k,R,L);break;default:$&1?Qe(p,w,v,C,q,D,k,R,L):$&6?V(p,w,v,C,q,D,k,R,L):($&64||$&128)&&W.process(p,w,v,C,q,D,k,R,L,Jr)}M!=null&&q&&Qu(M,p&&p.ref,D,w||p,!w)},pe=(p,w,v,C)=>{if(p==null)i(w.el=y(w.children),v,C);else{const q=w.el=p.el;w.children!==p.children&&f(q,w.children)}},fe=(p,w,v,C)=>{p==null?i(w.el=N(w.children||""),v,C):w.el=p.el},ue=(p,w,v,C)=>{[p.el,p.anchor]=xe(p.children,w,v,C,p.el,p.anchor)},U=({el:p,anchor:w},v,C)=>{let q;for(;p&&p!==w;)q=S(p),i(p,v,C),p=q;i(w,v,C)},Oe=({el:p,anchor:w})=>{let v;for(;p&&p!==w;)v=S(p),a(p),p=v;a(w)},Qe=(p,w,v,C,q,D,k,R,L)=>{w.type==="svg"?k="svg":w.type==="math"&&(k="mathml"),p==null?te(w,v,C,q,D,k,R,L):zt(p,w,q,D,k,R,L)},te=(p,w,v,C,q,D,k,R)=>{let L,W;const{props:M,shapeFlag:$,transition:Q,dirs:J}=p;if(L=p.el=h(p.type,D,M&&M.is,M),$&8?x(L,p.children):$&16&&Je(p.children,L,null,C,q,Wu(p,D),k,R),J&&Wn(p,null,C,"created"),lt(L,p,p.scopeId,k,C),M){for(const Ne in M)Ne!=="value"&&!ko(Ne)&&l(L,Ne,null,M[Ne],D,p.children,C,q,Wt);"value"in M&&l(L,"value",null,M.value,D),(W=M.onVnodeBeforeMount)&&mr(W,C,p)}J&&Wn(p,null,C,"beforeMount");const re=uy(q,Q);re&&Q.beforeEnter(L),i(L,w,v),((W=M&&M.onVnodeMounted)||re||J)&&Tt(()=>{W&&mr(W,C,p),re&&Q.enter(L),J&&Wn(p,null,C,"mounted")},q)},lt=(p,w,v,C,q)=>{if(v&&B(p,v),C)for(let D=0;D<C.length;D++)B(p,C[D]);if(q){let D=q.subTree;if(w===D){const k=q.vnode;lt(p,k,k.scopeId,k.slotScopeIds,q.parent)}}},Je=(p,w,v,C,q,D,k,R,L=0)=>{for(let W=L;W<p.length;W++){const M=p[W]=R?Xr(p[W]):vr(p[W]);H(null,M,w,v,C,q,D,k,R)}},zt=(p,w,v,C,q,D,k)=>{const R=w.el=p.el;let{patchFlag:L,dynamicChildren:W,dirs:M}=w;L|=p.patchFlag&16;const $=p.props||Fe,Q=w.props||Fe;let J;if(v&&In(v,!1),(J=Q.onVnodeBeforeUpdate)&&mr(J,v,w,p),M&&Wn(w,p,v,"beforeUpdate"),v&&In(v,!0),W?We(p.dynamicChildren,W,R,v,C,Wu(w,q),D):k||_e(p,w,R,null,v,C,Wu(w,q),D,!1),L>0){if(L&16)ce(R,w,$,Q,v,C,q);else if(L&2&&$.class!==Q.class&&l(R,"class",null,Q.class,q),L&4&&l(R,"style",$.style,Q.style,q),L&8){const re=w.dynamicProps;for(let Ne=0;Ne<re.length;Ne++){const ge=re[Ne],Le=$[ge],It=Q[ge];(It!==Le||ge==="value")&&l(R,ge,Le,It,q,p.children,v,C,Wt)}}L&1&&p.children!==w.children&&x(R,w.children)}else!k&&W==null&&ce(R,w,$,Q,v,C,q);((J=Q.onVnodeUpdated)||M)&&Tt(()=>{J&&mr(J,v,w,p),M&&Wn(w,p,v,"updated")},C)},We=(p,w,v,C,q,D,k)=>{for(let R=0;R<w.length;R++){const L=p[R],W=w[R],M=L.el&&(L.type===br||!ls(L,W)||L.shapeFlag&70)?E(L.el):v;H(L,W,M,null,C,q,D,k,!0)}},ce=(p,w,v,C,q,D,k)=>{if(v!==C){if(v!==Fe)for(const R in v)!ko(R)&&!(R in C)&&l(p,R,v[R],null,k,w.children,q,D,Wt);for(const R in C){if(ko(R))continue;const L=C[R],W=v[R];L!==W&&R!=="value"&&l(p,R,W,L,k,w.children,q,D,Wt)}"value"in C&&l(p,"value",v.value,C.value,k)}},hr=(p,w,v,C,q,D,k,R,L)=>{const W=w.el=p?p.el:y(""),M=w.anchor=p?p.anchor:y("");let{patchFlag:$,dynamicChildren:Q,slotScopeIds:J}=w;J&&(R=R?R.concat(J):J),p==null?(i(W,v,C),i(M,v,C),Je(w.children||[],v,M,q,D,k,R,L)):$>0&&$&64&&Q&&p.dynamicChildren?(We(p.dynamicChildren,Q,v,q,D,k,R),(w.key!=null||q&&w===q.subTree)&&kh(p,w,!0)):_e(p,w,v,M,q,D,k,R,L)},V=(p,w,v,C,q,D,k,R,L)=>{w.slotScopeIds=R,p==null?w.shapeFlag&512?q.ctx.activate(w,v,C,k,L):Ie(w,v,C,q,D,k,L):ri(p,w,L)},Ie=(p,w,v,C,q,D,k)=>{const R=p.component=vy(p,C,q);if(xh(p)&&(R.ctx.renderer=Jr),xy(R),R.asyncDep){if(q&&q.registerDep(R,Ze),!p.el){const L=R.subTree=Yn(ks);fe(null,L,w,v)}}else Ze(R,p,w,v,q,D,k)},ri=(p,w,v)=>{const C=w.component=p.component;if(_m(p,w,v))if(C.asyncDep&&!C.asyncResolved){Ae(C,w,v);return}else C.next=w,Nm(C.update),C.effect.dirty=!0,C.update();else w.el=p.el,C.vnode=w},Ze=(p,w,v,C,q,D,k)=>{const R=()=>{if(p.isMounted){let{next:M,bu:$,u:Q,parent:J,vnode:re}=p;{const Ir=Ah(p);if(Ir){M&&(M.el=re.el,Ae(p,M,k)),Ir.asyncDep.then(()=>{p.isUnmounted||R()});return}}let Ne=M,ge;In(p,!1),M?(M.el=re.el,Ae(p,M,k)):M=re,$&&xu($),(ge=M.props&&M.props.onVnodeBeforeUpdate)&&mr(ge,J,M,re),In(p,!0);const Le=Cu(p),It=p.subTree;p.subTree=Le,H(It,Le,E(It.el),Xt(It),p,q,D),M.el=Le.el,Ne===null&&qm(p,Le.el),Q&&Tt(Q,q),(ge=M.props&&M.props.onVnodeUpdated)&&Tt(()=>mr(ge,J,M,re),q)}else{let M;const{el:$,props:Q}=w,{bm:J,m:re,parent:Ne}=p,ge=Ro(w);if(In(p,!1),J&&xu(J),!ge&&(M=Q&&Q.onVnodeBeforeMount)&&mr(M,Ne,w),In(p,!0),$&&Zi){const Le=()=>{p.subTree=Cu(p),Zi($,p.subTree,p,q,null)};ge?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Le()):Le()}else{const Le=p.subTree=Cu(p);H(null,Le,v,C,p,q,D),w.el=Le.el}if(re&&Tt(re,q),!ge&&(M=Q&&Q.onVnodeMounted)){const Le=w;Tt(()=>mr(M,Ne,Le),q)}(w.shapeFlag&256||Ne&&Ro(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&p.a&&Tt(p.a,q),p.isMounted=!0,w=v=C=null}},L=p.effect=new Nl(R,Kt,()=>Wl(W),p.scope),W=p.update=()=>{L.dirty&&L.run()};W.id=p.uid,In(p,!0),W()},Ae=(p,w,v)=>{w.component=p;const C=p.vnode.props;p.vnode=w,p.next=null,ry(p,w.props,C,v),sy(p,w.children,v),Zn(),Qc(p),ei()},_e=(p,w,v,C,q,D,k,R,L=!1)=>{const W=p&&p.children,M=p?p.shapeFlag:0,$=w.children,{patchFlag:Q,shapeFlag:J}=w;if(Q>0){if(Q&128){vn(W,$,v,C,q,D,k,R,L);return}else if(Q&256){fr(W,$,v,C,q,D,k,R,L);return}}J&8?(M&16&&Wt(W,q,D),$!==W&&x(v,$)):M&16?J&16?vn(W,$,v,C,q,D,k,R,L):Wt(W,q,D,!0):(M&8&&x(v,""),J&16&&Je($,v,C,q,D,k,R,L))},fr=(p,w,v,C,q,D,k,R,L)=>{p=p||mi,w=w||mi;const W=p.length,M=w.length,$=Math.min(W,M);let Q;for(Q=0;Q<$;Q++){const J=w[Q]=L?Xr(w[Q]):vr(w[Q]);H(p[Q],J,v,null,q,D,k,R,L)}W>M?Wt(p,q,D,!0,!1,$):Je(w,v,C,q,D,k,R,L,$)},vn=(p,w,v,C,q,D,k,R,L)=>{let W=0;const M=w.length;let $=p.length-1,Q=M-1;for(;W<=$&&W<=Q;){const J=p[W],re=w[W]=L?Xr(w[W]):vr(w[W]);if(ls(J,re))H(J,re,v,null,q,D,k,R,L);else break;W++}for(;W<=$&&W<=Q;){const J=p[$],re=w[Q]=L?Xr(w[Q]):vr(w[Q]);if(ls(J,re))H(J,re,v,null,q,D,k,R,L);else break;$--,Q--}if(W>$){if(W<=Q){const J=Q+1,re=J<M?w[J].el:C;for(;W<=Q;)H(null,w[W]=L?Xr(w[W]):vr(w[W]),v,re,q,D,k,R,L),W++}}else if(W>Q)for(;W<=$;)st(p[W],q,D,!0),W++;else{const J=W,re=W,Ne=new Map;for(W=re;W<=Q;W++){const gt=w[W]=L?Xr(w[W]):vr(w[W]);gt.key!=null&&Ne.set(gt.key,W)}let ge,Le=0;const It=Q-re+1;let Ir=!1,es=0;const xn=new Array(It);for(W=0;W<It;W++)xn[W]=0;for(W=J;W<=$;W++){const gt=p[W];if(Le>=It){st(gt,q,D,!0);continue}let Dt;if(gt.key!=null)Dt=Ne.get(gt.key);else for(ge=re;ge<=Q;ge++)if(xn[ge-re]===0&&ls(gt,w[ge])){Dt=ge;break}Dt===void 0?st(gt,q,D,!0):(xn[Dt-re]=W+1,Dt>=es?es=Dt:Ir=!0,H(gt,w[Dt],v,null,q,D,k,R,L),Le++)}const ao=Ir?ly(xn):mi;for(ge=ao.length-1,W=It-1;W>=0;W--){const gt=re+W,Dt=w[gt],ne=gt+1<M?w[gt+1].el:C;xn[W]===0?H(null,Dt,v,ne,q,D,k,R,L):Ir&&(ge<0||W!==ao[ge]?Wr(Dt,v,ne,2):ge--)}}},Wr=(p,w,v,C,q=null)=>{const{el:D,type:k,transition:R,children:L,shapeFlag:W}=p;if(W&6){Wr(p.component.subTree,w,v,C);return}if(W&128){p.suspense.move(w,v,C);return}if(W&64){k.move(p,w,v,Jr);return}if(k===br){i(D,w,v);for(let $=0;$<L.length;$++)Wr(L[$],w,v,C);i(p.anchor,w,v);return}if(k===Iu){U(p,w,v);return}if(C!==2&&W&1&&R)if(C===0)R.beforeEnter(D),i(D,w,v),Tt(()=>R.enter(D),q);else{const{leave:$,delayLeave:Q,afterLeave:J}=R,re=()=>i(D,w,v),Ne=()=>{$(D,()=>{re(),J&&J()})};Q?Q(D,re,Ne):Ne()}else i(D,w,v)},st=(p,w,v,C=!1,q=!1)=>{const{type:D,props:k,ref:R,children:L,dynamicChildren:W,shapeFlag:M,patchFlag:$,dirs:Q}=p;if(R!=null&&Qu(R,null,v,p,!0),M&256){w.ctx.deactivate(p);return}const J=M&1&&Q,re=!Ro(p);let Ne;if(re&&(Ne=k&&k.onVnodeBeforeUnmount)&&mr(Ne,w,p),M&6)oo(p.component,v,C);else{if(M&128){p.suspense.unmount(v,C);return}J&&Wn(p,null,w,"beforeUnmount"),M&64?p.type.remove(p,w,v,q,Jr,C):W&&(D!==br||$>0&&$&64)?Wt(W,w,v,!1,!0):(D===br&&$&384||!q&&M&16)&&Wt(L,w,v),C&&Vr(p)}(re&&(Ne=k&&k.onVnodeUnmounted)||J)&&Tt(()=>{Ne&&mr(Ne,w,p),J&&Wn(p,null,w,"unmounted")},v)},Vr=p=>{const{type:w,el:v,anchor:C,transition:q}=p;if(w===br){Yt(v,C);return}if(w===Iu){Oe(p);return}const D=()=>{a(v),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(p.shapeFlag&1&&q&&!q.persisted){const{leave:k,delayLeave:R}=q,L=()=>k(v,D);R?R(p.el,D,L):L()}else D()},Yt=(p,w)=>{let v;for(;p!==w;)v=S(p),a(p),p=v;a(w)},oo=(p,w,v)=>{const{bum:C,scope:q,update:D,subTree:k,um:R}=p;C&&xu(C),q.stop(),D&&(D.active=!1,st(k,p,w,v)),R&&Tt(R,w),Tt(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Wt=(p,w,v,C=!1,q=!1,D=0)=>{for(let k=D;k<p.length;k++)st(p[k],w,v,C,q)},Xt=p=>p.shapeFlag&6?Xt(p.component.subTree):p.shapeFlag&128?p.suspense.next():S(p.anchor||p.el);let ni=!1;const Xi=(p,w,v)=>{p==null?w._vnode&&st(w._vnode,null,null,!0):H(w._vnode||null,p,w,null,null,null,v),ni||(ni=!0,Qc(),yh(),ni=!1),w._vnode=p},Jr={p:H,um:st,m:Wr,r:Vr,mt:Ie,mc:Je,pc:_e,pbc:We,n:Xt,o:t};let ii,Zi;return e&&([ii,Zi]=e(Jr)),{render:Xi,hydrate:ii,createApp:Zm(Xi,ii)}}function Wu({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function In({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function uy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function kh(t,e,r=!1){const i=t.children,a=e.children;if(ee(i)&&ee(a))for(let l=0;l<i.length;l++){const h=i[l];let y=a[l];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=a[l]=Xr(a[l]),y.el=h.el),r||kh(h,y)),y.type===tu&&(y.el=h.el)}}function ly(t){const e=t.slice(),r=[0];let i,a,l,h,y;const N=t.length;for(i=0;i<N;i++){const f=t[i];if(f!==0){if(a=r[r.length-1],t[a]<f){e[i]=a,r.push(i);continue}for(l=0,h=r.length-1;l<h;)y=l+h>>1,t[r[y]]<f?l=y+1:h=y;f<t[r[l]]&&(l>0&&(e[i]=r[l-1]),r[l]=i)}}for(l=r.length,h=r[l-1];l-- >0;)r[l]=h,h=e[h];return r}function Ah(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ah(e)}const cy=t=>t.__isTeleport,br=Symbol.for("v-fgt"),tu=Symbol.for("v-txt"),ks=Symbol.for("v-cmt"),Iu=Symbol.for("v-stc"),ms=[];let cr=null;function dy(t=!1){ms.push(cr=t?null:[])}function hy(){ms.pop(),cr=ms[ms.length-1]||null}let As=1;function Zc(t){As+=t}function fy(t){return t.dynamicChildren=As>0?cr||mi:null,hy(),As>0&&cr&&cr.push(t),t}function py(t,e,r,i,a,l){return fy(rt(t,e,r,i,a,l,!0))}function my(t){return t?t.__v_isVNode===!0:!1}function ls(t,e){return t.type===e.type&&t.key===e.key}const ru="__vInternal",Rh=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ut(t)||Rt(t)||oe(t)?{i:Cr,r:t,k:e,f:!!r}:t:null);function rt(t,e=null,r=null,i=0,a=null,l=t===br?0:1,h=!1,y=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Rh(e),ref:e&&Po(e),scopeId:gh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Cr};return y?(Tl(N,r),l&128&&t.normalize(N)):r&&(N.shapeFlag|=ut(r)?8:16),As>0&&!h&&cr&&(N.patchFlag>0||l&6)&&N.patchFlag!==32&&cr.push(N),N}const Yn=yy;function yy(t,e=null,r=null,i=0,a=null,l=!1){if((!t||t===Wm)&&(t=ks),my(t)){const y=$i(t,e,!0);return r&&Tl(y,r),As>0&&!l&&cr&&(y.shapeFlag&6?cr[cr.indexOf(t)]=y:cr.push(y)),y.patchFlag|=-2,y}if(qy(t)&&(t=t.__vccOpts),e){e=wy(e);let{class:y,style:N}=e;y&&!ut(y)&&(e.class=wl(y)),Ve(N)&&(uh(N)&&!ee(N)&&(N=pt({},N)),e.style=yl(N))}const h=ut(t)?1:Im(t)?128:cy(t)?64:Ve(t)?4:oe(t)?2:0;return rt(t,e,r,i,a,h,l,!0)}function wy(t){return t?uh(t)||ru in t?pt({},t):t:null}function $i(t,e,r=!1){const{props:i,ref:a,patchFlag:l,children:h}=t,y=e?Ny(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Rh(y),ref:e&&e.ref?r&&a?ee(a)?a.concat(Po(e)):[a,Po(e)]:Po(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==br?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$i(t.ssContent),ssFallback:t.ssFallback&&$i(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Rs(t=" ",e=0){return Yn(tu,null,t,e)}function vr(t){return t==null||typeof t=="boolean"?Yn(ks):ee(t)?Yn(br,null,t.slice()):typeof t=="object"?Xr(t):Yn(tu,null,String(t))}function Xr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$i(t)}function Tl(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ee(e))r=16;else if(typeof e=="object")if(i&65){const a=e.default;a&&(a._c&&(a._d=!1),Tl(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(ru in e)?e._ctx=Cr:a===3&&Cr&&(Cr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:Cr},r=32):(e=String(e),i&64?(r=16,e=[Rs(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ny(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const a in i)if(a==="class")e.class!==i.class&&(e.class=wl([e.class,i.class]));else if(a==="style")e.style=yl([e.style,i.style]);else if(Ha(a)){const l=e[a],h=i[a];h&&l!==h&&!(ee(l)&&l.includes(h))&&(e[a]=l?[].concat(l,h):h)}else a!==""&&(e[a]=i[a])}return e}function mr(t,e,r,i=null){dr(t,e,7,[r,i])}const gy=qh();let by=0;function vy(t,e,r){const i=t.type,a=(e?e.appContext:t.appContext)||gy,l={uid:by++,vnode:t,type:i,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ih(i,a),emitsOptions:Nh(i,a),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:i.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=vm.bind(null,l),t.ce&&t.ce(l),l}let qt=null,Ko,ju;{const t=Jd(),e=(r,i)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(i),l=>{a.length>1?a.forEach(h=>h(l)):a[0](l)}};Ko=e("__VUE_INSTANCE_SETTERS__",r=>qt=r),ju=e("__VUE_SSR_SETTERS__",r=>nu=r)}const ro=t=>{const e=qt;return Ko(t),t.scope.on(),()=>{t.scope.off(),Ko(e)}},ed=()=>{qt&&qt.scope.off(),Ko(null)};function Dh(t){return t.vnode.shapeFlag&4}let nu=!1;function xy(t,e=!1){e&&ju(e);const{props:r,children:i}=t.vnode,a=Dh(t);ty(t,r,a,e),iy(t,i);const l=a?Oy(t,e):void 0;return e&&ju(!1),l}function Oy(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=lh(new Proxy(t.ctx,Jm));const{setup:i}=r;if(i){const a=t.setupContext=i.length>1?_y(t):null,l=ro(t);Zn();const h=hn(i,t,0,[t.props,a]);if(ei(),l(),$d(h)){if(h.then(ed,ed),e)return h.then(y=>{td(t,y,e)}).catch(y=>{Xa(y,t,0)});t.asyncDep=h}else td(t,h,e)}else Ph(t,e)}function td(t,e,r){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=fh(e)),Ph(t,r)}let rd;function Ph(t,e,r){const i=t.type;if(!t.render){if(!e&&rd&&!i.render){const a=i.template||Il(t).template;if(a){const{isCustomElement:l,compilerOptions:h}=t.appContext.config,{delimiters:y,compilerOptions:N}=i,f=pt(pt({isCustomElement:l,delimiters:y},h),N);i.render=rd(a,f)}}t.render=i.render||Kt}{const a=ro(t);Zn();try{Km(t)}finally{ei(),a()}}}function Cy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return At(t,"get","$attrs"),e[r]}}))}function _y(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Cy(t)},slots:t.slots,emit:t.emit,expose:e}}function Sl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(fh(lh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ps)return ps[r](t)},has(e,r){return r in e||r in ps}}))}function qy(t){return oe(t)&&"__vccOpts"in t}const Wy=(t,e)=>cm(t,e,nu),Iy="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ey="http://www.w3.org/2000/svg",Ty="http://www.w3.org/1998/Math/MathML",Zr=typeof document<"u"?document:null,nd=Zr&&Zr.createElement("template"),Sy={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const a=e==="svg"?Zr.createElementNS(Ey,t):e==="mathml"?Zr.createElementNS(Ty,t):Zr.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:t=>Zr.createTextNode(t),createComment:t=>Zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,a,l){const h=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{nd.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const y=nd.content;if(i==="svg"||i==="mathml"){const N=y.firstChild;for(;N.firstChild;)y.appendChild(N.firstChild);y.removeChild(N)}e.insertBefore(y,r)}return[h?h.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},ky=Symbol("_vtc");function Ay(t,e,r){const i=t[ky];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Ry=Symbol("_vod"),Dy=Symbol("");function Py(t,e,r){const i=t.style,a=i.display,l=ut(r);if(r&&!l){if(e&&!ut(e))for(const h in e)r[h]==null&&Vu(i,h,"");for(const h in r)Vu(i,h,r[h])}else if(l){if(e!==r){const h=i[Dy];h&&(r+=";"+h),i.cssText=r}}else e&&t.removeAttribute("style");Ry in t&&(i.display=a)}const id=/\s*!important$/;function Vu(t,e,r){if(ee(r))r.forEach(i=>Vu(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Ly(t,e);id.test(r)?t.setProperty(Hi(i),r.replace(id,""),"important"):t[i]=r}}const sd=["Webkit","Moz","ms"],Eu={};function Ly(t,e){const r=Eu[e];if(r)return r;let i=Fi(e);if(i!=="filter"&&i in t)return Eu[e]=i;i=Vd(i);for(let a=0;a<sd.length;a++){const l=sd[a]+i;if(l in t)return Eu[e]=l}return e}const od="http://www.w3.org/1999/xlink";function My(t,e,r,i,a){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(od,e.slice(6,e.length)):t.setAttributeNS(od,e,r);else{const l=Bp(e);r==null||l&&!Kd(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function By(t,e,r,i,a,l,h){if(e==="innerHTML"||e==="textContent"){i&&h(i,a,l),t[e]=r??"";return}const y=t.tagName;if(e==="value"&&y!=="PROGRESS"&&!y.includes("-")){t._value=r;const f=y==="OPTION"?t.getAttribute("value"):t.value,x=r??"";f!==x&&(t.value=x),r==null&&t.removeAttribute(e);return}let N=!1;if(r===""||r==null){const f=typeof t[e];f==="boolean"?r=Kd(r):r==null&&f==="string"?(r="",N=!0):f==="number"&&(r=0,N=!0)}try{t[e]=r}catch{}N&&t.removeAttribute(e)}function Fy(t,e,r,i){t.addEventListener(e,r,i)}function Uy(t,e,r,i){t.removeEventListener(e,r,i)}const ad=Symbol("_vei");function $y(t,e,r,i,a=null){const l=t[ad]||(t[ad]={}),h=l[e];if(i&&h)h.value=i;else{const[y,N]=Qy(e);if(i){const f=l[e]=Jy(i,a);Fy(t,y,f,N)}else h&&(Uy(t,y,h,N),l[e]=void 0)}}const ud=/(?:Once|Passive|Capture)$/;function Qy(t){let e;if(ud.test(t)){e={};let i;for(;i=t.match(ud);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Hi(t.slice(2)),e]}let Tu=0;const jy=Promise.resolve(),Vy=()=>Tu||(jy.then(()=>Tu=0),Tu=Date.now());function Jy(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;dr(Ky(i,r.value),e,5,[i])};return r.value=t,r.attached=Vy(),r}function Ky(t,e){if(ee(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>a=>!a._stopped&&i&&i(a))}else return e}const ld=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Hy=(t,e,r,i,a,l,h,y,N)=>{const f=a==="svg";e==="class"?Ay(t,i,f):e==="style"?Py(t,r,i):Ha(e)?fl(e)||$y(t,e,r,i,h):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gy(t,e,i,f))?By(t,e,i,l,h,y,N):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),My(t,e,i,f))};function Gy(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&ld(e)&&oe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return ld(e)&&ut(r)?!1:e in t}const zy=pt({patchProp:Hy},Sy);let cd;function Yy(){return cd||(cd=oy(zy))}const Xy=(...t)=>{const e=Yy().createApp(...t),{mount:r}=e;return e.mount=i=>{const a=ew(i);if(!a)return;const l=e._component;!oe(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const h=r(a,!1,Zy(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),h},e};function Zy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ew(t){return ut(t)?document.querySelector(t):t}function Xn(t){return typeof t>"u"||t===void 0}function Gt(t){return typeof t=="string"}function Lh(t){return typeof t=="number"}function Ho(t){return typeof t=="boolean"}function kl(t){return t===null}function tw(t){return t instanceof Date}function rw(t){return typeof t=="bigint"}function Qt(t){return typeof t=="function"}function Or(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function Io(t){return Fr(t)?t:[t]}function Fr(t){return Array.isArray(t)}function fn(t){return t}const Se=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Ue=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}}),Sr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}}),Mh=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),nw=["preserve rows","delete rows","drop"],Lt=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}}),yn=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:Ue.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:Ue.create(t),identifier:Ue.create(e)})}}),ys=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:yn.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ju=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ku=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}}),bn=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}}),pn=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:yn.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:yn.createWithSchema(t,e)})}});function jt(t){return Or(t)&&Qt(t.toOperationNode)}function iw(t){return Or(t)&&"expressionType"in t&&jt(t)}function sw(t){return Or(t)&&"expression"in t&&Gt(t.alias)&&jt(t)}const Tr=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}}),wn=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}}),Gi=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}}),Su=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?wn.create(t.on,r):Gi.create(t.on,r)})}}),ws=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Su.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Su.cloneWithOperation(t.on,"And",e):Su.create(e)})}}),Qi=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),ow=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],aw=["+","-","*","/","%","^","&","|","#","<<",">>"],Bh=["->","->>"],uw=[...ow,...aw,"&&","||"],lw=["exists","not exists"],cw=["not","-",...lw],dw=[...uw,...Bh,...cw,"between","between symmetric"],Nn=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function dd(t){return Gt(t)&&Bh.includes(t)}const Ge=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:Ue.create(t)})}}),Al=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}}),iu=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Al.create()})}});var bi;class hw{constructor(e){_(this,bi,void 0);A(this,bi,e)}get dynamicReference(){return s(this,bi)}get refType(){}toOperationNode(){return jh(s(this,bi))}}bi=new WeakMap;function Fh(t){return Or(t)&&jt(t)&&Gt(t.dynamicReference)}const Hu=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}}),yt=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return yt.create([t],[])},createWithChild(t){return yt.create(["",""],[t])},createWithChildren(t){return yt.create(new Array(t.length+1).fill(""),t)}});function Uh(t){return t==="asc"||t==="desc"}function su(t){if(t.length===2)return[ku(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>ku(r)):[ku(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function ku(t,e){const r=fw(t);if(Hu.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Hu.create(r,$h(e))}function fw(t){if(so(t))return ti(t);if(Fh(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!Uh(r))throw new Error(`Invalid order by direction: ${r}`);return Hu.create(Ur(e),$h(r))}return Ur(t)}function $h(t){if(t)return t==="asc"||t==="desc"?yt.createWithSql(t):t.toOperationNode()}const Go=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}}),Qh=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}}),Ns=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function jh(t){return Gt(t)?Ur(t):t.toOperationNode()}function Ds(t){return Fr(t)?t.map(e=>Ht(e)):[Ht(t)]}function Ht(t){return so(t)?ti(t):jh(t)}function pw(t,e){const r=Ur(t);if(dd(e))return Go.create(r,Qh.create(Nn.create(e)));const i=e.slice(0,-1);if(dd(i))return Go.create(r,Ns.create(Nn.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Ur(t){const e=".";if(!t.includes(e))return iu.create(Ge.create(t));const r=t.split(e).map(Rl);if(r.length===3)return yw(r);if(r.length===2)return ww(r);throw new Error(`invalid column reference ${t}`)}function mw(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Rl);return bn.create(Ur(r),Ue.create(i))}else return Ur(t)}function Vh(t){return Ge.create(t)}function zo(t){const e=" ";if(t.includes(e)){const[r,i]=t.split(e).map(Rl);if(!Uh(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return su([r,i])[0]}else return Vh(t)}function yw(t){const[e,r,i]=t;return iu.create(Ge.create(i),pn.createWithSchema(e,r))}function ww(t){const[e,r]=t;return iu.create(Ge.create(r),pn.create(e))}function Rl(t){return t.trim()}const Jh=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}}),Dl=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}}),$r=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Nw(t){return Fr(t)?gw(t):it(t)}function it(t){return so(t)?ti(t):$r.create(t)}function Pl(t){return Lh(t)||Ho(t)||kl(t)}function Ll(t){if(!Pl(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return $r.createImmediate(t)}function gw(t){return t.some(so)?Dl.create(t.map(e=>it(e))):Jh.create(t)}const ji=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function Nt(t){if(t.length===3)return Ml(t[0],t[1],t[2]);if(t.length===1)return it(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Ml(t,e,r){return bw(e)&&Kh(r)?Qi.create(Ht(t),zu(e),$r.createImmediate(r)):Qi.create(Ht(t),zu(e),Nw(r))}function Qr(t,e,r){return Qi.create(Ht(t),zu(e),Ht(r))}function hd(t,e){return Gu(Object.entries(t).filter(([,r])=>!Xn(r)).map(([r,i])=>Ml(r,Kh(i)?"is":"=",i)),e)}function Gu(t,e){const r=e==="and"?wn.create:Gi.create;if(t.length===0)return Qi.create($r.createImmediate(1),Nn.create("="),$r.createImmediate(e==="and"?1:0));let i=fd(t[0]);for(let a=1;a<t.length;++a)i=r(i,fd(t[a]));return t.length>1?ji.create(i):i}function bw(t){return t==="is"||t==="is not"}function Kh(t){return kl(t)||Ho(t)}function zu(t){if(Gt(t)&&dw.includes(t))return Nn.create(t);if(jt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function fd(t){return jt(t)?t.toOperationNode():t}const Vi=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),pd=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Yu=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?pd.cloneWithItems(t.partitionBy,e):pd.create(e)})}}),Yo=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}}),md=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),yd=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?wn.create(t.having,r):Gi.create(t.having,r)})}}),he=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:Yo.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?md.cloneWithItems(t.groupBy,e):md.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithHaving(t,e){return c({...t,having:t.having?yd.cloneWithOperation(t.having,"And",e):yd.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});function de(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var nr;const xs=class xs{constructor(e){_(this,nr,void 0);A(this,nr,c(e))}on(...e){return new xs({...s(this,nr),joinNode:ws.cloneWithOn(s(this,nr).joinNode,Nt(e))})}onRef(e,r,i){return new xs({...s(this,nr),joinNode:ws.cloneWithOn(s(this,nr).joinNode,Qr(e,r,i))})}onTrue(){return new xs({...s(this,nr),joinNode:ws.cloneWithOn(s(this,nr).joinNode,yt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return s(this,nr).joinNode}};nr=new WeakMap;let Xo=xs;de(Xo,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const vw=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function xw(t){return Ds(t).map(vw.create)}var Pn;const qa=class qa{constructor(e){_(this,Pn,void 0);A(this,Pn,c(e))}orderBy(e,r){return new qa({overNode:Yu.cloneWithOrderByItems(s(this,Pn).overNode,su([e,r]))})}partitionBy(e){return new qa({overNode:Yu.cloneWithPartitionByItems(s(this,Pn).overNode,xw(e))})}$call(e){return e(this)}toOperationNode(){return s(this,Pn).overNode}};Pn=new WeakMap;let Zo=qa;de(Zo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const gs=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Al.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:iu.createSelectAll(t)})}});function zi(t){return Qt(t)?zi(t(Yi())):Fr(t)?t.map(e=>wd(e)):[wd(t)]}function wd(t){return Gt(t)?gs.create(mw(t)):Fh(t)?gs.create(t.toOperationNode()):gs.create(lf(t))}function no(t){return t?Array.isArray(t)?t.map(Nd):[Nd(t)]:[gs.createSelectAll()]}function Nd(t){if(Gt(t))return gs.createSelectAllFromTable(He(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Ow=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}}),Cw=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function _w(t){const e=Qt(t)?t(Yi()):t,r=Fr(e)?e:c([e]);return qw(r)}function qw(t){const e=Ww(t);return[c([...e.keys()].map(Ge.create)),Ow.create(t.map(r=>Iw(r,e)))]}function Ww(t){const e=new Map;for(const r of t){const i=Object.keys(r);for(const a of i)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Iw(t,e){const r=Object.keys(t),i=Array.from({length:e.size});let a=!1;for(const h of r){const y=e.get(h);if(Xn(y))continue;const N=t[h];(Xn(N)||so(N))&&(a=!0),i[y]=N}if(r.length<e.size||a){const h=Cw.create();return Dl.create(i.map(y=>Xn(y)?h:it(y)))}return Jh.create(i)}const lr=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return c({...t,...e})}}),ea=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return c({...t,from:t.from?Yo.cloneWithFroms(t.from,e):Yo.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})}}),gd=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}}),bs=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:Yo.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Vi.cloneWithItems(t.orderBy,e):Vi.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?gd.cloneWithTables(t.using,e):gd.create(e)})}}),St=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?wn.create(t.where,r):Gi.create(t.where,r)})}}),bd=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}}),Ew=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}}),le=c({is(t){return he.is(t)||lr.is(t)||ea.is(t)||bs.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?St.cloneWithOperation(t.where,"And",e):St.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?bd.cloneWithSelections(t.returning,e):bd.create(e)})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Ew.create(e,r?.toOperationNode())})}}),Hh=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function Tw(...t){return t.length===2?[Hh.create(Ht(t[0]),it(t[1]))]:Bl(t[0])}function Bl(t){const e=Qt(t)?t(Yi()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Hh.create(Ge.create(r),it(i)))}const Sw=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});class kw{constructor(e,r){Z(this,"insertId");Z(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class ou extends Error{constructor(r){super("no result");Z(this,"node");this.node=r}}function au(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const $t=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?St.cloneWithOperation(t.indexWhere,"And",e):St.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?St.cloneWithOperation(t.indexWhere,"Or",e):St.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?St.cloneWithOperation(t.updateWhere,"And",e):St.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?St.cloneWithOperation(t.updateWhere,"Or",e):St.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var De;const kr=class kr{constructor(e){_(this,De,void 0);A(this,De,c(e))}column(e){const r=Ge.create(e);return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{columns:s(this,De).onConflictNode.columns?c([...s(this,De).onConflictNode.columns,r]):c([r])})})}columns(e){const r=e.map(Ge.create);return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{columns:s(this,De).onConflictNode.columns?c([...s(this,De).onConflictNode.columns,...r]):c(r)})})}constraint(e){return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{constraint:Ue.create(e)})})}expression(e){return new kr({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new kr({...s(this,De),onConflictNode:$t.cloneWithIndexWhere(s(this,De).onConflictNode,Nt(e))})}whereRef(e,r,i){return new kr({...s(this,De),onConflictNode:$t.cloneWithIndexWhere(s(this,De).onConflictNode,Qr(e,r,i))})}clearWhere(){return new kr({...s(this,De),onConflictNode:$t.cloneWithoutIndexWhere(s(this,De).onConflictNode)})}doNothing(){return new Gh({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ra({...s(this,De),onConflictNode:$t.cloneWith(s(this,De).onConflictNode,{updates:Bl(e)})})}$call(e){return e(this)}};De=new WeakMap;let ta=kr;de(ta,"don't await OnConflictBuilder instances.");var $s;class Gh{constructor(e){_(this,$s,void 0);A(this,$s,c(e))}toOperationNode(){return s(this,$s).onConflictNode}}$s=new WeakMap;de(Gh,"don't await OnConflictDoNothingBuilder instances.");var ir;const Os=class Os{constructor(e){_(this,ir,void 0);A(this,ir,c(e))}where(...e){return new Os({...s(this,ir),onConflictNode:$t.cloneWithUpdateWhere(s(this,ir).onConflictNode,Nt(e))})}whereRef(e,r,i){return new Os({...s(this,ir),onConflictNode:$t.cloneWithUpdateWhere(s(this,ir).onConflictNode,Qr(e,r,i))})}clearWhere(){return new Os({...s(this,ir),onConflictNode:$t.cloneWithoutUpdateWhere(s(this,ir).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return s(this,ir).onConflictNode}};ir=new WeakMap;let ra=Os;de(ra,"don't await OnConflictUpdateBuilder instances.");var se;const ct=class ct{constructor(e){_(this,se,void 0);A(this,se,c(e))}values(e){const[r,i]=_w(e);return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{columns:r,values:i})})}columns(e){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{columns:c(e.map(Ge.create))})})}expression(e){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{values:ti(e)})})}defaultValues(){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{defaultValues:!0})})}ignore(){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{ignore:!0})})}onConflict(e){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{onConflict:e(new ta({onConflictNode:$t.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ct({...s(this,se),queryNode:lr.cloneWith(s(this,se).queryNode,{onDuplicateKey:Sw.create(Bl(e))})})}returning(e){return new ct({...s(this,se),queryNode:le.cloneWithReturning(s(this,se).queryNode,zi(e))})}returningAll(){return new ct({...s(this,se),queryNode:le.cloneWithReturning(s(this,se).queryNode,no())})}$call(e){return e(this)}$if(e,r){return e?r(this):new ct({...s(this,se)})}$castTo(){return new ct(s(this,se))}$narrowType(){return new ct(s(this,se))}$assertType(){return new ct(s(this,se))}withPlugin(e){return new ct({...s(this,se),executor:s(this,se).executor.withPlugin(e)})}toOperationNode(){return s(this,se).executor.transformQuery(s(this,se).queryNode,s(this,se).queryId)}compile(){return s(this,se).executor.compileQuery(this.toOperationNode(),s(this,se).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,se).executor.executeQuery(e,s(this,se).queryId);return s(this,se).executor.adapter.supportsReturning&&r.returning?i.rows:[new kw(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ou){const r=await this.executeTakeFirst();if(r===void 0)throw au(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,se).executor.stream(r,e,s(this,se).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new ct({...s(this,se),queryNode:le.cloneWithExplain(s(this,se).queryNode,e,r)}).execute()}};se=new WeakMap;let Ps=ct;de(Ps,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Aw{constructor(e){Z(this,"numDeletedRows");this.numDeletedRows=e}}const zh=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var G;const Ye=class Ye{constructor(e){_(this,G,void 0);A(this,G,c(e))}where(...e){return new Ye({...s(this,G),queryNode:le.cloneWithWhere(s(this,G).queryNode,Nt(e))})}whereRef(e,r,i){return new Ye({...s(this,G),queryNode:le.cloneWithWhere(s(this,G).queryNode,Qr(e,r,i))})}clearWhere(){return new Ye({...s(this,G),queryNode:le.cloneWithoutWhere(s(this,G).queryNode)})}using(e){return new Ye({...s(this,G),queryNode:bs.cloneWithUsing(s(this,G).queryNode,Ls(e))})}innerJoin(...e){return new Ye({...s(this,G),queryNode:le.cloneWithJoin(s(this,G).queryNode,kt("InnerJoin",e))})}leftJoin(...e){return new Ye({...s(this,G),queryNode:le.cloneWithJoin(s(this,G).queryNode,kt("LeftJoin",e))})}rightJoin(...e){return new Ye({...s(this,G),queryNode:le.cloneWithJoin(s(this,G).queryNode,kt("RightJoin",e))})}fullJoin(...e){return new Ye({...s(this,G),queryNode:le.cloneWithJoin(s(this,G).queryNode,kt("FullJoin",e))})}returning(e){return new Ye({...s(this,G),queryNode:le.cloneWithReturning(s(this,G).queryNode,zi(e))})}returningAll(e){return new Ye({...s(this,G),queryNode:le.cloneWithReturning(s(this,G).queryNode,no(e))})}orderBy(e,r){return new Ye({...s(this,G),queryNode:bs.cloneWithOrderByItems(s(this,G).queryNode,su([e,r]))})}limit(e){return new Ye({...s(this,G),queryNode:bs.cloneWithLimit(s(this,G).queryNode,zh.create(it(e)))})}$call(e){return e(this)}$if(e,r){return e?r(this):new Ye({...s(this,G)})}$castTo(){return new Ye(s(this,G))}$narrowType(){return new Ye(s(this,G))}$assertType(){return new Ye(s(this,G))}withPlugin(e){return new Ye({...s(this,G),executor:s(this,G).executor.withPlugin(e)})}toOperationNode(){return s(this,G).executor.transformQuery(s(this,G).queryNode,s(this,G).queryId)}compile(){return s(this,G).executor.compileQuery(this.toOperationNode(),s(this,G).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,G).executor.executeQuery(e,s(this,G).queryId);return s(this,G).executor.adapter.supportsReturning&&r.returning?i.rows:[new Aw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ou){const r=await this.executeTakeFirst();if(r===void 0)throw au(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,G).executor.stream(r,e,s(this,G).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new Ye({...s(this,G),queryNode:le.cloneWithExplain(s(this,G).queryNode,e,r)}).execute()}};G=new WeakMap;let na=Ye;de(na,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Rw{constructor(e,r){Z(this,"numUpdatedRows");Z(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var X;const et=class et{constructor(e){_(this,X,void 0);A(this,X,c(e))}where(...e){return new et({...s(this,X),queryNode:le.cloneWithWhere(s(this,X).queryNode,Nt(e))})}whereRef(e,r,i){return new et({...s(this,X),queryNode:le.cloneWithWhere(s(this,X).queryNode,Qr(e,r,i))})}clearWhere(){return new et({...s(this,X),queryNode:le.cloneWithoutWhere(s(this,X).queryNode)})}from(e){return new et({...s(this,X),queryNode:ea.cloneWithFromItems(s(this,X).queryNode,Ls(e))})}innerJoin(...e){return new et({...s(this,X),queryNode:le.cloneWithJoin(s(this,X).queryNode,kt("InnerJoin",e))})}leftJoin(...e){return new et({...s(this,X),queryNode:le.cloneWithJoin(s(this,X).queryNode,kt("LeftJoin",e))})}rightJoin(...e){return new et({...s(this,X),queryNode:le.cloneWithJoin(s(this,X).queryNode,kt("RightJoin",e))})}fullJoin(...e){return new et({...s(this,X),queryNode:le.cloneWithJoin(s(this,X).queryNode,kt("FullJoin",e))})}set(...e){return new et({...s(this,X),queryNode:ea.cloneWithUpdates(s(this,X).queryNode,Tw(...e))})}returning(e){return new et({...s(this,X),queryNode:le.cloneWithReturning(s(this,X).queryNode,zi(e))})}returningAll(){return new et({...s(this,X),queryNode:le.cloneWithReturning(s(this,X).queryNode,no())})}$call(e){return e(this)}$if(e,r){return e?r(this):new et({...s(this,X)})}$castTo(){return new et(s(this,X))}$narrowType(){return new et(s(this,X))}$assertType(){return new et(s(this,X))}withPlugin(e){return new et({...s(this,X),executor:s(this,X).executor.withPlugin(e)})}toOperationNode(){return s(this,X).executor.transformQuery(s(this,X).queryNode,s(this,X).queryId)}compile(){return s(this,X).executor.compileQuery(this.toOperationNode(),s(this,X).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,X).executor.executeQuery(e,s(this,X).queryId);return s(this,X).executor.adapter.supportsReturning&&r.returning?i.rows:[new Rw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0),i.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ou){const r=await this.executeTakeFirst();if(r===void 0)throw au(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,X).executor.stream(r,e,s(this,X).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new et({...s(this,X),queryNode:le.cloneWithExplain(s(this,X).queryNode,e,r)}).execute()}};X=new WeakMap;let ia=et;de(ia,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const vd=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:pn.create(t),columns:e?c(e.map(Ge.create)):void 0})}}),sa=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var Ar;const Wa=class Wa{constructor(e){_(this,Ar,void 0);A(this,Ar,c(e))}materialized(){return new Wa({...s(this,Ar),node:sa.cloneWith(s(this,Ar).node,{materialized:!0})})}notMaterialized(){return new Wa({...s(this,Ar),node:sa.cloneWith(s(this,Ar).node,{materialized:!1})})}toOperationNode(){return s(this,Ar).node}};Ar=new WeakMap;let oa=Wa;de(oa,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function xd(t,e){const r=e(jw()).toOperationNode();return Qt(t)?t(Dw(r)).toOperationNode():sa.create(Yh(t),r)}function Dw(t){return e=>new oa({node:sa.create(Yh(e),t)})}function Yh(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(a=>a.trim());return vd.create(r,i)}else return vd.create(t)}const Eo=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}}),Od=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Pw(t){let e="";for(let r=0;r<t;++r)e+=Lw();return e}function Lw(){return Od[~~(Math.random()*Od.length)]}function ke(){return new Mw}var vi;class Mw{constructor(){_(this,vi,void 0)}get queryId(){return s(this,vi)===void 0&&A(this,vi,Pw(8)),s(this,vi)}}vi=new WeakMap;var Ia;class Fl{constructor(){Z(this,"nodeStack",[]);_(this,Ia,c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),AddIndexNode:this.transformAddIndex.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return s(this,Ia)[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Ia=new WeakMap;const Bw=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var xi,Ln,Mn,Ea,Xh,Ta,Zh,Sa,ef,Bn,fs,Qs,Xu,ka,tf;class Fw extends Fl{constructor(r){super();_(this,Ea);_(this,Ta);_(this,Sa);_(this,Bn);_(this,Qs);_(this,ka);_(this,xi,void 0);_(this,Ln,new Set);_(this,Mn,new Set);A(this,xi,r)}transformNodeImpl(r){if(!Ce(this,Ea,Xh).call(this,r))return super.transformNodeImpl(r);const i=Ce(this,Sa,ef).call(this,r);for(const h of i)s(this,Mn).add(h);const a=Ce(this,Ta,Zh).call(this,r);for(const h of a)s(this,Ln).add(h);const l=super.transformNodeImpl(r);for(const h of a)s(this,Ln).delete(h);for(const h of i)s(this,Mn).delete(h);return l}transformSchemableIdentifier(r){const i=super.transformSchemableIdentifier(r);return i.schema||!s(this,Ln).has(r.identifier.name)?i:{...i,schema:Ue.create(s(this,xi))}}transformReferences(r){const i=super.transformReferences(r);return i.table.table.schema?i:{...i,table:pn.createWithSchema(s(this,xi),i.table.table.identifier.name)}}}xi=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Ea=new WeakSet,Xh=function(r){return r.kind in Bw},Ta=new WeakSet,Zh=function(r){const i=new Set;if("name"in r&&r.name&&yn.is(r.name)&&Ce(this,Qs,Xu).call(this,r.name,i),"from"in r&&r.from)for(const a of r.from.froms)Ce(this,Bn,fs).call(this,a,i);if("into"in r&&r.into&&Ce(this,Bn,fs).call(this,r.into,i),"table"in r&&r.table&&Ce(this,Bn,fs).call(this,r.table,i),"joins"in r&&r.joins)for(const a of r.joins)Ce(this,Bn,fs).call(this,a.table,i);return i},Sa=new WeakSet,ef=function(r){const i=new Set;return"with"in r&&r.with&&Ce(this,ka,tf).call(this,r.with,i),i},Bn=new WeakSet,fs=function(r,i){const a=pn.is(r)?r:bn.is(r)&&pn.is(r.node)?r.node:null;a&&Ce(this,Qs,Xu).call(this,a.table,i)},Qs=new WeakSet,Xu=function(r,i){const a=r.identifier.name;!s(this,Ln).has(a)&&!s(this,Mn).has(a)&&i.add(a)},ka=new WeakSet,tf=function(r,i){for(const a of r.expressions){const l=a.name.table.table.identifier.name;s(this,Mn).has(l)||i.add(l)}};var js;class io{constructor(e){_(this,js,void 0);A(this,js,new Fw(e))}transformQuery(e){return s(this,js).transformNode(e.node)}async transformResult(e){return e.result}}js=new WeakMap;var Ee;const Sn=class Sn{constructor(e){_(this,Ee,void 0);A(this,Ee,c(e))}selectFrom(e){return rl({queryId:ke(),executor:s(this,Ee).executor,queryNode:he.createFrom(Ls(e),s(this,Ee).withNode)})}selectNoFrom(e){return rl({queryId:ke(),executor:s(this,Ee).executor,queryNode:he.cloneWithSelections(he.create(s(this,Ee).withNode),zi(e))})}insertInto(e){return new Ps({queryId:ke(),executor:s(this,Ee).executor,queryNode:lr.create(He(e),s(this,Ee).withNode)})}replaceInto(e){return new Ps({queryId:ke(),executor:s(this,Ee).executor,queryNode:lr.create(He(e),s(this,Ee).withNode,!0)})}deleteFrom(e){return new na({queryId:ke(),executor:s(this,Ee).executor,queryNode:bs.create(Ls(e),s(this,Ee).withNode)})}updateTable(e){return new ia({queryId:ke(),executor:s(this,Ee).executor,queryNode:ea.create(Ms(e),s(this,Ee).withNode)})}with(e,r){const i=xd(e,r);return new Sn({...s(this,Ee),withNode:s(this,Ee).withNode?Eo.cloneWithExpression(s(this,Ee).withNode,i):Eo.create(i)})}withRecursive(e,r){const i=xd(e,r);return new Sn({...s(this,Ee),withNode:s(this,Ee).withNode?Eo.cloneWithExpression(s(this,Ee).withNode,i):Eo.create(i,{recursive:!0})})}withPlugin(e){return new Sn({...s(this,Ee),executor:s(this,Ee).executor.withPlugin(e)})}withoutPlugins(){return new Sn({...s(this,Ee),executor:s(this,Ee).executor.withoutPlugins()})}withSchema(e){return new Sn({...s(this,Ee),executor:s(this,Ee).executor.withPluginAtFront(new io(e))})}};Ee=new WeakMap;let aa=Sn;var Vs,Oi,Ci;class Cd{constructor(){_(this,Vs,void 0);_(this,Oi,void 0);_(this,Ci,void 0);Z(this,"resolve",e=>{s(this,Oi)&&s(this,Oi).call(this,e)});Z(this,"reject",e=>{s(this,Ci)&&s(this,Ci).call(this,e)});A(this,Vs,new Promise((e,r)=>{A(this,Ci,r),A(this,Oi,e)}))}get promise(){return s(this,Vs)}}Vs=new WeakMap,Oi=new WeakMap,Ci=new WeakMap;const _d=new Set;function Uw(t){_d.has(t)||(_d.add(t),console.log(t))}const $w=c([]);var Fn,Js,Zu;class rf{constructor(e=$w){_(this,Js);_(this,Fn,void 0);A(this,Fn,e)}get plugins(){return s(this,Fn)}transformQuery(e,r){for(const i of s(this,Fn)){const a=i.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{const a=await i.executeQuery(e),l=await Ce(this,Js,Zu).call(this,a,r);return Qw(a,l),l})}async*stream(e,r,i){const a=new Cd,l=new Cd;this.provideConnection(async y=>(a.resolve(y),await l.promise)).catch(y=>a.reject(y));const h=await a.promise;try{for await(const y of h.streamQuery(e,r))yield await Ce(this,Js,Zu).call(this,y,i)}finally{l.resolve()}}}Fn=new WeakMap,Js=new WeakSet,Zu=async function(e,r){for(const i of s(this,Fn))e=await i.transformResult({result:e,queryId:r});return e};function Qw(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Uw("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class di extends rf{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new di([...this.plugins,e])}withPlugins(e){return new di([...this.plugins,...e])}withPluginAtFront(e){return new di([e,...this.plugins])}withoutPlugins(){return new di([])}}const Ul=new di;function jw(){return new aa({executor:Ul})}function Vw(t,e){return new Xo({joinNode:ws.create(t,Ms(e))})}function Jw(){return new Zo({overNode:Yu.create()})}function kt(t,e){if(e.length===3)return Hw(t,e[0],e[1],e[2]);if(e.length===2)return Kw(t,e[0],e[1]);throw new Error("not implemented")}function Kw(t,e,r){return r(Vw(t,e)).toOperationNode()}function Hw(t,e,r,i){return ws.createWithOn(t,Ms(e),Qr(r,"=",i))}const Gw=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}}),zw=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function Yw(t){return t=Qt(t)?t(Yi()):t,Ds(t).map(zw.create)}const nf=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function ui(t,e,r){return Qt(e)&&(e=e(jl())),Fr(e)||(e=[e]),e.map(i=>nf.create(t,ti(i),r))}var Rr;const Aa=class Aa{constructor(e){_(this,Rr,void 0);A(this,Rr,e)}get expressionType(){}as(e){return new $l(this,e)}or(...e){return new el(Gi.create(s(this,Rr),Nt(e)))}and(...e){return new tl(wn.create(s(this,Rr),Nt(e)))}$castTo(){return new Aa(s(this,Rr))}$notNull(){return new Aa(s(this,Rr))}toOperationNode(){return s(this,Rr)}};Rr=new WeakMap;let Be=Aa;var _i,sn;class $l{constructor(e,r){_(this,_i,void 0);_(this,sn,void 0);A(this,_i,e),A(this,sn,r)}get expression(){return s(this,_i)}get alias(){return s(this,sn)}toOperationNode(){return bn.create(s(this,_i).toOperationNode(),jt(s(this,sn))?s(this,sn).toOperationNode():Ue.create(s(this,sn)))}}_i=new WeakMap,sn=new WeakMap;var Un;const Ra=class Ra{constructor(e){_(this,Un,void 0);A(this,Un,e)}get expressionType(){}as(e){return new $l(this,e)}or(...e){return new Ra(Gi.create(s(this,Un),Nt(e)))}$castTo(){return new Ra(s(this,Un))}toOperationNode(){return ji.create(s(this,Un))}};Un=new WeakMap;let el=Ra;var $n;const Da=class Da{constructor(e){_(this,$n,void 0);A(this,$n,e)}get expressionType(){}as(e){return new $l(this,e)}and(...e){return new Da(wn.create(s(this,$n),Nt(e)))}$castTo(){return new Da(s(this,$n))}toOperationNode(){return ji.create(s(this,$n))}};$n=new WeakMap;let tl=Da;var T;const Y=class Y{constructor(e){_(this,T,void 0);A(this,T,c(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new Y({...s(this,T),queryNode:le.cloneWithWhere(s(this,T).queryNode,Nt(e))})}whereRef(e,r,i){return new Y({...s(this,T),queryNode:le.cloneWithWhere(s(this,T).queryNode,Qr(e,r,i))})}having(...e){return new Y({...s(this,T),queryNode:he.cloneWithHaving(s(this,T).queryNode,Nt(e))})}havingRef(e,r,i){return new Y({...s(this,T),queryNode:he.cloneWithHaving(s(this,T).queryNode,Qr(e,r,i))})}select(e){return new Y({...s(this,T),queryNode:he.cloneWithSelections(s(this,T).queryNode,zi(e))})}distinctOn(e){return new Y({...s(this,T),queryNode:he.cloneWithDistinctOn(s(this,T).queryNode,Ds(e))})}modifyFront(e){return new Y({...s(this,T),queryNode:he.cloneWithFrontModifier(s(this,T).queryNode,Tr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.createWithExpression(e.toOperationNode()))})}distinct(){return new Y({...s(this,T),queryNode:he.cloneWithFrontModifier(s(this,T).queryNode,Tr.create("Distinct"))})}forUpdate(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("ForUpdate",e?Io(e).map(He):void 0))})}forShare(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("ForShare",e?Io(e).map(He):void 0))})}forKeyShare(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("ForKeyShare",e?Io(e).map(He):void 0))})}forNoKeyUpdate(e){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("ForNoKeyUpdate",e?Io(e).map(He):void 0))})}skipLocked(){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("SkipLocked"))})}noWait(){return new Y({...s(this,T),queryNode:he.cloneWithEndModifier(s(this,T).queryNode,Tr.create("NoWait"))})}selectAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSelections(s(this,T).queryNode,no(e))})}innerJoin(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("InnerJoin",e))})}leftJoin(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("LeftJoin",e))})}rightJoin(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("RightJoin",e))})}fullJoin(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("FullJoin",e))})}innerJoinLateral(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("LateralInnerJoin",e))})}leftJoinLateral(...e){return new Y({...s(this,T),queryNode:le.cloneWithJoin(s(this,T).queryNode,kt("LateralLeftJoin",e))})}orderBy(...e){return new Y({...s(this,T),queryNode:he.cloneWithOrderByItems(s(this,T).queryNode,su(e))})}groupBy(e){return new Y({...s(this,T),queryNode:he.cloneWithGroupByItems(s(this,T).queryNode,Yw(e))})}limit(e){return new Y({...s(this,T),queryNode:he.cloneWithLimit(s(this,T).queryNode,zh.create(it(e)))})}offset(e){return new Y({...s(this,T),queryNode:he.cloneWithOffset(s(this,T).queryNode,Gw.create(it(e)))})}union(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("union",e,!1))})}unionAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("union",e,!0))})}intersect(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("intersect",e,!1))})}intersectAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("intersect",e,!0))})}except(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("except",e,!1))})}exceptAll(e){return new Y({...s(this,T),queryNode:he.cloneWithSetOperations(s(this,T).queryNode,ui("except",e,!0))})}as(e){return new sf(this,e)}clearSelect(){return new Y({...s(this,T),queryNode:he.cloneWithoutSelections(s(this,T).queryNode)})}clearWhere(){return new Y({...s(this,T),queryNode:le.cloneWithoutWhere(s(this,T).queryNode)})}clearLimit(){return new Y({...s(this,T),queryNode:he.cloneWithoutLimit(s(this,T).queryNode)})}clearOffset(){return new Y({...s(this,T),queryNode:he.cloneWithoutOffset(s(this,T).queryNode)})}clearOrderBy(){return new Y({...s(this,T),queryNode:he.cloneWithoutOrderBy(s(this,T).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new Y({...s(this,T)})}$castTo(){return new Y(s(this,T))}$narrowType(){return new Y(s(this,T))}$assertType(){return new Y(s(this,T))}$asTuple(){return new Be(this.toOperationNode())}withPlugin(e){return new Y({...s(this,T),executor:s(this,T).executor.withPlugin(e)})}toOperationNode(){return s(this,T).executor.transformQuery(s(this,T).queryNode,s(this,T).queryId)}compile(){return s(this,T).executor.compileQuery(this.toOperationNode(),s(this,T).queryId)}async execute(){const e=this.compile();return(await s(this,T).executor.executeQuery(e,s(this,T).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ou){const r=await this.executeTakeFirst();if(r===void 0)throw au(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,T).executor.stream(r,e,s(this,T).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new Y({...s(this,T),queryNode:le.cloneWithExplain(s(this,T).queryNode,e,r)}).execute()}};T=new WeakMap;let ua=Y;de(ua,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function rl(t){return new ua(t)}var qi,Wi;class sf{constructor(e,r){_(this,qi,void 0);_(this,Wi,void 0);A(this,qi,e),A(this,Wi,r)}get expression(){return s(this,qi)}get alias(){return s(this,Wi)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return bn.create(s(this,qi).toOperationNode(),Ue.create(s(this,Wi)))}}qi=new WeakMap,Wi=new WeakMap;de(sf,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Dn=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?St.cloneWithOperation(t.filter,"And",e):St.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?St.cloneWithOperation(t.filter,"Or",e):St.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}}),qd=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var xt;const tn=class tn{constructor(e){_(this,xt,void 0);A(this,xt,c(e))}get expressionType(){}as(e){return new Xw(this,e)}distinct(){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithDistinct(s(this,xt).aggregateFunctionNode)})}filterWhere(...e){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,Nt(e))})}filterWhereRef(e,r,i){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,Qr(e,r,i))})}over(e){const r=Jw();return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithOver(s(this,xt).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new tn(s(this,xt))}$notNull(){return new tn(s(this,xt))}toOperationNode(){return s(this,xt).aggregateFunctionNode}};xt=new WeakMap;let gi=tn;de(gi,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Ii,Ei;class Xw{constructor(e,r){_(this,Ii,void 0);_(this,Ei,void 0);A(this,Ii,e),A(this,Ei,r)}get expression(){return s(this,Ii)}get alias(){return s(this,Ei)}toOperationNode(){return bn.create(s(this,Ii).toOperationNode(),Ue.create(s(this,Ei)))}}Ii=new WeakMap,Ei=new WeakMap;function of(){const t=(r,i)=>new Be(qd.create(r,Ds(i??[]))),e=(r,i)=>new gi({aggregateFunctionNode:Dn.create(r,i?Ds(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new gi({aggregateFunctionNode:Dn.create("count",no(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new gi({aggregateFunctionNode:Dn.create("json_agg",[Gt(r)?He(r):r.toOperationNode()])})},toJson(r){return new Be(qd.create("to_json",[Gt(r)?He(r):r.toOperationNode()]))}})}const Zw=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function eN(t,e){return Zw.create(Nn.create(t),Ht(e))}const Ql=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}}),_r=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),Ql.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var Ti;class af{constructor(e){_(this,Ti,void 0);A(this,Ti,c(e))}when(...e){return new uf({...s(this,Ti),node:_r.cloneWithWhen(s(this,Ti).node,Ql.create(Nt(e)))})}}Ti=new WeakMap;var Si;class uf{constructor(e){_(this,Si,void 0);A(this,Si,c(e))}then(e){return new tN({...s(this,Si),node:_r.cloneWithThen(s(this,Si).node,Pl(e)?Ll(e):it(e))})}}Si=new WeakMap;var yr;class tN{constructor(e){_(this,yr,void 0);A(this,yr,c(e))}when(...e){return new uf({...s(this,yr),node:_r.cloneWithWhen(s(this,yr).node,Ql.create(Nt(e)))})}else(e){return new rN({...s(this,yr),node:_r.cloneWith(s(this,yr).node,{else:Pl(e)?Ll(e):it(e)})})}end(){return new Be(_r.cloneWith(s(this,yr).node,{isStatement:!1}))}endCase(){return new Be(_r.cloneWith(s(this,yr).node,{isStatement:!0}))}}yr=new WeakMap;var ki;class rN{constructor(e){_(this,ki,void 0);A(this,ki,c(e))}end(){return new Be(_r.cloneWith(s(this,ki).node,{isStatement:!1}))}endCase(){return new Be(_r.cloneWith(s(this,ki).node,{isStatement:!0}))}}ki=new WeakMap;const Wd=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var wr,Ks,nl;class vs{constructor(e){_(this,Ks);_(this,wr,void 0);A(this,wr,e)}at(e){return Ce(this,Ks,nl).call(this,"ArrayLocation",e)}key(e){return Ce(this,Ks,nl).call(this,"Member",e)}}wr=new WeakMap,Ks=new WeakSet,nl=function(e,r){return Go.is(s(this,wr))?new Id(Go.cloneWithTraversal(s(this,wr),Ns.is(s(this,wr).traversal)?Ns.cloneWithLeg(s(this,wr).traversal,Wd.create(e,r)):Qh.cloneWithValue(s(this,wr).traversal,$r.createImmediate(r)))):new Id(Ns.cloneWithLeg(s(this,wr),Wd.create(e,r)))};var Qn;class Id extends vs{constructor(r){super(r);_(this,Qn,void 0);A(this,Qn,r)}get expressionType(){}as(r){return new nN(this,r)}$castTo(){return new vs(s(this,Qn))}$notNull(){return new vs(s(this,Qn))}toOperationNode(){return s(this,Qn)}}Qn=new WeakMap;var Ai,on;class nN{constructor(e,r){_(this,Ai,void 0);_(this,on,void 0);A(this,Ai,e),A(this,on,r)}get expression(){return s(this,Ai)}get alias(){return s(this,on)}toOperationNode(){return bn.create(s(this,Ai).toOperationNode(),jt(s(this,on))?s(this,on).toOperationNode():Ue.create(s(this,on)))}}Ai=new WeakMap,on=new WeakMap;const Ed=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}});function jl(t=Ul){function e(a,l,h){return new Be(Ml(a,l,h))}function r(a,l){return new Be(eN(a,l))}const i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return rl({queryId:ke(),executor:t,queryNode:he.createFrom(Ls(a))})},case(a){return new af({node:_r.create(Xn(a)?void 0:Ht(a))})},ref(a,l){return Xn(l)?new Be(Ur(a)):new vs(pw(a,l))},jsonPath(){return new vs(Ns.create())},table(a){return new Be(He(a))},val(a){return new Be(it(a))},refTuple(...a){return new Be(Ed.create(a.map(Ht)))},tuple(...a){return new Be(Ed.create(a.map(it)))},lit(a){return new Be(Ll(a))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,h){return new Be(Qi.create(Ht(a),Nn.create("between"),wn.create(it(l),it(h))))},betweenSymmetric(a,l,h){return new Be(Qi.create(Ht(a),Nn.create("between symmetric"),wn.create(it(l),it(h))))},and(a){return Fr(a)?new Be(Gu(a,"and")):new Be(hd(a,"and"))},or(a){return Fr(a)?new Be(Gu(a,"or")):new Be(hd(a,"or"))},parens(...a){const l=Nt(a);return ji.is(l)?new Be(l):new Be(ji.create(l))},withSchema(a){return jl(t.withPluginAtFront(new io(a)))}});return i.fn=of(),i.eb=i,i}function Yi(t){return jl()}function ti(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Yi()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function lf(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Yi()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function so(t){return iw(t)||sw(t)||Qt(t)}function Ls(t){return Fr(t)?t.map(e=>Ms(e)):[Ms(t)]}function Ms(t){return Gt(t)?iN(t):lf(t)}function iN(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(cf);return bn.create(He(r),Ue.create(i))}else return He(t)}function He(t){const e=".";if(t.includes(e)){const[r,i]=t.split(e).map(cf);return pn.createWithSchema(r,i)}else return pn.create(t)}function cf(t){return t.trim()}const df=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}}),je=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:Ge.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}}),hf=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:Ge.create(t)})}}),ff=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:Ge.create(t),renameTo:Ge.create(e)})}}),Vl=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?Ue.create(e):void 0})}}),sN=["no action","restrict","cascade","set null","set default"],Lo=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function pf(t){return jt(t)?t.toOperationNode():$r.createImmediate(t)}const To=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}}),oN=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function la(t){if(sN.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Te;const tt=class tt{constructor(e){_(this,Te,void 0);A(this,Te,e)}autoIncrement(){return new tt(je.cloneWith(s(this,Te),{autoIncrement:!0}))}primaryKey(){return new tt(je.cloneWith(s(this,Te),{primaryKey:!0}))}references(e){const r=Ur(e);if(!r.table||Al.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new tt(je.cloneWith(s(this,Te),{references:Lo.create(r.table,[r.column])}))}onDelete(e){if(!s(this,Te).references)throw new Error("on delete constraint can only be added for foreign keys");return new tt(je.cloneWith(s(this,Te),{references:Lo.cloneWithOnDelete(s(this,Te).references,la(e))}))}onUpdate(e){if(!s(this,Te).references)throw new Error("on update constraint can only be added for foreign keys");return new tt(je.cloneWith(s(this,Te),{references:Lo.cloneWithOnUpdate(s(this,Te).references,la(e))}))}unique(){return new tt(je.cloneWith(s(this,Te),{unique:!0}))}notNull(){return new tt(je.cloneWith(s(this,Te),{notNull:!0}))}unsigned(){return new tt(je.cloneWith(s(this,Te),{unsigned:!0}))}defaultTo(e){return new tt(je.cloneWith(s(this,Te),{defaultTo:oN.create(pf(e))}))}check(e){return new tt(je.cloneWith(s(this,Te),{check:Vl.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new tt(je.cloneWith(s(this,Te),{generated:To.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new tt(je.cloneWith(s(this,Te),{generated:To.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new tt(je.cloneWith(s(this,Te),{generated:To.create({identity:!0,byDefault:!0})}))}stored(){if(!s(this,Te).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new tt(je.cloneWith(s(this,Te),{generated:To.cloneWith(s(this,Te).generated,{stored:!0})}))}modifyFront(e){return new tt(je.cloneWithFrontModifier(s(this,Te),e.toOperationNode()))}nullsNotDistinct(){return new tt(je.cloneWith(s(this,Te),{nullsNotDistinct:!0}))}modifyEnd(e){return new tt(je.cloneWithEndModifier(s(this,Te),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return s(this,Te)}};Te=new WeakMap;let gn=tt;de(gn,"don't await ColumnDefinitionBuilder instances directly.");const mf=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}}),aN=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function Ji(t){return jt(t)?t.toOperationNode():aN.create(t)}const ca=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Lo.create(e,r),name:i?Ue.create(i):void 0})},cloneWith(t,e){return c({...t,...e})}});var jn;const Pa=class Pa{constructor(e){_(this,jn,void 0);A(this,jn,e)}onDelete(e){return new Pa(ca.cloneWith(s(this,jn),{onDelete:la(e)}))}onUpdate(e){return new Pa(ca.cloneWith(s(this,jn),{onUpdate:la(e)}))}$call(e){return e(this)}toOperationNode(){return s(this,jn)}};jn=new WeakMap;let Bs=Pa;de(Bs,"don't await ForeignKeyConstraintBuilder instances directly.");const Mo=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}}),Jl=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(Ge.create)),name:e?Ue.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}}),Bo=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})}}),cs=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:Ge.create(t),[e]:r})}});var Dr;class Kl{constructor(e){_(this,Dr,void 0);A(this,Dr,e)}setDataType(e){return new ds(cs.create(s(this,Dr),"dataType",Ji(e)))}setDefault(e){return new ds(cs.create(s(this,Dr),"setDefault",pf(e)))}dropDefault(){return new ds(cs.create(s(this,Dr),"dropDefault",!0))}setNotNull(){return new ds(cs.create(s(this,Dr),"setNotNull",!0))}dropNotNull(){return new ds(cs.create(s(this,Dr),"dropNotNull",!0))}$call(e){return e(this)}}Dr=new WeakMap;var Hs;class ds{constructor(e){_(this,Hs,void 0);A(this,Hs,e)}toOperationNode(){return s(this,Hs)}}Hs=new WeakMap;var sr;class En{constructor(e){_(this,sr,void 0);A(this,sr,c(e))}toOperationNode(){return s(this,sr).executor.transformQuery(s(this,sr).node,s(this,sr).queryId)}compile(){return s(this,sr).executor.compileQuery(this.toOperationNode(),s(this,sr).queryId)}async execute(){await s(this,sr).executor.executeQuery(this.compile(),s(this,sr).queryId)}}sr=new WeakMap;de(En,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var mt;const La=class La{constructor(e){_(this,mt,void 0);A(this,mt,c(e))}onDelete(e){return new La({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onDelete(e)})}onUpdate(e){return new La({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return s(this,mt).executor.transformQuery(Se.cloneWithTableProps(s(this,mt).node,{addConstraint:Mo.create(s(this,mt).constraintBuilder.toOperationNode())}),s(this,mt).queryId)}compile(){return s(this,mt).executor.compileQuery(this.toOperationNode(),s(this,mt).queryId)}async execute(){await s(this,mt).executor.executeQuery(this.compile(),s(this,mt).queryId)}};mt=new WeakMap;let da=La;de(da,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Xe;const Cs=class Cs{constructor(e){_(this,Xe,void 0);A(this,Xe,c(e))}ifExists(){return new Cs({...s(this,Xe),node:Se.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{ifExists:!0})})})}cascade(){return new Cs({...s(this,Xe),node:Se.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Cs({...s(this,Xe),node:Se.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return s(this,Xe).executor.transformQuery(s(this,Xe).node,s(this,Xe).queryId)}compile(){return s(this,Xe).executor.compileQuery(this.toOperationNode(),s(this,Xe).queryId)}async execute(){await s(this,Xe).executor.executeQuery(this.compile(),s(this,Xe).queryId)}};Xe=new WeakMap;let ha=Cs;de(ha,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const yf=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(Ge.create)),name:e?Ue.create(e):void 0})}}),li=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var Pe;const kn=class kn{constructor(e){_(this,Pe,void 0);A(this,Pe,c(e))}unique(){return new kn({...s(this,Pe),node:Se.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWith(s(this,Pe).node.addIndex,{unique:!0})})})}column(e){return new kn({...s(this,Pe),node:Se.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,[zo(e)])})})}columns(e){return new kn({...s(this,Pe),node:Se.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,e.map(zo))})})}expression(e){return new kn({...s(this,Pe),node:Se.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWithColumns(s(this,Pe).node.addIndex,[e.toOperationNode()])})})}using(e){return new kn({...s(this,Pe),node:Se.cloneWithTableProps(s(this,Pe).node,{addIndex:li.cloneWith(s(this,Pe).node.addIndex,{using:yt.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return s(this,Pe).executor.transformQuery(s(this,Pe).node,s(this,Pe).queryId)}compile(){return s(this,Pe).executor.compileQuery(this.toOperationNode(),s(this,Pe).queryId)}async execute(){await s(this,Pe).executor.executeQuery(this.compile(),s(this,Pe).queryId)}};Pe=new WeakMap;let fa=kn;de(fa,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");var Ri;const Gl=class Gl{constructor(e){_(this,Ri,void 0);A(this,Ri,e)}toOperationNode(){return s(this,Ri)}nullsNotDistinct(){return new Gl(Jl.cloneWith(s(this,Ri),{nullsNotDistinct:!0}))}};Ri=new WeakMap;let Fs=Gl;de(Fs,"don't await UniqueConstraintNodeBuilder instances directly.");var be;class wf{constructor(e){_(this,be,void 0);A(this,be,c(e))}renameTo(e){return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{renameTo:He(e)})})}setSchema(e){return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{setSchema:Ue.create(e)})})}alterColumn(e,r){const i=r(new Kl(e));return new nn({...s(this,be),node:Se.cloneWithColumnAlteration(s(this,be).node,i.toOperationNode())})}dropColumn(e){return new nn({...s(this,be),node:Se.cloneWithColumnAlteration(s(this,be).node,hf.create(e))})}renameColumn(e,r){return new nn({...s(this,be),node:Se.cloneWithColumnAlteration(s(this,be).node,ff.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Ji(r))));return new nn({...s(this,be),node:Se.cloneWithColumnAlteration(s(this,be).node,df.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(je.create(e,Ji(r))));return new nn({...s(this,be),node:Se.cloneWithColumnAlteration(s(this,be).node,mf.create(a.toOperationNode()))})}addUniqueConstraint(e,r,i=fn){const a=i(new Fs(Jl.create(r,e)));return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(a.toOperationNode())})})}addCheckConstraint(e,r){return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(Vl.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,a){return new da({...s(this,be),constraintBuilder:new Bs(ca.create(r.map(Ge.create),He(i),a.map(Ge.create),e))})}addPrimaryKeyConstraint(e,r){return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{addConstraint:Mo.create(yf.create(r,e))})})}dropConstraint(e){return new ha({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{dropConstraint:Bo.create(e)})})}addIndex(e){return new fa({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{addIndex:li.create(e)})})}dropIndex(e){return new En({...s(this,be),node:Se.cloneWithTableProps(s(this,be).node,{dropIndex:ys.create(e)})})}$call(e){return e(this)}}be=new WeakMap;var Ke;const An=class An{constructor(e){_(this,Ke,void 0);A(this,Ke,c(e))}alterColumn(e,r){const i=r(new Kl(e));return new An({...s(this,Ke),node:Se.cloneWithColumnAlteration(s(this,Ke).node,i.toOperationNode())})}dropColumn(e){return new An({...s(this,Ke),node:Se.cloneWithColumnAlteration(s(this,Ke).node,hf.create(e))})}renameColumn(e,r){return new An({...s(this,Ke),node:Se.cloneWithColumnAlteration(s(this,Ke).node,ff.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Ji(r))));return new An({...s(this,Ke),node:Se.cloneWithColumnAlteration(s(this,Ke).node,df.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(je.create(e,Ji(r))));return new An({...s(this,Ke),node:Se.cloneWithColumnAlteration(s(this,Ke).node,mf.create(a.toOperationNode()))})}toOperationNode(){return s(this,Ke).executor.transformQuery(s(this,Ke).node,s(this,Ke).queryId)}compile(){return s(this,Ke).executor.compileQuery(this.toOperationNode(),s(this,Ke).queryId)}async execute(){await s(this,Ke).executor.executeQuery(this.compile(),s(this,Ke).queryId)}};Ke=new WeakMap;let nn=An;de(wf,"don't await AlterTableBuilder instances");de(Kl,"don't await AlterColumnBuilder instances");de(nn,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Nf extends Fl{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var qe;const rr=class rr{constructor(e){_(this,qe,void 0);A(this,qe,c(e))}ifNotExists(){return new rr({...s(this,qe),node:Sr.cloneWith(s(this,qe).node,{ifNotExists:!0})})}unique(){return new rr({...s(this,qe),node:Sr.cloneWith(s(this,qe).node,{unique:!0})})}nullsNotDistinct(){return new rr({...s(this,qe),node:Sr.cloneWith(s(this,qe).node,{nullsNotDistinct:!0})})}on(e){return new rr({...s(this,qe),node:Sr.cloneWith(s(this,qe).node,{table:He(e)})})}column(e){return new rr({...s(this,qe),node:Sr.cloneWithColumns(s(this,qe).node,[zo(e)])})}columns(e){return new rr({...s(this,qe),node:Sr.cloneWithColumns(s(this,qe).node,e.map(zo))})}expression(e){return new rr({...s(this,qe),node:Sr.cloneWithColumns(s(this,qe).node,[e.toOperationNode()])})}using(e){return new rr({...s(this,qe),node:Sr.cloneWith(s(this,qe).node,{using:yt.createWithSql(e)})})}where(...e){const r=new Nf;return new rr({...s(this,qe),node:le.cloneWithWhere(s(this,qe).node,r.transformNode(Nt(e)))})}$call(e){return e(this)}toOperationNode(){return s(this,qe).executor.transformQuery(s(this,qe).node,s(this,qe).queryId)}compile(){return s(this,qe).executor.compileQuery(this.toOperationNode(),s(this,qe).queryId)}async execute(){await s(this,qe).executor.executeQuery(this.compile(),s(this,qe).queryId)}};qe=new WeakMap;let pa=rr;de(pa,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Bt;const zl=class zl{constructor(e){_(this,Bt,void 0);A(this,Bt,c(e))}ifNotExists(){return new zl({...s(this,Bt),node:Mh.cloneWith(s(this,Bt).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Bt).executor.transformQuery(s(this,Bt).node,s(this,Bt).queryId)}compile(){return s(this,Bt).executor.compileQuery(this.toOperationNode(),s(this,Bt).queryId)}async execute(){await s(this,Bt).executor.executeQuery(this.compile(),s(this,Bt).queryId)}};Bt=new WeakMap;let ma=zl;de(ma,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function uN(t){if(nw.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var ye;const Mt=class Mt{constructor(e){_(this,ye,void 0);A(this,ye,c(e))}temporary(){return new Mt({...s(this,ye),node:Lt.cloneWith(s(this,ye).node,{temporary:!0})})}onCommit(e){return new Mt({...s(this,ye),node:Lt.cloneWith(s(this,ye).node,{onCommit:uN(e)})})}ifNotExists(){return new Mt({...s(this,ye),node:Lt.cloneWith(s(this,ye).node,{ifNotExists:!0})})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Ji(r))));return new Mt({...s(this,ye),node:Lt.cloneWithColumn(s(this,ye).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Mt({...s(this,ye),node:Lt.cloneWithConstraint(s(this,ye).node,yf.create(r,e))})}addUniqueConstraint(e,r,i=fn){const a=i(new Fs(Jl.create(r,e)));return new Mt({...s(this,ye),node:Lt.cloneWithConstraint(s(this,ye).node,a.toOperationNode())})}addCheckConstraint(e,r){return new Mt({...s(this,ye),node:Lt.cloneWithConstraint(s(this,ye).node,Vl.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,a,l=fn){const h=l(new Bs(ca.create(r.map(Ge.create),He(i),a.map(Ge.create),e)));return new Mt({...s(this,ye),node:Lt.cloneWithConstraint(s(this,ye).node,h.toOperationNode())})}modifyFront(e){return new Mt({...s(this,ye),node:Lt.cloneWithFrontModifier(s(this,ye).node,e.toOperationNode())})}modifyEnd(e){return new Mt({...s(this,ye),node:Lt.cloneWithEndModifier(s(this,ye).node,e.toOperationNode())})}as(e){return new Mt({...s(this,ye),node:Lt.cloneWith(s(this,ye).node,{selectQuery:ti(e)})})}$call(e){return e(this)}toOperationNode(){return s(this,ye).executor.transformQuery(s(this,ye).node,s(this,ye).queryId)}compile(){return s(this,ye).executor.compileQuery(this.toOperationNode(),s(this,ye).queryId)}async execute(){await s(this,ye).executor.executeQuery(this.compile(),s(this,ye).queryId)}};ye=new WeakMap;let ya=Mt;de(ya,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var dt;const _s=class _s{constructor(e){_(this,dt,void 0);A(this,dt,c(e))}on(e){return new _s({...s(this,dt),node:ys.cloneWith(s(this,dt).node,{table:He(e)})})}ifExists(){return new _s({...s(this,dt),node:ys.cloneWith(s(this,dt).node,{ifExists:!0})})}cascade(){return new _s({...s(this,dt),node:ys.cloneWith(s(this,dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,dt).executor.transformQuery(s(this,dt).node,s(this,dt).queryId)}compile(){return s(this,dt).executor.compileQuery(this.toOperationNode(),s(this,dt).queryId)}async execute(){await s(this,dt).executor.executeQuery(this.compile(),s(this,dt).queryId)}};dt=new WeakMap;let wa=_s;de(wa,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ot;const Ma=class Ma{constructor(e){_(this,Ot,void 0);A(this,Ot,c(e))}ifExists(){return new Ma({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{ifExists:!0})})}cascade(){return new Ma({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ot).executor.transformQuery(s(this,Ot).node,s(this,Ot).queryId)}compile(){return s(this,Ot).executor.compileQuery(this.toOperationNode(),s(this,Ot).queryId)}async execute(){await s(this,Ot).executor.executeQuery(this.compile(),s(this,Ot).queryId)}};Ot=new WeakMap;let Na=Ma;de(Na,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Ct;const Ba=class Ba{constructor(e){_(this,Ct,void 0);A(this,Ct,c(e))}ifExists(){return new Ba({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{ifExists:!0})})}cascade(){return new Ba({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ct).executor.transformQuery(s(this,Ct).node,s(this,Ct).queryId)}compile(){return s(this,Ct).executor.compileQuery(this.toOperationNode(),s(this,Ct).queryId)}async execute(){await s(this,Ct).executor.executeQuery(this.compile(),s(this,Ct).queryId)}};Ct=new WeakMap;let ga=Ba;de(ga,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const en=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Fa;class lN{constructor(){_(this,Fa,new Nf)}transformQuery(e){return s(this,Fa).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Fa=new WeakMap;var $e;const rn=class rn{constructor(e){_(this,$e,void 0);A(this,$e,c(e))}temporary(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{temporary:!0})})}materialized(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{materialized:!0})})}ifNotExists(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{ifNotExists:!0})})}orReplace(){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{orReplace:!0})})}columns(e){return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{columns:e.map(Vh)})})}as(e){const r=e.withPlugin(new lN).toOperationNode();return new rn({...s(this,$e),node:en.cloneWith(s(this,$e).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return s(this,$e).executor.transformQuery(s(this,$e).node,s(this,$e).queryId)}compile(){return s(this,$e).executor.compileQuery(this.toOperationNode(),s(this,$e).queryId)}async execute(){await s(this,$e).executor.executeQuery(this.compile(),s(this,$e).queryId)}};$e=new WeakMap;let ba=rn;de(ba,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Fo=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var ht;const qs=class qs{constructor(e){_(this,ht,void 0);A(this,ht,c(e))}materialized(){return new qs({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{materialized:!0})})}ifExists(){return new qs({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{ifExists:!0})})}cascade(){return new qs({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,ht).executor.transformQuery(s(this,ht).node,s(this,ht).queryId)}compile(){return s(this,ht).executor.compileQuery(this.toOperationNode(),s(this,ht).queryId)}async execute(){await s(this,ht).executor.executeQuery(this.compile(),s(this,ht).queryId)}};ht=new WeakMap;let va=qs;de(va,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const gf=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Dl.create(e.map(r=>$r.createImmediate(r)))})}});var Ft;const Yl=class Yl{constructor(e){_(this,Ft,void 0);A(this,Ft,c(e))}toOperationNode(){return s(this,Ft).executor.transformQuery(s(this,Ft).node,s(this,Ft).queryId)}asEnum(e){return new Yl({...s(this,Ft),node:gf.cloneWithEnum(s(this,Ft).node,e)})}$call(e){return e(this)}compile(){return s(this,Ft).executor.compileQuery(this.toOperationNode(),s(this,Ft).queryId)}async execute(){await s(this,Ft).executor.executeQuery(this.compile(),s(this,Ft).queryId)}};Ft=new WeakMap;let xa=Yl;de(xa,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const bf=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var Ut;const Xl=class Xl{constructor(e){_(this,Ut,void 0);A(this,Ut,c(e))}ifExists(){return new Xl({...s(this,Ut),node:bf.cloneWith(s(this,Ut).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ut).executor.transformQuery(s(this,Ut).node,s(this,Ut).queryId)}compile(){return s(this,Ut).executor.compileQuery(this.toOperationNode(),s(this,Ut).queryId)}async execute(){await s(this,Ut).executor.executeQuery(this.compile(),s(this,Ut).queryId)}};Ut=new WeakMap;let Oa=Xl;de(Oa,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Td(t){const e=".";if(t.includes(e)){const r=t.split(e).map(cN);if(r.length===2)return yn.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return yn.create(t)}function cN(t){return t.trim()}var at;const Ws=class Ws{constructor(e){_(this,at,void 0);A(this,at,e)}createTable(e){return new ya({queryId:ke(),executor:s(this,at),node:Lt.create(He(e))})}dropTable(e){return new ga({queryId:ke(),executor:s(this,at),node:Ku.create(He(e))})}createIndex(e){return new pa({queryId:ke(),executor:s(this,at),node:Sr.create(e)})}dropIndex(e){return new wa({queryId:ke(),executor:s(this,at),node:ys.create(e)})}createSchema(e){return new ma({queryId:ke(),executor:s(this,at),node:Mh.create(e)})}dropSchema(e){return new Na({queryId:ke(),executor:s(this,at),node:Ju.create(e)})}alterTable(e){return new wf({queryId:ke(),executor:s(this,at),node:Se.create(He(e))})}createView(e){return new ba({queryId:ke(),executor:s(this,at),node:en.create(e)})}dropView(e){return new va({queryId:ke(),executor:s(this,at),node:Fo.create(e)})}createType(e){return new xa({queryId:ke(),executor:s(this,at),node:gf.create(Td(e))})}dropType(e){return new Oa({queryId:ke(),executor:s(this,at),node:bf.create(Td(e))})}withPlugin(e){return new Ws(s(this,at).withPlugin(e))}withoutPlugins(){return new Ws(s(this,at).withoutPlugins())}withSchema(e){return new Ws(s(this,at).withPluginAtFront(new io(e)))}};at=new WeakMap;let il=Ws;class dN{ref(e){return new hw(e)}}var Di;class hN{constructor(e){_(this,Di,void 0);A(this,Di,e)}async provideConnection(e){const r=await s(this,Di).acquireConnection();try{return await e(r)}finally{await s(this,Di).releaseConnection(r)}}}Di=new WeakMap;var Nr,gr,Pr;const Rn=class Rn extends rf{constructor(r,i,a,l=[]){super(l);_(this,Nr,void 0);_(this,gr,void 0);_(this,Pr,void 0);A(this,Nr,r),A(this,gr,i),A(this,Pr,a)}get adapter(){return s(this,gr)}compileQuery(r){return s(this,Nr).compileQuery(r)}provideConnection(r){return s(this,Pr).provideConnection(r)}withPlugins(r){return new Rn(s(this,Nr),s(this,gr),s(this,Pr),[...this.plugins,...r])}withPlugin(r){return new Rn(s(this,Nr),s(this,gr),s(this,Pr),[...this.plugins,r])}withPluginAtFront(r){return new Rn(s(this,Nr),s(this,gr),s(this,Pr),[r,...this.plugins])}withConnectionProvider(r){return new Rn(s(this,Nr),s(this,gr),r,[...this.plugins])}withoutPlugins(){return new Rn(s(this,Nr),s(this,gr),s(this,Pr),[])}};Nr=new WeakMap,gr=new WeakMap,Pr=new WeakMap;let sl=Rn;function Sd(){return typeof performance<"u"&&Qt(performance.now)?performance.now():Date.now()}var or,an,Lr,Pi,Mr,Gs,Ua,vf,$a,xf,Qa,Of,ja,Cf,zs,ol;class fN{constructor(e,r){_(this,Ua);_(this,$a);_(this,Qa);_(this,ja);_(this,zs);_(this,or,void 0);_(this,an,void 0);_(this,Lr,void 0);_(this,Pi,void 0);_(this,Mr,void 0);_(this,Gs,new WeakSet);A(this,Pi,!1),A(this,or,e),A(this,an,r)}async init(){if(s(this,Mr))throw new Error("driver has already been destroyed");s(this,Lr)||A(this,Lr,s(this,or).init().then(()=>{A(this,Pi,!0)}).catch(e=>(A(this,Lr,void 0),Promise.reject(e)))),await s(this,Lr)}async acquireConnection(){if(s(this,Mr))throw new Error("driver has already been destroyed");s(this,Pi)||await this.init();const e=await s(this,or).acquireConnection();return s(this,Gs).has(e)||(Ce(this,Ua,vf).call(this)&&Ce(this,$a,xf).call(this,e),s(this,Gs).add(e)),e}async releaseConnection(e){await s(this,or).releaseConnection(e)}beginTransaction(e,r){return s(this,or).beginTransaction(e,r)}commitTransaction(e){return s(this,or).commitTransaction(e)}rollbackTransaction(e){return s(this,or).rollbackTransaction(e)}async destroy(){s(this,Lr)&&(await s(this,Lr),s(this,Mr)||A(this,Mr,s(this,or).destroy().catch(e=>(A(this,Mr,void 0),Promise.reject(e)))),await s(this,Mr))}}or=new WeakMap,an=new WeakMap,Lr=new WeakMap,Pi=new WeakMap,Mr=new WeakMap,Gs=new WeakMap,Ua=new WeakSet,vf=function(){return s(this,an).isLevelEnabled("query")||s(this,an).isLevelEnabled("error")},$a=new WeakSet,xf=function(e){const r=e.executeQuery;e.executeQuery=async i=>{let a;const l=Sd();try{return await r.call(e,i)}catch(h){throw a=h,await Ce(this,Qa,Of).call(this,h,i,l),h}finally{a||await Ce(this,ja,Cf).call(this,i,l)}}},Qa=new WeakSet,Of=async function(e,r,i){await s(this,an).error(()=>({level:"error",error:e,query:r,queryDurationMillis:Ce(this,zs,ol).call(this,i)}))},ja=new WeakSet,Cf=async function(e,r){await s(this,an).query(()=>({level:"query",query:e,queryDurationMillis:Ce(this,zs,ol).call(this,r)}))},zs=new WeakSet,ol=function(e){return Sd()-e};const pN=()=>{};var Ys,un,Va,qf;class _f{constructor(e){_(this,Va);_(this,Ys,void 0);_(this,un,void 0);A(this,Ys,e)}async provideConnection(e){for(;s(this,un);)await s(this,un).catch(pN);return A(this,un,Ce(this,Va,qf).call(this,e).finally(()=>{A(this,un,void 0)})),s(this,un)}}Ys=new WeakMap,un=new WeakMap,Va=new WeakSet,qf=async function(e){return await e(s(this,Ys))};const mN=["read uncommitted","read committed","repeatable read","serializable","snapshot"];c(["query","error"]);var ln,Vn;class yN{constructor(e){_(this,ln,void 0);_(this,Vn,void 0);Qt(e)?(A(this,Vn,e),A(this,ln,c({query:!0,error:!0}))):(A(this,Vn,wN),A(this,ln,c({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return s(this,ln)[e]}async query(e){s(this,ln).query&&await s(this,Vn).call(this,e())}async error(e){s(this,ln).error&&await s(this,Vn).call(this,e())}}ln=new WeakMap,Vn=new WeakMap;function wN(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function NN(t){return Or(t)&&Qt(t.compile)}var ft;const fi=class fi extends aa{constructor(r){let i,a;if(gN(r))i={executor:r.executor},a={...r};else{const l=r.dialect,h=l.createDriver(),y=l.createQueryCompiler(),N=l.createAdapter(),f=new yN(r.log??[]),x=new fN(h,f),E=new hN(x),S=new sl(y,N,E,r.plugins??[]);i={executor:S},a={config:r,executor:S,dialect:l,driver:x}}super(i);_(this,ft,void 0);A(this,ft,c(a))}get schema(){return new il(s(this,ft).executor)}get dynamic(){return new dN}get introspection(){return s(this,ft).dialect.createIntrospector(this.withoutPlugins())}case(r){return new af({node:_r.create(Xn(r)?void 0:ti(r))})}get fn(){return of()}transaction(){return new Ca({...s(this,ft)})}connection(){return new Wf({...s(this,ft)})}withPlugin(r){return new fi({...s(this,ft),executor:s(this,ft).executor.withPlugin(r)})}withoutPlugins(){return new fi({...s(this,ft),executor:s(this,ft).executor.withoutPlugins()})}withSchema(r){return new fi({...s(this,ft),executor:s(this,ft).executor.withPluginAtFront(new io(r))})}withTables(){return new fi({...s(this,ft)})}async destroy(){await s(this,ft).driver.destroy()}get isTransaction(){return!1}getExecutor(){return s(this,ft).executor}executeQuery(r,i=ke()){const a=NN(r)?r.compile():r;return this.getExecutor().executeQuery(a,i)}};ft=new WeakMap;let Us=fi;var ar;const pi=class pi extends Us{constructor(r){super(r);_(this,ar,void 0);A(this,ar,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new pi({...s(this,ar),executor:s(this,ar).executor.withPlugin(r)})}withoutPlugins(){return new pi({...s(this,ar),executor:s(this,ar).executor.withoutPlugins()})}withSchema(r){return new pi({...s(this,ar),executor:s(this,ar).executor.withPluginAtFront(new io(r))})}withTables(){return new pi({...s(this,ar)})}};ar=new WeakMap;let al=pi;function gN(t){return Or(t)&&Or(t.config)&&Or(t.driver)&&Or(t.executor)&&Or(t.dialect)}var Jn;class Wf{constructor(e){_(this,Jn,void 0);A(this,Jn,c(e))}async execute(e){return s(this,Jn).executor.provideConnection(async r=>{const i=s(this,Jn).executor.withConnectionProvider(new _f(r)),a=new Us({...s(this,Jn),executor:i});return await e(a)})}}Jn=new WeakMap;de(Wf,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var ur;const Zl=class Zl{constructor(e){_(this,ur,void 0);A(this,ur,c(e))}setIsolationLevel(e){return new Zl({...s(this,ur),isolationLevel:e})}async execute(e){const{isolationLevel:r,...i}=s(this,ur),a={isolationLevel:r};return bN(a),s(this,ur).executor.provideConnection(async l=>{const h=s(this,ur).executor.withConnectionProvider(new _f(l)),y=new al({...i,executor:h});try{await s(this,ur).driver.beginTransaction(l,a);const N=await e(y);return await s(this,ur).driver.commitTransaction(l),N}catch(N){throw await s(this,ur).driver.rollbackTransaction(l),N}})}};ur=new WeakMap;let Ca=Zl;de(Ca,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function bN(t){if(t.isolationLevel&&!mN.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var _t,Li,Uo,Xs,ul,Zs,ll;const Is=class Is{constructor(e){_(this,Li);_(this,Xs);_(this,Zs);_(this,_t,void 0);A(this,_t,c(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new If(this,e)}$castTo(){return new Is({...s(this,_t)})}$notNull(){return new Is(s(this,_t))}withPlugin(e){return new Is({...s(this,_t),plugins:s(this,_t).plugins!==void 0?c([...s(this,_t).plugins,e]):c([e])})}toOperationNode(){return Ce(this,Xs,ul).call(this,Ce(this,Li,Uo).call(this))}compile(e){return Ce(this,Zs,ll).call(this,Ce(this,Li,Uo).call(this,e))}async execute(e){const r=Ce(this,Li,Uo).call(this,e);return r.executeQuery(Ce(this,Zs,ll).call(this,r),s(this,_t).queryId)}};_t=new WeakMap,Li=new WeakSet,Uo=function(e){const r=e!==void 0?e.getExecutor():Ul;return s(this,_t).plugins!==void 0?r.withPlugins(s(this,_t).plugins):r},Xs=new WeakSet,ul=function(e){return e.transformQuery(s(this,_t).rawNode,s(this,_t).queryId)},Zs=new WeakSet,ll=function(e){return e.compileQuery(Ce(this,Xs,ul).call(this,e),s(this,_t).queryId)};let _a=Is;function zr(t){return new _a(t)}de(_a,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Kn,cn;class If{constructor(e,r){_(this,Kn,void 0);_(this,cn,void 0);A(this,Kn,e),A(this,cn,r)}get expression(){return s(this,Kn)}get alias(){return s(this,cn)}get rawBuilder(){return s(this,Kn)}toOperationNode(){return bn.create(s(this,Kn).toOperationNode(),jt(s(this,cn))?s(this,cn).toOperationNode():Ue.create(s(this,cn)))}}Kn=new WeakMap,cn=new WeakMap;de(If,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const nt=Object.assign((t,...e)=>zr({queryId:ke(),rawNode:yt.create(t,e?.map(kd)??[])}),{ref(t){return zr({queryId:ke(),rawNode:yt.createWithChild(Ur(t))})},val(t){return zr({queryId:ke(),rawNode:yt.createWithChild(it(t))})},value(t){return this.val(t)},table(t){return zr({queryId:ke(),rawNode:yt.createWithChild(He(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:ke(),rawNode:yt.create(e,t.map(Ue.create))})},lit(t){return zr({queryId:ke(),rawNode:yt.createWithChild($r.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:ke(),rawNode:yt.createWithSql(t)})},join(t,e=nt`, `){const r=new Array(2*t.length-1),i=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=kd(t[a]),a!==t.length-1&&(r[2*a+1]=i);return zr({queryId:ke(),rawNode:yt.createWithChildren(r)})}});function kd(t){return jt(t)?t.toOperationNode():it(t)}var Ja;class vN{constructor(){Z(this,"nodeStack",[]);_(this,Ja,c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),AddIndexNode:this.visitAddIndex.bind(this)}));Z(this,"visitNode",e=>{this.nodeStack.push(e),s(this,Ja)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Ja=new WeakMap;var Mi,Hn;class xN extends vN{constructor(){super(...arguments);_(this,Mi,"");_(this,Hn,[])}get numParameters(){return s(this,Hn).length}compileQuery(r){return A(this,Mi,""),A(this,Hn,[]),this.visitNode(r),c({query:r,sql:this.getSql(),parameters:[...s(this,Hn)]})}getSql(){return s(this,Mi)}visitSelectQuery(r){const i=this.parentNode!==void 0&&!ji.is(this.parentNode)&&!lr.is(this.parentNode)&&!Lt.is(this.parentNode)&&!en.is(this.parentNode)&&!nf.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),i&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,i=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(i)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const i=this.nodeStack.find(le.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.defaultValues&&(this.append(" "),this.append("default values")),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const i=this.nodeStack.find(le.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!Gt(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:i}=r;for(let a=0;a<i.length;++a)this.appendValue(i[a]),a!==i.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(CN[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:i,parameters:a}=r;for(let l=0;l<i.length;++l)this.append(i[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),r.selectQuery?(this.append(" as "),this.visitNode(r.selectQuery)):(this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," ")))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const i=this.nodeStack.find(le.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Ho(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileColumnAlterations(r.columnAlterations),r.addIndex&&this.visitNode(r.addIndex),r.dropIndex&&this.visitNode(r.dropIndex)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(ON[r.modifier]),r.of&&(this.append(" of "),this.compileList(r.of,", "))}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return Nn.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const i of r.pathLegs)this.visitNode(i);this.append("'")}visitJSONPathLeg(r){const i=r.type==="ArrayLocation";this.append(i?"[":"."),this.append(String(r.value)),i&&this.append("]")}visitJSONOperatorChain(r){for(let i=0,a=r.values.length;i<a;i++)i===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[i])}visitAddIndex(r){this.append("add "),r.unique&&this.append("unique "),this.append("index "),this.visitNode(r.name),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.using&&(this.append(" using "),this.visitNode(r.using))}append(r){A(this,Mi,s(this,Mi)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const i=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const h of r)l+=h,h===i?l+=i:h===a&&(l+=a);return l}addParameter(r){s(this,Hn).push(r)}appendImmediateValue(r){if(Gt(r))this.append(`'${r}'`);else if(Lh(r)||Ho(r))this.append(r.toString());else if(kl(r))this.append("null");else if(tw(r))this.appendImmediateValue(r.toISOString());else if(rw(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((i,a)=>i.modifier&&a.modifier?Ad[i.modifier]-Ad[a.modifier]:1),c(r)}compileColumnAlterations(r){this.compileList(r)}announcesNewColumnDataType(){return!0}}Mi=new WeakMap,Hn=new WeakMap;const ON=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Ad=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),CN=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),qr=c({raw(t,e=[]){return c({sql:t,query:yt.createWithSql(t),parameters:c(e)})}});class _N{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}const qN=/"/g;class Ef extends xN{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(qN,'""')}visitDefaultInsertValue(e){this.append("null")}}const Tf="kysely_migration",Sf="kysely_migration_lock";c({__noMigrations__:!0});var Bi,Ka,Af;class kf{constructor(e){_(this,Ka);_(this,Bi,void 0);A(this,Bi,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=s(this,Bi).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",Tf).where("name","!=",Sf));const i=await r.execute();return Promise.all(i.map(({name:a})=>Ce(this,Ka,Af).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}Bi=new WeakMap,Ka=new WeakSet,Af=async function(e){const r=s(this,Bi),i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=i.sql?.split(/[\(\),]/)?.find(h=>h.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(nt`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:l.map(h=>({name:h.name,dataType:h.type,isNullable:!h.notnull,isAutoIncrementing:h.name===a,hasDefaultValue:h.dflt_value!=null}))}};class Rf extends _N{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var WN=class{createQueryCompiler(){return new Ef}createAdapter(){return new Rf}createIntrospector(t){return new kf(t)}},eo,Bd,IN=(Bd=class{constructor(){_(this,eo,new EN);Z(this,"connection")}async acquireConnection(){return await s(this,eo).lock(),this.connection}async beginTransaction(t){await t.executeQuery(qr.raw("begin"))}async commitTransaction(t){await t.executeQuery(qr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(qr.raw("rollback"))}async releaseConnection(){s(this,eo).unlock()}},eo=new WeakMap,Bd),EN=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},TN=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const i=await this.query(r,t);return he.is(e)||i.length?{rows:i}:{rows:i,...await this.info()}}};function SN(t,e,r){let i,a=0,l=null;function h(){i&&clearTimeout(i),a=0,l=null}function y(){a>=r?(t(l),h()):(i&&clearTimeout(i),i=setTimeout(()=>{t(l),h(),i=void 0},e))}return N=>{a++,l=N,i===void 0&&a===0?(t(N),a++):y()}}var kN=class extends IN{constructor(e){super();Z(this,"config");Z(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new AN(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},AN=class extends TN{constructor(e,r,i=!1,a=2e3,l=1e3){super();Z(this,"db");Z(this,"onWrite");Z(this,"trxCount",0);this.db=e,this.onWrite=r?i?SN(r,a,l):r:void 0}async query(e,r){const i=this.db.prepare(e);i.bind(r);const a=[];for(;i.step();)a.push(i.getAsObject());return i.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},RN=class extends WN{constructor(e){super();Z(this,"config");this.config=e}createDriver(){return new kN(this.config)}};function DN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PN(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),r}var Df={exports:{}};const LN={},MN=Object.freeze(Object.defineProperty({__proto__:null,default:LN},Symbol.toStringTag,{value:"Module"})),Au=PN(MN);(function(t,e){var r=void 0,i=function(a){return r||(r=new Promise(function(l,h){var y=typeof a<"u"?a:{},N=y.onAbort;y.onAbort=function(n){h(new Error(n)),N&&N(n)},y.postRun=y.postRun||[],y.postRun.push(function(){l(y)}),t=void 0;var f;f||(f=typeof y<"u"?y:{}),f.onRuntimeInitialized=function(){function n(g,I){switch(typeof I){case"boolean":Cp(g,I?1:0);break;case"number":vp(g,I);break;case"string":xp(g,I,-1,-1);break;case"object":if(I===null)kc(g);else if(I.length!=null){var F=yo(I,mo);Op(g,F,I.length,-1),go(F)}else vo(g,"Wrong API use : tried to return a value of an unknown type ("+I+").",-1);break;default:kc(g)}}function o(g,I){for(var F=[],z=0;z<g;z+=1){var ae=C(I+4*z,"i32"),Re=yp(ae);if(Re===1||Re===2)ae=bp(ae);else if(Re===3)ae=Np(ae);else if(Re===4){Re=ae,ae=wp(Re),Re=gp(Re);for(var Zt=new Uint8Array(ae),Jt=0;Jt<ae;Jt+=1)Zt[Jt]=We[Re+Jt];ae=Zt}else ae=null;F.push(ae)}return F}function u(g,I){this.La=g,this.db=I,this.Ja=1,this.fb=[]}function d(g,I){if(this.db=I,I=ge(g)+1,this.Ya=No(I),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Le(g,ce,this.Ya,I),this.eb=this.Ya,this.Ua=this.ib=null}function m(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var I=this.filename,F="/",z=I;if(F&&(F=typeof F=="string"?F:rs(F),z=I?W(F+"/"+I):F),I=ec(!0,!0),z=uo(z,(I!==void 0?I:438)&4095|32768,0),g){if(typeof g=="string"){F=Array(g.length);for(var ae=0,Re=g.length;ae<Re;++ae)F[ae]=g.charCodeAt(ae);g=F}co(z,I|146),F=oi(z,577),wc(F,g,0,g.length,0),fu(F),co(z,I)}}this.handleError(K(this.filename,b)),this.db=C(b,"i32"),Rc(this.db),this.Za={},this.Na={}}var b=Hr(4),O=f.cwrap,K=O("sqlite3_open","number",["string","number"]),me=O("sqlite3_close_v2","number",["number"]),ie=O("sqlite3_exec","number",["number","string","number","number","number"]),ze=O("sqlite3_changes","number",["number"]),ot=O("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Wc=O("sqlite3_sql","string",["number"]),Zf=O("sqlite3_normalized_sql","string",["number"]),Ic=O("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ep=O("sqlite3_bind_text","number",["number","number","number","number","number"]),Ec=O("sqlite3_bind_blob","number",["number","number","number","number","number"]),tp=O("sqlite3_bind_double","number",["number","number","number"]),rp=O("sqlite3_bind_int","number",["number","number","number"]),np=O("sqlite3_bind_parameter_index","number",["number","string"]),ip=O("sqlite3_step","number",["number"]),sp=O("sqlite3_errmsg","string",["number"]),op=O("sqlite3_column_count","number",["number"]),ap=O("sqlite3_data_count","number",["number"]),up=O("sqlite3_column_double","number",["number","number"]),Tc=O("sqlite3_column_text","string",["number","number"]),lp=O("sqlite3_column_blob","number",["number","number"]),cp=O("sqlite3_column_bytes","number",["number","number"]),dp=O("sqlite3_column_type","number",["number","number"]),hp=O("sqlite3_column_name","string",["number","number"]),fp=O("sqlite3_reset","number",["number"]),pp=O("sqlite3_clear_bindings","number",["number"]),mp=O("sqlite3_finalize","number",["number"]),Sc=O("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),yp=O("sqlite3_value_type","number",["number"]),wp=O("sqlite3_value_bytes","number",["number"]),Np=O("sqlite3_value_text","string",["number"]),gp=O("sqlite3_value_blob","number",["number"]),bp=O("sqlite3_value_double","number",["number"]),vp=O("sqlite3_result_double","",["number","number"]),kc=O("sqlite3_result_null","",["number"]),xp=O("sqlite3_result_text","",["number","string","number","number"]),Op=O("sqlite3_result_blob","",["number","number","number","number"]),Cp=O("sqlite3_result_int","",["number","number"]),vo=O("sqlite3_result_error","",["number","string","number"]),Ac=O("sqlite3_aggregate_context","number",["number","number"]),Rc=O("RegisterExtensionFunctions","number",["number"]);u.prototype.bind=function(g){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(g)?this.wb(g):g!=null&&typeof g=="object"?this.xb(g):!0},u.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var g=ip(this.La);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},u.prototype.rb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),up(this.La,g)},u.prototype.Ab=function(g){if(g==null&&(g=this.Ja,this.Ja+=1),g=Tc(this.La,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},u.prototype.Bb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),Tc(this.La,g)},u.prototype.getBlob=function(g){g==null&&(g=this.Ja,this.Ja+=1);var I=cp(this.La,g);g=lp(this.La,g);for(var F=new Uint8Array(I),z=0;z<I;z+=1)F[z]=We[g+z];return F},u.prototype.get=function(g,I){I=I||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var F=ap(this.La),z=0;z<F;z+=1)switch(dp(this.La,z)){case 1:var ae=I.useBigInt?this.Ab(z):this.rb(z);g.push(ae);break;case 2:g.push(this.rb(z));break;case 3:g.push(this.Bb(z));break;case 4:g.push(this.getBlob(z));break;default:g.push(null)}return g},u.prototype.getColumnNames=function(){for(var g=[],I=op(this.La),F=0;F<I;F+=1)g.push(hp(this.La,F));return g},u.prototype.getAsObject=function(g,I){g=this.get(g,I),I=this.getColumnNames();for(var F={},z=0;z<I.length;z+=1)F[I[z]]=g[z];return F},u.prototype.getSQL=function(){return Wc(this.La)},u.prototype.getNormalizedSQL=function(){return Zf(this.La)},u.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},u.prototype.nb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),g=It(g);var F=yo(g,mo);this.fb.push(F),this.db.handleError(ep(this.La,I,F,g.length-1,0))},u.prototype.vb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1);var F=yo(g,mo);this.fb.push(F),this.db.handleError(Ec(this.La,I,F,g.length,0))},u.prototype.mb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),this.db.handleError((g===(g|0)?rp:tp)(this.La,I,g))},u.prototype.yb=function(g){g==null&&(g=this.Ja,this.Ja+=1),Ec(this.La,g,0,0,0)},u.prototype.ob=function(g,I){switch(I==null&&(I=this.Ja,this.Ja+=1),typeof g){case"string":this.nb(g,I);return;case"number":this.mb(g,I);return;case"bigint":this.nb(g.toString(),I);return;case"boolean":this.mb(g+0,I);return;case"object":if(g===null){this.yb(I);return}if(g.length!=null){this.vb(g,I);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},u.prototype.xb=function(g){var I=this;return Object.keys(g).forEach(function(F){var z=np(I.La,F);z!==0&&I.ob(g[F],z)}),!0},u.prototype.wb=function(g){for(var I=0;I<g.length;I+=1)this.ob(g[I],I+1);return!0},u.prototype.reset=function(){return this.freemem(),pp(this.La)===0&&fp(this.La)===0},u.prototype.freemem=function(){for(var g;(g=this.fb.pop())!==void 0;)go(g)},u.prototype.free=function(){this.freemem();var g=mp(this.La)===0;return delete this.db.Za[this.La],this.La=0,g},d.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var g=as(),I=Hr(4);q(b),q(I);try{this.db.handleError(Ic(this.db.db,this.eb,-1,b,I)),this.eb=C(I,"i32");var F=C(b,"i32");return F===0?(this.gb(),{done:!0}):(this.Ua=new u(F,this.db),this.db.Za[F]=this.Ua,{value:this.Ua,done:!1})}catch(z){throw this.ib=R(this.eb),this.gb(),z}finally{us(g)}},d.prototype.gb=function(){go(this.Ya),this.Ya=null},d.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:R(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),m.prototype.run=function(g,I){if(!this.db)throw"Database closed";if(I){g=this.prepare(g,I);try{g.step()}finally{g.free()}}else this.handleError(ie(this.db,g,0,0,b));return this},m.prototype.exec=function(g,I,F){if(!this.db)throw"Database closed";var z=as(),ae=null;try{var Re=wu(g),Zt=Hr(4);for(g=[];C(Re,"i8")!==0;){q(b),q(Zt),this.handleError(Ic(this.db,Re,-1,b,Zt));var Jt=C(b,"i32");if(Re=C(Zt,"i32"),Jt!==0){var Pt=null;for(ae=new u(Jt,this),I!=null&&ae.bind(I);ae.step();)Pt===null&&(Pt={columns:ae.getColumnNames(),values:[]},g.push(Pt)),Pt.values.push(ae.get(null,F));ae.free()}}return g}catch(er){throw ae&&ae.free(),er}finally{us(z)}},m.prototype.each=function(g,I,F,z,ae){typeof I=="function"&&(z=F,F=I,I=void 0),g=this.prepare(g,I);try{for(;g.step();)F(g.getAsObject(null,ae))}finally{g.free()}if(typeof z=="function")return z()},m.prototype.prepare=function(g,I){if(q(b),this.handleError(ot(this.db,g,-1,b,0)),g=C(b,"i32"),g===0)throw"Nothing to prepare";var F=new u(g,this);return I!=null&&F.bind(I),this.Za[g]=F},m.prototype.iterateStatements=function(g){return new d(g,this)},m.prototype.export=function(){Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(ai),this.Na={},this.handleError(me(this.db));var g=Hf(this.filename);return this.handleError(K(this.filename,b)),this.db=C(b,"i32"),Rc(this.db),g},m.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(g){g.free()}),Object.values(this.Na).forEach(ai),this.Na={},this.handleError(me(this.db)),dc("/"+this.filename),this.db=null)},m.prototype.handleError=function(g){if(g===0)return null;throw g=sp(this.db),Error(g)},m.prototype.getRowsModified=function(){return ze(this.db)},m.prototype.create_function=function(g,I){Object.prototype.hasOwnProperty.call(this.Na,g)&&(ai(this.Na[g]),delete this.Na[g]);var F=wo(function(z,ae,Re){ae=o(ae,Re);try{var Zt=I.apply(null,ae)}catch(Jt){vo(z,Jt,-1);return}n(z,Zt)},"viii");return this.Na[g]=F,this.handleError(Sc(this.db,g,I.length,1,0,F,0,0,0)),this},m.prototype.create_aggregate=function(g,I){var F=I.init||function(){return null},z=I.finalize||function(Pt){return Pt},ae=I.step;if(!ae)throw"An aggregate function must have a step function in "+g;var Re={};Object.hasOwnProperty.call(this.Na,g)&&(ai(this.Na[g]),delete this.Na[g]),I=g+"__finalize",Object.hasOwnProperty.call(this.Na,I)&&(ai(this.Na[I]),delete this.Na[I]);var Zt=wo(function(Pt,er,gu){var qn=Ac(Pt,1);Object.hasOwnProperty.call(Re,qn)||(Re[qn]=F()),er=o(er,gu),er=[Re[qn]].concat(er);try{Re[qn]=ae.apply(null,er)}catch(_p){delete Re[qn],vo(Pt,_p,-1)}},"viii"),Jt=wo(function(Pt){var er=Ac(Pt,1);try{var gu=z(Re[er])}catch(qn){delete Re[er],vo(Pt,qn,-1);return}n(Pt,gu),delete Re[er]},"vi");return this.Na[g]=Zt,this.Na[I]=Jt,this.handleError(Sc(this.db,g,ae.length-1,1,0,0,Zt,Jt,0)),this},f.Database=m};var x=Object.assign({},f),E="./this.program",S=typeof window=="object",B=typeof importScripts=="function",xe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",H="",pe,fe,ue;if(xe){var U=Au,Oe=Au;H=B?Oe.dirname(H)+"/":__dirname+"/",pe=(n,o)=>(n=Wt(n)?new URL(n):Oe.normalize(n),U.readFileSync(n,o?void 0:"utf8")),ue=n=>(n=pe(n,!0),n.buffer||(n=new Uint8Array(n)),n),fe=(n,o,u,d=!0)=>{n=Wt(n)?new URL(n):Oe.normalize(n),U.readFile(n,d?void 0:"utf8",(m,b)=>{m?u(m):o(d?b.buffer:b)})},!f.thisProgram&&1<process.argv.length&&(E=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=f,f.inspect=()=>"[Emscripten Module object]"}else(S||B)&&(B?H=self.location.href:typeof document<"u"&&document.currentScript&&(H=document.currentScript.src),H=H.indexOf("blob:")!==0?H.substr(0,H.replace(/[?#].*/,"").lastIndexOf("/")+1):"",pe=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},B&&(ue=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),fe=(n,o,u)=>{var d=new XMLHttpRequest;d.open("GET",n,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?o(d.response):u()},d.onerror=u,d.send(null)});var Qe=f.print||console.log.bind(console),te=f.printErr||console.error.bind(console);Object.assign(f,x),x=null,f.thisProgram&&(E=f.thisProgram);var lt;f.wasmBinary&&(lt=f.wasmBinary),typeof WebAssembly!="object"&&Yt("no native wasm support detected");var Je,zt=!1,We,ce,hr,V,Ie,ri,Ze;function Ae(){var n=Je.buffer;f.HEAP8=We=new Int8Array(n),f.HEAP16=hr=new Int16Array(n),f.HEAPU8=ce=new Uint8Array(n),f.HEAPU16=new Uint16Array(n),f.HEAP32=V=new Int32Array(n),f.HEAPU32=Ie=new Uint32Array(n),f.HEAPF32=ri=new Float32Array(n),f.HEAPF64=Ze=new Float64Array(n)}var _e=[],fr=[],vn=[];function Wr(){var n=f.preRun.shift();_e.unshift(n)}var st=0,Vr=null;function Yt(n){throw f.onAbort?.(n),n="Aborted("+n+")",te(n),zt=!0,new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info.")}var oo=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),Xt;if(Xt="sql-wasm.wasm",!oo(Xt)){var ni=Xt;Xt=f.locateFile?f.locateFile(ni,H):H+ni}function Xi(n){if(n==Xt&&lt)return new Uint8Array(lt);if(ue)return ue(n);throw"both async and sync fetching of the wasm failed"}function Jr(n){if(!lt&&(S||B)){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+n+"'";return o.arrayBuffer()}).catch(()=>Xi(n));if(fe)return new Promise((o,u)=>{fe(n,d=>o(new Uint8Array(d)),u)})}return Promise.resolve().then(()=>Xi(n))}function ii(n,o,u){return Jr(n).then(d=>WebAssembly.instantiate(d,o)).then(d=>d).then(u,d=>{te(`failed to asynchronously prepare wasm: ${d}`),Yt(d)})}function Zi(n,o){var u=Xt;lt||typeof WebAssembly.instantiateStreaming!="function"||oo(u)||Wt(u)||xe||typeof fetch!="function"?ii(u,n,o):fetch(u,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,n).then(o,function(m){return te(`wasm streaming compile failed: ${m}`),te("falling back to ArrayBuffer instantiation"),ii(u,n,o)}))}var p,w,v=n=>{for(;0<n.length;)n.shift()(f)};function C(n,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return We[n>>0];case"i8":return We[n>>0];case"i16":return hr[n>>1];case"i32":return V[n>>2];case"i64":Yt("to do getValue(i64) use WASM_BIGINT");case"float":return ri[n>>2];case"double":return Ze[n>>3];case"*":return Ie[n>>2];default:Yt(`invalid type for getValue: ${o}`)}}function q(n){var o="i32";switch(o.endsWith("*")&&(o="*"),o){case"i1":We[n>>0]=0;break;case"i8":We[n>>0]=0;break;case"i16":hr[n>>1]=0;break;case"i32":V[n>>2]=0;break;case"i64":Yt("to do setValue(i64) use WASM_BIGINT");case"float":ri[n>>2]=0;break;case"double":Ze[n>>3]=0;break;case"*":Ie[n>>2]=0;break;default:Yt(`invalid type for setValue: ${o}`)}}var D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,k=(n,o,u)=>{var d=o+u;for(u=o;n[u]&&!(u>=d);)++u;if(16<u-o&&n.buffer&&D)return D.decode(n.subarray(o,u));for(d="";o<u;){var m=n[o++];if(m&128){var b=n[o++]&63;if((m&224)==192)d+=String.fromCharCode((m&31)<<6|b);else{var O=n[o++]&63;m=(m&240)==224?(m&15)<<12|b<<6|O:(m&7)<<18|b<<12|O<<6|n[o++]&63,65536>m?d+=String.fromCharCode(m):(m-=65536,d+=String.fromCharCode(55296|m>>10,56320|m&1023))}}else d+=String.fromCharCode(m)}return d},R=(n,o)=>n?k(ce,n,o):"",L=(n,o)=>{for(var u=0,d=n.length-1;0<=d;d--){var m=n[d];m==="."?n.splice(d,1):m===".."?(n.splice(d,1),u++):u&&(n.splice(d,1),u--)}if(o)for(;u;u--)n.unshift("..");return n},W=n=>{var o=n.charAt(0)==="/",u=n.substr(-1)==="/";return(n=L(n.split("/").filter(d=>!!d),!o).join("/"))||o||(n="."),n&&u&&(n+="/"),(o?"/":"")+n},M=n=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=o[0],o=o[1],!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},$=n=>{if(n==="/")return"/";n=W(n),n=n.replace(/\/$/,"");var o=n.lastIndexOf("/");return o===-1?n:n.substr(o+1)},Q=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(xe)try{var n=Au;if(n.randomFillSync)return u=>n.randomFillSync(u);var o=n.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}Yt("initRandomDevice")},J=n=>(J=Q())(n);function re(){for(var n="",o=!1,u=arguments.length-1;-1<=u&&!o;u--){if(o=0<=u?arguments[u]:"/",typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";n=o+"/"+n,o=o.charAt(0)==="/"}return n=L(n.split("/").filter(d=>!!d),!o).join("/"),(o?"/":"")+n||"."}var Ne=[],ge=n=>{for(var o=0,u=0;u<n.length;++u){var d=n.charCodeAt(u);127>=d?o++:2047>=d?o+=2:55296<=d&&57343>=d?(o+=4,++u):o+=3}return o},Le=(n,o,u,d)=>{if(!(0<d))return 0;var m=u;d=u+d-1;for(var b=0;b<n.length;++b){var O=n.charCodeAt(b);if(55296<=O&&57343>=O){var K=n.charCodeAt(++b);O=65536+((O&1023)<<10)|K&1023}if(127>=O){if(u>=d)break;o[u++]=O}else{if(2047>=O){if(u+1>=d)break;o[u++]=192|O>>6}else{if(65535>=O){if(u+2>=d)break;o[u++]=224|O>>12}else{if(u+3>=d)break;o[u++]=240|O>>18,o[u++]=128|O>>12&63}o[u++]=128|O>>6&63}o[u++]=128|O&63}}return o[u]=0,u-m};function It(n,o){var u=Array(ge(n)+1);return n=Le(n,u,0,u.length),o&&(u.length=n),u}var Ir=[];function es(n,o){Ir[n]={input:[],output:[],Xa:o},du(n,xn)}var xn={open(n){var o=Ir[n.node.rdev];if(!o)throw new P(43);n.tty=o,n.seekable=!1},close(n){n.tty.Xa.fsync(n.tty)},fsync(n){n.tty.Xa.fsync(n.tty)},read(n,o,u,d){if(!n.tty||!n.tty.Xa.sb)throw new P(60);for(var m=0,b=0;b<d;b++){try{var O=n.tty.Xa.sb(n.tty)}catch{throw new P(29)}if(O===void 0&&m===0)throw new P(6);if(O==null)break;m++,o[u+b]=O}return m&&(n.node.timestamp=Date.now()),m},write(n,o,u,d){if(!n.tty||!n.tty.Xa.jb)throw new P(60);try{for(var m=0;m<d;m++)n.tty.Xa.jb(n.tty,o[u+m])}catch{throw new P(29)}return d&&(n.node.timestamp=Date.now()),m}},ao={sb(){e:{if(!Ne.length){var n=null;if(xe){var o=Buffer.alloc(256),u=0,d=process.stdin.fd;try{u=U.readSync(d,o)}catch(m){if(m.toString().includes("EOF"))u=0;else throw m}0<u?n=o.slice(0,u).toString("utf-8"):n=null}else typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`));if(!n){n=null;break e}Ne=It(n,!0)}n=Ne.shift()}return n},jb(n,o){o===null||o===10?(Qe(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(Qe(k(n.output,0)),n.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},gt={jb(n,o){o===null||o===10?(te(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(te(k(n.output,0)),n.output=[])}};function Dt(n,o){var u=n.Ia?n.Ia.length:0;u>=o||(o=Math.max(o,u*(1048576>u?2:1.125)>>>0),u!=0&&(o=Math.max(o,256)),u=n.Ia,n.Ia=new Uint8Array(o),0<n.Ma&&n.Ia.set(u.subarray(0,n.Ma),0))}var ne={Qa:null,Ra(){return ne.createNode(null,"/",16895,0)},createNode(n,o,u,d){if((u&61440)===24576||(u&61440)===4096)throw new P(63);return ne.Qa||(ne.Qa={dir:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa,lookup:ne.Ga.lookup,ab:ne.Ga.ab,rename:ne.Ga.rename,unlink:ne.Ga.unlink,rmdir:ne.Ga.rmdir,readdir:ne.Ga.readdir,symlink:ne.Ga.symlink},stream:{Ta:ne.Ha.Ta}},file:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa},stream:{Ta:ne.Ha.Ta,read:ne.Ha.read,write:ne.Ha.write,lb:ne.Ha.lb,bb:ne.Ha.bb,cb:ne.Ha.cb}},link:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa,readlink:ne.Ga.readlink},stream:{}},pb:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa},stream:Kf}}),u=ic(n,o,u,d),Vt(u.mode)?(u.Ga=ne.Qa.dir.node,u.Ha=ne.Qa.dir.stream,u.Ia={}):(u.mode&61440)===32768?(u.Ga=ne.Qa.file.node,u.Ha=ne.Qa.file.stream,u.Ma=0,u.Ia=null):(u.mode&61440)===40960?(u.Ga=ne.Qa.link.node,u.Ha=ne.Qa.link.stream):(u.mode&61440)===8192&&(u.Ga=ne.Qa.pb.node,u.Ha=ne.Qa.pb.stream),u.timestamp=Date.now(),n&&(n.Ia[o]=u,n.timestamp=u.timestamp),u},Lb(n){return n.Ia?n.Ia.subarray?n.Ia.subarray(0,n.Ma):new Uint8Array(n.Ia):new Uint8Array(0)},Ga:{Pa(n){var o={};return o.dev=(n.mode&61440)===8192?n.id:1,o.ino=n.id,o.mode=n.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=n.rdev,Vt(n.mode)?o.size=4096:(n.mode&61440)===32768?o.size=n.Ma:(n.mode&61440)===40960?o.size=n.link.length:o.size=0,o.atime=new Date(n.timestamp),o.mtime=new Date(n.timestamp),o.ctime=new Date(n.timestamp),o.zb=4096,o.blocks=Math.ceil(o.size/o.zb),o},Oa(n,o){if(o.mode!==void 0&&(n.mode=o.mode),o.timestamp!==void 0&&(n.timestamp=o.timestamp),o.size!==void 0&&(o=o.size,n.Ma!=o))if(o==0)n.Ia=null,n.Ma=0;else{var u=n.Ia;n.Ia=new Uint8Array(o),u&&n.Ia.set(u.subarray(0,Math.min(o,n.Ma))),n.Ma=o}},lookup(){throw lu[44]},ab(n,o,u,d){return ne.createNode(n,o,u,d)},rename(n,o,u){if(Vt(n.mode)){try{var d=On(o,u)}catch{}if(d)for(var m in d.Ia)throw new P(55)}delete n.parent.Ia[n.name],n.parent.timestamp=Date.now(),n.name=u,o.Ia[u]=n,o.timestamp=n.parent.timestamp,n.parent=o},unlink(n,o){delete n.Ia[o],n.timestamp=Date.now()},rmdir(n,o){var u=On(n,o),d;for(d in u.Ia)throw new P(55);delete n.Ia[o],n.timestamp=Date.now()},readdir(n){var o=[".",".."],u;for(u of Object.keys(n.Ia))o.push(u);return o},symlink(n,o,u){return n=ne.createNode(n,o,41471,0),n.link=u,n},readlink(n){if((n.mode&61440)!==40960)throw new P(28);return n.link}},Ha:{read(n,o,u,d,m){var b=n.node.Ia;if(m>=n.node.Ma)return 0;if(n=Math.min(n.node.Ma-m,d),8<n&&b.subarray)o.set(b.subarray(m,m+n),u);else for(d=0;d<n;d++)o[u+d]=b[m+d];return n},write(n,o,u,d,m,b){if(o.buffer===We.buffer&&(b=!1),!d)return 0;if(n=n.node,n.timestamp=Date.now(),o.subarray&&(!n.Ia||n.Ia.subarray)){if(b)return n.Ia=o.subarray(u,u+d),n.Ma=d;if(n.Ma===0&&m===0)return n.Ia=o.slice(u,u+d),n.Ma=d;if(m+d<=n.Ma)return n.Ia.set(o.subarray(u,u+d),m),d}if(Dt(n,m+d),n.Ia.subarray&&o.subarray)n.Ia.set(o.subarray(u,u+d),m);else for(b=0;b<d;b++)n.Ia[m+b]=o[u+b];return n.Ma=Math.max(n.Ma,m+d),d},Ta(n,o,u){if(u===1?o+=n.position:u===2&&(n.node.mode&61440)===32768&&(o+=n.node.Ma),0>o)throw new P(28);return o},lb(n,o,u){Dt(n.node,o+u),n.node.Ma=Math.max(n.node.Ma,o+u)},bb(n,o,u,d,m){if((n.node.mode&61440)!==32768)throw new P(43);if(n=n.node.Ia,m&2||n.buffer!==We.buffer){if((0<u||u+o<n.length)&&(n.subarray?n=n.subarray(u,u+o):n=Array.prototype.slice.call(n,u,u+o)),u=!0,o=65536*Math.ceil(o/65536),(m=_c(65536,o))?(ce.fill(0,m,m+o),o=m):o=0,!o)throw new P(48);We.set(n,o)}else u=!1,o=n.byteOffset;return{Db:o,ub:u}},cb(n,o,u,d){return ne.Ha.write(n,o,0,d,u,!1),0}}},ec=(n,o)=>{var u=0;return n&&(u|=365),o&&(u|=146),u},uu=null,tc={},ts=[],Vf=1,Kr=null,rc=!0,P=null,lu={};function Et(n,o={}){if(n=re(n),!n)return{path:"",node:null};if(o=Object.assign({qb:!0,kb:0},o),8<o.kb)throw new P(32);n=n.split("/").filter(O=>!!O);for(var u=uu,d="/",m=0;m<n.length;m++){var b=m===n.length-1;if(b&&o.parent)break;if(u=On(u,n[m]),d=W(d+"/"+n[m]),u.Va&&(!b||b&&o.qb)&&(u=u.Va.root),!b||o.Sa){for(b=0;(u.mode&61440)===40960;)if(u=hc(d),d=re(M(d),u),u=Et(d,{kb:o.kb+1}).node,40<b++)throw new P(32)}}return{path:d,node:u}}function rs(n){for(var o;;){if(n===n.parent)return n=n.Ra.tb,o?n[n.length-1]!=="/"?`${n}/${o}`:n+o:n;o=o?`${n.name}/${o}`:n.name,n=n.parent}}function cu(n,o){for(var u=0,d=0;d<o.length;d++)u=(u<<5)-u+o.charCodeAt(d)|0;return(n+u>>>0)%Kr.length}function nc(n){var o=cu(n.parent.id,n.name);if(Kr[o]===n)Kr[o]=n.Wa;else for(o=Kr[o];o;){if(o.Wa===n){o.Wa=n.Wa;break}o=o.Wa}}function On(n,o){var u;if(u=(u=si(n,"x"))?u:n.Ga.lookup?0:2)throw new P(u,n);for(u=Kr[cu(n.id,o)];u;u=u.Wa){var d=u.name;if(u.parent.id===n.id&&d===o)return u}return n.Ga.lookup(n,o)}function ic(n,o,u,d){return n=new Oc(n,o,u,d),o=cu(n.parent.id,n.name),n.Wa=Kr[o],Kr[o]=n}function Vt(n){return(n&61440)===16384}function sc(n){var o=["r","w","rw"][n&3];return n&512&&(o+="w"),o}function si(n,o){if(rc)return 0;if(!o.includes("r")||n.mode&292){if(o.includes("w")&&!(n.mode&146)||o.includes("x")&&!(n.mode&73))return 2}else return 2;return 0}function oc(n,o){try{return On(n,o),20}catch{}return si(n,"wx")}function ac(n,o,u){try{var d=On(n,o)}catch(m){return m.Ka}if(n=si(n,"wx"))return n;if(u){if(!Vt(d.mode))return 54;if(d===d.parent||rs(d)==="/")return 10}else if(Vt(d.mode))return 31;return 0}function Jf(){for(var n=0;4096>=n;n++)if(!ts[n])return n;throw new P(33)}function bt(n){if(n=ts[n],!n)throw new P(8);return n}function uc(n,o=-1){return ss||(ss=function(){this.$a={}},ss.prototype={},Object.defineProperties(ss.prototype,{object:{get(){return this.node},set(u){this.node=u}},flags:{get(){return this.$a.flags},set(u){this.$a.flags=u}},position:{get(){return this.$a.position},set(u){this.$a.position=u}}})),n=Object.assign(new ss,n),o==-1&&(o=Jf()),n.fd=o,ts[o]=n}var Kf={open(n){n.Ha=tc[n.node.rdev].Ha,n.Ha.open?.(n)},Ta(){throw new P(70)}};function du(n,o){tc[n]={Ha:o}}function lc(n,o){var u=o==="/",d=!o;if(u&&uu)throw new P(10);if(!u&&!d){var m=Et(o,{qb:!1});if(o=m.path,m=m.node,m.Va)throw new P(10);if(!Vt(m.mode))throw new P(54)}o={type:n,Pb:{},tb:o,Cb:[]},n=n.Ra(o),n.Ra=o,o.root=n,u?uu=n:m&&(m.Va=o,m.Ra&&m.Ra.Cb.push(o))}function uo(n,o,u){var d=Et(n,{parent:!0}).node;if(n=$(n),!n||n==="."||n==="..")throw new P(28);var m=oc(d,n);if(m)throw new P(m);if(!d.Ga.ab)throw new P(63);return d.Ga.ab(d,n,o,u)}function pr(n,o){return uo(n,(o!==void 0?o:511)&1023|16384,0)}function lo(n,o,u){typeof u>"u"&&(u=o,o=438),uo(n,o|8192,u)}function hu(n,o){if(!re(n))throw new P(44);var u=Et(o,{parent:!0}).node;if(!u)throw new P(44);o=$(o);var d=oc(u,o);if(d)throw new P(d);if(!u.Ga.symlink)throw new P(63);u.Ga.symlink(u,o,n)}function cc(n){var o=Et(n,{parent:!0}).node;n=$(n);var u=On(o,n),d=ac(o,n,!0);if(d)throw new P(d);if(!o.Ga.rmdir)throw new P(63);if(u.Va)throw new P(10);o.Ga.rmdir(o,n),nc(u)}function dc(n){var o=Et(n,{parent:!0}).node;if(!o)throw new P(44);n=$(n);var u=On(o,n),d=ac(o,n,!1);if(d)throw new P(d);if(!o.Ga.unlink)throw new P(63);if(u.Va)throw new P(10);o.Ga.unlink(o,n),nc(u)}function hc(n){if(n=Et(n).node,!n)throw new P(44);if(!n.Ga.readlink)throw new P(28);return re(rs(n.parent),n.Ga.readlink(n))}function ns(n,o){if(n=Et(n,{Sa:!o}).node,!n)throw new P(44);if(!n.Ga.Pa)throw new P(63);return n.Ga.Pa(n)}function fc(n){return ns(n,!0)}function co(n,o){if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);n.Ga.Oa(n,{mode:o&4095|n.mode&-4096,timestamp:Date.now()})}function pc(n,o){if(0>o)throw new P(28);if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);if(Vt(n.mode))throw new P(31);if((n.mode&61440)!==32768)throw new P(28);var u=si(n,"w");if(u)throw new P(u);n.Ga.Oa(n,{size:o,timestamp:Date.now()})}function oi(n,o,u){if(n==="")throw new P(44);if(typeof o=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[o];if(typeof d>"u")throw Error(`Unknown file open mode: ${o}`);o=d}if(u=o&64?(typeof u>"u"?438:u)&4095|32768:0,typeof n=="object")var m=n;else{n=W(n);try{m=Et(n,{Sa:!(o&131072)}).node}catch{}}if(d=!1,o&64)if(m){if(o&128)throw new P(20)}else m=uo(n,u,0),d=!0;if(!m)throw new P(44);if((m.mode&61440)===8192&&(o&=-513),o&65536&&!Vt(m.mode))throw new P(54);if(!d&&(u=m?(m.mode&61440)===40960?32:Vt(m.mode)&&(sc(o)!=="r"||o&512)?31:si(m,sc(o)):44))throw new P(u);return o&512&&!d&&pc(m,0),o&=-131713,m=uc({node:m,path:rs(m),flags:o,seekable:!0,position:0,Ha:m.Ha,Fb:[],error:!1}),m.Ha.open&&m.Ha.open(m),!f.logReadFiles||o&1||(pu||(pu={}),n in pu||(pu[n]=1)),m}function fu(n){if(n.fd===null)throw new P(8);n.hb&&(n.hb=null);try{n.Ha.close&&n.Ha.close(n)}catch(o){throw o}finally{ts[n.fd]=null}n.fd=null}function mc(n,o,u){if(n.fd===null)throw new P(8);if(!n.seekable||!n.Ha.Ta)throw new P(70);if(u!=0&&u!=1&&u!=2)throw new P(28);n.position=n.Ha.Ta(n,o,u),n.Fb=[]}function yc(n,o,u,d,m){if(0>d||0>m)throw new P(28);if(n.fd===null)throw new P(8);if((n.flags&2097155)===1)throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.read)throw new P(28);var b=typeof m<"u";if(!b)m=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.read(n,o,u,d,m),b||(n.position+=o),o}function wc(n,o,u,d,m){if(0>d||0>m)throw new P(28);if(n.fd===null)throw new P(8);if(!(n.flags&2097155))throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.write)throw new P(28);n.seekable&&n.flags&1024&&mc(n,0,2);var b=typeof m<"u";if(!b)m=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.write(n,o,u,d,m,void 0),b||(n.position+=o),o}function Hf(n){var o,u=oi(n,u||0);n=ns(n).size;var d=new Uint8Array(n);return yc(u,d,0,n,0),o=d,fu(u),o}function Nc(){P||(P=function(n,o){this.name="ErrnoError",this.node=o,this.Eb=function(u){this.Ka=u},this.Eb(n),this.message="FS error"},P.prototype=Error(),P.prototype.constructor=P,[44].forEach(n=>{lu[n]=new P(n),lu[n].stack="<generic error, no stack>"}))}var gc;function is(n,o,u){n=W("/dev/"+n);var d=ec(!!o,!!u);bc||(bc=64);var m=bc++<<8|0;du(m,{open(b){b.seekable=!1},close(){u?.buffer?.length&&u(10)},read(b,O,K,me){for(var ie=0,ze=0;ze<me;ze++){try{var ot=o()}catch{throw new P(29)}if(ot===void 0&&ie===0)throw new P(6);if(ot==null)break;ie++,O[K+ze]=ot}return ie&&(b.node.timestamp=Date.now()),ie},write(b,O,K,me){for(var ie=0;ie<me;ie++)try{u(O[K+ie])}catch{throw new P(29)}return me&&(b.node.timestamp=Date.now()),ie}}),lo(n,d,m)}var bc,Me={},ss,pu;function Cn(n,o,u){if(o.charAt(0)==="/")return o;if(n=n===-100?"/":bt(n).path,o.length==0){if(!u)throw new P(44);return n}return W(n+"/"+o)}function ho(n,o,u){try{var d=n(o)}catch(b){if(b&&b.node&&W(o)!==W(rs(b.node)))return-54;throw b}V[u>>2]=d.dev,V[u+4>>2]=d.mode,Ie[u+8>>2]=d.nlink,V[u+12>>2]=d.uid,V[u+16>>2]=d.gid,V[u+20>>2]=d.rdev,w=[d.size>>>0,(p=d.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+24>>2]=w[0],V[u+28>>2]=w[1],V[u+32>>2]=4096,V[u+36>>2]=d.blocks,n=d.atime.getTime(),o=d.mtime.getTime();var m=d.ctime.getTime();return w=[Math.floor(n/1e3)>>>0,(p=Math.floor(n/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+40>>2]=w[0],V[u+44>>2]=w[1],Ie[u+48>>2]=n%1e3*1e3,w=[Math.floor(o/1e3)>>>0,(p=Math.floor(o/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+56>>2]=w[0],V[u+60>>2]=w[1],Ie[u+64>>2]=o%1e3*1e3,w=[Math.floor(m/1e3)>>>0,(p=Math.floor(m/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+72>>2]=w[0],V[u+76>>2]=w[1],Ie[u+80>>2]=m%1e3*1e3,w=[d.ino>>>0,(p=d.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+88>>2]=w[0],V[u+92>>2]=w[1],0}var fo=void 0;function po(){var n=V[+fo>>2];return fo+=4,n}var os=(n,o)=>o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN,Gf=[0,31,60,91,121,152,182,213,244,274,305,335],zf=[0,31,59,90,120,151,181,212,243,273,304,334],vc=n=>{var o=ge(n)+1,u=No(o);return u&&Le(n,ce,u,o),u},mu={},xc=()=>{if(!yu){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"},o;for(o in mu)mu[o]===void 0?delete n[o]:n[o]=mu[o];var u=[];for(o in n)u.push(`${o}=${n[o]}`);yu=u}return yu},yu,wu=n=>{var o=ge(n)+1,u=Hr(o);return Le(n,ce,u,o),u},Yf=(n,o,u,d)=>{var m={string:ie=>{var ze=0;return ie!=null&&ie!==0&&(ze=wu(ie)),ze},array:ie=>{var ze=Hr(ie.length);return We.set(ie,ze),ze}};n=f["_"+n];var b=[],O=0;if(d)for(var K=0;K<d.length;K++){var me=m[u[K]];me?(O===0&&(O=as()),b[K]=me(d[K])):b[K]=d[K]}return u=n.apply(null,b),u=function(ie){return O!==0&&us(O),o==="string"?ie?k(ce,ie):"":o==="boolean"?!!ie:ie}(u)},mo=0,yo=(n,o)=>(o=o==1?Hr(n.length):No(n.length),n.subarray||n.slice||(n=new Uint8Array(n)),ce.set(n,o),o),_n,Nu=[],Er,ai=n=>{_n.delete(Er.get(n)),Er.set(n,null),Nu.push(n)},wo=(n,o)=>{if(!_n){_n=new WeakMap;var u=Er.length;if(_n)for(var d=0;d<0+u;d++){var m=Er.get(d);m&&_n.set(m,d)}}if(u=_n.get(n)||0)return u;if(Nu.length)u=Nu.pop();else{try{Er.grow(1)}catch(K){throw K instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":K}u=Er.length-1}try{Er.set(u,n)}catch(K){if(!(K instanceof TypeError))throw K;if(typeof WebAssembly.Function=="function"){d=WebAssembly.Function,m={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:o[0]=="v"?[]:[m[o[0]]]},O=1;O<o.length;++O)b.parameters.push(m[o[O]]);o=new d(b,n)}else{for(d=[1],m=o.slice(0,1),o=o.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96),O=o.length,128>O?d.push(O):d.push(O%128|128,O>>7),O=0;O<o.length;++O)d.push(b[o[O]]);m=="v"?d.push(0):d.push(1,b[m]),o=[0,97,115,109,1,0,0,0,1],m=d.length,128>m?o.push(m):o.push(m%128|128,m>>7),o.push.apply(o,d),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:n}}).exports.f}Er.set(u,o)}return _n.set(n,u),u};function Oc(n,o,u,d){n||(n=this),this.parent=n,this.Ra=n.Ra,this.Va=null,this.id=Vf++,this.name=o,this.mode=u,this.Ga={},this.Ha={},this.rdev=d}Object.defineProperties(Oc.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),Nc(),Kr=Array(4096),lc(ne,"/"),pr("/tmp"),pr("/home"),pr("/home/web_user"),function(){pr("/dev"),du(259,{read:()=>0,write:(d,m,b,O)=>O}),lo("/dev/null",259),es(1280,ao),es(1536,gt),lo("/dev/tty",1280),lo("/dev/tty1",1536);var n=new Uint8Array(1024),o=0,u=()=>(o===0&&(o=J(n).byteLength),n[--o]);is("random",u),is("urandom",u),pr("/dev/shm"),pr("/dev/shm/tmp")}(),function(){pr("/proc");var n=pr("/proc/self");pr("/proc/self/fd"),lc({Ra(){var o=ic(n,"fd",16895,73);return o.Ga={lookup(u,d){var m=bt(+d);return u={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>m.path}},u.parent=u}},o}},"/proc/self/fd")}();var Xf={a:(n,o,u,d)=>{Yt(`Assertion failed: ${n?k(ce,n):""}, at: `+[o?o?k(ce,o):"":"unknown filename",u,d?d?k(ce,d):"":"unknown function"])},h:function(n,o){try{return n=n?k(ce,n):"",co(n,o),0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},H:function(n,o,u){try{if(o=o?k(ce,o):"",o=Cn(n,o),u&-8)return-28;var d=Et(o,{Sa:!0}).node;return d?(n="",u&4&&(n+="r"),u&2&&(n+="w"),u&1&&(n+="x"),n&&si(d,n)?-2:0):-44}catch(m){if(typeof Me>"u"||m.name!=="ErrnoError")throw m;return-m.Ka}},i:function(n,o){try{var u=bt(n);return co(u.node,o),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},g:function(n){try{var o=bt(n).node,u=typeof o=="string"?Et(o,{Sa:!0}).node:o;if(!u.Ga.Oa)throw new P(63);return u.Ga.Oa(u,{timestamp:Date.now()}),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},b:function(n,o,u){fo=u;try{var d=bt(n);switch(o){case 0:var m=po();if(0>m)return-28;for(;ts[m];)m++;return uc(d,m).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return m=po(),d.flags|=m,0;case 5:return m=po(),hr[m+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return V[Cc()>>2]=28,-1;default:return-28}}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},f:function(n,o){try{var u=bt(n);return ho(ns,u.path,o)}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},n:function(n,o,u){o=os(o,u);try{if(isNaN(o))return 61;var d=bt(n);if(!(d.flags&2097155))throw new P(28);return pc(d.node,o),0}catch(m){if(typeof Me>"u"||m.name!=="ErrnoError")throw m;return-m.Ka}},C:function(n,o){try{if(o===0)return-28;var u=ge("/")+1;return o<u?-68:(Le("/",ce,n,o),u)}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},F:function(n,o){try{return n=n?k(ce,n):"",ho(fc,n,o)}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},z:function(n,o,u){try{return o=o?k(ce,o):"",o=Cn(n,o),o=W(o),o[o.length-1]==="/"&&(o=o.substr(0,o.length-1)),pr(o,u),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},E:function(n,o,u,d){try{o=o?k(ce,o):"";var m=d&256;return o=Cn(n,o,d&4096),ho(m?fc:ns,o,u)}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},y:function(n,o,u,d){fo=d;try{o=o?k(ce,o):"",o=Cn(n,o);var m=d?po():0;return oi(o,u,m).fd}catch(b){if(typeof Me>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},w:function(n,o,u,d){try{if(o=o?k(ce,o):"",o=Cn(n,o),0>=d)return-28;var m=hc(o),b=Math.min(d,ge(m)),O=We[u+b];return Le(m,ce,u,d+1),We[u+b]=O,b}catch(K){if(typeof Me>"u"||K.name!=="ErrnoError")throw K;return-K.Ka}},v:function(n){try{return n=n?k(ce,n):"",cc(n),0}catch(o){if(typeof Me>"u"||o.name!=="ErrnoError")throw o;return-o.Ka}},G:function(n,o){try{return n=n?k(ce,n):"",ho(ns,n,o)}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},r:function(n,o,u){try{return o=o?k(ce,o):"",o=Cn(n,o),u===0?dc(o):u===512?cc(o):Yt("Invalid flags passed to unlinkat"),0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},q:function(n,o,u){try{if(o=o?k(ce,o):"",o=Cn(n,o,!0),u){var d=Ie[u>>2]+4294967296*V[u+4>>2],m=V[u+8>>2];b=1e3*d+m/1e6,u+=16,d=Ie[u>>2]+4294967296*V[u+4>>2],m=V[u+8>>2],O=1e3*d+m/1e6}else var b=Date.now(),O=b;n=b;var K=Et(o,{Sa:!0}).node;return K.Ga.Oa(K,{timestamp:Math.max(n,O)}),0}catch(me){if(typeof Me>"u"||me.name!=="ErrnoError")throw me;return-me.Ka}},l:function(n,o,u){n=new Date(1e3*os(n,o)),V[u>>2]=n.getSeconds(),V[u+4>>2]=n.getMinutes(),V[u+8>>2]=n.getHours(),V[u+12>>2]=n.getDate(),V[u+16>>2]=n.getMonth(),V[u+20>>2]=n.getFullYear()-1900,V[u+24>>2]=n.getDay(),o=n.getFullYear(),V[u+28>>2]=(o%4!==0||o%100===0&&o%400!==0?zf:Gf)[n.getMonth()]+n.getDate()-1|0,V[u+36>>2]=-(60*n.getTimezoneOffset()),o=new Date(n.getFullYear(),6,1).getTimezoneOffset();var d=new Date(n.getFullYear(),0,1).getTimezoneOffset();V[u+32>>2]=(o!=d&&n.getTimezoneOffset()==Math.min(d,o))|0},j:function(n,o,u,d,m,b,O,K){m=os(m,b);try{if(isNaN(m))return 61;var me=bt(d);if(o&2&&!(u&2)&&(me.flags&2097155)!==2)throw new P(2);if((me.flags&2097155)===1)throw new P(2);if(!me.Ha.bb)throw new P(43);var ie=me.Ha.bb(me,n,m,o,u),ze=ie.Db;return V[O>>2]=ie.ub,Ie[K>>2]=ze,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return-ot.Ka}},k:function(n,o,u,d,m,b,O){b=os(b,O);try{if(isNaN(b))return 61;var K=bt(m);if(u&2){if((K.node.mode&61440)!==32768)throw new P(43);if(!(d&2)){var me=ce.slice(n,n+o);K.Ha.cb&&K.Ha.cb(K,me,b,o,d)}}}catch(ie){if(typeof Me>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Ka}},s:(n,o,u)=>{function d(me){return(me=me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?me[1]:"GMT"}var m=new Date().getFullYear(),b=new Date(m,0,1),O=new Date(m,6,1);m=b.getTimezoneOffset();var K=O.getTimezoneOffset();Ie[n>>2]=60*Math.max(m,K),V[o>>2]=+(m!=K),n=d(b),o=d(O),n=vc(n),o=vc(o),K<m?(Ie[u>>2]=n,Ie[u+4>>2]=o):(Ie[u>>2]=o,Ie[u+4>>2]=n)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:n=>{var o=ce.length;if(n>>>=0,2147483648<n)return!1;for(var u=1;4>=u;u*=2){var d=o*(1+.2/u);d=Math.min(d,n+100663296);var m=Math;d=Math.max(n,d);e:{m=(m.min.call(m,2147483648,d+(65536-d%65536)%65536)-Je.buffer.byteLength+65535)/65536;try{Je.grow(m),Ae();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(n,o)=>{var u=0;return xc().forEach((d,m)=>{var b=o+u;for(m=Ie[n+4*m>>2]=b,b=0;b<d.length;++b)We[m++>>0]=d.charCodeAt(b);We[m>>0]=0,u+=d.length+1}),0},B:(n,o)=>{var u=xc();Ie[n>>2]=u.length;var d=0;return u.forEach(m=>d+=m.length+1),Ie[o>>2]=d,0},e:function(n){try{var o=bt(n);return fu(o),0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},p:function(n,o){try{var u=bt(n);return We[o>>0]=u.tty?2:Vt(u.mode)?3:(u.mode&61440)===40960?7:4,hr[o+2>>1]=0,w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+8>>2]=w[0],V[o+12>>2]=w[1],w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+16>>2]=w[0],V[o+20>>2]=w[1],0}catch(d){if(typeof Me>"u"||d.name!=="ErrnoError")throw d;return d.Ka}},x:function(n,o,u,d){try{e:{var m=bt(n);n=o;for(var b,O=o=0;O<u;O++){var K=Ie[n>>2],me=Ie[n+4>>2];n+=8;var ie=yc(m,We,K,me,b);if(0>ie){var ze=-1;break e}if(o+=ie,ie<me)break;typeof b<"u"&&(b+=ie)}ze=o}return Ie[d>>2]=ze,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}},m:function(n,o,u,d,m){o=os(o,u);try{if(isNaN(o))return 61;var b=bt(n);return mc(b,o,d),w=[b.position>>>0,(p=b.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[m>>2]=w[0],V[m+4>>2]=w[1],b.hb&&o===0&&d===0&&(b.hb=null),0}catch(O){if(typeof Me>"u"||O.name!=="ErrnoError")throw O;return O.Ka}},D:function(n){try{var o=bt(n);return o.Ha?.fsync?o.Ha.fsync(o):0}catch(u){if(typeof Me>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},u:function(n,o,u,d){try{e:{var m=bt(n);n=o;for(var b,O=o=0;O<u;O++){var K=Ie[n>>2],me=Ie[n+4>>2];n+=8;var ie=wc(m,We,K,me,b);if(0>ie){var ze=-1;break e}o+=ie,typeof b<"u"&&(b+=ie)}ze=o}return Ie[d>>2]=ze,0}catch(ot){if(typeof Me>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}}},j=function(){function n(u){return j=u.exports,Je=j.I,Ae(),Er=j.Aa,fr.unshift(j.J),st--,f.monitorRunDependencies?.(st),st==0&&Vr&&(u=Vr,Vr=null,u()),j}var o={a:Xf};if(st++,f.monitorRunDependencies?.(st),f.instantiateWasm)try{return f.instantiateWasm(o,n)}catch(u){return te(`Module.instantiateWasm callback failed with error: ${u}`),!1}return Zi(o,function(u){n(u.instance)}),{}}();f._sqlite3_free=n=>(f._sqlite3_free=j.K)(n),f._sqlite3_value_text=n=>(f._sqlite3_value_text=j.L)(n);var Cc=()=>(Cc=j.M)();f._sqlite3_prepare_v2=(n,o,u,d,m)=>(f._sqlite3_prepare_v2=j.N)(n,o,u,d,m),f._sqlite3_step=n=>(f._sqlite3_step=j.O)(n),f._sqlite3_finalize=n=>(f._sqlite3_finalize=j.P)(n),f._sqlite3_reset=n=>(f._sqlite3_reset=j.Q)(n),f._sqlite3_clear_bindings=n=>(f._sqlite3_clear_bindings=j.R)(n),f._sqlite3_value_blob=n=>(f._sqlite3_value_blob=j.S)(n),f._sqlite3_value_bytes=n=>(f._sqlite3_value_bytes=j.T)(n),f._sqlite3_value_double=n=>(f._sqlite3_value_double=j.U)(n),f._sqlite3_value_int=n=>(f._sqlite3_value_int=j.V)(n),f._sqlite3_value_type=n=>(f._sqlite3_value_type=j.W)(n),f._sqlite3_result_blob=(n,o,u,d)=>(f._sqlite3_result_blob=j.X)(n,o,u,d),f._sqlite3_result_double=(n,o)=>(f._sqlite3_result_double=j.Y)(n,o),f._sqlite3_result_error=(n,o,u)=>(f._sqlite3_result_error=j.Z)(n,o,u),f._sqlite3_result_int=(n,o)=>(f._sqlite3_result_int=j._)(n,o),f._sqlite3_result_int64=(n,o,u)=>(f._sqlite3_result_int64=j.$)(n,o,u),f._sqlite3_result_null=n=>(f._sqlite3_result_null=j.aa)(n),f._sqlite3_result_text=(n,o,u,d)=>(f._sqlite3_result_text=j.ba)(n,o,u,d),f._sqlite3_aggregate_context=(n,o)=>(f._sqlite3_aggregate_context=j.ca)(n,o),f._sqlite3_column_count=n=>(f._sqlite3_column_count=j.da)(n),f._sqlite3_data_count=n=>(f._sqlite3_data_count=j.ea)(n),f._sqlite3_column_blob=(n,o)=>(f._sqlite3_column_blob=j.fa)(n,o),f._sqlite3_column_bytes=(n,o)=>(f._sqlite3_column_bytes=j.ga)(n,o),f._sqlite3_column_double=(n,o)=>(f._sqlite3_column_double=j.ha)(n,o),f._sqlite3_column_text=(n,o)=>(f._sqlite3_column_text=j.ia)(n,o),f._sqlite3_column_type=(n,o)=>(f._sqlite3_column_type=j.ja)(n,o),f._sqlite3_column_name=(n,o)=>(f._sqlite3_column_name=j.ka)(n,o),f._sqlite3_bind_blob=(n,o,u,d,m)=>(f._sqlite3_bind_blob=j.la)(n,o,u,d,m),f._sqlite3_bind_double=(n,o,u)=>(f._sqlite3_bind_double=j.ma)(n,o,u),f._sqlite3_bind_int=(n,o,u)=>(f._sqlite3_bind_int=j.na)(n,o,u),f._sqlite3_bind_text=(n,o,u,d,m)=>(f._sqlite3_bind_text=j.oa)(n,o,u,d,m),f._sqlite3_bind_parameter_index=(n,o)=>(f._sqlite3_bind_parameter_index=j.pa)(n,o),f._sqlite3_sql=n=>(f._sqlite3_sql=j.qa)(n),f._sqlite3_normalized_sql=n=>(f._sqlite3_normalized_sql=j.ra)(n),f._sqlite3_errmsg=n=>(f._sqlite3_errmsg=j.sa)(n),f._sqlite3_exec=(n,o,u,d,m)=>(f._sqlite3_exec=j.ta)(n,o,u,d,m),f._sqlite3_changes=n=>(f._sqlite3_changes=j.ua)(n),f._sqlite3_close_v2=n=>(f._sqlite3_close_v2=j.va)(n),f._sqlite3_create_function_v2=(n,o,u,d,m,b,O,K,me)=>(f._sqlite3_create_function_v2=j.wa)(n,o,u,d,m,b,O,K,me),f._sqlite3_open=(n,o)=>(f._sqlite3_open=j.xa)(n,o);var No=f._malloc=n=>(No=f._malloc=j.ya)(n),go=f._free=n=>(go=f._free=j.za)(n);f._RegisterExtensionFunctions=n=>(f._RegisterExtensionFunctions=j.Ba)(n);var _c=(n,o)=>(_c=j.Ca)(n,o),as=()=>(as=j.Da)(),us=n=>(us=j.Ea)(n),Hr=n=>(Hr=j.Fa)(n);f.stackAlloc=Hr,f.stackSave=as,f.stackRestore=us,f.cwrap=(n,o,u,d)=>{var m=!u||u.every(b=>b==="number"||b==="boolean");return o!=="string"&&m&&!d?f["_"+n]:function(){return Yf(n,o,u,arguments)}},f.addFunction=wo,f.removeFunction=ai,f.UTF8ToString=R,f.ALLOC_NORMAL=mo,f.allocate=yo,f.allocateUTF8OnStack=wu;var bo;Vr=function n(){bo||qc(),bo||(Vr=n)};function qc(){function n(){if(!bo&&(bo=!0,f.calledRun=!0,!zt)){if(f.noFSInit||gc||(gc=!0,Nc(),f.stdin=f.stdin,f.stdout=f.stdout,f.stderr=f.stderr,f.stdin?is("stdin",f.stdin):hu("/dev/tty","/dev/stdin"),f.stdout?is("stdout",null,f.stdout):hu("/dev/tty","/dev/stdout"),f.stderr?is("stderr",null,f.stderr):hu("/dev/tty1","/dev/stderr"),oi("/dev/stdin",0),oi("/dev/stdout",1),oi("/dev/stderr",1)),rc=!1,v(fr),f.onRuntimeInitialized&&f.onRuntimeInitialized(),f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var o=f.postRun.shift();vn.unshift(o)}v(vn)}}if(!(0<st)){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)Wr();v(_e),0<st||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),n()},1)):n())}}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return qc(),y}),r)};t.exports=i,t.exports.default=i})(Df);var BN=Df.exports;const FN=DN(BN),UN=""+new URL("sql-wasm-O_OSQASm.wasm",import.meta.url).href,$N="sqlitevfs",hi=new Map,QN=2048,jN=65536;class VN{constructor(e){Z(this,"_data");Z(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const i=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(i),i.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,i=Math.min(jN,Math.max(QN,this._data.length)),a=new Uint8Array(this._data.length+Math.max(i,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const JN=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Hl=new Promise((t,e)=>{const r=JN.open($N,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function KN(t){const e=await Hl,r=await new Promise((i,a)=>{const h=e.transaction("files","readonly").objectStore("files").get(t);h.onsuccess=()=>i(h.result),h.onerror=()=>a(h.error)});if(r&&!hi.has(t)){const i=new VN(r.data);return hi.set(t,i),i}else return hi.has(t)?hi.get(t):null}async function HN(t,e){const r=await Hl;await new Promise((i,a)=>{const h=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});h.onsuccess=()=>i(!0),h.onerror=()=>a(h.error)})}async function Rd(t){const e=await Hl;await new Promise((r,i)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>i(l.error)})}async function GN(t,e){if(await HN(t,e),hi.has(t)){const r=hi.get(t);r.truncate(0),r.write(0,e)}}var zN=class extends Fl{constructor(e){super();Z(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:i,...a}=r,l=this.serializer(i);return i===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},Pf=t=>{if(Lf(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},YN=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,XN=t=>{if(Lf(t))return t;if(typeof t=="string"){if(t==="true")return!0;if(t==="false")return!1;if(YN.test(t))return new Date(t);if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch{}return t}};function Lf(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var ZN=class{constructor(t={}){Z(this,"transformer");Z(this,"deserializer");Z(this,"skipNodeSet");Z(this,"ctx");const{deserializer:e=XN,serializer:r=Pf,skipNodeKind:i=[]}=t;this.transformer=new zN(r),this.deserializer=e,i.length&&(this.skipNodeSet=new Set(i),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:t.rows.map(r=>Object.fromEntries(Object.entries(r).map(([i,a])=>[i,this.deserializer(a)])))}}};function Dd(t){const{logger:e,merge:r,logQueryNode:i}=t;return a=>{const{level:l,queryDurationMillis:h,query:{parameters:y,sql:N,query:f}}=a,x=l==="error"?a.error:void 0;let E=N.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&y.forEach(B=>{E=E.replace("?",JSON.stringify(B))});const S={sql:E,params:y,duration:h,error:x};i&&(S.queryNode=f),e(S)}}async function eg(t){const{rows:e}=await t.executeQuery(qr.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function Pd(t,e){if(e)return await t.executeQuery(qr.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(qr.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function tg(t){return`__pre_${t}`}function rg(t,e=r=>r){return{setParam:r=>{let i;return(a,l)=>{if(!i){const{parameters:h,sql:y,query:N}=r({qb:t,param:tg}).compile();i={sql:y,query:l?.(N)||{kind:N.kind},parameters:h}}return{...i,parameters:i.parameters.map(h=>typeof h=="string"&&h.startsWith("__pre_")?e(a[h.slice(6)]):h)}}}}}async function ng(t,e){const r=e||`sp_${Date.now()%1e8}`;return await nt`savepoint ${nt.raw(r)}`.execute(t),{release:async()=>{await nt`release savepoint ${nt.raw(r)}`.execute(t)},rollback:async()=>{await nt`rollback to savepoint ${nt.raw(r)}`.execute(t)}}}async function ig(t,e,r){const{release:i,rollback:a}=await ng(t,r);try{const l=await e(t);return await i(),l}catch(l){throw await a(),l}}var sg=class extends Error{constructor(){super("db file maybe broken")}};function og(t){return t.toOperationNode().kind==="SelectQueryNode"}var ag=class{constructor(t){Z(this,"kysely");Z(this,"trxCount",0);Z(this,"trx");Z(this,"logger");Z(this,"serializer",Pf);const{dialect:e,logger:r,onQuery:i,plugins:a=[],serializerPluginOptions:l}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new ZN(l));let h;i===!0?h=Dd({logger:this.logger?.debug||console.log,merge:!0}):i&&(h=Dd(i)),this.kysely=new Us({dialect:e,log:h,plugins:a})}async updateTableSchema(t,e){try{if(e&&!await eg(this.kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new sg};const r=await t(this.kysely,this.logger);return this.logger?.info("table updated"),r}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}}getDB(){return this.trx||this.kysely}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await ig(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trxCount--)):await this.kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.getDB()).execute():await this.getDB().executeQuery(t)}async executeTakeFirst(t){let e=t(this.getDB());return og(e)&&(e=e.limit(1)),await e.executeTakeFirstOrThrow()}precompile(t){return this.logger?.debug?.("precompile"),rg(t(this.kysely),this.serializer)}async raw(t,e){return typeof t=="string"?await this.getDB().executeQuery(qr.raw(t,e)):await t.execute(this.getDB())}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},Mf="__TIME_TRIGGER__";function ug(t,e){const{create:r,update:i}=e?.timeTrigger||{},a={type:"date",defaultTo:Mf};return r===!0?t.createAt=a:r&&(t[r]=a),i===!0?t.updateAt={...a,notNull:0}:i&&(t[i]={...a,notNull:0}),{columns:t,...e}}function Bf(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function cl(t){return Array.isArray(t)?t:[t]}function lg(t){return typeof t=="function"}async function So(t,e){await t.schema.dropTable(e).execute()}async function Ld(t,e,r){const{index:i,...a}=r,l=await dl(t,e,a);await Uf(t,e,l),await Ff(t,e,i)}async function Ff(t,e,r){for(const i of r||[]){const a=cl(i);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function dl(t,e,{columns:r,primary:i,timeTrigger:a,unique:l},h=!1){const y=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,f=t.schema.createTable(e);h&&(f=f.temporary());for(const[x,E]of Object.entries(r)){let S="text";const{type:B,notNull:xe,defaultTo:H}=E,pe=Bf(B);S=pe.dataType,f=f.addColumn(x,S,fe=>pe.isIncrements?(N=!0,y&&(y.triggerKey=x),fe.autoIncrement().primaryKey()):H===Mf?(y&&xe===0&&(y.update=x),fe.defaultTo(nt`CURRENT_TIMESTAMP`)):(xe===!0&&(fe=fe.notNull()),H!==void 0&&(fe=fe.defaultTo(lg(H)?H(nt):H)),fe))}if(!N&&i){const x=cl(i);f=f.addPrimaryKeyConstraint(`pk#${x.join("#")}`,x)}for(const x of l||[]){const E=cl(x);f=f.addUniqueConstraint(`un#${E.join("#")}`,E)}return await f.ifNotExists().execute(),y}async function Uf(t,e,r){if(!r||!r.update)return;const{triggerKey:i,update:a}=r,l=`tgr_${e}_${a}`;await nt`create trigger if not exists ${nt.ref(l)}
after update
on ${nt.table(e)}
begin
  update ${nt.table(e)}
  set ${nt.ref(a)} = CURRENT_TIMESTAMP
  where ${nt.ref(i)} = NEW.${nt.ref(i)};
end`.execute(t)}function cg(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,i,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:i,primary:void 0,unique:[]},h=a.matchAll(r);for(const y of h){const[,N,f,x]=y;if(N.startsWith("pk#")){const[,...E]=N.split("#");l.primary=E}else if(N.startsWith("un#")){const[,...E]=N.split("#");l.unique.push(E)}else l.columns[N]={type:f,notNull:!!x}}return l}async function dg(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",Tf).where("name","!=",Sf).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(h=>l("name","not like",`${h}%`))))).select(["name","sql","type"]).$castTo().execute(),i={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:h}of r)l&&(h==="table"?i.existTables[a]=cg(l):h==="index"?i.indexList.push(a):i.triggerList.push(a));return i}async function hg(t,e,r={},i){const{reserveOldData:a,truncateIfExists:l=[],log:h,version:{current:y,skipSyncWhenSame:N}={},excludeTablePrefix:f,onSyncSuccess:x,onSyncFail:E}=r;if(y){if(N&&y===await Pd(t))return{ready:!0};await Pd(t,y)}const S=ue=>h&&i?.debug(ue),{existTables:B,indexList:xe,triggerList:H}=await dg(t,f);S("====== update tables start ======");const pe=new Set(Array.isArray(l)?l:l?Object.keys(B):[]);return await t.transaction().execute(async ue=>{for(const U of xe)await ue.schema.dropIndex(U).ifExists().execute();for(const U of H)await nt`drop trigger if exists ${nt.ref(U)}`.execute(ue);for(const[U,Oe]of Object.entries(B))if(!(U in e))S(`remove table: ${U}`),await So(ue,U);else{S(`diff table: ${U}`);try{await fe(ue,U,Oe,e[U])}catch(Qe){throw i?.error(`fail to sync ${U}`,Qe),Qe}}for(const[U,Oe]of Object.entries(e))U in B||(S(`create table: ${U}`),await Ld(ue,U,Oe))}).then(()=>(x?.(t),S("======= update tables success ======="),{ready:!0})).catch(ue=>(E?.(ue),S("======= update tables fail ======="),{ready:!1,error:ue}));async function fe(ue,U,Oe,Qe){if(pe.has(U)){await So(ue,U),await Ld(ue,U,Qe),S("clear and sync structure");return}const{index:te,...lt}=Qe,Je=fg(Oe.columns,Qe.columns);if(Je.length===Object.keys(Oe.columns).length){S("same table structure, skip");return}S("different table structure, update");const zt=`_temp_${U}`;await dl(ue,zt,Oe,!0),await ue.insertInto(zt).expression(ce=>ce.selectFrom(U).selectAll()).execute(),await So(ue,U);const We=await dl(ue,U,lt);Je.length&&await ue.insertInto(U).columns(Je).expression(ce=>ce.selectFrom(zt).select(Je)).execute(),await Ff(ue,U,te),await Uf(ue,U,We),!a&&await So(ue,zt),S(`restore columns: ${Je}`)}}function fg(t,e){const r=[];for(const[i,a]of Object.entries(e))i in t&&Bf(a.type).dataType===t[i].type&&(a.notNull||!1)===(t[i].notNull||!1)&&r.push(i);return r}function pg(t,e={}){const{log:r}=e;return(i,a)=>hg(i,t,e,r?a:void 0)}const mg={test:ug({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function $f(t){const e=new ag({dialect:t}),r=await e.updateTableSchema(pg(mg));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let i=0;i<10;i++)await e.transaction(async()=>{await e.transaction(async()=>{if(i>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(i=>i.selectFrom("test").selectAll()).then(async i=>(await e.destroy(),console.log(i),i))}const yg=new RN({async database(){const t=await FN({locateFile:()=>UN});return new t.Database(await KN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),GN("sqljs",t)},isThrottle:!0}});function wg(){const t=dm();function e(){$f(yg).then(r=>{t.value=r})}return{result:t,run:e}}function Ng(t){return new Worker(""+new URL("sqljsWorker-qCg_y-0G.js",import.meta.url).href,{type:"module",name:t?.name})}function gg(t){return new Worker(""+new URL("officialWasmWorker-5l6--UWf.js",import.meta.url).href,{type:"module",name:t?.name})}var bg=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let i;e?r?(i=t.get(e))&&i.splice(i.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(i=>i(...r))},once(e,r){let i=(...a)=>{r(...a),this.off(e,i)};this.on(e,i)}});function vg(){return"locks"in navigator}async function Qf(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),i=await new Promise((a,l)=>{r.onmessage=({data:h})=>{a(h)},r.onerror=h=>{h.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),i}catch{return!1}}function jf(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function Md(t,e){return typeof t=="function"?t(e):t}function xg(t){return t?new Worker(new URL(""+new URL("worker-Cs2xuRzF.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-z_uG8b6d.js",import.meta.url).href,import.meta.url))}function Og(t){return t?new URL(""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-1p_8Y4mq.wasm",import.meta.url).href,import.meta.url).href}var Cg=class{constructor(t){Z(this,"config");Z(this,"worker");Z(this,"connection");Z(this,"connectionMutex",new _g);Z(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await Qf():!1;this.mitt=bg(),this.worker=Md(this.config.worker||xg,t||jf()),this.worker.onmessage=({data:{type:e,...r}})=>{this.mitt?.emit(e,r)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:Md(this.config.url||Og,!t),useOPFS:t}),await new Promise((e,r)=>{this.mitt?.once("init",({err:i})=>{i?r(i):e()})}),this.connection=new qg(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(qr.raw("begin"))}async commitTransaction(t){await t.executeQuery(qr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(qr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},_g=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},qg=class{constructor(t,e){Z(this,"worker");Z(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:i}=t,a=he.is(i);return this.worker.postMessage({type:"run",isSelect:a,sql:r,parameters:e}),new Promise((l,h)=>{!this.mitt&&h("kysely instance has been destroyed"),this.mitt.once("run",({data:y,err:N})=>{!N&&y?l(y):h(N)})})}},to,Fd,Wg=(Fd=class{constructor(t){_(this,to,void 0);A(this,to,t)}createDriver(){return new Cg(s(this,to))}createQueryCompiler(){return new Ef}createAdapter(){return new Rf}createIntrospector(t){return new kf(t)}},to=new WeakMap,Fd);const Ig=new Wg({fileName:"wa-sqlite-worker-test"});async function Eg(){console.log("start wa-sqlite-worker test"),$f(Ig).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=jf(),r=vg(),i=await Qf();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",i)})}const Tg=rt("h1",null,[Rs(" test "),rt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Rs(" WASM dialect ")],-1),Sg=rt("br",null,null,-1),kg=rt("h3",null,"see worker result in console",-1),Ag=rt("h3",null,[Rs(" you can explore "),rt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Rs(" file using "),rt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),Rg=rt("br",null,null,-1),Dg={class:"buttons"},Pg=rt("br",null,null,-1),Lg=rt("div",null," result run in main thread: ",-1),Mg=Am({__name:"App",setup(t){const e=new Ng,{result:r,run:i}=wg(),a=new gg;function l(){i()}function h(){e.postMessage("")}function y(){a.postMessage("")}function N(){Eg()}async function f(){try{(await window.indexedDB.databases()).forEach(S=>window.indexedDB.deleteDatabase(S.name))}catch{}}async function x(){console.clear(),await Rd("sqljs"),await Rd("sqljsWorker"),await f();const E=await navigator.storage?.getDirectory();try{await E.removeEntry("test.db")}catch{}try{await E.removeEntry("test.db-journal")}catch{}try{await E.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(E,S)=>(dy(),py(br,null,[Tg,Sg,kg,Ag,Rg,rt("div",Dg,[rt("button",{onClick:S[0]||(S[0]=B=>l())}," test sqljs in main thread "),rt("button",{onClick:S[1]||(S[1]=B=>h())}," test sqljs in Worker "),rt("button",{onClick:S[2]||(S[2]=B=>y())}," test officialWasm in Worker "),rt("button",{onClick:S[3]||(S[3]=B=>N())}," test wa-sqlite in Worker (Better Compability) "),rt("button",{onClick:S[4]||(S[4]=B=>x())}," clear ")]),Pg,Lg,rt("pre",null,""+Fp(hh(r))+`
  `,1)],64))}});Xy(Mg).mount("#root");
