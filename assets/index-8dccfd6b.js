var Pm=Object.defineProperty;var Lm=(t,e,r)=>e in t?Pm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>(Lm(t,typeof e!="symbol"?e+"":e,r),r),_l=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(_l(t,e,"read from private field"),r?r.call(t):e.get(t)),P=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},$=(t,e,r,i)=>(_l(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var _e=(t,e,r)=>(_l(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function bf(t,e){const r=Object.create(null),i=t.split(",");for(let o=0;o<i.length;o++)r[i[o]]=!0;return e?o=>!!r[o.toLowerCase()]:o=>!!r[o]}const ut={},Us=[],Jr=()=>{},Mm=()=>!1,Bm=/^on[^a-z]/,nl=t=>Bm.test(t),Nf=t=>t.startsWith("onUpdate:"),jt=Object.assign,vf=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Fm=Object.prototype.hasOwnProperty,Fe=(t,e)=>Fm.call(t,e),Ce=Array.isArray,$s=t=>sl(t)==="[object Map]",qd=t=>sl(t)==="[object Set]",Te=t=>typeof t=="function",Dt=t=>typeof t=="string",il=t=>typeof t=="symbol",yt=t=>t!==null&&typeof t=="object",Ed=t=>(yt(t)||Te(t))&&Te(t.then)&&Te(t.catch),Cd=Object.prototype.toString,sl=t=>Cd.call(t),Um=t=>sl(t).slice(8,-1),Id=t=>sl(t)==="[object Object]",_f=t=>Dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pu=bf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ol=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},$m=/-(\w)/g,mo=ol(t=>t.replace($m,(e,r)=>r?r.toUpperCase():"")),Qm=/\B([A-Z])/g,xo=ol(t=>t.replace(Qm,"-$1").toLowerCase()),Sd=ol(t=>t.charAt(0).toUpperCase()+t.slice(1)),xl=ol(t=>t?`on${Sd(t)}`:""),ps=(t,e)=>!Object.is(t,e),Ol=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Hu=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},jm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let oh;const Dl=()=>oh||(oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xf(t){if(Ce(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],o=Dt(i)?Hm(i):xf(i);if(o)for(const l in o)e[l]=o[l]}return e}else if(Dt(t)||yt(t))return t}const Vm=/;(?![^(]*\))/g,zm=/:([^]+)/,Km=/\/\*[^]*?\*\//g;function Hm(t){const e={};return t.replace(Km,"").split(Vm).forEach(r=>{if(r){const i=r.split(zm);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Of(t){let e="";if(Dt(t))e=t;else if(Ce(t))for(let r=0;r<t.length;r++){const i=Of(t[r]);i&&(e+=i+" ")}else if(yt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Jm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gm=bf(Jm);function Td(t){return!!t||t===""}const Ym=t=>Dt(t)?t:t==null?"":Ce(t)||yt(t)&&(t.toString===Cd||!Te(t.toString))?JSON.stringify(t,kd,2):String(t),kd=(t,e)=>e&&e.__v_isRef?kd(t,e.value):$s(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,o])=>(r[`${i} =>`]=o,r),{})}:qd(e)?{[`Set(${e.size})`]:[...e.values()]}:yt(e)&&!Ce(e)&&!Id(e)?String(e):e;let Br;class Xm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Br,!e&&Br&&(this.index=(Br.scopes||(Br.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=Br;try{return Br=this,e()}finally{Br=r}}}on(){Br=this}off(){Br=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function Zm(t,e=Br){e&&e.active&&e.effects.push(t)}function ey(){return Br}const qf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Ad=t=>(t.w&yi)>0,Wd=t=>(t.n&yi)>0,ty=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=yi},ry=t=>{const{deps:e}=t;if(e.length){let r=0;for(let i=0;i<e.length;i++){const o=e[i];Ad(o)&&!Wd(o)?o.delete(t):e[r++]=o,o.w&=~yi,o.n&=~yi}e.length=r}},Pl=new WeakMap;let sa=0,yi=1;const Ll=30;let zr;const ls=Symbol(""),Ml=Symbol("");class Ef{constructor(e,r=null,i){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Zm(this,i)}run(){if(!this.active)return this.fn();let e=zr,r=di;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=zr,zr=this,di=!0,yi=1<<++sa,sa<=Ll?ty(this):ah(this),this.fn()}finally{sa<=Ll&&ry(this),yi=1<<--sa,zr=this.parent,di=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zr===this?this.deferStop=!0:this.active&&(ah(this),this.onStop&&this.onStop(),this.active=!1)}}function ah(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let di=!0;const Rd=[];function Oo(){Rd.push(di),di=!1}function qo(){const t=Rd.pop();di=t===void 0?!0:t}function yr(t,e,r){if(di&&zr){let i=Pl.get(t);i||Pl.set(t,i=new Map);let o=i.get(r);o||i.set(r,o=qf()),Dd(o)}}function Dd(t,e){let r=!1;sa<=Ll?Wd(t)||(t.n|=yi,r=!Ad(t)):r=!t.has(zr),r&&(t.add(zr),zr.deps.push(t))}function An(t,e,r,i,o,l){const y=Pl.get(t);if(!y)return;let b=[];if(e==="clear")b=[...y.values()];else if(r==="length"&&Ce(t)){const O=Number(i);y.forEach((d,T)=>{(T==="length"||!il(T)&&T>=O)&&b.push(d)})}else switch(r!==void 0&&b.push(y.get(r)),e){case"add":Ce(t)?_f(r)&&b.push(y.get("length")):(b.push(y.get(ls)),$s(t)&&b.push(y.get(Ml)));break;case"delete":Ce(t)||(b.push(y.get(ls)),$s(t)&&b.push(y.get(Ml)));break;case"set":$s(t)&&b.push(y.get(ls));break}if(b.length===1)b[0]&&Bl(b[0]);else{const O=[];for(const d of b)d&&O.push(...d);Bl(qf(O))}}function Bl(t,e){const r=Ce(t)?t:[...t];for(const i of r)i.computed&&uh(i);for(const i of r)i.computed||uh(i)}function uh(t,e){(t!==zr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ny=bf("__proto__,__v_isRef,__isVue"),Pd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(il)),ch=iy();function iy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=Qe(this);for(let l=0,y=this.length;l<y;l++)yr(i,"get",l+"");const o=i[e](...r);return o===-1||o===!1?i[e](...r.map(Qe)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Oo();const i=Qe(this)[e].apply(this,r);return qo(),i}}),t}function sy(t){const e=Qe(this);return yr(e,"has",t),e.hasOwnProperty(t)}class Ld{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,i){const o=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return l;if(r==="__v_raw"&&i===(o?l?gy:Ud:l?Fd:Bd).get(e))return e;const y=Ce(e);if(!o){if(y&&Fe(ch,r))return Reflect.get(ch,r,i);if(r==="hasOwnProperty")return sy}const b=Reflect.get(e,r,i);return(il(r)?Pd.has(r):ny(r))||(o||yr(e,"get",r),l)?b:Yt(b)?y&&_f(r)?b:b.value:yt(b)?o?$d(b):Sf(b):b}}class Md extends Ld{constructor(e=!1){super(!1,e)}set(e,r,i,o){let l=e[r];if(yo(l)&&Yt(l)&&!Yt(i))return!1;if(!this._shallow&&(!Ju(i)&&!yo(i)&&(l=Qe(l),i=Qe(i)),!Ce(e)&&Yt(l)&&!Yt(i)))return l.value=i,!0;const y=Ce(e)&&_f(r)?Number(r)<e.length:Fe(e,r),b=Reflect.set(e,r,i,o);return e===Qe(o)&&(y?ps(i,l)&&An(e,"set",r,i):An(e,"add",r,i)),b}deleteProperty(e,r){const i=Fe(e,r);e[r];const o=Reflect.deleteProperty(e,r);return o&&i&&An(e,"delete",r,void 0),o}has(e,r){const i=Reflect.has(e,r);return(!il(r)||!Pd.has(r))&&yr(e,"has",r),i}ownKeys(e){return yr(e,"iterate",Ce(e)?"length":ls),Reflect.ownKeys(e)}}class oy extends Ld{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const ay=new Md,uy=new oy,cy=new Md(!0),Cf=t=>t,al=t=>Reflect.getPrototypeOf(t);function Eu(t,e,r=!1,i=!1){t=t.__v_raw;const o=Qe(t),l=Qe(e);r||(ps(e,l)&&yr(o,"get",e),yr(o,"get",l));const{has:y}=al(o),b=i?Cf:r?kf:Na;if(y.call(o,e))return b(t.get(e));if(y.call(o,l))return b(t.get(l));t!==o&&t.get(e)}function Cu(t,e=!1){const r=this.__v_raw,i=Qe(r),o=Qe(t);return e||(ps(t,o)&&yr(i,"has",t),yr(i,"has",o)),t===o?r.has(t):r.has(t)||r.has(o)}function Iu(t,e=!1){return t=t.__v_raw,!e&&yr(Qe(t),"iterate",ls),Reflect.get(t,"size",t)}function lh(t){t=Qe(t);const e=Qe(this);return al(e).has.call(e,t)||(e.add(t),An(e,"add",t,t)),this}function fh(t,e){e=Qe(e);const r=Qe(this),{has:i,get:o}=al(r);let l=i.call(r,t);l||(t=Qe(t),l=i.call(r,t));const y=o.call(r,t);return r.set(t,e),l?ps(e,y)&&An(r,"set",t,e):An(r,"add",t,e),this}function hh(t){const e=Qe(this),{has:r,get:i}=al(e);let o=r.call(e,t);o||(t=Qe(t),o=r.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return o&&An(e,"delete",t,void 0),l}function dh(){const t=Qe(this),e=t.size!==0,r=t.clear();return e&&An(t,"clear",void 0,void 0),r}function Su(t,e){return function(i,o){const l=this,y=l.__v_raw,b=Qe(y),O=e?Cf:t?kf:Na;return!t&&yr(b,"iterate",ls),y.forEach((d,T)=>i.call(o,O(d),O(T),l))}}function Tu(t,e,r){return function(...i){const o=this.__v_raw,l=Qe(o),y=$s(l),b=t==="entries"||t===Symbol.iterator&&y,O=t==="keys"&&y,d=o[t](...i),T=r?Cf:e?kf:Na;return!e&&yr(l,"iterate",O?Ml:ls),{next(){const{value:W,done:ee}=d.next();return ee?{value:W,done:ee}:{value:b?[T(W[0]),T(W[1])]:T(W),done:ee}},[Symbol.iterator](){return this}}}}function Jn(t){return function(...e){return t==="delete"?!1:this}}function ly(){const t={get(l){return Eu(this,l)},get size(){return Iu(this)},has:Cu,add:lh,set:fh,delete:hh,clear:dh,forEach:Su(!1,!1)},e={get(l){return Eu(this,l,!1,!0)},get size(){return Iu(this)},has:Cu,add:lh,set:fh,delete:hh,clear:dh,forEach:Su(!1,!0)},r={get(l){return Eu(this,l,!0)},get size(){return Iu(this,!0)},has(l){return Cu.call(this,l,!0)},add:Jn("add"),set:Jn("set"),delete:Jn("delete"),clear:Jn("clear"),forEach:Su(!0,!1)},i={get(l){return Eu(this,l,!0,!0)},get size(){return Iu(this,!0)},has(l){return Cu.call(this,l,!0)},add:Jn("add"),set:Jn("set"),delete:Jn("delete"),clear:Jn("clear"),forEach:Su(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Tu(l,!1,!1),r[l]=Tu(l,!0,!1),e[l]=Tu(l,!1,!0),i[l]=Tu(l,!0,!0)}),[t,r,e,i]}const[fy,hy,dy,py]=ly();function If(t,e){const r=e?t?py:dy:t?hy:fy;return(i,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(Fe(r,o)&&o in i?r:i,o,l)}const my={get:If(!1,!1)},yy={get:If(!1,!0)},wy={get:If(!0,!1)},Bd=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,gy=new WeakMap;function by(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ny(t){return t.__v_skip||!Object.isExtensible(t)?0:by(Um(t))}function Sf(t){return yo(t)?t:Tf(t,!1,ay,my,Bd)}function vy(t){return Tf(t,!1,cy,yy,Fd)}function $d(t){return Tf(t,!0,uy,wy,Ud)}function Tf(t,e,r,i,o){if(!yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=o.get(t);if(l)return l;const y=Ny(t);if(y===0)return t;const b=new Proxy(t,y===2?i:r);return o.set(t,b),b}function Qs(t){return yo(t)?Qs(t.__v_raw):!!(t&&t.__v_isReactive)}function yo(t){return!!(t&&t.__v_isReadonly)}function Ju(t){return!!(t&&t.__v_isShallow)}function Qd(t){return Qs(t)||yo(t)}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function jd(t){return Hu(t,"__v_skip",!0),t}const Na=t=>yt(t)?Sf(t):t,kf=t=>yt(t)?$d(t):t;function Vd(t){di&&zr&&(t=Qe(t),Dd(t.dep||(t.dep=qf())))}function zd(t,e){t=Qe(t);const r=t.dep;r&&Bl(r)}function Yt(t){return!!(t&&t.__v_isRef===!0)}function _y(t){return xy(t,!1)}function xy(t,e){return Yt(t)?t:new Oy(t,e)}class Oy{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Qe(e),this._value=r?e:Na(e)}get value(){return Vd(this),this._value}set value(e){const r=this.__v_isShallow||Ju(e)||yo(e);e=r?e:Qe(e),ps(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Na(e),zd(this))}}function Kd(t){return Yt(t)?t.value:t}const qy={get:(t,e,r)=>Kd(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const o=t[e];return Yt(o)&&!Yt(r)?(o.value=r,!0):Reflect.set(t,e,r,i)}};function Hd(t){return Qs(t)?t:new Proxy(t,qy)}class Ey{constructor(e,r,i,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ef(e,()=>{this._dirty||(this._dirty=!0,zd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=i}get value(){const e=Qe(this);return Vd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Cy(t,e,r=!1){let i,o;const l=Te(t);return l?(i=t,o=Jr):(i=t.get,o=t.set),new Ey(i,o,l||!o,r)}function pi(t,e,r,i){let o;try{o=i?t(...i):t()}catch(l){ul(l,e,r)}return o}function Gr(t,e,r,i){if(Te(t)){const l=pi(t,e,r,i);return l&&Ed(l)&&l.catch(y=>{ul(y,e,r)}),l}const o=[];for(let l=0;l<t.length;l++)o.push(Gr(t[l],e,r,i));return o}function ul(t,e,r,i=!0){const o=e?e.vnode:null;if(e){let l=e.parent;const y=e.proxy,b=r;for(;l;){const d=l.ec;if(d){for(let T=0;T<d.length;T++)if(d[T](t,y,b)===!1)return}l=l.parent}const O=e.appContext.config.errorHandler;if(O){pi(O,null,10,[t,y,b]);return}}Iy(t,r,o,i)}function Iy(t,e,r,i=!0){console.error(t)}let va=!1,Fl=!1;const Jt=[];let dn=0;const js=[];let On=null,Ui=0;const Jd=Promise.resolve();let Af=null;function Sy(t){const e=Af||Jd;return t?e.then(this?t.bind(this):t):e}function Ty(t){let e=dn+1,r=Jt.length;for(;e<r;){const i=e+r>>>1,o=Jt[i],l=_a(o);l<t||l===t&&o.pre?e=i+1:r=i}return e}function Wf(t){(!Jt.length||!Jt.includes(t,va&&t.allowRecurse?dn+1:dn))&&(t.id==null?Jt.push(t):Jt.splice(Ty(t.id),0,t),Gd())}function Gd(){!va&&!Fl&&(Fl=!0,Af=Jd.then(Xd))}function ky(t){const e=Jt.indexOf(t);e>dn&&Jt.splice(e,1)}function Ay(t){Ce(t)?js.push(...t):(!On||!On.includes(t,t.allowRecurse?Ui+1:Ui))&&js.push(t),Gd()}function ph(t,e=va?dn+1:0){for(;e<Jt.length;e++){const r=Jt[e];r&&r.pre&&(Jt.splice(e,1),e--,r())}}function Yd(t){if(js.length){const e=[...new Set(js)];if(js.length=0,On){On.push(...e);return}for(On=e,On.sort((r,i)=>_a(r)-_a(i)),Ui=0;Ui<On.length;Ui++)On[Ui]();On=null,Ui=0}}const _a=t=>t.id==null?1/0:t.id,Wy=(t,e)=>{const r=_a(t)-_a(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Xd(t){Fl=!1,va=!0,Jt.sort(Wy);const e=Jr;try{for(dn=0;dn<Jt.length;dn++){const r=Jt[dn];r&&r.active!==!1&&pi(r,null,14)}}finally{dn=0,Jt.length=0,Yd(),va=!1,Af=null,(Jt.length||js.length)&&Xd()}}function Ry(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||ut;let o=r;const l=e.startsWith("update:"),y=l&&e.slice(7);if(y&&y in i){const T=`${y==="modelValue"?"model":y}Modifiers`,{number:W,trim:ee}=i[T]||ut;ee&&(o=r.map(G=>Dt(G)?G.trim():G)),W&&(o=r.map(jm))}let b,O=i[b=xl(e)]||i[b=xl(mo(e))];!O&&l&&(O=i[b=xl(xo(e))]),O&&Gr(O,t,6,o);const d=i[b+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,Gr(d,t,6,o)}}function Zd(t,e,r=!1){const i=e.emitsCache,o=i.get(t);if(o!==void 0)return o;const l=t.emits;let y={},b=!1;if(!Te(t)){const O=d=>{const T=Zd(d,e,!0);T&&(b=!0,jt(y,T))};!r&&e.mixins.length&&e.mixins.forEach(O),t.extends&&O(t.extends),t.mixins&&t.mixins.forEach(O)}return!l&&!b?(yt(t)&&i.set(t,null),null):(Ce(l)?l.forEach(O=>y[O]=null):jt(y,l),yt(t)&&i.set(t,y),y)}function cl(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,xo(e))||Fe(t,e))}let mn=null,ep=null;function Gu(t){const e=mn;return mn=t,ep=t&&t.type.__scopeId||null,e}function Dy(t,e=mn,r){if(!e||t._n)return t;const i=(...o)=>{i._d&&Oh(-1);const l=Gu(e);let y;try{y=t(...o)}finally{Gu(l),i._d&&Oh(1)}return y};return i._n=!0,i._c=!0,i._d=!0,i}function ql(t){const{type:e,vnode:r,proxy:i,withProxy:o,props:l,propsOptions:[y],slots:b,attrs:O,emit:d,render:T,renderCache:W,data:ee,setupState:G,ctx:ue,inheritAttrs:N}=t;let E,g;const C=Gu(t);try{if(r.shapeFlag&4){const X=o||i;E=fn(T.call(X,X,W,l,G,ee,ue)),g=O}else{const X=e;E=fn(X.length>1?X(l,{attrs:O,slots:b,emit:d}):X(l,null)),g=e.props?O:Py(O)}}catch(X){ca.length=0,ul(X,t,1),E=fs(xa)}let S=E;if(g&&N!==!1){const X=Object.keys(g),{shapeFlag:ne}=S;X.length&&ne&7&&(y&&X.some(Nf)&&(g=Ly(g,y)),S=wo(S,g))}return r.dirs&&(S=wo(S),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&(S.transition=r.transition),E=S,Gu(C),E}const Py=t=>{let e;for(const r in t)(r==="class"||r==="style"||nl(r))&&((e||(e={}))[r]=t[r]);return e},Ly=(t,e)=>{const r={};for(const i in t)(!Nf(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function My(t,e,r){const{props:i,children:o,component:l}=t,{props:y,children:b,patchFlag:O}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&O>=0){if(O&1024)return!0;if(O&16)return i?mh(i,y,d):!!y;if(O&8){const T=e.dynamicProps;for(let W=0;W<T.length;W++){const ee=T[W];if(y[ee]!==i[ee]&&!cl(d,ee))return!0}}}else return(o||b)&&(!b||!b.$stable)?!0:i===y?!1:i?y?mh(i,y,d):!0:!!y;return!1}function mh(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(e[l]!==t[l]&&!cl(r,l))return!0}return!1}function By({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const Fy=Symbol.for("v-ndc"),Uy=t=>t.__isSuspense;function $y(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Ay(t)}const ku={};function El(t,e,r){return tp(t,e,r)}function tp(t,e,{immediate:r,deep:i,flush:o,onTrack:l,onTrigger:y}=ut){var b;const O=ey()===((b=Gt)==null?void 0:b.scope)?Gt:null;let d,T=!1,W=!1;if(Yt(t)?(d=()=>t.value,T=Ju(t)):Qs(t)?(d=()=>t,i=!0):Ce(t)?(W=!0,T=t.some(X=>Qs(X)||Ju(X)),d=()=>t.map(X=>{if(Yt(X))return X.value;if(Qs(X))return Rs(X);if(Te(X))return pi(X,O,2)})):Te(t)?e?d=()=>pi(t,O,2):d=()=>{if(!(O&&O.isUnmounted))return ee&&ee(),Gr(t,O,3,[G])}:d=Jr,e&&i){const X=d;d=()=>Rs(X())}let ee,G=X=>{ee=C.onStop=()=>{pi(X,O,4)}},ue;if(Ea)if(G=Jr,e?r&&Gr(e,O,3,[d(),W?[]:void 0,G]):d(),o==="sync"){const X=Fw();ue=X.__watcherHandles||(X.__watcherHandles=[])}else return Jr;let N=W?new Array(t.length).fill(ku):ku;const E=()=>{if(C.active)if(e){const X=C.run();(i||T||(W?X.some((ne,we)=>ps(ne,N[we])):ps(X,N)))&&(ee&&ee(),Gr(e,O,3,[X,N===ku?void 0:W&&N[0]===ku?[]:N,G]),N=X)}else C.run()};E.allowRecurse=!!e;let g;o==="sync"?g=E:o==="post"?g=()=>fr(E,O&&O.suspense):(E.pre=!0,O&&(E.id=O.uid),g=()=>Wf(E));const C=new Ef(d,g);e?r?E():N=C.run():o==="post"?fr(C.run.bind(C),O&&O.suspense):C.run();const S=()=>{C.stop(),O&&O.scope&&vf(O.scope.effects,C)};return ue&&ue.push(S),S}function Qy(t,e,r){const i=this.proxy,o=Dt(t)?t.includes(".")?rp(i,t):()=>i[t]:t.bind(i,i);let l;Te(e)?l=e:(l=e.handler,r=e);const y=Gt;go(this);const b=tp(o,l.bind(i),r);return y?go(y):hs(),b}function rp(t,e){const r=e.split(".");return()=>{let i=t;for(let o=0;o<r.length&&i;o++)i=i[r[o]];return i}}function Rs(t,e){if(!yt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Yt(t))Rs(t.value,e);else if(Ce(t))for(let r=0;r<t.length;r++)Rs(t[r],e);else if(qd(t)||$s(t))t.forEach(r=>{Rs(r,e)});else if(Id(t))for(const r in t)Rs(t[r],e);return t}function Mi(t,e,r,i){const o=t.dirs,l=e&&e.dirs;for(let y=0;y<o.length;y++){const b=o[y];l&&(b.oldValue=l[y].value);let O=b.dir[i];O&&(Oo(),Gr(O,r,8,[t.el,b,t,e]),qo())}}/*! #__NO_SIDE_EFFECTS__ */function jy(t,e){return Te(t)?(()=>jt({name:t.name},e,{setup:t}))():t}const Lu=t=>!!t.type.__asyncLoader,np=t=>t.type.__isKeepAlive;function Vy(t,e){ip(t,"a",e)}function zy(t,e){ip(t,"da",e)}function ip(t,e,r=Gt){const i=t.__wdc||(t.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(ll(e,i,r),r){let o=r.parent;for(;o&&o.parent;)np(o.parent.vnode)&&Ky(i,e,r,o),o=o.parent}}function Ky(t,e,r,i){const o=ll(e,t,i,!0);sp(()=>{vf(i[e],o)},r)}function ll(t,e,r=Gt,i=!1){if(r){const o=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...y)=>{if(r.isUnmounted)return;Oo(),go(r);const b=Gr(e,r,t,y);return hs(),qo(),b});return i?o.unshift(l):o.push(l),l}}const Dn=t=>(e,r=Gt)=>(!Ea||t==="sp")&&ll(t,(...i)=>e(...i),r),Hy=Dn("bm"),Jy=Dn("m"),Gy=Dn("bu"),Yy=Dn("u"),Xy=Dn("bum"),sp=Dn("um"),Zy=Dn("sp"),ew=Dn("rtg"),tw=Dn("rtc");function rw(t,e=Gt){ll("ec",t,e)}const Ul=t=>t?mp(t)?Mf(t)||t.proxy:Ul(t.parent):null,ua=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ul(t.parent),$root:t=>Ul(t.root),$emit:t=>t.emit,$options:t=>Rf(t),$forceUpdate:t=>t.f||(t.f=()=>Wf(t.update)),$nextTick:t=>t.n||(t.n=Sy.bind(t.proxy)),$watch:t=>Qy.bind(t)}),Cl=(t,e)=>t!==ut&&!t.__isScriptSetup&&Fe(t,e),nw={get({_:t},e){const{ctx:r,setupState:i,data:o,props:l,accessCache:y,type:b,appContext:O}=t;let d;if(e[0]!=="$"){const G=y[e];if(G!==void 0)switch(G){case 1:return i[e];case 2:return o[e];case 4:return r[e];case 3:return l[e]}else{if(Cl(i,e))return y[e]=1,i[e];if(o!==ut&&Fe(o,e))return y[e]=2,o[e];if((d=t.propsOptions[0])&&Fe(d,e))return y[e]=3,l[e];if(r!==ut&&Fe(r,e))return y[e]=4,r[e];$l&&(y[e]=0)}}const T=ua[e];let W,ee;if(T)return e==="$attrs"&&yr(t,"get",e),T(t);if((W=b.__cssModules)&&(W=W[e]))return W;if(r!==ut&&Fe(r,e))return y[e]=4,r[e];if(ee=O.config.globalProperties,Fe(ee,e))return ee[e]},set({_:t},e,r){const{data:i,setupState:o,ctx:l}=t;return Cl(o,e)?(o[e]=r,!0):i!==ut&&Fe(i,e)?(i[e]=r,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:o,propsOptions:l}},y){let b;return!!r[y]||t!==ut&&Fe(t,y)||Cl(e,y)||(b=l[0])&&Fe(b,y)||Fe(i,y)||Fe(ua,y)||Fe(o.config.globalProperties,y)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Fe(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function yh(t){return Ce(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let $l=!0;function iw(t){const e=Rf(t),r=t.proxy,i=t.ctx;$l=!1,e.beforeCreate&&wh(e.beforeCreate,t,"bc");const{data:o,computed:l,methods:y,watch:b,provide:O,inject:d,created:T,beforeMount:W,mounted:ee,beforeUpdate:G,updated:ue,activated:N,deactivated:E,beforeDestroy:g,beforeUnmount:C,destroyed:S,unmounted:X,render:ne,renderTracked:we,renderTriggered:Le,errorCaptured:dt,serverPrefetch:qr,expose:Pt,inheritAttrs:Ar,components:Er,directives:tt,filters:wr}=e;if(d&&sw(d,i,null),y)for(const pe in y){const Ie=y[pe];Te(Ie)&&(i[pe]=Ie.bind(r))}if(o){const pe=o.call(r,r);yt(pe)&&(t.data=Sf(pe))}if($l=!0,l)for(const pe in l){const Ie=l[pe],_t=Te(Ie)?Ie.bind(r,r):Te(Ie.get)?Ie.get.bind(r,r):Jr,ye=!Te(Ie)&&Te(Ie.set)?Ie.set.bind(r):Jr,Ue=Mw({get:_t,set:ye});Object.defineProperty(i,pe,{enumerable:!0,configurable:!0,get:()=>Ue.value,set:Vt=>Ue.value=Vt})}if(b)for(const pe in b)op(b[pe],i,r,pe);if(O){const pe=Te(O)?O.call(r):O;Reflect.ownKeys(pe).forEach(Ie=>{fw(Ie,pe[Ie])})}T&&wh(T,t,"c");function it(pe,Ie){Ce(Ie)?Ie.forEach(_t=>pe(_t.bind(r))):Ie&&pe(Ie.bind(r))}if(it(Hy,W),it(Jy,ee),it(Gy,G),it(Yy,ue),it(Vy,N),it(zy,E),it(rw,dt),it(tw,we),it(ew,Le),it(Xy,C),it(sp,X),it(Zy,qr),Ce(Pt))if(Pt.length){const pe=t.exposed||(t.exposed={});Pt.forEach(Ie=>{Object.defineProperty(pe,Ie,{get:()=>r[Ie],set:_t=>r[Ie]=_t})})}else t.exposed||(t.exposed={});ne&&t.render===Jr&&(t.render=ne),Ar!=null&&(t.inheritAttrs=Ar),Er&&(t.components=Er),tt&&(t.directives=tt)}function sw(t,e,r=Jr){Ce(t)&&(t=Ql(t));for(const i in t){const o=t[i];let l;yt(o)?"default"in o?l=Mu(o.from||i,o.default,!0):l=Mu(o.from||i):l=Mu(o),Yt(l)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:y=>l.value=y}):e[i]=l}}function wh(t,e,r){Gr(Ce(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function op(t,e,r,i){const o=i.includes(".")?rp(r,i):()=>r[i];if(Dt(t)){const l=e[t];Te(l)&&El(o,l)}else if(Te(t))El(o,t.bind(r));else if(yt(t))if(Ce(t))t.forEach(l=>op(l,e,r,i));else{const l=Te(t.handler)?t.handler.bind(r):e[t.handler];Te(l)&&El(o,l,t)}}function Rf(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:y}}=t.appContext,b=l.get(e);let O;return b?O=b:!o.length&&!r&&!i?O=e:(O={},o.length&&o.forEach(d=>Yu(O,d,y,!0)),Yu(O,e,y)),yt(e)&&l.set(e,O),O}function Yu(t,e,r,i=!1){const{mixins:o,extends:l}=e;l&&Yu(t,l,r,!0),o&&o.forEach(y=>Yu(t,y,r,!0));for(const y in e)if(!(i&&y==="expose")){const b=ow[y]||r&&r[y];t[y]=b?b(t[y],e[y]):e[y]}return t}const ow={data:gh,props:bh,emits:bh,methods:oa,computed:oa,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:oa,directives:oa,watch:uw,provide:gh,inject:aw};function gh(t,e){return e?t?function(){return jt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function aw(t,e){return oa(Ql(t),Ql(e))}function Ql(t){if(Ce(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Zt(t,e){return t?[...new Set([].concat(t,e))]:e}function oa(t,e){return t?jt(Object.create(null),t,e):e}function bh(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:jt(Object.create(null),yh(t),yh(e??{})):e}function uw(t,e){if(!t)return e;if(!e)return t;const r=jt(Object.create(null),t);for(const i in e)r[i]=Zt(t[i],e[i]);return r}function ap(){return{app:null,config:{isNativeTag:Mm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cw=0;function lw(t,e){return function(i,o=null){Te(i)||(i=jt({},i)),o!=null&&!yt(o)&&(o=null);const l=ap(),y=new WeakSet;let b=!1;const O=l.app={_uid:cw++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:Uw,get config(){return l.config},set config(d){},use(d,...T){return y.has(d)||(d&&Te(d.install)?(y.add(d),d.install(O,...T)):Te(d)&&(y.add(d),d(O,...T))),O},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),O},component(d,T){return T?(l.components[d]=T,O):l.components[d]},directive(d,T){return T?(l.directives[d]=T,O):l.directives[d]},mount(d,T,W){if(!b){const ee=fs(i,o);return ee.appContext=l,T&&e?e(ee,d):t(ee,d,W),b=!0,O._container=d,d.__vue_app__=O,Mf(ee.component)||ee.component.proxy}},unmount(){b&&(t(null,O._container),delete O._container.__vue_app__)},provide(d,T){return l.provides[d]=T,O},runWithContext(d){Xu=O;try{return d()}finally{Xu=null}}};return O}}let Xu=null;function fw(t,e){if(Gt){let r=Gt.provides;const i=Gt.parent&&Gt.parent.provides;i===r&&(r=Gt.provides=Object.create(i)),r[t]=e}}function Mu(t,e,r=!1){const i=Gt||mn;if(i||Xu){const o=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Xu._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return r&&Te(e)?e.call(i&&i.proxy):e}}function hw(t,e,r,i=!1){const o={},l={};Hu(l,hl,1),t.propsDefaults=Object.create(null),up(t,e,o,l);for(const y in t.propsOptions[0])y in o||(o[y]=void 0);r?t.props=i?o:vy(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function dw(t,e,r,i){const{props:o,attrs:l,vnode:{patchFlag:y}}=t,b=Qe(o),[O]=t.propsOptions;let d=!1;if((i||y>0)&&!(y&16)){if(y&8){const T=t.vnode.dynamicProps;for(let W=0;W<T.length;W++){let ee=T[W];if(cl(t.emitsOptions,ee))continue;const G=e[ee];if(O)if(Fe(l,ee))G!==l[ee]&&(l[ee]=G,d=!0);else{const ue=mo(ee);o[ue]=jl(O,b,ue,G,t,!1)}else G!==l[ee]&&(l[ee]=G,d=!0)}}}else{up(t,e,o,l)&&(d=!0);let T;for(const W in b)(!e||!Fe(e,W)&&((T=xo(W))===W||!Fe(e,T)))&&(O?r&&(r[W]!==void 0||r[T]!==void 0)&&(o[W]=jl(O,b,W,void 0,t,!0)):delete o[W]);if(l!==b)for(const W in l)(!e||!Fe(e,W))&&(delete l[W],d=!0)}d&&An(t,"set","$attrs")}function up(t,e,r,i){const[o,l]=t.propsOptions;let y=!1,b;if(e)for(let O in e){if(Pu(O))continue;const d=e[O];let T;o&&Fe(o,T=mo(O))?!l||!l.includes(T)?r[T]=d:(b||(b={}))[T]=d:cl(t.emitsOptions,O)||(!(O in i)||d!==i[O])&&(i[O]=d,y=!0)}if(l){const O=Qe(r),d=b||ut;for(let T=0;T<l.length;T++){const W=l[T];r[W]=jl(o,O,W,d[W],t,!Fe(d,W))}}return y}function jl(t,e,r,i,o,l){const y=t[r];if(y!=null){const b=Fe(y,"default");if(b&&i===void 0){const O=y.default;if(y.type!==Function&&!y.skipFactory&&Te(O)){const{propsDefaults:d}=o;r in d?i=d[r]:(go(o),i=d[r]=O.call(null,e),hs())}else i=O}y[0]&&(l&&!b?i=!1:y[1]&&(i===""||i===xo(r))&&(i=!0))}return i}function cp(t,e,r=!1){const i=e.propsCache,o=i.get(t);if(o)return o;const l=t.props,y={},b=[];let O=!1;if(!Te(t)){const T=W=>{O=!0;const[ee,G]=cp(W,e,!0);jt(y,ee),G&&b.push(...G)};!r&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!l&&!O)return yt(t)&&i.set(t,Us),Us;if(Ce(l))for(let T=0;T<l.length;T++){const W=mo(l[T]);Nh(W)&&(y[W]=ut)}else if(l)for(const T in l){const W=mo(T);if(Nh(W)){const ee=l[T],G=y[W]=Ce(ee)||Te(ee)?{type:ee}:jt({},ee);if(G){const ue=xh(Boolean,G.type),N=xh(String,G.type);G[0]=ue>-1,G[1]=N<0||ue<N,(ue>-1||Fe(G,"default"))&&b.push(W)}}}const d=[y,b];return yt(t)&&i.set(t,d),d}function Nh(t){return t[0]!=="$"}function vh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function _h(t,e){return vh(t)===vh(e)}function xh(t,e){return Ce(e)?e.findIndex(r=>_h(r,t)):Te(e)&&_h(e,t)?0:-1}const lp=t=>t[0]==="_"||t==="$stable",Df=t=>Ce(t)?t.map(fn):[fn(t)],pw=(t,e,r)=>{if(e._n)return e;const i=Dy((...o)=>Df(e(...o)),r);return i._c=!1,i},fp=(t,e,r)=>{const i=t._ctx;for(const o in t){if(lp(o))continue;const l=t[o];if(Te(l))e[o]=pw(o,l,i);else if(l!=null){const y=Df(l);e[o]=()=>y}}},hp=(t,e)=>{const r=Df(e);t.slots.default=()=>r},mw=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Qe(e),Hu(e,"_",r)):fp(e,t.slots={})}else t.slots={},e&&hp(t,e);Hu(t.slots,hl,1)},yw=(t,e,r)=>{const{vnode:i,slots:o}=t;let l=!0,y=ut;if(i.shapeFlag&32){const b=e._;b?r&&b===1?l=!1:(jt(o,e),!r&&b===1&&delete o._):(l=!e.$stable,fp(e,o)),y=e}else e&&(hp(t,e),y={default:1});if(l)for(const b in o)!lp(b)&&y[b]==null&&delete o[b]};function Vl(t,e,r,i,o=!1){if(Ce(t)){t.forEach((ee,G)=>Vl(ee,e&&(Ce(e)?e[G]:e),r,i,o));return}if(Lu(i)&&!o)return;const l=i.shapeFlag&4?Mf(i.component)||i.component.proxy:i.el,y=o?null:l,{i:b,r:O}=t,d=e&&e.r,T=b.refs===ut?b.refs={}:b.refs,W=b.setupState;if(d!=null&&d!==O&&(Dt(d)?(T[d]=null,Fe(W,d)&&(W[d]=null)):Yt(d)&&(d.value=null)),Te(O))pi(O,b,12,[y,T]);else{const ee=Dt(O),G=Yt(O);if(ee||G){const ue=()=>{if(t.f){const N=ee?Fe(W,O)?W[O]:T[O]:O.value;o?Ce(N)&&vf(N,l):Ce(N)?N.includes(l)||N.push(l):ee?(T[O]=[l],Fe(W,O)&&(W[O]=T[O])):(O.value=[l],t.k&&(T[t.k]=O.value))}else ee?(T[O]=y,Fe(W,O)&&(W[O]=y)):G&&(O.value=y,t.k&&(T[t.k]=y))};y?(ue.id=-1,fr(ue,r)):ue()}}}const fr=$y;function ww(t){return gw(t)}function gw(t,e){const r=Dl();r.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:y,createText:b,createComment:O,setText:d,setElementText:T,parentNode:W,nextSibling:ee,setScopeId:G=Jr,insertStaticContent:ue}=t,N=(_,q,D,Q=null,J=null,te=null,U=!1,j=null,re=!!q.dynamicChildren)=>{if(_===q)return;_&&!ra(_,q)&&(Q=Yr(_),Vt(_,J,te,!0),_=null),q.patchFlag===-2&&(re=!1,q.dynamicChildren=null);const{type:V,ref:ce,shapeFlag:ae}=q;switch(V){case fl:E(_,q,D,Q);break;case xa:g(_,q,D,Q);break;case Il:_==null&&C(q,D,Q,U);break;case ln:Er(_,q,D,Q,J,te,U,j,re);break;default:ae&1?ne(_,q,D,Q,J,te,U,j,re):ae&6?tt(_,q,D,Q,J,te,U,j,re):(ae&64||ae&128)&&V.process(_,q,D,Q,J,te,U,j,re,Ge)}ce!=null&&J&&Vl(ce,_&&_.ref,te,q||_,!q)},E=(_,q,D,Q)=>{if(_==null)i(q.el=b(q.children),D,Q);else{const J=q.el=_.el;q.children!==_.children&&d(J,q.children)}},g=(_,q,D,Q)=>{_==null?i(q.el=O(q.children||""),D,Q):q.el=_.el},C=(_,q,D,Q)=>{[_.el,_.anchor]=ue(_.children,q,D,Q,_.el,_.anchor)},S=({el:_,anchor:q},D,Q)=>{let J;for(;_&&_!==q;)J=ee(_),i(_,D,Q),_=J;i(q,D,Q)},X=({el:_,anchor:q})=>{let D;for(;_&&_!==q;)D=ee(_),o(_),_=D;o(q)},ne=(_,q,D,Q,J,te,U,j,re)=>{U=U||q.type==="svg",_==null?we(q,D,Q,J,te,U,j,re):qr(_,q,J,te,U,j,re)},we=(_,q,D,Q,J,te,U,j)=>{let re,V;const{type:ce,props:ae,shapeFlag:le,transition:ge,dirs:Ee}=_;if(re=_.el=y(_.type,te,ae&&ae.is,ae),le&8?T(re,_.children):le&16&&dt(_.children,re,null,Q,J,te&&ce!=="foreignObject",U,j),Ee&&Mi(_,null,Q,"created"),Le(re,_,_.scopeId,U,Q),ae){for(const Pe in ae)Pe!=="value"&&!Pu(Pe)&&l(re,Pe,null,ae[Pe],te,_.children,Q,J,Ae);"value"in ae&&l(re,"value",null,ae.value),(V=ae.onVnodeBeforeMount)&&nn(V,Q,_)}Ee&&Mi(_,null,Q,"beforeMount");const je=bw(J,ge);je&&ge.beforeEnter(re),i(re,q,D),((V=ae&&ae.onVnodeMounted)||je||Ee)&&fr(()=>{V&&nn(V,Q,_),je&&ge.enter(re),Ee&&Mi(_,null,Q,"mounted")},J)},Le=(_,q,D,Q,J)=>{if(D&&G(_,D),Q)for(let te=0;te<Q.length;te++)G(_,Q[te]);if(J){let te=J.subTree;if(q===te){const U=J.vnode;Le(_,U,U.scopeId,U.slotScopeIds,J.parent)}}},dt=(_,q,D,Q,J,te,U,j,re=0)=>{for(let V=re;V<_.length;V++){const ce=_[V]=j?Zn(_[V]):fn(_[V]);N(null,ce,q,D,Q,J,te,U,j)}},qr=(_,q,D,Q,J,te,U)=>{const j=q.el=_.el;let{patchFlag:re,dynamicChildren:V,dirs:ce}=q;re|=_.patchFlag&16;const ae=_.props||ut,le=q.props||ut;let ge;D&&Bi(D,!1),(ge=le.onVnodeBeforeUpdate)&&nn(ge,D,q,_),ce&&Mi(q,_,D,"beforeUpdate"),D&&Bi(D,!0);const Ee=J&&q.type!=="foreignObject";if(V?Pt(_.dynamicChildren,V,j,D,Q,Ee,te):U||Ie(_,q,j,null,D,Q,Ee,te,!1),re>0){if(re&16)Ar(j,q,ae,le,D,Q,J);else if(re&2&&ae.class!==le.class&&l(j,"class",null,le.class,J),re&4&&l(j,"style",ae.style,le.style,J),re&8){const je=q.dynamicProps;for(let Pe=0;Pe<je.length;Pe++){const rt=je[Pe],me=ae[rt],Wr=le[rt];(Wr!==me||rt==="value")&&l(j,rt,me,Wr,J,_.children,D,Q,Ae)}}re&1&&_.children!==q.children&&T(j,q.children)}else!U&&V==null&&Ar(j,q,ae,le,D,Q,J);((ge=le.onVnodeUpdated)||ce)&&fr(()=>{ge&&nn(ge,D,q,_),ce&&Mi(q,_,D,"updated")},Q)},Pt=(_,q,D,Q,J,te,U)=>{for(let j=0;j<q.length;j++){const re=_[j],V=q[j],ce=re.el&&(re.type===ln||!ra(re,V)||re.shapeFlag&70)?W(re.el):D;N(re,V,ce,null,Q,J,te,U,!0)}},Ar=(_,q,D,Q,J,te,U)=>{if(D!==Q){if(D!==ut)for(const j in D)!Pu(j)&&!(j in Q)&&l(_,j,D[j],null,U,q.children,J,te,Ae);for(const j in Q){if(Pu(j))continue;const re=Q[j],V=D[j];re!==V&&j!=="value"&&l(_,j,V,re,U,q.children,J,te,Ae)}"value"in Q&&l(_,"value",D.value,Q.value)}},Er=(_,q,D,Q,J,te,U,j,re)=>{const V=q.el=_?_.el:b(""),ce=q.anchor=_?_.anchor:b("");let{patchFlag:ae,dynamicChildren:le,slotScopeIds:ge}=q;ge&&(j=j?j.concat(ge):ge),_==null?(i(V,D,Q),i(ce,D,Q),dt(q.children,D,ce,J,te,U,j,re)):ae>0&&ae&64&&le&&_.dynamicChildren?(Pt(_.dynamicChildren,le,D,J,te,U,j),(q.key!=null||J&&q===J.subTree)&&dp(_,q,!0)):Ie(_,q,D,ce,J,te,U,j,re)},tt=(_,q,D,Q,J,te,U,j,re)=>{q.slotScopeIds=j,_==null?q.shapeFlag&512?J.ctx.activate(q,D,Q,U,re):wr(q,D,Q,J,te,U,re):Lt(_,q,re)},wr=(_,q,D,Q,J,te,U)=>{const j=_.component=Aw(_,Q,J);if(np(_)&&(j.ctx.renderer=Ge),Ww(j),j.asyncDep){if(J&&J.registerDep(j,it),!_.el){const re=j.subTree=fs(xa);g(null,re,q,D)}return}it(j,_,q,D,J,te,U)},Lt=(_,q,D)=>{const Q=q.component=_.component;if(My(_,q,D))if(Q.asyncDep&&!Q.asyncResolved){pe(Q,q,D);return}else Q.next=q,ky(Q.update),Q.update();else q.el=_.el,Q.vnode=q},it=(_,q,D,Q,J,te,U)=>{const j=()=>{if(_.isMounted){let{next:ce,bu:ae,u:le,parent:ge,vnode:Ee}=_,je=ce,Pe;Bi(_,!1),ce?(ce.el=Ee.el,pe(_,ce,U)):ce=Ee,ae&&Ol(ae),(Pe=ce.props&&ce.props.onVnodeBeforeUpdate)&&nn(Pe,ge,ce,Ee),Bi(_,!0);const rt=ql(_),me=_.subTree;_.subTree=rt,N(me,rt,W(me.el),Yr(me),_,J,te),ce.el=rt.el,je===null&&By(_,rt.el),le&&fr(le,J),(Pe=ce.props&&ce.props.onVnodeUpdated)&&fr(()=>nn(Pe,ge,ce,Ee),J)}else{let ce;const{el:ae,props:le}=q,{bm:ge,m:Ee,parent:je}=_,Pe=Lu(q);if(Bi(_,!1),ge&&Ol(ge),!Pe&&(ce=le&&le.onVnodeBeforeMount)&&nn(ce,je,q),Bi(_,!0),ae&&xt){const rt=()=>{_.subTree=ql(_),xt(ae,_.subTree,_,J,null)};Pe?q.type.__asyncLoader().then(()=>!_.isUnmounted&&rt()):rt()}else{const rt=_.subTree=ql(_);N(null,rt,D,Q,_,J,te),q.el=rt.el}if(Ee&&fr(Ee,J),!Pe&&(ce=le&&le.onVnodeMounted)){const rt=q;fr(()=>nn(ce,je,rt),J)}(q.shapeFlag&256||je&&Lu(je.vnode)&&je.vnode.shapeFlag&256)&&_.a&&fr(_.a,J),_.isMounted=!0,q=D=Q=null}},re=_.effect=new Ef(j,()=>Wf(V),_.scope),V=_.update=()=>re.run();V.id=_.uid,Bi(_,!0),V()},pe=(_,q,D)=>{q.component=_;const Q=_.vnode.props;_.vnode=q,_.next=null,dw(_,q.props,Q,D),yw(_,q.children,D),Oo(),ph(),qo()},Ie=(_,q,D,Q,J,te,U,j,re=!1)=>{const V=_&&_.children,ce=_?_.shapeFlag:0,ae=q.children,{patchFlag:le,shapeFlag:ge}=q;if(le>0){if(le&128){ye(V,ae,D,Q,J,te,U,j,re);return}else if(le&256){_t(V,ae,D,Q,J,te,U,j,re);return}}ge&8?(ce&16&&Ae(V,J,te),ae!==V&&T(D,ae)):ce&16?ge&16?ye(V,ae,D,Q,J,te,U,j,re):Ae(V,J,te,!0):(ce&8&&T(D,""),ge&16&&dt(ae,D,Q,J,te,U,j,re))},_t=(_,q,D,Q,J,te,U,j,re)=>{_=_||Us,q=q||Us;const V=_.length,ce=q.length,ae=Math.min(V,ce);let le;for(le=0;le<ae;le++){const ge=q[le]=re?Zn(q[le]):fn(q[le]);N(_[le],ge,D,null,J,te,U,j,re)}V>ce?Ae(_,J,te,!0,!1,ae):dt(q,D,Q,J,te,U,j,re,ae)},ye=(_,q,D,Q,J,te,U,j,re)=>{let V=0;const ce=q.length;let ae=_.length-1,le=ce-1;for(;V<=ae&&V<=le;){const ge=_[V],Ee=q[V]=re?Zn(q[V]):fn(q[V]);if(ra(ge,Ee))N(ge,Ee,D,null,J,te,U,j,re);else break;V++}for(;V<=ae&&V<=le;){const ge=_[ae],Ee=q[le]=re?Zn(q[le]):fn(q[le]);if(ra(ge,Ee))N(ge,Ee,D,null,J,te,U,j,re);else break;ae--,le--}if(V>ae){if(V<=le){const ge=le+1,Ee=ge<ce?q[ge].el:Q;for(;V<=le;)N(null,q[V]=re?Zn(q[V]):fn(q[V]),D,Ee,J,te,U,j,re),V++}}else if(V>le)for(;V<=ae;)Vt(_[V],J,te,!0),V++;else{const ge=V,Ee=V,je=new Map;for(V=Ee;V<=le;V++){const de=q[V]=re?Zn(q[V]):fn(q[V]);de.key!=null&&je.set(de.key,V)}let Pe,rt=0;const me=le-Ee+1;let Wr=!1,Pn=0;const Zr=new Array(me);for(V=0;V<me;V++)Zr[V]=0;for(V=ge;V<=ae;V++){const de=_[V];if(rt>=me){Vt(de,J,te,!0);continue}let ct;if(de.key!=null)ct=je.get(de.key);else for(Pe=Ee;Pe<=le;Pe++)if(Zr[Pe-Ee]===0&&ra(de,q[Pe])){ct=Pe;break}ct===void 0?Vt(de,J,te,!0):(Zr[ct-Ee]=V+1,ct>=Pn?Pn=ct:Wr=!0,N(de,q[ct],D,null,J,te,U,j,re),rt++)}const en=Wr?Nw(Zr):Us;for(Pe=en.length-1,V=me-1;V>=0;V--){const de=Ee+V,ct=q[de],Ln=de+1<ce?q[de+1].el:Q;Zr[V]===0?N(null,ct,D,Ln,J,te,U,j,re):Wr&&(Pe<0||V!==en[Pe]?Ue(ct,D,Ln,2):Pe--)}}},Ue=(_,q,D,Q,J=null)=>{const{el:te,type:U,transition:j,children:re,shapeFlag:V}=_;if(V&6){Ue(_.component.subTree,q,D,Q);return}if(V&128){_.suspense.move(q,D,Q);return}if(V&64){U.move(_,q,D,Ge);return}if(U===ln){i(te,q,D);for(let ae=0;ae<re.length;ae++)Ue(re[ae],q,D,Q);i(_.anchor,q,D);return}if(U===Il){S(_,q,D);return}if(Q!==2&&V&1&&j)if(Q===0)j.beforeEnter(te),i(te,q,D),fr(()=>j.enter(te),J);else{const{leave:ae,delayLeave:le,afterLeave:ge}=j,Ee=()=>i(te,q,D),je=()=>{ae(te,()=>{Ee(),ge&&ge()})};le?le(te,Ee,je):je()}else i(te,q,D)},Vt=(_,q,D,Q=!1,J=!1)=>{const{type:te,props:U,ref:j,children:re,dynamicChildren:V,shapeFlag:ce,patchFlag:ae,dirs:le}=_;if(j!=null&&Vl(j,null,D,_,!0),ce&256){q.ctx.deactivate(_);return}const ge=ce&1&&le,Ee=!Lu(_);let je;if(Ee&&(je=U&&U.onVnodeBeforeUnmount)&&nn(je,q,_),ce&6)he(_.component,D,Q);else{if(ce&128){_.suspense.unmount(D,Q);return}ge&&Mi(_,null,q,"beforeUnmount"),ce&64?_.type.remove(_,q,D,J,Ge,Q):V&&(te!==ln||ae>0&&ae&64)?Ae(V,q,D,!1,!0):(te===ln&&ae&384||!J&&ce&16)&&Ae(re,q,D),Q&&Nn(_)}(Ee&&(je=U&&U.onVnodeUnmounted)||ge)&&fr(()=>{je&&nn(je,q,_),ge&&Mi(_,null,q,"unmounted")},D)},Nn=_=>{const{type:q,el:D,anchor:Q,transition:J}=_;if(q===ln){ws(D,Q);return}if(q===Il){X(_);return}const te=()=>{o(D),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(_.shapeFlag&1&&J&&!J.persisted){const{leave:U,delayLeave:j}=J,re=()=>U(D,te);j?j(_.el,te,re):re()}else te()},ws=(_,q)=>{let D;for(;_!==q;)D=ee(_),o(_),_=D;o(q)},he=(_,q,D)=>{const{bum:Q,scope:J,update:te,subTree:U,um:j}=_;Q&&Ol(Q),J.stop(),te&&(te.active=!1,Vt(U,_,q,D)),j&&fr(j,q),fr(()=>{_.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},Ae=(_,q,D,Q=!1,J=!1,te=0)=>{for(let U=te;U<_.length;U++)Vt(_[U],q,D,Q,J)},Yr=_=>_.shapeFlag&6?Yr(_.component.subTree):_.shapeFlag&128?_.suspense.next():ee(_.anchor||_.el),Xr=(_,q,D)=>{_==null?q._vnode&&Vt(q._vnode,null,null,!0):N(q._vnode||null,_,q,null,null,null,D),ph(),Yd(),q._vnode=_},Ge={p:N,um:Vt,m:Ue,r:Nn,mt:wr,mc:dt,pc:Ie,pbc:Pt,n:Yr,o:t};let ir,xt;return e&&([ir,xt]=e(Ge)),{render:Xr,hydrate:ir,createApp:lw(Xr,ir)}}function Bi({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function bw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function dp(t,e,r=!1){const i=t.children,o=e.children;if(Ce(i)&&Ce(o))for(let l=0;l<i.length;l++){const y=i[l];let b=o[l];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=o[l]=Zn(o[l]),b.el=y.el),r||dp(y,b)),b.type===fl&&(b.el=y.el)}}function Nw(t){const e=t.slice(),r=[0];let i,o,l,y,b;const O=t.length;for(i=0;i<O;i++){const d=t[i];if(d!==0){if(o=r[r.length-1],t[o]<d){e[i]=o,r.push(i);continue}for(l=0,y=r.length-1;l<y;)b=l+y>>1,t[r[b]]<d?l=b+1:y=b;d<t[r[l]]&&(l>0&&(e[i]=r[l-1]),r[l]=i)}}for(l=r.length,y=r[l-1];l-- >0;)r[l]=y,y=e[y];return r}const vw=t=>t.__isTeleport,ln=Symbol.for("v-fgt"),fl=Symbol.for("v-txt"),xa=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),ca=[];let Kr=null;function _w(t=!1){ca.push(Kr=t?null:[])}function xw(){ca.pop(),Kr=ca[ca.length-1]||null}let Oa=1;function Oh(t){Oa+=t}function Ow(t){return t.dynamicChildren=Oa>0?Kr||Us:null,xw(),Oa>0&&Kr&&Kr.push(t),t}function qw(t,e,r,i,o,l){return Ow(Ct(t,e,r,i,o,l,!0))}function Ew(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const hl="__vInternal",pp=({key:t})=>t??null,Bu=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Dt(t)||Yt(t)||Te(t)?{i:mn,r:t,k:e,f:!!r}:t:null);function Ct(t,e=null,r=null,i=0,o=null,l=t===ln?0:1,y=!1,b=!1){const O={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&pp(e),ref:e&&Bu(e),scopeId:ep,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:mn};return b?(Pf(O,r),l&128&&t.normalize(O)):r&&(O.shapeFlag|=Dt(r)?8:16),Oa>0&&!y&&Kr&&(O.patchFlag>0||l&6)&&O.patchFlag!==32&&Kr.push(O),O}const fs=Cw;function Cw(t,e=null,r=null,i=0,o=null,l=!1){if((!t||t===Fy)&&(t=xa),Ew(t)){const b=wo(t,e,!0);return r&&Pf(b,r),Oa>0&&!l&&Kr&&(b.shapeFlag&6?Kr[Kr.indexOf(t)]=b:Kr.push(b)),b.patchFlag|=-2,b}if(Lw(t)&&(t=t.__vccOpts),e){e=Iw(e);let{class:b,style:O}=e;b&&!Dt(b)&&(e.class=Of(b)),yt(O)&&(Qd(O)&&!Ce(O)&&(O=jt({},O)),e.style=xf(O))}const y=Dt(t)?1:Uy(t)?128:vw(t)?64:yt(t)?4:Te(t)?2:0;return Ct(t,e,r,i,o,y,l,!0)}function Iw(t){return t?Qd(t)||hl in t?jt({},t):t:null}function wo(t,e,r=!1){const{props:i,ref:o,patchFlag:l,children:y}=t,b=e?Sw(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:b,key:b&&pp(b),ref:e&&e.ref?r&&o?Ce(o)?o.concat(Bu(e)):[o,Bu(e)]:Bu(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ln?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wo(t.ssContent),ssFallback:t.ssFallback&&wo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function qa(t=" ",e=0){return fs(fl,null,t,e)}function fn(t){return t==null||typeof t=="boolean"?fs(xa):Ce(t)?fs(ln,null,t.slice()):typeof t=="object"?Zn(t):fs(fl,null,String(t))}function Zn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wo(t)}function Pf(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ce(e))r=16;else if(typeof e=="object")if(i&65){const o=e.default;o&&(o._c&&(o._d=!1),Pf(t,o()),o._c&&(o._d=!0));return}else{r=32;const o=e._;!o&&!(hl in e)?e._ctx=mn:o===3&&mn&&(mn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:mn},r=32):(e=String(e),i&64?(r=16,e=[qa(e)]):r=8);t.children=e,t.shapeFlag|=r}function Sw(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=Of([e.class,i.class]));else if(o==="style")e.style=xf([e.style,i.style]);else if(nl(o)){const l=e[o],y=i[o];y&&l!==y&&!(Ce(l)&&l.includes(y))&&(e[o]=l?[].concat(l,y):y)}else o!==""&&(e[o]=i[o])}return e}function nn(t,e,r,i=null){Gr(t,e,7,[r,i])}const Tw=ap();let kw=0;function Aw(t,e,r){const i=t.type,o=(e?e.appContext:t.appContext)||Tw,l={uid:kw++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cp(i,o),emitsOptions:Zd(i,o),emit:null,emitted:null,propsDefaults:ut,inheritAttrs:i.inheritAttrs,ctx:ut,data:ut,props:ut,attrs:ut,slots:ut,refs:ut,setupState:ut,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=Ry.bind(null,l),t.ce&&t.ce(l),l}let Gt=null,Lf,Is,qh="__VUE_INSTANCE_SETTERS__";(Is=Dl()[qh])||(Is=Dl()[qh]=[]),Is.push(t=>Gt=t),Lf=t=>{Is.length>1?Is.forEach(e=>e(t)):Is[0](t)};const go=t=>{Lf(t),t.scope.on()},hs=()=>{Gt&&Gt.scope.off(),Lf(null)};function mp(t){return t.vnode.shapeFlag&4}let Ea=!1;function Ww(t,e=!1){Ea=e;const{props:r,children:i}=t.vnode,o=mp(t);hw(t,r,o,e),mw(t,i);const l=o?Rw(t,e):void 0;return Ea=!1,l}function Rw(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=jd(new Proxy(t.ctx,nw));const{setup:i}=r;if(i){const o=t.setupContext=i.length>1?Pw(t):null;go(t),Oo();const l=pi(i,t,0,[t.props,o]);if(qo(),hs(),Ed(l)){if(l.then(hs,hs),e)return l.then(y=>{Eh(t,y,e)}).catch(y=>{ul(y,t,0)});t.asyncDep=l}else Eh(t,l,e)}else yp(t,e)}function Eh(t,e,r){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:yt(e)&&(t.setupState=Hd(e)),yp(t,r)}let Ch;function yp(t,e,r){const i=t.type;if(!t.render){if(!e&&Ch&&!i.render){const o=i.template||Rf(t).template;if(o){const{isCustomElement:l,compilerOptions:y}=t.appContext.config,{delimiters:b,compilerOptions:O}=i,d=jt(jt({isCustomElement:l,delimiters:b},y),O);i.render=Ch(o,d)}}t.render=i.render||Jr}{go(t),Oo();try{iw(t)}finally{qo(),hs()}}}function Dw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return yr(t,"get","$attrs"),e[r]}}))}function Pw(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Dw(t)},slots:t.slots,emit:t.emit,expose:e}}function Mf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Hd(jd(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ua)return ua[r](t)},has(e,r){return r in e||r in ua}}))}function Lw(t){return Te(t)&&"__vccOpts"in t}const Mw=(t,e)=>Cy(t,e,Ea),Bw=Symbol.for("v-scx"),Fw=()=>Mu(Bw),Uw="3.3.8",$w="http://www.w3.org/2000/svg",$i=typeof document<"u"?document:null,Ih=$i&&$i.createElement("template"),Qw={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const o=e?$i.createElementNS($w,t):$i.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>$i.createTextNode(t),createComment:t=>$i.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$i.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,o,l){const y=r?r.previousSibling:e.lastChild;if(o&&(o===l||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),r),!(o===l||!(o=o.nextSibling)););else{Ih.innerHTML=i?`<svg>${t}</svg>`:t;const b=Ih.content;if(i){const O=b.firstChild;for(;O.firstChild;)b.appendChild(O.firstChild);b.removeChild(O)}e.insertBefore(b,r)}return[y?y.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},jw=Symbol("_vtc");function Vw(t,e,r){const i=t[jw];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const zw=Symbol("_vod");function Kw(t,e,r){const i=t.style,o=Dt(r);if(r&&!o){if(e&&!Dt(e))for(const l in e)r[l]==null&&zl(i,l,"");for(const l in r)zl(i,l,r[l])}else{const l=i.display;o?e!==r&&(i.cssText=r):e&&t.removeAttribute("style"),zw in t&&(i.display=l)}}const Sh=/\s*!important$/;function zl(t,e,r){if(Ce(r))r.forEach(i=>zl(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Hw(t,e);Sh.test(r)?t.setProperty(xo(i),r.replace(Sh,""),"important"):t[i]=r}}const Th=["Webkit","Moz","ms"],Sl={};function Hw(t,e){const r=Sl[e];if(r)return r;let i=mo(e);if(i!=="filter"&&i in t)return Sl[e]=i;i=Sd(i);for(let o=0;o<Th.length;o++){const l=Th[o]+i;if(l in t)return Sl[e]=l}return e}const kh="http://www.w3.org/1999/xlink";function Jw(t,e,r,i,o){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,r);else{const l=Gm(e);r==null||l&&!Td(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function Gw(t,e,r,i,o,l,y){if(e==="innerHTML"||e==="textContent"){i&&y(i,o,l),t[e]=r??"";return}const b=t.tagName;if(e==="value"&&b!=="PROGRESS"&&!b.includes("-")){t._value=r;const d=b==="OPTION"?t.getAttribute("value"):t.value,T=r??"";d!==T&&(t.value=T),r==null&&t.removeAttribute(e);return}let O=!1;if(r===""||r==null){const d=typeof t[e];d==="boolean"?r=Td(r):r==null&&d==="string"?(r="",O=!0):d==="number"&&(r=0,O=!0)}try{t[e]=r}catch{}O&&t.removeAttribute(e)}function Yw(t,e,r,i){t.addEventListener(e,r,i)}function Xw(t,e,r,i){t.removeEventListener(e,r,i)}const Ah=Symbol("_vei");function Zw(t,e,r,i,o=null){const l=t[Ah]||(t[Ah]={}),y=l[e];if(i&&y)y.value=i;else{const[b,O]=eg(e);if(i){const d=l[e]=ng(i,o);Yw(t,b,d,O)}else y&&(Xw(t,b,y,O),l[e]=void 0)}}const Wh=/(?:Once|Passive|Capture)$/;function eg(t){let e;if(Wh.test(t)){e={};let i;for(;i=t.match(Wh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xo(t.slice(2)),e]}let Tl=0;const tg=Promise.resolve(),rg=()=>Tl||(tg.then(()=>Tl=0),Tl=Date.now());function ng(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Gr(ig(i,r.value),e,5,[i])};return r.value=t,r.attached=rg(),r}function ig(t,e){if(Ce(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const Rh=/^on[a-z]/,sg=(t,e,r,i,o=!1,l,y,b,O)=>{e==="class"?Vw(t,i,o):e==="style"?Kw(t,r,i):nl(e)?Nf(e)||Zw(t,e,r,i,y):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):og(t,e,i,o))?Gw(t,e,i,l,y,b,O):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Jw(t,e,i,o))};function og(t,e,r,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&Rh.test(e)&&Te(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Rh.test(e)&&Dt(r)?!1:e in t}const ag=jt({patchProp:sg},Qw);let Dh;function ug(){return Dh||(Dh=ww(ag))}const cg=(...t)=>{const e=ug().createApp(...t),{mount:r}=e;return e.mount=i=>{const o=lg(i);if(!o)return;const l=e._component;!Te(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.innerHTML="";const y=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),y},e};function lg(t){return Dt(t)?document.querySelector(t):t}function ds(t){return typeof t>"u"||t===void 0}function gn(t){return typeof t=="string"}function wp(t){return typeof t=="number"}function Zu(t){return typeof t=="boolean"}function Bf(t){return t===null}function fg(t){return t instanceof Date}function hg(t){return typeof t=="bigint"}function Or(t){return typeof t=="function"}function pn(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function wi(t){return Array.isArray(t)}function bo(t){return t}const Nt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),ht=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Yn=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:ht.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),gp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:ht.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),dg=["preserve rows","delete rows","drop"],Mr=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),gi=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:ht.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:ht.create(t),identifier:ht.create(e)})}}),Fu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:gi.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Kl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:ht.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Hl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),vi=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),mi=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:gi.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:gi.createWithSchema(t,e)})}});function kr(t){return pn(t)&&Or(t.toOperationNode)}function pg(t){return pn(t)&&"expressionType"in t&&kr(t)}function mg(t){return pn(t)&&"expression"in t&&gn(t.alias)&&kr(t)}const _n=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),bi=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),Eo=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),kl=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return p({...t,on:e==="And"?bi.create(t.on,r):Eo.create(t.on,r)})}}),la=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return p({kind:"JoinNode",joinType:t,table:e,on:kl.create(r)})},cloneWithOn(t,e){return p({...t,on:t.on?kl.cloneWithOperation(t.on,"And",e):kl.create(e)})}}),Ca=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),yg=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],wg=["+","-","*","/","%","^","&","|","#","<<",">>"],bp=["->","->>"],gg=[...yg,...wg,"&&","||"],bg=["exists","not exists"],Ng=["not","-",...bg],vg=[...gg,...bp,...Ng,"between","between symmetric"],ms=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Ph(t){return gn(t)&&bp.includes(t)}const vt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:ht.create(t)})}}),Ff=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),dl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Ff.create()})}});var Vs;class _g{constructor(e){P(this,Vs,void 0);$(this,Vs,e)}get dynamicReference(){return s(this,Vs)}get refType(){}toOperationNode(){return Op(s(this,Vs))}}Vs=new WeakMap;function Np(t){return pn(t)&&kr(t)&&gn(t.dynamicReference)}const Jl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),rr=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return rr.create([t],[])},createWithChild(t){return rr.create(["",""],[t])},createWithChildren(t){return rr.create(new Array(t.length+1).fill(""),t)}});function vp(t){return t==="asc"||t==="desc"}function pl(t){if(t.length===2)return[Al(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>Al(r)):[Al(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function Al(t,e){const r=xg(t);if(Jl.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Jl.create(r,_p(e))}function xg(t){if(nu(t))return Io(t);if(Np(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!vp(r))throw new Error(`Invalid order by direction: ${r}`);return Jl.create(Wn(e),_p(r))}return Wn(t)}function _p(t){if(t)return t==="asc"||t==="desc"?rr.createWithSql(t):t.toOperationNode()}const Gl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),xp=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Yl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function Op(t){return gn(t)?Wn(t):t.toOperationNode()}function Ia(t){return wi(t)?t.map(e=>Hr(e)):[Hr(t)]}function Hr(t){return nu(t)?Io(t):Op(t)}function Og(t,e){const r=Wn(t);if(Ph(e))return Gl.create(r,xp.create(ms.create(e)));const i=e.slice(0,-1);if(Ph(i))return Gl.create(r,Yl.create(ms.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Wn(t){const e=".";if(!t.includes(e))return dl.create(vt.create(t));const r=t.split(e).map(Uf);if(r.length===3)return Eg(r);if(r.length===2)return Cg(r);throw new Error(`invalid column reference ${t}`)}function qg(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Uf);return vi.create(Wn(r),ht.create(i))}else return Wn(t)}function qp(t){return vt.create(t)}function Lh(t){const e=" ";if(t.includes(e)){const[r,i]=t.split(e).map(Uf);if(!vp(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return pl([r,i])[0]}else return qp(t)}function Eg(t){const[e,r,i]=t;return dl.create(vt.create(i),mi.createWithSchema(e,r))}function Cg(t){const[e,r]=t;return dl.create(vt.create(r),mi.create(e))}function Uf(t){return t.trim()}const Ep=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),$f=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),bn=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function Cp(t){return wi(t)?Ig(t):nr(t)}function nr(t){return nu(t)?Io(t):bn.create(t)}function Qf(t){return wp(t)||Zu(t)||Bf(t)}function jf(t){if(!Qf(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return bn.createImmediate(t)}function Ig(t){return t.some(nu)?$f.create(t.map(e=>nr(e))):Ep.create(t)}const No=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Xt(t){if(t.length===3)return fa(t[0],t[1],t[2]);if(t.length===1)return nr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function fa(t,e,r){return Sg(e)&&Ip(r)?Ca.create(Hr(t),Zl(e),bn.createImmediate(r)):Ca.create(Hr(t),Zl(e),Cp(r))}function Rn(t,e,r){return Ca.create(Hr(t),Zl(e),Hr(r))}function Mh(t,e){return Xl(Object.entries(t).filter(([,r])=>!ds(r)).map(([r,i])=>fa(r,Ip(i)?"is":"=",i)),e)}function Xl(t,e){const r=e==="and"?bi.create:Eo.create;if(t.length===0)return bn.createImmediate(e==="and");let i=Bh(t[0]);for(let o=1;o<t.length;++o)i=r(i,Bh(t[o]));return t.length>1?No.create(i):i}function Sg(t){return t==="is"||t==="is not"}function Ip(t){return Bf(t)||Zu(t)}function Zl(t){if(gn(t)&&vg.includes(t))return ms.create(t);if(kr(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Bh(t){return kr(t)?t.toOperationNode():t}const vo=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Fh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),ef=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Fh.cloneWithItems(t.partitionBy,e):Fh.create(e)})}}),ec=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),Uh=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),$h=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return p({...t,having:e==="And"?bi.create(t.having,r):Eo.create(t.having,r)})}}),Re=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?Uh.cloneWithItems(t.groupBy,e):Uh.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?$h.cloneWithOperation(t.having,"And",e):$h.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Be(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Fr;const pa=class pa{constructor(e){P(this,Fr,void 0);$(this,Fr,p(e))}on(...e){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,Xt(e))})}onRef(e,r,i){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,Rn(e,r,i))})}onTrue(){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,rr.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return s(this,Fr).joinNode}};Fr=new WeakMap;let tc=pa;Be(tc,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Tg=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function kg(t){return Ia(t).map(Tg.create)}var Ki;const Sc=class Sc{constructor(e){P(this,Ki,void 0);$(this,Ki,p(e))}orderBy(e,r){return new Sc({overNode:ef.cloneWithOrderByItems(s(this,Ki).overNode,pl([e,r]))})}partitionBy(e){return new Sc({overNode:ef.cloneWithPartitionByItems(s(this,Ki).overNode,kg(e))})}$call(e){return e(this)}toOperationNode(){return s(this,Ki).overNode}};Ki=new WeakMap;let rc=Sc;Be(rc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const ha=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Ff.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:dl.createSelectAll(t)})}});function ys(t){return Or(t)?ys(t(Co())):wi(t)?t.map(e=>Qh(e)):[Qh(t)]}function Qh(t){return gn(t)?ha.create(qg(t)):Np(t)?ha.create(t.toOperationNode()):ha.create($p(t))}function tu(t){return t?Array.isArray(t)?t.map(jh):[jh(t)]:[ha.createSelectAll()]}function jh(t){if(gn(t))return ha.createSelectAllFromTable(mr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Ag=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),Wg=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function Rg(t){const e=Or(t)?t(Co()):t,r=wi(e)?e:p([e]);return Dg(r)}function Dg(t){const e=Pg(t);return[p([...e.keys()].map(vt.create)),Ag.create(t.map(r=>Lg(r,e)))]}function Pg(t){const e=new Map;for(const r of t){const i=Object.keys(r);for(const o of i)!e.has(o)&&r[o]!==void 0&&e.set(o,e.size)}return e}function Lg(t,e){const r=Object.keys(t),i=Array.from({length:e.size});let o=!1;for(const y of r){const b=e.get(y);if(ds(b))continue;const O=t[y];(ds(O)||nu(O))&&(o=!0),i[b]=O}if(r.length<e.size||o){const y=Wg.create();return $f.create(i.map(b=>ds(b)?y:nr(b)))}return Ep.create(i)}const hn=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?ec.cloneWithFroms(t.from,e):ec.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),Vh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),da=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?Vh.cloneWithTables(t.using,e):Vh.create(e)})}}),dr=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return p({...t,where:e==="And"?bi.create(t.where,r):Eo.create(t.where,r)})}}),zh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),Mg=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),De=p({is(t){return Re.is(t)||hn.is(t)||nc.is(t)||da.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?dr.cloneWithOperation(t.where,"And",e):dr.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?zh.cloneWithSelections(t.returning,e):zh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,r){return p({...t,explain:Mg.create(e,r?.toOperationNode())})}}),Bg=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function Vf(t){const e=Or(t)?t(Co()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Bg.create(vt.create(r),nr(i)))}const Fg=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class Ug{constructor(e,r){be(this,"insertId");be(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class ml extends Error{constructor(r){super("no result");be(this,"node");this.node=r}}function yl(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const xr=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?dr.cloneWithOperation(t.indexWhere,"And",e):dr.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?dr.cloneWithOperation(t.indexWhere,"Or",e):dr.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?dr.cloneWithOperation(t.updateWhere,"And",e):dr.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?dr.cloneWithOperation(t.updateWhere,"Or",e):dr.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var nt;const qn=class qn{constructor(e){P(this,nt,void 0);$(this,nt,p(e))}column(e){const r=vt.create(e);return new qn({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{columns:s(this,nt).onConflictNode.columns?p([...s(this,nt).onConflictNode.columns,r]):p([r])})})}columns(e){const r=e.map(vt.create);return new qn({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{columns:s(this,nt).onConflictNode.columns?p([...s(this,nt).onConflictNode.columns,...r]):p(r)})})}constraint(e){return new qn({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{constraint:ht.create(e)})})}expression(e){return new qn({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new qn({...s(this,nt),onConflictNode:xr.cloneWithIndexWhere(s(this,nt).onConflictNode,Xt(e))})}whereRef(e,r,i){return new qn({...s(this,nt),onConflictNode:xr.cloneWithIndexWhere(s(this,nt).onConflictNode,Rn(e,r,i))})}clearWhere(){return new qn({...s(this,nt),onConflictNode:xr.cloneWithoutIndexWhere(s(this,nt).onConflictNode)})}doNothing(){return new Sp({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new sc({...s(this,nt),onConflictNode:xr.cloneWith(s(this,nt).onConflictNode,{updates:Vf(e)})})}$call(e){return e(this)}};nt=new WeakMap;let ic=qn;Be(ic,"don't await OnConflictBuilder instances.");var Da;class Sp{constructor(e){P(this,Da,void 0);$(this,Da,p(e))}toOperationNode(){return s(this,Da).onConflictNode}}Da=new WeakMap;Be(Sp,"don't await OnConflictDoNothingBuilder instances.");var Ur;const ma=class ma{constructor(e){P(this,Ur,void 0);$(this,Ur,p(e))}where(...e){return new ma({...s(this,Ur),onConflictNode:xr.cloneWithUpdateWhere(s(this,Ur).onConflictNode,Xt(e))})}whereRef(e,r,i){return new ma({...s(this,Ur),onConflictNode:xr.cloneWithUpdateWhere(s(this,Ur).onConflictNode,Rn(e,r,i))})}clearWhere(){return new ma({...s(this,Ur),onConflictNode:xr.cloneWithoutUpdateWhere(s(this,Ur).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return s(this,Ur).onConflictNode}};Ur=new WeakMap;let sc=ma;Be(sc,"don't await OnConflictUpdateBuilder instances.");var ke;const Kt=class Kt{constructor(e){P(this,ke,void 0);$(this,ke,p(e))}values(e){const[r,i]=Rg(e);return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{columns:r,values:i})})}columns(e){return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{columns:p(e.map(vt.create))})})}expression(e){return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{values:Io(e)})})}ignore(){return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{ignore:!0})})}onConflict(e){return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{onConflict:e(new ic({onConflictNode:xr.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new Kt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{onDuplicateKey:Fg.create(Vf(e))})})}returning(e){return new Kt({...s(this,ke),queryNode:De.cloneWithReturning(s(this,ke).queryNode,ys(e))})}returningAll(){return new Kt({...s(this,ke),queryNode:De.cloneWithReturning(s(this,ke).queryNode,tu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new Kt({...s(this,ke)})}$castTo(){return new Kt(s(this,ke))}$narrowType(){return new Kt(s(this,ke))}$assertType(){return new Kt(s(this,ke))}withPlugin(e){return new Kt({...s(this,ke),executor:s(this,ke).executor.withPlugin(e)})}toOperationNode(){return s(this,ke).executor.transformQuery(s(this,ke).queryNode,s(this,ke).queryId)}compile(){return s(this,ke).executor.compileQuery(this.toOperationNode(),s(this,ke).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,ke).executor.executeQuery(e,s(this,ke).queryId);return s(this,ke).executor.adapter.supportsReturning&&r.returning?i.rows:[new Ug(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,ke).executor.stream(r,e,s(this,ke).queryId);for await(const o of i)yield*o.rows}async explain(e,r){return await new Kt({...s(this,ke),queryNode:De.cloneWithExplain(s(this,ke).queryNode,e,r)}).execute()}};ke=new WeakMap;let Sa=Kt;Be(Sa,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class $g{constructor(e){be(this,"numDeletedRows");this.numDeletedRows=e}}const Tp=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:bn.create(t)})}});var ve;const qt=class qt{constructor(e){P(this,ve,void 0);$(this,ve,p(e))}where(...e){return new qt({...s(this,ve),queryNode:De.cloneWithWhere(s(this,ve).queryNode,Xt(e))})}whereRef(e,r,i){return new qt({...s(this,ve),queryNode:De.cloneWithWhere(s(this,ve).queryNode,Rn(e,r,i))})}clearWhere(){return new qt({...s(this,ve),queryNode:De.cloneWithoutWhere(s(this,ve).queryNode)})}using(e){return new qt({...s(this,ve),queryNode:da.cloneWithUsing(s(this,ve).queryNode,ka(e))})}innerJoin(...e){return new qt({...s(this,ve),queryNode:De.cloneWithJoin(s(this,ve).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new qt({...s(this,ve),queryNode:De.cloneWithJoin(s(this,ve).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new qt({...s(this,ve),queryNode:De.cloneWithJoin(s(this,ve).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new qt({...s(this,ve),queryNode:De.cloneWithJoin(s(this,ve).queryNode,pr("FullJoin",e))})}returning(e){return new qt({...s(this,ve),queryNode:De.cloneWithReturning(s(this,ve).queryNode,ys(e))})}returningAll(e){return new qt({...s(this,ve),queryNode:De.cloneWithReturning(s(this,ve).queryNode,tu(e))})}orderBy(e,r){return new qt({...s(this,ve),queryNode:da.cloneWithOrderByItems(s(this,ve).queryNode,pl([e,r]))})}limit(e){return new qt({...s(this,ve),queryNode:da.cloneWithLimit(s(this,ve).queryNode,Tp.create(e))})}$call(e){return e(this)}$if(e,r){return e?r(this):new qt({...s(this,ve)})}$castTo(){return new qt(s(this,ve))}$narrowType(){return new qt(s(this,ve))}$assertType(){return new qt(s(this,ve))}withPlugin(e){return new qt({...s(this,ve),executor:s(this,ve).executor.withPlugin(e)})}toOperationNode(){return s(this,ve).executor.transformQuery(s(this,ve).queryNode,s(this,ve).queryId)}compile(){return s(this,ve).executor.compileQuery(this.toOperationNode(),s(this,ve).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,ve).executor.executeQuery(e,s(this,ve).queryId);return s(this,ve).executor.adapter.supportsReturning&&r.returning?i.rows:[new $g(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,ve).executor.stream(r,e,s(this,ve).queryId);for await(const o of i)yield*o.rows}async explain(e,r){return await new qt({...s(this,ve),queryNode:De.cloneWithExplain(s(this,ve).queryNode,e,r)}).execute()}};ve=new WeakMap;let oc=qt;Be(oc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Qg{constructor(e,r){be(this,"numUpdatedRows");be(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var qe;const It=class It{constructor(e){P(this,qe,void 0);$(this,qe,p(e))}where(...e){return new It({...s(this,qe),queryNode:De.cloneWithWhere(s(this,qe).queryNode,Xt(e))})}whereRef(e,r,i){return new It({...s(this,qe),queryNode:De.cloneWithWhere(s(this,qe).queryNode,Rn(e,r,i))})}clearWhere(){return new It({...s(this,qe),queryNode:De.cloneWithoutWhere(s(this,qe).queryNode)})}from(e){return new It({...s(this,qe),queryNode:nc.cloneWithFromItems(s(this,qe).queryNode,ka(e))})}innerJoin(...e){return new It({...s(this,qe),queryNode:De.cloneWithJoin(s(this,qe).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new It({...s(this,qe),queryNode:De.cloneWithJoin(s(this,qe).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new It({...s(this,qe),queryNode:De.cloneWithJoin(s(this,qe).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new It({...s(this,qe),queryNode:De.cloneWithJoin(s(this,qe).queryNode,pr("FullJoin",e))})}set(e){return new It({...s(this,qe),queryNode:nc.cloneWithUpdates(s(this,qe).queryNode,Vf(e))})}returning(e){return new It({...s(this,qe),queryNode:De.cloneWithReturning(s(this,qe).queryNode,ys(e))})}returningAll(){return new It({...s(this,qe),queryNode:De.cloneWithReturning(s(this,qe).queryNode,tu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new It({...s(this,qe)})}$castTo(){return new It(s(this,qe))}$narrowType(){return new It(s(this,qe))}$assertType(){return new It(s(this,qe))}withPlugin(e){return new It({...s(this,qe),executor:s(this,qe).executor.withPlugin(e)})}toOperationNode(){return s(this,qe).executor.transformQuery(s(this,qe).queryNode,s(this,qe).queryId)}compile(){return s(this,qe).executor.compileQuery(this.toOperationNode(),s(this,qe).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,qe).executor.executeQuery(e,s(this,qe).queryId);return s(this,qe).executor.adapter.supportsReturning&&r.returning?i.rows:[new Qg(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0),i.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,qe).executor.stream(r,e,s(this,qe).queryId);for await(const o of i)yield*o.rows}async explain(e,r){return await new It({...s(this,qe),queryNode:De.cloneWithExplain(s(this,qe).queryNode,e,r)}).execute()}};qe=new WeakMap;let ac=It;Be(ac,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Kh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:mi.create(t),columns:e?p(e.map(vt.create)):void 0})}}),uc=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var En;const Tc=class Tc{constructor(e){P(this,En,void 0);$(this,En,p(e))}materialized(){return new Tc({...s(this,En),node:uc.cloneWith(s(this,En).node,{materialized:!0})})}notMaterialized(){return new Tc({...s(this,En),node:uc.cloneWith(s(this,En).node,{materialized:!1})})}toOperationNode(){return s(this,En).node}};En=new WeakMap;let cc=Tc;Be(cc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Hh(t,e){const r=e(Zg()).toOperationNode();return Or(t)?t(jg(r)).toOperationNode():uc.create(kp(t),r)}function jg(t){return e=>new cc({node:uc.create(kp(e),t)})}function kp(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(o=>o.trim());return Kh.create(r,i)}else return Kh.create(t)}const Au=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Jh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Vg(t){let e="";for(let r=0;r<t;++r)e+=zg();return e}function zg(){return Jh[~~(Math.random()*Jh.length)]}function Je(){return new Kg}var zs;class Kg{constructor(){P(this,zs,void 0)}get queryId(){return s(this,zs)===void 0&&$(this,zs,Vg(8)),s(this,zs)}}zs=new WeakMap;var kc;class zf{constructor(){be(this,"nodeStack",[]);P(this,kc,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),p(r)}transformNodeImpl(e){return s(this,kc)[e.kind](e)}transformNodeList(e){return e&&p(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}kc=new WeakMap;const Hg=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Ks,Hi,Ji,Ac,Ap,Wc,Wp,Rc,Rp,Gi,aa,Pa,tf,Dc,Dp;class Jg extends zf{constructor(r){super();P(this,Ac);P(this,Wc);P(this,Rc);P(this,Gi);P(this,Pa);P(this,Dc);P(this,Ks,void 0);P(this,Hi,new Set);P(this,Ji,new Set);$(this,Ks,r)}transformNodeImpl(r){if(!_e(this,Ac,Ap).call(this,r))return super.transformNodeImpl(r);const i=_e(this,Rc,Rp).call(this,r);for(const y of i)s(this,Ji).add(y);const o=_e(this,Wc,Wp).call(this,r);for(const y of o)s(this,Hi).add(y);const l=super.transformNodeImpl(r);for(const y of o)s(this,Hi).delete(y);for(const y of i)s(this,Ji).delete(y);return l}transformSchemableIdentifier(r){const i=super.transformSchemableIdentifier(r);return i.schema||!s(this,Hi).has(r.identifier.name)?i:{...i,schema:ht.create(s(this,Ks))}}transformReferences(r){const i=super.transformReferences(r);return i.table.table.schema?i:{...i,table:mi.createWithSchema(s(this,Ks),i.table.table.identifier.name)}}}Ks=new WeakMap,Hi=new WeakMap,Ji=new WeakMap,Ac=new WeakSet,Ap=function(r){return r.kind in Hg},Wc=new WeakSet,Wp=function(r){const i=new Set;if("name"in r&&r.name&&gi.is(r.name)&&_e(this,Pa,tf).call(this,r.name,i),"from"in r&&r.from)for(const o of r.from.froms)_e(this,Gi,aa).call(this,o,i);if("into"in r&&r.into&&_e(this,Gi,aa).call(this,r.into,i),"table"in r&&r.table&&_e(this,Gi,aa).call(this,r.table,i),"joins"in r&&r.joins)for(const o of r.joins)_e(this,Gi,aa).call(this,o.table,i);return i},Rc=new WeakSet,Rp=function(r){const i=new Set;return"with"in r&&r.with&&_e(this,Dc,Dp).call(this,r.with,i),i},Gi=new WeakSet,aa=function(r,i){const o=mi.is(r)?r:vi.is(r)&&mi.is(r.node)?r.node:null;o&&_e(this,Pa,tf).call(this,o.table,i)},Pa=new WeakSet,tf=function(r,i){const o=r.identifier.name;!s(this,Hi).has(o)&&!s(this,Ji).has(o)&&i.add(o)},Dc=new WeakSet,Dp=function(r,i){for(const o of r.expressions){const l=o.name.table.table.identifier.name;s(this,Ji).has(l)||i.add(l)}};var La;class ru{constructor(e){P(this,La,void 0);$(this,La,new Jg(e))}transformQuery(e){return s(this,La).transformNode(e.node)}async transformResult(e){return e.result}}La=new WeakMap;var He;const ji=class ji{constructor(e){P(this,He,void 0);$(this,He,p(e))}selectFrom(e){return hc({queryId:Je(),executor:s(this,He).executor,queryNode:Re.createFrom(ka(e),s(this,He).withNode)})}selectNoFrom(e){return hc({queryId:Je(),executor:s(this,He).executor,queryNode:Re.cloneWithSelections(Re.create(s(this,He).withNode),ys(e))})}insertInto(e){return new Sa({queryId:Je(),executor:s(this,He).executor,queryNode:hn.create(mr(e),s(this,He).withNode)})}replaceInto(e){return new Sa({queryId:Je(),executor:s(this,He).executor,queryNode:hn.create(mr(e),s(this,He).withNode,!0)})}deleteFrom(e){return new oc({queryId:Je(),executor:s(this,He).executor,queryNode:da.create(ka(e),s(this,He).withNode)})}updateTable(e){return new ac({queryId:Je(),executor:s(this,He).executor,queryNode:nc.create(Aa(e),s(this,He).withNode)})}with(e,r){const i=Hh(e,r);return new ji({...s(this,He),withNode:s(this,He).withNode?Au.cloneWithExpression(s(this,He).withNode,i):Au.create(i)})}withRecursive(e,r){const i=Hh(e,r);return new ji({...s(this,He),withNode:s(this,He).withNode?Au.cloneWithExpression(s(this,He).withNode,i):Au.create(i,{recursive:!0})})}withPlugin(e){return new ji({...s(this,He),executor:s(this,He).executor.withPlugin(e)})}withoutPlugins(){return new ji({...s(this,He),executor:s(this,He).executor.withoutPlugins()})}withSchema(e){return new ji({...s(this,He),executor:s(this,He).executor.withPluginAtFront(new ru(e))})}};He=new WeakMap;let lc=ji;var Ma,Hs,Js;class Gh{constructor(){P(this,Ma,void 0);P(this,Hs,void 0);P(this,Js,void 0);be(this,"resolve",e=>{s(this,Hs)&&s(this,Hs).call(this,e)});be(this,"reject",e=>{s(this,Js)&&s(this,Js).call(this,e)});$(this,Ma,new Promise((e,r)=>{$(this,Js,r),$(this,Hs,e)}))}get promise(){return s(this,Ma)}}Ma=new WeakMap,Hs=new WeakMap,Js=new WeakMap;const Yh=new Set;function Gg(t){Yh.has(t)||(Yh.add(t),console.log(t))}const Yg=p([]);var Yi,Ba,rf;class Pp{constructor(e=Yg){P(this,Ba);P(this,Yi,void 0);$(this,Yi,e)}get plugins(){return s(this,Yi)}transformQuery(e,r){for(const i of s(this,Yi)){const o=i.transformQuery({node:e,queryId:r});if(o.kind===e.kind)e=o;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${o.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{const o=await i.executeQuery(e),l=await _e(this,Ba,rf).call(this,o,r);return Xg(o,l),l})}async*stream(e,r,i){const o=new Gh,l=new Gh;this.provideConnection(async b=>(o.resolve(b),await l.promise)).catch(b=>o.reject(b));const y=await o.promise;try{for await(const b of y.streamQuery(e,r))yield await _e(this,Ba,rf).call(this,b,i)}finally{l.resolve()}}}Yi=new WeakMap,Ba=new WeakSet,rf=async function(e,r){for(const i of s(this,Yi))e=await i.transformResult({result:e,queryId:r});return e};function Xg(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Gg("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Ds extends Pp{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Ds([...this.plugins,e])}withPlugins(e){return new Ds([...this.plugins,...e])}withPluginAtFront(e){return new Ds([e,...this.plugins])}withoutPlugins(){return new Ds([])}}const Kf=new Ds;function Zg(){return new lc({executor:Kf})}function eb(t,e){return new tc({joinNode:la.create(t,Aa(e))})}function tb(){return new rc({overNode:ef.create()})}function pr(t,e){if(e.length===3)return nb(t,e[0],e[1],e[2]);if(e.length===2)return rb(t,e[0],e[1]);throw new Error("not implemented")}function rb(t,e,r){return r(eb(t,e)).toOperationNode()}function nb(t,e,r,i){return la.createWithOn(t,Aa(e),Rn(r,"=",i))}const ib=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:bn.create(t)})}}),sb=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function ob(t){return t=Or(t)?t(Co()):t,Ia(t).map(sb.create)}const Lp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return p({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Ss(t,e,r){return Or(e)&&(e=e(Gf())),wi(e)||(e=[e]),e.map(i=>Lp.create(t,Io(i),r))}var ni;const th=class th{constructor(e){P(this,ni,void 0);$(this,ni,e)}get expressionType(){}as(e){return new Hf(this,e)}or(...e){return new nf(Eo.create(s(this,ni),Xt(e)))}and(...e){return new sf(bi.create(s(this,ni),Xt(e)))}$castTo(){return new th(s(this,ni))}toOperationNode(){return s(this,ni)}};ni=new WeakMap;let st=th;var Gs,ii;class Hf{constructor(e,r){P(this,Gs,void 0);P(this,ii,void 0);$(this,Gs,e),$(this,ii,r)}get expression(){return s(this,Gs)}get alias(){return s(this,ii)}toOperationNode(){return vi.create(s(this,Gs).toOperationNode(),kr(s(this,ii))?s(this,ii).toOperationNode():ht.create(s(this,ii)))}}Gs=new WeakMap,ii=new WeakMap;var Xi;const Pc=class Pc{constructor(e){P(this,Xi,void 0);$(this,Xi,e)}get expressionType(){}as(e){return new Hf(this,e)}or(...e){return new Pc(Eo.create(s(this,Xi),Xt(e)))}$castTo(){return new Pc(s(this,Xi))}toOperationNode(){return No.create(s(this,Xi))}};Xi=new WeakMap;let nf=Pc;var Zi;const Lc=class Lc{constructor(e){P(this,Zi,void 0);$(this,Zi,e)}get expressionType(){}as(e){return new Hf(this,e)}and(...e){return new Lc(bi.create(s(this,Zi),Xt(e)))}$castTo(){return new Lc(s(this,Zi))}toOperationNode(){return No.create(s(this,Zi))}};Zi=new WeakMap;let sf=Lc;var Y;const xe=class xe{constructor(e){P(this,Y,void 0);$(this,Y,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new xe({...s(this,Y),queryNode:De.cloneWithWhere(s(this,Y).queryNode,Xt(e))})}whereRef(e,r,i){return new xe({...s(this,Y),queryNode:De.cloneWithWhere(s(this,Y).queryNode,Rn(e,r,i))})}having(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithHaving(s(this,Y).queryNode,Xt(e))})}havingRef(e,r,i){return new xe({...s(this,Y),queryNode:Re.cloneWithHaving(s(this,Y).queryNode,Rn(e,r,i))})}select(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSelections(s(this,Y).queryNode,ys(e))})}distinctOn(e){return new xe({...s(this,Y),queryNode:Re.cloneWithDistinctOn(s(this,Y).queryNode,Ia(e))})}modifyFront(e){return new xe({...s(this,Y),queryNode:Re.cloneWithFrontModifier(s(this,Y).queryNode,_n.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.createWithExpression(e.toOperationNode()))})}distinct(){return new xe({...s(this,Y),queryNode:Re.cloneWithFrontModifier(s(this,Y).queryNode,_n.create("Distinct"))})}forUpdate(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("ForUpdate"))})}forShare(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("ForShare"))})}forKeyShare(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("ForKeyShare"))})}forNoKeyUpdate(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("ForNoKeyUpdate"))})}skipLocked(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("SkipLocked"))})}noWait(){return new xe({...s(this,Y),queryNode:Re.cloneWithEndModifier(s(this,Y).queryNode,_n.create("NoWait"))})}selectAll(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSelections(s(this,Y).queryNode,tu(e))})}innerJoin(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("FullJoin",e))})}innerJoinLateral(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("LateralInnerJoin",e))})}leftJoinLateral(...e){return new xe({...s(this,Y),queryNode:De.cloneWithJoin(s(this,Y).queryNode,pr("LateralLeftJoin",e))})}orderBy(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithOrderByItems(s(this,Y).queryNode,pl(e))})}groupBy(e){return new xe({...s(this,Y),queryNode:Re.cloneWithGroupByItems(s(this,Y).queryNode,ob(e))})}limit(e){return new xe({...s(this,Y),queryNode:Re.cloneWithLimit(s(this,Y).queryNode,Tp.create(e))})}offset(e){return new xe({...s(this,Y),queryNode:Re.cloneWithOffset(s(this,Y).queryNode,ib.create(e))})}union(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("union",e,!1))})}unionAll(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("union",e,!0))})}intersect(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("intersect",e,!1))})}intersectAll(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("intersect",e,!0))})}except(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("except",e,!1))})}exceptAll(e){return new xe({...s(this,Y),queryNode:Re.cloneWithSetOperations(s(this,Y).queryNode,Ss("except",e,!0))})}as(e){return new Mp(this,e)}clearSelect(){return new xe({...s(this,Y),queryNode:Re.cloneWithoutSelections(s(this,Y).queryNode)})}clearWhere(){return new xe({...s(this,Y),queryNode:De.cloneWithoutWhere(s(this,Y).queryNode)})}clearLimit(){return new xe({...s(this,Y),queryNode:Re.cloneWithoutLimit(s(this,Y).queryNode)})}clearOffset(){return new xe({...s(this,Y),queryNode:Re.cloneWithoutOffset(s(this,Y).queryNode)})}clearOrderBy(){return new xe({...s(this,Y),queryNode:Re.cloneWithoutOrderBy(s(this,Y).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new xe({...s(this,Y)})}$castTo(){return new xe(s(this,Y))}$narrowType(){return new xe(s(this,Y))}$assertType(){return new xe(s(this,Y))}$asTuple(){return new st(this.toOperationNode())}withPlugin(e){return new xe({...s(this,Y),executor:s(this,Y).executor.withPlugin(e)})}toOperationNode(){return s(this,Y).executor.transformQuery(s(this,Y).queryNode,s(this,Y).queryId)}compile(){return s(this,Y).executor.compileQuery(this.toOperationNode(),s(this,Y).queryId)}async execute(){const e=this.compile();return(await s(this,Y).executor.executeQuery(e,s(this,Y).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,Y).executor.stream(r,e,s(this,Y).queryId);for await(const o of i)yield*o.rows}async explain(e,r){return await new xe({...s(this,Y),queryNode:De.cloneWithExplain(s(this,Y).queryNode,e,r)}).execute()}};Y=new WeakMap;let fc=xe;Be(fc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function hc(t){return new fc(t)}var Ys,Xs;class Mp{constructor(e,r){P(this,Ys,void 0);P(this,Xs,void 0);$(this,Ys,e),$(this,Xs,r)}get expression(){return s(this,Ys)}get alias(){return s(this,Xs)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return vi.create(s(this,Ys).toOperationNode(),ht.create(s(this,Xs)))}}Ys=new WeakMap,Xs=new WeakMap;Be(Mp,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ps=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?dr.cloneWithOperation(t.filter,"And",e):dr.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?dr.cloneWithOperation(t.filter,"Or",e):dr.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),ab=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var br;const Ms=class Ms{constructor(e){P(this,br,void 0);$(this,br,p(e))}get expressionType(){}as(e){return new ub(this,e)}distinct(){return new Ms({...s(this,br),aggregateFunctionNode:Ps.cloneWithDistinct(s(this,br).aggregateFunctionNode)})}filterWhere(...e){return new Ms({...s(this,br),aggregateFunctionNode:Ps.cloneWithFilter(s(this,br).aggregateFunctionNode,Xt(e))})}filterWhereRef(e,r,i){return new Ms({...s(this,br),aggregateFunctionNode:Ps.cloneWithFilter(s(this,br).aggregateFunctionNode,Rn(e,r,i))})}over(e){const r=tb();return new Ms({...s(this,br),aggregateFunctionNode:Ps.cloneWithOver(s(this,br).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return s(this,br).aggregateFunctionNode}};br=new WeakMap;let Ta=Ms;Be(Ta,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Zs,eo;class ub{constructor(e,r){P(this,Zs,void 0);P(this,eo,void 0);$(this,Zs,e),$(this,eo,r)}get expression(){return s(this,Zs)}get alias(){return s(this,eo)}toOperationNode(){return vi.create(s(this,Zs).toOperationNode(),ht.create(s(this,eo)))}}Zs=new WeakMap,eo=new WeakMap;function Bp(){const t=(r,i)=>new st(ab.create(r,Ia(i))),e=(r,i)=>new Ta({aggregateFunctionNode:Ps.create(r,i?Ia(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...i){return t("coalesce",[r,...i])},count(r){return e("count",[r])},countAll(r){return new Ta({aggregateFunctionNode:Ps.create("count",tu(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])}})}const cb=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function lb(t,e){return cb.create(ms.create(t),Hr(e))}const Jf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),yn=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Jf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var to;class Fp{constructor(e){P(this,to,void 0);$(this,to,p(e))}when(...e){return new Up({...s(this,to),node:yn.cloneWithWhen(s(this,to).node,Jf.create(Xt(e)))})}}to=new WeakMap;var ro;class Up{constructor(e){P(this,ro,void 0);$(this,ro,p(e))}then(e){return new fb({...s(this,ro),node:yn.cloneWithThen(s(this,ro).node,Qf(e)?jf(e):nr(e))})}}ro=new WeakMap;var an;class fb{constructor(e){P(this,an,void 0);$(this,an,p(e))}when(...e){return new Up({...s(this,an),node:yn.cloneWithWhen(s(this,an).node,Jf.create(Xt(e)))})}else(e){return new hb({...s(this,an),node:yn.cloneWith(s(this,an).node,{else:Qf(e)?jf(e):nr(e)})})}end(){return new st(yn.cloneWith(s(this,an).node,{isStatement:!1}))}endCase(){return new st(yn.cloneWith(s(this,an).node,{isStatement:!0}))}}an=new WeakMap;var no;class hb{constructor(e){P(this,no,void 0);$(this,no,p(e))}end(){return new st(yn.cloneWith(s(this,no).node,{isStatement:!1}))}endCase(){return new st(yn.cloneWith(s(this,no).node,{isStatement:!0}))}}no=new WeakMap;const db=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var si,Fa,af;class of{constructor(e){P(this,Fa);P(this,si,void 0);$(this,si,e)}at(e){return _e(this,Fa,af).call(this,"ArrayLocation",e)}key(e){return _e(this,Fa,af).call(this,"Member",e)}}si=new WeakMap,Fa=new WeakSet,af=function(e,r){return new pb(Gl.cloneWithTraversal(s(this,si),Yl.is(s(this,si).traversal)?Yl.cloneWithLeg(s(this,si).traversal,db.create(e,r)):xp.cloneWithValue(s(this,si).traversal,bn.createImmediate(r))))};var io;class pb extends of{constructor(r){super(r);P(this,io,void 0);$(this,io,r)}get expressionType(){}as(r){return new mb(this,r)}$castTo(){return new of(s(this,io))}toOperationNode(){return s(this,io)}}io=new WeakMap;var so,oi;class mb{constructor(e,r){P(this,so,void 0);P(this,oi,void 0);$(this,so,e),$(this,oi,r)}get expression(){return s(this,so)}get alias(){return s(this,oi)}toOperationNode(){return vi.create(s(this,so).toOperationNode(),kr(s(this,oi))?s(this,oi).toOperationNode():ht.create(s(this,oi)))}}so=new WeakMap,oi=new WeakMap;const Xh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Gf(t=Kf){function e(o,l,y){return new st(fa(o,l,y))}function r(o,l){return new st(lb(o,l))}const i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(o){return hc({queryId:Je(),executor:t,queryNode:Re.createFrom(ka(o))})},selectNoFrom(o){return hc({queryId:Je(),executor:t,queryNode:Re.cloneWithSelections(Re.create(),ys(o))})},case(o){return new Fp({node:yn.create(ds(o)?void 0:Hr(o))})},ref(o,l){return ds(l)?new st(Wn(o)):new of(Og(o,l))},val(o){return new st(Cp(o))},refTuple(...o){return new st(Xh.create(o.map(Hr)))},tuple(...o){return new st(Xh.create(o.map(nr)))},lit(o){return new st(jf(o))},cmpr(o,l,y){return new st(fa(o,l,y))},bxp(o,l,y){return new st(fa(o,l,y))},unary:r,not(o){return r("not",o)},exists(o){return r("exists",o)},neg(o){return r("-",o)},between(o,l,y){return new st(Ca.create(Hr(o),ms.create("between"),bi.create(nr(l),nr(y))))},betweenSymmetric(o,l,y){return new st(Ca.create(Hr(o),ms.create("between symmetric"),bi.create(nr(l),nr(y))))},and(o){return wi(o)?new st(Xl(o,"and")):new st(Mh(o,"and"))},or(o){return wi(o)?new st(Xl(o,"or")):new st(Mh(o,"or"))},parens(...o){const l=Xt(o);return No.is(l)?new st(l):new st(No.create(l))},withSchema(o){return Gf(t.withPluginAtFront(new ru(o)))}});return i.fn=Bp(),i.eb=i,i}function Co(t){return Gf()}function Io(t){if(kr(t))return t.toOperationNode();if(Or(t))return t(Co()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function $p(t){if(kr(t))return t.toOperationNode();if(Or(t))return t(Co()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function nu(t){return pg(t)||mg(t)||Or(t)}function ka(t){return wi(t)?t.map(e=>Aa(e)):[Aa(t)]}function Aa(t){return gn(t)?yb(t):$p(t)}function yb(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Qp);return vi.create(mr(r),ht.create(i))}else return mr(t)}function mr(t){const e=".";if(t.includes(e)){const[r,i]=t.split(e).map(Qp);return mi.createWithSchema(r,i)}else return mi.create(t)}function Qp(t){return t.trim()}const jp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),gt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:vt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),Vp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:vt.create(t)})}}),zp=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:vt.create(t),renameTo:vt.create(e)})}}),Yf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?ht.create(e):void 0})}}),wb=["no action","restrict","cascade","set null","set default"],Uu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function Kp(t){return kr(t)?t.toOperationNode():bn.createImmediate(t)}const Wu=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),gb=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function dc(t){if(wb.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Xe;const At=class At{constructor(e){P(this,Xe,void 0);$(this,Xe,e)}autoIncrement(){return new At(gt.cloneWith(s(this,Xe),{autoIncrement:!0}))}primaryKey(){return new At(gt.cloneWith(s(this,Xe),{primaryKey:!0}))}references(e){const r=Wn(e);if(!r.table||Ff.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new At(gt.cloneWith(s(this,Xe),{references:Uu.create(r.table,[r.column])}))}onDelete(e){if(!s(this,Xe).references)throw new Error("on delete constraint can only be added for foreign keys");return new At(gt.cloneWith(s(this,Xe),{references:Uu.cloneWithOnDelete(s(this,Xe).references,dc(e))}))}onUpdate(e){if(!s(this,Xe).references)throw new Error("on update constraint can only be added for foreign keys");return new At(gt.cloneWith(s(this,Xe),{references:Uu.cloneWithOnUpdate(s(this,Xe).references,dc(e))}))}unique(){return new At(gt.cloneWith(s(this,Xe),{unique:!0}))}notNull(){return new At(gt.cloneWith(s(this,Xe),{notNull:!0}))}unsigned(){return new At(gt.cloneWith(s(this,Xe),{unsigned:!0}))}defaultTo(e){return new At(gt.cloneWith(s(this,Xe),{defaultTo:gb.create(Kp(e))}))}check(e){return new At(gt.cloneWith(s(this,Xe),{check:Yf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new At(gt.cloneWith(s(this,Xe),{generated:Wu.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new At(gt.cloneWith(s(this,Xe),{generated:Wu.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new At(gt.cloneWith(s(this,Xe),{generated:Wu.create({identity:!0,byDefault:!0})}))}stored(){if(!s(this,Xe).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new At(gt.cloneWith(s(this,Xe),{generated:Wu.cloneWith(s(this,Xe).generated,{stored:!0})}))}modifyFront(e){return new At(gt.cloneWithFrontModifier(s(this,Xe),e.toOperationNode()))}modifyEnd(e){return new At(gt.cloneWithEndModifier(s(this,Xe),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return s(this,Xe)}};Xe=new WeakMap;let Ni=At;Be(Ni,"don't await ColumnDefinitionBuilder instances directly.");const Hp=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),bb=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function _o(t){return kr(t)?t.toOperationNode():bb.create(t)}const pc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Uu.create(e,r),name:i?ht.create(i):void 0})},cloneWith(t,e){return p({...t,...e})}});var es;const Mc=class Mc{constructor(e){P(this,es,void 0);$(this,es,e)}onDelete(e){return new Mc(pc.cloneWith(s(this,es),{onDelete:dc(e)}))}onUpdate(e){return new Mc(pc.cloneWith(s(this,es),{onUpdate:dc(e)}))}$call(e){return e(this)}toOperationNode(){return s(this,es)}};es=new WeakMap;let Wa=Mc;Be(Wa,"don't await ForeignKeyConstraintBuilder instances directly.");const $u=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),Jp=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(vt.create)),name:e?ht.create(e):void 0})}}),Qu=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:ht.create(t)})},cloneWith(t,e){return p({...t,...e})}}),na=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return p({kind:"AlterColumnNode",column:vt.create(t),[e]:r})}});var Cn;class Xf{constructor(e){P(this,Cn,void 0);$(this,Cn,e)}setDataType(e){return new ia(na.create(s(this,Cn),"dataType",_o(e)))}setDefault(e){return new ia(na.create(s(this,Cn),"setDefault",Kp(e)))}dropDefault(){return new ia(na.create(s(this,Cn),"dropDefault",!0))}setNotNull(){return new ia(na.create(s(this,Cn),"setNotNull",!0))}dropNotNull(){return new ia(na.create(s(this,Cn),"dropNotNull",!0))}$call(e){return e(this)}}Cn=new WeakMap;var Ua;class ia{constructor(e){P(this,Ua,void 0);$(this,Ua,e)}toOperationNode(){return s(this,Ua)}}Ua=new WeakMap;var $r;class ks{constructor(e){P(this,$r,void 0);$(this,$r,p(e))}toOperationNode(){return s(this,$r).executor.transformQuery(s(this,$r).node,s(this,$r).queryId)}compile(){return s(this,$r).executor.compileQuery(this.toOperationNode(),s(this,$r).queryId)}async execute(){await s(this,$r).executor.executeQuery(this.compile(),s(this,$r).queryId)}}$r=new WeakMap;Be(ks,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Ht;const Bc=class Bc{constructor(e){P(this,Ht,void 0);$(this,Ht,p(e))}onDelete(e){return new Bc({...s(this,Ht),constraintBuilder:s(this,Ht).constraintBuilder.onDelete(e)})}onUpdate(e){return new Bc({...s(this,Ht),constraintBuilder:s(this,Ht).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return s(this,Ht).executor.transformQuery(Nt.cloneWithTableProps(s(this,Ht).node,{addConstraint:$u.create(s(this,Ht).constraintBuilder.toOperationNode())}),s(this,Ht).queryId)}compile(){return s(this,Ht).executor.compileQuery(this.toOperationNode(),s(this,Ht).queryId)}async execute(){await s(this,Ht).executor.executeQuery(this.compile(),s(this,Ht).queryId)}};Ht=new WeakMap;let mc=Bc;Be(mc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Et;const ya=class ya{constructor(e){P(this,Et,void 0);$(this,Et,p(e))}ifExists(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{ifExists:!0})})})}cascade(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return s(this,Et).executor.transformQuery(s(this,Et).node,s(this,Et).queryId)}compile(){return s(this,Et).executor.compileQuery(this.toOperationNode(),s(this,Et).queryId)}async execute(){await s(this,Et).executor.executeQuery(this.compile(),s(this,Et).queryId)}};Et=new WeakMap;let yc=ya;Be(yc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Gp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(vt.create)),name:e?ht.create(e):void 0})}});var Ze;class Yp{constructor(e){P(this,Ze,void 0);$(this,Ze,p(e))}renameTo(e){return new ks({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{renameTo:mr(e)})})}setSchema(e){return new ks({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{setSchema:ht.create(e)})})}alterColumn(e,r){const i=r(new Xf(e));return new ri({...s(this,Ze),node:Nt.cloneWithColumnAlteration(s(this,Ze).node,i.toOperationNode())})}dropColumn(e){return new ri({...s(this,Ze),node:Nt.cloneWithColumnAlteration(s(this,Ze).node,Vp.create(e))})}renameColumn(e,r){return new ri({...s(this,Ze),node:Nt.cloneWithColumnAlteration(s(this,Ze).node,zp.create(e,r))})}addColumn(e,r,i=bo){const o=i(new Ni(gt.create(e,_o(r))));return new ri({...s(this,Ze),node:Nt.cloneWithColumnAlteration(s(this,Ze).node,jp.create(o.toOperationNode()))})}modifyColumn(e,r,i=bo){const o=i(new Ni(gt.create(e,_o(r))));return new ri({...s(this,Ze),node:Nt.cloneWithColumnAlteration(s(this,Ze).node,Hp.create(o.toOperationNode()))})}addUniqueConstraint(e,r){return new ks({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{addConstraint:$u.create(Jp.create(r,e))})})}addCheckConstraint(e,r){return new ks({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{addConstraint:$u.create(Yf.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,o){return new mc({...s(this,Ze),constraintBuilder:new Wa(pc.create(r.map(vt.create),mr(i),o.map(vt.create),e))})}addPrimaryKeyConstraint(e,r){return new ks({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{addConstraint:$u.create(Gp.create(r,e))})})}dropConstraint(e){return new yc({...s(this,Ze),node:Nt.cloneWithTableProps(s(this,Ze).node,{dropConstraint:Qu.create(e)})})}$call(e){return e(this)}}Ze=new WeakMap;var wt;const Vi=class Vi{constructor(e){P(this,wt,void 0);$(this,wt,p(e))}alterColumn(e,r){const i=r(new Xf(e));return new Vi({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,i.toOperationNode())})}dropColumn(e){return new Vi({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,Vp.create(e))})}renameColumn(e,r){return new Vi({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,zp.create(e,r))})}addColumn(e,r,i=bo){const o=i(new Ni(gt.create(e,_o(r))));return new Vi({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,jp.create(o.toOperationNode()))})}modifyColumn(e,r,i=bo){const o=i(new Ni(gt.create(e,_o(r))));return new Vi({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,Hp.create(o.toOperationNode()))})}toOperationNode(){return s(this,wt).executor.transformQuery(s(this,wt).node,s(this,wt).queryId)}compile(){return s(this,wt).executor.compileQuery(this.toOperationNode(),s(this,wt).queryId)}async execute(){await s(this,wt).executor.executeQuery(this.compile(),s(this,wt).queryId)}};wt=new WeakMap;let ri=Vi;Be(Yp,"don't await AlterTableBuilder instances");Be(Xf,"don't await AlterColumnBuilder instances");Be(ri,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Xp extends zf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var et;const sn=class sn{constructor(e){P(this,et,void 0);$(this,et,p(e))}ifNotExists(){return new sn({...s(this,et),node:Yn.cloneWith(s(this,et).node,{ifNotExists:!0})})}unique(){return new sn({...s(this,et),node:Yn.cloneWith(s(this,et).node,{unique:!0})})}on(e){return new sn({...s(this,et),node:Yn.cloneWith(s(this,et).node,{table:mr(e)})})}column(e){return new sn({...s(this,et),node:Yn.cloneWithColumns(s(this,et).node,[Lh(e)])})}columns(e){return new sn({...s(this,et),node:Yn.cloneWithColumns(s(this,et).node,e.map(Lh))})}expression(e){return new sn({...s(this,et),node:Yn.cloneWithColumns(s(this,et).node,[e.toOperationNode()])})}using(e){return new sn({...s(this,et),node:Yn.cloneWith(s(this,et).node,{using:rr.createWithSql(e)})})}where(...e){const r=new Xp;return new sn({...s(this,et),node:De.cloneWithWhere(s(this,et).node,r.transformNode(Xt(e)))})}$call(e){return e(this)}toOperationNode(){return s(this,et).executor.transformQuery(s(this,et).node,s(this,et).queryId)}compile(){return s(this,et).executor.compileQuery(this.toOperationNode(),s(this,et).queryId)}async execute(){await s(this,et).executor.executeQuery(this.compile(),s(this,et).queryId)}};et=new WeakMap;let wc=sn;Be(wc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Nr;const rh=class rh{constructor(e){P(this,Nr,void 0);$(this,Nr,p(e))}ifNotExists(){return new rh({...s(this,Nr),node:gp.cloneWith(s(this,Nr).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Nr).executor.transformQuery(s(this,Nr).node,s(this,Nr).queryId)}compile(){return s(this,Nr).executor.compileQuery(this.toOperationNode(),s(this,Nr).queryId)}async execute(){await s(this,Nr).executor.executeQuery(this.compile(),s(this,Nr).queryId)}};Nr=new WeakMap;let gc=rh;Be(gc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function Nb(t){if(dg.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var $e;const Tr=class Tr{constructor(e){P(this,$e,void 0);$(this,$e,p(e))}temporary(){return new Tr({...s(this,$e),node:Mr.cloneWith(s(this,$e).node,{temporary:!0})})}onCommit(e){return new Tr({...s(this,$e),node:Mr.cloneWith(s(this,$e).node,{onCommit:Nb(e)})})}ifNotExists(){return new Tr({...s(this,$e),node:Mr.cloneWith(s(this,$e).node,{ifNotExists:!0})})}addColumn(e,r,i=bo){const o=i(new Ni(gt.create(e,_o(r))));return new Tr({...s(this,$e),node:Mr.cloneWithColumn(s(this,$e).node,o.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Tr({...s(this,$e),node:Mr.cloneWithConstraint(s(this,$e).node,Gp.create(r,e))})}addUniqueConstraint(e,r){return new Tr({...s(this,$e),node:Mr.cloneWithConstraint(s(this,$e).node,Jp.create(r,e))})}addCheckConstraint(e,r){return new Tr({...s(this,$e),node:Mr.cloneWithConstraint(s(this,$e).node,Yf.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,o,l=bo){const y=l(new Wa(pc.create(r.map(vt.create),mr(i),o.map(vt.create),e)));return new Tr({...s(this,$e),node:Mr.cloneWithConstraint(s(this,$e).node,y.toOperationNode())})}modifyFront(e){return new Tr({...s(this,$e),node:Mr.cloneWithFrontModifier(s(this,$e).node,e.toOperationNode())})}modifyEnd(e){return new Tr({...s(this,$e),node:Mr.cloneWithEndModifier(s(this,$e).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return s(this,$e).executor.transformQuery(s(this,$e).node,s(this,$e).queryId)}compile(){return s(this,$e).executor.compileQuery(this.toOperationNode(),s(this,$e).queryId)}async execute(){await s(this,$e).executor.executeQuery(this.compile(),s(this,$e).queryId)}};$e=new WeakMap;let bc=Tr;Be(bc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Bt;const wa=class wa{constructor(e){P(this,Bt,void 0);$(this,Bt,p(e))}on(e){return new wa({...s(this,Bt),node:Fu.cloneWith(s(this,Bt).node,{table:mr(e)})})}ifExists(){return new wa({...s(this,Bt),node:Fu.cloneWith(s(this,Bt).node,{ifExists:!0})})}cascade(){return new wa({...s(this,Bt),node:Fu.cloneWith(s(this,Bt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Bt).executor.transformQuery(s(this,Bt).node,s(this,Bt).queryId)}compile(){return s(this,Bt).executor.compileQuery(this.toOperationNode(),s(this,Bt).queryId)}async execute(){await s(this,Bt).executor.executeQuery(this.compile(),s(this,Bt).queryId)}};Bt=new WeakMap;let Nc=wa;Be(Nc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var er;const Fc=class Fc{constructor(e){P(this,er,void 0);$(this,er,p(e))}ifExists(){return new Fc({...s(this,er),node:Kl.cloneWith(s(this,er).node,{ifExists:!0})})}cascade(){return new Fc({...s(this,er),node:Kl.cloneWith(s(this,er).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,er).executor.transformQuery(s(this,er).node,s(this,er).queryId)}compile(){return s(this,er).executor.compileQuery(this.toOperationNode(),s(this,er).queryId)}async execute(){await s(this,er).executor.executeQuery(this.compile(),s(this,er).queryId)}};er=new WeakMap;let vc=Fc;Be(vc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var tr;const Uc=class Uc{constructor(e){P(this,tr,void 0);$(this,tr,p(e))}ifExists(){return new Uc({...s(this,tr),node:Hl.cloneWith(s(this,tr).node,{ifExists:!0})})}cascade(){return new Uc({...s(this,tr),node:Hl.cloneWith(s(this,tr).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,tr).executor.transformQuery(s(this,tr).node,s(this,tr).queryId)}compile(){return s(this,tr).executor.compileQuery(this.toOperationNode(),s(this,tr).queryId)}async execute(){await s(this,tr).executor.executeQuery(this.compile(),s(this,tr).queryId)}};tr=new WeakMap;let _c=Uc;Be(_c,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const ei=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:gi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var $c;class vb{constructor(){P(this,$c,new Xp)}transformQuery(e){return s(this,$c).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}$c=new WeakMap;var ft;const ti=class ti{constructor(e){P(this,ft,void 0);$(this,ft,p(e))}temporary(){return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{temporary:!0})})}materialized(){return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{materialized:!0})})}ifNotExists(){return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{ifNotExists:!0})})}orReplace(){return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{orReplace:!0})})}columns(e){return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{columns:e.map(qp)})})}as(e){const r=e.withPlugin(new vb).toOperationNode();return new ti({...s(this,ft),node:ei.cloneWith(s(this,ft).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return s(this,ft).executor.transformQuery(s(this,ft).node,s(this,ft).queryId)}compile(){return s(this,ft).executor.compileQuery(this.toOperationNode(),s(this,ft).queryId)}async execute(){await s(this,ft).executor.executeQuery(this.compile(),s(this,ft).queryId)}};ft=new WeakMap;let xc=ti;Be(xc,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const ju=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:gi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Ft;const ga=class ga{constructor(e){P(this,Ft,void 0);$(this,Ft,p(e))}materialized(){return new ga({...s(this,Ft),node:ju.cloneWith(s(this,Ft).node,{materialized:!0})})}ifExists(){return new ga({...s(this,Ft),node:ju.cloneWith(s(this,Ft).node,{ifExists:!0})})}cascade(){return new ga({...s(this,Ft),node:ju.cloneWith(s(this,Ft).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ft).executor.transformQuery(s(this,Ft).node,s(this,Ft).queryId)}compile(){return s(this,Ft).executor.compileQuery(this.toOperationNode(),s(this,Ft).queryId)}async execute(){await s(this,Ft).executor.executeQuery(this.compile(),s(this,Ft).queryId)}};Ft=new WeakMap;let Oc=ga;Be(Oc,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Zp=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:$f.create(e.map(r=>bn.createImmediate(r)))})}});var vr;const nh=class nh{constructor(e){P(this,vr,void 0);$(this,vr,p(e))}toOperationNode(){return s(this,vr).executor.transformQuery(s(this,vr).node,s(this,vr).queryId)}asEnum(e){return new nh({...s(this,vr),node:Zp.cloneWithEnum(s(this,vr).node,e)})}$call(e){return e(this)}compile(){return s(this,vr).executor.compileQuery(this.toOperationNode(),s(this,vr).queryId)}async execute(){await s(this,vr).executor.executeQuery(this.compile(),s(this,vr).queryId)}};vr=new WeakMap;let qc=nh;Be(qc,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const em=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var _r;const ih=class ih{constructor(e){P(this,_r,void 0);$(this,_r,p(e))}ifExists(){return new ih({...s(this,_r),node:em.cloneWith(s(this,_r).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,_r).executor.transformQuery(s(this,_r).node,s(this,_r).queryId)}compile(){return s(this,_r).executor.compileQuery(this.toOperationNode(),s(this,_r).queryId)}async execute(){await s(this,_r).executor.executeQuery(this.compile(),s(this,_r).queryId)}};_r=new WeakMap;let Ec=ih;Be(Ec,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Zh(t){const e=".";if(t.includes(e)){const r=t.split(e).map(_b);if(r.length===2)return gi.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return gi.create(t)}function _b(t){return t.trim()}var Wt;const ba=class ba{constructor(e){P(this,Wt,void 0);$(this,Wt,e)}createTable(e){return new bc({queryId:Je(),executor:s(this,Wt),node:Mr.create(mr(e))})}dropTable(e){return new _c({queryId:Je(),executor:s(this,Wt),node:Hl.create(mr(e))})}createIndex(e){return new wc({queryId:Je(),executor:s(this,Wt),node:Yn.create(e)})}dropIndex(e){return new Nc({queryId:Je(),executor:s(this,Wt),node:Fu.create(e)})}createSchema(e){return new gc({queryId:Je(),executor:s(this,Wt),node:gp.create(e)})}dropSchema(e){return new vc({queryId:Je(),executor:s(this,Wt),node:Kl.create(e)})}alterTable(e){return new Yp({queryId:Je(),executor:s(this,Wt),node:Nt.create(mr(e))})}createView(e){return new xc({queryId:Je(),executor:s(this,Wt),node:ei.create(e)})}dropView(e){return new Oc({queryId:Je(),executor:s(this,Wt),node:ju.create(e)})}createType(e){return new qc({queryId:Je(),executor:s(this,Wt),node:Zp.create(Zh(e))})}dropType(e){return new Ec({queryId:Je(),executor:s(this,Wt),node:em.create(Zh(e))})}withPlugin(e){return new ba(s(this,Wt).withPlugin(e))}withoutPlugins(){return new ba(s(this,Wt).withoutPlugins())}withSchema(e){return new ba(s(this,Wt).withPluginAtFront(new ru(e)))}};Wt=new WeakMap;let uf=ba;class xb{ref(e){return new _g(e)}}var oo;class Ob{constructor(e){P(this,oo,void 0);$(this,oo,e)}async provideConnection(e){const r=await s(this,oo).acquireConnection();try{return await e(r)}finally{await s(this,oo).releaseConnection(r)}}}oo=new WeakMap;var un,cn,In;const zi=class zi extends Pp{constructor(r,i,o,l=[]){super(l);P(this,un,void 0);P(this,cn,void 0);P(this,In,void 0);$(this,un,r),$(this,cn,i),$(this,In,o)}get adapter(){return s(this,cn)}compileQuery(r){return s(this,un).compileQuery(r)}provideConnection(r){return s(this,In).provideConnection(r)}withPlugins(r){return new zi(s(this,un),s(this,cn),s(this,In),[...this.plugins,...r])}withPlugin(r){return new zi(s(this,un),s(this,cn),s(this,In),[...this.plugins,r])}withPluginAtFront(r){return new zi(s(this,un),s(this,cn),s(this,In),[r,...this.plugins])}withConnectionProvider(r){return new zi(s(this,un),s(this,cn),r,[...this.plugins])}withoutPlugins(){return new zi(s(this,un),s(this,cn),s(this,In),[])}};un=new WeakMap,cn=new WeakMap,In=new WeakMap;let cf=zi;function ed(){return typeof performance<"u"&&Or(performance.now)?performance.now():Date.now()}var Qr,ai,Sn,ao,Tn,$a,Qc,tm,jc,rm,Vc,nm,zc,im,Qa,lf;class qb{constructor(e,r){P(this,Qc);P(this,jc);P(this,Vc);P(this,zc);P(this,Qa);P(this,Qr,void 0);P(this,ai,void 0);P(this,Sn,void 0);P(this,ao,void 0);P(this,Tn,void 0);P(this,$a,new WeakSet);$(this,ao,!1),$(this,Qr,e),$(this,ai,r)}async init(){if(s(this,Tn))throw new Error("driver has already been destroyed");s(this,Sn)||$(this,Sn,s(this,Qr).init().then(()=>{$(this,ao,!0)}).catch(e=>($(this,Sn,void 0),Promise.reject(e)))),await s(this,Sn)}async acquireConnection(){if(s(this,Tn))throw new Error("driver has already been destroyed");s(this,ao)||await this.init();const e=await s(this,Qr).acquireConnection();return s(this,$a).has(e)||(_e(this,Qc,tm).call(this)&&_e(this,jc,rm).call(this,e),s(this,$a).add(e)),e}async releaseConnection(e){await s(this,Qr).releaseConnection(e)}beginTransaction(e,r){return s(this,Qr).beginTransaction(e,r)}commitTransaction(e){return s(this,Qr).commitTransaction(e)}rollbackTransaction(e){return s(this,Qr).rollbackTransaction(e)}async destroy(){s(this,Sn)&&(await s(this,Sn),s(this,Tn)||$(this,Tn,s(this,Qr).destroy().catch(e=>($(this,Tn,void 0),Promise.reject(e)))),await s(this,Tn))}}Qr=new WeakMap,ai=new WeakMap,Sn=new WeakMap,ao=new WeakMap,Tn=new WeakMap,$a=new WeakMap,Qc=new WeakSet,tm=function(){return s(this,ai).isLevelEnabled("query")||s(this,ai).isLevelEnabled("error")},jc=new WeakSet,rm=function(e){const r=e.executeQuery;e.executeQuery=async i=>{const o=ed();try{return await r.call(e,i)}catch(l){throw await _e(this,Vc,nm).call(this,l,i,o),l}finally{await _e(this,zc,im).call(this,i,o)}}},Vc=new WeakSet,nm=async function(e,r,i){await s(this,ai).error(()=>({level:"error",error:e,query:r,queryDurationMillis:_e(this,Qa,lf).call(this,i)}))},zc=new WeakSet,im=async function(e,r){await s(this,ai).query(()=>({level:"query",query:e,queryDurationMillis:_e(this,Qa,lf).call(this,r)}))},Qa=new WeakSet,lf=function(e){return ed()-e};var ja,ui,Kc,om;class sm{constructor(e){P(this,Kc);P(this,ja,void 0);P(this,ui,void 0);$(this,ja,e)}async provideConnection(e){for(;s(this,ui);)await s(this,ui);const r=_e(this,Kc,om).call(this,e);return $(this,ui,r.then(()=>{$(this,ui,void 0)}).catch(()=>{$(this,ui,void 0)})),r}}ja=new WeakMap,ui=new WeakMap,Kc=new WeakSet,om=async function(e){return await e(s(this,ja))};const Eb=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var ci,ts;class Cb{constructor(e){P(this,ci,void 0);P(this,ts,void 0);Or(e)?($(this,ts,e),$(this,ci,p({query:!0,error:!0}))):($(this,ts,Ib),$(this,ci,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return s(this,ci)[e]}async query(e){s(this,ci).query&&await s(this,ts).call(this,e())}async error(e){s(this,ci).error&&await s(this,ts).call(this,e())}}ci=new WeakMap,ts=new WeakMap;function Ib(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function Sb(t){return pn(t)&&Or(t.compile)}var Ut;const Bs=class Bs extends lc{constructor(r){let i,o;if(Tb(r))i={executor:r.executor},o={...r};else{const l=r.dialect,y=l.createDriver(),b=l.createQueryCompiler(),O=l.createAdapter(),d=new Cb(r.log??[]),T=new qb(y,d),W=new Ob(T),ee=new cf(b,O,W,r.plugins??[]);i={executor:ee},o={config:r,executor:ee,dialect:l,driver:T}}super(i);P(this,Ut,void 0);$(this,Ut,p(o))}get schema(){return new uf(s(this,Ut).executor)}get dynamic(){return new xb}get introspection(){return s(this,Ut).dialect.createIntrospector(this.withoutPlugins())}case(r){return new Fp({node:yn.create(ds(r)?void 0:Io(r))})}get fn(){return Bp()}transaction(){return new Cc({...s(this,Ut)})}connection(){return new am({...s(this,Ut)})}withPlugin(r){return new Bs({...s(this,Ut),executor:s(this,Ut).executor.withPlugin(r)})}withoutPlugins(){return new Bs({...s(this,Ut),executor:s(this,Ut).executor.withoutPlugins()})}withSchema(r){return new Bs({...s(this,Ut),executor:s(this,Ut).executor.withPluginAtFront(new ru(r))})}withTables(){return new Bs({...s(this,Ut)})}async destroy(){await s(this,Ut).driver.destroy()}get isTransaction(){return!1}getExecutor(){return s(this,Ut).executor}executeQuery(r,i=Je()){const o=Sb(r)?r.compile():r;return this.getExecutor().executeQuery(o,i)}};Ut=new WeakMap;let Ra=Bs;var jr;const Fs=class Fs extends Ra{constructor(r){super(r);P(this,jr,void 0);$(this,jr,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new Fs({...s(this,jr),executor:s(this,jr).executor.withPlugin(r)})}withoutPlugins(){return new Fs({...s(this,jr),executor:s(this,jr).executor.withoutPlugins()})}withSchema(r){return new Fs({...s(this,jr),executor:s(this,jr).executor.withPluginAtFront(new ru(r))})}withTables(){return new Fs({...s(this,jr)})}};jr=new WeakMap;let ff=Fs;function Tb(t){return pn(t)&&pn(t.config)&&pn(t.driver)&&pn(t.executor)&&pn(t.dialect)}var rs;class am{constructor(e){P(this,rs,void 0);$(this,rs,p(e))}async execute(e){return s(this,rs).executor.provideConnection(async r=>{const i=s(this,rs).executor.withConnectionProvider(new sm(r)),o=new Ra({...s(this,rs),executor:i});return await e(o)})}}rs=new WeakMap;Be(am,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Vr;const sh=class sh{constructor(e){P(this,Vr,void 0);$(this,Vr,p(e))}setIsolationLevel(e){return new sh({...s(this,Vr),isolationLevel:e})}async execute(e){const{isolationLevel:r,...i}=s(this,Vr),o={isolationLevel:r};return kb(o),s(this,Vr).executor.provideConnection(async l=>{const y=s(this,Vr).executor.withConnectionProvider(new sm(l)),b=new ff({...i,executor:y});try{await s(this,Vr).driver.beginTransaction(l,o);const O=await e(b);return await s(this,Vr).driver.commitTransaction(l),O}catch(O){throw await s(this,Vr).driver.rollbackTransaction(l),O}})}};Vr=new WeakMap;let Cc=sh;Be(Cc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function kb(t){if(t.isolationLevel&&!Eb.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var hr,uo,Vu,Va,hf,za,df;const Hc=class Hc{constructor(e){P(this,uo);P(this,Va);P(this,za);P(this,hr,void 0);$(this,hr,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new um(this,e)}$castTo(){return new Hc({...s(this,hr)})}withPlugin(e){return new Hc({...s(this,hr),plugins:s(this,hr).plugins!==void 0?p([...s(this,hr).plugins,e]):p([e])})}toOperationNode(){return _e(this,Va,hf).call(this,_e(this,uo,Vu).call(this))}compile(e){return _e(this,za,df).call(this,_e(this,uo,Vu).call(this,e))}async execute(e){const r=_e(this,uo,Vu).call(this,e);return r.executeQuery(_e(this,za,df).call(this,r),s(this,hr).queryId)}};hr=new WeakMap,uo=new WeakSet,Vu=function(e){const r=e!==void 0?e.getExecutor():Kf;return s(this,hr).plugins!==void 0?r.withPlugins(s(this,hr).plugins):r},Va=new WeakSet,hf=function(e){return e.transformQuery(s(this,hr).rawNode,s(this,hr).queryId)},za=new WeakSet,df=function(e){return e.compileQuery(_e(this,Va,hf).call(this,e),s(this,hr).queryId)};let Ic=Hc;function Gn(t){return new Ic(t)}Be(Ic,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ns,li;class um{constructor(e,r){P(this,ns,void 0);P(this,li,void 0);$(this,ns,e),$(this,li,r)}get expression(){return s(this,ns)}get alias(){return s(this,li)}get rawBuilder(){return s(this,ns)}toOperationNode(){return vi.create(s(this,ns).toOperationNode(),kr(s(this,li))?s(this,li).toOperationNode():ht.create(s(this,li)))}}ns=new WeakMap,li=new WeakMap;Be(um,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Tt=Object.assign((t,...e)=>Gn({queryId:Je(),rawNode:rr.create(t,e?.map(nr)??[])}),{ref(t){return Gn({queryId:Je(),rawNode:rr.createWithChild(Wn(t))})},val(t){return Gn({queryId:Je(),rawNode:rr.createWithChild(nr(t))})},value(t){return this.val(t)},table(t){return Gn({queryId:Je(),rawNode:rr.createWithChild(mr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Gn({queryId:Je(),rawNode:rr.create(e,t.map(ht.create))})},lit(t){return Gn({queryId:Je(),rawNode:rr.createWithChild(bn.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Gn({queryId:Je(),rawNode:rr.createWithSql(t)})},join(t,e=Tt`, `){const r=new Array(2*t.length-1),i=e.toOperationNode();for(let o=0;o<t.length;++o)r[2*o]=nr(t[o]),o!==t.length-1&&(r[2*o+1]=i);return Gn({queryId:Je(),rawNode:rr.createWithChildren(r)})}});var Jc;class Ab{constructor(){be(this,"nodeStack",[]);P(this,Jc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));be(this,"visitNode",e=>{this.nodeStack.push(e),s(this,Jc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Jc=new WeakMap;var co,is;class Wb extends Ab{constructor(){super(...arguments);P(this,co,"");P(this,is,[])}get numParameters(){return s(this,is).length}compileQuery(r){return $(this,co,""),$(this,is,[]),this.visitNode(r),p({query:r,sql:this.getSql(),parameters:[...s(this,is)]})}getSql(){return s(this,co)}visitSelectQuery(r){const i=this.parentNode!==void 0&&!No.is(this.parentNode)&&!hn.is(this.parentNode)&&!ei.is(this.parentNode)&&!Lp.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),i&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,i=", "){const o=r.length-1;for(let l=0;l<=o;l++)this.visitNode(r[l]),l<o&&this.append(i)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const i=this.nodeStack.find(De.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const i=this.nodeStack.find(De.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!gn(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:i}=r;for(let o=0;o<i.length;++o)this.appendValue(i[o]),o!==i.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(Db[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:i,parameters:o}=r;for(let l=0;l<i.length;++l)this.append(i[l]),o.length>l&&this.visitNode(o[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const i=this.nodeStack.find(De.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Zu(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileList(r.columnAlterations)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(Rb[r.modifier])}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return ms.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const i of r.pathLegs)this.visitNode(i);this.append("'")}visitJSONPathLeg(r){const i=r.type==="ArrayLocation";this.append(i?"[":"."),this.append(String(r.value)),i&&this.append("]")}visitJSONOperatorChain(r){for(let i=0,o=r.values.length;i<o;i++)i===o-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[i])}append(r){$(this,co,s(this,co)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const i=this.getLeftIdentifierWrapper(),o=this.getRightIdentifierWrapper();let l="";for(const y of r)l+=y,y===i?l+=i:y===o&&(l+=o);return l}addParameter(r){s(this,is).push(r)}appendImmediateValue(r){if(gn(r))this.append(`'${r}'`);else if(wp(r)||Zu(r))this.append(r.toString());else if(Bf(r))this.append("null");else if(fg(r))this.appendImmediateValue(r.toISOString());else if(hg(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((i,o)=>i.modifier&&o.modifier?td[i.modifier]-td[o.modifier]:1),p(r)}}co=new WeakMap,is=new WeakMap;const Rb=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),td=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Db=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),wn=p({raw(t,e=[]){return p({sql:t,query:rr.createWithSql(t),parameters:p(e)})}}),Pb=/"/g;class cm extends Wb{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(Pb,'""')}visitDefaultInsertValue(e){this.append("null")}}const lm="kysely_migration",fm="kysely_migration_lock";p({__noMigrations__:!0});var lo,Gc,dm;class hm{constructor(e){P(this,Gc);P(this,lo,void 0);$(this,lo,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=s(this,lo).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",lm).where("name","!=",fm));const i=await r.execute();return Promise.all(i.map(({name:o})=>_e(this,Gc,dm).call(this,o)))}async getMetadata(e){return{tables:await this.getTables(e)}}}lo=new WeakMap,Gc=new WeakSet,dm=async function(e){const r=s(this,lo),i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),o=i.sql?.split(/[\(\),]/)?.find(y=>y.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(Tt`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:l.map(y=>({name:y.name,dataType:y.type,isNullable:!y.notnull,isAutoIncrementing:y.name===o,hasDefaultValue:y.dflt_value!=null}))}};class pm{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var mm=class{createQueryCompiler(){return new cm}createAdapter(){return new pm}createIntrospector(t){return new hm(t)}},Ka,wd,ym=(wd=class{constructor(){P(this,Ka,new Lb);be(this,"connection")}async acquireConnection(){return await s(this,Ka).lock(),this.connection}async beginTransaction(t){await t.executeQuery(wn.raw("begin"))}async commitTransaction(t){await t.executeQuery(wn.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(wn.raw("rollback"))}async releaseConnection(){s(this,Ka).unlock()}},Ka=new WeakMap,wd),Lb=class{constructor(){be(this,"promise");be(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},wm=class{streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const i=await this.query(r,t);return Re.is(e)||i.length?{rows:i}:{rows:i,...await this.info()}}};function Mb(t,e,r){let i,o=0,l=null;function y(){i&&clearTimeout(i),o=0,l=null}function b(){o>=r?(t(l),y()):(i&&clearTimeout(i),i=setTimeout(()=>{t(l),y(),i=void 0},e))}return O=>{o++,l=O,i===void 0&&o===0?(t(O),o++):b()}}var Bb=class extends ym{constructor(e){super();be(this,"config");be(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Fb(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},Fb=class extends wm{constructor(e,r,i=!1,o=2e3,l=1e3){super();be(this,"db");be(this,"onWrite");be(this,"trxCount",0);this.db=e,this.onWrite=r?i?Mb(r,o,l):r:void 0}async query(e,r){const i=this.db.prepare(e);i.bind(r);const o=[];for(;i.step();)o.push(i.getAsObject());return i.free(),o}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},Ub=class extends mm{constructor(e){super();be(this,"config");this.config=e}createDriver(){return new Bb(this.config)}},$b=class extends ym{constructor(e){super();be(this,"config");be(this,"db");this.config=e}async init(){this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new Qb(this.db),await this.config.onCreateConnection?.(this.connection)}async destroy(){await this.db?.sqlite.close(this.db.db)}},Qb=class extends wm{constructor(e){super();be(this,"sqlite");be(this,"db");this.db=e.db,this.sqlite=e.sqlite}async query(e,r){const i=[],o=this.sqlite.str_new(this.db,e);try{const l=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(o));if(l){const y=l.stmt;try{r?.length&&this.sqlite.bind_collection(y,r);const b=this.sqlite.column_names(y);for(;await this.sqlite.step(y)===100;){const O=this.sqlite.row(y);i.push(Object.fromEntries(b.map((d,T)=>[d,O[T]])))}}finally{await this.sqlite.finalize(y)}}}finally{this.sqlite.str_finish(o)}return i}async info(){return{insertId:await new Promise(e=>this.sqlite.exec(this.db,"SELECT last_insert_rowid()",([r])=>e(BigInt(r)))),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ha,gd,jb=(gd=class extends mm{constructor(e){super();P(this,Ha,void 0);$(this,Ha,e)}createDriver(){return new $b(s(this,Ha))}},Ha=new WeakMap,gd);function Vb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),r}var gm={exports:{}};const Kb={},Hb=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"})),Ru=zb(Hb);(function(t,e){var r=void 0,i=function(o){return r||(r=new Promise(function(l,y){var b=typeof o<"u"?o:{},O=b.onAbort;b.onAbort=function(a){y(new Error(a)),O&&O(a)},b.postRun=b.postRun||[],b.postRun.push(function(){l(b)}),t=void 0;var d;d||(d=typeof b<"u"?b:{}),d.onRuntimeInitialized=function(){function a(I,K){switch(typeof K){case"boolean":Ou(I,K?1:0);break;case"number":_u(I,K);break;case"string":xu(I,K,-1,-1);break;case"object":if(K===null)Zo(I);else if(K.length!=null){var fe=qs(K);ea(I,fe,K.length,-1),Ri(fe)}else Li(I,"Wrong API use : tried to return a value of an unknown type ("+K+").",-1);break;default:Zo(I)}}function c(I,K){for(var fe=[],n=0;n<I;n+=1){var u=V(K+4*n,"i32"),f=gu(u);if(f===1||f===2)u=vu(u);else if(f===3)u=bu(u);else if(f===4){f=u,u=Xo(f),f=Nu(f);for(var m=new Uint8Array(u),v=0;v<u;v+=1)m[v]=pe[f+v];u=m}else u=null;fe.push(u)}return fe}function h(I,K){this.La=I,this.db=K,this.Ja=1,this.fb=[]}function w(I,K){if(this.db=K,K=Lt(I)+1,this.Ya=Wi(K),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");wr(I,Ie,this.Ya,K),this.eb=this.Ya,this.Ua=this.ib=null}function x(I){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),I!=null){var K=this.filename,fe="/",n=K;if(fe&&(fe=typeof fe=="string"?fe:Mn(fe),n=K?le(fe+"/"+K):fe),K=Ti(!0,!0),n=Bn(n,(K!==void 0?K:438)&4095|32768,0),I){if(typeof I=="string"){fe=Array(I.length);for(var u=0,f=I.length;u<f;++u)fe[u]=I.charCodeAt(u);I=fe}qi(n,K|146),fe=Cr(n,577),Ci(fe,I,0,I.length,0),Ei(fe),qi(n,K)}}this.handleError(Ne(this.filename,L)),this.db=V(L,"i32"),qu(this.db),this.Za={},this.Na={}}var L=Pr(4),B=d.cwrap,Ne=B("sqlite3_open","number",["string","number"]),Me=B("sqlite3_close_v2","number",["number"]),We=B("sqlite3_exec","number",["number","string","number","number","number"]),ot=B("sqlite3_changes","number",["number"]),ur=B("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Jo=B("sqlite3_sql","string",["number"]),Go=B("sqlite3_normalized_sql","string",["number"]),Pi=B("sqlite3_prepare_v2","number",["number","number","number","number","number"]),wl=B("sqlite3_bind_text","number",["number","number","number","number","number"]),Lr=B("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ir=B("sqlite3_bind_double","number",["number","number","number"]),lu=B("sqlite3_bind_int","number",["number","number","number"]),Es=B("sqlite3_bind_parameter_index","number",["number","string"]),fu=B("sqlite3_step","number",["number"]),hu=B("sqlite3_errmsg","string",["number"]),gl=B("sqlite3_column_count","number",["number"]),Yo=B("sqlite3_data_count","number",["number"]),bl=B("sqlite3_column_double","number",["number","number"]),du=B("sqlite3_column_text","string",["number","number"]),Nl=B("sqlite3_column_blob","number",["number","number"]),pu=B("sqlite3_column_bytes","number",["number","number"]),mu=B("sqlite3_column_type","number",["number","number"]),yu=B("sqlite3_column_name","string",["number","number"]),Sr=B("sqlite3_reset","number",["number"]),wu=B("sqlite3_clear_bindings","number",["number"]),vl=B("sqlite3_finalize","number",["number"]),ie=B("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),gu=B("sqlite3_value_type","number",["number"]),Xo=B("sqlite3_value_bytes","number",["number"]),bu=B("sqlite3_value_text","string",["number"]),Nu=B("sqlite3_value_blob","number",["number"]),vu=B("sqlite3_value_double","number",["number"]),_u=B("sqlite3_result_double","",["number","number"]),Zo=B("sqlite3_result_null","",["number"]),xu=B("sqlite3_result_text","",["number","string","number","number"]),ea=B("sqlite3_result_blob","",["number","number","number","number"]),Ou=B("sqlite3_result_int","",["number","number"]),Li=B("sqlite3_result_error","",["number","string","number"]),ta=B("sqlite3_aggregate_context","number",["number","number"]),qu=B("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(I){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(I)?this.xb(I):I!=null&&typeof I=="object"?this.yb(I):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var I=fu(this.La);switch(I){case 100:return!0;case 101:return!1;default:throw this.db.handleError(I)}},h.prototype.sb=function(I){return I==null&&(I=this.Ja,this.Ja+=1),bl(this.La,I)},h.prototype.Cb=function(I){if(I==null&&(I=this.Ja,this.Ja+=1),I=du(this.La,I),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(I)},h.prototype.Db=function(I){return I==null&&(I=this.Ja,this.Ja+=1),du(this.La,I)},h.prototype.getBlob=function(I){I==null&&(I=this.Ja,this.Ja+=1);var K=pu(this.La,I);I=Nl(this.La,I);for(var fe=new Uint8Array(K),n=0;n<K;n+=1)fe[n]=pe[I+n];return fe},h.prototype.get=function(I,K){K=K||{},I!=null&&this.bind(I)&&this.step(),I=[];for(var fe=Yo(this.La),n=0;n<fe;n+=1)switch(mu(this.La,n)){case 1:var u=K.useBigInt?this.Cb(n):this.sb(n);I.push(u);break;case 2:I.push(this.sb(n));break;case 3:I.push(this.Db(n));break;case 4:I.push(this.getBlob(n));break;default:I.push(null)}return I},h.prototype.getColumnNames=function(){for(var I=[],K=gl(this.La),fe=0;fe<K;fe+=1)I.push(yu(this.La,fe));return I},h.prototype.getAsObject=function(I,K){I=this.get(I,K),K=this.getColumnNames();for(var fe={},n=0;n<K.length;n+=1)fe[K[n]]=I[n];return fe},h.prototype.getSQL=function(){return Jo(this.La)},h.prototype.getNormalizedSQL=function(){return Go(this.La)},h.prototype.run=function(I){return I!=null&&this.bind(I),this.step(),this.reset()},h.prototype.nb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1),I=rt(I);var fe=qs(I);this.fb.push(fe),this.db.handleError(wl(this.La,K,fe,I.length-1,0))},h.prototype.wb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1);var fe=qs(I);this.fb.push(fe),this.db.handleError(Lr(this.La,K,fe,I.length,0))},h.prototype.mb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1),this.db.handleError((I===(I|0)?lu:Ir)(this.La,K,I))},h.prototype.zb=function(I){I==null&&(I=this.Ja,this.Ja+=1),Lr(this.La,I,0,0,0)},h.prototype.ob=function(I,K){switch(K==null&&(K=this.Ja,this.Ja+=1),typeof I){case"string":this.nb(I,K);return;case"number":this.mb(I,K);return;case"bigint":this.nb(I.toString(),K);return;case"boolean":this.mb(I+0,K);return;case"object":if(I===null){this.zb(K);return}if(I.length!=null){this.wb(I,K);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+I+")."},h.prototype.yb=function(I){var K=this;return Object.keys(I).forEach(function(fe){var n=Es(K.La,fe);n!==0&&K.ob(I[fe],n)}),!0},h.prototype.xb=function(I){for(var K=0;K<I.length;K+=1)this.ob(I[K],K+1);return!0},h.prototype.reset=function(){return this.freemem(),wu(this.La)===0&&Sr(this.La)===0},h.prototype.freemem=function(){for(var I;(I=this.fb.pop())!==void 0;)Ri(I)},h.prototype.free=function(){this.freemem();var I=vl(this.La)===0;return delete this.db.Za[this.La],this.La=0,I},w.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var I=zn(),K=Pr(4);ce(L),ce(K);try{this.db.handleError(Pi(this.db.db,this.eb,-1,L,K)),this.eb=V(K,"i32");var fe=V(L,"i32");return fe===0?(this.gb(),{done:!0}):(this.Ua=new h(fe,this.db),this.db.Za[fe]=this.Ua,{value:this.Ua,done:!1})}catch(n){throw this.ib=tt(this.eb),this.gb(),n}finally{Kn(I)}},w.prototype.gb=function(){Ri(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:tt(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(w.prototype[Symbol.iterator]=function(){return this}),x.prototype.run=function(I,K){if(!this.db)throw"Database closed";if(K){I=this.prepare(I,K);try{I.step()}finally{I.free()}}else this.handleError(We(this.db,I,0,0,L));return this},x.prototype.exec=function(I,K,fe){if(!this.db)throw"Database closed";var n=zn(),u=null;try{var f=Lt(I)+1,m=Pr(f);wr(I,pe,m,f);var v=m,A=Pr(4);for(I=[];V(v,"i8")!==0;){ce(L),ce(A),this.handleError(Pi(this.db,v,-1,L,A));var k=V(L,"i32");if(v=V(A,"i32"),k!==0){for(f=null,u=new h(k,this),K!=null&&u.bind(K);u.step();)f===null&&(f={columns:u.getColumnNames(),values:[]},I.push(f)),f.values.push(u.get(null,fe));u.free()}}return I}catch(H){throw u&&u.free(),H}finally{Kn(n)}},x.prototype.each=function(I,K,fe,n,u){typeof K=="function"&&(n=fe,fe=K,K=void 0),I=this.prepare(I,K);try{for(;I.step();)fe(I.getAsObject(null,u))}finally{I.free()}if(typeof n=="function")return n()},x.prototype.prepare=function(I,K){if(ce(L),this.handleError(ur(this.db,I,-1,L,0)),I=V(L,"i32"),I===0)throw"Nothing to prepare";var fe=new h(I,this);return K!=null&&fe.bind(K),this.Za[I]=fe},x.prototype.iterateStatements=function(I){return new w(I,this)},x.prototype.export=function(){Object.values(this.Za).forEach(function(K){K.free()}),Object.values(this.Na).forEach(Vn),this.Na={},this.handleError(Me(this.db));var I=vn(this.filename);return this.handleError(Ne(this.filename,L)),this.db=V(L,"i32"),I},x.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(Vn),this.Na={},this.handleError(Me(this.db)),Lo("/"+this.filename),this.db=null)},x.prototype.handleError=function(I){if(I===0)return null;throw I=hu(this.db),Error(I)},x.prototype.getRowsModified=function(){return ot(this.db)},x.prototype.create_function=function(I,K){Object.prototype.hasOwnProperty.call(this.Na,I)&&(Vn(this.Na[I]),delete this.Na[I]);var fe=Os(function(n,u,f){u=c(u,f);try{var m=K.apply(null,u)}catch(v){Li(n,v,-1);return}a(n,m)},"viii");return this.Na[I]=fe,this.handleError(ie(this.db,I,K.length,1,0,fe,0,0,0)),this},x.prototype.create_aggregate=function(I,K){var fe=K.init||function(){return null},n=K.finalize||function(A){return A},u=K.step;if(!u)throw"An aggregate function must have a step function in "+I;var f={};Object.hasOwnProperty.call(this.Na,I)&&(Vn(this.Na[I]),delete this.Na[I]),K=I+"__finalize",Object.hasOwnProperty.call(this.Na,K)&&(Vn(this.Na[K]),delete this.Na[K]);var m=Os(function(A,k,H){var R=ta(A,1);Object.hasOwnProperty.call(f,R)||(f[R]=fe()),k=c(k,H),k=[f[R]].concat(k);try{f[R]=u.apply(null,k)}catch(M){delete f[R],Li(A,M,-1)}},"viii"),v=Os(function(A){var k=ta(A,1);try{var H=n(f[k])}catch(R){delete f[k],Li(A,R,-1);return}a(A,H),delete f[k]},"vi");return this.Na[I]=m,this.Na[K]=v,this.handleError(ie(this.db,I,u.length-1,1,0,0,m,v,0)),this},d.Database=x};var T=Object.assign({},d),W="./this.program",ee=typeof window=="object",G=typeof importScripts=="function",ue=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",N="",E,g,C,S,X,ne;ue?(N=G?Ru.dirname(N)+"/":__dirname+"/",ne=()=>{X||(S=Ru,X=Ru)},E=function(a,c){return ne(),a=X.normalize(a),S.readFileSync(a,c?void 0:"utf8")},C=a=>(a=E(a,!0),a.buffer||(a=new Uint8Array(a)),a),g=(a,c,h)=>{ne(),a=X.normalize(a),S.readFile(a,function(w,x){w?h(w):c(x.buffer)})},1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=function(){return"[Emscripten Module object]"}):(ee||G)&&(G?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),N=N.indexOf("blob:")!==0?N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):"",E=a=>{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.send(null),c.responseText},G&&(C=a=>{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),g=(a,c,h)=>{var w=new XMLHttpRequest;w.open("GET",a,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?c(w.response):h()},w.onerror=h,w.send(null)});var we=d.print||console.log.bind(console),Le=d.printErr||console.warn.bind(console);Object.assign(d,T),T=null,d.thisProgram&&(W=d.thisProgram);var dt;d.wasmBinary&&(dt=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&_("no native wasm support detected");var qr,Pt=!1,Ar=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Er(a,c,h){var w=c+h;for(h=c;a[h]&&!(h>=w);)++h;if(16<h-c&&a.buffer&&Ar)return Ar.decode(a.subarray(c,h));for(w="";c<h;){var x=a[c++];if(x&128){var L=a[c++]&63;if((x&224)==192)w+=String.fromCharCode((x&31)<<6|L);else{var B=a[c++]&63;x=(x&240)==224?(x&15)<<12|L<<6|B:(x&7)<<18|L<<12|B<<6|a[c++]&63,65536>x?w+=String.fromCharCode(x):(x-=65536,w+=String.fromCharCode(55296|x>>10,56320|x&1023))}}else w+=String.fromCharCode(x)}return w}function tt(a,c){return a?Er(Ie,a,c):""}function wr(a,c,h,w){if(!(0<w))return 0;var x=h;w=h+w-1;for(var L=0;L<a.length;++L){var B=a.charCodeAt(L);if(55296<=B&&57343>=B){var Ne=a.charCodeAt(++L);B=65536+((B&1023)<<10)|Ne&1023}if(127>=B){if(h>=w)break;c[h++]=B}else{if(2047>=B){if(h+1>=w)break;c[h++]=192|B>>6}else{if(65535>=B){if(h+2>=w)break;c[h++]=224|B>>12}else{if(h+3>=w)break;c[h++]=240|B>>18,c[h++]=128|B>>12&63}c[h++]=128|B>>6&63}c[h++]=128|B&63}}return c[h]=0,h-x}function Lt(a){for(var c=0,h=0;h<a.length;++h){var w=a.charCodeAt(h);127>=w?c++:2047>=w?c+=2:55296<=w&&57343>=w?(c+=4,++h):c+=3}return c}var it,pe,Ie,_t,ye,Ue,Vt,Nn;function ws(){var a=qr.buffer;it=a,d.HEAP8=pe=new Int8Array(a),d.HEAP16=_t=new Int16Array(a),d.HEAP32=ye=new Int32Array(a),d.HEAPU8=Ie=new Uint8Array(a),d.HEAPU16=new Uint16Array(a),d.HEAPU32=Ue=new Uint32Array(a),d.HEAPF32=Vt=new Float32Array(a),d.HEAPF64=Nn=new Float64Array(a)}var he,Ae=[],Yr=[],Xr=[];function Ge(){var a=d.preRun.shift();Ae.unshift(a)}var ir=0,xt=null;function _(a){throw d.onAbort&&d.onAbort(a),a="Aborted("+a+")",Le(a),Pt=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}function q(){return D.startsWith("data:application/octet-stream;base64,")}var D;if(D="sql-wasm.wasm",!q()){var Q=D;D=d.locateFile?d.locateFile(Q,N):N+Q}function J(){var a=D;try{if(a==D&&dt)return new Uint8Array(dt);if(C)return C(a);throw"both async and sync fetching of the wasm failed"}catch(c){_(c)}}function te(){if(!dt&&(ee||G)){if(typeof fetch=="function"&&!D.startsWith("file://"))return fetch(D,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+D+"'";return a.arrayBuffer()}).catch(function(){return J()});if(g)return new Promise(function(a,c){g(D,function(h){a(new Uint8Array(h))},c)})}return Promise.resolve().then(function(){return J()})}var U,j;function re(a){for(;0<a.length;)a.shift()(d)}function V(a,c="i8"){switch(c.endsWith("*")&&(c="*"),c){case"i1":return pe[a>>0];case"i8":return pe[a>>0];case"i16":return _t[a>>1];case"i32":return ye[a>>2];case"i64":return ye[a>>2];case"float":return Vt[a>>2];case"double":return Nn[a>>3];case"*":return Ue[a>>2];default:_("invalid type for getValue: "+c)}return null}function ce(a){var c="i32";switch(c.endsWith("*")&&(c="*"),c){case"i1":pe[a>>0]=0;break;case"i8":pe[a>>0]=0;break;case"i16":_t[a>>1]=0;break;case"i32":ye[a>>2]=0;break;case"i64":j=[0,(U=0,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[a>>2]=j[0],ye[a+4>>2]=j[1];break;case"float":Vt[a>>2]=0;break;case"double":Nn[a>>3]=0;break;case"*":Ue[a>>2]=0;break;default:_("invalid type for setValue: "+c)}}var ae=(a,c)=>{for(var h=0,w=a.length-1;0<=w;w--){var x=a[w];x==="."?a.splice(w,1):x===".."?(a.splice(w,1),h++):h&&(a.splice(w,1),h--)}if(c)for(;h;h--)a.unshift("..");return a},le=a=>{var c=a.charAt(0)==="/",h=a.substr(-1)==="/";return(a=ae(a.split("/").filter(w=>!!w),!c).join("/"))||c||(a="."),a&&h&&(a+="/"),(c?"/":"")+a},ge=a=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=c[0],c=c[1],!a&&!c?".":(c&&(c=c.substr(0,c.length-1)),a+c)},Ee=a=>{if(a==="/")return"/";a=le(a),a=a.replace(/\/$/,"");var c=a.lastIndexOf("/");return c===-1?a:a.substr(c+1)};function je(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var a=new Uint8Array(1);return()=>(crypto.getRandomValues(a),a[0])}if(ue)try{var c=Ru;return()=>c.randomBytes(1)[0]}catch{}return()=>_("randomDevice")}function Pe(){for(var a="",c=!1,h=arguments.length-1;-1<=h&&!c;h--){if(c=0<=h?arguments[h]:"/",typeof c!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!c)return"";a=c+"/"+a,c=c.charAt(0)==="/"}return a=ae(a.split("/").filter(w=>!!w),!c).join("/"),(c?"/":"")+a||"."}function rt(a,c){var h=Array(Lt(a)+1);return a=wr(a,h,0,h.length),c&&(h.length=a),h}var me=[];function Wr(a,c){me[a]={input:[],output:[],Xa:c},or(a,Pn)}var Pn={open:function(a){var c=me[a.node.rdev];if(!c)throw new F(43);a.tty=c,a.seekable=!1},close:function(a){a.tty.Xa.fsync(a.tty)},fsync:function(a){a.tty.Xa.fsync(a.tty)},read:function(a,c,h,w){if(!a.tty||!a.tty.Xa.tb)throw new F(60);for(var x=0,L=0;L<w;L++){try{var B=a.tty.Xa.tb(a.tty)}catch{throw new F(29)}if(B===void 0&&x===0)throw new F(6);if(B==null)break;x++,c[h+L]=B}return x&&(a.node.timestamp=Date.now()),x},write:function(a,c,h,w){if(!a.tty||!a.tty.Xa.jb)throw new F(60);try{for(var x=0;x<w;x++)a.tty.Xa.jb(a.tty,c[h+x])}catch{throw new F(29)}return w&&(a.node.timestamp=Date.now()),x}},Zr={tb:function(a){if(!a.input.length){var c=null;if(ue){var h=Buffer.alloc(256),w=0;try{w=S.readSync(process.stdin.fd,h,0,256,-1)}catch(x){if(x.toString().includes("EOF"))w=0;else throw x}0<w?c=h.slice(0,w).toString("utf-8"):c=null}else typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`));if(!c)return null;a.input=rt(c,!0)}return a.input.shift()},jb:function(a,c){c===null||c===10?(we(Er(a.output,0)),a.output=[]):c!=0&&a.output.push(c)},fsync:function(a){a.output&&0<a.output.length&&(we(Er(a.output,0)),a.output=[])}},en={jb:function(a,c){c===null||c===10?(Le(Er(a.output,0)),a.output=[]):c!=0&&a.output.push(c)},fsync:function(a){a.output&&0<a.output.length&&(Le(Er(a.output,0)),a.output=[])}},de={Qa:null,Ra:function(){return de.createNode(null,"/",16895,0)},createNode:function(a,c,h,w){if((h&61440)===24576||(h&61440)===4096)throw new F(63);return de.Qa||(de.Qa={dir:{node:{Pa:de.Ga.Pa,Oa:de.Ga.Oa,lookup:de.Ga.lookup,ab:de.Ga.ab,rename:de.Ga.rename,unlink:de.Ga.unlink,rmdir:de.Ga.rmdir,readdir:de.Ga.readdir,symlink:de.Ga.symlink},stream:{Ta:de.Ha.Ta}},file:{node:{Pa:de.Ga.Pa,Oa:de.Ga.Oa},stream:{Ta:de.Ha.Ta,read:de.Ha.read,write:de.Ha.write,lb:de.Ha.lb,bb:de.Ha.bb,cb:de.Ha.cb}},link:{node:{Pa:de.Ga.Pa,Oa:de.Ga.Oa,readlink:de.Ga.readlink},stream:{}},pb:{node:{Pa:de.Ga.Pa,Oa:de.Ga.Oa},stream:Do}}),h=ko(a,c,h,w),(h.mode&61440)===16384?(h.Ga=de.Qa.dir.node,h.Ha=de.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=de.Qa.file.node,h.Ha=de.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=de.Qa.link.node,h.Ha=de.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=de.Qa.pb.node,h.Ha=de.Qa.pb.stream),h.timestamp=Date.now(),a&&(a.Ia[c]=h,a.timestamp=h.timestamp),h},Jb:function(a){return a.Ia?a.Ia.subarray?a.Ia.subarray(0,a.Ma):new Uint8Array(a.Ia):new Uint8Array(0)},qb:function(a,c){var h=a.Ia?a.Ia.length:0;h>=c||(c=Math.max(c,h*(1048576>h?2:1.125)>>>0),h!=0&&(c=Math.max(c,256)),h=a.Ia,a.Ia=new Uint8Array(c),0<a.Ma&&a.Ia.set(h.subarray(0,a.Ma),0))},Gb:function(a,c){if(a.Ma!=c)if(c==0)a.Ia=null,a.Ma=0;else{var h=a.Ia;a.Ia=new Uint8Array(c),h&&a.Ia.set(h.subarray(0,Math.min(c,a.Ma))),a.Ma=c}},Ga:{Pa:function(a){var c={};return c.dev=(a.mode&61440)===8192?a.id:1,c.ino=a.id,c.mode=a.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=a.rdev,(a.mode&61440)===16384?c.size=4096:(a.mode&61440)===32768?c.size=a.Ma:(a.mode&61440)===40960?c.size=a.link.length:c.size=0,c.atime=new Date(a.timestamp),c.mtime=new Date(a.timestamp),c.ctime=new Date(a.timestamp),c.Ab=4096,c.blocks=Math.ceil(c.size/c.Ab),c},Oa:function(a,c){c.mode!==void 0&&(a.mode=c.mode),c.timestamp!==void 0&&(a.timestamp=c.timestamp),c.size!==void 0&&de.Gb(a,c.size)},lookup:function(){throw gs[44]},ab:function(a,c,h,w){return de.createNode(a,c,h,w)},rename:function(a,c,h){if((a.mode&61440)===16384){try{var w=sr(c,h)}catch{}if(w)for(var x in w.Ia)throw new F(55)}delete a.parent.Ia[a.name],a.parent.timestamp=Date.now(),a.name=h,c.Ia[h]=a,c.timestamp=a.parent.timestamp,a.parent=c},unlink:function(a,c){delete a.Ia[c],a.timestamp=Date.now()},rmdir:function(a,c){var h=sr(a,c),w;for(w in h.Ia)throw new F(55);delete a.Ia[c],a.timestamp=Date.now()},readdir:function(a){var c=[".",".."],h;for(h in a.Ia)a.Ia.hasOwnProperty(h)&&c.push(h);return c},symlink:function(a,c,h){return a=de.createNode(a,c,41471,0),a.link=h,a},readlink:function(a){if((a.mode&61440)!==40960)throw new F(28);return a.link}},Ha:{read:function(a,c,h,w,x){var L=a.node.Ia;if(x>=a.node.Ma)return 0;if(a=Math.min(a.node.Ma-x,w),8<a&&L.subarray)c.set(L.subarray(x,x+a),h);else for(w=0;w<a;w++)c[h+w]=L[x+w];return a},write:function(a,c,h,w,x,L){if(c.buffer===pe.buffer&&(L=!1),!w)return 0;if(a=a.node,a.timestamp=Date.now(),c.subarray&&(!a.Ia||a.Ia.subarray)){if(L)return a.Ia=c.subarray(h,h+w),a.Ma=w;if(a.Ma===0&&x===0)return a.Ia=c.slice(h,h+w),a.Ma=w;if(x+w<=a.Ma)return a.Ia.set(c.subarray(h,h+w),x),w}if(de.qb(a,x+w),a.Ia.subarray&&c.subarray)a.Ia.set(c.subarray(h,h+w),x);else for(L=0;L<w;L++)a.Ia[x+L]=c[h+L];return a.Ma=Math.max(a.Ma,x+w),w},Ta:function(a,c,h){if(h===1?c+=a.position:h===2&&(a.node.mode&61440)===32768&&(c+=a.node.Ma),0>c)throw new F(28);return c},lb:function(a,c,h){de.qb(a.node,c+h),a.node.Ma=Math.max(a.node.Ma,c+h)},bb:function(a,c,h,w,x){if((a.node.mode&61440)!==32768)throw new F(43);if(a=a.node.Ia,x&2||a.buffer!==it){if((0<h||h+c<a.length)&&(a.subarray?a=a.subarray(h,h+c):a=Array.prototype.slice.call(a,h,h+c)),h=!0,c=65536*Math.ceil(c/65536),(x=Ko(65536,c))?(Ie.fill(0,x,x+c),c=x):c=0,!c)throw new F(48);pe.set(a,c)}else h=!1,c=a.byteOffset;return{Fb:c,vb:h}},cb:function(a,c,h,w,x){if((a.node.mode&61440)!==32768)throw new F(43);return x&2||de.Ha.write(a,c,0,w,h,!1),0}}},ct=null,Ln={},Z=[],So=1,lt=null,_i=!0,F=null,gs={},pt=(a,c={})=>{if(a=Pe("/",a),!a)return{path:"",node:null};if(c=Object.assign({rb:!0,kb:0},c),8<c.kb)throw new F(32);a=ae(a.split("/").filter(B=>!!B),!1);for(var h=ct,w="/",x=0;x<a.length;x++){var L=x===a.length-1;if(L&&c.parent)break;if(h=sr(h,a[x]),w=le(w+"/"+a[x]),h.Va&&(!L||L&&c.rb)&&(h=h.Va.root),!L||c.Sa){for(L=0;(h.mode&61440)===40960;)if(h=Mo(w),w=Pe(ge(w),h),h=pt(w,{kb:c.kb+1}).node,40<L++)throw new F(32)}}return{path:w,node:h}},Mn=a=>{for(var c;;){if(a===a.parent)return a=a.Ra.ub,c?a[a.length-1]!=="/"?a+"/"+c:a+c:a;c=c?a.name+"/"+c:a.name,a=a.parent}},zt=(a,c)=>{for(var h=0,w=0;w<c.length;w++)h=(h<<5)-h+c.charCodeAt(w)|0;return(a+h>>>0)%lt.length},To=a=>{var c=zt(a.parent.id,a.name);if(lt[c]===a)lt[c]=a.Wa;else for(c=lt[c];c;){if(c.Wa===a){c.Wa=a.Wa;break}c=c.Wa}},sr=(a,c)=>{var h;if(h=(h=mt(a,"x"))?h:a.Ga.lookup?0:2)throw new F(h,a);for(h=lt[zt(a.id,c)];h;h=h.Wa){var w=h.name;if(h.parent.id===a.id&&w===c)return h}return a.Ga.lookup(a,c)},ko=(a,c,h,w)=>(a=new Vo(a,c,h,w),c=zt(a.parent.id,a.name),a.Wa=lt[c],lt[c]=a),iu={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},su=a=>{var c=["r","w","rw"][a&3];return a&512&&(c+="w"),c},mt=(a,c)=>{if(_i)return 0;if(!c.includes("r")||a.mode&292){if(c.includes("w")&&!(a.mode&146)||c.includes("x")&&!(a.mode&73))return 2}else return 2;return 0},Ao=(a,c)=>{try{return sr(a,c),20}catch{}return mt(a,"wx")},ou=(a,c,h)=>{try{var w=sr(a,c)}catch(x){return x.Ka}if(a=mt(a,"wx"))return a;if(h){if((w.mode&61440)!==16384)return 54;if(w===w.parent||Mn(w)==="/")return 10}else if((w.mode&61440)===16384)return 31;return 0},Wo=(a=0)=>{for(;4096>=a;a++)if(!Z[a])return a;throw new F(33)},Ro=(a,c)=>($n||($n=function(){this.$a={}},$n.prototype={},Object.defineProperties($n.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},flags:{get:function(){return this.$a.flags},set:function(h){this.$a.flags=h}},position:{get:function(){return this.$a.position},set:function(h){this.$a.position=h}}})),a=Object.assign(new $n,a),c=Wo(c),a.fd=c,Z[c]=a),Do={open:a=>{a.Ha=Ln[a.node.rdev].Ha,a.Ha.open&&a.Ha.open(a)},Ta:()=>{throw new F(70)}},or=(a,c)=>{Ln[a]={Ha:c}},xi=(a,c)=>{var h=c==="/",w=!c;if(h&&ct)throw new F(10);if(!h&&!w){var x=pt(c,{rb:!1});if(c=x.path,x=x.node,x.Va)throw new F(10);if((x.mode&61440)!==16384)throw new F(54)}c={type:a,Kb:{},ub:c,Eb:[]},a=a.Ra(c),a.Ra=c,c.root=a,h?ct=a:x&&(x.Va=c,x.Ra&&x.Ra.Eb.push(c))},Bn=(a,c,h)=>{var w=pt(a,{parent:!0}).node;if(a=Ee(a),!a||a==="."||a==="..")throw new F(28);var x=Ao(w,a);if(x)throw new F(x);if(!w.Ga.ab)throw new F(63);return w.Ga.ab(w,a,c,h)},gr=(a,c)=>Bn(a,(c!==void 0?c:511)&1023|16384,0),Oi=(a,c,h)=>{typeof h>"u"&&(h=c,c=438),Bn(a,c|8192,h)},Fn=(a,c)=>{if(!Pe(a))throw new F(44);var h=pt(c,{parent:!0}).node;if(!h)throw new F(44);c=Ee(c);var w=Ao(h,c);if(w)throw new F(w);if(!h.Ga.symlink)throw new F(63);h.Ga.symlink(h,c,a)},Po=a=>{var c=pt(a,{parent:!0}).node;a=Ee(a);var h=sr(c,a),w=ou(c,a,!0);if(w)throw new F(w);if(!c.Ga.rmdir)throw new F(63);if(h.Va)throw new F(10);c.Ga.rmdir(c,a),To(h)},Lo=a=>{var c=pt(a,{parent:!0}).node;if(!c)throw new F(44);a=Ee(a);var h=sr(c,a),w=ou(c,a,!1);if(w)throw new F(w);if(!c.Ga.unlink)throw new F(63);if(h.Va)throw new F(10);c.Ga.unlink(c,a),To(h)},Mo=a=>{if(a=pt(a).node,!a)throw new F(44);if(!a.Ga.readlink)throw new F(28);return Pe(Mn(a.parent),a.Ga.readlink(a))},tn=(a,c)=>{if(a=pt(a,{Sa:!c}).node,!a)throw new F(44);if(!a.Ga.Pa)throw new F(63);return a.Ga.Pa(a)},Bo=a=>tn(a,!0),qi=(a,c)=>{if(a=typeof a=="string"?pt(a,{Sa:!0}).node:a,!a.Ga.Oa)throw new F(63);a.Ga.Oa(a,{mode:c&4095|a.mode&-4096,timestamp:Date.now()})},Fo=(a,c)=>{if(0>c)throw new F(28);if(a=typeof a=="string"?pt(a,{Sa:!0}).node:a,!a.Ga.Oa)throw new F(63);if((a.mode&61440)===16384)throw new F(31);if((a.mode&61440)!==32768)throw new F(28);var h=mt(a,"w");if(h)throw new F(h);a.Ga.Oa(a,{size:c,timestamp:Date.now()})},Cr=(a,c,h)=>{if(a==="")throw new F(44);if(typeof c=="string"){var w=iu[c];if(typeof w>"u")throw Error("Unknown file open mode: "+c);c=w}if(h=c&64?(typeof h>"u"?438:h)&4095|32768:0,typeof a=="object")var x=a;else{a=le(a);try{x=pt(a,{Sa:!(c&131072)}).node}catch{}}if(w=!1,c&64)if(x){if(c&128)throw new F(20)}else x=Bn(a,h,0),w=!0;if(!x)throw new F(44);if((x.mode&61440)===8192&&(c&=-513),c&65536&&(x.mode&61440)!==16384)throw new F(54);if(!w&&(h=x?(x.mode&61440)===40960?32:(x.mode&61440)===16384&&(su(c)!=="r"||c&512)?31:mt(x,su(c)):44))throw new F(h);return c&512&&!w&&Fo(x,0),c&=-131713,x=Ro({node:x,path:Mn(x),flags:c,seekable:!0,position:0,Ha:x.Ha,Ib:[],error:!1}),x.Ha.open&&x.Ha.open(x),!d.logReadFiles||c&1||(Qn||(Qn={}),a in Qn||(Qn[a]=1)),x},Ei=a=>{if(a.fd===null)throw new F(8);a.hb&&(a.hb=null);try{a.Ha.close&&a.Ha.close(a)}catch(c){throw c}finally{Z[a.fd]=null}a.fd=null},Ke=(a,c,h)=>{if(a.fd===null)throw new F(8);if(!a.seekable||!a.Ha.Ta)throw new F(70);if(h!=0&&h!=1&&h!=2)throw new F(28);a.position=a.Ha.Ta(a,c,h),a.Ib=[]},Un=(a,c,h,w,x)=>{if(0>w||0>x)throw new F(28);if(a.fd===null)throw new F(8);if((a.flags&2097155)===1)throw new F(8);if((a.node.mode&61440)===16384)throw new F(31);if(!a.Ha.read)throw new F(28);var L=typeof x<"u";if(!L)x=a.position;else if(!a.seekable)throw new F(70);return c=a.Ha.read(a,c,h,w,x),L||(a.position+=c),c},Ci=(a,c,h,w,x)=>{if(0>w||0>x)throw new F(28);if(a.fd===null)throw new F(8);if(!(a.flags&2097155))throw new F(8);if((a.node.mode&61440)===16384)throw new F(31);if(!a.Ha.write)throw new F(28);a.seekable&&a.flags&1024&&Ke(a,0,2);var L=typeof x<"u";if(!L)x=a.position;else if(!a.seekable)throw new F(70);return c=a.Ha.write(a,c,h,w,x,void 0),L||(a.position+=c),c},vn=a=>{var c,h=Cr(a,h||0);a=tn(a).size;var w=new Uint8Array(a);return Un(h,w,0,a,0),c=w,Ei(h),c},Ii=()=>{F||(F=function(a,c){this.node=c,this.Hb=function(h){this.Ka=h},this.Hb(a),this.message="FS error"},F.prototype=Error(),F.prototype.constructor=F,[44].forEach(a=>{gs[a]=new F(a),gs[a].stack="<generic error, no stack>"}))},Si,Ti=(a,c)=>{var h=0;return a&&(h|=365),c&&(h|=146),h},Rr=(a,c,h)=>{a=le("/dev/"+a);var w=Ti(!!c,!!h);Uo||(Uo=64);var x=Uo++<<8|0;or(x,{open:L=>{L.seekable=!1},close:()=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(L,B,Ne,Me)=>{for(var We=0,ot=0;ot<Me;ot++){try{var ur=c()}catch{throw new F(29)}if(ur===void 0&&We===0)throw new F(6);if(ur==null)break;We++,B[Ne+ot]=ur}return We&&(L.node.timestamp=Date.now()),We},write:(L,B,Ne,Me)=>{for(var We=0;We<Me;We++)try{h(B[Ne+We])}catch{throw new F(29)}return Me&&(L.node.timestamp=Date.now()),We}}),Oi(a,w,x)},Uo,Ye={},$n,Qn;function rn(a,c,h){if(c.charAt(0)==="/")return c;if(a=a===-100?"/":ar(a).path,c.length==0){if(!h)throw new F(44);return a}return le(a+"/"+c)}function jn(a,c,h){try{var w=a(c)}catch(x){if(x&&x.node&&le(c)!==le(Mn(x.node)))return-54;throw x}return ye[h>>2]=w.dev,ye[h+8>>2]=w.ino,ye[h+12>>2]=w.mode,Ue[h+16>>2]=w.nlink,ye[h+20>>2]=w.uid,ye[h+24>>2]=w.gid,ye[h+28>>2]=w.rdev,j=[w.size>>>0,(U=w.size,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[h+40>>2]=j[0],ye[h+44>>2]=j[1],ye[h+48>>2]=4096,ye[h+52>>2]=w.blocks,j=[Math.floor(w.atime.getTime()/1e3)>>>0,(U=Math.floor(w.atime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[h+56>>2]=j[0],ye[h+60>>2]=j[1],Ue[h+64>>2]=0,j=[Math.floor(w.mtime.getTime()/1e3)>>>0,(U=Math.floor(w.mtime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[h+72>>2]=j[0],ye[h+76>>2]=j[1],Ue[h+80>>2]=0,j=[Math.floor(w.ctime.getTime()/1e3)>>>0,(U=Math.floor(w.ctime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[h+88>>2]=j[0],ye[h+92>>2]=j[1],Ue[h+96>>2]=0,j=[w.ino>>>0,(U=w.ino,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[h+104>>2]=j[0],ye[h+108>>2]=j[1],0}var ki=void 0;function Ai(){return ki+=4,ye[ki-4>>2]}function ar(a){if(a=Z[a],!a)throw new F(8);return a}function bs(a){return Ue[a>>2]+4294967296*ye[a+4>>2]}function $o(a){var c=Lt(a)+1,h=Wi(c);return h&&wr(a,pe,h,c),h}function au(a,c,h){function w(Me){return(Me=Me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Me[1]:"GMT"}var x=new Date().getFullYear(),L=new Date(x,0,1),B=new Date(x,6,1);x=L.getTimezoneOffset();var Ne=B.getTimezoneOffset();ye[a>>2]=60*Math.max(x,Ne),ye[c>>2]=+(x!=Ne),a=w(L),c=w(B),a=$o(a),c=$o(c),Ne<x?(Ue[h>>2]=a,Ue[h+4>>2]=c):(Ue[h>>2]=c,Ue[h+4>>2]=a)}function Ns(a,c,h){Ns.Bb||(Ns.Bb=!0,au(a,c,h))}var Qo;Qo=ue?()=>{var a=process.hrtime();return 1e3*a[0]+a[1]/1e6}:()=>performance.now();var vs={};function jo(){if(!_s){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},c;for(c in vs)vs[c]===void 0?delete a[c]:a[c]=vs[c];var h=[];for(c in a)h.push(c+"="+a[c]);_s=h}return _s}var _s,Dr=void 0,xs=[];function Os(a,c){if(!Dr){Dr=new WeakMap;var h=he.length;if(Dr)for(var w=0;w<0+h;w++){var x=he.get(w);x&&Dr.set(x,w)}}if(Dr.has(a))return Dr.get(a);if(xs.length)h=xs.pop();else{try{he.grow(1)}catch(Ne){throw Ne instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ne}h=he.length-1}try{he.set(h,a)}catch(Ne){if(!(Ne instanceof TypeError))throw Ne;if(typeof WebAssembly.Function=="function"){w=WebAssembly.Function,x={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var L={parameters:[],results:c[0]=="v"?[]:[x[c[0]]]},B=1;B<c.length;++B)L.parameters.push(x[c[B]]);c=new w(L,a)}else{for(w=[1,96],x=c.slice(0,1),c=c.slice(1),L={i:127,p:127,j:126,f:125,d:124},B=c.length,128>B?w.push(B):w.push(B%128|128,B>>7),B=0;B<c.length;++B)w.push(L[c[B]]);x=="v"?w.push(0):w.push(1,L[x]),c=[0,97,115,109,1,0,0,0,1],x=w.length,128>x?c.push(x):c.push(x%128|128,x>>7),c.push.apply(c,w),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:a}}).exports.f}he.set(h,c)}return Dr.set(a,h),h}function Vn(a){Dr.delete(he.get(a)),xs.push(a)}function qs(a){var c=Wi(a.length);return a.subarray||a.slice||(a=new Uint8Array(a)),Ie.set(a,c),c}function uu(a,c,h,w){var x={string:We=>{var ot=0;if(We!=null&&We!==0){var ur=(We.length<<2)+1;ot=Pr(ur),wr(We,Ie,ot,ur)}return ot},array:We=>{var ot=Pr(We.length);return pe.set(We,ot),ot}};a=d["_"+a];var L=[],B=0;if(w)for(var Ne=0;Ne<w.length;Ne++){var Me=x[h[Ne]];Me?(B===0&&(B=zn()),L[Ne]=Me(w[Ne])):L[Ne]=w[Ne]}return h=a.apply(null,L),h=function(We){return B!==0&&Kn(B),c==="string"?tt(We):c==="boolean"?!!We:We}(h)}function Vo(a,c,h,w){a||(a=this),this.parent=a,this.Ra=a.Ra,this.Va=null,this.id=So++,this.name=c,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(Vo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(a){a?this.mode|=146:this.mode&=-147}}}),Ii(),lt=Array(4096),xi(de,"/"),gr("/tmp"),gr("/home"),gr("/home/web_user"),(()=>{gr("/dev"),or(259,{read:()=>0,write:(c,h,w,x)=>x}),Oi("/dev/null",259),Wr(1280,Zr),Wr(1536,en),Oi("/dev/tty",1280),Oi("/dev/tty1",1536);var a=je();Rr("random",a),Rr("urandom",a),gr("/dev/shm"),gr("/dev/shm/tmp")})(),(()=>{gr("/proc");var a=gr("/proc/self");gr("/proc/self/fd"),xi({Ra:()=>{var c=ko(a,"fd",16895,73);return c.Ga={lookup:(h,w)=>{var x=Z[+w];if(!x)throw new F(8);return h={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>x.path}},h.parent=h}},c}},"/proc/self/fd")})();var cu={a:function(a,c,h,w){_("Assertion failed: "+tt(a)+", at: "+[c?tt(c):"unknown filename",h,w?tt(w):"unknown function"])},h:function(a,c){try{return a=tt(a),qi(a,c),0}catch(h){if(typeof Ye>"u"||!(h instanceof F))throw h;return-h.Ka}},H:function(a,c,h){try{if(c=tt(c),c=rn(a,c),h&-8)return-28;var w=pt(c,{Sa:!0}).node;return w?(a="",h&4&&(a+="r"),h&2&&(a+="w"),h&1&&(a+="x"),a&&mt(w,a)?-2:0):-44}catch(x){if(typeof Ye>"u"||!(x instanceof F))throw x;return-x.Ka}},i:function(a,c){try{var h=Z[a];if(!h)throw new F(8);return qi(h.node,c),0}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return-w.Ka}},g:function(a){try{var c=Z[a];if(!c)throw new F(8);var h=c.node,w=typeof h=="string"?pt(h,{Sa:!0}).node:h;if(!w.Ga.Oa)throw new F(63);return w.Ga.Oa(w,{timestamp:Date.now()}),0}catch(x){if(typeof Ye>"u"||!(x instanceof F))throw x;return-x.Ka}},b:function(a,c,h){ki=h;try{var w=ar(a);switch(c){case 0:var x=Ai();return 0>x?-28:Ro(w,x).fd;case 1:case 2:return 0;case 3:return w.flags;case 4:return x=Ai(),w.flags|=x,0;case 5:return x=Ai(),_t[x+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ye[zo()>>2]=28,-1;default:return-28}}catch(L){if(typeof Ye>"u"||!(L instanceof F))throw L;return-L.Ka}},G:function(a,c){try{var h=ar(a);return jn(tn,h.path,c)}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return-w.Ka}},l:function(a,c,h){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return-61;var w=Z[a];if(!w)throw new F(8);if(!(w.flags&2097155))throw new F(28);return Fo(w.node,c),0}catch(x){if(typeof Ye>"u"||!(x instanceof F))throw x;return-x.Ka}},B:function(a,c){try{if(c===0)return-28;var h=Lt("/")+1;return c<h?-68:(wr("/",Ie,a,c),h)}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return-w.Ka}},E:function(a,c){try{return a=tt(a),jn(Bo,a,c)}catch(h){if(typeof Ye>"u"||!(h instanceof F))throw h;return-h.Ka}},y:function(a,c,h){try{return c=tt(c),c=rn(a,c),c=le(c),c[c.length-1]==="/"&&(c=c.substr(0,c.length-1)),gr(c,h),0}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return-w.Ka}},D:function(a,c,h,w){try{c=tt(c);var x=w&256;return c=rn(a,c,w&4096),jn(x?Bo:tn,c,h)}catch(L){if(typeof Ye>"u"||!(L instanceof F))throw L;return-L.Ka}},v:function(a,c,h,w){ki=w;try{c=tt(c),c=rn(a,c);var x=w?Ai():0;return Cr(c,h,x).fd}catch(L){if(typeof Ye>"u"||!(L instanceof F))throw L;return-L.Ka}},t:function(a,c,h,w){try{if(c=tt(c),c=rn(a,c),0>=w)return-28;var x=Mo(c),L=Math.min(w,Lt(x)),B=pe[h+L];return wr(x,Ie,h,w+1),pe[h+L]=B,L}catch(Ne){if(typeof Ye>"u"||!(Ne instanceof F))throw Ne;return-Ne.Ka}},s:function(a){try{return a=tt(a),Po(a),0}catch(c){if(typeof Ye>"u"||!(c instanceof F))throw c;return-c.Ka}},F:function(a,c){try{return a=tt(a),jn(tn,a,c)}catch(h){if(typeof Ye>"u"||!(h instanceof F))throw h;return-h.Ka}},p:function(a,c,h){try{return c=tt(c),c=rn(a,c),h===0?Lo(c):h===512?Po(c):_("Invalid flags passed to unlinkat"),0}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return-w.Ka}},o:function(a,c,h){try{if(c=tt(c),c=rn(a,c,!0),h){var w=bs(h),x=ye[h+8>>2];L=1e3*w+x/1e6,h+=16,w=bs(h),x=ye[h+8>>2],B=1e3*w+x/1e6}else var L=Date.now(),B=L;a=L;var Ne=pt(c,{Sa:!0}).node;return Ne.Ga.Oa(Ne,{timestamp:Math.max(a,B)}),0}catch(Me){if(typeof Ye>"u"||!(Me instanceof F))throw Me;return-Me.Ka}},e:function(){return Date.now()},j:function(a,c){a=new Date(1e3*bs(a)),ye[c>>2]=a.getSeconds(),ye[c+4>>2]=a.getMinutes(),ye[c+8>>2]=a.getHours(),ye[c+12>>2]=a.getDate(),ye[c+16>>2]=a.getMonth(),ye[c+20>>2]=a.getFullYear()-1900,ye[c+24>>2]=a.getDay();var h=new Date(a.getFullYear(),0,1);ye[c+28>>2]=(a.getTime()-h.getTime())/864e5|0,ye[c+36>>2]=-(60*a.getTimezoneOffset());var w=new Date(a.getFullYear(),6,1).getTimezoneOffset();h=h.getTimezoneOffset(),ye[c+32>>2]=(w!=h&&a.getTimezoneOffset()==Math.min(h,w))|0},w:function(a,c,h,w,x,L){try{var B=ar(w);if(c&2&&!(h&2)&&(B.flags&2097155)!==2)throw new F(2);if((B.flags&2097155)===1)throw new F(2);if(!B.Ha.bb)throw new F(43);var Ne=B.Ha.bb(B,a,x,c,h),Me=Ne.Fb;return ye[L>>2]=Ne.vb,Me}catch(We){if(typeof Ye>"u"||!(We instanceof F))throw We;return-We.Ka}},x:function(a,c,h,w,x,L){try{var B=ar(x);if(h&2){var Ne=Ie.slice(a,a+c);B&&B.Ha.cb&&B.Ha.cb(B,Ne,L,c,w)}}catch(Me){if(typeof Ye>"u"||!(Me instanceof F))throw Me;return-Me.Ka}},n:Ns,q:function(){return 2147483648},d:Qo,c:function(a){var c=Ie.length;if(a>>>=0,2147483648<a)return!1;for(var h=1;4>=h;h*=2){var w=c*(1+.2/h);w=Math.min(w,a+100663296);var x=Math;w=Math.max(a,w),x=x.min.call(x,2147483648,w+(65536-w%65536)%65536);e:{try{qr.grow(x-it.byteLength+65535>>>16),ws();var L=1;break e}catch{}L=void 0}if(L)return!0}return!1},z:function(a,c){var h=0;return jo().forEach(function(w,x){var L=c+h;for(x=Ue[a+4*x>>2]=L,L=0;L<w.length;++L)pe[x++>>0]=w.charCodeAt(L);pe[x>>0]=0,h+=w.length+1}),0},A:function(a,c){var h=jo();Ue[a>>2]=h.length;var w=0;return h.forEach(function(x){w+=x.length+1}),Ue[c>>2]=w,0},f:function(a){try{var c=ar(a);return Ei(c),0}catch(h){if(typeof Ye>"u"||!(h instanceof F))throw h;return h.Ka}},m:function(a,c){try{var h=ar(a);return pe[c>>0]=h.tty?2:(h.mode&61440)===16384?3:(h.mode&61440)===40960?7:4,0}catch(w){if(typeof Ye>"u"||!(w instanceof F))throw w;return w.Ka}},u:function(a,c,h,w){try{e:{var x=ar(a);a=c;for(var L=c=0;L<h;L++){var B=Ue[a>>2],Ne=Ue[a+4>>2];a+=8;var Me=Un(x,pe,B,Ne);if(0>Me){var We=-1;break e}if(c+=Me,Me<Ne)break}We=c}return Ue[w>>2]=We,0}catch(ot){if(typeof Ye>"u"||!(ot instanceof F))throw ot;return ot.Ka}},k:function(a,c,h,w,x){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return 61;var L=ar(a);return Ke(L,c,w),j=[L.position>>>0,(U=L.position,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],ye[x>>2]=j[0],ye[x+4>>2]=j[1],L.hb&&c===0&&w===0&&(L.hb=null),0}catch(B){if(typeof Ye>"u"||!(B instanceof F))throw B;return B.Ka}},C:function(a){try{var c=ar(a);return c.Ha&&c.Ha.fsync?c.Ha.fsync(c):0}catch(h){if(typeof Ye>"u"||!(h instanceof F))throw h;return h.Ka}},r:function(a,c,h,w){try{e:{var x=ar(a);a=c;for(var L=c=0;L<h;L++){var B=Ue[a>>2],Ne=Ue[a+4>>2];a+=8;var Me=Ci(x,pe,B,Ne);if(0>Me){var We=-1;break e}c+=Me}We=c}return Ue[w>>2]=We,0}catch(ot){if(typeof Ye>"u"||!(ot instanceof F))throw ot;return ot.Ka}}};(function(){function a(x){d.asm=x.exports,qr=d.asm.I,ws(),he=d.asm.Aa,Yr.unshift(d.asm.J),ir--,d.monitorRunDependencies&&d.monitorRunDependencies(ir),ir==0&&xt&&(x=xt,xt=null,x())}function c(x){a(x.instance)}function h(x){return te().then(function(L){return WebAssembly.instantiate(L,w)}).then(function(L){return L}).then(x,function(L){Le("failed to asynchronously prepare wasm: "+L),_(L)})}var w={a:cu};if(ir++,d.monitorRunDependencies&&d.monitorRunDependencies(ir),d.instantiateWasm)try{return d.instantiateWasm(w,a)}catch(x){return Le("Module.instantiateWasm callback failed with error: "+x),!1}return function(){return dt||typeof WebAssembly.instantiateStreaming!="function"||q()||D.startsWith("file://")||ue||typeof fetch!="function"?h(c):fetch(D,{credentials:"same-origin"}).then(function(x){return WebAssembly.instantiateStreaming(x,w).then(c,function(L){return Le("wasm streaming compile failed: "+L),Le("falling back to ArrayBuffer instantiation"),h(c)})})}(),{}})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.J).apply(null,arguments)},d._sqlite3_free=function(){return(d._sqlite3_free=d.asm.K).apply(null,arguments)},d._sqlite3_value_double=function(){return(d._sqlite3_value_double=d.asm.L).apply(null,arguments)},d._sqlite3_value_text=function(){return(d._sqlite3_value_text=d.asm.M).apply(null,arguments)};var zo=d.___errno_location=function(){return(zo=d.___errno_location=d.asm.N).apply(null,arguments)};d._sqlite3_prepare_v2=function(){return(d._sqlite3_prepare_v2=d.asm.O).apply(null,arguments)},d._sqlite3_step=function(){return(d._sqlite3_step=d.asm.P).apply(null,arguments)},d._sqlite3_finalize=function(){return(d._sqlite3_finalize=d.asm.Q).apply(null,arguments)},d._sqlite3_reset=function(){return(d._sqlite3_reset=d.asm.R).apply(null,arguments)},d._sqlite3_value_int=function(){return(d._sqlite3_value_int=d.asm.S).apply(null,arguments)},d._sqlite3_clear_bindings=function(){return(d._sqlite3_clear_bindings=d.asm.T).apply(null,arguments)},d._sqlite3_value_blob=function(){return(d._sqlite3_value_blob=d.asm.U).apply(null,arguments)},d._sqlite3_value_bytes=function(){return(d._sqlite3_value_bytes=d.asm.V).apply(null,arguments)},d._sqlite3_value_type=function(){return(d._sqlite3_value_type=d.asm.W).apply(null,arguments)},d._sqlite3_result_blob=function(){return(d._sqlite3_result_blob=d.asm.X).apply(null,arguments)},d._sqlite3_result_double=function(){return(d._sqlite3_result_double=d.asm.Y).apply(null,arguments)},d._sqlite3_result_error=function(){return(d._sqlite3_result_error=d.asm.Z).apply(null,arguments)},d._sqlite3_result_int=function(){return(d._sqlite3_result_int=d.asm._).apply(null,arguments)},d._sqlite3_result_int64=function(){return(d._sqlite3_result_int64=d.asm.$).apply(null,arguments)},d._sqlite3_result_null=function(){return(d._sqlite3_result_null=d.asm.aa).apply(null,arguments)},d._sqlite3_result_text=function(){return(d._sqlite3_result_text=d.asm.ba).apply(null,arguments)},d._sqlite3_sql=function(){return(d._sqlite3_sql=d.asm.ca).apply(null,arguments)},d._sqlite3_aggregate_context=function(){return(d._sqlite3_aggregate_context=d.asm.da).apply(null,arguments)},d._sqlite3_column_count=function(){return(d._sqlite3_column_count=d.asm.ea).apply(null,arguments)},d._sqlite3_data_count=function(){return(d._sqlite3_data_count=d.asm.fa).apply(null,arguments)},d._sqlite3_column_blob=function(){return(d._sqlite3_column_blob=d.asm.ga).apply(null,arguments)},d._sqlite3_column_bytes=function(){return(d._sqlite3_column_bytes=d.asm.ha).apply(null,arguments)},d._sqlite3_column_double=function(){return(d._sqlite3_column_double=d.asm.ia).apply(null,arguments)},d._sqlite3_column_text=function(){return(d._sqlite3_column_text=d.asm.ja).apply(null,arguments)},d._sqlite3_column_type=function(){return(d._sqlite3_column_type=d.asm.ka).apply(null,arguments)},d._sqlite3_column_name=function(){return(d._sqlite3_column_name=d.asm.la).apply(null,arguments)},d._sqlite3_bind_blob=function(){return(d._sqlite3_bind_blob=d.asm.ma).apply(null,arguments)},d._sqlite3_bind_double=function(){return(d._sqlite3_bind_double=d.asm.na).apply(null,arguments)},d._sqlite3_bind_int=function(){return(d._sqlite3_bind_int=d.asm.oa).apply(null,arguments)},d._sqlite3_bind_text=function(){return(d._sqlite3_bind_text=d.asm.pa).apply(null,arguments)},d._sqlite3_bind_parameter_index=function(){return(d._sqlite3_bind_parameter_index=d.asm.qa).apply(null,arguments)},d._sqlite3_normalized_sql=function(){return(d._sqlite3_normalized_sql=d.asm.ra).apply(null,arguments)},d._sqlite3_errmsg=function(){return(d._sqlite3_errmsg=d.asm.sa).apply(null,arguments)},d._sqlite3_exec=function(){return(d._sqlite3_exec=d.asm.ta).apply(null,arguments)},d._sqlite3_changes=function(){return(d._sqlite3_changes=d.asm.ua).apply(null,arguments)},d._sqlite3_close_v2=function(){return(d._sqlite3_close_v2=d.asm.va).apply(null,arguments)},d._sqlite3_create_function_v2=function(){return(d._sqlite3_create_function_v2=d.asm.wa).apply(null,arguments)},d._sqlite3_open=function(){return(d._sqlite3_open=d.asm.xa).apply(null,arguments)};var Wi=d._malloc=function(){return(Wi=d._malloc=d.asm.ya).apply(null,arguments)},Ri=d._free=function(){return(Ri=d._free=d.asm.za).apply(null,arguments)};d._RegisterExtensionFunctions=function(){return(d._RegisterExtensionFunctions=d.asm.Ba).apply(null,arguments)};var Ko=d._emscripten_builtin_memalign=function(){return(Ko=d._emscripten_builtin_memalign=d.asm.Ca).apply(null,arguments)},zn=d.stackSave=function(){return(zn=d.stackSave=d.asm.Da).apply(null,arguments)},Kn=d.stackRestore=function(){return(Kn=d.stackRestore=d.asm.Ea).apply(null,arguments)},Pr=d.stackAlloc=function(){return(Pr=d.stackAlloc=d.asm.Fa).apply(null,arguments)};d.UTF8ToString=tt,d.stackAlloc=Pr,d.stackSave=zn,d.stackRestore=Kn,d.cwrap=function(a,c,h,w){h=h||[];var x=h.every(L=>L==="number"||L==="boolean");return c!=="string"&&x&&!w?d["_"+a]:function(){return uu(a,c,h,arguments)}};var Di;xt=function a(){Di||Ho(),Di||(xt=a)};function Ho(){function a(){if(!Di&&(Di=!0,d.calledRun=!0,!Pt)){if(d.noFSInit||Si||(Si=!0,Ii(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?Rr("stdin",d.stdin):Fn("/dev/tty","/dev/stdin"),d.stdout?Rr("stdout",null,d.stdout):Fn("/dev/tty","/dev/stdout"),d.stderr?Rr("stderr",null,d.stderr):Fn("/dev/tty1","/dev/stderr"),Cr("/dev/stdin",0),Cr("/dev/stdout",1),Cr("/dev/stderr",1)),_i=!1,re(Yr),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var c=d.postRun.shift();Xr.unshift(c)}re(Xr)}}if(!(0<ir)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Ge();re(Ae),0<ir||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),a()},1)):a())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Ho(),b}),r)};t.exports=i,t.exports.default=i})(gm);var Jb=gm.exports;const Gb=Vb(Jb),Yb="/assets/sql-wasm-18fc45ef.wasm",Xb="sqlitevfs",Ls=new Map,Zb=2048,eN=65536;class tN{constructor(e){be(this,"_data");be(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const i=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(i),i.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,i=Math.min(eN,Math.max(Zb,this._data.length)),o=new Uint8Array(this._data.length+Math.max(i,r));o.set(this._data),this._data=o}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const rN=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Zf=new Promise((t,e)=>{const r=rN.open(Xb,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function nN(t){const e=await Zf,r=await new Promise((i,o)=>{const y=e.transaction("files","readonly").objectStore("files").get(t);y.onsuccess=()=>i(y.result),y.onerror=()=>o(y.error)});if(r&&!Ls.has(t)){const i=new tN(r.data);return Ls.set(t,i),i}else return Ls.has(t)?Ls.get(t):null}async function iN(t,e){const r=await Zf;await new Promise((i,o)=>{const y=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});y.onsuccess=()=>i(!0),y.onerror=()=>o(y.error)})}async function rd(t){const e=await Zf;await new Promise((r,i)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>i(l.error)})}async function sN(t,e){if(await iN(t,e),Ls.has(t)){const r=Ls.get(t);r.truncate(0),r.write(0,e)}}var oN=class extends zf{constructor(e){super();be(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:i,...o}=r,l=this.serializer(i);return i===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...o,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},bm=t=>{if(Nm(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},nd=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,aN=t=>{if(Nm(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(nd.test(t))return new Date(t);try{return JSON.parse(t,(e,r)=>typeof r=="string"&&nd.exec(r)?new Date(r):r)}catch{return t}}};function Nm(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var uN=class{constructor(t={}){be(this,"transformer");be(this,"deserializer");be(this,"skipNodeSet");be(this,"ctx");const{deserializer:e=aN,serializer:r=bm,skipNodeKind:i=[]}=t;this.transformer=new oN(r),this.deserializer=e,i.length&&(this.skipNodeSet=new Set(i),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:t.rows.map(r=>Object.fromEntries(Object.entries(r).map(([i,o])=>[i,this.deserializer(o)])))}}};function id(t){const{logger:e,merge:r,queryNode:i}=t;return o=>{const{level:l,queryDurationMillis:y,query:{parameters:b,sql:O,query:d}}=o,T=l==="error"?o.error:void 0;let W=O.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&b.forEach(G=>{W=W.replace("?",typeof G=="string"?G:JSON.stringify(G))});const ee={sql:W,params:b,duration:y,error:T};i&&(ee.queryNode=d),e(ee)}}async function cN(t){const{rows:e}=await t.executeQuery(wn.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function sd(t,e){if(e)return await t.executeQuery(wn.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(wn.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function lN(t){return`__pre_${t}`}function fN(t,e=r=>r){return{setParam:r=>{let i;return(o,l)=>{if(!i){const{parameters:y,sql:b,query:O}=r({qb:t,param:lN}).compile();i={sql:b,query:l?.(O)||{kind:O.kind},parameters:y}}return{...i,parameters:i.parameters.map(y=>typeof y=="string"&&y.startsWith("__pre_")?e(o[y.slice(6)]):y)}}}}}async function hN(t,e,r){const i=r||`sp_${Date.now()%1e8}`;await Tt`savepoint ${Tt.raw(i)}`.execute(t);try{const o=await e(t);return await Tt`release savepoint ${Tt.raw(i)}`.execute(t),o}catch(o){throw await Tt`rollback to savepoint ${Tt.raw(i)}`.execute(t),o}}var dN=class extends Error{constructor(){super("db file maybe broken")}};function pN(t){return t.toOperationNode().kind==="SelectQueryNode"}var mN=class{constructor(t){be(this,"kysely");be(this,"trxCount",0);be(this,"trx");be(this,"logger");be(this,"serializer",bm);const{dialect:e,logger:r,onQuery:i,plugins:o=[],serializerPluginOptions:l}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),o.push(new uN(l));let y;i===!0?y=id({logger:this.logger?.debug||console.log,merge:!0}):i&&(y=id(i)),this.kysely=new Ra({dialect:e,log:y,plugins:o})}async updateTableSchema(t,e){try{if(e&&!await cN(this.kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new dN};await t(this.kysely,this.logger)}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}return this.logger?.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await hN(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trxCount--)):await this.kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.getDB()).execute():await this.getDB().executeQuery(t)}async executeTakeFirst(t){let e=t(this.getDB());return pN(e)&&(e=e.limit(1)),await e.executeTakeFirstOrThrow()}precompile(t){return this.logger?.debug?.("precompile"),fN(t(this.kysely),this.serializer)}async raw(t,e){return typeof t=="string"?await this.getDB().executeQuery(wn.raw(t,e)):await t.execute(this.getDB())}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},vm="__TIME_TRIGGER__";function yN(t,e){const{create:r,update:i}=e?.timeTrigger||{},o={type:"date",defaultTo:vm};return r===!0?t.createAt=o:r&&(t[r]=o),i===!0?t.updateAt={...o,notNull:0}:i&&(t[i]={...o,notNull:0}),{columns:t,...e}}function _m(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function pf(t){return Array.isArray(t)?t:[t]}function wN(t){return typeof t=="function"}async function Du(t,e){await t.schema.dropTable(e).execute()}async function od(t,e,r){const{index:i,...o}=r;await t.transaction().execute(async l=>{const y=await mf(l,e,o);await Om(l,e,y),await xm(l,e,i)})}async function xm(t,e,r){for(const i of r||[]){const o=pf(i);await t.schema.createIndex(`idx_${e}_${o.join("_")}`).on(e).columns(o).ifNotExists().execute()}}async function mf(t,e,{columns:r,primary:i,timeTrigger:o,unique:l},y=!1){const b=o?{triggerKey:"rowid",update:void 0}:void 0;let O=!1,d=t.schema.createTable(e);y&&(d=d.temporary());for(const[T,W]of Object.entries(r)){let ee="text";const{type:G,notNull:ue,defaultTo:N}=W,E=_m(G);ee=E.dataType,d=d.addColumn(T,ee,g=>E.isIncrements?(O=!0,b&&(b.triggerKey=T),g.autoIncrement().primaryKey()):N===vm?(b&&ue===0&&(b.update=T),g.defaultTo(Tt`CURRENT_TIMESTAMP`)):(ue===!0&&(g=g.notNull()),N!==void 0&&(g=g.defaultTo(wN(N)?N(Tt):N)),g))}if(!O&&i){const T=pf(i);d=d.addPrimaryKeyConstraint(`pk#${T.join("#")}`,T)}for(const T of l||[]){const W=pf(T);d=d.addUniqueConstraint(`un#${W.join("#")}`,W)}return await d.ifNotExists().execute(),b}async function Om(t,e,r){if(!r||!r.update)return;const{triggerKey:i,update:o}=r,l=`tgr_${e}_${o}`;await Tt`create trigger if not exists ${Tt.ref(l)}
after update
on ${Tt.table(e)}
begin
  update ${Tt.table(e)}
  set ${Tt.ref(o)} = CURRENT_TIMESTAMP
  where ${Tt.ref(i)} = NEW.${Tt.ref(i)};
end`.execute(t)}function gN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,i,o]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:i,primary:void 0,unique:[]},y=o.matchAll(r);for(const b of y){const[,O,d,T]=b;if(O.startsWith("pk#")){const[,...W]=O.split("#");l.primary=W}else if(O.startsWith("un#")){const[,...W]=O.split("#");l.unique.push(W)}else l.columns[O]={type:d,notNull:!!T}}return l}async function bN(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",lm).where("name","!=",fm).where("name","not like","sqlite_%").$if(!!e.length,o=>o.where(l=>l.and(e.map(y=>l("name","not like",`${y}%`))))).select(["name","sql","type"]).$castTo().execute(),i={existTables:{},indexList:[],triggerList:[]};for(const{name:o,sql:l,type:y}of r)l&&(y==="table"?i.existTables[o]=gN(l):y==="index"?i.indexList.push(o):i.triggerList.push(o));return i}async function NN(t,e,r={},i){const{reserveOldData:o,truncateIfExists:l=[],log:y,version:{current:b,skipSyncWhenSame:O}={},excludeTablePrefix:d,afterUpdate:T}=r;if(b){if(O&&b===await sd(t))return;await sd(t,b)}const W=g=>y&&i?.debug(g),{existTables:ee,indexList:G,triggerList:ue}=await bN(t,d);W("====== update tables start ======");const N=new Set(Array.isArray(l)?l:l?Object.keys(ee):[]);for(const g of G)await t.schema.dropIndex(g).ifExists().execute();for(const g of ue)await Tt`drop trigger if exists ${Tt.ref(g)}`.execute(t);for(const[g,C]of Object.entries(ee))g in e?(W(`diff table: ${g}`),await E(g,C,e[g])):(W(`remove table: ${g}`),await Du(t,g));for(const[g,C]of Object.entries(e))g in ee||(W(`create table: ${g}`),await od(t,g,C));W("======= after update hook ======="),await T?.(t),W("======= update tables end =======");async function E(g,C,S){if(N.has(g)){await t.transaction().execute(async Le=>{await Du(Le,g),await od(Le,g,S),W("clear and sync structure")});return}const{index:X,...ne}=S,we=vN(C.columns,S.columns);if(we.length===Object.keys(C.columns).length){W("same table structure, skip");return}W("different table structure, update"),await t.transaction().execute(async Le=>{const dt=`_temp_${g}`;await mf(Le,dt,C,!0),await Le.insertInto(dt).expression(Pt=>Pt.selectFrom(g).selectAll()).execute(),await Du(Le,g);const qr=await mf(Le,g,ne);we.length&&await Le.insertInto(g).columns(we).expression(Pt=>Pt.selectFrom(dt).select(we)).execute(),await xm(Le,g,X),await Om(Le,g,qr),!o&&await Du(Le,dt)}).then(()=>W(`restore columns: ${we}`)).catch(Le=>i?.error(`fail to sync ${g}`,Le))}}function vN(t,e){const r=[];for(const[i,o]of Object.entries(e))if(i in t){const{type:l,notNull:y=!1}=t[i];_m(o.type).dataType===l&&(o.notNull||!1)===y&&r.push(i)}return r}function _N(t,e={}){const{log:r}=e;return async(i,o)=>{await NN(i,t,e,r?o:void 0)}}const xN={test:yN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function eh(t){const e=new mN({dialect:t}),r=await e.updateTableSchema(_N(xN));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let i=0;i<10;i++)await e.transaction(async()=>{await e.transaction(async()=>{if(i>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(o=>o.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(i=>i.selectFrom("test").selectAll()).then(async i=>(await e.destroy(),console.log(i),i))}const ON=new Ub({async database(){const t=await Gb({locateFile:()=>Yb});return new t.Database(await nN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),sN("sqljs",t)},isThrottle:!0}});function qN(){const t=_y();function e(){eh(ON).then(r=>{t.value=r})}return{result:t,run:e}}function EN(){return new Worker("/assets/sqljsWorker-720be1cd.js",{type:"module"})}function CN(){return new Worker("/assets/officialWasmWorker-efb31ebe.js",{type:"module"})}var ze=0,IN=5,bt=10,qm=12,Em=14,Fi=21,Wl=25,SN=27,yf=100,TN=101,kN=3850,AN=522,WN=1,RN=2,Cm=4,DN=8,As=0,Qi=1,zu=2,PN=3,Ku=4,LN=512,MN=1024,BN=2048,FN=16384,ad=1,ud=2,cd=3,ld=4,fd=5,hd=0x7fffffffffffffffn,dd=-0x8000000000000000n,xn=class extends Error{constructor(t,e){super(t),this.code=e}},Ts=!0;function UN(t){const e={},r=t._getSqliteFree(),i=t._malloc(8),o=[i,i+4];function l(N){if(typeof N!="string")return 0;const E=t.lengthBytesUTF8(N),g=t._sqlite3_malloc(E+1);return t.stringToUTF8(N,g,E+1),g}function y(N,E){return BigInt(E)<<32n|BigInt(N)&0xffffffffn}const b=function(){const N=BigInt(Number.MAX_SAFE_INTEGER)>>32n,E=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(g,C){return C>N||C<E?y(g,C):C*4294967296+(g&2147483647)-(g&2147483648)}}(),O=new Set;function d(N){if(!O.has(N))throw new xn("not a database",Fi)}const T=new Map;function W(N){if(!T.has(N))throw new xn("not a statement",Fi)}e.bind_collection=function(N,E){W(N);const g=Array.isArray(E),C=e.bind_parameter_count(N);for(let S=1;S<=C;++S){const X=g?S-1:e.bind_parameter_name(N,S),ne=E[X];ne!==void 0&&e.bind(N,S,ne)}return ze},e.bind=function(N,E,g){switch(W(N),typeof g){case"number":return g===(g|0)?e.bind_int(N,E,g):e.bind_double(N,E,g);case"string":return e.bind_text(N,E,g);default:return g instanceof Uint8Array||Array.isArray(g)?e.bind_blob(N,E,g):g===null?e.bind_null(N,E):typeof g=="bigint"?e.bind_int64(N,E,g):g===void 0?SN:(console.warn("unknown binding converted to null",g),e.bind_null(N,E))}},e.bind_blob=function(){const N="sqlite3_bind_blob",E=t.cwrap(N,...Oe("nnnnn:n"));return function(g,C,S){W(g);const X=S.byteLength??S.length,ne=t._sqlite3_malloc(X);t.HEAPU8.subarray(ne).set(S);const we=E(g,C,ne,X,r);return ue(N,we,T.get(g))}}(),e.bind_parameter_count=function(){const N="sqlite3_bind_parameter_count",E=t.cwrap(N,...Oe("n:n"));return function(g){return W(g),E(g)}}(),e.bind_double=function(){const N="sqlite3_bind_double",E=t.cwrap(N,...Oe("nnn:n"));return function(g,C,S){W(g);const X=E(g,C,S);return ue(N,X,T.get(g))}}(),e.bind_int=function(){const N="sqlite3_bind_int",E=t.cwrap(N,...Oe("nnn:n"));return function(g,C,S){if(W(g),S>2147483647||S<-2147483648)return Wl;const X=E(g,C,S);return ue(N,X,T.get(g))}}(),e.bind_int64=function(){const N="sqlite3_bind_int64",E=t.cwrap(N,...Oe("nnnn:n"));return function(g,C,S){if(W(g),S>hd||S<dd)return Wl;const X=S&0xffffffffn,ne=S>>32n,we=E(g,C,Number(X),Number(ne));return ue(N,we,T.get(g))}}(),e.bind_null=function(){const N="sqlite3_bind_null",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){W(g);const S=E(g,C);return ue(N,S,T.get(g))}}(),e.bind_parameter_name=function(){const N="sqlite3_bind_parameter_name",E=t.cwrap(N,...Oe("n:s"));return function(g,C){return W(g),E(g,C)}}(),e.bind_text=function(){const N="sqlite3_bind_text",E=t.cwrap(N,...Oe("nnnnn:n"));return function(g,C,S){W(g);const X=l(S),ne=E(g,C,X,-1,r);return ue(N,ne,T.get(g))}}(),e.changes=function(){const N="sqlite3_changes",E=t.cwrap(N,...Oe("n:n"));return function(g){return d(g),E(g)}}(),e.close=function(){const N="sqlite3_close",E=t.cwrap(N,...Oe("n:n"),{async:Ts});return async function(g){d(g);const C=await E(g);return O.delete(g),ue(N,C,g)}}(),e.column=function(N,E){W(N);const g=e.column_type(N,E);switch(g){case ld:return e.column_blob(N,E);case ud:return e.column_double(N,E);case ad:const C=e.column_int(N,E),S=t.getTempRet0();return b(C,S);case fd:return null;case cd:return e.column_text(N,E);default:throw new xn("unknown type",g)}},e.column_blob=function(){const N="sqlite3_column_blob",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){W(g);const S=e.column_bytes(g,C),X=E(g,C);return t.HEAPU8.subarray(X,X+S)}}(),e.column_bytes=function(){const N="sqlite3_column_bytes",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){return W(g),E(g,C)}}(),e.column_count=function(){const N="sqlite3_column_count",E=t.cwrap(N,...Oe("n:n"));return function(g){return W(g),E(g)}}(),e.column_double=function(){const N="sqlite3_column_double",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){return W(g),E(g,C)}}(),e.column_int=function(){const N="sqlite3_column_int64",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){return W(g),E(g,C)}}(),e.column_int64=function(){const N="sqlite3_column_int64",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){W(g);const S=E(g,C),X=t.getTempRet0();return y(S,X)}}(),e.column_name=function(){const N="sqlite3_column_name",E=t.cwrap(N,...Oe("nn:s"));return function(g,C){return W(g),E(g,C)}}(),e.column_names=function(N){const E=[],g=e.column_count(N);for(let C=0;C<g;++C)E.push(e.column_name(N,C));return E},e.column_text=function(){const N="sqlite3_column_text",E=t.cwrap(N,...Oe("nn:s"));return function(g,C){return W(g),E(g,C)}}(),e.column_type=function(){const N="sqlite3_column_type",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){return W(g),E(g,C)}}(),e.create_function=function(N,E,g,C,S,X,ne,we){if(d(N),X&&!ne&&!we){const Le=t.createFunction(N,E,g,C,S,X);return ue("sqlite3_create_function",Le,N)}if(!X&&ne&&we){const Le=t.createAggregate(N,E,g,C,S,ne,we);return ue("sqlite3_create_function",Le,N)}throw new xn("invalid function combination",Fi)},e.create_module=function(N,E,g,C){d(N);const S=t.createModule(N,E,g,C);return ue("sqlite3_create_module",S,N)},e.data_count=function(){const N="sqlite3_data_count",E=t.cwrap(N,...Oe("n:n"));return function(g){return W(g),E(g)}}(),e.declare_vtab=function(){const N="sqlite3_declare_vtab",E=t.cwrap(N,...Oe("ns:n"));return function(g,C){const S=E(g,C);return ue("sqlite3_declare_vtab",S)}}(),e.exec=async function(N,E,g){for await(const C of e.statements(N,E)){let S;for(;await e.step(C)===yf;)if(g){S=S??e.column_names(C);const X=e.row(C);await g(X,S)}}return ze},e.finalize=function(){const N="sqlite3_finalize",E=t.cwrap(N,...Oe("n:n"),{async:Ts});return async function(g){if(!T.has(g))return Fi;const C=await E(g);return T.get(g),T.delete(g),C}}(),e.get_autocommit=function(){const N="sqlite3_get_autocommit",E=t.cwrap(N,...Oe("n:n"));return function(g){return E(g)}}(),e.libversion=function(){const N="sqlite3_libversion",E=t.cwrap(N,...Oe(":s"));return function(){return E()}}(),e.libversion_number=function(){const N="sqlite3_libversion_number",E=t.cwrap(N,...Oe(":n"));return function(){return E()}}(),e.limit=function(){const N="sqlite3_limit",E=t.cwrap(N,...Oe("nnn:n"));return function(g,C,S){return E(g,C,S)}}(),e.open_v2=function(){const N="sqlite3_open_v2",E=t.cwrap(N,...Oe("snnn:n"),{async:Ts});return async function(g,C,S){C=C||Cm|RN,S=l(S);const X=await E(g,o[0],C,S),ne=t.getValue(o[0],"*");return O.add(ne),t._sqlite3_free(S),t.ccall("RegisterExtensionFunctions","void",["number"],[ne]),ue(N,X),ne}}(),e.prepare_v2=function(){const N="sqlite3_prepare_v2",E=t.cwrap(N,...Oe("nnnnn:n"),{async:Ts});return async function(g,C){const S=await E(g,C,-1,o[0],o[1]);ue(N,S,g);const X=t.getValue(o[0],"*");return X?(T.set(X,g),{stmt:X,sql:t.getValue(o[1],"*")}):null}}(),e.progress_handler=function(N,E,g,C){d(N),t.progressHandler(N,E,g,C)},e.reset=function(){const N="sqlite3_reset",E=t.cwrap(N,...Oe("n:n"),{async:Ts});return async function(g){W(g);const C=await E(g);return ue(N,C,T.get(g))}}(),e.result=function(N,E){switch(typeof E){case"number":E===(E|0)?e.result_int(N,E):e.result_double(N,E);break;case"string":e.result_text(N,E);break;default:if(E instanceof Uint8Array||Array.isArray(E))e.result_blob(N,E);else if(E===null)e.result_null(N);else{if(typeof E=="bigint")return e.result_int64(N,E);console.warn("unknown result converted to null",E),e.result_null(N)}break}},e.result_blob=function(){const N="sqlite3_result_blob",E=t.cwrap(N,...Oe("nnnn:n"));return function(g,C){const S=C.byteLength??C.length,X=t._sqlite3_malloc(S);t.HEAPU8.subarray(X).set(C),E(g,X,S,r)}}(),e.result_double=function(){const N="sqlite3_result_double",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){E(g,C)}}(),e.result_int=function(){const N="sqlite3_result_int",E=t.cwrap(N,...Oe("nn:n"));return function(g,C){E(g,C)}}(),e.result_int64=function(){const N="sqlite3_result_int64",E=t.cwrap(N,...Oe("nnn:n"));return function(g,C){if(C>hd||C<dd)return Wl;const S=C&0xffffffffn,X=C>>32n;E(g,Number(S),Number(X))}}(),e.result_null=function(){const N="sqlite3_result_null",E=t.cwrap(N,...Oe("n:n"));return function(g){E(g)}}(),e.result_text=function(){const N="sqlite3_result_text",E=t.cwrap(N,...Oe("nnnn:n"));return function(g,C){const S=l(C);E(g,S,-1,r)}}(),e.row=function(N){const E=[],g=e.data_count(N);for(let C=0;C<g;++C){const S=e.column(N,C);E.push(S?.buffer===t.HEAPU8.buffer?S.slice():S)}return E},e.set_authorizer=function(N,E,g){d(N);const C=t.setAuthorizer(N,E,g);return ue("sqlite3_set_authorizer",C,N)},e.sql=function(){const N="sqlite3_sql",E=t.cwrap(N,...Oe("n:s"));return function(g){return W(g),E(g)}}(),e.statements=function(N,E){return async function*(){const g=e.str_new(N,E);let C={stmt:null,sql:e.str_value(g)};try{for(;C=await e.prepare_v2(N,C.sql);)yield C.stmt,e.finalize(C.stmt),C.stmt=null}finally{C?.stmt&&e.finalize(C.stmt),e.str_finish(g)}}()},e.step=function(){const N="sqlite3_step",E=t.cwrap(N,...Oe("n:n"),{async:Ts});return async function(g){W(g);const C=await E(g);return ue(N,C,T.get(g),[yf,TN])}}();let ee=0;const G=new Map;e.str_new=function(N,E=""){const g=t.lengthBytesUTF8(E),C=ee++&4294967295,S={offset:t._sqlite3_malloc(g+1),bytes:g};return G.set(C,S),t.stringToUTF8(E,S.offset,S.bytes+1),C},e.str_appendall=function(N,E){if(!G.has(N))throw new xn("not a string",Fi);const g=G.get(N),C=t.lengthBytesUTF8(E),S=g.bytes+C,X=t._sqlite3_malloc(S+1);t.HEAPU8.subarray(X,X+S+1).set(t.HEAPU8.subarray(g.offset,g.offset+g.bytes)),t.stringToUTF8(E,X+g.bytes,C+1),t._sqlite3_free(g.offset),g.offset=X,g.bytes=S,G.set(N,g)},e.str_finish=function(N){if(!G.has(N))throw new xn("not a string",Fi);const E=G.get(N);G.delete(N),t._sqlite3_free(E.offset)},e.str_value=function(N){if(!G.has(N))throw new xn("not a string",Fi);return G.get(N).offset},e.user_data=function(N){return t.getFunctionUserData(N)},e.value=function(N){const E=e.value_type(N);switch(E){case ld:return e.value_blob(N);case ud:return e.value_double(N);case ad:const g=e.value_int(N),C=t.getTempRet0();return b(g,C);case fd:return null;case cd:return e.value_text(N);default:throw new xn("unknown type",E)}},e.value_blob=function(){const N="sqlite3_value_blob",E=t.cwrap(N,...Oe("n:n"));return function(g){const C=e.value_bytes(g),S=E(g);return t.HEAPU8.subarray(S,S+C)}}(),e.value_bytes=function(){const N="sqlite3_value_bytes",E=t.cwrap(N,...Oe("n:n"));return function(g){return E(g)}}(),e.value_double=function(){const N="sqlite3_value_double",E=t.cwrap(N,...Oe("n:n"));return function(g){return E(g)}}(),e.value_int=function(){const N="sqlite3_value_int64",E=t.cwrap(N,...Oe("n:n"));return function(g){return E(g)}}(),e.value_int64=function(){const N="sqlite3_value_int64",E=t.cwrap(N,...Oe("n:n"));return function(g){const C=E(g),S=t.getTempRet0();return y(C,S)}}(),e.value_text=function(){const N="sqlite3_value_text",E=t.cwrap(N,...Oe("n:s"));return function(g){return E(g)}}(),e.value_type=function(){const N="sqlite3_value_type",E=t.cwrap(N,...Oe("n:n"));return function(g){return E(g)}}(),e.vfs_register=function(N,E){const g=t.registerVFS(N,E);return ue("sqlite3_vfs_register",g)};function ue(N,E,g=null,C=[ze]){if(C.includes(E))return E;const S=g?t.ccall("sqlite3_errmsg","string",["number"],[g]):N;throw new xn(S,E)}return e}function Oe(t){const e=[],r=t.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const i=[];for(let o of r[1])switch(o){case"n":i.push("number");break;case"s":i.push("string");break}return e.push(i),e}async function $N(t){const{fileName:e,sqliteModule:r,vfs:i}=await t,o=UN(r);o.vfs_register(i);const l=await o.open_v2(e);return{db:l,sqlite:o,async close(){await o.close(l)},changes(){return o.changes(l)},async lastInsertRowId(){return await new Promise(y=>o.exec(l,"SELECT last_insert_rowid()",([b])=>y(b)))},async run(y,b){const O=o.str_new(l,y);try{const d=await o.prepare_v2(l,o.str_value(O));if(!d)return[];const T=d.stmt;try{b?.length&&o.bind_collection(T,b);const W=[],ee=o.column_names(T);for(;await o.step(T)===yf;){const G=o.row(T);W.push(Object.fromEntries(ee.map((ue,N)=>[ue,G[N]])))}return W}finally{await o.finalize(T)}}finally{o.str_finish(O)}}}}var QN=class{constructor(){be(this,"mxPathName",64)}xClose(t){return bt}xRead(t,e,r){return bt}xWrite(t,e,r){return bt}xTruncate(t,e){return bt}xSync(t,e){return ze}xFileSize(t,e){return bt}xLock(t,e){return ze}xUnlock(t,e){return ze}xCheckReservedLock(t,e){return e.setInt32(0,0,!0),ze}xFileControl(t,e,r){return qm}xSectorSize(t){return 512}xDeviceCharacteristics(t){return 0}xOpen(t,e,r,i){return Em}xDelete(t,e){return bt}xAccess(t,e,r){return bt}handleAsync(t){return t()}},jN=(()=>{var t=import.meta.url;return function(e={}){var r=e,i,o;r.ready=new Promise((n,u)=>{i=n,o=u});var l=Object.assign({},r),y="./this.program",b=(n,u)=>{throw u},O=typeof window=="object",d=typeof importScripts=="function",T="",W;(O||d)&&(d?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),t&&(T=t),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",d&&(W=n=>{var u=new XMLHttpRequest;return u.open("GET",n,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var ee=r.print||console.log.bind(console),G=r.printErr||console.error.bind(console);Object.assign(r,l),l=null,r.thisProgram&&(y=r.thisProgram),r.quit&&(b=r.quit);var ue;r.wasmBinary&&(ue=r.wasmBinary),typeof WebAssembly!="object"&&pe("no native wasm support detected");var N,E=!1,g,C,S,X,ne,we,Le,dt;function qr(){var n=N.buffer;r.HEAP8=C=new Int8Array(n),r.HEAP16=X=new Int16Array(n),r.HEAPU8=S=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAP32=ne=new Int32Array(n),r.HEAPU32=we=new Uint32Array(n),r.HEAPF32=Le=new Float32Array(n),r.HEAPF64=dt=new Float64Array(n)}var Pt=[],Ar=[],Er=[],tt=[];function wr(){var n=r.preRun.shift();Pt.unshift(n)}var Lt=0,it=null;function pe(n){throw r.onAbort&&r.onAbort(n),n="Aborted("+n+")",G(n),E=!0,g=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),o(n),n}var Ie=n=>n.startsWith("data:application/octet-stream;base64,"),_t;if(r.locateFile){if(_t="wa-sqlite-async.wasm",!Ie(_t)){var ye=_t;_t=r.locateFile?r.locateFile(ye,T):T+ye}}else _t=new URL("/assets/wa-sqlite-async-715b3d85.wasm",self.location).href;function Ue(n){if(n==_t&&ue)return new Uint8Array(ue);if(W)return W(n);throw"both async and sync fetching of the wasm failed"}function Vt(n){return ue||!O&&!d||typeof fetch!="function"?Promise.resolve().then(()=>Ue(n)):fetch(n,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+n+"'";return u.arrayBuffer()}).catch(()=>Ue(n))}function Nn(n,u,f){return Vt(n).then(m=>WebAssembly.instantiate(m,u)).then(m=>m).then(f,m=>{G(`failed to asynchronously prepare wasm: ${m}`),pe(m)})}function ws(n,u){var f=_t;return ue||typeof WebAssembly.instantiateStreaming!="function"||Ie(f)||typeof fetch!="function"?Nn(f,n,u):fetch(f,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,n).then(u,function(v){return G(`wasm streaming compile failed: ${v}`),G("falling back to ArrayBuffer instantiation"),Nn(f,n,u)}))}var he,Ae;function Yr(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Xr=n=>{for(;0<n.length;)n.shift()(r)};function Ge(n,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return C[n>>0];case"i8":return C[n>>0];case"i16":return X[n>>1];case"i32":return ne[n>>2];case"i64":pe("to do getValue(i64) use WASM_BIGINT");case"float":return Le[n>>2];case"double":return dt[n>>3];case"*":return we[n>>2];default:pe(`invalid type for getValue: ${u}`)}}var ir=r.noExitRuntime||!0;function xt(n,u,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":C[n>>0]=u;break;case"i8":C[n>>0]=u;break;case"i16":X[n>>1]=u;break;case"i32":ne[n>>2]=u;break;case"i64":pe("to do setValue(i64) use WASM_BIGINT");case"float":Le[n>>2]=u;break;case"double":dt[n>>3]=u;break;case"*":we[n>>2]=u;break;default:pe(`invalid type for setValue: ${f}`)}}var _=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,q=(n,u,f)=>{var m=u+f;for(f=u;n[f]&&!(f>=m);)++f;if(16<f-u&&n.buffer&&_)return _.decode(n.subarray(u,f));for(m="";u<f;){var v=n[u++];if(v&128){var A=n[u++]&63;if((v&224)==192)m+=String.fromCharCode((v&31)<<6|A);else{var k=n[u++]&63;v=(v&240)==224?(v&15)<<12|A<<6|k:(v&7)<<18|A<<12|k<<6|n[u++]&63,65536>v?m+=String.fromCharCode(v):(v-=65536,m+=String.fromCharCode(55296|v>>10,56320|v&1023))}}else m+=String.fromCharCode(v)}return m},D=(n,u)=>{for(var f=0,m=n.length-1;0<=m;m--){var v=n[m];v==="."?n.splice(m,1):v===".."?(n.splice(m,1),f++):f&&(n.splice(m,1),f--)}if(u)for(;f;f--)n.unshift("..");return n},Q=n=>{var u=n.charAt(0)==="/",f=n.substr(-1)==="/";return(n=D(n.split("/").filter(m=>!!m),!u).join("/"))||u||(n="."),n&&f&&(n+="/"),(u?"/":"")+n},J=n=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=u[0],u=u[1],!n&&!u?".":(u&&(u=u.substr(0,u.length-1)),n+u)},te=n=>{if(n==="/")return"/";n=Q(n),n=n.replace(/\/$/,"");var u=n.lastIndexOf("/");return u===-1?n:n.substr(u+1)},U=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>crypto.getRandomValues(n);pe("initRandomDevice")},j=n=>(j=U())(n);function re(){for(var n="",u=!1,f=arguments.length-1;-1<=f&&!u;f--){if(u=0<=f?arguments[f]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";n=u+"/"+n,u=u.charAt(0)==="/"}return n=D(n.split("/").filter(m=>!!m),!u).join("/"),(u?"/":"")+n||"."}var V=[],ce=n=>{for(var u=0,f=0;f<n.length;++f){var m=n.charCodeAt(f);127>=m?u++:2047>=m?u+=2:55296<=m&&57343>=m?(u+=4,++f):u+=3}return u},ae=(n,u,f,m)=>{if(!(0<m))return 0;var v=f;m=f+m-1;for(var A=0;A<n.length;++A){var k=n.charCodeAt(A);if(55296<=k&&57343>=k){var H=n.charCodeAt(++A);k=65536+((k&1023)<<10)|H&1023}if(127>=k){if(f>=m)break;u[f++]=k}else{if(2047>=k){if(f+1>=m)break;u[f++]=192|k>>6}else{if(65535>=k){if(f+2>=m)break;u[f++]=224|k>>12}else{if(f+3>=m)break;u[f++]=240|k>>18,u[f++]=128|k>>12&63}u[f++]=128|k>>6&63}u[f++]=128|k&63}}return u[f]=0,f-v},le=[];function ge(n,u){le[n]={input:[],Rb:[],bc:u},Wo(n,Ee)}var Ee={open(n){var u=le[n.node.ec];if(!u)throw new Z(43);n.Sb=u,n.seekable=!1},close(n){n.Sb.bc.ic(n.Sb)},ic(n){n.Sb.bc.ic(n.Sb)},read(n,u,f,m){if(!n.Sb||!n.Sb.bc.xc)throw new Z(60);for(var v=0,A=0;A<m;A++){try{var k=n.Sb.bc.xc(n.Sb)}catch{throw new Z(29)}if(k===void 0&&v===0)throw new Z(6);if(k==null)break;v++,u[f+A]=k}return v&&(n.node.timestamp=Date.now()),v},write(n,u,f,m){if(!n.Sb||!n.Sb.bc.rc)throw new Z(60);try{for(var v=0;v<m;v++)n.Sb.bc.rc(n.Sb,u[f+v])}catch{throw new Z(29)}return m&&(n.node.timestamp=Date.now()),v}},je={xc(){e:{if(!V.length){var n=null;if(typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`)),!n){var u=null;break e}u=Array(ce(n)+1),n=ae(n,u,0,u.length),u.length=n,V=u}u=V.shift()}return u},rc(n,u){u===null||u===10?(ee(q(n.Rb,0)),n.Rb=[]):u!=0&&n.Rb.push(u)},ic(n){n.Rb&&0<n.Rb.length&&(ee(q(n.Rb,0)),n.Rb=[])},Yc(){return{Uc:25856,Wc:5,Tc:191,Vc:35387,Sc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Zc(){return 0},$c(){return[24,80]}},Pe={rc(n,u){u===null||u===10?(G(q(n.Rb,0)),n.Rb=[]):u!=0&&n.Rb.push(u)},ic(n){n.Rb&&0<n.Rb.length&&(G(q(n.Rb,0)),n.Rb=[])}};function rt(n,u){var f=n.Nb?n.Nb.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),f!=0&&(u=Math.max(u,256)),f=n.Nb,n.Nb=new Uint8Array(u),0<n.Pb&&n.Nb.set(f.subarray(0,n.Pb),0))}var me={Vb:null,Ub(){return me.createNode(null,"/",16895,0)},createNode(n,u,f,m){if((f&61440)===24576||(f&61440)===4096)throw new Z(63);return me.Vb||(me.Vb={dir:{node:{Tb:me.Cb.Tb,Qb:me.Cb.Qb,cc:me.Cb.cc,jc:me.Cb.jc,Bc:me.Cb.Bc,oc:me.Cb.oc,mc:me.Cb.mc,Ac:me.Cb.Ac,nc:me.Cb.nc},stream:{Zb:me.Mb.Zb}},file:{node:{Tb:me.Cb.Tb,Qb:me.Cb.Qb},stream:{Zb:me.Mb.Zb,read:me.Mb.read,write:me.Mb.write,uc:me.Mb.uc,kc:me.Mb.kc,lc:me.Mb.lc}},link:{node:{Tb:me.Cb.Tb,Qb:me.Cb.Qb,fc:me.Cb.fc},stream:{}},vc:{node:{Tb:me.Cb.Tb,Qb:me.Cb.Qb},stream:ou}}),f=Mn(n,u,f,m),zt(f.mode)?(f.Cb=me.Vb.dir.node,f.Mb=me.Vb.dir.stream,f.Nb={}):(f.mode&61440)===32768?(f.Cb=me.Vb.file.node,f.Mb=me.Vb.file.stream,f.Pb=0,f.Nb=null):(f.mode&61440)===40960?(f.Cb=me.Vb.link.node,f.Mb=me.Vb.link.stream):(f.mode&61440)===8192&&(f.Cb=me.Vb.vc.node,f.Mb=me.Vb.vc.stream),f.timestamp=Date.now(),n&&(n.Nb[u]=f,n.timestamp=f.timestamp),f},Xc(n){return n.Nb?n.Nb.subarray?n.Nb.subarray(0,n.Pb):new Uint8Array(n.Nb):new Uint8Array(0)},Cb:{Tb(n){var u={};return u.Hc=(n.mode&61440)===8192?n.id:1,u.yc=n.id,u.mode=n.mode,u.Nc=1,u.uid=0,u.Kc=0,u.ec=n.ec,zt(n.mode)?u.size=4096:(n.mode&61440)===32768?u.size=n.Pb:(n.mode&61440)===40960?u.size=n.link.length:u.size=0,u.Dc=new Date(n.timestamp),u.Mc=new Date(n.timestamp),u.Gc=new Date(n.timestamp),u.Ec=4096,u.Fc=Math.ceil(u.size/u.Ec),u},Qb(n,u){if(u.mode!==void 0&&(n.mode=u.mode),u.timestamp!==void 0&&(n.timestamp=u.timestamp),u.size!==void 0&&(u=u.size,n.Pb!=u))if(u==0)n.Nb=null,n.Pb=0;else{var f=n.Nb;n.Nb=new Uint8Array(u),f&&n.Nb.set(f.subarray(0,Math.min(u,n.Pb))),n.Pb=u}},cc(){throw So[44]},jc(n,u,f,m){return me.createNode(n,u,f,m)},Bc(n,u,f){if(zt(n.mode)){try{var m=pt(u,f)}catch{}if(m)for(var v in m.Nb)throw new Z(55)}delete n.parent.Nb[n.name],n.parent.timestamp=Date.now(),n.name=f,u.Nb[f]=n,u.timestamp=n.parent.timestamp,n.parent=u},oc(n,u){delete n.Nb[u],n.timestamp=Date.now()},mc(n,u){var f=pt(n,u),m;for(m in f.Nb)throw new Z(55);delete n.Nb[u],n.timestamp=Date.now()},Ac(n){var u=[".",".."],f;for(f in n.Nb)n.Nb.hasOwnProperty(f)&&u.push(f);return u},nc(n,u,f){return n=me.createNode(n,u,41471,0),n.link=f,n},fc(n){if((n.mode&61440)!==40960)throw new Z(28);return n.link}},Mb:{read(n,u,f,m,v){var A=n.node.Nb;if(v>=n.node.Pb)return 0;if(n=Math.min(n.node.Pb-v,m),8<n&&A.subarray)u.set(A.subarray(v,v+n),f);else for(m=0;m<n;m++)u[f+m]=A[v+m];return n},write(n,u,f,m,v,A){if(u.buffer===C.buffer&&(A=!1),!m)return 0;if(n=n.node,n.timestamp=Date.now(),u.subarray&&(!n.Nb||n.Nb.subarray)){if(A)return n.Nb=u.subarray(f,f+m),n.Pb=m;if(n.Pb===0&&v===0)return n.Nb=u.slice(f,f+m),n.Pb=m;if(v+m<=n.Pb)return n.Nb.set(u.subarray(f,f+m),v),m}if(rt(n,v+m),n.Nb.subarray&&u.subarray)n.Nb.set(u.subarray(f,f+m),v);else for(A=0;A<m;A++)n.Nb[v+A]=u[f+A];return n.Pb=Math.max(n.Pb,v+m),m},Zb(n,u,f){if(f===1?u+=n.position:f===2&&(n.node.mode&61440)===32768&&(u+=n.node.Pb),0>u)throw new Z(28);return u},uc(n,u,f){rt(n.node,u+f),n.node.Pb=Math.max(n.node.Pb,u+f)},kc(n,u,f,m,v){if((n.node.mode&61440)!==32768)throw new Z(43);if(n=n.node.Nb,v&2||n.buffer!==C.buffer){if((0<f||f+u<n.length)&&(n.subarray?n=n.subarray(f,f+u):n=Array.prototype.slice.call(n,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(v=vu(65536,u))?(S.fill(0,v,v+u),u=v):u=0,!u)throw new Z(48);C.set(n,u)}else f=!1,u=n.byteOffset;return{Oc:u,Cc:f}},lc(n,u,f,m){return me.Mb.write(n,u,0,m,f,!1),0}}},Wr=(n,u)=>{var f=0;return n&&(f|=365),u&&(f|=146),f},Pn=null,Zr={},en=[],de=1,ct=null,Ln=!0,Z=null,So={};function lt(n,u={}){if(n=re(n),!n)return{path:"",node:null};if(u=Object.assign({wc:!0,sc:0},u),8<u.sc)throw new Z(32);n=n.split("/").filter(k=>!!k);for(var f=Pn,m="/",v=0;v<n.length;v++){var A=v===n.length-1;if(A&&u.parent)break;if(f=pt(f,n[v]),m=Q(m+"/"+n[v]),f.$b&&(!A||A&&u.wc)&&(f=f.$b.root),!A||u.Yb){for(A=0;(f.mode&61440)===40960;)if(f=Oi(m),m=re(J(m),f),f=lt(m,{sc:u.sc+1}).node,40<A++)throw new Z(32)}}return{path:m,node:f}}function _i(n){for(var u;;){if(n===n.parent)return n=n.Ub.zc,u?n[n.length-1]!=="/"?`${n}/${u}`:n+u:n;u=u?`${n.name}/${u}`:n.name,n=n.parent}}function F(n,u){for(var f=0,m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m)|0;return(n+f>>>0)%ct.length}function gs(n){var u=F(n.parent.id,n.name);if(ct[u]===n)ct[u]=n.ac;else for(u=ct[u];u;){if(u.ac===n){u.ac=n.ac;break}u=u.ac}}function pt(n,u){var f;if(f=(f=sr(n,"x"))?f:n.Cb.cc?0:2)throw new Z(f,n);for(f=ct[F(n.id,u)];f;f=f.ac){var m=f.name;if(f.parent.id===n.id&&m===u)return f}return n.Cb.cc(n,u)}function Mn(n,u,f,m){return n=new wu(n,u,f,m),u=F(n.parent.id,n.name),n.ac=ct[u],ct[u]=n}function zt(n){return(n&61440)===16384}function To(n){var u=["r","w","rw"][n&3];return n&512&&(u+="w"),u}function sr(n,u){if(Ln)return 0;if(!u.includes("r")||n.mode&292){if(u.includes("w")&&!(n.mode&146)||u.includes("x")&&!(n.mode&73))return 2}else return 2;return 0}function ko(n,u){try{return pt(n,u),20}catch{}return sr(n,"wx")}function iu(n,u,f){try{var m=pt(n,u)}catch(v){return v.Ob}if(n=sr(n,"wx"))return n;if(f){if(!zt(m.mode))return 54;if(m===m.parent||_i(m)==="/")return 10}else if(zt(m.mode))return 31;return 0}function su(){for(var n=0;4096>=n;n++)if(!en[n])return n;throw new Z(33)}function mt(n){if(n=en[n],!n)throw new Z(8);return n}function Ao(n,u=-1){return Un||(Un=function(){this.hc={}},Un.prototype={},Object.defineProperties(Un.prototype,{object:{get(){return this.node},set(f){this.node=f}},flags:{get(){return this.hc.flags},set(f){this.hc.flags=f}},position:{get(){return this.hc.position},set(f){this.hc.position=f}}})),n=Object.assign(new Un,n),u==-1&&(u=su()),n.Wb=u,en[u]=n}var ou={open(n){n.Mb=Zr[n.node.ec].Mb,n.Mb.open&&n.Mb.open(n)},Zb(){throw new Z(70)}};function Wo(n,u){Zr[n]={Mb:u}}function Ro(n,u){var f=u==="/",m=!u;if(f&&Pn)throw new Z(10);if(!f&&!m){var v=lt(u,{wc:!1});if(u=v.path,v=v.node,v.$b)throw new Z(10);if(!zt(v.mode))throw new Z(54)}u={type:n,bd:{},zc:u,Lc:[]},n=n.Ub(u),n.Ub=u,u.root=n,f?Pn=n:v&&(v.$b=u,v.Ub&&v.Ub.Lc.push(u))}function Do(n,u,f){var m=lt(n,{parent:!0}).node;if(n=te(n),!n||n==="."||n==="..")throw new Z(28);var v=ko(m,n);if(v)throw new Z(v);if(!m.Cb.jc)throw new Z(63);return m.Cb.jc(m,n,u,f)}function or(n,u){return Do(n,(u!==void 0?u:511)&1023|16384,0)}function xi(n,u,f){typeof f>"u"&&(f=u,u=438),Do(n,u|8192,f)}function Bn(n,u){if(!re(n))throw new Z(44);var f=lt(u,{parent:!0}).node;if(!f)throw new Z(44);u=te(u);var m=ko(f,u);if(m)throw new Z(m);if(!f.Cb.nc)throw new Z(63);f.Cb.nc(f,u,n)}function gr(n){var u=lt(n,{parent:!0}).node;n=te(n);var f=pt(u,n),m=iu(u,n,!0);if(m)throw new Z(m);if(!u.Cb.mc)throw new Z(63);if(f.$b)throw new Z(10);u.Cb.mc(u,n),gs(f)}function Oi(n){if(n=lt(n).node,!n)throw new Z(44);if(!n.Cb.fc)throw new Z(28);return re(_i(n.parent),n.Cb.fc(n))}function Fn(n,u){if(n=lt(n,{Yb:!u}).node,!n)throw new Z(44);if(!n.Cb.Tb)throw new Z(63);return n.Cb.Tb(n)}function Po(n){return Fn(n,!0)}function Lo(n,u){if(n=typeof n=="string"?lt(n,{Yb:!0}).node:n,!n.Cb.Qb)throw new Z(63);n.Cb.Qb(n,{mode:u&4095|n.mode&-4096,timestamp:Date.now()})}function Mo(n,u){if(0>u)throw new Z(28);if(n=typeof n=="string"?lt(n,{Yb:!0}).node:n,!n.Cb.Qb)throw new Z(63);if(zt(n.mode))throw new Z(31);if((n.mode&61440)!==32768)throw new Z(28);var f=sr(n,"w");if(f)throw new Z(f);n.Cb.Qb(n,{size:u,timestamp:Date.now()})}function tn(n,u,f){if(n==="")throw new Z(44);if(typeof u=="string"){var m={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof m>"u")throw Error(`Unknown file open mode: ${u}`);u=m}if(f=u&64?(typeof f>"u"?438:f)&4095|32768:0,typeof n=="object")var v=n;else{n=Q(n);try{v=lt(n,{Yb:!(u&131072)}).node}catch{}}if(m=!1,u&64)if(v){if(u&128)throw new Z(20)}else v=Do(n,f,0),m=!0;if(!v)throw new Z(44);if((v.mode&61440)===8192&&(u&=-513),u&65536&&!zt(v.mode))throw new Z(54);if(!m&&(f=v?(v.mode&61440)===40960?32:zt(v.mode)&&(To(u)!=="r"||u&512)?31:sr(v,To(u)):44))throw new Z(f);return u&512&&!m&&Mo(v,0),u&=-131713,v=Ao({node:v,path:_i(v),flags:u,seekable:!0,position:0,Mb:v.Mb,Rc:[],error:!1}),v.Mb.open&&v.Mb.open(v),!r.logReadFiles||u&1||(Ci||(Ci={}),n in Ci||(Ci[n]=1)),v}function Bo(n,u,f){if(n.Wb===null)throw new Z(8);if(!n.seekable||!n.Mb.Zb)throw new Z(70);if(f!=0&&f!=1&&f!=2)throw new Z(28);n.position=n.Mb.Zb(n,u,f),n.Rc=[]}function qi(){Z||(Z=function(n,u){this.name="ErrnoError",this.node=u,this.Pc=function(f){this.Ob=f},this.Pc(n),this.message="FS error"},Z.prototype=Error(),Z.prototype.constructor=Z,[44].forEach(n=>{So[n]=new Z(n),So[n].stack="<generic error, no stack>"}))}var Fo;function Cr(n,u,f){n=Q("/dev/"+n);var m=Wr(!!u,!!f);Ei||(Ei=64);var v=Ei++<<8|0;Wo(v,{open(A){A.seekable=!1},close(){f&&f.buffer&&f.buffer.length&&f(10)},read(A,k,H,R){for(var M=0,oe=0;oe<R;oe++){try{var z=u()}catch{throw new Z(29)}if(z===void 0&&M===0)throw new Z(6);if(z==null)break;M++,k[H+oe]=z}return M&&(A.node.timestamp=Date.now()),M},write(A,k,H,R){for(var M=0;M<R;M++)try{f(k[H+M])}catch{throw new Z(29)}return R&&(A.node.timestamp=Date.now()),M}}),xi(n,m,v)}var Ei,Ke={},Un,Ci;function vn(n,u,f){if(u.charAt(0)==="/")return u;if(n=n===-100?"/":mt(n).path,u.length==0){if(!f)throw new Z(44);return n}return Q(n+"/"+u)}function Ii(n,u,f){try{var m=n(u)}catch(A){if(A&&A.node&&Q(u)!==Q(_i(A.node)))return-54;throw A}ne[f>>2]=m.Hc,ne[f+4>>2]=m.mode,we[f+8>>2]=m.Nc,ne[f+12>>2]=m.uid,ne[f+16>>2]=m.Kc,ne[f+20>>2]=m.ec,Ae=[m.size>>>0,(he=m.size,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[f+24>>2]=Ae[0],ne[f+28>>2]=Ae[1],ne[f+32>>2]=4096,ne[f+36>>2]=m.Fc,n=m.Dc.getTime(),u=m.Mc.getTime();var v=m.Gc.getTime();return Ae=[Math.floor(n/1e3)>>>0,(he=Math.floor(n/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[f+40>>2]=Ae[0],ne[f+44>>2]=Ae[1],we[f+48>>2]=n%1e3*1e3,Ae=[Math.floor(u/1e3)>>>0,(he=Math.floor(u/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[f+56>>2]=Ae[0],ne[f+60>>2]=Ae[1],we[f+64>>2]=u%1e3*1e3,Ae=[Math.floor(v/1e3)>>>0,(he=Math.floor(v/1e3),1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[f+72>>2]=Ae[0],ne[f+76>>2]=Ae[1],we[f+80>>2]=v%1e3*1e3,Ae=[m.yc>>>0,(he=m.yc,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[f+88>>2]=Ae[0],ne[f+92>>2]=Ae[1],0}var Si=void 0;function Ti(){var n=ne[+Si>>2];return Si+=4,n}var Rr=(n,u)=>u+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*u:NaN,Uo=[0,31,60,91,121,152,182,213,244,274,305,335],Ye=[0,31,59,90,120,151,181,212,243,273,304,334],$n=n=>{var u=ce(n)+1,f=Xo(u);return f&&ae(n,S,f,u),f},Qn={},rn=()=>{if(!jn){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},u;for(u in Qn)Qn[u]===void 0?delete n[u]:n[u]=Qn[u];var f=[];for(u in n)f.push(`${u}=${n[u]}`);jn=f}return jn},jn;function ki(){}function Ai(){}function ar(){}function bs(){}function $o(){}function au(){}function Ns(){}function Qo(){}function vs(){}function jo(){}function _s(){}function Dr(){}function xs(){}function Os(){}function Vn(){}function qs(){}function uu(){}function Vo(){}function cu(){}function zo(){}function Wi(){}function Ri(){}function Ko(){}function zn(){}function Kn(){}function Pr(){}function Di(){}function Ho(){}function a(){}function c(){}function h(){}function w(){}function x(){}function L(){}function B(){}function Ne(){}function Me(){}function We(){}function ot(){}var ur=0,Jo=n=>{g=n,ir||0<ur||(r.onExit&&r.onExit(n),E=!0),b(n,new Yr(n))},Go=n=>{n instanceof Yr||n=="unwind"||b(1,n)},Pi=n=>{try{n()}catch(u){pe(u)}};function wl(){var n=ie,u={},f;for(f in n)(function(m){var v=n[m];u[m]=typeof v=="function"?function(){Es.push(m);try{return v.apply(null,arguments)}finally{E||(Es.pop()===m||pe(),Ir&&Lr===1&&Es.length===0&&(Lr=0,Pi(Li),typeof Fibers<"u"&&Fibers.cd()))}}:v})(f);return u}var Lr=0,Ir=null,lu=0,Es=[],fu={},hu={},gl=0,Yo=null,bl=[];function du(){return new Promise((n,u)=>{Yo={resolve:n,reject:u}})}function Nl(){var n=Xo(16396),u=n+12;we[n>>2]=u,we[n+4>>2]=u+16384,u=Es[0];var f=fu[u];return f===void 0&&(f=gl++,fu[u]=f,hu[f]=u),ne[n+8>>2]=f,n}function pu(n){if(!E){if(Lr===0){var u=!1,f=!1;n((m=0)=>{if(!E&&(lu=m,u=!0,f)){Lr=2,Pi(()=>ta(Ir)),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.resume(),m=!1;try{var v=(0,ie[hu[ne[Ir+8>>2]]])()}catch(H){v=H,m=!0}var A=!1;if(!Ir){var k=Yo;k&&(Yo=null,(m?k.reject:k.resolve)(v),A=!0)}if(m&&!A)throw v}}),f=!0,u||(Lr=1,Ir=Nl(),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.pause(),Pi(()=>Ou(Ir)))}else Lr===2?(Lr=0,Pi(qu),bu(Ir),Ir=null,bl.forEach(m=>{if(!E)try{if(m(),!(ir||0<ur))try{g=m=g,Jo(m)}catch(v){Go(v)}}catch(v){Go(v)}})):pe(`invalid state: ${Lr}`);return lu}}function mu(n){return pu(u=>{n().then(u)})}var yu={},Sr=(n,u,f,m,v)=>{function A(z){return--ur,R!==0&&xu(R),u==="string"?z?q(S,z):"":u==="boolean"?!!z:z}var k={string:z=>{var se=0;if(z!=null&&z!==0){se=ce(z)+1;var Se=ea(se);ae(z,S,Se,se),se=Se}return se},array:z=>{var se=ea(z.length);return C.set(z,se),se}};n=r["_"+n];var H=[],R=0;if(m)for(var M=0;M<m.length;M++){var oe=k[f[M]];oe?(R===0&&(R=Zo()),H[M]=oe(m[M])):H[M]=m[M]}return f=Ir,m=n.apply(null,H),v=v&&v.async,ur+=1,Ir!=f?du().then(A):(m=A(m),v?Promise.resolve(m):m)};function wu(n,u,f,m){n||(n=this),this.parent=n,this.Ub=n.Ub,this.$b=null,this.id=de++,this.name=u,this.mode=f,this.Cb={},this.Mb={},this.ec=m}Object.defineProperties(wu.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),qi(),ct=Array(4096),Ro(me,"/"),or("/tmp"),or("/home"),or("/home/web_user"),function(){or("/dev"),Wo(259,{read:()=>0,write:(m,v,A,k)=>k}),xi("/dev/null",259),ge(1280,je),ge(1536,Pe),xi("/dev/tty",1280),xi("/dev/tty1",1536);var n=new Uint8Array(1024),u=0,f=()=>(u===0&&(u=j(n).byteLength),n[--u]);Cr("random",f),Cr("urandom",f),or("/dev/shm"),or("/dev/shm/tmp")}(),function(){or("/proc");var n=or("/proc/self");or("/proc/self/fd"),Ro({Ub(){var u=Mn(n,"fd",16895,73);return u.Cb={cc(f,m){var v=mt(+m);return f={parent:null,Ub:{zc:"fake"},Cb:{fc:()=>v.path}},f.parent=f}},u}},"/proc/self/fd")}(),function(){const n=new Map;r.setAuthorizer=function(u,f,m){return f?n.set(u,{f,tc:m}):n.delete(u),Sr("set_authorizer","number",["number"],[u])},ki=function(u,f,m,v,A,k){if(n.has(u)){const{f:H,tc:R}=n.get(u);return H(R,f,m?m?q(S,m):"":null,v?v?q(S,v):"":null,A?A?q(S,A):"":null,k?k?q(S,k):"":null)}return 0}}(),function(){const n=new Map,u=new Map;r.createFunction=function(f,m,v,A,k,H){const R=n.size;return n.set(R,{f:H,Xb:k}),Sr("create_function","number","number string number number number number".split(" "),[f,m,v,A,R,0])},r.createAggregate=function(f,m,v,A,k,H,R){const M=n.size;return n.set(M,{step:H,Ic:R,Xb:k}),Sr("create_function","number","number string number number number number".split(" "),[f,m,v,A,M,1])},r.getFunctionUserData=function(f){return u.get(f)},ar=function(f,m,v,A){f=n.get(f),u.set(m,f.Xb),f.f(m,new Uint32Array(S.buffer,A,v)),u.delete(m)},$o=function(f,m,v,A){f=n.get(f),u.set(m,f.Xb),f.step(m,new Uint32Array(S.buffer,A,v)),u.delete(m)},Ai=function(f,m){f=n.get(f),u.set(m,f.Xb),f.Ic(m),u.delete(m)}}(),function(){const n=new Map;r.progressHandler=function(u,f,m,v){return m?n.set(u,{f:m,tc:v}):n.delete(u),Sr("progress_handler",null,["number","number"],[u,f])},bs=function(u){if(n.has(u)){const{f,tc:m}=n.get(u);return f(m)}return 0}}(),function(){function n(R,M){const oe=`get${R}`,z=`set${R}`;return new Proxy(new DataView(S.buffer,M,R==="Int32"?4:8),{get(se,Se){if(Se===oe)return function(Ve,kt){if(!kt)throw Error("must be little endian");return se[Se](Ve,kt)};if(Se===z)return function(Ve,kt,Ot){if(!Ot)throw Error("must be little endian");return se[Se](Ve,kt,Ot)};if(typeof Se=="string"&&Se.match(/^(get)|(set)/))throw Error("invalid type");return se[Se]}})}const u=typeof yu=="object",f=new Map,m=new Map,v=new Map,A=u?new Set:null,k=u?new Set:null,H=new Map;Ri=function(R,M,oe,z){H.set(R?q(S,R):"",{size:M,dc:Array.from(new Uint32Array(S.buffer,z,oe))})},r.createModule=function(R,M,oe,z){u&&(oe.handleAsync=mu);const se=f.size;return f.set(se,{module:oe,Xb:z}),z=0,oe.xCreate&&(z|=1),oe.xConnect&&(z|=2),oe.xBestIndex&&(z|=4),oe.xDisconnect&&(z|=8),oe.xDestroy&&(z|=16),oe.xOpen&&(z|=32),oe.xClose&&(z|=64),oe.xFilter&&(z|=128),oe.xNext&&(z|=256),oe.xEof&&(z|=512),oe.xColumn&&(z|=1024),oe.xRowid&&(z|=2048),oe.xUpdate&&(z|=4096),oe.xBegin&&(z|=8192),oe.xSync&&(z|=16384),oe.xCommit&&(z|=32768),oe.xRollback&&(z|=65536),oe.xFindFunction&&(z|=131072),oe.xRename&&(z|=262144),Sr("create_module","number",["number","string","number","number"],[R,M,se,z])},Dr=function(R,M,oe,z,se,Se){if(M=f.get(M),m.set(se,M),u){A.delete(se);for(const Ve of A)m.delete(Ve)}return z=Array.from(new Uint32Array(S.buffer,z,oe)).map(Ve=>Ve?q(S,Ve):""),M.module.xCreate(R,M.Xb,z,se,n("Int32",Se))},_s=function(R,M,oe,z,se,Se){if(M=f.get(M),m.set(se,M),u){A.delete(se);for(const Ve of A)m.delete(Ve)}return z=Array.from(new Uint32Array(S.buffer,z,oe)).map(Ve=>Ve?q(S,Ve):""),M.module.xConnect(R,M.Xb,z,se,n("Int32",Se))},Ns=function(R,M){var oe=m.get(R),z=H.get("sqlite3_index_info").dc;const se={};se.nConstraint=Ge(M+z[0],"i32"),se.aConstraint=[];for(var Se=Ge(M+z[1],"*"),Ve=H.get("sqlite3_index_constraint").size,kt=0;kt<se.nConstraint;++kt){var Ot=se.aConstraint,cr=Ot.push,Mt=Se+kt*Ve,Cs=H.get("sqlite3_index_constraint").dc,Hn={};Hn.iColumn=Ge(Mt+Cs[0],"i32"),Hn.op=Ge(Mt+Cs[1],"i8"),Hn.usable=!!Ge(Mt+Cs[2],"i8"),cr.call(Ot,Hn)}for(se.nOrderBy=Ge(M+z[2],"i32"),se.aOrderBy=[],Se=Ge(M+z[3],"*"),Ve=H.get("sqlite3_index_orderby").size,kt=0;kt<se.nOrderBy;++kt)Ot=se.aOrderBy,cr=Ot.push,Mt=Se+kt*Ve,Cs=H.get("sqlite3_index_orderby").dc,Hn={},Hn.iColumn=Ge(Mt+Cs[0],"i32"),Hn.desc=!!Ge(Mt+Cs[1],"i8"),cr.call(Ot,Hn);for(se.aConstraintUsage=[],Se=0;Se<se.nConstraint;++Se)se.aConstraintUsage.push({argvIndex:0,omit:!1});for(se.idxNum=Ge(M+z[5],"i32"),se.idxStr=null,se.orderByConsumed=!!Ge(M+z[8],"i8"),se.estimatedCost=Ge(M+z[9],"double"),se.estimatedRows=Ge(M+z[10],"i32"),se.idxFlags=Ge(M+z[11],"i32"),se.colUsed=Ge(M+z[12],"i32"),R=oe.module.xBestIndex(R,se),oe=H.get("sqlite3_index_info").dc,z=Ge(M+oe[4],"*"),Se=H.get("sqlite3_index_constraint_usage").size,cr=0;cr<se.nConstraint;++cr)Ve=z+cr*Se,Ot=se.aConstraintUsage[cr],Mt=H.get("sqlite3_index_constraint_usage").dc,xt(Ve+Mt[0],Ot.argvIndex,"i32"),xt(Ve+Mt[1],Ot.omit?1:0,"i8");return xt(M+oe[5],se.idxNum,"i32"),typeof se.idxStr=="string"&&(z=ce(se.idxStr),Se=Sr("sqlite3_malloc","number",["number"],[z+1]),ae(se.idxStr,S,Se,z+1),xt(M+oe[6],Se,"*"),xt(M+oe[7],1,"i32")),xt(M+oe[8],se.orderByConsumed,"i32"),xt(M+oe[9],se.estimatedCost,"double"),xt(M+oe[10],se.estimatedRows,"i32"),xt(M+oe[11],se.idxFlags,"i32"),R},Os=function(R){const M=m.get(R);return u?A.add(R):m.delete(R),M.module.xDisconnect(R)},xs=function(R){const M=m.get(R);return u?A.add(R):m.delete(R),M.module.xDestroy(R)},Vo=function(R,M){const oe=m.get(R);if(v.set(M,oe),u){k.delete(M);for(const z of k)v.delete(z)}return oe.module.xOpen(R,M)},Qo=function(R){const M=v.get(R);return u?k.add(R):v.delete(R),M.module.xClose(R)},Vn=function(R){return v.get(R).module.xEof(R)?1:0},qs=function(R,M,oe,z,se){const Se=v.get(R);return oe=oe?oe?q(S,oe):"":null,se=new Uint32Array(S.buffer,se,z),Se.module.xFilter(R,M,oe,se)},uu=function(R){return v.get(R).module.xNext(R)},vs=function(R,M,oe){return v.get(R).module.xColumn(R,M,oe)},Wi=function(R,M){return v.get(R).module.xRowid(R,n("BigInt64",M))},zn=function(R,M,oe,z){const se=m.get(R);return oe=new Uint32Array(S.buffer,oe,M),se.module.xUpdate(R,oe,n("BigInt64",z))},au=function(R){return m.get(R).module.xBegin(R)},Ko=function(R){return m.get(R).module.xSync(R)},jo=function(R){return m.get(R).module.xCommit(R)},zo=function(R){return m.get(R).module.xRollback(R)},cu=function(R,M){const oe=m.get(R);return M=M?q(S,M):"",oe.module.xRename(R,M)}}(),function(){function n(k,H){const R=`get${k}`,M=`set${k}`;return new Proxy(new DataView(S.buffer,H,k==="Int32"?4:8),{get(oe,z){if(z===R)return function(se,Se){if(!Se)throw Error("must be little endian");return oe[z](se,Se)};if(z===M)return function(se,Se,Ve){if(!Ve)throw Error("must be little endian");return oe[z](se,Se,Ve)};if(typeof z=="string"&&z.match(/^(get)|(set)/))throw Error("invalid type");return oe[z]}})}function u(k){return k>>=2,we[k]+we[k+1]*2**32}const f=typeof yu=="object",m=new Map,v=new Map;r.registerVFS=function(k,H){if(Sr("sqlite3_vfs_find","number",["string"],[k.name]))throw Error(`VFS '${k.name}' already registered`);f&&(k.handleAsync=mu);var R=k.ad??64;const M=r._malloc(4);return H=Sr("register_vfs","number",["string","number","number","number"],[k.name,R,H?1:0,M]),H||(R=Ge(M,"*"),m.set(R,k)),r._free(M),H};const A=f?new Set:null;Di=function(k){const H=v.get(k);return f?A.add(k):v.delete(k),H.xClose(k)},L=function(k,H,R,M){return v.get(k).xRead(k,S.subarray(H,H+R),u(M))},ot=function(k,H,R,M){return v.get(k).xWrite(k,S.subarray(H,H+R),u(M))},Me=function(k,H){return v.get(k).xTruncate(k,u(H))},Ne=function(k,H){return v.get(k).xSync(k,H)},h=function(k,H){const R=v.get(k);return H=n("BigInt64",H),R.xFileSize(k,H)},w=function(k,H){return v.get(k).xLock(k,H)},We=function(k,H){return v.get(k).xUnlock(k,H)},Pr=function(k,H){const R=v.get(k);return H=n("Int32",H),R.xCheckReservedLock(k,H)},c=function(k,H,R){const M=v.get(k);return R=new DataView(S.buffer,R),M.xFileControl(k,H,R)},B=function(k){return v.get(k).xSectorSize(k)},a=function(k){return v.get(k).xDeviceCharacteristics(k)},x=function(k,H,R,M,oe){if(k=m.get(k),v.set(R,k),f){A.delete(R);for(var z of A)v.delete(z)}if(z=null,M&64){z=1;const se=[];for(;z;){const Se=S[H++];if(Se)se.push(Se);else switch(S[H]||(z=null),z){case 1:se.push(63),z=2;break;case 2:se.push(61),z=3;break;case 3:se.push(38),z=2}}z=new TextDecoder().decode(new Uint8Array(se))}else H&&(z=H?q(S,H):"");return oe=n("Int32",oe),k.xOpen(z,R,M,oe)},Ho=function(k,H,R){return m.get(k).xDelete(H?q(S,H):"",R)},Kn=function(k,H,R,M){return k=m.get(k),M=n("Int32",M),k.xAccess(H?q(S,H):"",R,M)}}();var vl={a:(n,u,f,m)=>{pe(`Assertion failed: ${n?q(S,n):""}, at: `+[u?u?q(S,u):"":"unknown filename",f,m?m?q(S,m):"":"unknown function"])},K:function(n,u){try{return n=n?q(S,n):"",Lo(n,u),0}catch(f){if(typeof Ke>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},M:function(n,u,f){try{if(u=u?q(S,u):"",u=vn(n,u),f&-8)return-28;var m=lt(u,{Yb:!0}).node;return m?(n="",f&4&&(n+="r"),f&2&&(n+="w"),f&1&&(n+="x"),n&&sr(m,n)?-2:0):-44}catch(v){if(typeof Ke>"u"||v.name!=="ErrnoError")throw v;return-v.Ob}},L:function(n,u){try{var f=mt(n);return Lo(f.node,u),0}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},J:function(n){try{var u=mt(n).node,f=typeof u=="string"?lt(u,{Yb:!0}).node:u;if(!f.Cb.Qb)throw new Z(63);return f.Cb.Qb(f,{timestamp:Date.now()}),0}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},b:function(n,u,f){Si=f;try{var m=mt(n);switch(u){case 0:var v=Ti();if(0>v)return-28;for(;en[v];)v++;return Ao(m,v).Wb;case 1:case 2:return 0;case 3:return m.flags;case 4:return v=Ti(),m.flags|=v,0;case 5:return v=Ti(),X[v+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ne[gu()>>2]=28,-1;default:return-28}}catch(A){if(typeof Ke>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},I:function(n,u){try{var f=mt(n);return Ii(Fn,f.path,u)}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},n:function(n,u,f){u=Rr(u,f);try{if(isNaN(u))return 61;var m=mt(n);if(!(m.flags&2097155))throw new Z(28);return Mo(m.node,u),0}catch(v){if(typeof Ke>"u"||v.name!=="ErrnoError")throw v;return-v.Ob}},C:function(n,u){try{if(u===0)return-28;var f=ce("/")+1;return u<f?-68:(ae("/",S,n,u),f)}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},F:function(n,u){try{return n=n?q(S,n):"",Ii(Po,n,u)}catch(f){if(typeof Ke>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},z:function(n,u,f){try{return u=u?q(S,u):"",u=vn(n,u),u=Q(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),or(u,f),0}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},E:function(n,u,f,m){try{u=u?q(S,u):"";var v=m&256;return u=vn(n,u,m&4096),Ii(v?Po:Fn,u,f)}catch(A){if(typeof Ke>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},y:function(n,u,f,m){Si=m;try{u=u?q(S,u):"",u=vn(n,u);var v=m?Ti():0;return tn(u,f,v).Wb}catch(A){if(typeof Ke>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},w:function(n,u,f,m){try{if(u=u?q(S,u):"",u=vn(n,u),0>=m)return-28;var v=Oi(u),A=Math.min(m,ce(v)),k=C[f+A];return ae(v,S,f,m+1),C[f+A]=k,A}catch(H){if(typeof Ke>"u"||H.name!=="ErrnoError")throw H;return-H.Ob}},u:function(n){try{return n=n?q(S,n):"",gr(n),0}catch(u){if(typeof Ke>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(n,u){try{return n=n?q(S,n):"",Ii(Fn,n,u)}catch(f){if(typeof Ke>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},r:function(n,u,f){try{if(u=u?q(S,u):"",u=vn(n,u),f===0){n=u;var m=lt(n,{parent:!0}).node;if(!m)throw new Z(44);var v=te(n),A=pt(m,v),k=iu(m,v,!1);if(k)throw new Z(k);if(!m.Cb.oc)throw new Z(63);if(A.$b)throw new Z(10);m.Cb.oc(m,v),gs(A)}else f===512?gr(u):pe("Invalid flags passed to unlinkat");return 0}catch(H){if(typeof Ke>"u"||H.name!=="ErrnoError")throw H;return-H.Ob}},q:function(n,u,f){try{if(u=u?q(S,u):"",u=vn(n,u,!0),f){var m=we[f>>2]+4294967296*ne[f+4>>2],v=ne[f+8>>2];A=1e3*m+v/1e6,f+=16,m=we[f>>2]+4294967296*ne[f+4>>2],v=ne[f+8>>2],k=1e3*m+v/1e6}else var A=Date.now(),k=A;n=A;var H=lt(u,{Yb:!0}).node;return H.Cb.Qb(H,{timestamp:Math.max(n,k)}),0}catch(R){if(typeof Ke>"u"||R.name!=="ErrnoError")throw R;return-R.Ob}},l:function(n,u,f){n=new Date(1e3*Rr(n,u)),ne[f>>2]=n.getSeconds(),ne[f+4>>2]=n.getMinutes(),ne[f+8>>2]=n.getHours(),ne[f+12>>2]=n.getDate(),ne[f+16>>2]=n.getMonth(),ne[f+20>>2]=n.getFullYear()-1900,ne[f+24>>2]=n.getDay(),u=n.getFullYear(),ne[f+28>>2]=(u%4!==0||u%100===0&&u%400!==0?Ye:Uo)[n.getMonth()]+n.getDate()-1|0,ne[f+36>>2]=-(60*n.getTimezoneOffset()),u=new Date(n.getFullYear(),6,1).getTimezoneOffset();var m=new Date(n.getFullYear(),0,1).getTimezoneOffset();ne[f+32>>2]=(u!=m&&n.getTimezoneOffset()==Math.min(m,u))|0},i:function(n,u,f,m,v,A,k,H){v=Rr(v,A);try{if(isNaN(v))return 61;var R=mt(m);if(u&2&&!(f&2)&&(R.flags&2097155)!==2)throw new Z(2);if((R.flags&2097155)===1)throw new Z(2);if(!R.Mb.kc)throw new Z(43);var M=R.Mb.kc(R,n,v,u,f),oe=M.Oc;return ne[k>>2]=M.Cc,we[H>>2]=oe,0}catch(z){if(typeof Ke>"u"||z.name!=="ErrnoError")throw z;return-z.Ob}},j:function(n,u,f,m,v,A,k){A=Rr(A,k);try{if(isNaN(A))return 61;var H=mt(v);if(f&2){if((H.node.mode&61440)!==32768)throw new Z(43);m&2||H.Mb.lc&&H.Mb.lc(H,S.slice(n,n+u),A,u,m)}}catch(R){if(typeof Ke>"u"||R.name!=="ErrnoError")throw R;return-R.Ob}},s:(n,u,f)=>{function m(R){return(R=R.toTimeString().match(/\(([A-Za-z ]+)\)$/))?R[1]:"GMT"}var v=new Date().getFullYear(),A=new Date(v,0,1),k=new Date(v,6,1);v=A.getTimezoneOffset();var H=k.getTimezoneOffset();we[n>>2]=60*Math.max(v,H),ne[u>>2]=+(v!=H),n=m(A),u=m(k),n=$n(n),u=$n(u),H<v?(we[f>>2]=n,we[f+4>>2]=u):(we[f>>2]=u,we[f+4>>2]=n)},e:()=>Date.now(),d:()=>performance.now(),o:n=>{var u=S.length;if(n>>>=0,2147483648<n)return!1;for(var f=1;4>=f;f*=2){var m=u*(1+.2/f);m=Math.min(m,n+100663296);var v=Math;m=Math.max(n,m);e:{v=(v.min.call(v,2147483648,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(v),qr();var A=1;break e}catch{}A=void 0}if(A)return!0}return!1},A:(n,u)=>{var f=0;return rn().forEach((m,v)=>{var A=u+f;for(v=we[n+4*v>>2]=A,A=0;A<m.length;++A)C[v++>>0]=m.charCodeAt(A);C[v>>0]=0,f+=m.length+1}),0},B:(n,u)=>{var f=rn();we[n>>2]=f.length;var m=0;return f.forEach(v=>m+=v.length+1),we[u>>2]=m,0},f:function(n){try{var u=mt(n);if(u.Wb===null)throw new Z(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(f){throw f}finally{en[u.Wb]=null}return u.Wb=null,0}catch(f){if(typeof Ke>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},p:function(n,u){try{var f=mt(n);return C[u>>0]=f.Sb?2:zt(f.mode)?3:(f.mode&61440)===40960?7:4,X[u+2>>1]=0,Ae=[0,(he=0,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[u+8>>2]=Ae[0],ne[u+12>>2]=Ae[1],Ae=[0,(he=0,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[u+16>>2]=Ae[0],ne[u+20>>2]=Ae[1],0}catch(m){if(typeof Ke>"u"||m.name!=="ErrnoError")throw m;return m.Ob}},x:function(n,u,f,m){try{e:{var v=mt(n);n=u;for(var A,k=u=0;k<f;k++){var H=we[n>>2],R=we[n+4>>2];n+=8;var M=v,oe=H,z=R,se=A,Se=C;if(0>z||0>se)throw new Z(28);if(M.Wb===null)throw new Z(8);if((M.flags&2097155)===1)throw new Z(8);if(zt(M.node.mode))throw new Z(31);if(!M.Mb.read)throw new Z(28);var Ve=typeof se<"u";if(!Ve)se=M.position;else if(!M.seekable)throw new Z(70);var kt=M.Mb.read(M,Se,oe,z,se);Ve||(M.position+=kt);var Ot=kt;if(0>Ot){var cr=-1;break e}if(u+=Ot,Ot<R)break;typeof A<"u"&&(A+=Ot)}cr=u}return we[m>>2]=cr,0}catch(Mt){if(typeof Ke>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ob}},m:function(n,u,f,m,v){u=Rr(u,f);try{if(isNaN(u))return 61;var A=mt(n);return Bo(A,u,m),Ae=[A.position>>>0,(he=A.position,1<=+Math.abs(he)?0<he?+Math.floor(he/4294967296)>>>0:~~+Math.ceil((he-+(~~he>>>0))/4294967296)>>>0:0)],ne[v>>2]=Ae[0],ne[v+4>>2]=Ae[1],A.pc&&u===0&&m===0&&(A.pc=null),0}catch(k){if(typeof Ke>"u"||k.name!=="ErrnoError")throw k;return k.Ob}},D:function(n){try{var u=mt(n);return pu(f=>{var m=u.node.Ub;m.type.Qc?m.type.Qc(m,!1,v=>{f(v?29:0)}):f(0)})}catch(f){if(typeof Ke>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},t:function(n,u,f,m){try{e:{var v=mt(n);n=u;for(var A,k=u=0;k<f;k++){var H=we[n>>2],R=we[n+4>>2];n+=8;var M=v,oe=H,z=R,se=A,Se=C;if(0>z||0>se)throw new Z(28);if(M.Wb===null)throw new Z(8);if(!(M.flags&2097155))throw new Z(8);if(zt(M.node.mode))throw new Z(31);if(!M.Mb.write)throw new Z(28);M.seekable&&M.flags&1024&&Bo(M,0,2);var Ve=typeof se<"u";if(!Ve)se=M.position;else if(!M.seekable)throw new Z(70);var kt=M.Mb.write(M,Se,oe,z,se,void 0);Ve||(M.position+=kt);var Ot=kt;if(0>Ot){var cr=-1;break e}u+=Ot,typeof A<"u"&&(A+=Ot)}cr=u}return we[m>>2]=cr,0}catch(Mt){if(typeof Ke>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ob}},ra:ki,N:Ai,ga:ar,ca:bs,Y:$o,la:au,G:Ns,h:Qo,oa:vs,ja:jo,ea:_s,fa:Dr,k:xs,v:Os,pa:Vn,g:qs,qa:uu,da:Vo,ha:cu,ia:zo,na:Wi,c:Ri,ka:Ko,ma:zn,aa:Kn,V:Pr,$:Di,ba:Ho,S:a,U:c,Z:h,X:w,R:x,Q:L,T:B,_:Ne,O:Me,W:We,P:ot},ie=function(){function n(f){return ie=f.exports,ie=wl(),N=ie.sa,qr(),Ar.unshift(ie.ta),Lt--,r.monitorRunDependencies&&r.monitorRunDependencies(Lt),Lt==0&&it&&(f=it,it=null,f()),ie}var u={a:vl};if(Lt++,r.monitorRunDependencies&&r.monitorRunDependencies(Lt),r.instantiateWasm)try{return r.instantiateWasm(u,n)}catch(f){G(`Module.instantiateWasm callback failed with error: ${f}`),o(f)}return ws(u,function(f){n(f.instance)}).catch(o),{}}();r._sqlite3_vfs_find=n=>(r._sqlite3_vfs_find=ie.ua)(n),r._sqlite3_malloc=n=>(r._sqlite3_malloc=ie.va)(n),r._sqlite3_free=n=>(r._sqlite3_free=ie.wa)(n),r._sqlite3_prepare_v2=(n,u,f,m,v)=>(r._sqlite3_prepare_v2=ie.xa)(n,u,f,m,v),r._sqlite3_step=n=>(r._sqlite3_step=ie.ya)(n),r._sqlite3_column_int64=(n,u)=>(r._sqlite3_column_int64=ie.za)(n,u),r._sqlite3_column_int=(n,u)=>(r._sqlite3_column_int=ie.Aa)(n,u),r._sqlite3_finalize=n=>(r._sqlite3_finalize=ie.Ba)(n),r._sqlite3_reset=n=>(r._sqlite3_reset=ie.Ca)(n),r._sqlite3_clear_bindings=n=>(r._sqlite3_clear_bindings=ie.Da)(n),r._sqlite3_value_blob=n=>(r._sqlite3_value_blob=ie.Ea)(n),r._sqlite3_value_text=n=>(r._sqlite3_value_text=ie.Fa)(n),r._sqlite3_value_bytes=n=>(r._sqlite3_value_bytes=ie.Ga)(n),r._sqlite3_value_double=n=>(r._sqlite3_value_double=ie.Ha)(n),r._sqlite3_value_int=n=>(r._sqlite3_value_int=ie.Ia)(n),r._sqlite3_value_int64=n=>(r._sqlite3_value_int64=ie.Ja)(n),r._sqlite3_value_type=n=>(r._sqlite3_value_type=ie.Ka)(n),r._sqlite3_result_blob=(n,u,f,m)=>(r._sqlite3_result_blob=ie.La)(n,u,f,m),r._sqlite3_result_double=(n,u)=>(r._sqlite3_result_double=ie.Ma)(n,u),r._sqlite3_result_error=(n,u,f)=>(r._sqlite3_result_error=ie.Na)(n,u,f),r._sqlite3_result_int=(n,u)=>(r._sqlite3_result_int=ie.Oa)(n,u),r._sqlite3_result_int64=(n,u,f)=>(r._sqlite3_result_int64=ie.Pa)(n,u,f),r._sqlite3_result_null=n=>(r._sqlite3_result_null=ie.Qa)(n),r._sqlite3_result_text=(n,u,f,m)=>(r._sqlite3_result_text=ie.Ra)(n,u,f,m),r._sqlite3_column_count=n=>(r._sqlite3_column_count=ie.Sa)(n),r._sqlite3_data_count=n=>(r._sqlite3_data_count=ie.Ta)(n),r._sqlite3_column_blob=(n,u)=>(r._sqlite3_column_blob=ie.Ua)(n,u),r._sqlite3_column_bytes=(n,u)=>(r._sqlite3_column_bytes=ie.Va)(n,u),r._sqlite3_column_double=(n,u)=>(r._sqlite3_column_double=ie.Wa)(n,u),r._sqlite3_column_text=(n,u)=>(r._sqlite3_column_text=ie.Xa)(n,u),r._sqlite3_column_type=(n,u)=>(r._sqlite3_column_type=ie.Ya)(n,u),r._sqlite3_column_name=(n,u)=>(r._sqlite3_column_name=ie.Za)(n,u),r._sqlite3_bind_blob=(n,u,f,m,v)=>(r._sqlite3_bind_blob=ie._a)(n,u,f,m,v),r._sqlite3_bind_double=(n,u,f)=>(r._sqlite3_bind_double=ie.$a)(n,u,f),r._sqlite3_bind_int=(n,u,f)=>(r._sqlite3_bind_int=ie.ab)(n,u,f),r._sqlite3_bind_int64=(n,u,f,m)=>(r._sqlite3_bind_int64=ie.bb)(n,u,f,m),r._sqlite3_bind_null=(n,u)=>(r._sqlite3_bind_null=ie.cb)(n,u),r._sqlite3_bind_text=(n,u,f,m,v)=>(r._sqlite3_bind_text=ie.db)(n,u,f,m,v),r._sqlite3_bind_parameter_count=n=>(r._sqlite3_bind_parameter_count=ie.eb)(n),r._sqlite3_bind_parameter_name=(n,u)=>(r._sqlite3_bind_parameter_name=ie.fb)(n,u),r._sqlite3_sql=n=>(r._sqlite3_sql=ie.gb)(n),r._sqlite3_exec=(n,u,f,m,v)=>(r._sqlite3_exec=ie.hb)(n,u,f,m,v),r._sqlite3_errmsg=n=>(r._sqlite3_errmsg=ie.ib)(n),r._sqlite3_declare_vtab=(n,u)=>(r._sqlite3_declare_vtab=ie.jb)(n,u),r._sqlite3_libversion=()=>(r._sqlite3_libversion=ie.kb)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=ie.lb)(),r._sqlite3_changes=n=>(r._sqlite3_changes=ie.mb)(n),r._sqlite3_close=n=>(r._sqlite3_close=ie.nb)(n),r._sqlite3_limit=(n,u,f)=>(r._sqlite3_limit=ie.ob)(n,u,f),r._sqlite3_open_v2=(n,u,f,m)=>(r._sqlite3_open_v2=ie.pb)(n,u,f,m),r._sqlite3_get_autocommit=n=>(r._sqlite3_get_autocommit=ie.qb)(n);var gu=()=>(gu=ie.rb)(),Xo=r._malloc=n=>(Xo=r._malloc=ie.sb)(n),bu=r._free=n=>(bu=r._free=ie.tb)(n);r._RegisterExtensionFunctions=n=>(r._RegisterExtensionFunctions=ie.ub)(n),r._set_authorizer=n=>(r._set_authorizer=ie.vb)(n),r._create_function=(n,u,f,m,v,A)=>(r._create_function=ie.wb)(n,u,f,m,v,A),r._create_module=(n,u,f,m)=>(r._create_module=ie.xb)(n,u,f,m),r._progress_handler=(n,u)=>(r._progress_handler=ie.yb)(n,u),r._register_vfs=(n,u,f,m)=>(r._register_vfs=ie.zb)(n,u,f,m),r._getSqliteFree=()=>(r._getSqliteFree=ie.Ab)();var Nu=r._main=(n,u)=>(Nu=r._main=ie.Bb)(n,u),vu=(n,u)=>(vu=ie.Db)(n,u),_u=()=>(_u=ie.Eb)(),Zo=()=>(Zo=ie.Fb)(),xu=n=>(xu=ie.Gb)(n),ea=n=>(ea=ie.Hb)(n),Ou=n=>(Ou=ie.Ib)(n),Li=()=>(Li=ie.Jb)(),ta=n=>(ta=ie.Kb)(n),qu=()=>(qu=ie.Lb)();r.getTempRet0=_u,r.ccall=Sr,r.cwrap=(n,u,f,m)=>{var v=!f||f.every(A=>A==="number"||A==="boolean");return u!=="string"&&v&&!m?r["_"+n]:function(){return Sr(n,u,f,arguments,m)}},r.setValue=xt,r.getValue=Ge,r.UTF8ToString=(n,u)=>n?q(S,n,u):"",r.stringToUTF8=(n,u,f)=>ae(n,S,u,f),r.lengthBytesUTF8=ce;var I;it=function n(){I||K(),I||(it=n)};function K(){function n(){if(!I&&(I=!0,r.calledRun=!0,!E)){if(r.noFSInit||Fo||(Fo=!0,qi(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?Cr("stdin",r.stdin):Bn("/dev/tty","/dev/stdin"),r.stdout?Cr("stdout",null,r.stdout):Bn("/dev/tty","/dev/stdout"),r.stderr?Cr("stderr",null,r.stderr):Bn("/dev/tty1","/dev/stderr"),tn("/dev/stdin",0),tn("/dev/stdout",1),tn("/dev/stderr",1)),Ln=!1,Xr(Ar),Xr(Er),i(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),fe){var u=Nu;try{var f=u(0,0);g=f,Jo(f)}catch(m){Go(m)}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)u=r.postRun.shift(),tt.unshift(u);Xr(tt)}}if(!(0<Lt)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)wr();Xr(Pt),0<Lt||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),n()},1)):n())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var fe=!0;return r.noInitialRun&&(fe=!1),K(),e.ready}})(),VN=jN,zN=As|Qi|zu|PN|Ku,$t,fo,Ja,Ga,wf,Yc,Im,Xc,Sm,bd,KN=(bd=class{constructor(){P(this,Ga);P(this,Yc);P(this,Xc);P(this,$t,As);be(this,"timeoutMillis",0);P(this,fo,new Map);P(this,Ja,Promise.resolve(0))}get state(){return s(this,$t)}async lock(t){return _e(this,Ga,wf).call(this,_e(this,Yc,Im),t)}async unlock(t){return _e(this,Ga,wf).call(this,_e(this,Xc,Sm),t)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(t,e){return new Promise(async(r,i)=>{try{await navigator.locks.request(t,e,o=>{if(r(o),o)return new Promise(l=>s(this,fo).set(t,l))})}catch(o){i(o)}})}_releaseWebLock(t){s(this,fo).get(t)?.(),s(this,fo).delete(t)}async _pollWebLock(t){return(await navigator.locks.query()).held.find(({name:r})=>r===t)?.mode}_getTimeoutSignal(){if(this.timeoutMillis){const t=new AbortController;return setTimeout(()=>t.abort(),this.timeoutMillis),t.signal}}},$t=new WeakMap,fo=new WeakMap,Ja=new WeakMap,Ga=new WeakSet,wf=async function(t,e){const r=e&zN;try{const i=()=>t.call(this,r);return await $(this,Ja,s(this,Ja).then(i,i)),$(this,$t,r),ze}catch(i){return i.name==="AbortError"?IN:(console.error(i),kN)}},Yc=new WeakSet,Im=async function(t){if(t===s(this,$t))return ze;switch(s(this,$t)){case As:switch(t){case Qi:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}case Qi:switch(t){case zu:return this._SHAREDtoRESERVED();case Ku:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}case zu:switch(t){case Ku:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}},Xc=new WeakSet,Sm=async function(t){if(t===s(this,$t))return ze;switch(s(this,$t)){case Ku:switch(t){case Qi:return this._EXCLUSIVEtoSHARED();case As:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}case zu:switch(t){case Qi:return this._RESERVEDtoSHARED();case As:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}case Qi:switch(t){case As:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}default:throw new Error(`unexpected transition ${s(this,$t)} -> ${t}`)}},bd),HN=class extends KN{constructor(t){super(),this._lockName=t+"-outer",this._reservedName=t+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},JN=5e3,GN=0,Rl=new WeakMap;function on(...t){}var ho,po,Ya,Rt,Xa,ss,os,Zc,Tm,Nd,YN=(Nd=class{constructor(t,e={durability:"default"}){P(this,Zc);P(this,ho,void 0);P(this,po,void 0);P(this,Ya,void 0);P(this,Rt,null);P(this,Xa,0);P(this,ss,Promise.resolve());P(this,os,Promise.resolve());$(this,po,Promise.resolve(t).then(r=>$(this,ho,r))),$(this,Ya,e)}async close(){const t=s(this,ho)??await s(this,po);await s(this,ss),await this.sync(),t.close()}async run(t,e){const r=s(this,ss).then(()=>_e(this,Zc,Tm).call(this,t,e));return $(this,ss,r.catch(()=>{})),r}async sync(){await s(this,ss),await s(this,os),$(this,os,Promise.resolve())}},ho=new WeakMap,po=new WeakMap,Ya=new WeakMap,Rt=new WeakMap,Xa=new WeakMap,ss=new WeakMap,os=new WeakMap,Zc=new WeakSet,Tm=async function(t,e){const r=s(this,ho)??await s(this,po);if(t==="readwrite"&&s(this,Rt)?.mode==="readonly")$(this,Rt,null);else if(performance.now()-s(this,Xa)>JN){try{s(this,Rt)?.commit()}catch(i){if(i.name!=="InvalidStateError")throw i}await new Promise(i=>setTimeout(i)),$(this,Rt,null)}for(let i=0;i<2;++i){if(!s(this,Rt)){$(this,Rt,r.transaction(r.objectStoreNames,t,s(this,Ya)));const o=$(this,Xa,performance.now());$(this,os,s(this,os).then(()=>new Promise((l,y)=>{s(this,Rt).addEventListener("complete",b=>{l(),s(this,Rt)===b.target&&$(this,Rt,null),on(`transaction ${Rl.get(b.target)} complete`)}),s(this,Rt).addEventListener("abort",b=>{console.warn("tx abort",(performance.now()-o)/1e3);const O=b.target.error;y(O),s(this,Rt)===b.target&&$(this,Rt,null),on(`transaction ${Rl.get(b.target)} aborted`,O)})}))),Rl.set(s(this,Rt),GN++)}try{const o=Object.fromEntries(Array.from(r.objectStoreNames,l=>[l,new XN(s(this,Rt).objectStore(l))]));return await e(o)}catch(o){if($(this,Rt,null),i)throw o}}},Nd);function Xn(t){return new Promise((e,r)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>r(t.error))})}var St,vd,XN=(vd=class{constructor(t){P(this,St,void 0);$(this,St,t)}get(t){on(`get ${s(this,St).name}`,t);const e=s(this,St).get(t);return Xn(e)}getAll(t,e){on(`getAll ${s(this,St).name}`,t,e);const r=s(this,St).getAll(t,e);return Xn(r)}getKey(t){on(`getKey ${s(this,St).name}`,t);const e=s(this,St).getKey(t);return Xn(e)}getAllKeys(t,e){on(`getAllKeys ${s(this,St).name}`,t,e);const r=s(this,St).getAllKeys(t,e);return Xn(r)}put(t,e){on(`put ${s(this,St).name}`,t,e);const r=s(this,St).put(t,e);return Xn(r)}delete(t){on(`delete ${s(this,St).name}`,t);const e=s(this,St).delete(t);return Xn(e)}clear(){on(`clear ${s(this,St).name}`);const t=s(this,St).clear();return Xn(t)}index(t){return new ZN(s(this,St).index(t))}},St=new WeakMap,vd),as,_d,ZN=(_d=class{constructor(t){P(this,as,void 0);$(this,as,t)}getAllKeys(t,e){on(`IDBIndex.getAllKeys ${s(this,as).objectStore.name}<${s(this,as).name}>`,t,e);const r=s(this,as).getAllKeys(t,e);return Xn(r)}},as=new WeakMap,_d),ev=512,pd=3e3,md={durability:"default",purge:"deferred",purgeAtLeast:16};function lr(...t){}var fi,Qt,at,us,cs,kn,Za,gf,el,km,tl,Am,hi,Ws,rl,Wm,xd,tv=(xd=class extends QN{constructor(e="wa-sqlite",r=md){super();P(this,Za);P(this,el);P(this,tl);P(this,hi);P(this,rl);P(this,fi,void 0);P(this,Qt,new Map);P(this,at,void 0);P(this,us,new Set);P(this,cs,performance.now());P(this,kn,new Set);this.name=e,$(this,fi,Object.assign({},md,r)),$(this,at,new YN(rv(e),{durability:s(this,fi).durability}))}async close(){for(const e of s(this,Qt).keys())await this.xClose(e);await s(this,at)?.close(),$(this,at,null)}xOpen(e,r,i,o){return this.handleAsync(async()=>{e===null&&(e=`null_${r}`),lr(`xOpen ${e} 0x${r.toString(16)} 0x${i.toString(16)}`);try{const l=new URL(e,"http://localhost/"),y={path:l.pathname,flags:i,block0:null,isMetadataChanged:!0,locks:new HN(l.pathname)};return s(this,Qt).set(r,y),await s(this,at).run("readwrite",async({blocks:b})=>{if(y.block0=await b.get(_e(this,hi,Ws).call(this,y,0)),!y.block0)if(i&Cm)y.block0={path:y.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},b.put(y.block0);else throw new Error(`file not found: ${y.path}`)}),o.setInt32(0,i&WN,!0),ze}catch(l){return console.error(l),Em}})}xClose(e){return this.handleAsync(async()=>{try{const r=s(this,Qt).get(e);return r&&(lr(`xClose ${r.path}`),s(this,Qt).delete(e),r.flags&DN&&s(this,at).run("readwrite",({blocks:i})=>{i.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),ze}catch(r){return console.error(r),bt}})}xRead(e,r,i){return this.handleAsync(async()=>{const o=s(this,Qt).get(e);lr(`xRead ${o.path} ${r.byteLength} ${i}`);try{return await s(this,at).run("readonly",async({blocks:y})=>{let b=0;for(;b<r.byteLength;){const O=i+b,d=O<o.block0.data.byteLength?o.block0:await y.get(_e(this,hi,Ws).call(this,o,-O));if(!d||d.data.byteLength-d.offset<=O)return r.fill(0,b),AN;const T=r.subarray(b),W=O+d.offset,ee=Math.min(Math.max(d.data.byteLength-W,0),T.byteLength);T.set(d.data.subarray(W,W+ee)),b+=ee}return ze})}catch(l){return console.error(l),bt}})}xWrite(e,r,i){const o=s(this,kn).has(e);if(o||performance.now()-s(this,cs)>pd){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&s(this,kn).add(e),await new Promise(b=>setTimeout(b));const y=_e(this,Za,gf).call(this,e,r,i);return $(this,cs,performance.now()),y});return o&&s(this,kn).delete(e),l}return _e(this,Za,gf).call(this,e,r,i)}xTruncate(e,r){const i=s(this,Qt).get(e);lr(`xTruncate ${i.path} ${r}`);try{Object.assign(i.block0,{fileSize:r,data:i.block0.data.slice(0,r)});const o=Object.assign({},i.block0);return s(this,at).run("readwrite",({blocks:l})=>{l.delete(_e(this,hi,Ws).call(this,i,-1/0,-r)),l.put(o)}),ze}catch(o){return console.error(o),bt}}xSync(e,r){const i=s(this,kn).has(e);if(i||s(this,fi).durability!=="relaxed"||performance.now()-s(this,cs)>pd){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&s(this,kn).add(e);const y=await _e(this,el,km).call(this,e,r);return $(this,cs,performance.now()),y});return i&&s(this,kn).delete(e),l}const o=s(this,Qt).get(e);return lr(`xSync ${o.path} ${r}`),ze}xFileSize(e,r){const i=s(this,Qt).get(e);return lr(`xFileSize ${i.path}`),r.setBigInt64(0,BigInt(i.block0.fileSize),!0),ze}xLock(e,r){return this.handleAsync(async()=>{const i=s(this,Qt).get(e);lr(`xLock ${i.path} ${r}`);try{const o=await i.locks.lock(r);return o===ze&&i.locks.state===Qi&&(i.block0=await s(this,at).run("readonly",({blocks:l})=>l.get(_e(this,hi,Ws).call(this,i,0)))),o}catch(o){return console.error(o),bt}})}xUnlock(e,r){return this.handleAsync(async()=>{const i=s(this,Qt).get(e);lr(`xUnlock ${i.path} ${r}`);try{return i.locks.unlock(r)}catch(o){return console.error(o),bt}})}xCheckReservedLock(e,r){return this.handleAsync(async()=>{const i=s(this,Qt).get(e);lr(`xCheckReservedLock ${i.path}`);const o=await i.locks.isSomewhereReserved();return r.setInt32(0,o?1:0,!0),ze})}xSectorSize(e){return ev}xDeviceCharacteristics(e){return FN|LN|MN|BN}xFileControl(e,r,i){const o=s(this,Qt).get(e);switch(lr(`xFileControl ${o.path} ${r}`),r){case 11:return o.overwrite=!0,ze;case 21:if(o.overwrite)try{return this.handleAsync(async()=>(await _e(this,rl,Wm).call(this,o),ze))}catch(l){return console.error(l),bt}if(o.isMetadataChanged)try{s(this,at).run("readwrite",async({blocks:l})=>{await l.put(o.block0)}),o.isMetadataChanged=!1}catch(l){return console.error(l),bt}return ze;case 22:return o.overwrite=!1,ze;case 31:return this.handleAsync(async()=>{try{return o.block0.version--,o.changedPages=new Set,s(this,at).run("readwrite",async({blocks:l})=>{const y=await l.index("version").getAllKeys(IDBKeyRange.bound([o.path],[o.path,o.block0.version]));for(const b of y)l.delete(b)}),ze}catch(l){return console.error(l),bt}});case 32:try{const l=Object.assign({},o.block0);l.data=l.data.slice();const y=o.changedPages;return o.changedPages=null,o.isMetadataChanged=!1,s(this,at).run("readwrite",async({blocks:b})=>{b.put(l);const O=await b.get([o.path,"purge",0])??{path:o.path,offset:"purge",version:0,data:new Map,count:0};O.count+=y.size;for(const d of y)O.data.set(d,l.version);b.put(O),_e(this,tl,Am).call(this,o.path,O.count)}),ze}catch(l){return console.error(l),bt}case 33:return this.handleAsync(async()=>{try{return o.changedPages=null,o.isMetadataChanged=!1,o.block0=await s(this,at).run("readonly",({blocks:l})=>l.get([o.path,0,o.block0.version+1])),ze}catch(l){return console.error(l),bt}});default:return qm}}xAccess(e,r,i){return this.handleAsync(async()=>{try{const o=new URL(e,"file://localhost/").pathname;lr(`xAccess ${o} ${r}`);const l=await s(this,at).run("readonly",({blocks:y})=>y.getKey(_e(this,hi,Ws).call(this,{path:o},0)));return i.setInt32(0,l?1:0,!0),ze}catch(o){return console.error(o),bt}})}xDelete(e,r){return this.handleAsync(async()=>{const i=new URL(e,"file://localhost/").pathname;try{return s(this,at).run("readwrite",({blocks:o})=>o.delete(IDBKeyRange.bound([i],[i,[]]))),r&&await s(this,at).sync(),ze}catch(o){return console.error(o),bt}})}async purge(e){const r=Date.now();await s(this,at).run("readwrite",async({blocks:i})=>{const o=await i.get([e,"purge",0]);if(o){for(const[l,y]of o.data)i.delete(IDBKeyRange.bound([e,l,y],[e,l,1/0],!0,!1));await i.delete([e,"purge",0])}lr(`purge ${e} ${o?.data.size??0} pages in ${Date.now()-r} ms`)})}},fi=new WeakMap,Qt=new WeakMap,at=new WeakMap,us=new WeakMap,cs=new WeakMap,kn=new WeakMap,Za=new WeakSet,gf=function(e,r,i){const o=s(this,Qt).get(e);lr(`xWrite ${o.path} ${r.byteLength} ${i}`);try{const l=o.block0.fileSize;o.block0.fileSize<i+r.byteLength&&(o.block0.fileSize=i+r.byteLength,o.isMetadataChanged=!0);const y=i===0?o.block0:{path:o.path,offset:-i,version:o.block0.version,data:null};return y.data=r.slice(),o.changedPages?(l===o.block0.fileSize&&o.changedPages.add(-i),i!==0&&s(this,at).run("readwrite",({blocks:b})=>b.put(y))):s(this,at).run("readwrite",({blocks:b})=>b.put(y)),o.isMetadataChanged=i===0?!1:o.isMetadataChanged,ze}catch(l){return console.error(l),bt}},el=new WeakSet,km=async function(e,r){const i=s(this,Qt).get(e);lr(`xSync ${i.path} ${r}`);try{i.isMetadataChanged&&(s(this,at).run("readwrite",async({blocks:o})=>{await o.put(i.block0)}),i.isMetadataChanged=!1),await s(this,at).sync()}catch(o){return console.error(o),bt}return ze},tl=new WeakSet,Am=function(e,r){s(this,fi).purge==="manual"||s(this,us).has(e)||r<s(this,fi).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(e),s(this,us).delete(e)}):setTimeout(()=>{this.purge(e),s(this,us).delete(e)}),s(this,us).add(e))},hi=new WeakSet,Ws=function(e,r,i=0){const o=!r||-r<e.block0.data.length?-1/0:e.block0.version;return IDBKeyRange.bound([e.path,r,o],[e.path,i,1/0])},rl=new WeakSet,Wm=async function(e){const r=e.block0.data.length;if(r<18)return;const i=new DataView(e.block0.data.buffer,e.block0.data.byteOffset);let o=i.getUint16(16);if(o===1&&(o=65536),o===r)return;const l=Math.max(r,o),y=l/r,b=l/o,d=i.getUint32(28)*o,T=e.block0.version;await s(this,at).run("readwrite",async({blocks:W})=>{const ee=await W.index("version").getAllKeys(IDBKeyRange.bound([e.path,T+1],[e.path,1/0]));for(const G of ee)W.delete(G);W.delete([e.path,"purge",0]);for(let G=0;G<d;G+=l){const ue=await W.getAll(IDBKeyRange.lowerBound([e.path,-(G+l),1/0]),y);for(const N of ue)W.delete([N.path,N.offset,N.version]);if(b===1){const N=new Uint8Array(o);for(const g of ue)N.set(g.data,-(G+g.offset));const E={path:e.path,offset:-G,version:T,data:N};E.offset===0&&(E.fileSize=d,e.block0=E),W.put(E)}else{const N=ue[0];for(let E=0;E<b;++E){const g=-(G+E*o);if(-g>=d)break;const C={path:N.path,offset:g,version:T,data:N.data.subarray(E*o,(E+1)*o)};C.offset===0&&(C.fileSize=d,e.block0=C),W.put(C)}}}})},xd);function rv(t){return new Promise((e,r)=>{const i=globalThis.indexedDB.open(t,5);i.addEventListener("upgradeneeded",function(){i.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),i.addEventListener("success",()=>{e(i.result)}),i.addEventListener("error",()=>{r(i.error)})})}async function nv(t,e={}){const{url:r,...i}=e,o=await VN(r?{locateFile:()=>r}:void 0),l=new tv(t,{durability:"relaxed",...i});return{fileName:t,sqliteModule:o,vfs:l}}const iv="/assets/wa-sqlite-async-715b3d85.wasm",sv=new jb({async database(){return await $N(nv("test idb",{url:iv}))}});function ov(){console.log("start wa-sqlite test"),eh(sv).then(t=>{t?.forEach(e=>console.log("[wa-sqlite]",e))})}var av=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let i;e?r?(i=t.get(e))&&i.splice(i.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(i=>i(...r))},once(e,r){let i=(...o)=>{r(...o),this.off(e,i)};this.on(e,i)}});function uv(){return"locks"in navigator}function Rm(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};return"importScripts"in globalThis?t():new Promise((e,r)=>{typeof Worker>"u"&&e(!1);const i=URL.createObjectURL(new Blob([`onmessage=()=>{(${t})().then(postMessage)}`],{type:"text/javascript"})),o=new Worker(i,{type:"module"});o.onmessage=({data:l})=>{URL.revokeObjectURL(i),o.terminate(),e(l)},o.onerror=()=>{o.terminate(),r(!1)},o.postMessage("")}).catch(()=>!1)}function Dm(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function yd(t,e){return typeof t=="function"?t(e):e}function cv(t){return t?new Worker(new URL("/assets/worker-9d1266b8.js",self.location),{type:"module"}):new Worker(new URL("/assets/worker-f8db2b25.js",self.location))}function lv(t){return t?new URL("/assets/wa-sqlite-async-715b3d85.wasm",self.location).href:new URL("/assets/wa-sqlite-8ce1cb2d.wasm",self.location).href}var fv=class{constructor(t){be(this,"config");be(this,"worker");be(this,"connection");be(this,"connectionMutex",new hv);be(this,"mitt");this.config=t}async init(){const t=this.config.preferOPFS??!0?await Rm():!1;this.worker=yd(this.config.worker||cv,t||Dm()),this.mitt=av(),this.worker.onmessage=({data:{type:e,...r}})=>{this.mitt?.emit(e,r)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:yd(this.config.url||lv,!t),useOPFS:t}),await new Promise((e,r)=>{this.mitt?.once("init",({err:i})=>{i?r(i):e()})}),this.connection=new dv(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(wn.raw("begin"))}async commitTransaction(t){await t.executeQuery(wn.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(wn.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},hv=class{constructor(){be(this,"promise");be(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},dv=class{constructor(t,e){be(this,"worker");be(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:i}=t,o=Re.is(i);return this.worker.postMessage({type:"run",isSelect:o,sql:r,parameters:e}),new Promise((l,y)=>{!this.mitt&&y("kysely instance has been destroyed"),this.mitt.once("run",({data:b,err:O})=>{!O&&b?l(b):y(O)})})}},eu,Od,pv=(Od=class{constructor(t){P(this,eu,void 0);$(this,eu,t)}createDriver(){return new fv(s(this,eu))}createQueryCompiler(){return new cm}createAdapter(){return new pm}createIntrospector(t){return new hm(t)}},eu=new WeakMap,Od);const mv=new pv({fileName:"wa-sqlite-worker-test"});async function yv(){console.log("start wa-sqlite-worker test"),eh(mv).then(async t=>{t?.forEach(o=>console.log("[wa-sqlite-worker]",o));const e=Dm(),r=uv(),i=await Rm();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",i)})}const wv=Ct("h1",null,[qa(" test "),Ct("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),qa(" WASM dialect ")],-1),gv=Ct("br",null,null,-1),bv=Ct("h3",null,"see worker result in console",-1),Nv=Ct("h3",null,[qa(" you can explore "),Ct("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),qa(" file using "),Ct("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),vv=Ct("br",null,null,-1),_v={class:"buttons"},xv=Ct("br",null,null,-1),Ov=Ct("div",null," result run in main thread: ",-1),qv=jy({__name:"App",setup(t){const e=new EN,{result:r,run:i}=qN(),o=new CN;function l(){i()}function y(){e.postMessage("")}function b(){o.postMessage("")}function O(){ov()}function d(){yv()}async function T(){try{(await window.indexedDB.databases()).forEach(G=>window.indexedDB.deleteDatabase(G.name))}catch{}}async function W(){console.clear(),await rd("sqljs"),await rd("sqljsWorker"),await T();const ee=await navigator.storage?.getDirectory();try{await ee.removeEntry("test.db")}catch{}try{await ee.removeEntry("test.db-journal")}catch{}try{await ee.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(ee,G)=>(_w(),qw(ln,null,[wv,gv,bv,Nv,vv,Ct("div",_v,[Ct("button",{onClick:G[0]||(G[0]=ue=>l())}," test sqljs in main thread "),Ct("button",{onClick:G[1]||(G[1]=ue=>y())}," test sqljs in Worker "),Ct("button",{onClick:G[2]||(G[2]=ue=>b())}," test officialWasm in Worker "),Ct("button",{onClick:G[3]||(G[3]=ue=>O())}," test wa-sqlite in main thread "),Ct("button",{onClick:G[4]||(G[4]=ue=>d())}," test wa-sqlite in Worker "),Ct("button",{onClick:G[5]||(G[5]=ue=>W())}," clear ")]),xv,Ov,Ct("pre",null,""+Ym(Kd(r))+`
  `,1)],64))}});cg(qv).mount("#root");
