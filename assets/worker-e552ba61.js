var Ca=Object.defineProperty;var Na=(K,j,z)=>j in K?Ca(K,j,{enumerable:!0,configurable:!0,writable:!0,value:z}):K[j]=z;var Tt=(K,j,z)=>(Na(K,typeof j!="symbol"?j+"":j,z),z),Vt=(K,j,z)=>{if(!j.has(K))throw TypeError("Cannot "+z)};var _=(K,j,z)=>(Vt(K,j,"read from private field"),z?z.call(K):j.get(K)),H=(K,j,z)=>{if(j.has(K))throw TypeError("Cannot add the same private member more than once");j instanceof WeakSet?j.add(K):j.set(K,z)},X=(K,j,z,ye)=>(Vt(K,j,"write to private field"),ye?ye.call(K,z):j.set(K,z),z);var ue=(K,j,z)=>(Vt(K,j,"access private method"),z);(function(){var re,Fe,Ke,Le,Ht,nt,zr,rt,Tr,Kt,ze,Te,Xe,ee,Ze,Ve,De,at,Vr,Lt,J,Xt,Ce,Zt,xe,ae,Z,Ne,Oe,ge,Ge,Bt,it,Hr,ut,Br,Ee,je,ot,Wr,Gt;"use strict";var K=0x7fffffffffffffffn,j=-0x8000000000000000n,z=class extends Error{constructor(s,i){super(s),this.code=i}},ye=!0;function jr(s){let i={},r=s._getSqliteFree(),g=s._malloc(8),p=[g,g+4];function k(o){if(typeof o!="string")return 0;let c=s.lengthBytesUTF8(o),l=s._sqlite3_malloc(c+1);return s.stringToUTF8(o,l,c+1),l}function D(o,c){return BigInt(c)<<32n|BigInt(o)&0xffffffffn}let I=function(){let o=BigInt(Number.MAX_SAFE_INTEGER)>>32n,c=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(l,m){return m>o||m<c?D(l,m):m*4294967296+(l&2147483647)-(l&2147483648)}}(),T=new Set;function S(o){if(!T.has(o))throw new z("not a database",21)}let N=new Map;function $(o){if(!N.has(o))throw new z("not a statement",21)}i.bind_collection=function(o,c){$(o);let l=Array.isArray(c),m=i.bind_parameter_count(o);for(let v=1;v<=m;++v){let A=l?v-1:i.bind_parameter_name(o,v),L=c[A];L!==void 0&&i.bind(o,v,L)}return 0},i.bind=function(o,c,l){switch($(o),typeof l){case"number":return l===(l|0)?i.bind_int(o,c,l):i.bind_double(o,c,l);case"string":return i.bind_text(o,c,l);default:return l instanceof Uint8Array||Array.isArray(l)?i.bind_blob(o,c,l):l===null?i.bind_null(o,c):typeof l=="bigint"?i.bind_int64(o,c,l):l===void 0?27:(console.warn("unknown binding converted to null",l),i.bind_null(o,c))}},i.bind_blob=function(){let o="sqlite3_bind_blob",c=s.cwrap(o,...C("nnnnn:n"));return function(l,m,v){$(l);let A=v.byteLength??v.length,L=s._sqlite3_malloc(A);s.HEAPU8.subarray(L).set(v);let R=c(l,m,L,A,r);return P(o,R,N.get(l))}}(),i.bind_parameter_count=function(){let o="sqlite3_bind_parameter_count",c=s.cwrap(o,...C("n:n"));return function(l){return $(l),c(l)}}(),i.bind_double=function(){let o="sqlite3_bind_double",c=s.cwrap(o,...C("nnn:n"));return function(l,m,v){$(l);let A=c(l,m,v);return P(o,A,N.get(l))}}(),i.bind_int=function(){let o="sqlite3_bind_int",c=s.cwrap(o,...C("nnn:n"));return function(l,m,v){if($(l),v>2147483647||v<-2147483648)return 25;let A=c(l,m,v);return P(o,A,N.get(l))}}(),i.bind_int64=function(){let o="sqlite3_bind_int64",c=s.cwrap(o,...C("nnnn:n"));return function(l,m,v){if($(l),v>K||v<j)return 25;let A=v&0xffffffffn,L=v>>32n,R=c(l,m,Number(A),Number(L));return P(o,R,N.get(l))}}(),i.bind_null=function(){let o="sqlite3_bind_null",c=s.cwrap(o,...C("nn:n"));return function(l,m){$(l);let v=c(l,m);return P(o,v,N.get(l))}}(),i.bind_parameter_name=function(){let o="sqlite3_bind_parameter_name",c=s.cwrap(o,...C("n:s"));return function(l,m){return $(l),c(l,m)}}(),i.bind_text=function(){let o="sqlite3_bind_text",c=s.cwrap(o,...C("nnnnn:n"));return function(l,m,v){$(l);let A=k(v),L=c(l,m,A,-1,r);return P(o,L,N.get(l))}}(),i.changes=function(){let o="sqlite3_changes",c=s.cwrap(o,...C("n:n"));return function(l){return S(l),c(l)}}(),i.close=function(){let o="sqlite3_close",c=s.cwrap(o,...C("n:n"),{async:ye});return async function(l){S(l);let m=await c(l);return T.delete(l),P(o,m,l)}}(),i.column=function(o,c){$(o);let l=i.column_type(o,c);switch(l){case 4:return i.column_blob(o,c);case 2:return i.column_double(o,c);case 1:let m=i.column_int(o,c),v=s.getTempRet0();return I(m,v);case 5:return null;case 3:return i.column_text(o,c);default:throw new z("unknown type",l)}},i.column_blob=function(){let o="sqlite3_column_blob",c=s.cwrap(o,...C("nn:n"));return function(l,m){$(l);let v=i.column_bytes(l,m),A=c(l,m);return s.HEAPU8.subarray(A,A+v)}}(),i.column_bytes=function(){let o="sqlite3_column_bytes",c=s.cwrap(o,...C("nn:n"));return function(l,m){return $(l),c(l,m)}}(),i.column_count=function(){let o="sqlite3_column_count",c=s.cwrap(o,...C("n:n"));return function(l){return $(l),c(l)}}(),i.column_double=function(){let o="sqlite3_column_double",c=s.cwrap(o,...C("nn:n"));return function(l,m){return $(l),c(l,m)}}(),i.column_int=function(){let o="sqlite3_column_int64",c=s.cwrap(o,...C("nn:n"));return function(l,m){return $(l),c(l,m)}}(),i.column_int64=function(){let o="sqlite3_column_int64",c=s.cwrap(o,...C("nn:n"));return function(l,m){$(l);let v=c(l,m),A=s.getTempRet0();return D(v,A)}}(),i.column_name=function(){let o="sqlite3_column_name",c=s.cwrap(o,...C("nn:s"));return function(l,m){return $(l),c(l,m)}}(),i.column_names=function(o){let c=[],l=i.column_count(o);for(let m=0;m<l;++m)c.push(i.column_name(o,m));return c},i.column_text=function(){let o="sqlite3_column_text",c=s.cwrap(o,...C("nn:s"));return function(l,m){return $(l),c(l,m)}}(),i.column_type=function(){let o="sqlite3_column_type",c=s.cwrap(o,...C("nn:n"));return function(l,m){return $(l),c(l,m)}}(),i.create_function=function(o,c,l,m,v,A,L,R){if(S(o),A&&!L&&!R){let F=s.createFunction(o,c,l,m,v,A);return P("sqlite3_create_function",F,o)}if(!A&&L&&R){let F=s.createAggregate(o,c,l,m,v,L,R);return P("sqlite3_create_function",F,o)}throw new z("invalid function combination",21)},i.create_module=function(o,c,l,m){S(o);let v=s.createModule(o,c,l,m);return P("sqlite3_create_module",v,o)},i.data_count=function(){let o="sqlite3_data_count",c=s.cwrap(o,...C("n:n"));return function(l){return $(l),c(l)}}(),i.declare_vtab=function(){let o="sqlite3_declare_vtab",c=s.cwrap(o,...C("ns:n"));return function(l,m){let v=c(l,m);return P("sqlite3_declare_vtab",v)}}(),i.exec=async function(o,c,l){for await(let m of i.statements(o,c)){let v;for(;await i.step(m)===100;)if(l){v=v??i.column_names(m);let A=i.row(m);await l(A,v)}}return 0},i.finalize=function(){let o="sqlite3_finalize",c=s.cwrap(o,...C("n:n"),{async:ye});return async function(l){if(!N.has(l))return 21;let m=await c(l);return N.get(l),N.delete(l),m}}(),i.get_autocommit=function(){let o="sqlite3_get_autocommit",c=s.cwrap(o,...C("n:n"));return function(l){return c(l)}}(),i.libversion=function(){let o="sqlite3_libversion",c=s.cwrap(o,...C(":s"));return function(){return c()}}(),i.libversion_number=function(){let o="sqlite3_libversion_number",c=s.cwrap(o,...C(":n"));return function(){return c()}}(),i.limit=function(){let o="sqlite3_limit",c=s.cwrap(o,...C("nnn:n"));return function(l,m,v){return c(l,m,v)}}(),i.open_v2=function(){let o="sqlite3_open_v2",c=s.cwrap(o,...C("snnn:n"),{async:ye});return async function(l,m,v){m=m||6,v=k(v);let A=await c(l,p[0],m,v),L=s.getValue(p[0],"*");return T.add(L),s._sqlite3_free(v),s.ccall("RegisterExtensionFunctions","void",["number"],[L]),P(o,A),L}}(),i.prepare_v2=function(){let o="sqlite3_prepare_v2",c=s.cwrap(o,...C("nnnnn:n"),{async:ye});return async function(l,m){let v=await c(l,m,-1,p[0],p[1]);P(o,v,l);let A=s.getValue(p[0],"*");return A?(N.set(A,l),{stmt:A,sql:s.getValue(p[1],"*")}):null}}(),i.progress_handler=function(o,c,l,m){S(o),s.progressHandler(o,c,l,m)},i.reset=function(){let o="sqlite3_reset",c=s.cwrap(o,...C("n:n"),{async:ye});return async function(l){$(l);let m=await c(l);return P(o,m,N.get(l))}}(),i.result=function(o,c){switch(typeof c){case"number":c===(c|0)?i.result_int(o,c):i.result_double(o,c);break;case"string":i.result_text(o,c);break;default:if(c instanceof Uint8Array||Array.isArray(c))i.result_blob(o,c);else if(c===null)i.result_null(o);else{if(typeof c=="bigint")return i.result_int64(o,c);console.warn("unknown result converted to null",c),i.result_null(o)}break}},i.result_blob=function(){let o="sqlite3_result_blob",c=s.cwrap(o,...C("nnnn:n"));return function(l,m){let v=m.byteLength??m.length,A=s._sqlite3_malloc(v);s.HEAPU8.subarray(A).set(m),c(l,A,v,r)}}(),i.result_double=function(){let o="sqlite3_result_double",c=s.cwrap(o,...C("nn:n"));return function(l,m){c(l,m)}}(),i.result_int=function(){let o="sqlite3_result_int",c=s.cwrap(o,...C("nn:n"));return function(l,m){c(l,m)}}(),i.result_int64=function(){let o="sqlite3_result_int64",c=s.cwrap(o,...C("nnn:n"));return function(l,m){if(m>K||m<j)return 25;let v=m&0xffffffffn,A=m>>32n;c(l,Number(v),Number(A))}}(),i.result_null=function(){let o="sqlite3_result_null",c=s.cwrap(o,...C("n:n"));return function(l){c(l)}}(),i.result_text=function(){let o="sqlite3_result_text",c=s.cwrap(o,...C("nnnn:n"));return function(l,m){let v=k(m);c(l,v,-1,r)}}(),i.row=function(o){let c=[],l=i.data_count(o);for(let m=0;m<l;++m){let v=i.column(o,m);c.push((v==null?void 0:v.buffer)===s.HEAPU8.buffer?v.slice():v)}return c},i.set_authorizer=function(o,c,l){S(o);let m=s.setAuthorizer(o,c,l);return P("sqlite3_set_authorizer",m,o)},i.sql=function(){let o="sqlite3_sql",c=s.cwrap(o,...C("n:s"));return function(l){return $(l),c(l)}}(),i.statements=function(o,c){return async function*(){let l=i.str_new(o,c),m={stmt:null,sql:i.str_value(l)};try{for(;m=await i.prepare_v2(o,m.sql);)yield m.stmt,i.finalize(m.stmt),m.stmt=null}finally{m!=null&&m.stmt&&i.finalize(m.stmt),i.str_finish(l)}}()},i.step=function(){let o="sqlite3_step",c=s.cwrap(o,...C("n:n"),{async:ye});return async function(l){$(l);let m=await c(l);return P(o,m,N.get(l),[100,101])}}();let fe=0,G=new Map;i.str_new=function(o,c=""){let l=s.lengthBytesUTF8(c),m=fe++&4294967295,v={offset:s._sqlite3_malloc(l+1),bytes:l};return G.set(m,v),s.stringToUTF8(c,v.offset,v.bytes+1),m},i.str_appendall=function(o,c){if(!G.has(o))throw new z("not a string",21);let l=G.get(o),m=s.lengthBytesUTF8(c),v=l.bytes+m,A=s._sqlite3_malloc(v+1);s.HEAPU8.subarray(A,A+v+1).set(s.HEAPU8.subarray(l.offset,l.offset+l.bytes)),s.stringToUTF8(c,A+l.bytes,m+1),s._sqlite3_free(l.offset),l.offset=A,l.bytes=v,G.set(o,l)},i.str_finish=function(o){if(!G.has(o))throw new z("not a string",21);let c=G.get(o);G.delete(o),s._sqlite3_free(c.offset)},i.str_value=function(o){if(!G.has(o))throw new z("not a string",21);return G.get(o).offset},i.user_data=function(o){return s.getFunctionUserData(o)},i.value=function(o){let c=i.value_type(o);switch(c){case 4:return i.value_blob(o);case 2:return i.value_double(o);case 1:let l=i.value_int(o),m=s.getTempRet0();return I(l,m);case 5:return null;case 3:return i.value_text(o);default:throw new z("unknown type",c)}},i.value_blob=function(){let o="sqlite3_value_blob",c=s.cwrap(o,...C("n:n"));return function(l){let m=i.value_bytes(l),v=c(l);return s.HEAPU8.subarray(v,v+m)}}(),i.value_bytes=function(){let o="sqlite3_value_bytes",c=s.cwrap(o,...C("n:n"));return function(l){return c(l)}}(),i.value_double=function(){let o="sqlite3_value_double",c=s.cwrap(o,...C("n:n"));return function(l){return c(l)}}(),i.value_int=function(){let o="sqlite3_value_int64",c=s.cwrap(o,...C("n:n"));return function(l){return c(l)}}(),i.value_int64=function(){let o="sqlite3_value_int64",c=s.cwrap(o,...C("n:n"));return function(l){let m=c(l),v=s.getTempRet0();return D(m,v)}}(),i.value_text=function(){let o="sqlite3_value_text",c=s.cwrap(o,...C("n:s"));return function(l){return c(l)}}(),i.value_type=function(){let o="sqlite3_value_type",c=s.cwrap(o,...C("n:n"));return function(l){return c(l)}}(),i.vfs_register=function(o,c){let l=s.registerVFS(o,c);return P("sqlite3_vfs_register",l)};function P(o,c,l=null,m=[0]){if(m.includes(c))return c;let v=l?s.ccall("sqlite3_errmsg","string",["number"],[l]):o;throw new z(v,c)}return i}function C(s){let i=[],r=s.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":i.push("number");break;case"s":i.push("string");break;case"v":i.push(null);break}let g=[];for(let p of r[1])switch(p){case"n":g.push("number");break;case"s":g.push("string");break}return i.push(g),i}var Qr=(()=>{var s=self.location.href;return function(i={}){var r;r||(r=typeof i<"u"?i:{});var g,p;r.ready=new Promise((e,t)=>{g=e,p=t});var k=Object.assign({},r),D="./this.program",I=(e,t)=>{throw t},T=typeof window=="object",S=typeof importScripts=="function",N="",$;(T||S)&&(S?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),s&&(N=s),N.indexOf("blob:")!==0?N=N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):N="",S&&($=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var fe=r.print||console.log.bind(console),G=r.printErr||console.warn.bind(console);Object.assign(r,k),k=null,r.thisProgram&&(D=r.thisProgram),r.quit&&(I=r.quit);var P;r.wasmBinary&&(P=r.wasmBinary);var o=r.noExitRuntime||!0;typeof WebAssembly!="object"&&be("no native wasm support detected");var c,l=!1,m,v,A,L,R,F,qt,kt;function Yt(){var e=c.buffer;r.HEAP8=v=new Int8Array(e),r.HEAP16=L=new Int16Array(e),r.HEAP32=R=new Int32Array(e),r.HEAPU8=A=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=F=new Uint32Array(e),r.HEAPF32=qt=new Float32Array(e),r.HEAPF64=kt=new Float64Array(e)}var Jt=[],en=[],sa=[],tn=[],st=0;function la(){var e=r.preRun.shift();Jt.unshift(e)}var Ue=0,Ye=null;function be(e){throw r.onAbort&&r.onAbort(e),e="Aborted("+e+")",G(e),l=!0,m=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),p(e),e}function nn(e){return e.startsWith("data:application/octet-stream;base64,")}var Ie;if(r.locateFile){if(Ie="wa-sqlite-async.wasm",!nn(Ie)){var rn=Ie;Ie=r.locateFile?r.locateFile(rn,N):N+rn}}else Ie=new URL(""+new URL("wa-sqlite-async-24800831.wasm",self.location.href).href,self.location).href;function an(e){try{if(e==Ie&&P)return new Uint8Array(P);if($)return $(e);throw"both async and sync fetching of the wasm failed"}catch(t){be(t)}}function ca(e){return P||!T&&!S||typeof fetch!="function"?Promise.resolve().then(()=>an(e)):fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>an(e))}function un(e,t,n){return ca(e).then(a=>WebAssembly.instantiate(a,t)).then(a=>a).then(n,a=>{G("failed to asynchronously prepare wasm: "+a),be(a)})}function fa(e,t){var n=Ie;return P||typeof WebAssembly.instantiateStreaming!="function"||nn(n)||typeof fetch!="function"?un(n,e,t):fetch(n,{credentials:"same-origin"}).then(a=>WebAssembly.instantiateStreaming(a,e).then(t,function(u){return G("wasm streaming compile failed: "+u),G("falling back to ArrayBuffer instantiation"),un(n,e,t)}))}var M,B;function on(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function lt(e){for(;0<e.length;)e.shift()(r)}function te(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return v[e>>0];case"i8":return v[e>>0];case"i16":return L[e>>1];case"i32":return R[e>>2];case"i64":return R[e>>2];case"float":return qt[e>>2];case"double":return kt[e>>3];case"*":return F[e>>2];default:be("invalid type for getValue: "+t)}}function de(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":v[e>>0]=t;break;case"i8":v[e>>0]=t;break;case"i16":L[e>>1]=t;break;case"i32":R[e>>2]=t;break;case"i64":B=[t>>>0,(M=t,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[e>>2]=B[0],R[e+4>>2]=B[1];break;case"float":qt[e>>2]=t;break;case"double":kt[e>>3]=t;break;case"*":F[e>>2]=t;break;default:be("invalid type for setValue: "+n)}}var sn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Je(e,t,n){var a=t+n;for(n=t;e[n]&&!(n>=a);)++n;if(16<n-t&&e.buffer&&sn)return sn.decode(e.subarray(t,n));for(a="";t<n;){var u=e[t++];if(u&128){var b=e[t++]&63;if((u&224)==192)a+=String.fromCharCode((u&31)<<6|b);else{var f=e[t++]&63;u=(u&240)==224?(u&15)<<12|b<<6|f:(u&7)<<18|b<<12|f<<6|e[t++]&63,65536>u?a+=String.fromCharCode(u):(u-=65536,a+=String.fromCharCode(55296|u>>10,56320|u&1023))}}else a+=String.fromCharCode(u)}return a}function V(e,t){return e?Je(A,e,t):""}var ln=(e,t)=>{for(var n=0,a=e.length-1;0<=a;a--){var u=e[a];u==="."?e.splice(a,1):u===".."?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},qe=e=>{var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=ln(e.split("/").filter(a=>!!a),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},ba=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},ct=e=>{if(e==="/")return"/";e=qe(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)};function ha(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);be("initRandomDevice")}function cn(e){return(cn=ha())(e)}function ft(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=ln(e.split("/").filter(a=>!!a),!t).join("/"),(t?"/":"")+e||"."}function $e(e){for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++n):t+=3}return t}function fn(e,t,n,a){if(!(0<a))return 0;var u=n;a=n+a-1;for(var b=0;b<e.length;++b){var f=e.charCodeAt(b);if(55296<=f&&57343>=f){var w=e.charCodeAt(++b);f=65536+((f&1023)<<10)|w&1023}if(127>=f){if(n>=a)break;t[n++]=f}else{if(2047>=f){if(n+1>=a)break;t[n++]=192|f>>6}else{if(65535>=f){if(n+2>=a)break;t[n++]=224|f>>12}else{if(n+3>=a)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63}t[n++]=128|f>>6&63}t[n++]=128|f&63}}return t[n]=0,n-u}var bn=[];function hn(e,t){bn[e]={input:[],Rb:[],bc:t},Dt(e,ma)}var ma={open:function(e){var t=bn[e.node.ec];if(!t)throw new x(43);e.Sb=t,e.seekable=!1},close:function(e){e.Sb.bc.ic(e.Sb)},ic:function(e){e.Sb.bc.ic(e.Sb)},read:function(e,t,n,a){if(!e.Sb||!e.Sb.bc.zc)throw new x(60);for(var u=0,b=0;b<a;b++){try{var f=e.Sb.bc.zc(e.Sb)}catch{throw new x(29)}if(f===void 0&&u===0)throw new x(6);if(f==null)break;u++,t[n+b]=f}return u&&(e.node.timestamp=Date.now()),u},write:function(e,t,n,a){if(!e.Sb||!e.Sb.bc.sc)throw new x(60);try{for(var u=0;u<a;u++)e.Sb.bc.sc(e.Sb,t[n+u])}catch{throw new x(29)}return a&&(e.node.timestamp=Date.now()),u}},da={zc:function(e){if(!e.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;var n=Array($e(t)+1);t=fn(t,n,0,n.length),n.length=t,e.input=n}return e.input.shift()},sc:function(e,t){t===null||t===10?(fe(Je(e.Rb,0)),e.Rb=[]):t!=0&&e.Rb.push(t)},ic:function(e){e.Rb&&0<e.Rb.length&&(fe(Je(e.Rb,0)),e.Rb=[])}},pa={sc:function(e,t){t===null||t===10?(G(Je(e.Rb,0)),e.Rb=[]):t!=0&&e.Rb.push(t)},ic:function(e){e.Rb&&0<e.Rb.length&&(G(Je(e.Rb,0)),e.Rb=[])}},O={Vb:null,Ub:function(){return O.createNode(null,"/",16895,0)},createNode:function(e,t,n,a){if((n&61440)===24576||(n&61440)===4096)throw new x(63);return O.Vb||(O.Vb={dir:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb,cc:O.Cb.cc,jc:O.Cb.jc,Cc:O.Cb.Cc,oc:O.Cb.oc,mc:O.Cb.mc,Bc:O.Cb.Bc,nc:O.Cb.nc},stream:{Zb:O.Mb.Zb}},file:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb},stream:{Zb:O.Mb.Zb,read:O.Mb.read,write:O.Mb.write,vc:O.Mb.vc,kc:O.Mb.kc,lc:O.Mb.lc}},link:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb,fc:O.Cb.fc},stream:{}},wc:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb},stream:ga}}),n=_n(e,t,n,a),(n.mode&61440)===16384?(n.Cb=O.Vb.dir.node,n.Mb=O.Vb.dir.stream,n.Nb={}):(n.mode&61440)===32768?(n.Cb=O.Vb.file.node,n.Mb=O.Vb.file.stream,n.Pb=0,n.Nb=null):(n.mode&61440)===40960?(n.Cb=O.Vb.link.node,n.Mb=O.Vb.link.stream):(n.mode&61440)===8192&&(n.Cb=O.Vb.wc.node,n.Mb=O.Vb.wc.stream),n.timestamp=Date.now(),e&&(e.Nb[t]=n,e.timestamp=n.timestamp),n},Uc:function(e){return e.Nb?e.Nb.subarray?e.Nb.subarray(0,e.Pb):new Uint8Array(e.Nb):new Uint8Array(0)},xc:function(e,t){var n=e.Nb?e.Nb.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.Nb,e.Nb=new Uint8Array(t),0<e.Pb&&e.Nb.set(n.subarray(0,e.Pb),0))},Qc:function(e,t){if(e.Pb!=t)if(t==0)e.Nb=null,e.Pb=0;else{var n=e.Nb;e.Nb=new Uint8Array(t),n&&e.Nb.set(n.subarray(0,Math.min(t,e.Pb))),e.Pb=t}},Cb:{Tb:function(e){var t={};return t.Ic=(e.mode&61440)===8192?e.id:1,t.qc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.ec=e.ec,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.Pb:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.Ec=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Hc=new Date(e.timestamp),t.Fc=4096,t.Gc=Math.ceil(t.size/t.Fc),t},Qb:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&O.Qc(e,t.size)},cc:function(){throw Rt[44]},jc:function(e,t,n,a){return O.createNode(e,t,n,a)},Cc:function(e,t,n){if((e.mode&61440)===16384){try{var a=Pe(t,n)}catch{}if(a)for(var u in a.Nb)throw new x(55)}delete e.parent.Nb[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Nb[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},oc:function(e,t){delete e.Nb[t],e.timestamp=Date.now()},mc:function(e,t){var n=Pe(e,t),a;for(a in n.Nb)throw new x(55);delete e.Nb[t],e.timestamp=Date.now()},Bc:function(e){var t=[".",".."],n;for(n in e.Nb)e.Nb.hasOwnProperty(n)&&t.push(n);return t},nc:function(e,t,n){return e=O.createNode(e,t,41471,0),e.link=n,e},fc:function(e){if((e.mode&61440)!==40960)throw new x(28);return e.link}},Mb:{read:function(e,t,n,a,u){var b=e.node.Nb;if(u>=e.node.Pb)return 0;if(e=Math.min(e.node.Pb-u,a),8<e&&b.subarray)t.set(b.subarray(u,u+e),n);else for(a=0;a<e;a++)t[n+a]=b[u+a];return e},write:function(e,t,n,a,u,b){if(t.buffer===v.buffer&&(b=!1),!a)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Nb||e.Nb.subarray)){if(b)return e.Nb=t.subarray(n,n+a),e.Pb=a;if(e.Pb===0&&u===0)return e.Nb=t.slice(n,n+a),e.Pb=a;if(u+a<=e.Pb)return e.Nb.set(t.subarray(n,n+a),u),a}if(O.xc(e,u+a),e.Nb.subarray&&t.subarray)e.Nb.set(t.subarray(n,n+a),u);else for(b=0;b<a;b++)e.Nb[u+b]=t[n+b];return e.Pb=Math.max(e.Pb,u+a),a},Zb:function(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.Pb),0>t)throw new x(28);return t},vc:function(e,t,n){O.xc(e.node,t+n),e.node.Pb=Math.max(e.node.Pb,t+n)},kc:function(e,t,n,a,u){if((e.node.mode&61440)!==32768)throw new x(43);if(e=e.node.Nb,u&2||e.buffer!==v.buffer){if((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),n=!0,t=65536*Math.ceil(t/65536),(u=Dr(65536,t))?(A.fill(0,u,u+t),t=u):t=0,!t)throw new x(48);v.set(e,t)}else n=!1,t=e.byteOffset;return{Pc:t,Dc:n}},lc:function(e,t,n,a){return O.Mb.write(e,t,0,a,n,!1),0}}},At=null,mn={},ke=[],_a=1,Ae=null,dn=!0,x=null,Rt={},se=(e,t={})=>{if(e=ft(e),!e)return{path:"",node:null};if(t=Object.assign({yc:!0,tc:0},t),8<t.tc)throw new x(32);e=e.split("/").filter(f=>!!f);for(var n=At,a="/",u=0;u<e.length;u++){var b=u===e.length-1;if(b&&t.parent)break;if(n=Pe(n,e[u]),a=qe(a+"/"+e[u]),n.$b&&(!b||b&&t.yc)&&(n=n.$b.root),!b||t.Yb){for(b=0;(n.mode&61440)===40960;)if(n=qn(a),a=ft(ba(a),n),n=se(a,{tc:t.tc+1}).node,40<b++)throw new x(32)}}return{path:a,node:n}},bt=e=>{for(var t;;){if(e===e.parent)return e=e.Ub.Ac,t?e[e.length-1]!=="/"?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Mt=(e,t)=>{for(var n=0,a=0;a<t.length;a++)n=(n<<5)-n+t.charCodeAt(a)|0;return(e+n>>>0)%Ae.length},pn=e=>{var t=Mt(e.parent.id,e.name);if(Ae[t]===e)Ae[t]=e.ac;else for(t=Ae[t];t;){if(t.ac===e){t.ac=e.ac;break}t=t.ac}},Pe=(e,t)=>{var n;if(n=(n=He(e,"x"))?n:e.Cb.cc?0:2)throw new x(n,e);for(n=Ae[Mt(e.id,t)];n;n=n.ac){var a=n.name;if(n.parent.id===e.id&&a===t)return n}return e.Cb.cc(e,t)},_n=(e,t,n,a)=>(e=new kr(e,t,n,a),t=Mt(e.parent.id,e.name),e.ac=Ae[t],Ae[t]=e),wa={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},wn=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},He=(e,t)=>{if(dn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},yn=(e,t)=>{try{return Pe(e,t),20}catch{}return He(e,"wx")},gn=(e,t,n)=>{try{var a=Pe(e,t)}catch(u){return u.Ob}if(e=He(e,"wx"))return e;if(n){if((a.mode&61440)!==16384)return 54;if(a===a.parent||bt(a)==="/")return 10}else if((a.mode&61440)===16384)return 31;return 0},ya=(e=0)=>{for(;4096>=e;e++)if(!ke[e])return e;throw new x(33)},vn=(e,t)=>(tt||(tt=function(){this.hc={}},tt.prototype={},Object.defineProperties(tt.prototype,{object:{get:function(){return this.node},set:function(n){this.node=n}},flags:{get:function(){return this.hc.flags},set:function(n){this.hc.flags=n}},position:{get:function(){return this.hc.position},set:function(n){this.hc.position=n}}})),e=Object.assign(new tt,e),t=ya(t),e.Wb=t,ke[t]=e),ga={open:e=>{e.Mb=mn[e.node.ec].Mb,e.Mb.open&&e.Mb.open(e)},Zb:()=>{throw new x(70)}},Dt=(e,t)=>{mn[e]={Mb:t}},xn=(e,t)=>{var n=t==="/",a=!t;if(n&&At)throw new x(10);if(!n&&!a){var u=se(t,{yc:!1});if(t=u.path,u=u.node,u.$b)throw new x(10);if((u.mode&61440)!==16384)throw new x(54)}t={type:e,Wc:{},Ac:t,Mc:[]},e=e.Ub(t),e.Ub=t,t.root=e,n?At=e:u&&(u.$b=t,u.Ub&&u.Ub.Mc.push(t))},Ct=(e,t,n)=>{var a=se(e,{parent:!0}).node;if(e=ct(e),!e||e==="."||e==="..")throw new x(28);var u=yn(a,e);if(u)throw new x(u);if(!a.Cb.jc)throw new x(63);return a.Cb.jc(a,e,t,n)},pe=(e,t)=>Ct(e,(t!==void 0?t:511)&1023|16384,0),ht=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),Ct(e,t|8192,n)},Nt=(e,t)=>{if(!ft(e))throw new x(44);var n=se(t,{parent:!0}).node;if(!n)throw new x(44);t=ct(t);var a=yn(n,t);if(a)throw new x(a);if(!n.Cb.nc)throw new x(63);n.Cb.nc(n,t,e)},En=e=>{var t=se(e,{parent:!0}).node;e=ct(e);var n=Pe(t,e),a=gn(t,e,!0);if(a)throw new x(a);if(!t.Cb.mc)throw new x(63);if(n.$b)throw new x(10);t.Cb.mc(t,e),pn(n)},qn=e=>{if(e=se(e).node,!e)throw new x(44);if(!e.Cb.fc)throw new x(28);return ft(bt(e.parent),e.Cb.fc(e))},mt=(e,t)=>{if(e=se(e,{Yb:!t}).node,!e)throw new x(44);if(!e.Cb.Tb)throw new x(63);return e.Cb.Tb(e)},kn=e=>mt(e,!0),An=(e,t)=>{if(e=typeof e=="string"?se(e,{Yb:!0}).node:e,!e.Cb.Qb)throw new x(63);e.Cb.Qb(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})},Rn=(e,t)=>{if(0>t)throw new x(28);if(e=typeof e=="string"?se(e,{Yb:!0}).node:e,!e.Cb.Qb)throw new x(63);if((e.mode&61440)===16384)throw new x(31);if((e.mode&61440)!==32768)throw new x(28);var n=He(e,"w");if(n)throw new x(n);e.Cb.Qb(e,{size:t,timestamp:Date.now()})},dt=(e,t,n)=>{if(e==="")throw new x(44);if(typeof t=="string"){var a=wa[t];if(typeof a>"u")throw Error("Unknown file open mode: "+t);t=a}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var u=e;else{e=qe(e);try{u=se(e,{Yb:!(t&131072)}).node}catch{}}if(a=!1,t&64)if(u){if(t&128)throw new x(20)}else u=Ct(e,n,0),a=!0;if(!u)throw new x(44);if((u.mode&61440)===8192&&(t&=-513),t&65536&&(u.mode&61440)!==16384)throw new x(54);if(!a&&(n=u?(u.mode&61440)===40960?32:(u.mode&61440)===16384&&(wn(t)!=="r"||t&512)?31:He(u,wn(t)):44))throw new x(n);return t&512&&!a&&Rn(u,0),t&=-131713,u=vn({node:u,path:bt(u),flags:t,seekable:!0,position:0,Mb:u.Mb,Tc:[],error:!1}),u.Mb.open&&u.Mb.open(u),!r.logReadFiles||t&1||(pt||(pt={}),e in pt||(pt[e]=1)),u},Mn=(e,t,n)=>{if(e.Wb===null)throw new x(8);if(!e.seekable||!e.Mb.Zb)throw new x(70);if(n!=0&&n!=1&&n!=2)throw new x(28);e.position=e.Mb.Zb(e,t,n),e.Tc=[]},Dn=()=>{x||(x=function(e,t){this.name="ErrnoError",this.node=t,this.Rc=function(n){this.Ob=n},this.Rc(e),this.message="FS error"},x.prototype=Error(),x.prototype.constructor=x,[44].forEach(e=>{Rt[e]=new x(e),Rt[e].stack="<generic error, no stack>"}))},Cn,va=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},et=(e,t,n)=>{e=qe("/dev/"+e);var a=va(!!t,!!n);Ot||(Ot=64);var u=Ot++<<8|0;Dt(u,{open:b=>{b.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(b,f,w,h)=>{for(var d=0,E=0;E<h;E++){try{var y=t()}catch{throw new x(29)}if(y===void 0&&d===0)throw new x(6);if(y==null)break;d++,f[w+E]=y}return d&&(b.node.timestamp=Date.now()),d},write:(b,f,w,h)=>{for(var d=0;d<h;d++)try{n(f[w+d])}catch{throw new x(29)}return h&&(b.node.timestamp=Date.now()),d}}),ht(e,a,u)},Ot,Q={},tt,pt;function Se(e,t,n){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":he(e).path,t.length==0){if(!n)throw new x(44);return e}return qe(e+"/"+t)}function _t(e,t,n){try{var a=e(t)}catch(b){if(b&&b.node&&qe(t)!==qe(bt(b.node)))return-54;throw b}R[n>>2]=a.Ic,R[n+8>>2]=a.qc,R[n+12>>2]=a.mode,F[n+16>>2]=a.Oc,R[n+20>>2]=a.uid,R[n+24>>2]=a.Lc,R[n+28>>2]=a.ec,B=[a.size>>>0,(M=a.size,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[n+40>>2]=B[0],R[n+44>>2]=B[1],R[n+48>>2]=4096,R[n+52>>2]=a.Gc,e=a.Ec.getTime(),t=a.Nc.getTime();var u=a.Hc.getTime();return B=[Math.floor(e/1e3)>>>0,(M=Math.floor(e/1e3),1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[n+56>>2]=B[0],R[n+60>>2]=B[1],F[n+64>>2]=e%1e3*1e3,B=[Math.floor(t/1e3)>>>0,(M=Math.floor(t/1e3),1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[n+72>>2]=B[0],R[n+76>>2]=B[1],F[n+80>>2]=t%1e3*1e3,B=[Math.floor(u/1e3)>>>0,(M=Math.floor(u/1e3),1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[n+88>>2]=B[0],R[n+92>>2]=B[1],F[n+96>>2]=u%1e3*1e3,B=[a.qc>>>0,(M=a.qc,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[n+104>>2]=B[0],R[n+108>>2]=B[1],0}var wt=void 0;function yt(){return wt+=4,R[wt-4>>2]}function he(e){if(e=ke[e],!e)throw new x(8);return e}function Be(e,t,n){return fn(e,A,t,n)}function Ut(e){return F[e>>2]+4294967296*R[e+4>>2]}var xa=[0,31,60,91,121,152,182,213,244,274,305,335],Ea=[0,31,59,90,120,151,181,212,243,273,304,334];function Nn(e){var t=$e(e)+1,n=Ft(t);return n&&Be(e,n,t),n}var It={};function On(){if(!$t){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"},t;for(t in It)It[t]===void 0?delete e[t]:e[t]=It[t];var n=[];for(t in e)n.push(t+"="+e[t]);$t=n}return $t}var $t;function Un(){}function In(){}function $n(){}function Pn(){}function Sn(){}function Fn(){}function zn(){}function Tn(){}function Vn(){}function Hn(){}function Bn(){}function Wn(){}function jn(){}function Qn(){}function Kn(){}function Ln(){}function Xn(){}function Zn(){}function Gn(){}function Yn(){}function Jn(){}function er(){}function tr(){}function nr(){}function rr(){}function ar(){}function ir(){}function ur(){}function or(){}function sr(){}function lr(){}function cr(){}function fr(){}function br(){}function hr(){}function mr(){}function dr(){}function pr(){}function _r(){}function wr(e){m=e,o||0<st||(r.onExit&&r.onExit(e),l=!0),I(e,new on(e))}function Pt(e){e instanceof on||e=="unwind"||I(1,e)}function gt(e){try{e()}catch(t){be(t)}}function qa(e){var t={},n;for(n in e)(function(a){var u=e[a];t[a]=typeof u=="function"?function(){vt.push(a);try{return u.apply(null,arguments)}finally{l||(vt.pop()===a||be(),_e&&Re===1&&vt.length===0&&(Re=0,gt(Ir),typeof Fibers<"u"&&Fibers.Xc()))}}:u})(n);return t}var Re=0,_e=null,yr=0,vt=[],gr={},vr={},ka=0,St=null,Aa=[];function Ra(){return new Promise((e,t)=>{St={resolve:e,reject:t}})}function Ma(){var e=Ft(12300),t=e+12;R[e>>2]=t,R[e+4>>2]=t+12288,t=vt[0];var n=gr[t];return n===void 0&&(n=ka++,gr[t]=n,vr[n]=t),R[e+8>>2]=n,e}function xr(e){if(!l){if(Re===0){var t=!1,n=!1;e((a=0)=>{if(!l&&(yr=a,t=!0,n)){Re=2,gt(()=>$r(_e)),a=!1;try{var u=(0,r.asm[vr[R[_e+8>>2]]])()}catch(w){u=w,a=!0}var b=!1;if(!_e){var f=St;f&&(St=null,(a?f.reject:f.resolve)(u),b=!0)}if(a&&!b)throw u}}),n=!0,t||(Re=1,_e=Ma(),gt(()=>Ur(_e)))}else Re===2?(Re=0,gt(Pr),Rr(_e),_e=null,Aa.forEach(a=>{if(!l)try{if(a(),!(o||0<st))try{m=a=m,wr(a)}catch(u){Pt(u)}}catch(u){Pt(u)}})):be("invalid state: "+Re);return yr}}function Er(e){return xr(t=>{e().then(t)})}var qr={};function we(e,t,n,a,u){function b(y){return--st,h!==0&&Or(h),t==="string"?V(y):t==="boolean"?!!y:y}var f={string:y=>{var q=0;if(y!=null&&y!==0){q=$e(y)+1;var U=zt(q);Be(y,U,q),q=U}return q},array:y=>{var q=zt(y.length);return v.set(y,q),q}};e=r["_"+e];var w=[],h=0;if(a)for(var d=0;d<a.length;d++){var E=f[n[d]];E?(h===0&&(h=Nr()),w[d]=E(a[d])):w[d]=a[d]}return n=_e,a=e.apply(null,w),st+=1,u=u&&u.async,_e!=n?Ra().then(b):(a=b(a),u?Promise.resolve(a):a)}function kr(e,t,n,a){e||(e=this),this.parent=e,this.Ub=e.Ub,this.$b=null,this.id=_a++,this.name=t,this.mode=n,this.Cb={},this.Mb={},this.ec=a}Object.defineProperties(kr.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Dn(),Ae=Array(4096),xn(O,"/"),pe("/tmp"),pe("/home"),pe("/home/web_user"),(()=>{pe("/dev"),Dt(259,{read:()=>0,write:(a,u,b,f)=>f}),ht("/dev/null",259),hn(1280,da),hn(1536,pa),ht("/dev/tty",1280),ht("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=cn(e).byteLength),e[--t]);et("random",n),et("urandom",n),pe("/dev/shm"),pe("/dev/shm/tmp")})(),(()=>{pe("/proc");var e=pe("/proc/self");pe("/proc/self/fd"),xn({Ub:()=>{var t=_n(e,"fd",16895,73);return t.Cb={cc:(n,a)=>{var u=ke[+a];if(!u)throw new x(8);return n={parent:null,Ub:{Ac:"fake"},Cb:{fc:()=>u.path}},n.parent=n}},t}},"/proc/self/fd")})(),function(){let e=new Map;r.setAuthorizer=function(t,n,a){return n?e.set(t,{f:n,uc:a}):e.delete(t),we("set_authorizer","number",["number"],[t])},Un=function(t,n,a,u,b,f){if(e.has(t)){let{f:w,uc:h}=e.get(t);return w(h,n,a?V(a):null,u?V(u):null,b?V(b):null,f?V(f):null)}return 0}}(),function(){let e=new Map,t=new Map;r.createFunction=function(n,a,u,b,f,w){let h=e.size;return e.set(h,{f:w,Xb:f}),we("create_function","number","number string number number number number".split(" "),[n,a,u,b,h,0])},r.createAggregate=function(n,a,u,b,f,w,h){let d=e.size;return e.set(d,{step:w,Jc:h,Xb:f}),we("create_function","number","number string number number number number".split(" "),[n,a,u,b,d,1])},r.getFunctionUserData=function(n){return t.get(n)},$n=function(n,a,u,b){n=e.get(n),t.set(a,n.Xb),n.f(a,new Uint32Array(A.buffer,b,u)),t.delete(a)},Sn=function(n,a,u,b){n=e.get(n),t.set(a,n.Xb),n.step(a,new Uint32Array(A.buffer,b,u)),t.delete(a)},In=function(n,a){n=e.get(n),t.set(a,n.Xb),n.Jc(a),t.delete(a)}}(),function(){let e=new Map;r.progressHandler=function(t,n,a,u){return a?e.set(t,{f:a,uc:u}):e.delete(t),we("progress_handler",null,["number","number"],[t,n])},Pn=function(t){if(e.has(t)){let{f:n,uc:a}=e.get(t);return n(a)}return 0}}(),function(){function e(h,d){let E=`get${h}`,y=`set${h}`;return new Proxy(new DataView(A.buffer,d,h==="Int32"?4:8),{get(q,U){if(U===E)return function(W,ne){if(!ne)throw Error("must be little endian");return q[U](W,ne)};if(U===y)return function(W,ne,Y){if(!Y)throw Error("must be little endian");return q[U](W,ne,Y)};if(typeof U=="string"&&U.match(/^(get)|(set)/))throw Error("invalid type");return q[U]}})}let t=typeof qr=="object",n=new Map,a=new Map,u=new Map,b=t?new Set:null,f=t?new Set:null,w=new Map;er=function(h,d,E,y){w.set(V(h),{size:d,dc:Array.from(new Uint32Array(A.buffer,y,E))})},r.createModule=function(h,d,E,y){t&&(E.handleAsync=Er);let q=n.size;return n.set(q,{module:E,Xb:y}),y=0,E.xCreate&&(y|=1),E.xConnect&&(y|=2),E.xBestIndex&&(y|=4),E.xDisconnect&&(y|=8),E.xDestroy&&(y|=16),E.xOpen&&(y|=32),E.xClose&&(y|=64),E.xFilter&&(y|=128),E.xNext&&(y|=256),E.xEof&&(y|=512),E.xColumn&&(y|=1024),E.xRowid&&(y|=2048),E.xUpdate&&(y|=4096),E.xBegin&&(y|=8192),E.xSync&&(y|=16384),E.xCommit&&(y|=32768),E.xRollback&&(y|=65536),E.xFindFunction&&(y|=131072),E.xRename&&(y|=262144),we("create_module","number",["number","string","number","number"],[h,d,q,y])},Wn=function(h,d,E,y,q,U){if(d=n.get(d),a.set(q,d),t){b.delete(q);for(let W of b)a.delete(W)}return y=Array.from(new Uint32Array(A.buffer,y,E)).map(W=>V(W)),d.module.xCreate(h,d.Xb,y,q,e("Int32",U))},Bn=function(h,d,E,y,q,U){if(d=n.get(d),a.set(q,d),t){b.delete(q);for(let W of b)a.delete(W)}return y=Array.from(new Uint32Array(A.buffer,y,E)).map(W=>V(W)),d.module.xConnect(h,d.Xb,y,q,e("Int32",U))},zn=function(h,d){var E=a.get(h),y=w.get("sqlite3_index_info").dc;let q={};q.nConstraint=te(d+y[0],"i32"),q.aConstraint=[];for(var U=te(d+y[1],"*"),W=w.get("sqlite3_index_constraint").size,ne=0;ne<q.nConstraint;++ne){var Y=q.aConstraint,le=Y.push,ie=U+ne*W,We=w.get("sqlite3_index_constraint").dc,Me={};Me.iColumn=te(ie+We[0],"i32"),Me.op=te(ie+We[1],"i8"),Me.usable=!!te(ie+We[2],"i8"),le.call(Y,Me)}for(q.nOrderBy=te(d+y[2],"i32"),q.aOrderBy=[],U=te(d+y[3],"*"),W=w.get("sqlite3_index_orderby").size,ne=0;ne<q.nOrderBy;++ne)Y=q.aOrderBy,le=Y.push,ie=U+ne*W,We=w.get("sqlite3_index_orderby").dc,Me={},Me.iColumn=te(ie+We[0],"i32"),Me.desc=!!te(ie+We[1],"i8"),le.call(Y,Me);for(q.aConstraintUsage=[],U=0;U<q.nConstraint;++U)q.aConstraintUsage.push({argvIndex:0,omit:!1});for(q.idxNum=te(d+y[5],"i32"),q.idxStr=null,q.orderByConsumed=!!te(d+y[8],"i8"),q.estimatedCost=te(d+y[9],"double"),q.estimatedRows=te(d+y[10],"i64"),q.idxFlags=te(d+y[11],"i32"),q.colUsed=te(d+y[12],"i64"),h=E.module.xBestIndex(h,q),E=w.get("sqlite3_index_info").dc,y=te(d+E[4],"*"),U=w.get("sqlite3_index_constraint_usage").size,le=0;le<q.nConstraint;++le)W=y+le*U,Y=q.aConstraintUsage[le],ie=w.get("sqlite3_index_constraint_usage").dc,de(W+ie[0],Y.argvIndex,"i32"),de(W+ie[1],Y.omit?1:0,"i8");return de(d+E[5],q.idxNum,"i32"),typeof q.idxStr=="string"&&(y=$e(q.idxStr),U=we("sqlite3_malloc","number",["number"],[y+1]),Be(q.idxStr,U,y+1),de(d+E[6],U,"*"),de(d+E[7],1,"i32")),de(d+E[8],q.orderByConsumed,"i32"),de(d+E[9],q.estimatedCost,"double"),de(d+E[10],q.estimatedRows,"i64"),de(d+E[11],q.idxFlags,"i32"),h},Qn=function(h){let d=a.get(h);return t?b.add(h):a.delete(h),d.module.xDisconnect(h)},jn=function(h){let d=a.get(h);return t?b.add(h):a.delete(h),d.module.xDestroy(h)},Zn=function(h,d){let E=a.get(h);if(u.set(d,E),t){f.delete(d);for(let y of f)u.delete(y)}return E.module.xOpen(h,d)},Tn=function(h){let d=u.get(h);return t?f.add(h):u.delete(h),d.module.xClose(h)},Kn=function(h){return u.get(h).module.xEof(h)?1:0},Ln=function(h,d,E,y,q){let U=u.get(h);return E=E?V(E):null,q=new Uint32Array(A.buffer,q,y),U.module.xFilter(h,d,E,q)},Xn=function(h){return u.get(h).module.xNext(h)},Vn=function(h,d,E){return u.get(h).module.xColumn(h,d,E)},Jn=function(h,d){return u.get(h).module.xRowid(h,e("BigInt64",d))},nr=function(h,d,E,y){let q=a.get(h);return E=new Uint32Array(A.buffer,E,d),q.module.xUpdate(h,E,e("BigInt64",y))},Fn=function(h){return a.get(h).module.xBegin(h)},tr=function(h){return a.get(h).module.xSync(h)},Hn=function(h){return a.get(h).module.xCommit(h)},Yn=function(h){return a.get(h).module.xRollback(h)},Gn=function(h,d){let E=a.get(h);return d=V(d),E.module.xRename(h,d)}}(),function(){function e(f,w){let h=`get${f}`,d=`set${f}`;return new Proxy(new DataView(A.buffer,w,f==="Int32"?4:8),{get(E,y){if(y===h)return function(q,U){if(!U)throw Error("must be little endian");return E[y](q,U)};if(y===d)return function(q,U,W){if(!W)throw Error("must be little endian");return E[y](q,U,W)};if(typeof y=="string"&&y.match(/^(get)|(set)/))throw Error("invalid type");return E[y]}})}function t(f){return f>>=2,F[f]+F[f+1]*4294967296}let n=typeof qr=="object",a=new Map,u=new Map;r.registerVFS=function(f,w){if(we("sqlite3_vfs_find","number",["string"],[f.name]))throw Error(`VFS '${f.name}' already registered`);n&&(f.handleAsync=Er);var h=f.Vc??64;let d=r._malloc(4);return w=we("register_vfs","number",["string","number","number","number"],[f.name,h,w?1:0,d]),w||(h=te(d,"*"),a.set(h,f)),r._free(d),w};let b=n?new Set:null;ir=function(f){let w=u.get(f);return n?b.add(f):u.delete(f),w.xClose(f)},br=function(f,w,h,d){return u.get(f).xRead(f,A.subarray(w,w+h),t(d))},_r=function(f,w,h,d){return u.get(f).xWrite(f,A.subarray(w,w+h),t(d))},dr=function(f,w){return u.get(f).xTruncate(f,t(w))},mr=function(f,w){return u.get(f).xSync(f,w)},lr=function(f,w){let h=u.get(f);return w=e("BigInt64",w),h.xFileSize(f,w)},cr=function(f,w){return u.get(f).xLock(f,w)},pr=function(f,w){return u.get(f).xUnlock(f,w)},ar=function(f,w){let h=u.get(f);return w=e("Int32",w),h.xCheckReservedLock(f,w)},sr=function(f,w,h){let d=u.get(f);return h=new DataView(A.buffer,h),d.xFileControl(f,w,h)},hr=function(f){return u.get(f).xSectorSize(f)},or=function(f){return u.get(f).xDeviceCharacteristics(f)},fr=function(f,w,h,d,E){if(f=a.get(f),u.set(h,f),n){b.delete(h);for(var y of b)u.delete(y)}if(y=null,d&64){y=1;let q=[];for(;y;){let U=A[w++];if(U)q.push(U);else switch(A[w]||(y=null),y){case 1:q.push(63),y=2;break;case 2:q.push(61),y=3;break;case 3:q.push(38),y=2}}y=new TextDecoder().decode(new Uint8Array(q))}else w&&(y=V(w));return E=e("Int32",E),f.xOpen(y,h,d,E)},ur=function(f,w,h){return a.get(f).xDelete(V(w),h)},rr=function(f,w,h,d){return f=a.get(f),d=e("Int32",d),f.xAccess(V(w),h,d)}}();var Da={a:function(e,t,n,a){be("Assertion failed: "+V(e)+", at: "+[t?V(t):"unknown filename",n,a?V(a):"unknown function"])},K:function(e,t){try{return e=V(e),An(e,t),0}catch(n){if(typeof Q>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},M:function(e,t,n){try{if(t=V(t),t=Se(e,t),n&-8)return-28;var a=se(t,{Yb:!0}).node;return a?(e="",n&4&&(e+="r"),n&2&&(e+="w"),n&1&&(e+="x"),e&&He(a,e)?-2:0):-44}catch(u){if(typeof Q>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},L:function(e,t){try{var n=ke[e];if(!n)throw new x(8);return An(n.node,t),0}catch(a){if(typeof Q>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},J:function(e){try{var t=ke[e];if(!t)throw new x(8);var n=t.node,a=typeof n=="string"?se(n,{Yb:!0}).node:n;if(!a.Cb.Qb)throw new x(63);return a.Cb.Qb(a,{timestamp:Date.now()}),0}catch(u){if(typeof Q>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},b:function(e,t,n){wt=n;try{var a=he(e);switch(t){case 0:var u=yt();return 0>u?-28:vn(a,u).Wb;case 1:case 2:return 0;case 3:return a.flags;case 4:return u=yt(),a.flags|=u,0;case 5:return u=yt(),L[u+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return R[Ar()>>2]=28,-1;default:return-28}}catch(b){if(typeof Q>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},I:function(e,t){try{var n=he(e);return _t(mt,n.path,t)}catch(a){if(typeof Q>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},j:function(e,t,n){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return-61;var a=ke[e];if(!a)throw new x(8);if(!(a.flags&2097155))throw new x(28);return Rn(a.node,t),0}catch(u){if(typeof Q>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},C:function(e,t){try{if(t===0)return-28;var n=$e("/")+1;return t<n?-68:(Be("/",e,t),n)}catch(a){if(typeof Q>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},F:function(e,t){try{return e=V(e),_t(kn,e,t)}catch(n){if(typeof Q>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},z:function(e,t,n){try{return t=V(t),t=Se(e,t),t=qe(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),pe(t,n),0}catch(a){if(typeof Q>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},E:function(e,t,n,a){try{t=V(t);var u=a&256;return t=Se(e,t,a&4096),_t(u?kn:mt,t,n)}catch(b){if(typeof Q>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},u:function(e,t,n,a){wt=a;try{t=V(t),t=Se(e,t);var u=a?yt():0;return dt(t,n,u).Wb}catch(b){if(typeof Q>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},s:function(e,t,n,a){try{if(t=V(t),t=Se(e,t),0>=a)return-28;var u=qn(t),b=Math.min(a,$e(u)),f=v[n+b];return Be(u,n,a+1),v[n+b]=f,b}catch(w){if(typeof Q>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},r:function(e){try{return e=V(e),En(e),0}catch(t){if(typeof Q>"u"||t.name!=="ErrnoError")throw t;return-t.Ob}},H:function(e,t){try{return e=V(e),_t(mt,e,t)}catch(n){if(typeof Q>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},o:function(e,t,n){try{if(t=V(t),t=Se(e,t),n===0){e=t;var a=se(e,{parent:!0}).node;if(!a)throw new x(44);var u=ct(e),b=Pe(a,u),f=gn(a,u,!1);if(f)throw new x(f);if(!a.Cb.oc)throw new x(63);if(b.$b)throw new x(10);a.Cb.oc(a,u),pn(b)}else n===512?En(t):be("Invalid flags passed to unlinkat");return 0}catch(w){if(typeof Q>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},n:function(e,t,n){try{if(t=V(t),t=Se(e,t,!0),n){var a=Ut(n),u=R[n+8>>2];b=1e3*a+u/1e6,n+=16,a=Ut(n),u=R[n+8>>2],f=1e3*a+u/1e6}else var b=Date.now(),f=b;e=b;var w=se(t,{Yb:!0}).node;return w.Cb.Qb(w,{timestamp:Math.max(e,f)}),0}catch(h){if(typeof Q>"u"||h.name!=="ErrnoError")throw h;return-h.Ob}},y:function(e,t){e=new Date(1e3*Ut(e)),R[t>>2]=e.getSeconds(),R[t+4>>2]=e.getMinutes(),R[t+8>>2]=e.getHours(),R[t+12>>2]=e.getDate(),R[t+16>>2]=e.getMonth(),R[t+20>>2]=e.getFullYear()-1900,R[t+24>>2]=e.getDay();var n=e.getFullYear();R[t+28>>2]=(n%4!==0||n%100===0&&n%400!==0?Ea:xa)[e.getMonth()]+e.getDate()-1|0,R[t+36>>2]=-(60*e.getTimezoneOffset()),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();R[t+32>>2]=(n!=a&&e.getTimezoneOffset()==Math.min(a,n))|0},w:function(e,t,n,a,u,b,f){try{var w=he(a);if(t&2&&!(n&2)&&(w.flags&2097155)!==2)throw new x(2);if((w.flags&2097155)===1)throw new x(2);if(!w.Mb.kc)throw new x(43);var h=w.Mb.kc(w,e,u,t,n),d=h.Pc;return R[b>>2]=h.Dc,F[f>>2]=d,0}catch(E){if(typeof Q>"u"||E.name!=="ErrnoError")throw E;return-E.Ob}},x:function(e,t,n,a,u,b){try{var f=he(u);if(n&2){if((f.node.mode&61440)!==32768)throw new x(43);a&2||f.Mb.lc&&f.Mb.lc(f,A.slice(e,e+t),b,t,a)}}catch(w){if(typeof Q>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},p:function(e,t,n){function a(h){return(h=h.toTimeString().match(/\(([A-Za-z ]+)\)$/))?h[1]:"GMT"}var u=new Date().getFullYear(),b=new Date(u,0,1),f=new Date(u,6,1);u=b.getTimezoneOffset();var w=f.getTimezoneOffset();F[e>>2]=60*Math.max(u,w),R[t>>2]=+(u!=w),e=a(b),t=a(f),e=Nn(e),t=Nn(t),w<u?(F[n>>2]=e,F[n+4>>2]=t):(F[n>>2]=t,F[n+4>>2]=e)},e:function(){return Date.now()},d:()=>performance.now(),l:function(e){var t=A.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var u=Math,b=u.min;a=Math.max(e,a),a+=(65536-a%65536)%65536;e:{var f=c.buffer;try{c.grow(b.call(u,2147483648,a)-f.byteLength+65535>>>16),Yt();var w=1;break e}catch{}w=void 0}if(w)return!0}return!1},A:function(e,t){var n=0;return On().forEach(function(a,u){var b=t+n;for(u=F[e+4*u>>2]=b,b=0;b<a.length;++b)v[u++>>0]=a.charCodeAt(b);v[u>>0]=0,n+=a.length+1}),0},B:function(e,t){var n=On();F[e>>2]=n.length;var a=0;return n.forEach(function(u){a+=u.length+1}),F[t>>2]=a,0},f:function(e){try{var t=he(e);if(t.Wb===null)throw new x(8);t.pc&&(t.pc=null);try{t.Mb.close&&t.Mb.close(t)}catch(n){throw n}finally{ke[t.Wb]=null}return t.Wb=null,0}catch(n){if(typeof Q>"u"||n.name!=="ErrnoError")throw n;return n.Ob}},m:function(e,t){try{var n=he(e);return v[t>>0]=n.Sb?2:(n.mode&61440)===16384?3:(n.mode&61440)===40960?7:4,L[t+2>>1]=0,B=[0,(M=0,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[t+8>>2]=B[0],R[t+12>>2]=B[1],B=[0,(M=0,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[t+16>>2]=B[0],R[t+20>>2]=B[1],0}catch(a){if(typeof Q>"u"||a.name!=="ErrnoError")throw a;return a.Ob}},t:function(e,t,n,a){try{e:{var u=he(e);e=t;for(var b,f=t=0;f<n;f++){var w=F[e>>2],h=F[e+4>>2];e+=8;var d=u,E=w,y=h,q=b,U=v;if(0>y||0>q)throw new x(28);if(d.Wb===null)throw new x(8);if((d.flags&2097155)===1)throw new x(8);if((d.node.mode&61440)===16384)throw new x(31);if(!d.Mb.read)throw new x(28);var W=typeof q<"u";if(!W)q=d.position;else if(!d.seekable)throw new x(70);var ne=d.Mb.read(d,U,E,y,q);W||(d.position+=ne);var Y=ne;if(0>Y){var le=-1;break e}if(t+=Y,Y<h)break;typeof b<"u"&&(b+=Y)}le=t}return F[a>>2]=le,0}catch(ie){if(typeof Q>"u"||ie.name!=="ErrnoError")throw ie;return ie.Ob}},i:function(e,t,n,a,u){try{if(t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,isNaN(t))return 61;var b=he(e);return Mn(b,t,a),B=[b.position>>>0,(M=b.position,1<=+Math.abs(M)?0<M?+Math.floor(M/4294967296)>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],R[u>>2]=B[0],R[u+4>>2]=B[1],b.pc&&t===0&&a===0&&(b.pc=null),0}catch(f){if(typeof Q>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},D:function(e){try{var t=he(e);return xr(function(n){var a=t.node.Ub;a.type.Sc?a.type.Sc(a,!1,function(u){n(u?function(){return 29}:0)}):n(0)})}catch(n){if(typeof Q>"u"||n.name!=="ErrnoError")throw n;return n.Ob}},q:function(e,t,n,a){try{e:{var u=he(e);e=t;for(var b,f=t=0;f<n;f++){var w=F[e>>2],h=F[e+4>>2];e+=8;var d=u,E=w,y=h,q=b,U=v;if(0>y||0>q)throw new x(28);if(d.Wb===null)throw new x(8);if(!(d.flags&2097155))throw new x(8);if((d.node.mode&61440)===16384)throw new x(31);if(!d.Mb.write)throw new x(28);d.seekable&&d.flags&1024&&Mn(d,0,2);var W=typeof q<"u";if(!W)q=d.position;else if(!d.seekable)throw new x(70);var ne=d.Mb.write(d,U,E,y,q,void 0);W||(d.position+=ne);var Y=ne;if(0>Y){var le=-1;break e}t+=Y,typeof b<"u"&&(b+=Y)}le=t}return F[a>>2]=le,0}catch(ie){if(typeof Q>"u"||ie.name!=="ErrnoError")throw ie;return ie.Ob}},ra:Un,N:In,ga:$n,ca:Pn,Y:Sn,la:Fn,G:zn,h:Tn,oa:Vn,ja:Hn,ea:Bn,fa:Wn,k:jn,v:Qn,pa:Kn,g:Ln,qa:Xn,da:Zn,ha:Gn,ia:Yn,na:Jn,c:er,ka:tr,ma:nr,aa:rr,V:ar,$:ir,ba:ur,S:or,U:sr,Z:lr,X:cr,R:fr,Q:br,T:hr,_:mr,O:dr,W:pr,P:_r};(function(){function e(n){if(n=n.exports,n=qa(n),r.asm=n,c=r.asm.sa,Yt(),en.unshift(r.asm.ta),Ue--,r.monitorRunDependencies&&r.monitorRunDependencies(Ue),Ue==0&&Ye){var a=Ye;Ye=null,a()}return n}var t={a:Da};if(Ue++,r.monitorRunDependencies&&r.monitorRunDependencies(Ue),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(n){G("Module.instantiateWasm callback failed with error: "+n),p(n)}return fa(t,function(n){e(n.instance)}).catch(p),{}})(),r._sqlite3_vfs_find=function(){return(r._sqlite3_vfs_find=r.asm.ua).apply(null,arguments)},r._sqlite3_malloc=function(){return(r._sqlite3_malloc=r.asm.va).apply(null,arguments)},r._sqlite3_free=function(){return(r._sqlite3_free=r.asm.wa).apply(null,arguments)},r._sqlite3_prepare_v2=function(){return(r._sqlite3_prepare_v2=r.asm.xa).apply(null,arguments)},r._sqlite3_step=function(){return(r._sqlite3_step=r.asm.ya).apply(null,arguments)},r._sqlite3_column_int64=function(){return(r._sqlite3_column_int64=r.asm.za).apply(null,arguments)},r._sqlite3_column_int=function(){return(r._sqlite3_column_int=r.asm.Aa).apply(null,arguments)},r._sqlite3_finalize=function(){return(r._sqlite3_finalize=r.asm.Ba).apply(null,arguments)},r._sqlite3_reset=function(){return(r._sqlite3_reset=r.asm.Ca).apply(null,arguments)},r._sqlite3_clear_bindings=function(){return(r._sqlite3_clear_bindings=r.asm.Da).apply(null,arguments)},r._sqlite3_value_blob=function(){return(r._sqlite3_value_blob=r.asm.Ea).apply(null,arguments)},r._sqlite3_value_text=function(){return(r._sqlite3_value_text=r.asm.Fa).apply(null,arguments)},r._sqlite3_value_bytes=function(){return(r._sqlite3_value_bytes=r.asm.Ga).apply(null,arguments)},r._sqlite3_value_double=function(){return(r._sqlite3_value_double=r.asm.Ha).apply(null,arguments)},r._sqlite3_value_int=function(){return(r._sqlite3_value_int=r.asm.Ia).apply(null,arguments)},r._sqlite3_value_int64=function(){return(r._sqlite3_value_int64=r.asm.Ja).apply(null,arguments)},r._sqlite3_value_type=function(){return(r._sqlite3_value_type=r.asm.Ka).apply(null,arguments)},r._sqlite3_result_blob=function(){return(r._sqlite3_result_blob=r.asm.La).apply(null,arguments)},r._sqlite3_result_double=function(){return(r._sqlite3_result_double=r.asm.Ma).apply(null,arguments)},r._sqlite3_result_error=function(){return(r._sqlite3_result_error=r.asm.Na).apply(null,arguments)},r._sqlite3_result_int=function(){return(r._sqlite3_result_int=r.asm.Oa).apply(null,arguments)},r._sqlite3_result_int64=function(){return(r._sqlite3_result_int64=r.asm.Pa).apply(null,arguments)},r._sqlite3_result_null=function(){return(r._sqlite3_result_null=r.asm.Qa).apply(null,arguments)},r._sqlite3_result_text=function(){return(r._sqlite3_result_text=r.asm.Ra).apply(null,arguments)},r._sqlite3_column_count=function(){return(r._sqlite3_column_count=r.asm.Sa).apply(null,arguments)},r._sqlite3_data_count=function(){return(r._sqlite3_data_count=r.asm.Ta).apply(null,arguments)},r._sqlite3_column_blob=function(){return(r._sqlite3_column_blob=r.asm.Ua).apply(null,arguments)},r._sqlite3_column_bytes=function(){return(r._sqlite3_column_bytes=r.asm.Va).apply(null,arguments)},r._sqlite3_column_double=function(){return(r._sqlite3_column_double=r.asm.Wa).apply(null,arguments)},r._sqlite3_column_text=function(){return(r._sqlite3_column_text=r.asm.Xa).apply(null,arguments)},r._sqlite3_column_type=function(){return(r._sqlite3_column_type=r.asm.Ya).apply(null,arguments)},r._sqlite3_column_name=function(){return(r._sqlite3_column_name=r.asm.Za).apply(null,arguments)},r._sqlite3_bind_blob=function(){return(r._sqlite3_bind_blob=r.asm._a).apply(null,arguments)},r._sqlite3_bind_double=function(){return(r._sqlite3_bind_double=r.asm.$a).apply(null,arguments)},r._sqlite3_bind_int=function(){return(r._sqlite3_bind_int=r.asm.ab).apply(null,arguments)},r._sqlite3_bind_int64=function(){return(r._sqlite3_bind_int64=r.asm.bb).apply(null,arguments)},r._sqlite3_bind_null=function(){return(r._sqlite3_bind_null=r.asm.cb).apply(null,arguments)},r._sqlite3_bind_text=function(){return(r._sqlite3_bind_text=r.asm.db).apply(null,arguments)},r._sqlite3_bind_parameter_count=function(){return(r._sqlite3_bind_parameter_count=r.asm.eb).apply(null,arguments)},r._sqlite3_bind_parameter_name=function(){return(r._sqlite3_bind_parameter_name=r.asm.fb).apply(null,arguments)},r._sqlite3_sql=function(){return(r._sqlite3_sql=r.asm.gb).apply(null,arguments)},r._sqlite3_exec=function(){return(r._sqlite3_exec=r.asm.hb).apply(null,arguments)},r._sqlite3_errmsg=function(){return(r._sqlite3_errmsg=r.asm.ib).apply(null,arguments)},r._sqlite3_declare_vtab=function(){return(r._sqlite3_declare_vtab=r.asm.jb).apply(null,arguments)},r._sqlite3_libversion=function(){return(r._sqlite3_libversion=r.asm.kb).apply(null,arguments)},r._sqlite3_libversion_number=function(){return(r._sqlite3_libversion_number=r.asm.lb).apply(null,arguments)},r._sqlite3_changes=function(){return(r._sqlite3_changes=r.asm.mb).apply(null,arguments)},r._sqlite3_close=function(){return(r._sqlite3_close=r.asm.nb).apply(null,arguments)},r._sqlite3_limit=function(){return(r._sqlite3_limit=r.asm.ob).apply(null,arguments)},r._sqlite3_open_v2=function(){return(r._sqlite3_open_v2=r.asm.pb).apply(null,arguments)},r._sqlite3_get_autocommit=function(){return(r._sqlite3_get_autocommit=r.asm.qb).apply(null,arguments)};function Ar(){return(Ar=r.asm.rb).apply(null,arguments)}var Ft=r._malloc=function(){return(Ft=r._malloc=r.asm.sb).apply(null,arguments)},Rr=r._free=function(){return(Rr=r._free=r.asm.tb).apply(null,arguments)};r._RegisterExtensionFunctions=function(){return(r._RegisterExtensionFunctions=r.asm.ub).apply(null,arguments)},r._set_authorizer=function(){return(r._set_authorizer=r.asm.vb).apply(null,arguments)},r._create_function=function(){return(r._create_function=r.asm.wb).apply(null,arguments)},r._create_module=function(){return(r._create_module=r.asm.xb).apply(null,arguments)},r._progress_handler=function(){return(r._progress_handler=r.asm.yb).apply(null,arguments)},r._register_vfs=function(){return(r._register_vfs=r.asm.zb).apply(null,arguments)},r._getSqliteFree=function(){return(r._getSqliteFree=r.asm.Ab).apply(null,arguments)};var Mr=r._main=function(){return(Mr=r._main=r.asm.Bb).apply(null,arguments)};function Dr(){return(Dr=r.asm.Db).apply(null,arguments)}function Cr(){return(Cr=r.asm.Eb).apply(null,arguments)}function Nr(){return(Nr=r.asm.Fb).apply(null,arguments)}function Or(){return(Or=r.asm.Gb).apply(null,arguments)}function zt(){return(zt=r.asm.Hb).apply(null,arguments)}function Ur(){return(Ur=r.asm.Ib).apply(null,arguments)}function Ir(){return(Ir=r.asm.Jb).apply(null,arguments)}function $r(){return($r=r.asm.Kb).apply(null,arguments)}function Pr(){return(Pr=r.asm.Lb).apply(null,arguments)}r.getTempRet0=Cr,r.ccall=we,r.cwrap=function(e,t,n,a){var u=!n||n.every(b=>b==="number"||b==="boolean");return t!=="string"&&u&&!a?r["_"+e]:function(){return we(e,t,n,arguments,a)}},r.setValue=de,r.getValue=te,r.UTF8ToString=V,r.stringToUTF8=Be,r.lengthBytesUTF8=$e;var xt;Ye=function e(){xt||Sr(),xt||(Ye=e)};function Sr(){function e(){if(!xt&&(xt=!0,r.calledRun=!0,!l)){if(r.noFSInit||Cn||(Cn=!0,Dn(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?et("stdin",r.stdin):Nt("/dev/tty","/dev/stdin"),r.stdout?et("stdout",null,r.stdout):Nt("/dev/tty","/dev/stdout"),r.stderr?et("stderr",null,r.stderr):Nt("/dev/tty1","/dev/stderr"),dt("/dev/stdin",0),dt("/dev/stdout",1),dt("/dev/stderr",1)),dn=!1,lt(en),lt(sa),g(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Fr){var t=Mr;try{var n=t(0,0);m=n,wr(n)}catch(a){Pt(a)}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)t=r.postRun.shift(),tn.unshift(t);lt(tn)}}if(!(0<Ue)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)la();lt(Jt),0<Ue||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),e()},1)):e())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var Fr=!0;return r.noInitialRun&&(Fr=!1),Sr(),i.ready}})(),Kr=Qr,Lr=class{constructor(){Tt(this,"mxPathName",64)}xClose(s){return 10}xRead(s,i,r){return 10}xWrite(s,i,r){return 10}xTruncate(s,i){return 10}xSync(s,i){return 0}xFileSize(s,i){return 10}xLock(s,i){return 0}xUnlock(s,i){return 0}xCheckReservedLock(s,i){return i.setInt32(0,0,!0),0}xFileControl(s,i,r){return 12}xSectorSize(s){return 512}xDeviceCharacteristics(s){return 0}xOpen(s,i,r,g){return 14}xDelete(s,i){return 10}xAccess(s,i,r){return 10}handleAsync(s){return s()}},Xr=7,Zr=(Kt=class{constructor(){H(this,Le);H(this,nt);H(this,rt);H(this,re,0);Tt(this,"timeoutMillis",0);H(this,Fe,new Map);H(this,Ke,Promise.resolve(0))}get state(){return _(this,re)}async lock(s){return ue(this,Le,Ht).call(this,ue(this,nt,zr),s)}async unlock(s){return ue(this,Le,Ht).call(this,ue(this,rt,Tr),s)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(s,i){return new Promise(async(r,g)=>{try{await navigator.locks.request(s,i,p=>{if(r(p),p)return new Promise(k=>_(this,Fe).set(s,k))})}catch(p){g(p)}})}_releaseWebLock(s){var i;(i=_(this,Fe).get(s))==null||i(),_(this,Fe).delete(s)}async _pollWebLock(s){var i;return(i=(await navigator.locks.query()).held.find(({name:r})=>r===s))==null?void 0:i.mode}_getTimeoutSignal(){if(this.timeoutMillis){let s=new AbortController;return setTimeout(()=>s.abort(),this.timeoutMillis),s.signal}}},re=new WeakMap,Fe=new WeakMap,Ke=new WeakMap,Le=new WeakSet,Ht=async function(s,i){let r=i&Xr;try{let g=()=>s.call(this,r);return await X(this,Ke,_(this,Ke).then(g,g)),X(this,re,r),0}catch(g){return g.name==="AbortError"?5:(console.error(g),3850)}},nt=new WeakSet,zr=async function(s){if(s===_(this,re))return 0;switch(_(this,re)){case 0:switch(s){case 1:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}case 1:switch(s){case 2:return this._SHAREDtoRESERVED();case 4:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}case 2:switch(s){case 4:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}},rt=new WeakSet,Tr=async function(s){if(s===_(this,re))return 0;switch(_(this,re)){case 4:switch(s){case 1:return this._EXCLUSIVEtoSHARED();case 0:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}case 2:switch(s){case 1:return this._RESERVEDtoSHARED();case 0:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}case 1:switch(s){case 0:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}default:throw new Error(`unexpected transition ${_(this,re)} -> ${s}`)}},Kt),Gr=class extends Zr{constructor(s){super(),this._lockName=s+"-outer",this._reservedName=s+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},Yr=0,Et=new WeakMap;function me(...s){}var Jr=(Lt=class{constructor(s,i={durability:"default"}){H(this,at);H(this,ze,void 0);H(this,Te,void 0);H(this,Xe,void 0);H(this,ee,null);H(this,Ze,0);H(this,Ve,Promise.resolve());H(this,De,Promise.resolve());X(this,Te,Promise.resolve(s).then(r=>X(this,ze,r))),X(this,Xe,i)}async close(){let s=_(this,ze)??await _(this,Te);await _(this,Ve),await this.sync(),s.close()}async run(s,i){let r=_(this,Ve).then(()=>ue(this,at,Vr).call(this,s,i));return X(this,Ve,r.catch(()=>{})),r}async sync(){await _(this,De),X(this,De,Promise.resolve())}},ze=new WeakMap,Te=new WeakMap,Xe=new WeakMap,ee=new WeakMap,Ze=new WeakMap,Ve=new WeakMap,De=new WeakMap,at=new WeakSet,Vr=async function(s,i){var g,p;let r=_(this,ze)??await _(this,Te);if(s==="readwrite"&&((g=_(this,ee))==null?void 0:g.mode)==="readonly")X(this,ee,null);else if(performance.now()-_(this,Ze)>5e3){try{(p=_(this,ee))==null||p.commit()}catch(k){if(k.name!=="InvalidStateError")throw k}await new Promise(k=>setTimeout(k)),X(this,ee,null)}for(let k=0;k<2;++k){if(!_(this,ee)){X(this,ee,r.transaction(r.objectStoreNames,s,_(this,Xe)));let D=X(this,Ze,performance.now());X(this,De,_(this,De).then(()=>new Promise((I,T)=>{_(this,ee).addEventListener("complete",S=>{I(),_(this,ee)===S.target&&X(this,ee,null),me(`transaction ${Et.get(S.target)} complete`)}),_(this,ee).addEventListener("abort",S=>{console.warn("tx abort",(performance.now()-D)/1e3);let N=S.target.error;T(N),_(this,ee)===S.target&&X(this,ee,null),me(`transaction ${Et.get(S.target)} aborted`,N)})}))),Et.set(_(this,ee),Yr++)}try{let D=Object.fromEntries(Array.from(r.objectStoreNames,I=>[I,new ea(_(this,ee).objectStore(I))]));return await i(D)}catch(D){if(X(this,ee,null),k)throw D}}},Lt);function ve(s){return new Promise((i,r)=>{s.addEventListener("success",()=>i(s.result)),s.addEventListener("error",()=>r(s.error))})}var ea=(Xt=class{constructor(s){H(this,J,void 0);X(this,J,s)}get(s){me(`get ${_(this,J).name}`,s);let i=_(this,J).get(s);return ve(i)}getAll(s,i){me(`getAll ${_(this,J).name}`,s,i);let r=_(this,J).getAll(s,i);return ve(r)}getKey(s){me(`getKey ${_(this,J).name}`,s);let i=_(this,J).getKey(s);return ve(i)}getAllKeys(s,i){me(`getAllKeys ${_(this,J).name}`,s,i);let r=_(this,J).getAllKeys(s,i);return ve(r)}put(s,i){me(`put ${_(this,J).name}`,s,i);let r=_(this,J).put(s,i);return ve(r)}delete(s){me(`delete ${_(this,J).name}`,s);let i=_(this,J).delete(s);return ve(i)}clear(){me(`clear ${_(this,J).name}`);let s=_(this,J).clear();return ve(s)}index(s){return new ta(_(this,J).index(s))}},J=new WeakMap,Xt),ta=(Zt=class{constructor(s){H(this,Ce,void 0);X(this,Ce,s)}getAllKeys(s,i){me(`IDBIndex.getAllKeys ${_(this,Ce).objectStore.name}<${_(this,Ce).name}>`,s,i);let r=_(this,Ce).getAllKeys(s,i);return ve(r)}},Ce=new WeakMap,Zt),na=512,Wt=3e3,jt={durability:"default",purge:"deferred",purgeAtLeast:16};function oe(...s){}var ra=(Gt=class extends Lr{constructor(i="wa-sqlite",r=jt){super();H(this,Ge);H(this,it);H(this,ut);H(this,Ee);H(this,ot);H(this,xe,void 0);H(this,ae,new Map);H(this,Z,void 0);H(this,Ne,new Set);H(this,Oe,performance.now());H(this,ge,new Set);this.name=i,X(this,xe,Object.assign({},jt,r)),X(this,Z,new Jr(aa(i),{durability:_(this,xe).durability}))}async close(){var i;for(let r of _(this,ae).keys())await this.xClose(r);await((i=_(this,Z))==null?void 0:i.close()),X(this,Z,null)}xOpen(i,r,g,p){return this.handleAsync(async()=>{i===null&&(i=`null_${r}`),oe(`xOpen ${i} 0x${r.toString(16)} 0x${g.toString(16)}`);try{let k=new URL(i,"http://localhost/"),D={path:k.pathname,flags:g,block0:null,locks:new Gr(k.pathname)};return _(this,ae).set(r,D),await _(this,Z).run("readwrite",async({blocks:I})=>{if(D.block0=await I.get(ue(this,Ee,je).call(this,D,0)),!D.block0)if(g&4)D.block0={path:D.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},I.put(D.block0);else throw new Error(`file not found: ${D.path}`)}),p.setInt32(0,g&1,!0),0}catch(k){return console.error(k),14}})}xClose(i){return this.handleAsync(async()=>{try{let r=_(this,ae).get(i);return r&&(oe(`xClose ${r.path}`),_(this,ae).delete(i),r.flags&8&&_(this,Z).run("readwrite",({blocks:g})=>{g.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),0}catch(r){return console.error(r),10}})}xRead(i,r,g){return this.handleAsync(async()=>{let p=_(this,ae).get(i);oe(`xRead ${p.path} ${r.byteLength} ${g}`);try{return await _(this,Z).run("readonly",async({blocks:k})=>{let D=0;for(;D<r.byteLength;){let I=g+D,T=I<p.block0.data.byteLength?p.block0:await k.get(ue(this,Ee,je).call(this,p,-I));if(!T||T.data.byteLength-T.offset<=I)return r.fill(0,D),522;let S=r.subarray(D),N=I+T.offset,$=Math.min(Math.max(T.data.byteLength-N,0),S.byteLength);S.set(T.data.subarray(N,N+$)),D+=$}return 0})}catch(k){return console.error(k),10}})}xWrite(i,r,g){let p=_(this,ge).has(i);if(p||performance.now()-_(this,Oe)>Wt){let k=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&_(this,ge).add(i),await new Promise(I=>setTimeout(I));let D=ue(this,Ge,Bt).call(this,i,r,g);return X(this,Oe,performance.now()),D});return p&&_(this,ge).delete(i),k}return ue(this,Ge,Bt).call(this,i,r,g)}xTruncate(i,r){let g=_(this,ae).get(i);oe(`xTruncate ${g.path} ${r}`);try{Object.assign(g.block0,{fileSize:r,data:g.block0.data.slice(0,r)});let p=Object.assign({},g.block0);return _(this,Z).run("readwrite",({blocks:k})=>{k.delete(ue(this,Ee,je).call(this,g,-1/0,-r)),k.put(p)}),0}catch(p){return console.error(p),10}}xSync(i,r){let g=_(this,ge).has(i);if(g||_(this,xe).durability!=="relaxed"||performance.now()-_(this,Oe)>Wt){let k=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&_(this,ge).add(i);let D=await ue(this,it,Hr).call(this,i,r);return X(this,Oe,performance.now()),D});return g&&_(this,ge).delete(i),k}let p=_(this,ae).get(i);return oe(`xSync ${p.path} ${r}`),0}xFileSize(i,r){let g=_(this,ae).get(i);return oe(`xFileSize ${g.path}`),r.setBigInt64(0,BigInt(g.block0.fileSize),!0),0}xLock(i,r){return this.handleAsync(async()=>{let g=_(this,ae).get(i);oe(`xLock ${g.path} ${r}`);try{let p=await g.locks.lock(r);return p===0&&g.locks.state===1&&(g.block0=await _(this,Z).run("readonly",({blocks:k})=>k.get(ue(this,Ee,je).call(this,g,0)))),p}catch(p){return console.error(p),10}})}xUnlock(i,r){return this.handleAsync(async()=>{let g=_(this,ae).get(i);oe(`xUnlock ${g.path} ${r}`);try{return g.locks.unlock(r)}catch(p){return console.error(p),10}})}xCheckReservedLock(i,r){return this.handleAsync(async()=>{let g=_(this,ae).get(i);oe(`xCheckReservedLock ${g.path}`);let p=await g.locks.isSomewhereReserved();return r.setInt32(0,p?1:0,!0),0})}xSectorSize(i){return na}xDeviceCharacteristics(i){return 19968}xFileControl(i,r,g){let p=_(this,ae).get(i);switch(oe(`xFileControl ${p.path} ${r}`),r){case 11:return p.overwrite=!0,0;case 21:if(p.overwrite)try{return this.handleAsync(async()=>(await ue(this,ot,Wr).call(this,p),0))}catch(k){return console.error(k),10}return 0;case 22:return p.overwrite=!1,0;case 31:return this.handleAsync(async()=>{try{return p.block0.version--,p.changedPages=new Set,_(this,Z).run("readwrite",async({blocks:k})=>{let D=await k.index("version").getAllKeys(IDBKeyRange.bound([p.path],[p.path,p.block0.version]));for(let I of D)k.delete(I)}),0}catch(k){return console.error(k),10}});case 32:try{let k=Object.assign({},p.block0);k.data=k.data.slice();let D=p.changedPages;return p.changedPages=null,_(this,Z).run("readwrite",async({blocks:I})=>{I.put(k);let T=await I.get([p.path,"purge",0])??{path:p.path,offset:"purge",version:0,data:new Map,count:0};T.count+=D.size;for(let S of D)T.data.set(S,k.version);I.put(T),ue(this,ut,Br).call(this,p.path,T.count)}),0}catch(k){return console.error(k),10}case 33:return this.handleAsync(async()=>{try{return p.changedPages=null,p.block0=await _(this,Z).run("readonly",({blocks:k})=>k.get([p.path,0,p.block0.version+1])),0}catch(k){return console.error(k),10}});default:return 12}}xAccess(i,r,g){return this.handleAsync(async()=>{try{let p=new URL(i,"file://localhost/").pathname;oe(`xAccess ${p} ${r}`);let k=await _(this,Z).run("readonly",({blocks:D})=>D.getKey(ue(this,Ee,je).call(this,{path:p},0)));return g.setInt32(0,k?1:0,!0),0}catch(p){return console.error(p),10}})}xDelete(i,r){return this.handleAsync(async()=>{let g=new URL(i,"file://localhost/").pathname;try{return _(this,Z).run("readwrite",({blocks:p})=>p.delete(IDBKeyRange.bound([g],[g,[]]))),r&&await _(this,Z).sync(),0}catch(p){return console.error(p),10}})}async purge(i){let r=Date.now();await _(this,Z).run("readwrite",async({blocks:g})=>{let p=await g.get([i,"purge",0]);if(p){for(let[k,D]of p.data)g.delete(IDBKeyRange.bound([i,k,D],[i,k,1/0],!0,!1));await g.delete([i,"purge",0])}oe(`purge ${i} ${(p==null?void 0:p.data.size)??0} pages in ${Date.now()-r} ms`)})}},xe=new WeakMap,ae=new WeakMap,Z=new WeakMap,Ne=new WeakMap,Oe=new WeakMap,ge=new WeakMap,Ge=new WeakSet,Bt=function(i,r,g){let p=_(this,ae).get(i);oe(`xWrite ${p.path} ${r.byteLength} ${g}`);try{let k=p.block0.fileSize;p.block0.fileSize=Math.max(p.block0.fileSize,g+r.byteLength);let D=g===0?p.block0:{path:p.path,offset:-g,version:p.block0.version,data:null};return D.data=r.slice(),p.changedPages?(k===p.block0.fileSize&&p.changedPages.add(-g),g!==0&&_(this,Z).run("readwrite",({blocks:I})=>I.put(D))):_(this,Z).run("readwrite",({blocks:I})=>I.put(D)),0}catch(k){return console.error(k),10}},it=new WeakSet,Hr=async function(i,r){let g=_(this,ae).get(i);oe(`xSync ${g.path} ${r}`);try{await _(this,Z).sync()}catch(p){return console.error(p),10}return 0},ut=new WeakSet,Br=function(i,r){_(this,xe).purge==="manual"||_(this,Ne).has(i)||r<_(this,xe).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(i),_(this,Ne).delete(i)}):setTimeout(()=>{this.purge(i),_(this,Ne).delete(i)}),_(this,Ne).add(i))},Ee=new WeakSet,je=function(i,r,g=0){let p=!r||-r<i.block0.data.length?-1/0:i.block0.version;return IDBKeyRange.bound([i.path,r,p],[i.path,g,1/0])},ot=new WeakSet,Wr=async function(i){let r=i.block0.data.length;if(r<18)return;let g=new DataView(i.block0.data.buffer,i.block0.data.byteOffset),p=g.getUint16(16);if(p===1&&(p=65536),p===r)return;let k=Math.max(r,p),D=k/r,I=k/p,T=g.getUint32(28)*p,S=i.block0.version;await _(this,Z).run("readwrite",async({blocks:N})=>{let $=await N.index("version").getAllKeys(IDBKeyRange.bound([i.path,S+1],[i.path,1/0]));for(let fe of $)N.delete(fe);N.delete([i.path,"purge",0]);for(let fe=0;fe<T;fe+=k){let G=await N.getAll(IDBKeyRange.lowerBound([i.path,-(fe+k),1/0]),D);for(let P of G)N.delete([P.path,P.offset,P.version]);if(I===1){let P=new Uint8Array(p);for(let c of G)P.set(c.data,-(fe+c.offset));let o={path:i.path,offset:-fe,version:S,data:P};o.offset===0&&(o.fileSize=T,i.block0=o),N.put(o)}else{let P=G[0];for(let o=0;o<I;++o){let c=-(fe+o*p);if(-c>=T)break;let l={path:P.path,offset:c,version:S,data:P.data.subarray(o*p,(o+1)*p)};l.offset===0&&(l.fileSize=T,i.block0=l),N.put(l)}}}})},Gt);function aa(s){return new Promise((i,r)=>{let g=globalThis.indexedDB.open(s,5);g.addEventListener("upgradeneeded",function(){g.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),g.addEventListener("success",()=>{i(g.result)}),g.addEventListener("error",()=>{r(g.error)})})}var ce,Qe;async function ia(s,i){let r=await Kr(i?{locateFile:()=>i}:{});ce=jr(r),ce.vfs_register(new ra(s,{durability:"relaxed"})),Qe=await ce.open_v2(s,void 0,s)}async function Qt(s,i){let r=ce.str_new(Qe,s),g=await ce.prepare_v2(Qe,ce.str_value(r));if(g===null)return[];let p=g.stmt;try{typeof i<"u"&&ce.bind_collection(p,i);let k=[],D=[];for(;await ce.step(p)===100;){D=D.length===0?ce.column_names(p):D;let I=ce.row(p);k.push(D.reduce((T,S,N)=>(T[S]=I[N],T),{}))}return k}finally{await ce.finalize(p)}}async function ua(s,i,r){let g=await Qt(i,r);if(s==="query")return{rows:g};let p=await Qt("SELECT last_insert_rowid() as id");return{insertId:BigInt(p[0].id),numAffectedRows:BigInt(ce.changes(Qe)),rows:s==="raw"?g:[]}}async function oa(){await ce.close(Qe)}onmessage=async s=>{let i=s.data,r={type:i.type,data:null,err:null};try{switch(i.type){case"run":r.data=await ua(i.mode,i.sql,i.parameters);break;case"close":await oa();break;case"init":await ia(i.dbName,i.url);break}}catch(g){r.err=g}postMessage(r)}})();
