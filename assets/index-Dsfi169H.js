var jp=Object.defineProperty;var Vp=(t,e,r)=>e in t?jp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Z=(t,e,r)=>(Vp(t,typeof e!="symbol"?e+"":e,r),r),Ru=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var n=(t,e,r)=>(Ru(t,e,"read from private field"),r?r.call(t):e.get(t)),C=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},k=(t,e,r,s)=>(Ru(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);var ue=(t,e,r)=>(Ru(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ql(t,e){const r=new Set(t.split(","));return e?s=>r.has(s.toLowerCase()):s=>r.has(s)}const Fe={},_n=[],Xt=()=>{},Jp=()=>!1,lu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wl=t=>t.startsWith("onUpdate:"),ct=Object.assign,_l=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Hp=Object.prototype.hasOwnProperty,we=(t,e)=>Hp.call(t,e),ie=Array.isArray,Tn=t=>cu(t)==="[object Map]",td=t=>cu(t)==="[object Set]",le=t=>typeof t=="function",ht=t=>typeof t=="string",hn=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",rd=t=>(Je(t)||le(t))&&le(t.then)&&le(t.catch),id=Object.prototype.toString,cu=t=>id.call(t),Kp=t=>cu(t).slice(8,-1),nd=t=>cu(t)==="[object Object]",Tl=t=>ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Cs=ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hu=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Gp=/-(\w)/g,Zn=hu(t=>t.replace(Gp,(e,r)=>r?r.toUpperCase():"")),zp=/\B([A-Z])/g,ns=hu(t=>t.replace(zp,"-$1").toLowerCase()),sd=hu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mu=hu(t=>t?`on${sd(t)}`:""),Oi=(t,e)=>!Object.is(t,e),Du=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},od=(t,e,r,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:r})},Yp=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Gc;const ad=()=>Gc||(Gc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Il(t){if(ie(t)){const e={};for(let r=0;r<t.length;r++){const s=t[r],a=ht(s)?tm(s):Il(s);if(a)for(const l in a)e[l]=a[l]}return e}else if(ht(t)||Je(t))return t}const Xp=/;(?![^(]*\))/g,Zp=/:([^]+)/,em=/\/\*[^]*?\*\//g;function tm(t){const e={};return t.replace(em,"").split(Xp).forEach(r=>{if(r){const s=r.split(Zp);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function El(t){let e="";if(ht(t))e=t;else if(ie(t))for(let r=0;r<t.length;r++){const s=El(t[r]);s&&(e+=s+" ")}else if(Je(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const rm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",im=ql(rm);function ud(t){return!!t||t===""}const nm=t=>ht(t)?t:t==null?"":ie(t)||Je(t)&&(t.toString===id||!le(t.toString))?JSON.stringify(t,ld,2):String(t),ld=(t,e)=>e&&e.__v_isRef?ld(t,e.value):Tn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[s,a],l)=>(r[Lu(s,l)+" =>"]=a,r),{})}:td(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Lu(r))}:hn(e)?Lu(e):Je(e)&&!ie(e)&&!nd(e)?String(e):e,Lu=(t,e="")=>{var r;return hn(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ir;class sm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ir,!e&&ir&&(this.index=(ir.scopes||(ir.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=ir;try{return ir=this,e()}finally{ir=r}}}on(){ir=this}off(){ir=this.parent}stop(e){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function om(t,e=ir){e&&e.active&&e.effects.push(t)}function am(){return ir}let an;class kl{constructor(e,r,s,a){this.fn=e,this.trigger=r,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,om(this,a)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ti();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(um(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ii()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ni,r=an;try{return Ni=!0,an=this,this._runnings++,zc(this),this.fn()}finally{Yc(this),this._runnings--,an=r,Ni=e}}stop(){this.active&&(zc(this),Yc(this),this.onStop&&this.onStop(),this.active=!1)}}function um(t){return t.value}function zc(t){t._trackId++,t._depsLength=0}function Yc(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)cd(t.deps[e],t);t.deps.length=t._depsLength}}function cd(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let Ni=!0,Gu=0;const hd=[];function Ti(){hd.push(Ni),Ni=!1}function Ii(){const t=hd.pop();Ni=t===void 0?!0:t}function Sl(){Gu++}function Al(){for(Gu--;!Gu&&zu.length;)zu.shift()()}function dd(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&cd(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const zu=[];function fd(t,e,r){Sl();for(const s of t.keys()){let a;s._dirtyLevel<e&&(a??(a=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(a??(a=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&zu.push(s.scheduler)))}Al()}const pd=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},Yu=new WeakMap,un=Symbol(""),Xu=Symbol("");function Mt(t,e,r){if(Ni&&an){let s=Yu.get(t);s||Yu.set(t,s=new Map);let a=s.get(r);a||s.set(r,a=pd(()=>s.delete(r))),dd(an,a)}}function jr(t,e,r,s,a,l){const h=Yu.get(t);if(!h)return;let m=[];if(e==="clear")m=[...h.values()];else if(r==="length"&&ie(t)){const N=Number(s);h.forEach((d,v)=>{(v==="length"||!hn(v)&&v>=N)&&m.push(d)})}else switch(r!==void 0&&m.push(h.get(r)),e){case"add":ie(t)?Tl(r)&&m.push(h.get("length")):(m.push(h.get(un)),Tn(t)&&m.push(h.get(Xu)));break;case"delete":ie(t)||(m.push(h.get(un)),Tn(t)&&m.push(h.get(Xu)));break;case"set":Tn(t)&&m.push(h.get(un));break}Sl();for(const N of m)N&&fd(N,4);Al()}const lm=ql("__proto__,__v_isRef,__isVue"),md=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hn)),Xc=cm();function cm(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const s=Oe(this);for(let l=0,h=this.length;l<h;l++)Mt(s,"get",l+"");const a=s[e](...r);return a===-1||a===!1?s[e](...r.map(Oe)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Ti(),Sl();const s=Oe(this)[e].apply(this,r);return Al(),Ii(),s}}),t}function hm(t){hn(t)||(t=String(t));const e=Oe(this);return Mt(e,"has",t),e.hasOwnProperty(t)}class yd{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,s){const a=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return s===(a?l?Cm:bd:l?gd:Nd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const h=ie(e);if(!a){if(h&&we(Xc,r))return Reflect.get(Xc,r,s);if(r==="hasOwnProperty")return hm}const m=Reflect.get(e,r,s);return(hn(r)?md.has(r):lm(r))||(a||Mt(e,"get",r),l)?m:Dt(m)?h&&Tl(r)?m:m.value:Je(m)?a?vd(m):Dl(m):m}}class wd extends yd{constructor(e=!1){super(!1,e)}set(e,r,s,a){let l=e[r];if(!this._isShallow){const N=$s(l);if(!na(s)&&!$s(s)&&(l=Oe(l),s=Oe(s)),!ie(e)&&Dt(l)&&!Dt(s))return N?!1:(l.value=s,!0)}const h=ie(e)&&Tl(r)?Number(r)<e.length:we(e,r),m=Reflect.set(e,r,s,a);return e===Oe(a)&&(h?Oi(s,l)&&jr(e,"set",r,s):jr(e,"add",r,s)),m}deleteProperty(e,r){const s=we(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&s&&jr(e,"delete",r,void 0),a}has(e,r){const s=Reflect.has(e,r);return(!hn(r)||!md.has(r))&&Mt(e,"has",r),s}ownKeys(e){return Mt(e,"iterate",ie(e)?"length":un),Reflect.ownKeys(e)}}class dm extends yd{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const fm=new wd,pm=new dm,mm=new wd(!0);const Rl=t=>t,du=t=>Reflect.getPrototypeOf(t);function Po(t,e,r=!1,s=!1){t=t.__v_raw;const a=Oe(t),l=Oe(e);r||(Oi(e,l)&&Mt(a,"get",e),Mt(a,"get",l));const{has:h}=du(a),m=s?Rl:r?Pl:Qs;if(h.call(a,e))return m(t.get(e));if(h.call(a,l))return m(t.get(l));t!==a&&t.get(e)}function Bo(t,e=!1){const r=this.__v_raw,s=Oe(r),a=Oe(t);return e||(Oi(t,a)&&Mt(s,"has",t),Mt(s,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Fo(t,e=!1){return t=t.__v_raw,!e&&Mt(Oe(t),"iterate",un),Reflect.get(t,"size",t)}function Zc(t){t=Oe(t);const e=Oe(this);return du(e).has.call(e,t)||(e.add(t),jr(e,"add",t,t)),this}function eh(t,e){e=Oe(e);const r=Oe(this),{has:s,get:a}=du(r);let l=s.call(r,t);l||(t=Oe(t),l=s.call(r,t));const h=a.call(r,t);return r.set(t,e),l?Oi(e,h)&&jr(r,"set",t,e):jr(r,"add",t,e),this}function th(t){const e=Oe(this),{has:r,get:s}=du(e);let a=r.call(e,t);a||(t=Oe(t),a=r.call(e,t)),s&&s.call(e,t);const l=e.delete(t);return a&&jr(e,"delete",t,void 0),l}function rh(){const t=Oe(this),e=t.size!==0,r=t.clear();return e&&jr(t,"clear",void 0,void 0),r}function Uo(t,e){return function(s,a){const l=this,h=l.__v_raw,m=Oe(h),N=e?Rl:t?Pl:Qs;return!t&&Mt(m,"iterate",un),h.forEach((d,v)=>s.call(a,N(d),N(v),l))}}function $o(t,e,r){return function(...s){const a=this.__v_raw,l=Oe(a),h=Tn(l),m=t==="entries"||t===Symbol.iterator&&h,N=t==="keys"&&h,d=a[t](...s),v=r?Rl:e?Pl:Qs;return!e&&Mt(l,"iterate",N?Xu:un),{next(){const{value:W,done:R}=d.next();return R?{value:W,done:R}:{value:m?[v(W[0]),v(W[1])]:v(W),done:R}},[Symbol.iterator](){return this}}}}function ei(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ym(){const t={get(l){return Po(this,l)},get size(){return Fo(this)},has:Bo,add:Zc,set:eh,delete:th,clear:rh,forEach:Uo(!1,!1)},e={get(l){return Po(this,l,!1,!0)},get size(){return Fo(this)},has:Bo,add:Zc,set:eh,delete:th,clear:rh,forEach:Uo(!1,!0)},r={get(l){return Po(this,l,!0)},get size(){return Fo(this,!0)},has(l){return Bo.call(this,l,!0)},add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear"),forEach:Uo(!0,!1)},s={get(l){return Po(this,l,!0,!0)},get size(){return Fo(this,!0)},has(l){return Bo.call(this,l,!0)},add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear"),forEach:Uo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=$o(l,!1,!1),r[l]=$o(l,!0,!1),e[l]=$o(l,!1,!0),s[l]=$o(l,!0,!0)}),[t,r,e,s]}const[wm,Nm,gm,bm]=ym();function Ml(t,e){const r=e?t?bm:gm:t?Nm:wm;return(s,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?s:Reflect.get(we(r,a)&&a in s?r:s,a,l)}const vm={get:Ml(!1,!1)},xm={get:Ml(!1,!0)},Om={get:Ml(!0,!1)};const Nd=new WeakMap,gd=new WeakMap,bd=new WeakMap,Cm=new WeakMap;function qm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wm(t){return t.__v_skip||!Object.isExtensible(t)?0:qm(Kp(t))}function Dl(t){return $s(t)?t:Ll(t,!1,fm,vm,Nd)}function _m(t){return Ll(t,!1,mm,xm,gd)}function vd(t){return Ll(t,!0,pm,Om,bd)}function Ll(t,e,r,s,a){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const h=Wm(t);if(h===0)return t;const m=new Proxy(t,h===2?s:r);return a.set(t,m),m}function qs(t){return $s(t)?qs(t.__v_raw):!!(t&&t.__v_isReactive)}function $s(t){return!!(t&&t.__v_isReadonly)}function na(t){return!!(t&&t.__v_isShallow)}function xd(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function Tm(t){return Object.isExtensible(t)&&od(t,"__v_skip",!0),t}const Qs=t=>Je(t)?Dl(t):t,Pl=t=>Je(t)?vd(t):t;class Od{constructor(e,r,s,a){this.getter=e,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new kl(()=>e(this._value),()=>Ho(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=s}get value(){const e=Oe(this);return(!e._cacheable||e.effect.dirty)&&Oi(e._value,e._value=e.effect.run())&&Ho(e,4),Cd(e),e.effect._dirtyLevel>=2&&Ho(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Im(t,e,r=!1){let s,a;const l=le(t);return l?(s=t,a=Xt):(s=t.get,a=t.set),new Od(s,a,l||!a,r)}function Cd(t){var e;Ni&&an&&(t=Oe(t),dd(an,(e=t.dep)!=null?e:t.dep=pd(()=>t.dep=void 0,t instanceof Od?t:void 0)))}function Ho(t,e=4,r){t=Oe(t);const s=t.dep;s&&fd(s,e)}function Dt(t){return!!(t&&t.__v_isRef===!0)}function Em(t){return km(t,!1)}function km(t,e){return Dt(t)?t:new Sm(t,e)}class Sm{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Oe(e),this._value=r?e:Qs(e)}get value(){return Cd(this),this._value}set value(e){const r=this.__v_isShallow||na(e)||$s(e);e=r?e:Oe(e),Oi(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Qs(e),Ho(this,4))}}function qd(t){return Dt(t)?t.value:t}const Am={get:(t,e,r)=>qd(Reflect.get(t,e,r)),set:(t,e,r,s)=>{const a=t[e];return Dt(a)&&!Dt(r)?(a.value=r,!0):Reflect.set(t,e,r,s)}};function Wd(t){return qs(t)?t:new Proxy(t,Am)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,e,r,s){try{return s?t(...s):t()}catch(a){fu(a,e,r)}}function fr(t,e,r,s){if(le(t)){const a=gi(t,e,r,s);return a&&rd(a)&&a.catch(l=>{fu(l,e,r)}),a}if(ie(t)){const a=[];for(let l=0;l<t.length;l++)a.push(fr(t[l],e,r,s));return a}}function fu(t,e,r,s=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const h=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const d=l.ec;if(d){for(let v=0;v<d.length;v++)if(d[v](t,h,m)===!1)return}l=l.parent}const N=e.appContext.config.errorHandler;if(N){Ti(),gi(N,null,10,[t,h,m]),Ii();return}}Rm(t,r,a,s)}function Rm(t,e,r,s=!0){console.error(t)}let js=!1,Zu=!1;const gt=[];let Cr=0;const In=[];let ri=null,Ui=0;const _d=Promise.resolve();let Bl=null;function Mm(t){const e=Bl||_d;return t?e.then(this?t.bind(this):t):e}function Dm(t){let e=Cr+1,r=gt.length;for(;e<r;){const s=e+r>>>1,a=gt[s],l=Vs(a);l<t||l===t&&a.pre?e=s+1:r=s}return e}function Fl(t){(!gt.length||!gt.includes(t,js&&t.allowRecurse?Cr+1:Cr))&&(t.id==null?gt.push(t):gt.splice(Dm(t.id),0,t),Td())}function Td(){!js&&!Zu&&(Zu=!0,Bl=_d.then(Ed))}function Lm(t){const e=gt.indexOf(t);e>Cr&&gt.splice(e,1)}function Pm(t){ie(t)?In.push(...t):(!ri||!ri.includes(t,t.allowRecurse?Ui+1:Ui))&&In.push(t),Td()}function ih(t,e,r=js?Cr+1:0){for(;r<gt.length;r++){const s=gt[r];if(s&&s.pre){if(t&&s.id!==t.uid)continue;gt.splice(r,1),r--,s()}}}function Id(t){if(In.length){const e=[...new Set(In)].sort((r,s)=>Vs(r)-Vs(s));if(In.length=0,ri){ri.push(...e);return}for(ri=e,Ui=0;Ui<ri.length;Ui++)ri[Ui]();ri=null,Ui=0}}const Vs=t=>t.id==null?1/0:t.id,Bm=(t,e)=>{const r=Vs(t)-Vs(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Ed(t){Zu=!1,js=!0,gt.sort(Bm);try{for(Cr=0;Cr<gt.length;Cr++){const e=gt[Cr];e&&e.active!==!1&&gi(e,null,14)}}finally{Cr=0,gt.length=0,Id(),js=!1,Bl=null,(gt.length||In.length)&&Ed()}}function Fm(t,e,...r){if(t.isUnmounted)return;const s=t.vnode.props||Fe;let a=r;const l=e.startsWith("update:"),h=l&&e.slice(7);if(h&&h in s){const v=`${h==="modelValue"?"model":h}Modifiers`,{number:W,trim:R}=s[v]||Fe;R&&(a=r.map(B=>ht(B)?B.trim():B)),W&&(a=r.map(Yp))}let m,N=s[m=Mu(e)]||s[m=Mu(Zn(e))];!N&&l&&(N=s[m=Mu(ns(e))]),N&&fr(N,t,6,a);const d=s[m+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[m])return;t.emitted[m]=!0,fr(d,t,6,a)}}function kd(t,e,r=!1){const s=e.emitsCache,a=s.get(t);if(a!==void 0)return a;const l=t.emits;let h={},m=!1;if(!le(t)){const N=d=>{const v=kd(d,e,!0);v&&(m=!0,ct(h,v))};!r&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!l&&!m?(Je(t)&&s.set(t,null),null):(ie(l)?l.forEach(N=>h[N]=null):ct(h,l),Je(t)&&s.set(t,h),h)}function pu(t,e){return!t||!lu(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,ns(e))||we(t,e))}let Wr=null,Sd=null;function sa(t){const e=Wr;return Wr=t,Sd=t&&t.type.__scopeId||null,e}function Um(t,e=Wr,r){if(!e||t._n)return t;const s=(...a)=>{s._d&&fh(-1);const l=sa(e);let h;try{h=t(...a)}finally{sa(l),s._d&&fh(1)}return h};return s._n=!0,s._c=!0,s._d=!0,s}function Pu(t){const{type:e,vnode:r,proxy:s,withProxy:a,propsOptions:[l],slots:h,attrs:m,emit:N,render:d,renderCache:v,props:W,data:R,setupState:B,ctx:pe,inheritAttrs:Q}=t,je=sa(t);let J,G;try{if(r.shapeFlag&4){const Ce=a||s,dt=Ce;J=Or(d.call(dt,Ce,v,W,B,R,pe)),G=m}else{const Ce=e;J=Or(Ce.length>1?Ce(W,{attrs:m,slots:h,emit:N}):Ce(W,null)),G=e.props?m:$m(m)}}catch(Ce){Ts.length=0,fu(Ce,t,1),J=ln(Js)}let de=J;if(G&&Q!==!1){const Ce=Object.keys(G),{shapeFlag:dt}=de;Ce.length&&dt&7&&(l&&Ce.some(Wl)&&(G=Qm(G,l)),de=es(de,G,!1,!0))}return r.dirs&&(de=es(de,null,!1,!0),de.dirs=de.dirs?de.dirs.concat(r.dirs):r.dirs),r.transition&&(de.transition=r.transition),J=de,sa(je),J}const $m=t=>{let e;for(const r in t)(r==="class"||r==="style"||lu(r))&&((e||(e={}))[r]=t[r]);return e},Qm=(t,e)=>{const r={};for(const s in t)(!Wl(s)||!(s.slice(9)in e))&&(r[s]=t[s]);return r};function jm(t,e,r){const{props:s,children:a,component:l}=t,{props:h,children:m,patchFlag:N}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&N>=0){if(N&1024)return!0;if(N&16)return s?nh(s,h,d):!!h;if(N&8){const v=e.dynamicProps;for(let W=0;W<v.length;W++){const R=v[W];if(h[R]!==s[R]&&!pu(d,R))return!0}}}else return(a||m)&&(!m||!m.$stable)?!0:s===h?!1:s?h?nh(s,h,d):!0:!!h;return!1}function nh(t,e,r){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let a=0;a<s.length;a++){const l=s[a];if(e[l]!==t[l]&&!pu(r,l))return!0}return!1}function Vm({vnode:t,parent:e},r){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=r,e=e.parent;else break}}const Jm=Symbol.for("v-ndc"),Hm=t=>t.__isSuspense;function Km(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):Pm(t)}const Gm=Symbol.for("v-scx"),zm=()=>Go(Gm),Qo={};function Bu(t,e,r){return Ad(t,e,r)}function Ad(t,e,{immediate:r,deep:s,flush:a,once:l,onTrack:h,onTrigger:m}=Fe){if(e&&l){const ne=e;e=(...He)=>{ne(...He),dt()}}const N=Tt,d=ne=>s===!0?ne:xn(ne,s===!1?1:void 0);let v,W=!1,R=!1;if(Dt(t)?(v=()=>t.value,W=na(t)):qs(t)?(v=()=>d(t),W=!0):ie(t)?(R=!0,W=t.some(ne=>qs(ne)||na(ne)),v=()=>t.map(ne=>{if(Dt(ne))return ne.value;if(qs(ne))return d(ne);if(le(ne))return gi(ne,N,2)})):le(t)?e?v=()=>gi(t,N,2):v=()=>(B&&B(),fr(t,N,3,[pe])):v=Xt,e&&s){const ne=v;v=()=>xn(ne())}let B,pe=ne=>{B=de.onStop=()=>{gi(ne,N,4),B=de.onStop=void 0}},Q;if(wu)if(pe=Xt,e?r&&fr(e,N,3,[v(),R?[]:void 0,pe]):v(),a==="sync"){const ne=zm();Q=ne.__watcherHandles||(ne.__watcherHandles=[])}else return Xt;let je=R?new Array(t.length).fill(Qo):Qo;const J=()=>{if(!(!de.active||!de.dirty))if(e){const ne=de.run();(s||W||(R?ne.some((He,tt)=>Oi(He,je[tt])):Oi(ne,je)))&&(B&&B(),fr(e,N,3,[ne,je===Qo?void 0:R&&je[0]===Qo?[]:je,pe]),je=ne)}else de.run()};J.allowRecurse=!!e;let G;a==="sync"?G=J:a==="post"?G=()=>St(J,N&&N.suspense):(J.pre=!0,N&&(J.id=N.uid),G=()=>Fl(J));const de=new kl(v,Xt,G),Ce=am(),dt=()=>{de.stop(),Ce&&_l(Ce.effects,de)};return e?r?J():je=de.run():a==="post"?St(de.run.bind(de),N&&N.suspense):de.run(),Q&&Q.push(dt),dt}function Ym(t,e,r){const s=this.proxy,a=ht(t)?t.includes(".")?Rd(s,t):()=>s[t]:t.bind(s,s);let l;le(e)?l=e:(l=e.handler,r=e);const h=yo(this),m=Ad(a,l.bind(s),r);return h(),m}function Rd(t,e){const r=e.split(".");return()=>{let s=t;for(let a=0;a<r.length&&s;a++)s=s[r[a]];return s}}function xn(t,e=1/0,r){if(e<=0||!Je(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Dt(t))xn(t.value,e,r);else if(ie(t))for(let s=0;s<t.length;s++)xn(t[s],e,r);else if(td(t)||Tn(t))t.forEach(s=>{xn(s,e,r)});else if(nd(t))for(const s in t)xn(t[s],e,r);return t}function Li(t,e,r,s){const a=t.dirs,l=e&&e.dirs;for(let h=0;h<a.length;h++){const m=a[h];l&&(m.oldValue=l[h].value);let N=m.dir[s];N&&(Ti(),fr(N,r,8,[t.el,m,t,e]),Ii())}}/*! #__NO_SIDE_EFFECTS__ */function Xm(t,e){return le(t)?ct({name:t.name},e,{setup:t}):t}const Ko=t=>!!t.type.__asyncLoader,Md=t=>t.type.__isKeepAlive;function Zm(t,e){Dd(t,"a",e)}function ey(t,e){Dd(t,"da",e)}function Dd(t,e,r=Tt){const s=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(mu(e,s,r),r){let a=r.parent;for(;a&&a.parent;)Md(a.parent.vnode)&&ty(s,e,r,a),a=a.parent}}function ty(t,e,r,s){const a=mu(e,t,s,!0);Ld(()=>{_l(s[e],a)},r)}function mu(t,e,r=Tt,s=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...h)=>{if(r.isUnmounted)return;Ti();const m=yo(r),N=fr(e,r,t,h);return m(),Ii(),N});return s?a.unshift(l):a.push(l),l}}const Kr=t=>(e,r=Tt)=>(!wu||t==="sp")&&mu(t,(...s)=>e(...s),r),ry=Kr("bm"),iy=Kr("m"),ny=Kr("bu"),sy=Kr("u"),oy=Kr("bum"),Ld=Kr("um"),ay=Kr("sp"),uy=Kr("rtg"),ly=Kr("rtc");function cy(t,e=Tt){mu("ec",t,e)}const el=t=>t?Yd(t)?jl(t)||t.proxy:el(t.parent):null,Ws=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>el(t.parent),$root:t=>el(t.root),$emit:t=>t.emit,$options:t=>Ul(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Fl(t.update)}),$nextTick:t=>t.n||(t.n=Mm.bind(t.proxy)),$watch:t=>Ym.bind(t)}),Fu=(t,e)=>t!==Fe&&!t.__isScriptSetup&&we(t,e),hy={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:s,data:a,props:l,accessCache:h,type:m,appContext:N}=t;let d;if(e[0]!=="$"){const B=h[e];if(B!==void 0)switch(B){case 1:return s[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(Fu(s,e))return h[e]=1,s[e];if(a!==Fe&&we(a,e))return h[e]=2,a[e];if((d=t.propsOptions[0])&&we(d,e))return h[e]=3,l[e];if(r!==Fe&&we(r,e))return h[e]=4,r[e];tl&&(h[e]=0)}}const v=Ws[e];let W,R;if(v)return e==="$attrs"&&Mt(t.attrs,"get",""),v(t);if((W=m.__cssModules)&&(W=W[e]))return W;if(r!==Fe&&we(r,e))return h[e]=4,r[e];if(R=N.config.globalProperties,we(R,e))return R[e]},set({_:t},e,r){const{data:s,setupState:a,ctx:l}=t;return Fu(a,e)?(a[e]=r,!0):s!==Fe&&we(s,e)?(s[e]=r,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:s,appContext:a,propsOptions:l}},h){let m;return!!r[h]||t!==Fe&&we(t,h)||Fu(e,h)||(m=l[0])&&we(m,h)||we(s,h)||we(Ws,h)||we(a.config.globalProperties,h)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:we(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function sh(t){return ie(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let tl=!0;function dy(t){const e=Ul(t),r=t.proxy,s=t.ctx;tl=!1,e.beforeCreate&&oh(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:h,watch:m,provide:N,inject:d,created:v,beforeMount:W,mounted:R,beforeUpdate:B,updated:pe,activated:Q,deactivated:je,beforeDestroy:J,beforeUnmount:G,destroyed:de,unmounted:Ce,render:dt,renderTracked:ne,renderTriggered:He,errorCaptured:tt,serverPrefetch:Gr,expose:Te,inheritAttrs:Ne,components:pr,directives:K,filters:Ie}=e;if(d&&fy(d,s,null),h)for(const Se in h){const qe=h[Se];le(qe)&&(s[Se]=qe.bind(r))}if(a){const Se=a.call(r,r);Je(Se)&&(t.data=Dl(Se))}if(tl=!0,l)for(const Se in l){const qe=l[Se],mr=le(qe)?qe.bind(r,r):le(qe.get)?qe.get.bind(r,r):Xt,ki=!le(qe)&&le(qe.set)?qe.set.bind(r):Xt,kr=Jy({get:mr,set:ki});Object.defineProperty(s,Se,{enumerable:!0,configurable:!0,get:()=>kr.value,set:at=>kr.value=at})}if(m)for(const Se in m)Pd(m[Se],s,r,Se);if(N){const Se=le(N)?N.call(r):N;Reflect.ownKeys(Se).forEach(qe=>{gy(qe,Se[qe])})}v&&oh(v,t,"c");function rt(Se,qe){ie(qe)?qe.forEach(mr=>Se(mr.bind(r))):qe&&Se(qe.bind(r))}if(rt(ry,W),rt(iy,R),rt(ny,B),rt(sy,pe),rt(Zm,Q),rt(ey,je),rt(cy,tt),rt(ly,ne),rt(uy,He),rt(oy,G),rt(Ld,Ce),rt(ay,Gr),ie(Te))if(Te.length){const Se=t.exposed||(t.exposed={});Te.forEach(qe=>{Object.defineProperty(Se,qe,{get:()=>r[qe],set:mr=>r[qe]=mr})})}else t.exposed||(t.exposed={});dt&&t.render===Xt&&(t.render=dt),Ne!=null&&(t.inheritAttrs=Ne),pr&&(t.components=pr),K&&(t.directives=K)}function fy(t,e,r=Xt){ie(t)&&(t=rl(t));for(const s in t){const a=t[s];let l;Je(a)?"default"in a?l=Go(a.from||s,a.default,!0):l=Go(a.from||s):l=Go(a),Dt(l)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:h=>l.value=h}):e[s]=l}}function oh(t,e,r){fr(ie(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,r)}function Pd(t,e,r,s){const a=s.includes(".")?Rd(r,s):()=>r[s];if(ht(t)){const l=e[t];le(l)&&Bu(a,l)}else if(le(t))Bu(a,t.bind(r));else if(Je(t))if(ie(t))t.forEach(l=>Pd(l,e,r,s));else{const l=le(t.handler)?t.handler.bind(r):e[t.handler];le(l)&&Bu(a,l,t)}}function Ul(t){const e=t.type,{mixins:r,extends:s}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:h}}=t.appContext,m=l.get(e);let N;return m?N=m:!a.length&&!r&&!s?N=e:(N={},a.length&&a.forEach(d=>oa(N,d,h,!0)),oa(N,e,h)),Je(e)&&l.set(e,N),N}function oa(t,e,r,s=!1){const{mixins:a,extends:l}=e;l&&oa(t,l,r,!0),a&&a.forEach(h=>oa(t,h,r,!0));for(const h in e)if(!(s&&h==="expose")){const m=py[h]||r&&r[h];t[h]=m?m(t[h],e[h]):e[h]}return t}const py={data:ah,props:uh,emits:uh,methods:Os,computed:Os,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Os,directives:Os,watch:yy,provide:ah,inject:my};function ah(t,e){return e?t?function(){return ct(le(t)?t.call(this,this):t,le(e)?e.call(this,this):e)}:e:t}function my(t,e){return Os(rl(t),rl(e))}function rl(t){if(ie(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Os(t,e){return t?ct(Object.create(null),t,e):e}function uh(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:ct(Object.create(null),sh(t),sh(e??{})):e}function yy(t,e){if(!t)return e;if(!e)return t;const r=ct(Object.create(null),t);for(const s in e)r[s]=xt(t[s],e[s]);return r}function Bd(){return{app:null,config:{isNativeTag:Jp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wy=0;function Ny(t,e){return function(s,a=null){le(s)||(s=ct({},s)),a!=null&&!Je(a)&&(a=null);const l=Bd(),h=new WeakSet;let m=!1;const N=l.app={_uid:wy++,_component:s,_props:a,_container:null,_context:l,_instance:null,version:Hy,get config(){return l.config},set config(d){},use(d,...v){return h.has(d)||(d&&le(d.install)?(h.add(d),d.install(N,...v)):le(d)&&(h.add(d),d(N,...v))),N},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),N},component(d,v){return v?(l.components[d]=v,N):l.components[d]},directive(d,v){return v?(l.directives[d]=v,N):l.directives[d]},mount(d,v,W){if(!m){const R=ln(s,a);return R.appContext=l,W===!0?W="svg":W===!1&&(W=void 0),v&&e?e(R,d):t(R,d,W),m=!0,N._container=d,d.__vue_app__=N,jl(R.component)||R.component.proxy}},unmount(){m&&(t(null,N._container),delete N._container.__vue_app__)},provide(d,v){return l.provides[d]=v,N},runWithContext(d){const v=_s;_s=N;try{return d()}finally{_s=v}}};return N}}let _s=null;function gy(t,e){if(Tt){let r=Tt.provides;const s=Tt.parent&&Tt.parent.provides;s===r&&(r=Tt.provides=Object.create(s)),r[t]=e}}function Go(t,e,r=!1){const s=Tt||Wr;if(s||_s){const a=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:_s._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&le(e)?e.call(s&&s.proxy):e}}const Fd={},Ud=()=>Object.create(Fd),$d=t=>Object.getPrototypeOf(t)===Fd;function by(t,e,r,s=!1){const a={},l=Ud();t.propsDefaults=Object.create(null),Qd(t,e,a,l);for(const h in t.propsOptions[0])h in a||(a[h]=void 0);r?t.props=s?a:_m(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function vy(t,e,r,s){const{props:a,attrs:l,vnode:{patchFlag:h}}=t,m=Oe(a),[N]=t.propsOptions;let d=!1;if((s||h>0)&&!(h&16)){if(h&8){const v=t.vnode.dynamicProps;for(let W=0;W<v.length;W++){let R=v[W];if(pu(t.emitsOptions,R))continue;const B=e[R];if(N)if(we(l,R))B!==l[R]&&(l[R]=B,d=!0);else{const pe=Zn(R);a[pe]=il(N,m,pe,B,t,!1)}else B!==l[R]&&(l[R]=B,d=!0)}}}else{Qd(t,e,a,l)&&(d=!0);let v;for(const W in m)(!e||!we(e,W)&&((v=ns(W))===W||!we(e,v)))&&(N?r&&(r[W]!==void 0||r[v]!==void 0)&&(a[W]=il(N,m,W,void 0,t,!0)):delete a[W]);if(l!==m)for(const W in l)(!e||!we(e,W))&&(delete l[W],d=!0)}d&&jr(t.attrs,"set","")}function Qd(t,e,r,s){const[a,l]=t.propsOptions;let h=!1,m;if(e)for(let N in e){if(Cs(N))continue;const d=e[N];let v;a&&we(a,v=Zn(N))?!l||!l.includes(v)?r[v]=d:(m||(m={}))[v]=d:pu(t.emitsOptions,N)||(!(N in s)||d!==s[N])&&(s[N]=d,h=!0)}if(l){const N=Oe(r),d=m||Fe;for(let v=0;v<l.length;v++){const W=l[v];r[W]=il(a,N,W,d[W],t,!we(d,W))}}return h}function il(t,e,r,s,a,l){const h=t[r];if(h!=null){const m=we(h,"default");if(m&&s===void 0){const N=h.default;if(h.type!==Function&&!h.skipFactory&&le(N)){const{propsDefaults:d}=a;if(r in d)s=d[r];else{const v=yo(a);s=d[r]=N.call(null,e),v()}}else s=N}h[0]&&(l&&!m?s=!1:h[1]&&(s===""||s===ns(r))&&(s=!0))}return s}function jd(t,e,r=!1){const s=e.propsCache,a=s.get(t);if(a)return a;const l=t.props,h={},m=[];let N=!1;if(!le(t)){const v=W=>{N=!0;const[R,B]=jd(W,e,!0);ct(h,R),B&&m.push(...B)};!r&&e.mixins.length&&e.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}if(!l&&!N)return Je(t)&&s.set(t,_n),_n;if(ie(l))for(let v=0;v<l.length;v++){const W=Zn(l[v]);lh(W)&&(h[W]=Fe)}else if(l)for(const v in l){const W=Zn(v);if(lh(W)){const R=l[v],B=h[W]=ie(R)||le(R)?{type:R}:ct({},R);if(B){const pe=dh(Boolean,B.type),Q=dh(String,B.type);B[0]=pe>-1,B[1]=Q<0||pe<Q,(pe>-1||we(B,"default"))&&m.push(W)}}}const d=[h,m];return Je(t)&&s.set(t,d),d}function lh(t){return t[0]!=="$"&&!Cs(t)}function ch(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function hh(t,e){return ch(t)===ch(e)}function dh(t,e){return ie(e)?e.findIndex(r=>hh(r,t)):le(e)&&hh(e,t)?0:-1}const Vd=t=>t[0]==="_"||t==="$stable",$l=t=>ie(t)?t.map(Or):[Or(t)],xy=(t,e,r)=>{if(e._n)return e;const s=Um((...a)=>$l(e(...a)),r);return s._c=!1,s},Jd=(t,e,r)=>{const s=t._ctx;for(const a in t){if(Vd(a))continue;const l=t[a];if(le(l))e[a]=xy(a,l,s);else if(l!=null){const h=$l(l);e[a]=()=>h}}},Hd=(t,e)=>{const r=$l(e);t.slots.default=()=>r},Oy=(t,e)=>{const r=t.slots=Ud();if(t.vnode.shapeFlag&32){const s=e._;s?(ct(r,e),od(r,"_",s,!0)):Jd(e,r)}else e&&Hd(t,e)},Cy=(t,e,r)=>{const{vnode:s,slots:a}=t;let l=!0,h=Fe;if(s.shapeFlag&32){const m=e._;m?r&&m===1?l=!1:(ct(a,e),!r&&m===1&&delete a._):(l=!e.$stable,Jd(e,a)),h=e}else e&&(Hd(t,e),h={default:1});if(l)for(const m in a)!Vd(m)&&h[m]==null&&delete a[m]};function nl(t,e,r,s,a=!1){if(ie(t)){t.forEach((R,B)=>nl(R,e&&(ie(e)?e[B]:e),r,s,a));return}if(Ko(s)&&!a)return;const l=s.shapeFlag&4?jl(s.component)||s.component.proxy:s.el,h=a?null:l,{i:m,r:N}=t,d=e&&e.r,v=m.refs===Fe?m.refs={}:m.refs,W=m.setupState;if(d!=null&&d!==N&&(ht(d)?(v[d]=null,we(W,d)&&(W[d]=null)):Dt(d)&&(d.value=null)),le(N))gi(N,m,12,[h,v]);else{const R=ht(N),B=Dt(N);if(R||B){const pe=()=>{if(t.f){const Q=R?we(W,N)?W[N]:v[N]:N.value;a?ie(Q)&&_l(Q,l):ie(Q)?Q.includes(l)||Q.push(l):R?(v[N]=[l],we(W,N)&&(W[N]=v[N])):(N.value=[l],t.k&&(v[t.k]=N.value))}else R?(v[N]=h,we(W,N)&&(W[N]=h)):B&&(N.value=h,t.k&&(v[t.k]=h))};h?(pe.id=-1,St(pe,r)):pe()}}}const St=Km;function qy(t){return Wy(t)}function Wy(t,e){const r=ad();r.__VUE__=!0;const{insert:s,remove:a,patchProp:l,createElement:h,createText:m,createComment:N,setText:d,setElementText:v,parentNode:W,nextSibling:R,setScopeId:B=Xt,insertStaticContent:pe}=t,Q=(p,w,x,q=null,_=null,M=null,S=void 0,A=null,L=!!w.dynamicChildren)=>{if(p===w)return;p&&!bs(p,w)&&(q=er(p),at(p,_,M,!0),p=null),w.patchFlag===-2&&(L=!1,w.dynamicChildren=null);const{type:T,ref:P,shapeFlag:U}=w;switch(T){case yu:je(p,w,x,q);break;case Js:J(p,w,x,q);break;case $u:p==null&&G(w,x,q,S);break;case xr:pr(p,w,x,q,_,M,S,A,L);break;default:U&1?dt(p,w,x,q,_,M,S,A,L):U&6?K(p,w,x,q,_,M,S,A,L):(U&64||U&128)&&T.process(p,w,x,q,_,M,S,A,L,Yr)}P!=null&&_&&nl(P,p&&p.ref,M,w||p,!w)},je=(p,w,x,q)=>{if(p==null)s(w.el=m(w.children),x,q);else{const _=w.el=p.el;w.children!==p.children&&d(_,w.children)}},J=(p,w,x,q)=>{p==null?s(w.el=N(w.children||""),x,q):w.el=p.el},G=(p,w,x,q)=>{[p.el,p.anchor]=pe(p.children,w,x,q,p.el,p.anchor)},de=({el:p,anchor:w},x,q)=>{let _;for(;p&&p!==w;)_=R(p),s(p,x,q),p=_;s(w,x,q)},Ce=({el:p,anchor:w})=>{let x;for(;p&&p!==w;)x=R(p),a(p),p=x;a(w)},dt=(p,w,x,q,_,M,S,A,L)=>{w.type==="svg"?S="svg":w.type==="math"&&(S="mathml"),p==null?ne(w,x,q,_,M,S,A,L):Gr(p,w,_,M,S,A,L)},ne=(p,w,x,q,_,M,S,A)=>{let L,T;const{props:P,shapeFlag:U,transition:$,dirs:z}=p;if(L=p.el=h(p.type,M,P&&P.is,P),U&8?v(L,p.children):U&16&&tt(p.children,L,null,q,_,Uu(p,M),S,A),z&&Li(p,null,q,"created"),He(L,p,p.scopeId,S,q),P){for(const ge in P)ge!=="value"&&!Cs(ge)&&l(L,ge,null,P[ge],M,p.children,q,_,It);"value"in P&&l(L,"value",null,P.value,M),(T=P.onVnodeBeforeMount)&&wr(T,q,p)}z&&Li(p,null,q,"beforeMount");const se=_y(_,$);se&&$.beforeEnter(L),s(L,w,x),((T=P&&P.onVnodeMounted)||se||z)&&St(()=>{T&&wr(T,q,p),se&&$.enter(L),z&&Li(p,null,q,"mounted")},_)},He=(p,w,x,q,_)=>{if(x&&B(p,x),q)for(let M=0;M<q.length;M++)B(p,q[M]);if(_){let M=_.subTree;if(w===M){const S=_.vnode;He(p,S,S.scopeId,S.slotScopeIds,_.parent)}}},tt=(p,w,x,q,_,M,S,A,L=0)=>{for(let T=L;T<p.length;T++){const P=p[T]=A?ii(p[T]):Or(p[T]);Q(null,P,w,x,q,_,M,S,A)}},Gr=(p,w,x,q,_,M,S)=>{const A=w.el=p.el;let{patchFlag:L,dynamicChildren:T,dirs:P}=w;L|=p.patchFlag&16;const U=p.props||Fe,$=w.props||Fe;let z;if(x&&Pi(x,!1),(z=$.onVnodeBeforeUpdate)&&wr(z,x,w,p),P&&Li(w,p,x,"beforeUpdate"),x&&Pi(x,!0),T?Te(p.dynamicChildren,T,A,x,q,Uu(w,_),M):S||qe(p,w,A,null,x,q,Uu(w,_),M,!1),L>0){if(L&16)Ne(A,w,U,$,x,q,_);else if(L&2&&U.class!==$.class&&l(A,"class",null,$.class,_),L&4&&l(A,"style",U.style,$.style,_),L&8){const se=w.dynamicProps;for(let ge=0;ge<se.length;ge++){const be=se[ge],Le=U[be],Et=$[be];(Et!==Le||be==="value")&&l(A,be,Le,Et,_,p.children,x,q,It)}}L&1&&p.children!==w.children&&v(A,w.children)}else!S&&T==null&&Ne(A,w,U,$,x,q,_);((z=$.onVnodeUpdated)||P)&&St(()=>{z&&wr(z,x,w,p),P&&Li(w,p,x,"updated")},q)},Te=(p,w,x,q,_,M,S)=>{for(let A=0;A<w.length;A++){const L=p[A],T=w[A],P=L.el&&(L.type===xr||!bs(L,T)||L.shapeFlag&70)?W(L.el):x;Q(L,T,P,null,q,_,M,S,!0)}},Ne=(p,w,x,q,_,M,S)=>{if(x!==q){if(x!==Fe)for(const A in x)!Cs(A)&&!(A in q)&&l(p,A,x[A],null,S,w.children,_,M,It);for(const A in q){if(Cs(A))continue;const L=q[A],T=x[A];L!==T&&A!=="value"&&l(p,A,T,L,S,w.children,_,M,It)}"value"in q&&l(p,"value",x.value,q.value,S)}},pr=(p,w,x,q,_,M,S,A,L)=>{const T=w.el=p?p.el:m(""),P=w.anchor=p?p.anchor:m("");let{patchFlag:U,dynamicChildren:$,slotScopeIds:z}=w;z&&(A=A?A.concat(z):z),p==null?(s(T,x,q),s(P,x,q),tt(w.children||[],x,P,_,M,S,A,L)):U>0&&U&64&&$&&p.dynamicChildren?(Te(p.dynamicChildren,$,x,_,M,S,A),(w.key!=null||_&&w===_.subTree)&&Kd(p,w,!0)):qe(p,w,x,P,_,M,S,A,L)},K=(p,w,x,q,_,M,S,A,L)=>{w.slotScopeIds=A,p==null?w.shapeFlag&512?_.ctx.activate(w,x,q,S,L):Ie(w,x,q,_,M,S,L):fn(p,w,L)},Ie=(p,w,x,q,_,M,S)=>{const A=p.component=Fy(p,q,_);if(Md(p)&&(A.ctx.renderer=Yr),Uy(A),A.asyncDep){if(_&&_.registerDep(A,rt),!p.el){const L=A.subTree=ln(Js);J(null,L,w,x)}}else rt(A,p,w,x,_,M,S)},fn=(p,w,x)=>{const q=w.component=p.component;if(jm(p,w,x))if(q.asyncDep&&!q.asyncResolved){Se(q,w,x);return}else q.next=w,Lm(q.update),q.effect.dirty=!0,q.update();else w.el=p.el,q.vnode=w},rt=(p,w,x,q,_,M,S)=>{const A=()=>{if(p.isMounted){let{next:P,bu:U,u:$,parent:z,vnode:se}=p;{const Sr=Gd(p);if(Sr){P&&(P.el=se.el,Se(p,P,S)),Sr.asyncDep.then(()=>{p.isUnmounted||A()});return}}let ge=P,be;Pi(p,!1),P?(P.el=se.el,Se(p,P,S)):P=se,U&&Du(U),(be=P.props&&P.props.onVnodeBeforeUpdate)&&wr(be,z,P,se),Pi(p,!0);const Le=Pu(p),Et=p.subTree;p.subTree=Le,Q(Et,Le,W(Et.el),er(Et),p,_,M),P.el=Le.el,ge===null&&Vm(p,Le.el),$&&St($,_),(be=P.props&&P.props.onVnodeUpdated)&&St(()=>wr(be,z,P,se),_)}else{let P;const{el:U,props:$}=w,{bm:z,m:se,parent:ge}=p,be=Ko(w);if(Pi(p,!1),z&&Du(z),!be&&(P=$&&$.onVnodeBeforeMount)&&wr(P,ge,w),Pi(p,!0),U&&cs){const Le=()=>{p.subTree=Pu(p),cs(U,p.subTree,p,_,null)};be?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Le()):Le()}else{const Le=p.subTree=Pu(p);Q(null,Le,x,q,p,_,M),w.el=Le.el}if(se&&St(se,_),!be&&(P=$&&$.onVnodeMounted)){const Le=w;St(()=>wr(P,ge,Le),_)}(w.shapeFlag&256||ge&&Ko(ge.vnode)&&ge.vnode.shapeFlag&256)&&p.a&&St(p.a,_),p.isMounted=!0,w=x=q=null}},L=p.effect=new kl(A,Xt,()=>Fl(T),p.scope),T=p.update=()=>{L.dirty&&L.run()};T.id=p.uid,Pi(p,!0),T()},Se=(p,w,x)=>{w.component=p;const q=p.vnode.props;p.vnode=w,p.next=null,vy(p,w.props,q,x),Cy(p,w.children,x),Ti(),ih(p),Ii()},qe=(p,w,x,q,_,M,S,A,L=!1)=>{const T=p&&p.children,P=p?p.shapeFlag:0,U=w.children,{patchFlag:$,shapeFlag:z}=w;if($>0){if($&128){ki(T,U,x,q,_,M,S,A,L);return}else if($&256){mr(T,U,x,q,_,M,S,A,L);return}}z&8?(P&16&&It(T,_,M),U!==T&&v(x,U)):P&16?z&16?ki(T,U,x,q,_,M,S,A,L):It(T,_,M,!0):(P&8&&v(x,""),z&16&&tt(U,x,q,_,M,S,A,L))},mr=(p,w,x,q,_,M,S,A,L)=>{p=p||_n,w=w||_n;const T=p.length,P=w.length,U=Math.min(T,P);let $;for($=0;$<U;$++){const z=w[$]=L?ii(w[$]):Or(w[$]);Q(p[$],z,x,null,_,M,S,A,L)}T>P?It(p,_,M,!0,!1,U):tt(w,x,q,_,M,S,A,L,U)},ki=(p,w,x,q,_,M,S,A,L)=>{let T=0;const P=w.length;let U=p.length-1,$=P-1;for(;T<=U&&T<=$;){const z=p[T],se=w[T]=L?ii(w[T]):Or(w[T]);if(bs(z,se))Q(z,se,x,null,_,M,S,A,L);else break;T++}for(;T<=U&&T<=$;){const z=p[U],se=w[$]=L?ii(w[$]):Or(w[$]);if(bs(z,se))Q(z,se,x,null,_,M,S,A,L);else break;U--,$--}if(T>U){if(T<=$){const z=$+1,se=z<P?w[z].el:q;for(;T<=$;)Q(null,w[T]=L?ii(w[T]):Or(w[T]),x,se,_,M,S,A,L),T++}}else if(T>$)for(;T<=U;)at(p[T],_,M,!0),T++;else{const z=T,se=T,ge=new Map;for(T=se;T<=$;T++){const bt=w[T]=L?ii(w[T]):Or(w[T]);bt.key!=null&&ge.set(bt.key,T)}let be,Le=0;const Et=$-se+1;let Sr=!1,hs=0;const Si=new Array(Et);for(T=0;T<Et;T++)Si[T]=0;for(T=z;T<=U;T++){const bt=p[T];if(Le>=Et){at(bt,_,M,!0);continue}let Pt;if(bt.key!=null)Pt=ge.get(bt.key);else for(be=se;be<=$;be++)if(Si[be-se]===0&&bs(bt,w[be])){Pt=be;break}Pt===void 0?at(bt,_,M,!0):(Si[Pt-se]=T+1,Pt>=hs?hs=Pt:Sr=!0,Q(bt,w[Pt],x,null,_,M,S,A,L),Le++)}const Co=Sr?Ty(Si):_n;for(be=Co.length-1,T=Et-1;T>=0;T--){const bt=se+T,Pt=w[bt],oe=bt+1<P?w[bt+1].el:q;Si[T]===0?Q(null,Pt,x,oe,_,M,S,A,L):Sr&&(be<0||T!==Co[be]?kr(Pt,x,oe,2):be--)}}},kr=(p,w,x,q,_=null)=>{const{el:M,type:S,transition:A,children:L,shapeFlag:T}=p;if(T&6){kr(p.component.subTree,w,x,q);return}if(T&128){p.suspense.move(w,x,q);return}if(T&64){S.move(p,w,x,Yr);return}if(S===xr){s(M,w,x);for(let U=0;U<L.length;U++)kr(L[U],w,x,q);s(p.anchor,w,x);return}if(S===$u){de(p,w,x);return}if(q!==2&&T&1&&A)if(q===0)A.beforeEnter(M),s(M,w,x),St(()=>A.enter(M),_);else{const{leave:U,delayLeave:$,afterLeave:z}=A,se=()=>s(M,w,x),ge=()=>{U(M,()=>{se(),z&&z()})};$?$(M,se,ge):ge()}else s(M,w,x)},at=(p,w,x,q=!1,_=!1)=>{const{type:M,props:S,ref:A,children:L,dynamicChildren:T,shapeFlag:P,patchFlag:U,dirs:$}=p;if(A!=null&&nl(A,null,x,p,!0),P&256){w.ctx.deactivate(p);return}const z=P&1&&$,se=!Ko(p);let ge;if(se&&(ge=S&&S.onVnodeBeforeUnmount)&&wr(ge,w,p),P&6)Oo(p.component,x,q);else{if(P&128){p.suspense.unmount(x,q);return}z&&Li(p,null,w,"beforeUnmount"),P&64?p.type.remove(p,w,x,_,Yr,q):T&&(M!==xr||U>0&&U&64)?It(T,w,x,!1,!0):(M===xr&&U&384||!_&&P&16)&&It(L,w,x),q&&zr(p)}(se&&(ge=S&&S.onVnodeUnmounted)||z)&&St(()=>{ge&&wr(ge,w,p),z&&Li(p,null,w,"unmounted")},x)},zr=p=>{const{type:w,el:x,anchor:q,transition:_}=p;if(w===xr){Zt(x,q);return}if(w===$u){Ce(p);return}const M=()=>{a(x),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(p.shapeFlag&1&&_&&!_.persisted){const{leave:S,delayLeave:A}=_,L=()=>S(x,M);A?A(p.el,M,L):L()}else M()},Zt=(p,w)=>{let x;for(;p!==w;)x=R(p),a(p),p=x;a(w)},Oo=(p,w,x)=>{const{bum:q,scope:_,update:M,subTree:S,um:A}=p;q&&Du(q),_.stop(),M&&(M.active=!1,at(S,p,w,x)),A&&St(A,w),St(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},It=(p,w,x,q=!1,_=!1,M=0)=>{for(let S=M;S<p.length;S++)at(p[S],w,x,q,_)},er=p=>p.shapeFlag&6?er(p.component.subTree):p.shapeFlag&128?p.suspense.next():R(p.anchor||p.el);let pn=!1;const ls=(p,w,x)=>{p==null?w._vnode&&at(w._vnode,null,null,!0):Q(w._vnode||null,p,w,null,null,null,x),pn||(pn=!0,ih(),Id(),pn=!1),w._vnode=p},Yr={p:Q,um:at,m:kr,r:zr,mt:Ie,mc:tt,pc:qe,pbc:Te,n:er,o:t};let mn,cs;return e&&([mn,cs]=e(Yr)),{render:ls,hydrate:mn,createApp:Ny(ls,mn)}}function Uu({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Pi({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function _y(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Kd(t,e,r=!1){const s=t.children,a=e.children;if(ie(s)&&ie(a))for(let l=0;l<s.length;l++){const h=s[l];let m=a[l];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=a[l]=ii(a[l]),m.el=h.el),r||Kd(h,m)),m.type===yu&&(m.el=h.el)}}function Ty(t){const e=t.slice(),r=[0];let s,a,l,h,m;const N=t.length;for(s=0;s<N;s++){const d=t[s];if(d!==0){if(a=r[r.length-1],t[a]<d){e[s]=a,r.push(s);continue}for(l=0,h=r.length-1;l<h;)m=l+h>>1,t[r[m]]<d?l=m+1:h=m;d<t[r[l]]&&(l>0&&(e[s]=r[l-1]),r[l]=s)}}for(l=r.length,h=r[l-1];l-- >0;)r[l]=h,h=e[h];return r}function Gd(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gd(e)}const Iy=t=>t.__isTeleport,xr=Symbol.for("v-fgt"),yu=Symbol.for("v-txt"),Js=Symbol.for("v-cmt"),$u=Symbol.for("v-stc"),Ts=[];let dr=null;function Ey(t=!1){Ts.push(dr=t?null:[])}function ky(){Ts.pop(),dr=Ts[Ts.length-1]||null}let Hs=1;function fh(t){Hs+=t}function Sy(t){return t.dynamicChildren=Hs>0?dr||_n:null,ky(),Hs>0&&dr&&dr.push(t),t}function Ay(t,e,r,s,a,l){return Sy(st(t,e,r,s,a,l,!0))}function Ry(t){return t?t.__v_isVNode===!0:!1}function bs(t,e){return t.type===e.type&&t.key===e.key}const zd=({key:t})=>t??null,zo=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ht(t)||Dt(t)||le(t)?{i:Wr,r:t,k:e,f:!!r}:t:null);function st(t,e=null,r=null,s=0,a=null,l=t===xr?0:1,h=!1,m=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zd(e),ref:e&&zo(e),scopeId:Sd,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Wr};return m?(Ql(N,r),l&128&&t.normalize(N)):r&&(N.shapeFlag|=ht(r)?8:16),Hs>0&&!h&&dr&&(N.patchFlag>0||l&6)&&N.patchFlag!==32&&dr.push(N),N}const ln=My;function My(t,e=null,r=null,s=0,a=null,l=!1){if((!t||t===Jm)&&(t=Js),Ry(t)){const m=es(t,e,!0);return r&&Ql(m,r),Hs>0&&!l&&dr&&(m.shapeFlag&6?dr[dr.indexOf(t)]=m:dr.push(m)),m.patchFlag|=-2,m}if(Vy(t)&&(t=t.__vccOpts),e){e=Dy(e);let{class:m,style:N}=e;m&&!ht(m)&&(e.class=El(m)),Je(N)&&(xd(N)&&!ie(N)&&(N=ct({},N)),e.style=Il(N))}const h=ht(t)?1:Hm(t)?128:Iy(t)?64:Je(t)?4:le(t)?2:0;return st(t,e,r,s,a,h,l,!0)}function Dy(t){return t?xd(t)||$d(t)?ct({},t):t:null}function es(t,e,r=!1,s=!1){const{props:a,ref:l,patchFlag:h,children:m,transition:N}=t,d=e?Ly(a||{},e):a,v={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&zd(d),ref:e&&e.ref?r&&l?ie(l)?l.concat(zo(e)):[l,zo(e)]:zo(e):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xr?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:N,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&es(t.ssContent),ssFallback:t.ssFallback&&es(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return N&&s&&(v.transition=N.clone(v)),v}function Ks(t=" ",e=0){return ln(yu,null,t,e)}function Or(t){return t==null||typeof t=="boolean"?ln(Js):ie(t)?ln(xr,null,t.slice()):typeof t=="object"?ii(t):ln(yu,null,String(t))}function ii(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:es(t)}function Ql(t,e){let r=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ie(e))r=16;else if(typeof e=="object")if(s&65){const a=e.default;a&&(a._c&&(a._d=!1),Ql(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!$d(e)?e._ctx=Wr:a===3&&Wr&&(Wr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else le(e)?(e={default:e,_ctx:Wr},r=32):(e=String(e),s&64?(r=16,e=[Ks(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ly(...t){const e={};for(let r=0;r<t.length;r++){const s=t[r];for(const a in s)if(a==="class")e.class!==s.class&&(e.class=El([e.class,s.class]));else if(a==="style")e.style=Il([e.style,s.style]);else if(lu(a)){const l=e[a],h=s[a];h&&l!==h&&!(ie(l)&&l.includes(h))&&(e[a]=l?[].concat(l,h):h)}else a!==""&&(e[a]=s[a])}return e}function wr(t,e,r,s=null){fr(t,e,7,[r,s])}const Py=Bd();let By=0;function Fy(t,e,r){const s=t.type,a=(e?e.appContext:t.appContext)||Py,l={uid:By++,vnode:t,type:s,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new sm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jd(s,a),emitsOptions:kd(s,a),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:s.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=Fm.bind(null,l),t.ce&&t.ce(l),l}let Tt=null,aa,sl;{const t=ad(),e=(r,s)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(s),l=>{a.length>1?a.forEach(h=>h(l)):a[0](l)}};aa=e("__VUE_INSTANCE_SETTERS__",r=>Tt=r),sl=e("__VUE_SSR_SETTERS__",r=>wu=r)}const yo=t=>{const e=Tt;return aa(t),t.scope.on(),()=>{t.scope.off(),aa(e)}},ph=()=>{Tt&&Tt.scope.off(),aa(null)};function Yd(t){return t.vnode.shapeFlag&4}let wu=!1;function Uy(t,e=!1){e&&sl(e);const{props:r,children:s}=t.vnode,a=Yd(t);by(t,r,a,e),Oy(t,s);const l=a?$y(t,e):void 0;return e&&sl(!1),l}function $y(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hy);const{setup:s}=r;if(s){const a=t.setupContext=s.length>1?jy(t):null,l=yo(t);Ti();const h=gi(s,t,0,[t.props,a]);if(Ii(),l(),rd(h)){if(h.then(ph,ph),e)return h.then(m=>{mh(t,m,e)}).catch(m=>{fu(m,t,0)});t.asyncDep=h}else mh(t,h,e)}else Xd(t,e)}function mh(t,e,r){le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=Wd(e)),Xd(t,r)}let yh;function Xd(t,e,r){const s=t.type;if(!t.render){if(!e&&yh&&!s.render){const a=s.template||Ul(t).template;if(a){const{isCustomElement:l,compilerOptions:h}=t.appContext.config,{delimiters:m,compilerOptions:N}=s,d=ct(ct({isCustomElement:l,delimiters:m},h),N);s.render=yh(a,d)}}t.render=s.render||Xt}{const a=yo(t);Ti();try{dy(t)}finally{Ii(),a()}}}const Qy={get(t,e){return Mt(t,"get",""),t[e]}};function jy(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Qy),slots:t.slots,emit:t.emit,expose:e}}function jl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Wd(Tm(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ws)return Ws[r](t)},has(e,r){return r in e||r in Ws}}))}function Vy(t){return le(t)&&"__vccOpts"in t}const Jy=(t,e)=>Im(t,e,wu),Hy="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ky="http://www.w3.org/2000/svg",Gy="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,wh=ni&&ni.createElement("template"),zy={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,s)=>{const a=e==="svg"?ni.createElementNS(Ky,t):e==="mathml"?ni.createElementNS(Gy,t):ni.createElement(t,r?{is:r}:void 0);return t==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:t=>ni.createTextNode(t),createComment:t=>ni.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ni.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,s,a,l){const h=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{wh.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const m=wh.content;if(s==="svg"||s==="mathml"){const N=m.firstChild;for(;N.firstChild;)m.appendChild(N.firstChild);m.removeChild(N)}e.insertBefore(m,r)}return[h?h.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Yy=Symbol("_vtc");function Xy(t,e,r){const s=t[Yy];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Nh=Symbol("_vod"),Zy=Symbol("_vsh"),ew=Symbol(""),tw=/(^|;)\s*display\s*:/;function rw(t,e,r){const s=t.style,a=ht(r);let l=!1;if(r&&!a){if(e)if(ht(e))for(const h of e.split(";")){const m=h.slice(0,h.indexOf(":")).trim();r[m]==null&&Yo(s,m,"")}else for(const h in e)r[h]==null&&Yo(s,h,"");for(const h in r)h==="display"&&(l=!0),Yo(s,h,r[h])}else if(a){if(e!==r){const h=s[ew];h&&(r+=";"+h),s.cssText=r,l=tw.test(r)}}else e&&t.removeAttribute("style");Nh in t&&(t[Nh]=l?s.display:"",t[Zy]&&(s.display="none"))}const gh=/\s*!important$/;function Yo(t,e,r){if(ie(r))r.forEach(s=>Yo(t,e,s));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const s=iw(t,e);gh.test(r)?t.setProperty(ns(s),r.replace(gh,""),"important"):t[s]=r}}const bh=["Webkit","Moz","ms"],Qu={};function iw(t,e){const r=Qu[e];if(r)return r;let s=Zn(e);if(s!=="filter"&&s in t)return Qu[e]=s;s=sd(s);for(let a=0;a<bh.length;a++){const l=bh[a]+s;if(l in t)return Qu[e]=l}return e}const vh="http://www.w3.org/1999/xlink";function nw(t,e,r,s,a){if(s&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(vh,e.slice(6,e.length)):t.setAttributeNS(vh,e,r);else{const l=im(e);r==null||l&&!ud(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function sw(t,e,r,s,a,l,h){if(e==="innerHTML"||e==="textContent"){s&&h(s,a,l),t[e]=r??"";return}const m=t.tagName;if(e==="value"&&m!=="PROGRESS"&&!m.includes("-")){const d=m==="OPTION"?t.getAttribute("value")||"":t.value,v=r??"";(d!==v||!("_value"in t))&&(t.value=v),r==null&&t.removeAttribute(e),t._value=r;return}let N=!1;if(r===""||r==null){const d=typeof t[e];d==="boolean"?r=ud(r):r==null&&d==="string"?(r="",N=!0):d==="number"&&(r=0,N=!0)}try{t[e]=r}catch{}N&&t.removeAttribute(e)}function ow(t,e,r,s){t.addEventListener(e,r,s)}function aw(t,e,r,s){t.removeEventListener(e,r,s)}const xh=Symbol("_vei");function uw(t,e,r,s,a=null){const l=t[xh]||(t[xh]={}),h=l[e];if(s&&h)h.value=s;else{const[m,N]=lw(e);if(s){const d=l[e]=dw(s,a);ow(t,m,d,N)}else h&&(aw(t,m,h,N),l[e]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function lw(t){let e;if(Oh.test(t)){e={};let s;for(;s=t.match(Oh);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ns(t.slice(2)),e]}let ju=0;const cw=Promise.resolve(),hw=()=>ju||(cw.then(()=>ju=0),ju=Date.now());function dw(t,e){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;fr(fw(s,r.value),e,5,[s])};return r.value=t,r.attached=hw(),r}function fw(t,e){if(ie(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(s=>a=>!a._stopped&&s&&s(a))}else return e}const Ch=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pw=(t,e,r,s,a,l,h,m,N)=>{const d=a==="svg";e==="class"?Xy(t,s,d):e==="style"?rw(t,r,s):lu(e)?Wl(e)||uw(t,e,r,s,h):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mw(t,e,s,d))?sw(t,e,s,l,h,m,N):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),nw(t,e,s,d))};function mw(t,e,r,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ch(e)&&le(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Ch(e)&&ht(r)?!1:e in t}const yw=ct({patchProp:pw},zy);let qh;function ww(){return qh||(qh=qy(yw))}const Nw=(...t)=>{const e=ww().createApp(...t),{mount:r}=e;return e.mount=s=>{const a=bw(s);if(!a)return;const l=e._component;!le(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const h=r(a,!1,gw(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),h},e};function gw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bw(t){return ht(t)?document.querySelector(t):t}function bi(t){return typeof t>"u"||t===void 0}function Kt(t){return typeof t=="string"}function Nu(t){return typeof t=="number"}function ua(t){return typeof t=="boolean"}function Vl(t){return t===null}function vw(t){return t instanceof Date}function Jl(t){return typeof t=="bigint"}function Gt(t){return typeof t=="function"}function qr(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function jo(t){return Jr(t)?t:[t]}function Jr(t){return Array.isArray(t)}function vi(t){return t}const Ee=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Ue=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}}),Mr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}}),Zd=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),xw=["preserve rows","delete rows","drop"],Ft=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}}),Ci=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:Ue.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:Ue.create(t),identifier:Ue.create(e)})}}),Is=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:Ci.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),ol=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),al=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}}),Ei=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}}),xi=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:Ci.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:Ci.createWithSchema(t,e)})}});function Lt(t){return qr(t)&&Gt(t.toOperationNode)}function Ow(t){return qr(t)&&"expressionType"in t&&Lt(t)}function Cw(t){return qr(t)&&"expression"in t&&Kt(t.alias)&&Lt(t)}const Rr=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}}),qi=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}}),ss=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}}),Vu=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?qi.create(t.on,r):ss.create(t.on,r)})}}),Es=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Vu.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Vu.cloneWithOperation(t.on,"And",e):Vu.create(e)})}}),ts=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),qw=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],Ww=["+","-","*","/","%","^","&","|","#","<<",">>"],ef=["->","->>"],_w=[...qw,...Ww,"&&","||"],Tw=["exists","not exists"],Iw=["not","-",...Tw],Ew=[..._w,...ef,...Iw,"between","between symmetric"],Wi=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function Wh(t){return Kt(t)&&ef.includes(t)}const ze=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:Ue.create(t)})}}),Hl=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}}),gu=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Hl.create()})}});var Sn;class kw{constructor(e){C(this,Sn,void 0);k(this,Sn,e)}get dynamicReference(){return n(this,Sn)}get refType(){}toOperationNode(){return of(n(this,Sn))}}Sn=new WeakMap;function tf(t){return qr(t)&&Lt(t)&&Kt(t.dynamicReference)}const ul=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}}),yt=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return yt.create([t],[])},createWithChild(t){return yt.create(["",""],[t])},createWithChildren(t){return yt.create(new Array(t.length+1).fill(""),t)}});function rf(t){return t==="asc"||t==="desc"}function bu(t){if(t.length===2)return[Ju(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>Ju(r)):[Ju(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function Ju(t,e){const r=Sw(t);if(ul.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return ul.create(r,nf(e))}function Sw(t){if(xo(t))return dn(t);if(tf(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!rf(r))throw new Error(`Invalid order by direction: ${r}`);return ul.create(Hr(e),nf(r))}return Hr(t)}function nf(t){if(t)return t==="asc"||t==="desc"?yt.createWithSql(t):t.toOperationNode()}const la=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}}),sf=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}}),ks=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function of(t){return Kt(t)?Hr(t):t.toOperationNode()}function Gs(t){return Jr(t)?t.map(e=>Ht(e)):[Ht(t)]}function Ht(t){return xo(t)?dn(t):of(t)}function Aw(t,e){const r=Hr(t);if(Wh(e))return la.create(r,sf.create(Wi.create(e)));const s=e.slice(0,-1);if(Wh(s))return la.create(r,ks.create(Wi.create(s)));throw new Error(`Invalid JSON operator: ${e}`)}function Hr(t){const e=".";if(!t.includes(e))return gu.create(ze.create(t));const r=t.split(e).map(Kl);if(r.length===3)return Mw(r);if(r.length===2)return Dw(r);throw new Error(`invalid column reference ${t}`)}function Rw(t){const e=" as ";if(t.includes(e)){const[r,s]=t.split(e).map(Kl);return Ei.create(Hr(r),Ue.create(s))}else return Hr(t)}function af(t){return ze.create(t)}function ca(t){const e=" ";if(t.includes(e)){const[r,s]=t.split(e).map(Kl);if(!rf(s))throw new Error(`invalid order direction "${s}" next to "${r}"`);return bu([r,s])[0]}else return af(t)}function Mw(t){const[e,r,s]=t;return gu.create(ze.create(s),xi.createWithSchema(e,r))}function Dw(t){const[e,r]=t;return gu.create(ze.create(r),xi.create(e))}function Kl(t){return t.trim()}const uf=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}}),Gl=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}}),Ir=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Lw(t){return Jr(t)?Pw(t):et(t)}function et(t){return xo(t)?dn(t):Ir.create(t)}function zl(t){return Nu(t)||ua(t)||Vl(t)}function Yl(t){if(!zl(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Ir.createImmediate(t)}function Pw(t){return t.some(xo)?Gl.create(t.map(e=>et(e))):uf.create(t)}const rs=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function wt(t){if(t.length===3)return Xl(t[0],t[1],t[2]);if(t.length===1)return et(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Xl(t,e,r){return Bw(e)&&lf(r)?ts.create(Ht(t),ll(e),Ir.createImmediate(r)):ts.create(Ht(t),ll(e),Lw(r))}function Er(t,e,r){return ts.create(Ht(t),ll(e),Ht(r))}function _h(t,e){return ha(Object.entries(t).filter(([,r])=>!bi(r)).map(([r,s])=>Xl(r,lf(s)?"is":"=",s)),e)}function ha(t,e,r=!0){const s=e==="and"?qi.create:ss.create;if(t.length===0)return ts.create(Ir.createImmediate(1),Wi.create("="),Ir.createImmediate(e==="and"?1:0));let a=Th(t[0]);for(let l=1;l<t.length;++l)a=s(a,Th(t[l]));return t.length>1&&r?rs.create(a):a}function Bw(t){return t==="is"||t==="is not"}function lf(t){return Vl(t)||ua(t)}function ll(t){if(Kt(t)&&Ew.includes(t))return Wi.create(t);if(Lt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Th(t){return Lt(t)?t.toOperationNode():t}const is=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Ih=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),cl=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?is.cloneWithItems(t.orderBy,e):is.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?Ih.cloneWithItems(t.partitionBy,e):Ih.create(e)})}}),da=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}}),Eh=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),kh=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?qi.create(t.having,r):ss.create(t.having,r)})}}),fe=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:da.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?is.cloneWithItems(t.orderBy,e):is.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?Eh.cloneWithItems(t.groupBy,e):Eh.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithFetch(t,e){return c({...t,fetch:e})},cloneWithHaving(t,e){return c({...t,having:t.having?kh.cloneWithOperation(t.having,"And",e):kh.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});function ce(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var sr;const Ms=class Ms{constructor(e){C(this,sr,void 0);k(this,sr,c(e))}on(...e){return new Ms({...n(this,sr),joinNode:Es.cloneWithOn(n(this,sr).joinNode,wt(e))})}onRef(e,r,s){return new Ms({...n(this,sr),joinNode:Es.cloneWithOn(n(this,sr).joinNode,Er(e,r,s))})}onTrue(){return new Ms({...n(this,sr),joinNode:Es.cloneWithOn(n(this,sr).joinNode,yt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return n(this,sr).joinNode}};sr=new WeakMap;let fa=Ms;ce(fa,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Fw=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function Uw(t){return Gs(t).map(Fw.create)}var Ki;const Fa=class Fa{constructor(e){C(this,Ki,void 0);k(this,Ki,c(e))}orderBy(e,r){return new Fa({overNode:cl.cloneWithOrderByItems(n(this,Ki).overNode,bu([e,r]))})}partitionBy(e){return new Fa({overNode:cl.cloneWithPartitionByItems(n(this,Ki).overNode,Uw(e))})}$call(e){return e(this)}toOperationNode(){return n(this,Ki).overNode}};Ki=new WeakMap;let pa=Fa;ce(pa,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Ss=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Hl.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:gu.createSelectAll(t)})}});function os(t){return Gt(t)?os(t(us())):Jr(t)?t.map(e=>Sh(e)):[Sh(t)]}function Sh(t){return Kt(t)?Ss.create(Rw(t)):tf(t)?Ss.create(t.toOperationNode()):Ss.create(qf(t))}function wo(t){return t?Array.isArray(t)?t.map(Ah):[Ah(t)]:[Ss.createSelectAll()]}function Ah(t){if(Kt(t))return Ss.createSelectAllFromTable(Ge(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const $w=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}}),Qw=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function cf(t){const e=Gt(t)?t(us()):t,r=Jr(e)?e:c([e]);return jw(r)}function jw(t){const e=Vw(t);return[c([...e.keys()].map(ze.create)),$w.create(t.map(r=>Jw(r,e)))]}function Vw(t){const e=new Map;for(const r of t){const s=Object.keys(r);for(const a of s)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Jw(t,e){const r=Object.keys(t),s=Array.from({length:e.size});let a=!1;for(const h of r){const m=e.get(h);if(bi(m))continue;const N=t[h];(bi(N)||xo(N))&&(a=!0),s[m]=N}if(r.length<e.size||a){const h=Qw.create();return Gl.create(s.map(m=>bi(m)?h:et(m)))}return uf.create(s)}const Jt=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return c({kind:"InsertQueryNode"})},cloneWith(t,e){return c({...t,...e})}}),En=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return c({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return c({...t,from:t.from?da.cloneWithFroms(t.from,e):da.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})},cloneWithLimit(t,e){return c({...t,limit:e})}}),Rh=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}}),$i=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:da.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?is.cloneWithItems(t.orderBy,e):is.create(e)})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?Rh.cloneWithTables(t.using,e):Rh.create(e)})}}),At=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?qi.create(t.where,r):ss.create(t.where,r)})}}),Mh=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}}),Hw=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}}),No=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}}),Rt=c({is(t){return t.kind==="MergeQueryNode"},create(t,e){return c({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return c({...t,using:e})},cloneWithWhen(t,e){return c({...t,whens:t.whens?c([...t.whens,e]):c([e])})},cloneWithThen(t,e){return c({...t,whens:t.whens?c([...t.whens.slice(0,-1),No.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),ee=c({is(t){return fe.is(t)||Jt.is(t)||En.is(t)||$i.is(t)||Rt.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?At.cloneWithOperation(t.where,"And",e):At.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?Mh.cloneWithSelections(t.returning,e):Mh.create(e)})},cloneWithoutReturning(t){return c({...t,returning:void 0})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Hw.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return c({...t,top:e})}}),hf=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function Kw(...t){return t.length===2?[hf.create(Ht(t[0]),et(t[1]))]:Zl(t[0])}function Zl(t){const e=Gt(t)?t(us()):t;return Object.entries(e).filter(([r,s])=>s!==void 0).map(([r,s])=>hf.create(ze.create(r),et(s)))}const Gw=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});class zw{constructor(e,r){Z(this,"insertId");Z(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class go extends Error{constructor(r){super("no result");Z(this,"node");this.node=r}}function bo(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Vt=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?At.cloneWithOperation(t.indexWhere,"And",e):At.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?At.cloneWithOperation(t.indexWhere,"Or",e):At.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?At.cloneWithOperation(t.updateWhere,"And",e):At.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?At.cloneWithOperation(t.updateWhere,"Or",e):At.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var Re;const Dr=class Dr{constructor(e){C(this,Re,void 0);k(this,Re,c(e))}column(e){const r=ze.create(e);return new Dr({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{columns:n(this,Re).onConflictNode.columns?c([...n(this,Re).onConflictNode.columns,r]):c([r])})})}columns(e){const r=e.map(ze.create);return new Dr({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{columns:n(this,Re).onConflictNode.columns?c([...n(this,Re).onConflictNode.columns,...r]):c(r)})})}constraint(e){return new Dr({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{constraint:Ue.create(e)})})}expression(e){return new Dr({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Dr({...n(this,Re),onConflictNode:Vt.cloneWithIndexWhere(n(this,Re).onConflictNode,wt(e))})}whereRef(e,r,s){return new Dr({...n(this,Re),onConflictNode:Vt.cloneWithIndexWhere(n(this,Re).onConflictNode,Er(e,r,s))})}clearWhere(){return new Dr({...n(this,Re),onConflictNode:Vt.cloneWithoutIndexWhere(n(this,Re).onConflictNode)})}doNothing(){return new df({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ya({...n(this,Re),onConflictNode:Vt.cloneWith(n(this,Re).onConflictNode,{updates:Zl(e)})})}$call(e){return e(this)}};Re=new WeakMap;let ma=Dr;ce(ma,"don't await OnConflictBuilder instances.");var io;class df{constructor(e){C(this,io,void 0);k(this,io,c(e))}toOperationNode(){return n(this,io).onConflictNode}}io=new WeakMap;ce(df,"don't await OnConflictDoNothingBuilder instances.");var or;const Ds=class Ds{constructor(e){C(this,or,void 0);k(this,or,c(e))}where(...e){return new Ds({...n(this,or),onConflictNode:Vt.cloneWithUpdateWhere(n(this,or).onConflictNode,wt(e))})}whereRef(e,r,s){return new Ds({...n(this,or),onConflictNode:Vt.cloneWithUpdateWhere(n(this,or).onConflictNode,Er(e,r,s))})}clearWhere(){return new Ds({...n(this,or),onConflictNode:Vt.cloneWithoutUpdateWhere(n(this,or).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return n(this,or).onConflictNode}};or=new WeakMap;let ya=Ds;ce(ya,"don't await OnConflictUpdateBuilder instances.");const Yw=c({is(t){return t.kind==="TopNode"},create(t,e){return c({kind:"TopNode",expression:t,modifiers:e})}});function as(t,e){if(!Nu(t)&&!Jl(t))throw new Error(`Invalid top expression: ${t}`);if(!bi(e)&&!Xw(e))throw new Error(`Invalid top modifiers: ${e}`);return Yw.create(t,e)}function Xw(t){return t==="percent"||t==="with ties"||t==="percent with ties"}var re;const it=class it{constructor(e){C(this,re,void 0);k(this,re,c(e))}values(e){const[r,s]=cf(e);return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{columns:r,values:s})})}columns(e){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{columns:c(e.map(ze.create))})})}expression(e){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{values:dn(e)})})}defaultValues(){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{defaultValues:!0})})}ignore(){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{ignore:!0})})}top(e,r){return new it({...n(this,re),queryNode:ee.cloneWithTop(n(this,re).queryNode,as(e,r))})}onConflict(e){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{onConflict:e(new ma({onConflictNode:Vt.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new it({...n(this,re),queryNode:Jt.cloneWith(n(this,re).queryNode,{onDuplicateKey:Gw.create(Zl(e))})})}returning(e){return new it({...n(this,re),queryNode:ee.cloneWithReturning(n(this,re).queryNode,os(e))})}returningAll(){return new it({...n(this,re),queryNode:ee.cloneWithReturning(n(this,re).queryNode,wo())})}clearReturning(){return new it({...n(this,re),queryNode:ee.cloneWithoutReturning(n(this,re).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new it({...n(this,re)})}$castTo(){return new it(n(this,re))}$narrowType(){return new it(n(this,re))}$assertType(){return new it(n(this,re))}withPlugin(e){return new it({...n(this,re),executor:n(this,re).executor.withPlugin(e)})}toOperationNode(){return n(this,re).executor.transformQuery(n(this,re).queryNode,n(this,re).queryId)}compile(){return n(this,re).executor.compileQuery(this.toOperationNode(),n(this,re).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,re).executor.executeQuery(e,n(this,re).queryId);return n(this,re).executor.adapter.supportsReturning&&r.returning?s.rows:[new zw(s.insertId,s.numAffectedRows??s.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=go){const r=await this.executeTakeFirst();if(r===void 0)throw bo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,re).executor.stream(r,e,n(this,re).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new it({...n(this,re),queryNode:ee.cloneWithExplain(n(this,re).queryNode,e,r)}).execute()}};re=new WeakMap;let zs=it;ce(zs,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Zw{constructor(e){Z(this,"numDeletedRows");this.numDeletedRows=e}}const ec=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var V;const Be=class Be{constructor(e){C(this,V,void 0);k(this,V,c(e))}where(...e){return new Be({...n(this,V),queryNode:ee.cloneWithWhere(n(this,V).queryNode,wt(e))})}whereRef(e,r,s){return new Be({...n(this,V),queryNode:ee.cloneWithWhere(n(this,V).queryNode,Er(e,r,s))})}clearWhere(){return new Be({...n(this,V),queryNode:ee.cloneWithoutWhere(n(this,V).queryNode)})}top(e,r){return new Be({...n(this,V),queryNode:ee.cloneWithTop(n(this,V).queryNode,as(e,r))})}using(e){return new Be({...n(this,V),queryNode:$i.cloneWithUsing(n(this,V).queryNode,Xs(e))})}innerJoin(...e){return new Be({...n(this,V),queryNode:ee.cloneWithJoin(n(this,V).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new Be({...n(this,V),queryNode:ee.cloneWithJoin(n(this,V).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new Be({...n(this,V),queryNode:ee.cloneWithJoin(n(this,V).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new Be({...n(this,V),queryNode:ee.cloneWithJoin(n(this,V).queryNode,_t("FullJoin",e))})}returning(e){return new Be({...n(this,V),queryNode:ee.cloneWithReturning(n(this,V).queryNode,os(e))})}returningAll(e){return new Be({...n(this,V),queryNode:ee.cloneWithReturning(n(this,V).queryNode,wo(e))})}clearReturning(){return new Be({...n(this,V),queryNode:ee.cloneWithoutReturning(n(this,V).queryNode)})}clearLimit(){return new Be({...n(this,V),queryNode:$i.cloneWithoutLimit(n(this,V).queryNode)})}clearOrderBy(){return new Be({...n(this,V),queryNode:$i.cloneWithoutOrderBy(n(this,V).queryNode)})}orderBy(e,r){return new Be({...n(this,V),queryNode:$i.cloneWithOrderByItems(n(this,V).queryNode,bu([e,r]))})}limit(e){return new Be({...n(this,V),queryNode:$i.cloneWithLimit(n(this,V).queryNode,ec.create(et(e)))})}$call(e){return e(this)}$if(e,r){return e?r(this):new Be({...n(this,V)})}$castTo(){return new Be(n(this,V))}$narrowType(){return new Be(n(this,V))}$assertType(){return new Be(n(this,V))}withPlugin(e){return new Be({...n(this,V),executor:n(this,V).executor.withPlugin(e)})}toOperationNode(){return n(this,V).executor.transformQuery(n(this,V).queryNode,n(this,V).queryId)}compile(){return n(this,V).executor.compileQuery(this.toOperationNode(),n(this,V).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,V).executor.executeQuery(e,n(this,V).queryId);return n(this,V).executor.adapter.supportsReturning&&r.returning?s.rows:[new Zw(s.numAffectedRows??s.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=go){const r=await this.executeTakeFirst();if(r===void 0)throw bo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,V).executor.stream(r,e,n(this,V).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new Be({...n(this,V),queryNode:ee.cloneWithExplain(n(this,V).queryNode,e,r)}).execute()}};V=new WeakMap;let wa=Be;ce(wa,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class eN{constructor(e,r){Z(this,"numUpdatedRows");Z(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var H;const Ve=class Ve{constructor(e){C(this,H,void 0);k(this,H,c(e))}where(...e){return new Ve({...n(this,H),queryNode:ee.cloneWithWhere(n(this,H).queryNode,wt(e))})}whereRef(e,r,s){return new Ve({...n(this,H),queryNode:ee.cloneWithWhere(n(this,H).queryNode,Er(e,r,s))})}clearWhere(){return new Ve({...n(this,H),queryNode:ee.cloneWithoutWhere(n(this,H).queryNode)})}top(e,r){return new Ve({...n(this,H),queryNode:ee.cloneWithTop(n(this,H).queryNode,as(e,r))})}from(e){return new Ve({...n(this,H),queryNode:En.cloneWithFromItems(n(this,H).queryNode,Xs(e))})}innerJoin(...e){return new Ve({...n(this,H),queryNode:ee.cloneWithJoin(n(this,H).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new Ve({...n(this,H),queryNode:ee.cloneWithJoin(n(this,H).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new Ve({...n(this,H),queryNode:ee.cloneWithJoin(n(this,H).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new Ve({...n(this,H),queryNode:ee.cloneWithJoin(n(this,H).queryNode,_t("FullJoin",e))})}limit(e){return new Ve({...n(this,H),queryNode:En.cloneWithLimit(n(this,H).queryNode,ec.create(et(e)))})}set(...e){return new Ve({...n(this,H),queryNode:En.cloneWithUpdates(n(this,H).queryNode,Kw(...e))})}returning(e){return new Ve({...n(this,H),queryNode:ee.cloneWithReturning(n(this,H).queryNode,os(e))})}returningAll(){return new Ve({...n(this,H),queryNode:ee.cloneWithReturning(n(this,H).queryNode,wo())})}clearReturning(){return new Ve({...n(this,H),queryNode:ee.cloneWithoutReturning(n(this,H).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new Ve({...n(this,H)})}$castTo(){return new Ve(n(this,H))}$narrowType(){return new Ve(n(this,H))}$assertType(){return new Ve(n(this,H))}withPlugin(e){return new Ve({...n(this,H),executor:n(this,H).executor.withPlugin(e)})}toOperationNode(){return n(this,H).executor.transformQuery(n(this,H).queryNode,n(this,H).queryId)}compile(){return n(this,H).executor.compileQuery(this.toOperationNode(),n(this,H).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,H).executor.executeQuery(e,n(this,H).queryId);return n(this,H).executor.adapter.supportsReturning&&r.returning?s.rows:[new eN(s.numAffectedRows??s.numUpdatedOrDeletedRows??BigInt(0),s.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=go){const r=await this.executeTakeFirst();if(r===void 0)throw bo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,H).executor.stream(r,e,n(this,H).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new Ve({...n(this,H),queryNode:ee.cloneWithExplain(n(this,H).queryNode,e,r)}).execute()}};H=new WeakMap;let Ys=Ve;ce(Ys,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Dh=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:xi.create(t),columns:e?c(e.map(ze.create)):void 0})}}),Na=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var Lr;const Ua=class Ua{constructor(e){C(this,Lr,void 0);k(this,Lr,c(e))}materialized(){return new Ua({...n(this,Lr),node:Na.cloneWith(n(this,Lr).node,{materialized:!0})})}notMaterialized(){return new Ua({...n(this,Lr),node:Na.cloneWith(n(this,Lr).node,{materialized:!1})})}toOperationNode(){return n(this,Lr).node}};Lr=new WeakMap;let ga=Ua;ce(ga,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Lh(t,e){const r=e(dN()).toOperationNode();return Gt(t)?t(tN(r)).toOperationNode():Na.create(ff(t),r)}function tN(t){return e=>new ga({node:Na.create(ff(e),t)})}function ff(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],s=e[1].split(",").map(a=>a.trim());return Dh.create(r,s)}else return Dh.create(t)}const Vo=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}}),Ph=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function rN(t){let e="";for(let r=0;r<t;++r)e+=iN();return e}function iN(){return Ph[~~(Math.random()*Ph.length)]}function ke(){return new nN}var An;class nN{constructor(){C(this,An,void 0)}get queryId(){return n(this,An)===void 0&&k(this,An,rN(8)),n(this,An)}}An=new WeakMap;var $a;class tc{constructor(){Z(this,"nodeStack",[]);C(this,$a,c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return n(this,$a)[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}$a=new WeakMap;const sN=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});var Rn,Gi,zi,Qa,pf,ja,mf,Va,yf,li,bn,no,hl,Ja,wf;class oN extends tc{constructor(r){super();C(this,Qa);C(this,ja);C(this,Va);C(this,li);C(this,no);C(this,Ja);C(this,Rn,void 0);C(this,Gi,new Set);C(this,zi,new Set);k(this,Rn,r)}transformNodeImpl(r){if(!ue(this,Qa,pf).call(this,r))return super.transformNodeImpl(r);const s=ue(this,Va,yf).call(this,r);for(const h of s)n(this,zi).add(h);const a=ue(this,ja,mf).call(this,r);for(const h of a)n(this,Gi).add(h);const l=super.transformNodeImpl(r);for(const h of a)n(this,Gi).delete(h);for(const h of s)n(this,zi).delete(h);return l}transformSchemableIdentifier(r){const s=super.transformSchemableIdentifier(r);return s.schema||!n(this,Gi).has(r.identifier.name)?s:{...s,schema:Ue.create(n(this,Rn))}}transformReferences(r){const s=super.transformReferences(r);return s.table.table.schema?s:{...s,table:xi.createWithSchema(n(this,Rn),s.table.table.identifier.name)}}}Rn=new WeakMap,Gi=new WeakMap,zi=new WeakMap,Qa=new WeakSet,pf=function(r){return r.kind in sN},ja=new WeakSet,mf=function(r){const s=new Set;if("name"in r&&r.name&&Ci.is(r.name)&&ue(this,no,hl).call(this,r.name,s),"from"in r&&r.from)for(const a of r.from.froms)ue(this,li,bn).call(this,a,s);if("into"in r&&r.into&&ue(this,li,bn).call(this,r.into,s),"table"in r&&r.table&&ue(this,li,bn).call(this,r.table,s),"joins"in r&&r.joins)for(const a of r.joins)ue(this,li,bn).call(this,a.table,s);return"using"in r&&r.using&&ue(this,li,bn).call(this,r.using,s),s},Va=new WeakSet,yf=function(r){const s=new Set;return"with"in r&&r.with&&ue(this,Ja,wf).call(this,r.with,s),s},li=new WeakSet,bn=function(r,s){const a=xi.is(r)?r:Ei.is(r)&&xi.is(r.node)?r.node:null;a&&ue(this,no,hl).call(this,a.table,s)},no=new WeakSet,hl=function(r,s){const a=r.identifier.name;!n(this,Gi).has(a)&&!n(this,zi).has(a)&&s.add(a)},Ja=new WeakSet,wf=function(r,s){for(const a of r.expressions){const l=a.name.table.table.identifier.name;n(this,zi).has(l)||s.add(l)}};var so;class vo{constructor(e){C(this,so,void 0);k(this,so,new oN(e))}transformQuery(e){return n(this,so).transformNode(e.node)}async transformResult(e){return e.result}}so=new WeakMap;const aN=c({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return c({kind:"MatchedNode",not:t,bySource:e})}});function Bh(t,e,r){return No.create(ha([aN.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?Er(e[0],e[1],e[2]):wt(e)]:[]],"and",!1))}function As(t){return Kt(t)?yt.create([t],[]):Lt(t)?t.toOperationNode():t}var oo,Mn,Dn;class Fh{constructor(){C(this,oo,void 0);C(this,Mn,void 0);C(this,Dn,void 0);Z(this,"resolve",e=>{n(this,Mn)&&n(this,Mn).call(this,e)});Z(this,"reject",e=>{n(this,Dn)&&n(this,Dn).call(this,e)});k(this,oo,new Promise((e,r)=>{k(this,Dn,r),k(this,Mn,e)}))}get promise(){return n(this,oo)}}oo=new WeakMap,Mn=new WeakMap,Dn=new WeakMap;const Uh=new Set;function uN(t){Uh.has(t)||(Uh.add(t),console.log(t))}const lN=c([]);var Yi,ao,dl;class Nf{constructor(e=lN){C(this,ao);C(this,Yi,void 0);k(this,Yi,e)}get plugins(){return n(this,Yi)}transformQuery(e,r){for(const s of n(this,Yi)){const a=s.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async s=>{const a=await s.executeQuery(e),l=await ue(this,ao,dl).call(this,a,r);return cN(a,l),l})}async*stream(e,r,s){const a=new Fh,l=new Fh;this.provideConnection(async m=>(a.resolve(m),await l.promise)).catch(m=>a.reject(m));const h=await a.promise;try{for await(const m of h.streamQuery(e,r))yield await ue(this,ao,dl).call(this,m,s)}finally{l.resolve()}}}Yi=new WeakMap,ao=new WeakSet,dl=async function(e,r){for(const s of n(this,Yi))e=await s.transformResult({result:e,queryId:r});return e};function cN(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||uN("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class On extends Nf{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new On([...this.plugins,e])}withPlugins(e){return new On([...this.plugins,...e])}withPluginAtFront(e){return new On([e,...this.plugins])}withoutPlugins(){return new On([])}}const vu=new On;class hN{constructor(e){Z(this,"numChangedRows");this.numChangedRows=e}}var ci;const uc=class uc{constructor(e){C(this,ci,void 0);k(this,ci,c(e))}top(e,r){return new uc({...n(this,ci),queryNode:ee.cloneWithTop(n(this,ci).queryNode,as(e,r))})}using(...e){return new Vr({...n(this,ci),queryNode:Rt.cloneWithUsing(n(this,ci).queryNode,_t("Using",e))})}};ci=new WeakMap;let ba=uc;ce(ba,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var nt,Ln,Xo,Pr,Bi;const Ha=class Ha{constructor(e){C(this,Ln);C(this,Pr);C(this,nt,void 0);k(this,nt,c(e))}top(e,r){return new Ha({...n(this,nt),queryNode:ee.cloneWithTop(n(this,nt).queryNode,as(e,r))})}whenMatched(){return ue(this,Ln,Xo).call(this,[])}whenMatchedAnd(...e){return ue(this,Ln,Xo).call(this,e)}whenMatchedAndRef(e,r,s){return ue(this,Ln,Xo).call(this,[e,r,s],!0)}whenNotMatched(){return ue(this,Pr,Bi).call(this,[])}whenNotMatchedAnd(...e){return ue(this,Pr,Bi).call(this,e)}whenNotMatchedAndRef(e,r,s){return ue(this,Pr,Bi).call(this,[e,r,s],!0)}whenNotMatchedBySource(){return ue(this,Pr,Bi).call(this,[],!1,!0)}whenNotMatchedBySourceAnd(...e){return ue(this,Pr,Bi).call(this,e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,s){return ue(this,Pr,Bi).call(this,[e,r,s],!0,!0)}$call(e){return e(this)}$if(e,r){return e?r(this):new Ha({...n(this,nt)})}toOperationNode(){return n(this,nt).executor.transformQuery(n(this,nt).queryNode,n(this,nt).queryId)}compile(){return n(this,nt).executor.compileQuery(n(this,nt).queryNode,n(this,nt).queryId)}async execute(){const e=this.compile(),r=await n(this,nt).executor.executeQuery(e,n(this,nt).queryId);return[new hN(r.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=go){const r=await this.executeTakeFirst();if(r===void 0)throw bo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}};nt=new WeakMap,Ln=new WeakSet,Xo=function(e,r){return new fl({...n(this,nt),queryNode:Rt.cloneWithWhen(n(this,nt).queryNode,Bh({isMatched:!0},e,r))})},Pr=new WeakSet,Bi=function(e,r=!1,s=!1){const a={...n(this,nt),queryNode:Rt.cloneWithWhen(n(this,nt).queryNode,Bh({isMatched:!1,bySource:s},e,r))},l=s?fl:gf;return new l(a)};let Vr=Ha;ce(Vr,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");var ar;class fl{constructor(e){C(this,ar,void 0);k(this,ar,c(e))}thenDelete(){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,As("delete"))})}thenDoNothing(){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,As("do nothing"))})}thenUpdate(e){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,As(e(new Ys({queryId:n(this,ar).queryId,executor:vu,queryNode:En.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}}ar=new WeakMap;ce(fl,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var hi;class gf{constructor(e){C(this,hi,void 0);k(this,hi,c(e))}thenDoNothing(){return new Vr({...n(this,hi),queryNode:Rt.cloneWithThen(n(this,hi).queryNode,As("do nothing"))})}thenInsertValues(e){const[r,s]=cf(e);return new Vr({...n(this,hi),queryNode:Rt.cloneWithThen(n(this,hi).queryNode,As(Jt.cloneWith(Jt.createWithoutInto(),{columns:r,values:s})))})}}hi=new WeakMap;ce(gf,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var xe;const Qi=class Qi{constructor(e){C(this,xe,void 0);k(this,xe,c(e))}selectFrom(e){return yl({queryId:ke(),executor:n(this,xe).executor,queryNode:fe.createFrom(Xs(e),n(this,xe).withNode)})}selectNoFrom(e){return yl({queryId:ke(),executor:n(this,xe).executor,queryNode:fe.cloneWithSelections(fe.create(n(this,xe).withNode),os(e))})}insertInto(e){return new zs({queryId:ke(),executor:n(this,xe).executor,queryNode:Jt.create(Ge(e),n(this,xe).withNode)})}replaceInto(e){return new zs({queryId:ke(),executor:n(this,xe).executor,queryNode:Jt.create(Ge(e),n(this,xe).withNode,!0)})}deleteFrom(e){return new wa({queryId:ke(),executor:n(this,xe).executor,queryNode:$i.create(Xs(e),n(this,xe).withNode)})}updateTable(e){return new Ys({queryId:ke(),executor:n(this,xe).executor,queryNode:En.create(Zs(e),n(this,xe).withNode)})}mergeInto(e){return new ba({queryId:ke(),executor:n(this,xe).executor,queryNode:Rt.create(Wf(e),n(this,xe).withNode)})}with(e,r){const s=Lh(e,r);return new Qi({...n(this,xe),withNode:n(this,xe).withNode?Vo.cloneWithExpression(n(this,xe).withNode,s):Vo.create(s)})}withRecursive(e,r){const s=Lh(e,r);return new Qi({...n(this,xe),withNode:n(this,xe).withNode?Vo.cloneWithExpression(n(this,xe).withNode,s):Vo.create(s,{recursive:!0})})}withPlugin(e){return new Qi({...n(this,xe),executor:n(this,xe).executor.withPlugin(e)})}withoutPlugins(){return new Qi({...n(this,xe),executor:n(this,xe).executor.withoutPlugins()})}withSchema(e){return new Qi({...n(this,xe),executor:n(this,xe).executor.withPluginAtFront(new vo(e))})}};xe=new WeakMap;let va=Qi;function dN(){return new va({executor:vu})}function fN(t,e){return new fa({joinNode:Es.create(t,Zs(e))})}function pN(){return new pa({overNode:cl.create()})}function _t(t,e){if(e.length===3)return yN(t,e[0],e[1],e[2]);if(e.length===2)return mN(t,e[0],e[1]);throw new Error("not implemented")}function mN(t,e,r){return r(fN(t,e)).toOperationNode()}function yN(t,e,r,s){return Es.createWithOn(t,Zs(e),Er(r,"=",s))}const wN=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}}),NN=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function gN(t){return t=Gt(t)?t(us()):t,Gs(t).map(NN.create)}const bf=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function gn(t,e,r){return Gt(e)&&(e=e(ic())),Jr(e)||(e=[e]),e.map(s=>bf.create(t,dn(s),r))}var Br;const Ka=class Ka{constructor(e){C(this,Br,void 0);k(this,Br,e)}get expressionType(){}as(e){return new rc(this,e)}or(...e){return new pl(ss.create(n(this,Br),wt(e)))}and(...e){return new ml(qi.create(n(this,Br),wt(e)))}$castTo(){return new Ka(n(this,Br))}$notNull(){return new Ka(n(this,Br))}toOperationNode(){return n(this,Br)}};Br=new WeakMap;let De=Ka;var Pn,di;class rc{constructor(e,r){C(this,Pn,void 0);C(this,di,void 0);k(this,Pn,e),k(this,di,r)}get expression(){return n(this,Pn)}get alias(){return n(this,di)}toOperationNode(){return Ei.create(n(this,Pn).toOperationNode(),Lt(n(this,di))?n(this,di).toOperationNode():Ue.create(n(this,di)))}}Pn=new WeakMap,di=new WeakMap;var Xi;const Ga=class Ga{constructor(e){C(this,Xi,void 0);k(this,Xi,e)}get expressionType(){}as(e){return new rc(this,e)}or(...e){return new Ga(ss.create(n(this,Xi),wt(e)))}$castTo(){return new Ga(n(this,Xi))}toOperationNode(){return rs.create(n(this,Xi))}};Xi=new WeakMap;let pl=Ga;var Zi;const za=class za{constructor(e){C(this,Zi,void 0);k(this,Zi,e)}get expressionType(){}as(e){return new rc(this,e)}and(...e){return new za(qi.create(n(this,Zi),wt(e)))}$castTo(){return new za(n(this,Zi))}toOperationNode(){return rs.create(n(this,Zi))}};Zi=new WeakMap;let ml=za;const bN={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:Ir.create(t),modifier:e}}};function vN(t,e){if(!Nu(t)&&!Jl(t))throw new Error(`Invalid fetch row count: ${t}`);if(!xN(e))throw new Error(`Invalid fetch modifier: ${e}`);return bN.create(t,e)}function xN(t){return t==="only"||t==="with ties"}var E;const X=class X{constructor(e){C(this,E,void 0);k(this,E,c(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new X({...n(this,E),queryNode:ee.cloneWithWhere(n(this,E).queryNode,wt(e))})}whereRef(e,r,s){return new X({...n(this,E),queryNode:ee.cloneWithWhere(n(this,E).queryNode,Er(e,r,s))})}having(...e){return new X({...n(this,E),queryNode:fe.cloneWithHaving(n(this,E).queryNode,wt(e))})}havingRef(e,r,s){return new X({...n(this,E),queryNode:fe.cloneWithHaving(n(this,E).queryNode,Er(e,r,s))})}select(e){return new X({...n(this,E),queryNode:fe.cloneWithSelections(n(this,E).queryNode,os(e))})}distinctOn(e){return new X({...n(this,E),queryNode:fe.cloneWithDistinctOn(n(this,E).queryNode,Gs(e))})}modifyFront(e){return new X({...n(this,E),queryNode:fe.cloneWithFrontModifier(n(this,E).queryNode,Rr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.createWithExpression(e.toOperationNode()))})}distinct(){return new X({...n(this,E),queryNode:fe.cloneWithFrontModifier(n(this,E).queryNode,Rr.create("Distinct"))})}forUpdate(e){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForUpdate",e?jo(e).map(Ge):void 0))})}forShare(e){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForShare",e?jo(e).map(Ge):void 0))})}forKeyShare(e){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForKeyShare",e?jo(e).map(Ge):void 0))})}forNoKeyUpdate(e){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForNoKeyUpdate",e?jo(e).map(Ge):void 0))})}skipLocked(){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("SkipLocked"))})}noWait(){return new X({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("NoWait"))})}selectAll(e){return new X({...n(this,E),queryNode:fe.cloneWithSelections(n(this,E).queryNode,wo(e))})}innerJoin(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("FullJoin",e))})}innerJoinLateral(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("LateralInnerJoin",e))})}leftJoinLateral(...e){return new X({...n(this,E),queryNode:ee.cloneWithJoin(n(this,E).queryNode,_t("LateralLeftJoin",e))})}orderBy(...e){return new X({...n(this,E),queryNode:fe.cloneWithOrderByItems(n(this,E).queryNode,bu(e))})}groupBy(e){return new X({...n(this,E),queryNode:fe.cloneWithGroupByItems(n(this,E).queryNode,gN(e))})}limit(e){return new X({...n(this,E),queryNode:fe.cloneWithLimit(n(this,E).queryNode,ec.create(et(e)))})}offset(e){return new X({...n(this,E),queryNode:fe.cloneWithOffset(n(this,E).queryNode,wN.create(et(e)))})}fetch(e,r="only"){return new X({...n(this,E),queryNode:fe.cloneWithFetch(n(this,E).queryNode,vN(e,r))})}top(e,r){return new X({...n(this,E),queryNode:ee.cloneWithTop(n(this,E).queryNode,as(e,r))})}union(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("union",e,!1))})}unionAll(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("union",e,!0))})}intersect(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("intersect",e,!1))})}intersectAll(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("intersect",e,!0))})}except(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("except",e,!1))})}exceptAll(e){return new X({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,gn("except",e,!0))})}as(e){return new vf(this,e)}clearSelect(){return new X({...n(this,E),queryNode:fe.cloneWithoutSelections(n(this,E).queryNode)})}clearWhere(){return new X({...n(this,E),queryNode:ee.cloneWithoutWhere(n(this,E).queryNode)})}clearLimit(){return new X({...n(this,E),queryNode:fe.cloneWithoutLimit(n(this,E).queryNode)})}clearOffset(){return new X({...n(this,E),queryNode:fe.cloneWithoutOffset(n(this,E).queryNode)})}clearOrderBy(){return new X({...n(this,E),queryNode:fe.cloneWithoutOrderBy(n(this,E).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new X({...n(this,E)})}$castTo(){return new X(n(this,E))}$narrowType(){return new X(n(this,E))}$assertType(){return new X(n(this,E))}$asTuple(){return new De(this.toOperationNode())}withPlugin(e){return new X({...n(this,E),executor:n(this,E).executor.withPlugin(e)})}toOperationNode(){return n(this,E).executor.transformQuery(n(this,E).queryNode,n(this,E).queryId)}compile(){return n(this,E).executor.compileQuery(this.toOperationNode(),n(this,E).queryId)}async execute(){const e=this.compile();return(await n(this,E).executor.executeQuery(e,n(this,E).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=go){const r=await this.executeTakeFirst();if(r===void 0)throw bo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,E).executor.stream(r,e,n(this,E).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new X({...n(this,E),queryNode:ee.cloneWithExplain(n(this,E).queryNode,e,r)}).execute()}};E=new WeakMap;let xa=X;ce(xa,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function yl(t){return new xa(t)}var Bn,Fn;class vf{constructor(e,r){C(this,Bn,void 0);C(this,Fn,void 0);k(this,Bn,e),k(this,Fn,r)}get expression(){return n(this,Bn)}get alias(){return n(this,Fn)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Ei.create(n(this,Bn).toOperationNode(),Ue.create(n(this,Fn)))}}Bn=new WeakMap,Fn=new WeakMap;ce(vf,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Hi=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?At.cloneWithOperation(t.filter,"And",e):At.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?At.cloneWithOperation(t.filter,"Or",e):At.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}}),$h=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var Ot;const oi=class oi{constructor(e){C(this,Ot,void 0);k(this,Ot,c(e))}get expressionType(){}as(e){return new ON(this,e)}distinct(){return new oi({...n(this,Ot),aggregateFunctionNode:Hi.cloneWithDistinct(n(this,Ot).aggregateFunctionNode)})}filterWhere(...e){return new oi({...n(this,Ot),aggregateFunctionNode:Hi.cloneWithFilter(n(this,Ot).aggregateFunctionNode,wt(e))})}filterWhereRef(e,r,s){return new oi({...n(this,Ot),aggregateFunctionNode:Hi.cloneWithFilter(n(this,Ot).aggregateFunctionNode,Er(e,r,s))})}over(e){const r=pN();return new oi({...n(this,Ot),aggregateFunctionNode:Hi.cloneWithOver(n(this,Ot).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new oi(n(this,Ot))}$notNull(){return new oi(n(this,Ot))}toOperationNode(){return n(this,Ot).aggregateFunctionNode}};Ot=new WeakMap;let kn=oi;ce(kn,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Un,$n;class ON{constructor(e,r){C(this,Un,void 0);C(this,$n,void 0);k(this,Un,e),k(this,$n,r)}get expression(){return n(this,Un)}get alias(){return n(this,$n)}toOperationNode(){return Ei.create(n(this,Un).toOperationNode(),Ue.create(n(this,$n)))}}Un=new WeakMap,$n=new WeakMap;function xf(){const t=(r,s)=>new De($h.create(r,Gs(s??[]))),e=(r,s)=>new kn({aggregateFunctionNode:Hi.create(r,s?Gs(s):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new kn({aggregateFunctionNode:Hi.create("count",wo(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new kn({aggregateFunctionNode:Hi.create("json_agg",[Kt(r)?Ge(r):r.toOperationNode()])})},toJson(r){return new De($h.create("to_json",[Kt(r)?Ge(r):r.toOperationNode()]))}})}const CN=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function qN(t,e){return CN.create(Wi.create(t),Ht(e))}const _r=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),No.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var Qn;class Of{constructor(e){C(this,Qn,void 0);k(this,Qn,c(e))}when(...e){return new Cf({...n(this,Qn),node:_r.cloneWithWhen(n(this,Qn).node,No.create(wt(e)))})}}Qn=new WeakMap;var jn;class Cf{constructor(e){C(this,jn,void 0);k(this,jn,c(e))}then(e){return new WN({...n(this,jn),node:_r.cloneWithThen(n(this,jn).node,zl(e)?Yl(e):et(e))})}}jn=new WeakMap;var Nr;class WN{constructor(e){C(this,Nr,void 0);k(this,Nr,c(e))}when(...e){return new Cf({...n(this,Nr),node:_r.cloneWithWhen(n(this,Nr).node,No.create(wt(e)))})}else(e){return new _N({...n(this,Nr),node:_r.cloneWith(n(this,Nr).node,{else:zl(e)?Yl(e):et(e)})})}end(){return new De(_r.cloneWith(n(this,Nr).node,{isStatement:!1}))}endCase(){return new De(_r.cloneWith(n(this,Nr).node,{isStatement:!0}))}}Nr=new WeakMap;var Vn;class _N{constructor(e){C(this,Vn,void 0);k(this,Vn,c(e))}end(){return new De(_r.cloneWith(n(this,Vn).node,{isStatement:!1}))}endCase(){return new De(_r.cloneWith(n(this,Vn).node,{isStatement:!0}))}}Vn=new WeakMap;const Qh=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var gr,uo,wl;class Rs{constructor(e){C(this,uo);C(this,gr,void 0);k(this,gr,e)}at(e){return ue(this,uo,wl).call(this,"ArrayLocation",e)}key(e){return ue(this,uo,wl).call(this,"Member",e)}}gr=new WeakMap,uo=new WeakSet,wl=function(e,r){return la.is(n(this,gr))?new jh(la.cloneWithTraversal(n(this,gr),ks.is(n(this,gr).traversal)?ks.cloneWithLeg(n(this,gr).traversal,Qh.create(e,r)):sf.cloneWithValue(n(this,gr).traversal,Ir.createImmediate(r)))):new jh(ks.cloneWithLeg(n(this,gr),Qh.create(e,r)))};var en;class jh extends Rs{constructor(r){super(r);C(this,en,void 0);k(this,en,r)}get expressionType(){}as(r){return new TN(this,r)}$castTo(){return new Rs(n(this,en))}$notNull(){return new Rs(n(this,en))}toOperationNode(){return n(this,en)}}en=new WeakMap;var Jn,fi;class TN{constructor(e,r){C(this,Jn,void 0);C(this,fi,void 0);k(this,Jn,e),k(this,fi,r)}get expression(){return n(this,Jn)}get alias(){return n(this,fi)}toOperationNode(){return Ei.create(n(this,Jn).toOperationNode(),Lt(n(this,fi))?n(this,fi).toOperationNode():Ue.create(n(this,fi)))}}Jn=new WeakMap,fi=new WeakMap;const Vh=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}}),IN=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob"],EN=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timez\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/],kN=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function SN(t){return!!(IN.includes(t)||EN.some(e=>e.test(t)))}function cn(t){if(Lt(t))return t.toOperationNode();if(SN(t))return kN.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const AN=c({is(t){return t.kind==="CastNode"},create(t,e){return c({kind:"CastNode",expression:t,dataType:e})}});function ic(t=vu){function e(a,l,h){return new De(Xl(a,l,h))}function r(a,l){return new De(qN(a,l))}const s=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return yl({queryId:ke(),executor:t,queryNode:fe.createFrom(Xs(a))})},case(a){return new Of({node:_r.create(bi(a)?void 0:Ht(a))})},ref(a,l){return bi(l)?new De(Hr(a)):new Rs(Aw(a,l))},jsonPath(){return new Rs(ks.create())},table(a){return new De(Ge(a))},val(a){return new De(et(a))},refTuple(...a){return new De(Vh.create(a.map(Ht)))},tuple(...a){return new De(Vh.create(a.map(et)))},lit(a){return new De(Yl(a))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,h){return new De(ts.create(Ht(a),Wi.create("between"),qi.create(et(l),et(h))))},betweenSymmetric(a,l,h){return new De(ts.create(Ht(a),Wi.create("between symmetric"),qi.create(et(l),et(h))))},and(a){return Jr(a)?new De(ha(a,"and")):new De(_h(a,"and"))},or(a){return Jr(a)?new De(ha(a,"or")):new De(_h(a,"or"))},parens(...a){const l=wt(a);return rs.is(l)?new De(l):new De(rs.create(l))},cast(a,l){return new De(AN.create(Ht(a),cn(l)))},withSchema(a){return ic(t.withPluginAtFront(new vo(a)))}});return s.fn=xf(),s.eb=s,s}function us(t){return ic()}function dn(t){if(Lt(t))return t.toOperationNode();if(Gt(t))return t(us()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function qf(t){if(Lt(t))return t.toOperationNode();if(Gt(t))return t(us()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function xo(t){return Ow(t)||Cw(t)||Gt(t)}function Xs(t){return Jr(t)?t.map(e=>Zs(e)):[Zs(t)]}function Zs(t){return Kt(t)?Wf(t):qf(t)}function Wf(t){const e=" as ";if(t.includes(e)){const[r,s]=t.split(e).map(_f);return Ei.create(Ge(r),Ue.create(s))}else return Ge(t)}function Ge(t){const e=".";if(t.includes(e)){const[r,s]=t.split(e).map(_f);return xi.createWithSchema(r,s)}else return xi.create(t)}function _f(t){return t.trim()}const Tf=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}}),Qe=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:ze.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}}),If=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:ze.create(t)})}}),Ef=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:ze.create(t),renameTo:ze.create(e)})}}),nc=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?Ue.create(e):void 0})}}),RN=["no action","restrict","cascade","set null","set default"],Zo=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function kf(t){return Lt(t)?t.toOperationNode():Ir.createImmediate(t)}const Jo=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}}),MN=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function Oa(t){if(RN.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var We;const Xe=class Xe{constructor(e){C(this,We,void 0);k(this,We,e)}autoIncrement(){return new Xe(Qe.cloneWith(n(this,We),{autoIncrement:!0}))}identity(){return new Xe(Qe.cloneWith(n(this,We),{identity:!0}))}primaryKey(){return new Xe(Qe.cloneWith(n(this,We),{primaryKey:!0}))}references(e){const r=Hr(e);if(!r.table||Hl.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Xe(Qe.cloneWith(n(this,We),{references:Zo.create(r.table,[r.column])}))}onDelete(e){if(!n(this,We).references)throw new Error("on delete constraint can only be added for foreign keys");return new Xe(Qe.cloneWith(n(this,We),{references:Zo.cloneWithOnDelete(n(this,We).references,Oa(e))}))}onUpdate(e){if(!n(this,We).references)throw new Error("on update constraint can only be added for foreign keys");return new Xe(Qe.cloneWith(n(this,We),{references:Zo.cloneWithOnUpdate(n(this,We).references,Oa(e))}))}unique(){return new Xe(Qe.cloneWith(n(this,We),{unique:!0}))}notNull(){return new Xe(Qe.cloneWith(n(this,We),{notNull:!0}))}unsigned(){return new Xe(Qe.cloneWith(n(this,We),{unsigned:!0}))}defaultTo(e){return new Xe(Qe.cloneWith(n(this,We),{defaultTo:MN.create(kf(e))}))}check(e){return new Xe(Qe.cloneWith(n(this,We),{check:nc.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Xe(Qe.cloneWith(n(this,We),{generated:Jo.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Xe(Qe.cloneWith(n(this,We),{generated:Jo.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Xe(Qe.cloneWith(n(this,We),{generated:Jo.create({identity:!0,byDefault:!0})}))}stored(){if(!n(this,We).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Xe(Qe.cloneWith(n(this,We),{generated:Jo.cloneWith(n(this,We).generated,{stored:!0})}))}modifyFront(e){return new Xe(Qe.cloneWithFrontModifier(n(this,We),e.toOperationNode()))}nullsNotDistinct(){return new Xe(Qe.cloneWith(n(this,We),{nullsNotDistinct:!0}))}modifyEnd(e){return new Xe(Qe.cloneWithEndModifier(n(this,We),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return n(this,We)}};We=new WeakMap;let _i=Xe;ce(_i,"don't await ColumnDefinitionBuilder instances directly.");const Sf=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}}),Ca=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,s){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Zo.create(e,r),name:s?Ue.create(s):void 0})},cloneWith(t,e){return c({...t,...e})}});var tn;const Ya=class Ya{constructor(e){C(this,tn,void 0);k(this,tn,e)}onDelete(e){return new Ya(Ca.cloneWith(n(this,tn),{onDelete:Oa(e)}))}onUpdate(e){return new Ya(Ca.cloneWith(n(this,tn),{onUpdate:Oa(e)}))}$call(e){return e(this)}toOperationNode(){return n(this,tn)}};tn=new WeakMap;let eo=Ya;ce(eo,"don't await ForeignKeyConstraintBuilder instances directly.");const ea=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}}),sc=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(ze.create)),name:e?Ue.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}}),ta=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})}}),vs=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:ze.create(t),[e]:r})}});var Fr;class oc{constructor(e){C(this,Fr,void 0);k(this,Fr,e)}setDataType(e){return new xs(vs.create(n(this,Fr),"dataType",cn(e)))}setDefault(e){return new xs(vs.create(n(this,Fr),"setDefault",kf(e)))}dropDefault(){return new xs(vs.create(n(this,Fr),"dropDefault",!0))}setNotNull(){return new xs(vs.create(n(this,Fr),"setNotNull",!0))}dropNotNull(){return new xs(vs.create(n(this,Fr),"dropNotNull",!0))}$call(e){return e(this)}}Fr=new WeakMap;var lo;class xs{constructor(e){C(this,lo,void 0);k(this,lo,e)}toOperationNode(){return n(this,lo)}}lo=new WeakMap;var ur;class Fi{constructor(e){C(this,ur,void 0);k(this,ur,c(e))}toOperationNode(){return n(this,ur).executor.transformQuery(n(this,ur).node,n(this,ur).queryId)}compile(){return n(this,ur).executor.compileQuery(this.toOperationNode(),n(this,ur).queryId)}async execute(){await n(this,ur).executor.executeQuery(this.compile(),n(this,ur).queryId)}}ur=new WeakMap;ce(Fi,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Nt;const Xa=class Xa{constructor(e){C(this,Nt,void 0);k(this,Nt,c(e))}onDelete(e){return new Xa({...n(this,Nt),constraintBuilder:n(this,Nt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Xa({...n(this,Nt),constraintBuilder:n(this,Nt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return n(this,Nt).executor.transformQuery(Ee.cloneWithTableProps(n(this,Nt).node,{addConstraint:ea.create(n(this,Nt).constraintBuilder.toOperationNode())}),n(this,Nt).queryId)}compile(){return n(this,Nt).executor.compileQuery(this.toOperationNode(),n(this,Nt).queryId)}async execute(){await n(this,Nt).executor.executeQuery(this.compile(),n(this,Nt).queryId)}};Nt=new WeakMap;let qa=Xa;ce(qa,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ze;const Ls=class Ls{constructor(e){C(this,Ze,void 0);k(this,Ze,c(e))}ifExists(){return new Ls({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ta.cloneWith(n(this,Ze).node.dropConstraint,{ifExists:!0})})})}cascade(){return new Ls({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ta.cloneWith(n(this,Ze).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Ls({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ta.cloneWith(n(this,Ze).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return n(this,Ze).executor.transformQuery(n(this,Ze).node,n(this,Ze).queryId)}compile(){return n(this,Ze).executor.compileQuery(this.toOperationNode(),n(this,Ze).queryId)}async execute(){await n(this,Ze).executor.executeQuery(this.compile(),n(this,Ze).queryId)}};Ze=new WeakMap;let Wa=Ls;ce(Wa,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Af=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(ze.create)),name:e?Ue.create(e):void 0})}}),vn=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var Me;const ji=class ji{constructor(e){C(this,Me,void 0);k(this,Me,c(e))}unique(){return new ji({...n(this,Me),node:Ee.cloneWithTableProps(n(this,Me).node,{addIndex:vn.cloneWith(n(this,Me).node.addIndex,{unique:!0})})})}column(e){return new ji({...n(this,Me),node:Ee.cloneWithTableProps(n(this,Me).node,{addIndex:vn.cloneWithColumns(n(this,Me).node.addIndex,[ca(e)])})})}columns(e){return new ji({...n(this,Me),node:Ee.cloneWithTableProps(n(this,Me).node,{addIndex:vn.cloneWithColumns(n(this,Me).node.addIndex,e.map(ca))})})}expression(e){return new ji({...n(this,Me),node:Ee.cloneWithTableProps(n(this,Me).node,{addIndex:vn.cloneWithColumns(n(this,Me).node.addIndex,[e.toOperationNode()])})})}using(e){return new ji({...n(this,Me),node:Ee.cloneWithTableProps(n(this,Me).node,{addIndex:vn.cloneWith(n(this,Me).node.addIndex,{using:yt.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return n(this,Me).executor.transformQuery(n(this,Me).node,n(this,Me).queryId)}compile(){return n(this,Me).executor.compileQuery(this.toOperationNode(),n(this,Me).queryId)}async execute(){await n(this,Me).executor.executeQuery(this.compile(),n(this,Me).queryId)}};Me=new WeakMap;let _a=ji;ce(_a,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");var Hn;const lc=class lc{constructor(e){C(this,Hn,void 0);k(this,Hn,e)}toOperationNode(){return n(this,Hn)}nullsNotDistinct(){return new lc(sc.cloneWith(n(this,Hn),{nullsNotDistinct:!0}))}};Hn=new WeakMap;let to=lc;ce(to,"don't await UniqueConstraintNodeBuilder instances directly.");var ve;class Rf{constructor(e){C(this,ve,void 0);k(this,ve,c(e))}renameTo(e){return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{renameTo:Ge(e)})})}setSchema(e){return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{setSchema:Ue.create(e)})})}alterColumn(e,r){const s=r(new oc(e));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,s.toOperationNode())})}dropColumn(e){return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,If.create(e))})}renameColumn(e,r){return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Ef.create(e,r))})}addColumn(e,r,s=vi){const a=s(new _i(Qe.create(e,cn(r))));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Tf.create(a.toOperationNode()))})}modifyColumn(e,r,s=vi){const a=s(new _i(Qe.create(e,cn(r))));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Sf.create(a.toOperationNode()))})}addUniqueConstraint(e,r,s=vi){const a=s(new to(sc.create(r,e)));return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ea.create(a.toOperationNode())})})}addCheckConstraint(e,r){return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ea.create(nc.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,s,a){return new qa({...n(this,ve),constraintBuilder:new eo(Ca.create(r.map(ze.create),Ge(s),a.map(ze.create),e))})}addPrimaryKeyConstraint(e,r){return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ea.create(Af.create(r,e))})})}dropConstraint(e){return new Wa({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{dropConstraint:ta.create(e)})})}addIndex(e){return new _a({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addIndex:vn.create(e)})})}dropIndex(e){return new Fi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{dropIndex:Is.create(e)})})}$call(e){return e(this)}}ve=new WeakMap;var Ke;const Vi=class Vi{constructor(e){C(this,Ke,void 0);k(this,Ke,c(e))}alterColumn(e,r){const s=r(new oc(e));return new Vi({...n(this,Ke),node:Ee.cloneWithColumnAlteration(n(this,Ke).node,s.toOperationNode())})}dropColumn(e){return new Vi({...n(this,Ke),node:Ee.cloneWithColumnAlteration(n(this,Ke).node,If.create(e))})}renameColumn(e,r){return new Vi({...n(this,Ke),node:Ee.cloneWithColumnAlteration(n(this,Ke).node,Ef.create(e,r))})}addColumn(e,r,s=vi){const a=s(new _i(Qe.create(e,cn(r))));return new Vi({...n(this,Ke),node:Ee.cloneWithColumnAlteration(n(this,Ke).node,Tf.create(a.toOperationNode()))})}modifyColumn(e,r,s=vi){const a=s(new _i(Qe.create(e,cn(r))));return new Vi({...n(this,Ke),node:Ee.cloneWithColumnAlteration(n(this,Ke).node,Sf.create(a.toOperationNode()))})}toOperationNode(){return n(this,Ke).executor.transformQuery(n(this,Ke).node,n(this,Ke).queryId)}compile(){return n(this,Ke).executor.compileQuery(this.toOperationNode(),n(this,Ke).queryId)}async execute(){await n(this,Ke).executor.executeQuery(this.compile(),n(this,Ke).queryId)}};Ke=new WeakMap;let ui=Vi;ce(Rf,"don't await AlterTableBuilder instances");ce(oc,"don't await AlterColumnBuilder instances");ce(ui,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Mf extends tc{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var _e;const nr=class nr{constructor(e){C(this,_e,void 0);k(this,_e,c(e))}ifNotExists(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{ifNotExists:!0})})}unique(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{unique:!0})})}nullsNotDistinct(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{nullsNotDistinct:!0})})}on(e){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{table:Ge(e)})})}column(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,[ca(e)])})}columns(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,e.map(ca))})}expression(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,[e.toOperationNode()])})}using(e){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{using:yt.createWithSql(e)})})}where(...e){const r=new Mf;return new nr({...n(this,_e),node:ee.cloneWithWhere(n(this,_e).node,r.transformNode(wt(e)))})}$call(e){return e(this)}toOperationNode(){return n(this,_e).executor.transformQuery(n(this,_e).node,n(this,_e).queryId)}compile(){return n(this,_e).executor.compileQuery(this.toOperationNode(),n(this,_e).queryId)}async execute(){await n(this,_e).executor.executeQuery(this.compile(),n(this,_e).queryId)}};_e=new WeakMap;let Ta=nr;ce(Ta,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var $t;const cc=class cc{constructor(e){C(this,$t,void 0);k(this,$t,c(e))}ifNotExists(){return new cc({...n(this,$t),node:Zd.cloneWith(n(this,$t).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,$t).executor.transformQuery(n(this,$t).node,n(this,$t).queryId)}compile(){return n(this,$t).executor.compileQuery(this.toOperationNode(),n(this,$t).queryId)}async execute(){await n(this,$t).executor.executeQuery(this.compile(),n(this,$t).queryId)}};$t=new WeakMap;let Ia=cc;ce(Ia,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function DN(t){if(xw.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var ye;const Ut=class Ut{constructor(e){C(this,ye,void 0);k(this,ye,c(e))}temporary(){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{temporary:!0})})}onCommit(e){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{onCommit:DN(e)})})}ifNotExists(){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{ifNotExists:!0})})}addColumn(e,r,s=vi){const a=s(new _i(Qe.create(e,cn(r))));return new Ut({...n(this,ye),node:Ft.cloneWithColumn(n(this,ye).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,Af.create(r,e))})}addUniqueConstraint(e,r,s=vi){const a=s(new to(sc.create(r,e)));return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,a.toOperationNode())})}addCheckConstraint(e,r){return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,nc.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,s,a,l=vi){const h=l(new eo(Ca.create(r.map(ze.create),Ge(s),a.map(ze.create),e)));return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,h.toOperationNode())})}modifyFront(e){return new Ut({...n(this,ye),node:Ft.cloneWithFrontModifier(n(this,ye).node,e.toOperationNode())})}modifyEnd(e){return new Ut({...n(this,ye),node:Ft.cloneWithEndModifier(n(this,ye).node,e.toOperationNode())})}as(e){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{selectQuery:dn(e)})})}$call(e){return e(this)}toOperationNode(){return n(this,ye).executor.transformQuery(n(this,ye).node,n(this,ye).queryId)}compile(){return n(this,ye).executor.compileQuery(this.toOperationNode(),n(this,ye).queryId)}async execute(){await n(this,ye).executor.executeQuery(this.compile(),n(this,ye).queryId)}};ye=new WeakMap;let Ea=Ut;ce(Ea,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var ft;const Ps=class Ps{constructor(e){C(this,ft,void 0);k(this,ft,c(e))}on(e){return new Ps({...n(this,ft),node:Is.cloneWith(n(this,ft).node,{table:Ge(e)})})}ifExists(){return new Ps({...n(this,ft),node:Is.cloneWith(n(this,ft).node,{ifExists:!0})})}cascade(){return new Ps({...n(this,ft),node:Is.cloneWith(n(this,ft).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,ft).executor.transformQuery(n(this,ft).node,n(this,ft).queryId)}compile(){return n(this,ft).executor.compileQuery(this.toOperationNode(),n(this,ft).queryId)}async execute(){await n(this,ft).executor.executeQuery(this.compile(),n(this,ft).queryId)}};ft=new WeakMap;let ka=Ps;ce(ka,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ct;const Za=class Za{constructor(e){C(this,Ct,void 0);k(this,Ct,c(e))}ifExists(){return new Za({...n(this,Ct),node:ol.cloneWith(n(this,Ct).node,{ifExists:!0})})}cascade(){return new Za({...n(this,Ct),node:ol.cloneWith(n(this,Ct).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,Ct).executor.transformQuery(n(this,Ct).node,n(this,Ct).queryId)}compile(){return n(this,Ct).executor.compileQuery(this.toOperationNode(),n(this,Ct).queryId)}async execute(){await n(this,Ct).executor.executeQuery(this.compile(),n(this,Ct).queryId)}};Ct=new WeakMap;let Sa=Za;ce(Sa,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var qt;const eu=class eu{constructor(e){C(this,qt,void 0);k(this,qt,c(e))}ifExists(){return new eu({...n(this,qt),node:al.cloneWith(n(this,qt).node,{ifExists:!0})})}cascade(){return new eu({...n(this,qt),node:al.cloneWith(n(this,qt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,qt).executor.transformQuery(n(this,qt).node,n(this,qt).queryId)}compile(){return n(this,qt).executor.compileQuery(this.toOperationNode(),n(this,qt).queryId)}async execute(){await n(this,qt).executor.executeQuery(this.compile(),n(this,qt).queryId)}};qt=new WeakMap;let Aa=eu;ce(Aa,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const si=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:Ci.create(t)})},cloneWith(t,e){return c({...t,...e})}});var tu;class LN{constructor(){C(this,tu,new Mf)}transformQuery(e){return n(this,tu).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}tu=new WeakMap;var $e;const ai=class ai{constructor(e){C(this,$e,void 0);k(this,$e,c(e))}temporary(){return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{temporary:!0})})}materialized(){return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{materialized:!0})})}ifNotExists(){return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{ifNotExists:!0})})}orReplace(){return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{orReplace:!0})})}columns(e){return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{columns:e.map(af)})})}as(e){const r=e.withPlugin(new LN).toOperationNode();return new ai({...n(this,$e),node:si.cloneWith(n(this,$e).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return n(this,$e).executor.transformQuery(n(this,$e).node,n(this,$e).queryId)}compile(){return n(this,$e).executor.compileQuery(this.toOperationNode(),n(this,$e).queryId)}async execute(){await n(this,$e).executor.executeQuery(this.compile(),n(this,$e).queryId)}};$e=new WeakMap;let Ra=ai;ce(Ra,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const ra=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:Ci.create(t)})},cloneWith(t,e){return c({...t,...e})}});var pt;const Bs=class Bs{constructor(e){C(this,pt,void 0);k(this,pt,c(e))}materialized(){return new Bs({...n(this,pt),node:ra.cloneWith(n(this,pt).node,{materialized:!0})})}ifExists(){return new Bs({...n(this,pt),node:ra.cloneWith(n(this,pt).node,{ifExists:!0})})}cascade(){return new Bs({...n(this,pt),node:ra.cloneWith(n(this,pt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,pt).executor.transformQuery(n(this,pt).node,n(this,pt).queryId)}compile(){return n(this,pt).executor.compileQuery(this.toOperationNode(),n(this,pt).queryId)}async execute(){await n(this,pt).executor.executeQuery(this.compile(),n(this,pt).queryId)}};pt=new WeakMap;let Ma=Bs;ce(Ma,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Df=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Gl.create(e.map(r=>Ir.createImmediate(r)))})}});var Qt;const hc=class hc{constructor(e){C(this,Qt,void 0);k(this,Qt,c(e))}toOperationNode(){return n(this,Qt).executor.transformQuery(n(this,Qt).node,n(this,Qt).queryId)}asEnum(e){return new hc({...n(this,Qt),node:Df.cloneWithEnum(n(this,Qt).node,e)})}$call(e){return e(this)}compile(){return n(this,Qt).executor.compileQuery(this.toOperationNode(),n(this,Qt).queryId)}async execute(){await n(this,Qt).executor.executeQuery(this.compile(),n(this,Qt).queryId)}};Qt=new WeakMap;let Da=hc;ce(Da,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Lf=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var jt;const dc=class dc{constructor(e){C(this,jt,void 0);k(this,jt,c(e))}ifExists(){return new dc({...n(this,jt),node:Lf.cloneWith(n(this,jt).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,jt).executor.transformQuery(n(this,jt).node,n(this,jt).queryId)}compile(){return n(this,jt).executor.compileQuery(this.toOperationNode(),n(this,jt).queryId)}async execute(){await n(this,jt).executor.executeQuery(this.compile(),n(this,jt).queryId)}};jt=new WeakMap;let La=dc;ce(La,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Jh(t){const e=".";if(t.includes(e)){const r=t.split(e).map(PN);if(r.length===2)return Ci.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Ci.create(t)}function PN(t){return t.trim()}var lt;const Fs=class Fs{constructor(e){C(this,lt,void 0);k(this,lt,e)}createTable(e){return new Ea({queryId:ke(),executor:n(this,lt),node:Ft.create(Ge(e))})}dropTable(e){return new Aa({queryId:ke(),executor:n(this,lt),node:al.create(Ge(e))})}createIndex(e){return new Ta({queryId:ke(),executor:n(this,lt),node:Mr.create(e)})}dropIndex(e){return new ka({queryId:ke(),executor:n(this,lt),node:Is.create(e)})}createSchema(e){return new Ia({queryId:ke(),executor:n(this,lt),node:Zd.create(e)})}dropSchema(e){return new Sa({queryId:ke(),executor:n(this,lt),node:ol.create(e)})}alterTable(e){return new Rf({queryId:ke(),executor:n(this,lt),node:Ee.create(Ge(e))})}createView(e){return new Ra({queryId:ke(),executor:n(this,lt),node:si.create(e)})}dropView(e){return new Ma({queryId:ke(),executor:n(this,lt),node:ra.create(e)})}createType(e){return new Da({queryId:ke(),executor:n(this,lt),node:Df.create(Jh(e))})}dropType(e){return new La({queryId:ke(),executor:n(this,lt),node:Lf.create(Jh(e))})}withPlugin(e){return new Fs(n(this,lt).withPlugin(e))}withoutPlugins(){return new Fs(n(this,lt).withoutPlugins())}withSchema(e){return new Fs(n(this,lt).withPluginAtFront(new vo(e)))}};lt=new WeakMap;let Nl=Fs;class BN{ref(e){return new kw(e)}}var Kn;class FN{constructor(e){C(this,Kn,void 0);k(this,Kn,e)}async provideConnection(e){const r=await n(this,Kn).acquireConnection();try{return await e(r)}finally{await n(this,Kn).releaseConnection(r)}}}Kn=new WeakMap;var br,vr,Ur;const Ji=class Ji extends Nf{constructor(r,s,a,l=[]){super(l);C(this,br,void 0);C(this,vr,void 0);C(this,Ur,void 0);k(this,br,r),k(this,vr,s),k(this,Ur,a)}get adapter(){return n(this,vr)}compileQuery(r){return n(this,br).compileQuery(r)}provideConnection(r){return n(this,Ur).provideConnection(r)}withPlugins(r){return new Ji(n(this,br),n(this,vr),n(this,Ur),[...this.plugins,...r])}withPlugin(r){return new Ji(n(this,br),n(this,vr),n(this,Ur),[...this.plugins,r])}withPluginAtFront(r){return new Ji(n(this,br),n(this,vr),n(this,Ur),[r,...this.plugins])}withConnectionProvider(r){return new Ji(n(this,br),n(this,vr),r,[...this.plugins])}withoutPlugins(){return new Ji(n(this,br),n(this,vr),n(this,Ur),[])}};br=new WeakMap,vr=new WeakMap,Ur=new WeakMap;let gl=Ji;function Hh(){return typeof performance<"u"&&Gt(performance.now)?performance.now():Date.now()}var lr,pi,$r,Gn,Qr,co,ru,Pf,iu,Bf,nu,Ff,su,Uf,ho,bl;class UN{constructor(e,r){C(this,ru);C(this,iu);C(this,nu);C(this,su);C(this,ho);C(this,lr,void 0);C(this,pi,void 0);C(this,$r,void 0);C(this,Gn,void 0);C(this,Qr,void 0);C(this,co,new WeakSet);k(this,Gn,!1),k(this,lr,e),k(this,pi,r)}async init(){if(n(this,Qr))throw new Error("driver has already been destroyed");n(this,$r)||k(this,$r,n(this,lr).init().then(()=>{k(this,Gn,!0)}).catch(e=>(k(this,$r,void 0),Promise.reject(e)))),await n(this,$r)}async acquireConnection(){if(n(this,Qr))throw new Error("driver has already been destroyed");n(this,Gn)||await this.init();const e=await n(this,lr).acquireConnection();return n(this,co).has(e)||(ue(this,ru,Pf).call(this)&&ue(this,iu,Bf).call(this,e),n(this,co).add(e)),e}async releaseConnection(e){await n(this,lr).releaseConnection(e)}beginTransaction(e,r){return n(this,lr).beginTransaction(e,r)}commitTransaction(e){return n(this,lr).commitTransaction(e)}rollbackTransaction(e){return n(this,lr).rollbackTransaction(e)}async destroy(){n(this,$r)&&(await n(this,$r),n(this,Qr)||k(this,Qr,n(this,lr).destroy().catch(e=>(k(this,Qr,void 0),Promise.reject(e)))),await n(this,Qr))}}lr=new WeakMap,pi=new WeakMap,$r=new WeakMap,Gn=new WeakMap,Qr=new WeakMap,co=new WeakMap,ru=new WeakSet,Pf=function(){return n(this,pi).isLevelEnabled("query")||n(this,pi).isLevelEnabled("error")},iu=new WeakSet,Bf=function(e){const r=e.executeQuery;e.executeQuery=async s=>{let a;const l=Hh();try{return await r.call(e,s)}catch(h){throw a=h,await ue(this,nu,Ff).call(this,h,s,l),h}finally{a||await ue(this,su,Uf).call(this,s,l)}}},nu=new WeakSet,Ff=async function(e,r,s){await n(this,pi).error(()=>({level:"error",error:e,query:r,queryDurationMillis:ue(this,ho,bl).call(this,s)}))},su=new WeakSet,Uf=async function(e,r){await n(this,pi).query(()=>({level:"query",query:e,queryDurationMillis:ue(this,ho,bl).call(this,r)}))},ho=new WeakSet,bl=function(e){return Hh()-e};const $N=()=>{};var fo,mi,ou,Qf;class $f{constructor(e){C(this,ou);C(this,fo,void 0);C(this,mi,void 0);k(this,fo,e)}async provideConnection(e){for(;n(this,mi);)await n(this,mi).catch($N);return k(this,mi,ue(this,ou,Qf).call(this,e).finally(()=>{k(this,mi,void 0)})),n(this,mi)}}fo=new WeakMap,mi=new WeakMap,ou=new WeakSet,Qf=async function(e){return await e(n(this,fo))};const QN=["read uncommitted","read committed","repeatable read","serializable","snapshot"];c(["query","error"]);var yi,rn;class jN{constructor(e){C(this,yi,void 0);C(this,rn,void 0);Gt(e)?(k(this,rn,e),k(this,yi,c({query:!0,error:!0}))):(k(this,rn,VN),k(this,yi,c({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return n(this,yi)[e]}async query(e){n(this,yi).query&&await n(this,rn).call(this,e())}async error(e){n(this,yi).error&&await n(this,rn).call(this,e())}}yi=new WeakMap,rn=new WeakMap;function VN(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function JN(t){return qr(t)&&Gt(t.compile)}var mt;const qn=class qn extends va{constructor(r){let s,a;if(HN(r))s={executor:r.executor},a={...r};else{const l=r.dialect,h=l.createDriver(),m=l.createQueryCompiler(),N=l.createAdapter(),d=new jN(r.log??[]),v=new UN(h,d),W=new FN(v),R=new gl(m,N,W,r.plugins??[]);s={executor:R},a={config:r,executor:R,dialect:l,driver:v}}super(s);C(this,mt,void 0);k(this,mt,c(a))}get schema(){return new Nl(n(this,mt).executor)}get dynamic(){return new BN}get introspection(){return n(this,mt).dialect.createIntrospector(this.withoutPlugins())}case(r){return new Of({node:_r.create(bi(r)?void 0:dn(r))})}get fn(){return xf()}transaction(){return new Pa({...n(this,mt)})}connection(){return new jf({...n(this,mt)})}withPlugin(r){return new qn({...n(this,mt),executor:n(this,mt).executor.withPlugin(r)})}withoutPlugins(){return new qn({...n(this,mt),executor:n(this,mt).executor.withoutPlugins()})}withSchema(r){return new qn({...n(this,mt),executor:n(this,mt).executor.withPluginAtFront(new vo(r))})}withTables(){return new qn({...n(this,mt)})}async destroy(){await n(this,mt).driver.destroy()}get isTransaction(){return!1}getExecutor(){return n(this,mt).executor}executeQuery(r,s=ke()){const a=JN(r)?r.compile():r;return this.getExecutor().executeQuery(a,s)}};mt=new WeakMap;let ro=qn;var cr;const Wn=class Wn extends ro{constructor(r){super(r);C(this,cr,void 0);k(this,cr,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new Wn({...n(this,cr),executor:n(this,cr).executor.withPlugin(r)})}withoutPlugins(){return new Wn({...n(this,cr),executor:n(this,cr).executor.withoutPlugins()})}withSchema(r){return new Wn({...n(this,cr),executor:n(this,cr).executor.withPluginAtFront(new vo(r))})}withTables(){return new Wn({...n(this,cr)})}};cr=new WeakMap;let vl=Wn;function HN(t){return qr(t)&&qr(t.config)&&qr(t.driver)&&qr(t.executor)&&qr(t.dialect)}var nn;class jf{constructor(e){C(this,nn,void 0);k(this,nn,c(e))}async execute(e){return n(this,nn).executor.provideConnection(async r=>{const s=n(this,nn).executor.withConnectionProvider(new $f(r)),a=new ro({...n(this,nn),executor:s});return await e(a)})}}nn=new WeakMap;ce(jf,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var hr;const fc=class fc{constructor(e){C(this,hr,void 0);k(this,hr,c(e))}setIsolationLevel(e){return new fc({...n(this,hr),isolationLevel:e})}async execute(e){const{isolationLevel:r,...s}=n(this,hr),a={isolationLevel:r};return KN(a),n(this,hr).executor.provideConnection(async l=>{const h=n(this,hr).executor.withConnectionProvider(new $f(l)),m=new vl({...s,executor:h});try{await n(this,hr).driver.beginTransaction(l,a);const N=await e(m);return await n(this,hr).driver.commitTransaction(l),N}catch(N){throw await n(this,hr).driver.rollbackTransaction(l),N}})}};hr=new WeakMap;let Pa=fc;ce(Pa,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function KN(t){if(t.isolationLevel&&!QN.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var Wt,zn,ia,po,xl,mo,Ol;const Us=class Us{constructor(e){C(this,zn);C(this,po);C(this,mo);C(this,Wt,void 0);k(this,Wt,c(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new Vf(this,e)}$castTo(){return new Us({...n(this,Wt)})}$notNull(){return new Us(n(this,Wt))}withPlugin(e){return new Us({...n(this,Wt),plugins:n(this,Wt).plugins!==void 0?c([...n(this,Wt).plugins,e]):c([e])})}toOperationNode(){return ue(this,po,xl).call(this,ue(this,zn,ia).call(this))}compile(e){return ue(this,mo,Ol).call(this,ue(this,zn,ia).call(this,e))}async execute(e){const r=ue(this,zn,ia).call(this,e);return r.executeQuery(ue(this,mo,Ol).call(this,r),n(this,Wt).queryId)}};Wt=new WeakMap,zn=new WeakSet,ia=function(e){const r=e!==void 0?e.getExecutor():vu;return n(this,Wt).plugins!==void 0?r.withPlugins(n(this,Wt).plugins):r},po=new WeakSet,xl=function(e){return e.transformQuery(n(this,Wt).rawNode,n(this,Wt).queryId)},mo=new WeakSet,Ol=function(e){return e.compileQuery(ue(this,po,xl).call(this,e),n(this,Wt).queryId)};let Ba=Us;function ti(t){return new Ba(t)}ce(Ba,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var sn,wi;class Vf{constructor(e,r){C(this,sn,void 0);C(this,wi,void 0);k(this,sn,e),k(this,wi,r)}get expression(){return n(this,sn)}get alias(){return n(this,wi)}get rawBuilder(){return n(this,sn)}toOperationNode(){return Ei.create(n(this,sn).toOperationNode(),Lt(n(this,wi))?n(this,wi).toOperationNode():Ue.create(n(this,wi)))}}sn=new WeakMap,wi=new WeakMap;ce(Vf,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const ot=Object.assign((t,...e)=>ti({queryId:ke(),rawNode:yt.create(t,e?.map(Kh)??[])}),{ref(t){return ti({queryId:ke(),rawNode:yt.createWithChild(Hr(t))})},val(t){return ti({queryId:ke(),rawNode:yt.createWithChild(et(t))})},value(t){return this.val(t)},table(t){return ti({queryId:ke(),rawNode:yt.createWithChild(Ge(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",ti({queryId:ke(),rawNode:yt.create(e,t.map(Ue.create))})},lit(t){return ti({queryId:ke(),rawNode:yt.createWithChild(Ir.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return ti({queryId:ke(),rawNode:yt.createWithSql(t)})},join(t,e=ot`, `){const r=new Array(2*t.length-1),s=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=Kh(t[a]),a!==t.length-1&&(r[2*a+1]=s);return ti({queryId:ke(),rawNode:yt.createWithChildren(r)})}});function Kh(t){return Lt(t)?t.toOperationNode():et(t)}var au;class GN{constructor(){Z(this,"nodeStack",[]);C(this,au,c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this)}));Z(this,"visitNode",e=>{this.nodeStack.push(e),n(this,au)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}au=new WeakMap;var Yn,on;class zN extends GN{constructor(){super(...arguments);C(this,Yn,"");C(this,on,[])}get numParameters(){return n(this,on).length}compileQuery(r){return k(this,Yn,""),k(this,on,[]),this.visitNode(r),c({query:r,sql:this.getSql(),parameters:[...n(this,on)]})}getSql(){return n(this,Yn)}visitSelectQuery(r){const s=this.parentNode!==void 0&&!rs.is(this.parentNode)&&!Jt.is(this.parentNode)&&!Ft.is(this.parentNode)&&!si.is(this.parentNode)&&!bf.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),s&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.top&&(this.append(" "),this.visitNode(r.top)),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.fetch&&(this.append(" "),this.visitNode(r.fetch)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),s&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,s=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(s)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const s=this.nodeStack.find(ee.is),a=s!==r;!a&&r.explain&&(this.visitNode(r.explain),this.append(" ")),a&&!Rt.is(s)&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),r.top&&(this.append(" "),this.visitNode(r.top)),r.into&&(this.append(" into "),this.visitNode(r.into)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.defaultValues&&(this.append(" "),this.append("default values")),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),a&&!Rt.is(s)&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const s=this.nodeStack.find(ee.is)!==r;!s&&r.explain&&(this.visitNode(r.explain),this.append(" ")),s&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),r.top&&(this.visitNode(r.top),this.append(" ")),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),s&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!Kt(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:s}=r;for(let a=0;a<s.length;++a)this.appendValue(s[a]),a!==s.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(XN[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:s,parameters:a}=r;for(let l=0;l<s.length;++l)this.append(s[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),r.selectQuery?(this.append(" as "),this.visitNode(r.selectQuery)):(this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," ")))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.identity&&this.append(" identity"),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const s=this.nodeStack.find(ee.is),a=s!==r;!a&&r.explain&&(this.visitNode(r.explain),this.append(" ")),a&&!Rt.is(s)&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),r.top&&(this.visitNode(r.top),this.append(" ")),r.table&&(this.visitNode(r.table),this.append(" ")),this.append("set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),a&&!Rt.is(s)&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),ua(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileColumnAlterations(r.columnAlterations),r.addIndex&&this.visitNode(r.addIndex),r.dropIndex&&this.visitNode(r.dropIndex)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(YN[r.modifier]),r.of&&(this.append(" of "),this.compileList(r.of,", "))}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return Wi.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const s of r.pathLegs)this.visitNode(s);this.append("'")}visitJSONPathLeg(r){const s=r.type==="ArrayLocation";this.append(s?"[":"."),this.append(String(r.value)),s&&this.append("]")}visitJSONOperatorChain(r){for(let s=0,a=r.values.length;s<a;s++)s===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[s])}visitMergeQuery(r){r.with&&(this.visitNode(r.with),this.append(" ")),this.append("merge "),r.top&&(this.visitNode(r.top),this.append(" ")),this.append("into "),this.visitNode(r.into),r.using&&(this.append(" "),this.visitNode(r.using)),r.whens&&(this.append(" "),this.compileList(r.whens))}visitMatched(r){r.not&&this.append("not "),this.append("matched"),r.bySource&&this.append(" by source")}visitAddIndex(r){this.append("add "),r.unique&&this.append("unique "),this.append("index "),this.visitNode(r.name),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.using&&(this.append(" using "),this.visitNode(r.using))}visitCast(r){this.append("cast("),this.visitNode(r.expression),this.append(" as "),this.visitNode(r.dataType),this.append(")")}visitFetch(r){this.append("fetch next "),this.visitNode(r.rowCount),this.append(` rows ${r.modifier}`)}visitTop(r){this.append(`top(${r.expression})`),r.modifiers&&this.append(` ${r.modifiers}`)}append(r){k(this,Yn,n(this,Yn)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const s=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const h of r)l+=h,h===s?l+=s:h===a&&(l+=a);return l}addParameter(r){n(this,on).push(r)}appendImmediateValue(r){if(Kt(r))this.append(`'${r}'`);else if(Nu(r)||ua(r))this.append(r.toString());else if(Vl(r))this.append("null");else if(vw(r))this.appendImmediateValue(r.toISOString());else if(Jl(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((s,a)=>s.modifier&&a.modifier?Gh[s.modifier]-Gh[a.modifier]:1),c(r)}compileColumnAlterations(r){this.compileList(r)}announcesNewColumnDataType(){return!0}}Yn=new WeakMap,on=new WeakMap;const YN=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Gh=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),XN=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"}),Tr=c({raw(t,e=[]){return c({sql:t,query:yt.createWithSql(t),parameters:c(e)})}});class ZN{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}const eg=/"/g;class Jf extends zN{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(eg,'""')}visitDefaultInsertValue(e){this.append("null")}}const Hf="kysely_migration",Kf="kysely_migration_lock";c({__noMigrations__:!0});var Xn,uu,zf;class Gf{constructor(e){C(this,uu);C(this,Xn,void 0);k(this,Xn,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=n(this,Xn).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",Hf).where("name","!=",Kf));const s=await r.execute();return Promise.all(s.map(({name:a})=>ue(this,uu,zf).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}Xn=new WeakMap,uu=new WeakSet,zf=async function(e){const r=n(this,Xn),s=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=s.sql?.split(/[\(\),]/)?.find(h=>h.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(ot`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:s.type==="view",columns:l.map(h=>({name:h.name,dataType:h.type,isNullable:!h.notnull,isAutoIncrementing:h.name===a,hasDefaultValue:h.dflt_value!=null,comment:void 0}))}};class Yf extends ZN{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var tg=class{createQueryCompiler(){return new Jf}createAdapter(){return new Yf}createIntrospector(t){return new Gf(t)}},rg=class{constructor(){Z(this,"connectionMutex",new ig);Z(this,"connection")}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(Tr.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}},ig=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},ng=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const s=await this.query(r,t);return fe.is(e)||s.length?{rows:s}:{rows:s,...await this.info()}}};function sg(t,e,r){let s,a=0,l=null;function h(){s&&clearTimeout(s),a=0,l=null}function m(){a>=r?(t(l),h()):(s&&clearTimeout(s),s=setTimeout(()=>{t(l),h(),s=void 0},e))}return N=>{a++,l=N,s===void 0&&a===0?(t(N),a++):m()}}var og=class extends rg{constructor(e){super();Z(this,"config");Z(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new ag(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},ag=class extends ng{constructor(e,r,s=!1,a=2e3,l=1e3){super();Z(this,"db");Z(this,"onWrite");Z(this,"trxCount",0);this.db=e,this.onWrite=r?s?sg(r,a,l):r:void 0}async query(e,r){const s=this.db.prepare(e);s.bind(r);const a=[];for(;s.step();)a.push(s.getAsObject());return s.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},ug=class extends tg{constructor(e){super();Z(this,"config");this.config=e}createDriver(){return new og(this.config)}};function lg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var Xf={exports:{}};const hg={},dg=Object.freeze(Object.defineProperty({__proto__:null,default:hg},Symbol.toStringTag,{value:"Module"})),Hu=cg(dg);(function(t,e){var r=void 0,s=function(a){return r||(r=new Promise(function(l,h){var m=typeof a<"u"?a:{},N=m.onAbort;m.onAbort=function(i){h(new Error(i)),N&&N(i)},m.postRun=m.postRun||[],m.postRun.push(function(){l(m)}),t=void 0;var d;d||(d=typeof m<"u"?m:{}),d.onRuntimeInitialized=function(){function i(g,I){switch(typeof I){case"boolean":$p(g,I?1:0);break;case"number":Bp(g,I);break;case"string":Fp(g,I,-1,-1);break;case"object":if(I===null)Jc(g);else if(I.length!=null){var F=So(I,ko);Up(g,F,I.length,-1),Mo(F)}else Lo(g,"Wrong API use : tried to return a value of an unknown type ("+I+").",-1);break;default:Jc(g)}}function o(g,I){for(var F=[],te=0;te<g;te+=1){var he=q(I+4*te,"i32"),Ae=Rp(he);if(Ae===1||Ae===2)he=Pp(he);else if(Ae===3)he=Dp(he);else if(Ae===4){Ae=he,he=Mp(Ae),Ae=Lp(Ae);for(var tr=new Uint8Array(he),Yt=0;Yt<he;Yt+=1)tr[Yt]=Te[Ae+Yt];he=tr}else he=null;F.push(he)}return F}function u(g,I){this.La=g,this.db=I,this.Ja=1,this.fb=[]}function f(g,I){if(this.db=I,I=be(g)+1,this.Ya=Ro(I),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Le(g,Ne,this.Ya,I),this.eb=this.Ya,this.Ua=this.ib=null}function y(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var I=this.filename,F="/",te=I;if(F&&(F=typeof F=="string"?F:fs(F),te=I?T(F+"/"+I):F),I=pc(!0,!0),te=qo(te,(I!==void 0?I:438)&4095|32768,0),g){if(typeof g=="string"){F=Array(g.length);for(var he=0,Ae=g.length;he<Ae;++he)F[he]=g.charCodeAt(he);g=F}_o(te,I|146),F=wn(te,577),kc(F,g,0,g.length,0),_u(F),_o(te,I)}}this.handleError(Y(this.filename,b)),this.db=q(b,"i32"),Kc(this.db),this.Za={},this.Na={}}var b=Zr(4),O=d.cwrap,Y=O("sqlite3_open","number",["string","number"]),me=O("sqlite3_close_v2","number",["number"]),ae=O("sqlite3_exec","number",["number","string","number","number","number"]),Ye=O("sqlite3_changes","number",["number"]),ut=O("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Uc=O("sqlite3_sql","string",["number"]),wp=O("sqlite3_normalized_sql","string",["number"]),$c=O("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Np=O("sqlite3_bind_text","number",["number","number","number","number","number"]),Qc=O("sqlite3_bind_blob","number",["number","number","number","number","number"]),gp=O("sqlite3_bind_double","number",["number","number","number"]),bp=O("sqlite3_bind_int","number",["number","number","number"]),vp=O("sqlite3_bind_parameter_index","number",["number","string"]),xp=O("sqlite3_step","number",["number"]),Op=O("sqlite3_errmsg","string",["number"]),Cp=O("sqlite3_column_count","number",["number"]),qp=O("sqlite3_data_count","number",["number"]),Wp=O("sqlite3_column_double","number",["number","number"]),jc=O("sqlite3_column_text","string",["number","number"]),_p=O("sqlite3_column_blob","number",["number","number"]),Tp=O("sqlite3_column_bytes","number",["number","number"]),Ip=O("sqlite3_column_type","number",["number","number"]),Ep=O("sqlite3_column_name","string",["number","number"]),kp=O("sqlite3_reset","number",["number"]),Sp=O("sqlite3_clear_bindings","number",["number"]),Ap=O("sqlite3_finalize","number",["number"]),Vc=O("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Rp=O("sqlite3_value_type","number",["number"]),Mp=O("sqlite3_value_bytes","number",["number"]),Dp=O("sqlite3_value_text","string",["number"]),Lp=O("sqlite3_value_blob","number",["number"]),Pp=O("sqlite3_value_double","number",["number"]),Bp=O("sqlite3_result_double","",["number","number"]),Jc=O("sqlite3_result_null","",["number"]),Fp=O("sqlite3_result_text","",["number","string","number","number"]),Up=O("sqlite3_result_blob","",["number","number","number","number"]),$p=O("sqlite3_result_int","",["number","number"]),Lo=O("sqlite3_result_error","",["number","string","number"]),Hc=O("sqlite3_aggregate_context","number",["number","number"]),Kc=O("RegisterExtensionFunctions","number",["number"]);u.prototype.bind=function(g){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(g)?this.wb(g):g!=null&&typeof g=="object"?this.xb(g):!0},u.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var g=xp(this.La);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},u.prototype.rb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),Wp(this.La,g)},u.prototype.Ab=function(g){if(g==null&&(g=this.Ja,this.Ja+=1),g=jc(this.La,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},u.prototype.Bb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),jc(this.La,g)},u.prototype.getBlob=function(g){g==null&&(g=this.Ja,this.Ja+=1);var I=Tp(this.La,g);g=_p(this.La,g);for(var F=new Uint8Array(I),te=0;te<I;te+=1)F[te]=Te[g+te];return F},u.prototype.get=function(g,I){I=I||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var F=qp(this.La),te=0;te<F;te+=1)switch(Ip(this.La,te)){case 1:var he=I.useBigInt?this.Ab(te):this.rb(te);g.push(he);break;case 2:g.push(this.rb(te));break;case 3:g.push(this.Bb(te));break;case 4:g.push(this.getBlob(te));break;default:g.push(null)}return g},u.prototype.getColumnNames=function(){for(var g=[],I=Cp(this.La),F=0;F<I;F+=1)g.push(Ep(this.La,F));return g},u.prototype.getAsObject=function(g,I){g=this.get(g,I),I=this.getColumnNames();for(var F={},te=0;te<I.length;te+=1)F[I[te]]=g[te];return F},u.prototype.getSQL=function(){return Uc(this.La)},u.prototype.getNormalizedSQL=function(){return wp(this.La)},u.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},u.prototype.nb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),g=Et(g);var F=So(g,ko);this.fb.push(F),this.db.handleError(Np(this.La,I,F,g.length-1,0))},u.prototype.vb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1);var F=So(g,ko);this.fb.push(F),this.db.handleError(Qc(this.La,I,F,g.length,0))},u.prototype.mb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),this.db.handleError((g===(g|0)?bp:gp)(this.La,I,g))},u.prototype.yb=function(g){g==null&&(g=this.Ja,this.Ja+=1),Qc(this.La,g,0,0,0)},u.prototype.ob=function(g,I){switch(I==null&&(I=this.Ja,this.Ja+=1),typeof g){case"string":this.nb(g,I);return;case"number":this.mb(g,I);return;case"bigint":this.nb(g.toString(),I);return;case"boolean":this.mb(g+0,I);return;case"object":if(g===null){this.yb(I);return}if(g.length!=null){this.vb(g,I);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},u.prototype.xb=function(g){var I=this;return Object.keys(g).forEach(function(F){var te=vp(I.La,F);te!==0&&I.ob(g[F],te)}),!0},u.prototype.wb=function(g){for(var I=0;I<g.length;I+=1)this.ob(g[I],I+1);return!0},u.prototype.reset=function(){return this.freemem(),Sp(this.La)===0&&kp(this.La)===0},u.prototype.freemem=function(){for(var g;(g=this.fb.pop())!==void 0;)Mo(g)},u.prototype.free=function(){this.freemem();var g=Ap(this.La)===0;return delete this.db.Za[this.La],this.La=0,g},f.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var g=Ns(),I=Zr(4);_(b),_(I);try{this.db.handleError($c(this.db.db,this.eb,-1,b,I)),this.eb=q(I,"i32");var F=q(b,"i32");return F===0?(this.gb(),{done:!0}):(this.Ua=new u(F,this.db),this.db.Za[F]=this.Ua,{value:this.Ua,done:!1})}catch(te){throw this.ib=A(this.eb),this.gb(),te}finally{gs(g)}},f.prototype.gb=function(){Mo(this.Ya),this.Ya=null},f.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(f.prototype[Symbol.iterator]=function(){return this}),y.prototype.run=function(g,I){if(!this.db)throw"Database closed";if(I){g=this.prepare(g,I);try{g.step()}finally{g.free()}}else this.handleError(ae(this.db,g,0,0,b));return this},y.prototype.exec=function(g,I,F){if(!this.db)throw"Database closed";var te=Ns(),he=null;try{var Ae=ku(g),tr=Zr(4);for(g=[];q(Ae,"i8")!==0;){_(b),_(tr),this.handleError($c(this.db,Ae,-1,b,tr));var Yt=q(b,"i32");if(Ae=q(tr,"i32"),Yt!==0){var Bt=null;for(he=new u(Yt,this),I!=null&&he.bind(I);he.step();)Bt===null&&(Bt={columns:he.getColumnNames(),values:[]},g.push(Bt)),Bt.values.push(he.get(null,F));he.free()}}return g}catch(rr){throw he&&he.free(),rr}finally{gs(te)}},y.prototype.each=function(g,I,F,te,he){typeof I=="function"&&(te=F,F=I,I=void 0),g=this.prepare(g,I);try{for(;g.step();)F(g.getAsObject(null,he))}finally{g.free()}if(typeof te=="function")return te()},y.prototype.prepare=function(g,I){if(_(b),this.handleError(ut(this.db,g,-1,b,0)),g=q(b,"i32"),g===0)throw"Nothing to prepare";var F=new u(g,this);return I!=null&&F.bind(I),this.Za[g]=F},y.prototype.iterateStatements=function(g){return new f(g,this)},y.prototype.export=function(){Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(Nn),this.Na={},this.handleError(me(this.db));var g=dp(this.filename);return this.handleError(Y(this.filename,b)),this.db=q(b,"i32"),Kc(this.db),g},y.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(g){g.free()}),Object.values(this.Na).forEach(Nn),this.Na={},this.handleError(me(this.db)),qc("/"+this.filename),this.db=null)},y.prototype.handleError=function(g){if(g===0)return null;throw g=Op(this.db),Error(g)},y.prototype.getRowsModified=function(){return Ye(this.db)},y.prototype.create_function=function(g,I){Object.prototype.hasOwnProperty.call(this.Na,g)&&(Nn(this.Na[g]),delete this.Na[g]);var F=Ao(function(te,he,Ae){he=o(he,Ae);try{var tr=I.apply(null,he)}catch(Yt){Lo(te,Yt,-1);return}i(te,tr)},"viii");return this.Na[g]=F,this.handleError(Vc(this.db,g,I.length,1,0,F,0,0,0)),this},y.prototype.create_aggregate=function(g,I){var F=I.init||function(){return null},te=I.finalize||function(Bt){return Bt},he=I.step;if(!he)throw"An aggregate function must have a step function in "+g;var Ae={};Object.hasOwnProperty.call(this.Na,g)&&(Nn(this.Na[g]),delete this.Na[g]),I=g+"__finalize",Object.hasOwnProperty.call(this.Na,I)&&(Nn(this.Na[I]),delete this.Na[I]);var tr=Ao(function(Bt,rr,Au){var Di=Hc(Bt,1);Object.hasOwnProperty.call(Ae,Di)||(Ae[Di]=F()),rr=o(rr,Au),rr=[Ae[Di]].concat(rr);try{Ae[Di]=he.apply(null,rr)}catch(Qp){delete Ae[Di],Lo(Bt,Qp,-1)}},"viii"),Yt=Ao(function(Bt){var rr=Hc(Bt,1);try{var Au=te(Ae[rr])}catch(Di){delete Ae[rr],Lo(Bt,Di,-1);return}i(Bt,Au),delete Ae[rr]},"vi");return this.Na[g]=tr,this.Na[I]=Yt,this.handleError(Vc(this.db,g,he.length-1,1,0,0,tr,Yt,0)),this},d.Database=y};var v=Object.assign({},d),W="./this.program",R=typeof window=="object",B=typeof importScripts=="function",pe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Q="",je,J,G;if(pe){var de=Hu,Ce=Hu;Q=B?Ce.dirname(Q)+"/":__dirname+"/",je=(i,o)=>(i=It(i)?new URL(i):Ce.normalize(i),de.readFileSync(i,o?void 0:"utf8")),G=i=>(i=je(i,!0),i.buffer||(i=new Uint8Array(i)),i),J=(i,o,u,f=!0)=>{i=It(i)?new URL(i):Ce.normalize(i),de.readFile(i,f?void 0:"utf8",(y,b)=>{y?u(y):o(f?b.buffer:b)})},!d.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=()=>"[Emscripten Module object]"}else(R||B)&&(B?Q=self.location.href:typeof document<"u"&&document.currentScript&&(Q=document.currentScript.src),Q=Q.indexOf("blob:")!==0?Q.substr(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1):"",je=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.send(null),o.responseText},B&&(G=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),J=(i,o,u)=>{var f=new XMLHttpRequest;f.open("GET",i,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?o(f.response):u()},f.onerror=u,f.send(null)});var dt=d.print||console.log.bind(console),ne=d.printErr||console.error.bind(console);Object.assign(d,v),v=null,d.thisProgram&&(W=d.thisProgram);var He;d.wasmBinary&&(He=d.wasmBinary),typeof WebAssembly!="object"&&Zt("no native wasm support detected");var tt,Gr=!1,Te,Ne,pr,K,Ie,fn,rt;function Se(){var i=tt.buffer;d.HEAP8=Te=new Int8Array(i),d.HEAP16=pr=new Int16Array(i),d.HEAPU8=Ne=new Uint8Array(i),d.HEAPU16=new Uint16Array(i),d.HEAP32=K=new Int32Array(i),d.HEAPU32=Ie=new Uint32Array(i),d.HEAPF32=fn=new Float32Array(i),d.HEAPF64=rt=new Float64Array(i)}var qe=[],mr=[],ki=[];function kr(){var i=d.preRun.shift();qe.unshift(i)}var at=0,zr=null;function Zt(i){throw d.onAbort?.(i),i="Aborted("+i+")",ne(i),Gr=!0,new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info.")}var Oo=i=>i.startsWith("data:application/octet-stream;base64,"),It=i=>i.startsWith("file://"),er;if(er="sql-wasm.wasm",!Oo(er)){var pn=er;er=d.locateFile?d.locateFile(pn,Q):Q+pn}function ls(i){if(i==er&&He)return new Uint8Array(He);if(G)return G(i);throw"both async and sync fetching of the wasm failed"}function Yr(i){if(!He&&(R||B)){if(typeof fetch=="function"&&!It(i))return fetch(i,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+i+"'";return o.arrayBuffer()}).catch(()=>ls(i));if(J)return new Promise((o,u)=>{J(i,f=>o(new Uint8Array(f)),u)})}return Promise.resolve().then(()=>ls(i))}function mn(i,o,u){return Yr(i).then(f=>WebAssembly.instantiate(f,o)).then(f=>f).then(u,f=>{ne(`failed to asynchronously prepare wasm: ${f}`),Zt(f)})}function cs(i,o){var u=er;He||typeof WebAssembly.instantiateStreaming!="function"||Oo(u)||It(u)||pe||typeof fetch!="function"?mn(u,i,o):fetch(u,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,i).then(o,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),mn(u,i,o)}))}var p,w,x=i=>{for(;0<i.length;)i.shift()(d)};function q(i,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return Te[i>>0];case"i8":return Te[i>>0];case"i16":return pr[i>>1];case"i32":return K[i>>2];case"i64":Zt("to do getValue(i64) use WASM_BIGINT");case"float":return fn[i>>2];case"double":return rt[i>>3];case"*":return Ie[i>>2];default:Zt(`invalid type for getValue: ${o}`)}}function _(i){var o="i32";switch(o.endsWith("*")&&(o="*"),o){case"i1":Te[i>>0]=0;break;case"i8":Te[i>>0]=0;break;case"i16":pr[i>>1]=0;break;case"i32":K[i>>2]=0;break;case"i64":Zt("to do setValue(i64) use WASM_BIGINT");case"float":fn[i>>2]=0;break;case"double":rt[i>>3]=0;break;case"*":Ie[i>>2]=0;break;default:Zt(`invalid type for setValue: ${o}`)}}var M=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,S=(i,o,u)=>{var f=o+u;for(u=o;i[u]&&!(u>=f);)++u;if(16<u-o&&i.buffer&&M)return M.decode(i.subarray(o,u));for(f="";o<u;){var y=i[o++];if(y&128){var b=i[o++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var O=i[o++]&63;y=(y&240)==224?(y&15)<<12|b<<6|O:(y&7)<<18|b<<12|O<<6|i[o++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},A=(i,o)=>i?S(Ne,i,o):"",L=(i,o)=>{for(var u=0,f=i.length-1;0<=f;f--){var y=i[f];y==="."?i.splice(f,1):y===".."?(i.splice(f,1),u++):u&&(i.splice(f,1),u--)}if(o)for(;u;u--)i.unshift("..");return i},T=i=>{var o=i.charAt(0)==="/",u=i.substr(-1)==="/";return(i=L(i.split("/").filter(f=>!!f),!o).join("/"))||o||(i="."),i&&u&&(i+="/"),(o?"/":"")+i},P=i=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(i).slice(1);return i=o[0],o=o[1],!i&&!o?".":(o&&(o=o.substr(0,o.length-1)),i+o)},U=i=>{if(i==="/")return"/";i=T(i),i=i.replace(/\/$/,"");var o=i.lastIndexOf("/");return o===-1?i:i.substr(o+1)},$=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(pe)try{var i=Hu;if(i.randomFillSync)return u=>i.randomFillSync(u);var o=i.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}Zt("initRandomDevice")},z=i=>(z=$())(i);function se(){for(var i="",o=!1,u=arguments.length-1;-1<=u&&!o;u--){if(o=0<=u?arguments[u]:"/",typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";i=o+"/"+i,o=o.charAt(0)==="/"}return i=L(i.split("/").filter(f=>!!f),!o).join("/"),(o?"/":"")+i||"."}var ge=[],be=i=>{for(var o=0,u=0;u<i.length;++u){var f=i.charCodeAt(u);127>=f?o++:2047>=f?o+=2:55296<=f&&57343>=f?(o+=4,++u):o+=3}return o},Le=(i,o,u,f)=>{if(!(0<f))return 0;var y=u;f=u+f-1;for(var b=0;b<i.length;++b){var O=i.charCodeAt(b);if(55296<=O&&57343>=O){var Y=i.charCodeAt(++b);O=65536+((O&1023)<<10)|Y&1023}if(127>=O){if(u>=f)break;o[u++]=O}else{if(2047>=O){if(u+1>=f)break;o[u++]=192|O>>6}else{if(65535>=O){if(u+2>=f)break;o[u++]=224|O>>12}else{if(u+3>=f)break;o[u++]=240|O>>18,o[u++]=128|O>>12&63}o[u++]=128|O>>6&63}o[u++]=128|O&63}}return o[u]=0,u-y};function Et(i,o){var u=Array(be(i)+1);return i=Le(i,u,0,u.length),o&&(u.length=i),u}var Sr=[];function hs(i,o){Sr[i]={input:[],output:[],Xa:o},qu(i,Si)}var Si={open(i){var o=Sr[i.node.rdev];if(!o)throw new D(43);i.tty=o,i.seekable=!1},close(i){i.tty.Xa.fsync(i.tty)},fsync(i){i.tty.Xa.fsync(i.tty)},read(i,o,u,f){if(!i.tty||!i.tty.Xa.sb)throw new D(60);for(var y=0,b=0;b<f;b++){try{var O=i.tty.Xa.sb(i.tty)}catch{throw new D(29)}if(O===void 0&&y===0)throw new D(6);if(O==null)break;y++,o[u+b]=O}return y&&(i.node.timestamp=Date.now()),y},write(i,o,u,f){if(!i.tty||!i.tty.Xa.jb)throw new D(60);try{for(var y=0;y<f;y++)i.tty.Xa.jb(i.tty,o[u+y])}catch{throw new D(29)}return f&&(i.node.timestamp=Date.now()),y}},Co={sb(){e:{if(!ge.length){var i=null;if(pe){var o=Buffer.alloc(256),u=0,f=process.stdin.fd;try{u=de.readSync(f,o)}catch(y){if(y.toString().includes("EOF"))u=0;else throw y}0<u?i=o.slice(0,u).toString("utf-8"):i=null}else typeof window<"u"&&typeof window.prompt=="function"?(i=window.prompt("Input: "),i!==null&&(i+=`
`)):typeof readline=="function"&&(i=readline(),i!==null&&(i+=`
`));if(!i){i=null;break e}ge=Et(i,!0)}i=ge.shift()}return i},jb(i,o){o===null||o===10?(dt(S(i.output,0)),i.output=[]):o!=0&&i.output.push(o)},fsync(i){i.output&&0<i.output.length&&(dt(S(i.output,0)),i.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},bt={jb(i,o){o===null||o===10?(ne(S(i.output,0)),i.output=[]):o!=0&&i.output.push(o)},fsync(i){i.output&&0<i.output.length&&(ne(S(i.output,0)),i.output=[])}};function Pt(i,o){var u=i.Ia?i.Ia.length:0;u>=o||(o=Math.max(o,u*(1048576>u?2:1.125)>>>0),u!=0&&(o=Math.max(o,256)),u=i.Ia,i.Ia=new Uint8Array(o),0<i.Ma&&i.Ia.set(u.subarray(0,i.Ma),0))}var oe={Qa:null,Ra(){return oe.createNode(null,"/",16895,0)},createNode(i,o,u,f){if((u&61440)===24576||(u&61440)===4096)throw new D(63);return oe.Qa||(oe.Qa={dir:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa,lookup:oe.Ga.lookup,ab:oe.Ga.ab,rename:oe.Ga.rename,unlink:oe.Ga.unlink,rmdir:oe.Ga.rmdir,readdir:oe.Ga.readdir,symlink:oe.Ga.symlink},stream:{Ta:oe.Ha.Ta}},file:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa},stream:{Ta:oe.Ha.Ta,read:oe.Ha.read,write:oe.Ha.write,lb:oe.Ha.lb,bb:oe.Ha.bb,cb:oe.Ha.cb}},link:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa,readlink:oe.Ga.readlink},stream:{}},pb:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa},stream:hp}}),u=Nc(i,o,u,f),zt(u.mode)?(u.Ga=oe.Qa.dir.node,u.Ha=oe.Qa.dir.stream,u.Ia={}):(u.mode&61440)===32768?(u.Ga=oe.Qa.file.node,u.Ha=oe.Qa.file.stream,u.Ma=0,u.Ia=null):(u.mode&61440)===40960?(u.Ga=oe.Qa.link.node,u.Ha=oe.Qa.link.stream):(u.mode&61440)===8192&&(u.Ga=oe.Qa.pb.node,u.Ha=oe.Qa.pb.stream),u.timestamp=Date.now(),i&&(i.Ia[o]=u,i.timestamp=u.timestamp),u},Lb(i){return i.Ia?i.Ia.subarray?i.Ia.subarray(0,i.Ma):new Uint8Array(i.Ia):new Uint8Array(0)},Ga:{Pa(i){var o={};return o.dev=(i.mode&61440)===8192?i.id:1,o.ino=i.id,o.mode=i.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=i.rdev,zt(i.mode)?o.size=4096:(i.mode&61440)===32768?o.size=i.Ma:(i.mode&61440)===40960?o.size=i.link.length:o.size=0,o.atime=new Date(i.timestamp),o.mtime=new Date(i.timestamp),o.ctime=new Date(i.timestamp),o.zb=4096,o.blocks=Math.ceil(o.size/o.zb),o},Oa(i,o){if(o.mode!==void 0&&(i.mode=o.mode),o.timestamp!==void 0&&(i.timestamp=o.timestamp),o.size!==void 0&&(o=o.size,i.Ma!=o))if(o==0)i.Ia=null,i.Ma=0;else{var u=i.Ia;i.Ia=new Uint8Array(o),u&&i.Ia.set(u.subarray(0,Math.min(o,i.Ma))),i.Ma=o}},lookup(){throw Ou[44]},ab(i,o,u,f){return oe.createNode(i,o,u,f)},rename(i,o,u){if(zt(i.mode)){try{var f=Ai(o,u)}catch{}if(f)for(var y in f.Ia)throw new D(55)}delete i.parent.Ia[i.name],i.parent.timestamp=Date.now(),i.name=u,o.Ia[u]=i,o.timestamp=i.parent.timestamp,i.parent=o},unlink(i,o){delete i.Ia[o],i.timestamp=Date.now()},rmdir(i,o){var u=Ai(i,o),f;for(f in u.Ia)throw new D(55);delete i.Ia[o],i.timestamp=Date.now()},readdir(i){var o=[".",".."],u;for(u of Object.keys(i.Ia))o.push(u);return o},symlink(i,o,u){return i=oe.createNode(i,o,41471,0),i.link=u,i},readlink(i){if((i.mode&61440)!==40960)throw new D(28);return i.link}},Ha:{read(i,o,u,f,y){var b=i.node.Ia;if(y>=i.node.Ma)return 0;if(i=Math.min(i.node.Ma-y,f),8<i&&b.subarray)o.set(b.subarray(y,y+i),u);else for(f=0;f<i;f++)o[u+f]=b[y+f];return i},write(i,o,u,f,y,b){if(o.buffer===Te.buffer&&(b=!1),!f)return 0;if(i=i.node,i.timestamp=Date.now(),o.subarray&&(!i.Ia||i.Ia.subarray)){if(b)return i.Ia=o.subarray(u,u+f),i.Ma=f;if(i.Ma===0&&y===0)return i.Ia=o.slice(u,u+f),i.Ma=f;if(y+f<=i.Ma)return i.Ia.set(o.subarray(u,u+f),y),f}if(Pt(i,y+f),i.Ia.subarray&&o.subarray)i.Ia.set(o.subarray(u,u+f),y);else for(b=0;b<f;b++)i.Ia[y+b]=o[u+b];return i.Ma=Math.max(i.Ma,y+f),f},Ta(i,o,u){if(u===1?o+=i.position:u===2&&(i.node.mode&61440)===32768&&(o+=i.node.Ma),0>o)throw new D(28);return o},lb(i,o,u){Pt(i.node,o+u),i.node.Ma=Math.max(i.node.Ma,o+u)},bb(i,o,u,f,y){if((i.node.mode&61440)!==32768)throw new D(43);if(i=i.node.Ia,y&2||i.buffer!==Te.buffer){if((0<u||u+o<i.length)&&(i.subarray?i=i.subarray(u,u+o):i=Array.prototype.slice.call(i,u,u+o)),u=!0,o=65536*Math.ceil(o/65536),(y=Bc(65536,o))?(Ne.fill(0,y,y+o),o=y):o=0,!o)throw new D(48);Te.set(i,o)}else u=!1,o=i.byteOffset;return{Db:o,ub:u}},cb(i,o,u,f){return oe.Ha.write(i,o,0,f,u,!1),0}}},pc=(i,o)=>{var u=0;return i&&(u|=365),o&&(u|=146),u},xu=null,mc={},ds=[],lp=1,Xr=null,yc=!0,D=null,Ou={};function kt(i,o={}){if(i=se(i),!i)return{path:"",node:null};if(o=Object.assign({qb:!0,kb:0},o),8<o.kb)throw new D(32);i=i.split("/").filter(O=>!!O);for(var u=xu,f="/",y=0;y<i.length;y++){var b=y===i.length-1;if(b&&o.parent)break;if(u=Ai(u,i[y]),f=T(f+"/"+i[y]),u.Va&&(!b||b&&o.qb)&&(u=u.Va.root),!b||o.Sa){for(b=0;(u.mode&61440)===40960;)if(u=Wc(f),f=se(P(f),u),u=kt(f,{kb:o.kb+1}).node,40<b++)throw new D(32)}}return{path:f,node:u}}function fs(i){for(var o;;){if(i===i.parent)return i=i.Ra.tb,o?i[i.length-1]!=="/"?`${i}/${o}`:i+o:i;o=o?`${i.name}/${o}`:i.name,i=i.parent}}function Cu(i,o){for(var u=0,f=0;f<o.length;f++)u=(u<<5)-u+o.charCodeAt(f)|0;return(i+u>>>0)%Xr.length}function wc(i){var o=Cu(i.parent.id,i.name);if(Xr[o]===i)Xr[o]=i.Wa;else for(o=Xr[o];o;){if(o.Wa===i){o.Wa=i.Wa;break}o=o.Wa}}function Ai(i,o){var u;if(u=(u=yn(i,"x"))?u:i.Ga.lookup?0:2)throw new D(u,i);for(u=Xr[Cu(i.id,o)];u;u=u.Wa){var f=u.name;if(u.parent.id===i.id&&f===o)return u}return i.Ga.lookup(i,o)}function Nc(i,o,u,f){return i=new Lc(i,o,u,f),o=Cu(i.parent.id,i.name),i.Wa=Xr[o],Xr[o]=i}function zt(i){return(i&61440)===16384}function gc(i){var o=["r","w","rw"][i&3];return i&512&&(o+="w"),o}function yn(i,o){if(yc)return 0;if(!o.includes("r")||i.mode&292){if(o.includes("w")&&!(i.mode&146)||o.includes("x")&&!(i.mode&73))return 2}else return 2;return 0}function bc(i,o){try{return Ai(i,o),20}catch{}return yn(i,"wx")}function vc(i,o,u){try{var f=Ai(i,o)}catch(y){return y.Ka}if(i=yn(i,"wx"))return i;if(u){if(!zt(f.mode))return 54;if(f===f.parent||fs(f)==="/")return 10}else if(zt(f.mode))return 31;return 0}function cp(){for(var i=0;4096>=i;i++)if(!ds[i])return i;throw new D(33)}function vt(i){if(i=ds[i],!i)throw new D(8);return i}function xc(i,o=-1){return ys||(ys=function(){this.$a={}},ys.prototype={},Object.defineProperties(ys.prototype,{object:{get(){return this.node},set(u){this.node=u}},flags:{get(){return this.$a.flags},set(u){this.$a.flags=u}},position:{get(){return this.$a.position},set(u){this.$a.position=u}}})),i=Object.assign(new ys,i),o==-1&&(o=cp()),i.fd=o,ds[o]=i}var hp={open(i){i.Ha=mc[i.node.rdev].Ha,i.Ha.open?.(i)},Ta(){throw new D(70)}};function qu(i,o){mc[i]={Ha:o}}function Oc(i,o){var u=o==="/",f=!o;if(u&&xu)throw new D(10);if(!u&&!f){var y=kt(o,{qb:!1});if(o=y.path,y=y.node,y.Va)throw new D(10);if(!zt(y.mode))throw new D(54)}o={type:i,Pb:{},tb:o,Cb:[]},i=i.Ra(o),i.Ra=o,o.root=i,u?xu=i:y&&(y.Va=o,y.Ra&&y.Ra.Cb.push(o))}function qo(i,o,u){var f=kt(i,{parent:!0}).node;if(i=U(i),!i||i==="."||i==="..")throw new D(28);var y=bc(f,i);if(y)throw new D(y);if(!f.Ga.ab)throw new D(63);return f.Ga.ab(f,i,o,u)}function yr(i,o){return qo(i,(o!==void 0?o:511)&1023|16384,0)}function Wo(i,o,u){typeof u>"u"&&(u=o,o=438),qo(i,o|8192,u)}function Wu(i,o){if(!se(i))throw new D(44);var u=kt(o,{parent:!0}).node;if(!u)throw new D(44);o=U(o);var f=bc(u,o);if(f)throw new D(f);if(!u.Ga.symlink)throw new D(63);u.Ga.symlink(u,o,i)}function Cc(i){var o=kt(i,{parent:!0}).node;i=U(i);var u=Ai(o,i),f=vc(o,i,!0);if(f)throw new D(f);if(!o.Ga.rmdir)throw new D(63);if(u.Va)throw new D(10);o.Ga.rmdir(o,i),wc(u)}function qc(i){var o=kt(i,{parent:!0}).node;if(!o)throw new D(44);i=U(i);var u=Ai(o,i),f=vc(o,i,!1);if(f)throw new D(f);if(!o.Ga.unlink)throw new D(63);if(u.Va)throw new D(10);o.Ga.unlink(o,i),wc(u)}function Wc(i){if(i=kt(i).node,!i)throw new D(44);if(!i.Ga.readlink)throw new D(28);return se(fs(i.parent),i.Ga.readlink(i))}function ps(i,o){if(i=kt(i,{Sa:!o}).node,!i)throw new D(44);if(!i.Ga.Pa)throw new D(63);return i.Ga.Pa(i)}function _c(i){return ps(i,!0)}function _o(i,o){if(i=typeof i=="string"?kt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new D(63);i.Ga.Oa(i,{mode:o&4095|i.mode&-4096,timestamp:Date.now()})}function Tc(i,o){if(0>o)throw new D(28);if(i=typeof i=="string"?kt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new D(63);if(zt(i.mode))throw new D(31);if((i.mode&61440)!==32768)throw new D(28);var u=yn(i,"w");if(u)throw new D(u);i.Ga.Oa(i,{size:o,timestamp:Date.now()})}function wn(i,o,u){if(i==="")throw new D(44);if(typeof o=="string"){var f={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[o];if(typeof f>"u")throw Error(`Unknown file open mode: ${o}`);o=f}if(u=o&64?(typeof u>"u"?438:u)&4095|32768:0,typeof i=="object")var y=i;else{i=T(i);try{y=kt(i,{Sa:!(o&131072)}).node}catch{}}if(f=!1,o&64)if(y){if(o&128)throw new D(20)}else y=qo(i,u,0),f=!0;if(!y)throw new D(44);if((y.mode&61440)===8192&&(o&=-513),o&65536&&!zt(y.mode))throw new D(54);if(!f&&(u=y?(y.mode&61440)===40960?32:zt(y.mode)&&(gc(o)!=="r"||o&512)?31:yn(y,gc(o)):44))throw new D(u);return o&512&&!f&&Tc(y,0),o&=-131713,y=xc({node:y,path:fs(y),flags:o,seekable:!0,position:0,Ha:y.Ha,Fb:[],error:!1}),y.Ha.open&&y.Ha.open(y),!d.logReadFiles||o&1||(Tu||(Tu={}),i in Tu||(Tu[i]=1)),y}function _u(i){if(i.fd===null)throw new D(8);i.hb&&(i.hb=null);try{i.Ha.close&&i.Ha.close(i)}catch(o){throw o}finally{ds[i.fd]=null}i.fd=null}function Ic(i,o,u){if(i.fd===null)throw new D(8);if(!i.seekable||!i.Ha.Ta)throw new D(70);if(u!=0&&u!=1&&u!=2)throw new D(28);i.position=i.Ha.Ta(i,o,u),i.Fb=[]}function Ec(i,o,u,f,y){if(0>f||0>y)throw new D(28);if(i.fd===null)throw new D(8);if((i.flags&2097155)===1)throw new D(8);if(zt(i.node.mode))throw new D(31);if(!i.Ha.read)throw new D(28);var b=typeof y<"u";if(!b)y=i.position;else if(!i.seekable)throw new D(70);return o=i.Ha.read(i,o,u,f,y),b||(i.position+=o),o}function kc(i,o,u,f,y){if(0>f||0>y)throw new D(28);if(i.fd===null)throw new D(8);if(!(i.flags&2097155))throw new D(8);if(zt(i.node.mode))throw new D(31);if(!i.Ha.write)throw new D(28);i.seekable&&i.flags&1024&&Ic(i,0,2);var b=typeof y<"u";if(!b)y=i.position;else if(!i.seekable)throw new D(70);return o=i.Ha.write(i,o,u,f,y,void 0),b||(i.position+=o),o}function dp(i){var o,u=wn(i,u||0);i=ps(i).size;var f=new Uint8Array(i);return Ec(u,f,0,i,0),o=f,_u(u),o}function Sc(){D||(D=function(i,o){this.name="ErrnoError",this.node=o,this.Eb=function(u){this.Ka=u},this.Eb(i),this.message="FS error"},D.prototype=Error(),D.prototype.constructor=D,[44].forEach(i=>{Ou[i]=new D(i),Ou[i].stack="<generic error, no stack>"}))}var Ac;function ms(i,o,u){i=T("/dev/"+i);var f=pc(!!o,!!u);Rc||(Rc=64);var y=Rc++<<8|0;qu(y,{open(b){b.seekable=!1},close(){u?.buffer?.length&&u(10)},read(b,O,Y,me){for(var ae=0,Ye=0;Ye<me;Ye++){try{var ut=o()}catch{throw new D(29)}if(ut===void 0&&ae===0)throw new D(6);if(ut==null)break;ae++,O[Y+Ye]=ut}return ae&&(b.node.timestamp=Date.now()),ae},write(b,O,Y,me){for(var ae=0;ae<me;ae++)try{u(O[Y+ae])}catch{throw new D(29)}return me&&(b.node.timestamp=Date.now()),ae}}),Wo(i,f,y)}var Rc,Pe={},ys,Tu;function Ri(i,o,u){if(o.charAt(0)==="/")return o;if(i=i===-100?"/":vt(i).path,o.length==0){if(!u)throw new D(44);return i}return T(i+"/"+o)}function To(i,o,u){try{var f=i(o)}catch(b){if(b&&b.node&&T(o)!==T(fs(b.node)))return-54;throw b}K[u>>2]=f.dev,K[u+4>>2]=f.mode,Ie[u+8>>2]=f.nlink,K[u+12>>2]=f.uid,K[u+16>>2]=f.gid,K[u+20>>2]=f.rdev,w=[f.size>>>0,(p=f.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[u+24>>2]=w[0],K[u+28>>2]=w[1],K[u+32>>2]=4096,K[u+36>>2]=f.blocks,i=f.atime.getTime(),o=f.mtime.getTime();var y=f.ctime.getTime();return w=[Math.floor(i/1e3)>>>0,(p=Math.floor(i/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[u+40>>2]=w[0],K[u+44>>2]=w[1],Ie[u+48>>2]=i%1e3*1e3,w=[Math.floor(o/1e3)>>>0,(p=Math.floor(o/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[u+56>>2]=w[0],K[u+60>>2]=w[1],Ie[u+64>>2]=o%1e3*1e3,w=[Math.floor(y/1e3)>>>0,(p=Math.floor(y/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[u+72>>2]=w[0],K[u+76>>2]=w[1],Ie[u+80>>2]=y%1e3*1e3,w=[f.ino>>>0,(p=f.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[u+88>>2]=w[0],K[u+92>>2]=w[1],0}var Io=void 0;function Eo(){var i=K[+Io>>2];return Io+=4,i}var ws=(i,o)=>o+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*o:NaN,fp=[0,31,60,91,121,152,182,213,244,274,305,335],pp=[0,31,59,90,120,151,181,212,243,273,304,334],Mc=i=>{var o=be(i)+1,u=Ro(o);return u&&Le(i,Ne,u,o),u},Iu={},Dc=()=>{if(!Eu){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},o;for(o in Iu)Iu[o]===void 0?delete i[o]:i[o]=Iu[o];var u=[];for(o in i)u.push(`${o}=${i[o]}`);Eu=u}return Eu},Eu,ku=i=>{var o=be(i)+1,u=Zr(o);return Le(i,Ne,u,o),u},mp=(i,o,u,f)=>{var y={string:ae=>{var Ye=0;return ae!=null&&ae!==0&&(Ye=ku(ae)),Ye},array:ae=>{var Ye=Zr(ae.length);return Te.set(ae,Ye),Ye}};i=d["_"+i];var b=[],O=0;if(f)for(var Y=0;Y<f.length;Y++){var me=y[u[Y]];me?(O===0&&(O=Ns()),b[Y]=me(f[Y])):b[Y]=f[Y]}return u=i.apply(null,b),u=function(ae){return O!==0&&gs(O),o==="string"?ae?S(Ne,ae):"":o==="boolean"?!!ae:ae}(u)},ko=0,So=(i,o)=>(o=o==1?Zr(i.length):Ro(i.length),i.subarray||i.slice||(i=new Uint8Array(i)),Ne.set(i,o),o),Mi,Su=[],Ar,Nn=i=>{Mi.delete(Ar.get(i)),Ar.set(i,null),Su.push(i)},Ao=(i,o)=>{if(!Mi){Mi=new WeakMap;var u=Ar.length;if(Mi)for(var f=0;f<0+u;f++){var y=Ar.get(f);y&&Mi.set(y,f)}}if(u=Mi.get(i)||0)return u;if(Su.length)u=Su.pop();else{try{Ar.grow(1)}catch(Y){throw Y instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Y}u=Ar.length-1}try{Ar.set(u,i)}catch(Y){if(!(Y instanceof TypeError))throw Y;if(typeof WebAssembly.Function=="function"){f=WebAssembly.Function,y={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:o[0]=="v"?[]:[y[o[0]]]},O=1;O<o.length;++O)b.parameters.push(y[o[O]]);o=new f(b,i)}else{for(f=[1],y=o.slice(0,1),o=o.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},f.push(96),O=o.length,128>O?f.push(O):f.push(O%128|128,O>>7),O=0;O<o.length;++O)f.push(b[o[O]]);y=="v"?f.push(0):f.push(1,b[y]),o=[0,97,115,109,1,0,0,0,1],y=f.length,128>y?o.push(y):o.push(y%128|128,y>>7),o.push.apply(o,f),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:i}}).exports.f}Ar.set(u,o)}return Mi.set(i,u),u};function Lc(i,o,u,f){i||(i=this),this.parent=i,this.Ra=i.Ra,this.Va=null,this.id=lp++,this.name=o,this.mode=u,this.Ga={},this.Ha={},this.rdev=f}Object.defineProperties(Lc.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(i){i?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(i){i?this.mode|=146:this.mode&=-147}}}),Sc(),Xr=Array(4096),Oc(oe,"/"),yr("/tmp"),yr("/home"),yr("/home/web_user"),function(){yr("/dev"),qu(259,{read:()=>0,write:(f,y,b,O)=>O}),Wo("/dev/null",259),hs(1280,Co),hs(1536,bt),Wo("/dev/tty",1280),Wo("/dev/tty1",1536);var i=new Uint8Array(1024),o=0,u=()=>(o===0&&(o=z(i).byteLength),i[--o]);ms("random",u),ms("urandom",u),yr("/dev/shm"),yr("/dev/shm/tmp")}(),function(){yr("/proc");var i=yr("/proc/self");yr("/proc/self/fd"),Oc({Ra(){var o=Nc(i,"fd",16895,73);return o.Ga={lookup(u,f){var y=vt(+f);return u={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>y.path}},u.parent=u}},o}},"/proc/self/fd")}();var yp={a:(i,o,u,f)=>{Zt(`Assertion failed: ${i?S(Ne,i):""}, at: `+[o?o?S(Ne,o):"":"unknown filename",u,f?f?S(Ne,f):"":"unknown function"])},h:function(i,o){try{return i=i?S(Ne,i):"",_o(i,o),0}catch(u){if(typeof Pe>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},H:function(i,o,u){try{if(o=o?S(Ne,o):"",o=Ri(i,o),u&-8)return-28;var f=kt(o,{Sa:!0}).node;return f?(i="",u&4&&(i+="r"),u&2&&(i+="w"),u&1&&(i+="x"),i&&yn(f,i)?-2:0):-44}catch(y){if(typeof Pe>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},i:function(i,o){try{var u=vt(i);return _o(u.node,o),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},g:function(i){try{var o=vt(i).node,u=typeof o=="string"?kt(o,{Sa:!0}).node:o;if(!u.Ga.Oa)throw new D(63);return u.Ga.Oa(u,{timestamp:Date.now()}),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},b:function(i,o,u){Io=u;try{var f=vt(i);switch(o){case 0:var y=Eo();if(0>y)return-28;for(;ds[y];)y++;return xc(f,y).fd;case 1:case 2:return 0;case 3:return f.flags;case 4:return y=Eo(),f.flags|=y,0;case 5:return y=Eo(),pr[y+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return K[Pc()>>2]=28,-1;default:return-28}}catch(b){if(typeof Pe>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},f:function(i,o){try{var u=vt(i);return To(ps,u.path,o)}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},n:function(i,o,u){o=ws(o,u);try{if(isNaN(o))return 61;var f=vt(i);if(!(f.flags&2097155))throw new D(28);return Tc(f.node,o),0}catch(y){if(typeof Pe>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},C:function(i,o){try{if(o===0)return-28;var u=be("/")+1;return o<u?-68:(Le("/",Ne,i,o),u)}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},F:function(i,o){try{return i=i?S(Ne,i):"",To(_c,i,o)}catch(u){if(typeof Pe>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},z:function(i,o,u){try{return o=o?S(Ne,o):"",o=Ri(i,o),o=T(o),o[o.length-1]==="/"&&(o=o.substr(0,o.length-1)),yr(o,u),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},E:function(i,o,u,f){try{o=o?S(Ne,o):"";var y=f&256;return o=Ri(i,o,f&4096),To(y?_c:ps,o,u)}catch(b){if(typeof Pe>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},y:function(i,o,u,f){Io=f;try{o=o?S(Ne,o):"",o=Ri(i,o);var y=f?Eo():0;return wn(o,u,y).fd}catch(b){if(typeof Pe>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},w:function(i,o,u,f){try{if(o=o?S(Ne,o):"",o=Ri(i,o),0>=f)return-28;var y=Wc(o),b=Math.min(f,be(y)),O=Te[u+b];return Le(y,Ne,u,f+1),Te[u+b]=O,b}catch(Y){if(typeof Pe>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},v:function(i){try{return i=i?S(Ne,i):"",Cc(i),0}catch(o){if(typeof Pe>"u"||o.name!=="ErrnoError")throw o;return-o.Ka}},G:function(i,o){try{return i=i?S(Ne,i):"",To(ps,i,o)}catch(u){if(typeof Pe>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},r:function(i,o,u){try{return o=o?S(Ne,o):"",o=Ri(i,o),u===0?qc(o):u===512?Cc(o):Zt("Invalid flags passed to unlinkat"),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},q:function(i,o,u){try{if(o=o?S(Ne,o):"",o=Ri(i,o,!0),u){var f=Ie[u>>2]+4294967296*K[u+4>>2],y=K[u+8>>2];b=1e3*f+y/1e6,u+=16,f=Ie[u>>2]+4294967296*K[u+4>>2],y=K[u+8>>2],O=1e3*f+y/1e6}else var b=Date.now(),O=b;i=b;var Y=kt(o,{Sa:!0}).node;return Y.Ga.Oa(Y,{timestamp:Math.max(i,O)}),0}catch(me){if(typeof Pe>"u"||me.name!=="ErrnoError")throw me;return-me.Ka}},l:function(i,o,u){i=new Date(1e3*ws(i,o)),K[u>>2]=i.getSeconds(),K[u+4>>2]=i.getMinutes(),K[u+8>>2]=i.getHours(),K[u+12>>2]=i.getDate(),K[u+16>>2]=i.getMonth(),K[u+20>>2]=i.getFullYear()-1900,K[u+24>>2]=i.getDay(),o=i.getFullYear(),K[u+28>>2]=(o%4!==0||o%100===0&&o%400!==0?pp:fp)[i.getMonth()]+i.getDate()-1|0,K[u+36>>2]=-(60*i.getTimezoneOffset()),o=new Date(i.getFullYear(),6,1).getTimezoneOffset();var f=new Date(i.getFullYear(),0,1).getTimezoneOffset();K[u+32>>2]=(o!=f&&i.getTimezoneOffset()==Math.min(f,o))|0},j:function(i,o,u,f,y,b,O,Y){y=ws(y,b);try{if(isNaN(y))return 61;var me=vt(f);if(o&2&&!(u&2)&&(me.flags&2097155)!==2)throw new D(2);if((me.flags&2097155)===1)throw new D(2);if(!me.Ha.bb)throw new D(43);var ae=me.Ha.bb(me,i,y,o,u),Ye=ae.Db;return K[O>>2]=ae.ub,Ie[Y>>2]=Ye,0}catch(ut){if(typeof Pe>"u"||ut.name!=="ErrnoError")throw ut;return-ut.Ka}},k:function(i,o,u,f,y,b,O){b=ws(b,O);try{if(isNaN(b))return 61;var Y=vt(y);if(u&2){if((Y.node.mode&61440)!==32768)throw new D(43);if(!(f&2)){var me=Ne.slice(i,i+o);Y.Ha.cb&&Y.Ha.cb(Y,me,b,o,f)}}}catch(ae){if(typeof Pe>"u"||ae.name!=="ErrnoError")throw ae;return-ae.Ka}},s:(i,o,u)=>{function f(me){return(me=me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?me[1]:"GMT"}var y=new Date().getFullYear(),b=new Date(y,0,1),O=new Date(y,6,1);y=b.getTimezoneOffset();var Y=O.getTimezoneOffset();Ie[i>>2]=60*Math.max(y,Y),K[o>>2]=+(y!=Y),i=f(b),o=f(O),i=Mc(i),o=Mc(o),Y<y?(Ie[u>>2]=i,Ie[u+4>>2]=o):(Ie[u>>2]=o,Ie[u+4>>2]=i)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:i=>{var o=Ne.length;if(i>>>=0,2147483648<i)return!1;for(var u=1;4>=u;u*=2){var f=o*(1+.2/u);f=Math.min(f,i+100663296);var y=Math;f=Math.max(i,f);e:{y=(y.min.call(y,2147483648,f+(65536-f%65536)%65536)-tt.buffer.byteLength+65535)/65536;try{tt.grow(y),Se();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(i,o)=>{var u=0;return Dc().forEach((f,y)=>{var b=o+u;for(y=Ie[i+4*y>>2]=b,b=0;b<f.length;++b)Te[y++>>0]=f.charCodeAt(b);Te[y>>0]=0,u+=f.length+1}),0},B:(i,o)=>{var u=Dc();Ie[i>>2]=u.length;var f=0;return u.forEach(y=>f+=y.length+1),Ie[o>>2]=f,0},e:function(i){try{var o=vt(i);return _u(o),0}catch(u){if(typeof Pe>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},p:function(i,o){try{var u=vt(i);return Te[o>>0]=u.tty?2:zt(u.mode)?3:(u.mode&61440)===40960?7:4,pr[o+2>>1]=0,w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[o+8>>2]=w[0],K[o+12>>2]=w[1],w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[o+16>>2]=w[0],K[o+20>>2]=w[1],0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return f.Ka}},x:function(i,o,u,f){try{e:{var y=vt(i);i=o;for(var b,O=o=0;O<u;O++){var Y=Ie[i>>2],me=Ie[i+4>>2];i+=8;var ae=Ec(y,Te,Y,me,b);if(0>ae){var Ye=-1;break e}if(o+=ae,ae<me)break;typeof b<"u"&&(b+=ae)}Ye=o}return Ie[f>>2]=Ye,0}catch(ut){if(typeof Pe>"u"||ut.name!=="ErrnoError")throw ut;return ut.Ka}},m:function(i,o,u,f,y){o=ws(o,u);try{if(isNaN(o))return 61;var b=vt(i);return Ic(b,o,f),w=[b.position>>>0,(p=b.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],K[y>>2]=w[0],K[y+4>>2]=w[1],b.hb&&o===0&&f===0&&(b.hb=null),0}catch(O){if(typeof Pe>"u"||O.name!=="ErrnoError")throw O;return O.Ka}},D:function(i){try{var o=vt(i);return o.Ha?.fsync?o.Ha.fsync(o):0}catch(u){if(typeof Pe>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},u:function(i,o,u,f){try{e:{var y=vt(i);i=o;for(var b,O=o=0;O<u;O++){var Y=Ie[i>>2],me=Ie[i+4>>2];i+=8;var ae=kc(y,Te,Y,me,b);if(0>ae){var Ye=-1;break e}o+=ae,typeof b<"u"&&(b+=ae)}Ye=o}return Ie[f>>2]=Ye,0}catch(ut){if(typeof Pe>"u"||ut.name!=="ErrnoError")throw ut;return ut.Ka}}},j=function(){function i(u){return j=u.exports,tt=j.I,Se(),Ar=j.Aa,mr.unshift(j.J),at--,d.monitorRunDependencies?.(at),at==0&&zr&&(u=zr,zr=null,u()),j}var o={a:yp};if(at++,d.monitorRunDependencies?.(at),d.instantiateWasm)try{return d.instantiateWasm(o,i)}catch(u){return ne(`Module.instantiateWasm callback failed with error: ${u}`),!1}return cs(o,function(u){i(u.instance)}),{}}();d._sqlite3_free=i=>(d._sqlite3_free=j.K)(i),d._sqlite3_value_text=i=>(d._sqlite3_value_text=j.L)(i);var Pc=()=>(Pc=j.M)();d._sqlite3_prepare_v2=(i,o,u,f,y)=>(d._sqlite3_prepare_v2=j.N)(i,o,u,f,y),d._sqlite3_step=i=>(d._sqlite3_step=j.O)(i),d._sqlite3_reset=i=>(d._sqlite3_reset=j.P)(i),d._sqlite3_exec=(i,o,u,f,y)=>(d._sqlite3_exec=j.Q)(i,o,u,f,y),d._sqlite3_finalize=i=>(d._sqlite3_finalize=j.R)(i),d._sqlite3_column_name=(i,o)=>(d._sqlite3_column_name=j.S)(i,o),d._sqlite3_column_text=(i,o)=>(d._sqlite3_column_text=j.T)(i,o),d._sqlite3_column_type=(i,o)=>(d._sqlite3_column_type=j.U)(i,o),d._sqlite3_errmsg=i=>(d._sqlite3_errmsg=j.V)(i),d._sqlite3_clear_bindings=i=>(d._sqlite3_clear_bindings=j.W)(i),d._sqlite3_value_blob=i=>(d._sqlite3_value_blob=j.X)(i),d._sqlite3_value_bytes=i=>(d._sqlite3_value_bytes=j.Y)(i),d._sqlite3_value_double=i=>(d._sqlite3_value_double=j.Z)(i),d._sqlite3_value_int=i=>(d._sqlite3_value_int=j._)(i),d._sqlite3_value_type=i=>(d._sqlite3_value_type=j.$)(i),d._sqlite3_result_blob=(i,o,u,f)=>(d._sqlite3_result_blob=j.aa)(i,o,u,f),d._sqlite3_result_double=(i,o)=>(d._sqlite3_result_double=j.ba)(i,o),d._sqlite3_result_error=(i,o,u)=>(d._sqlite3_result_error=j.ca)(i,o,u),d._sqlite3_result_int=(i,o)=>(d._sqlite3_result_int=j.da)(i,o),d._sqlite3_result_int64=(i,o,u)=>(d._sqlite3_result_int64=j.ea)(i,o,u),d._sqlite3_result_null=i=>(d._sqlite3_result_null=j.fa)(i),d._sqlite3_result_text=(i,o,u,f)=>(d._sqlite3_result_text=j.ga)(i,o,u,f),d._sqlite3_aggregate_context=(i,o)=>(d._sqlite3_aggregate_context=j.ha)(i,o),d._sqlite3_column_count=i=>(d._sqlite3_column_count=j.ia)(i),d._sqlite3_data_count=i=>(d._sqlite3_data_count=j.ja)(i),d._sqlite3_column_blob=(i,o)=>(d._sqlite3_column_blob=j.ka)(i,o),d._sqlite3_column_bytes=(i,o)=>(d._sqlite3_column_bytes=j.la)(i,o),d._sqlite3_column_double=(i,o)=>(d._sqlite3_column_double=j.ma)(i,o),d._sqlite3_bind_blob=(i,o,u,f,y)=>(d._sqlite3_bind_blob=j.na)(i,o,u,f,y),d._sqlite3_bind_double=(i,o,u)=>(d._sqlite3_bind_double=j.oa)(i,o,u),d._sqlite3_bind_int=(i,o,u)=>(d._sqlite3_bind_int=j.pa)(i,o,u),d._sqlite3_bind_text=(i,o,u,f,y)=>(d._sqlite3_bind_text=j.qa)(i,o,u,f,y),d._sqlite3_bind_parameter_index=(i,o)=>(d._sqlite3_bind_parameter_index=j.ra)(i,o),d._sqlite3_sql=i=>(d._sqlite3_sql=j.sa)(i),d._sqlite3_normalized_sql=i=>(d._sqlite3_normalized_sql=j.ta)(i),d._sqlite3_changes=i=>(d._sqlite3_changes=j.ua)(i),d._sqlite3_close_v2=i=>(d._sqlite3_close_v2=j.va)(i),d._sqlite3_create_function_v2=(i,o,u,f,y,b,O,Y,me)=>(d._sqlite3_create_function_v2=j.wa)(i,o,u,f,y,b,O,Y,me),d._sqlite3_open=(i,o)=>(d._sqlite3_open=j.xa)(i,o);var Ro=d._malloc=i=>(Ro=d._malloc=j.ya)(i),Mo=d._free=i=>(Mo=d._free=j.za)(i);d._RegisterExtensionFunctions=i=>(d._RegisterExtensionFunctions=j.Ba)(i);var Bc=(i,o)=>(Bc=j.Ca)(i,o),Ns=()=>(Ns=j.Da)(),gs=i=>(gs=j.Ea)(i),Zr=i=>(Zr=j.Fa)(i);d.stackAlloc=Zr,d.stackSave=Ns,d.stackRestore=gs,d.cwrap=(i,o,u,f)=>{var y=!u||u.every(b=>b==="number"||b==="boolean");return o!=="string"&&y&&!f?d["_"+i]:function(){return mp(i,o,u,arguments)}},d.addFunction=Ao,d.removeFunction=Nn,d.UTF8ToString=A,d.ALLOC_NORMAL=ko,d.allocate=So,d.allocateUTF8OnStack=ku;var Do;zr=function i(){Do||Fc(),Do||(zr=i)};function Fc(){function i(){if(!Do&&(Do=!0,d.calledRun=!0,!Gr)){if(d.noFSInit||Ac||(Ac=!0,Sc(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?ms("stdin",d.stdin):Wu("/dev/tty","/dev/stdin"),d.stdout?ms("stdout",null,d.stdout):Wu("/dev/tty","/dev/stdout"),d.stderr?ms("stderr",null,d.stderr):Wu("/dev/tty1","/dev/stderr"),wn("/dev/stdin",0),wn("/dev/stdout",1),wn("/dev/stderr",1)),yc=!1,x(mr),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var o=d.postRun.shift();ki.unshift(o)}x(ki)}}if(!(0<at)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)kr();x(qe),0<at||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),i()},1)):i())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Fc(),m}),r)};t.exports=s,t.exports.default=s})(Xf);var fg=Xf.exports;const pg=lg(fg),mg=""+new URL("sql-wasm-oXWfLHrV.wasm",import.meta.url).href,yg="sqlitevfs",Cn=new Map,wg=2048,Ng=65536;class gg{constructor(e){Z(this,"_data");Z(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const s=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(s),s.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,s=Math.min(Ng,Math.max(wg,this._data.length)),a=new Uint8Array(this._data.length+Math.max(s,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const bg=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,ac=new Promise((t,e)=>{const r=bg.open(yg,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function vg(t){const e=await ac,r=await new Promise((s,a)=>{const h=e.transaction("files","readonly").objectStore("files").get(t);h.onsuccess=()=>s(h.result),h.onerror=()=>a(h.error)});if(r&&!Cn.has(t)){const s=new gg(r.data);return Cn.set(t,s),s}else return Cn.has(t)?Cn.get(t):null}async function xg(t,e){const r=await ac;await new Promise((s,a)=>{const h=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});h.onsuccess=()=>s(!0),h.onerror=()=>a(h.error)})}async function zh(t){const e=await ac;await new Promise((r,s)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>s(l.error)})}async function Og(t,e){if(await xg(t,e),Cn.has(t)){const r=Cn.get(t);r.truncate(0),r.write(0,e)}}var Cg=class extends tc{constructor(e){super();Z(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:s,...a}=r,l=this.serializer(s);return s===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},Zf=t=>{if(ep(t)||typeof t=="string")return t;if(typeof t=="boolean")return""+t;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},qg=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,Wg=t=>{if(ep(t))return t;if(typeof t=="string"){if(t==="true")return!0;if(t==="false")return!1;if(qg.test(t))return new Date(t);if(t[0]==="{"&&t[t.length-1]==="}"||t[0]==="["&&t[t.length-1]==="]")try{return JSON.parse(t)}catch{}return t}};function ep(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var _g=class{constructor(t={}){Z(this,"transformer");Z(this,"deserializer");Z(this,"skipNodeSet");Z(this,"ctx");const{deserializer:e=Wg,serializer:r=Zf,skipNodeKind:s=[]}=t;this.transformer=new Cg(r),this.deserializer=e,s.length&&(this.skipNodeSet=new Set(s),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:this.parseRows(t.rows)}}parseRows(t){const e=[];for(const r of t){const s={};for(const[a,l]of Object.entries(r))s[a]=this.deserializer(l);e.push(s)}return e}};function Yh(t){const{logger:e,merge:r,logQueryNode:s}=t;return a=>{const{level:l,queryDurationMillis:h,query:{parameters:m,sql:N,query:d}}=a,v="__Q__",W=l==="error"?a.error:void 0;let R=N.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&m.forEach(pe=>{let Q=pe;pe instanceof Date&&(Q=pe.toLocaleString()),typeof Q=="string"&&(Q=`'${Q}'`.replace(/\?/g,v)),R=R.replace(/\?/,Q)});const B={sql:R.replace(new RegExp(v,"g"),"?"),params:m,duration:h,error:W};s&&(B.queryNode=d),e(B)}}async function Tg(t){const{rows:e}=await t.executeQuery(Tr.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function Xh(t,e){if(e)return await t.executeQuery(Tr.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(Tr.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function Ig(t){return`__pre_${t}`}function Eg(t){return typeof t=="string"&&t.startsWith("__pre_")?t.slice(6):void 0}async function kg(t,e){const r=e||`sp_${Date.now()%1e8}`;return await ot`savepoint ${ot.raw(r)}`.execute(t),{release:async()=>{await ot`release savepoint ${ot.raw(r)}`.execute(t)},rollback:async()=>{await ot`rollback to savepoint ${ot.raw(r)}`.execute(t)}}}async function Sg(t,e,r){const{release:s,rollback:a}=await kg(t,r);try{const l=await e(t);return await s(),l}catch(l){throw await a(),l}}function Ag(t){return{selectFrom:e=>t().selectFrom(e),insertInto:e=>t().insertInto(e),updateTable:e=>t().updateTable(e),deleteFrom:e=>t().deleteFrom(e)}}var Rg=class extends Error{constructor(){super("db file maybe broken")}};function Mg(t){return t.toOperationNode().kind==="SelectQueryNode"}var Dg=class{constructor(t){Z(this,"_kysely");Z(this,"trxCount",0);Z(this,"trx");Z(this,"logger");Z(this,"executor");Z(this,"serializer",Zf);const{dialect:e,logger:r,onQuery:s,plugins:a=[],serializerPluginOptions:l,executorFn:h=Ag}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new _g(l));let m;s===!0?m=Yh({logger:this.logger?.debug||console.log,merge:!0}):s&&(m=Yh(s)),this._kysely=new ro({dialect:e,log:m,plugins:a}),this.executor=h(()=>this.kysely)}get kysely(){return this.trx||this._kysely}async syncDB(t,e){try{if(e&&!await Tg(this._kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new Rg};const r=await t(this._kysely,this.logger);return this.logger?.info("table updated"),r}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await Sg(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trxCount--)):await this._kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.executor).execute():await this.kysely.executeQuery(t)}async executeTakeFirst(t){let e=t(this.executor);return Mg(e)&&(e=e.limit(1)),await e.executeTakeFirst()}precompile(t=e=>({kind:e.kind})){return this.logger?.debug?.("precompile"),{build:e=>{let r;const s=()=>r=null;return{[Symbol.dispose]:s,dispose:s,compile:a=>{if(!r){const{parameters:l,sql:h,query:m}=e(this.executor,Ig).compile();r={sql:h,query:t(m),parameters:l}}return{...r,parameters:r.parameters.map(l=>{const h=Eg(l);return h?this.serializer(a[h]):l})}}}}}}async raw(t,e){return typeof t=="string"?await this.kysely.executeQuery(Tr.raw(t,e)):await t.execute(this.kysely)}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this._kysely.destroy(),this.trx=void 0}},tp="__TIME_TRIGGER__";function Lg(t,e){const{create:r,update:s}=e?.timeTrigger||{},a={type:"date",defaultTo:tp};r===!0?t.createAt=a:r&&(t[r]=a),s===!0?t.updateAt={...a,notNull:!0}:s&&(t[s]={...a,notNull:!0});const l=e?.softDelete,h={type:"int",defaultTo:0};return l===!0?t.isDeleted=h:l&&(t[l]=h),{columns:t,...e}}function rp(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function Cl(t){return Array.isArray(t)?t:[t]}function Pg(t){return typeof t=="function"}async function Ku(t,e){await t.schema.dropTable(e).execute()}async function Zh(t,e,r){const{index:s,...a}=r,l=await np(t,e,a);await sp(t,e,l),await ip(t,e,s)}async function ip(t,e,r){for(const s of r||[]){const a=Cl(s);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function np(t,e,{columns:r,primary:s,timeTrigger:a,unique:l},h=!1){const m=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,d=t.schema.createTable(e);h&&(d=d.temporary());for(const[v,W]of Object.entries(r)){let R="text";const{type:B,notNull:pe,defaultTo:Q}=W,je=rp(B);R=je.dataType,d=d.addColumn(v,R,J=>je.isIncrements?(N=!0,m&&(m.triggerKey=v),J.autoIncrement().primaryKey()):Q===tp?(m&&pe&&(m.update=v),J.defaultTo(ot`CURRENT_TIMESTAMP`)):(pe===!0&&(J=J.notNull()),Q!==void 0&&(J=J.defaultTo(Pg(Q)?Q(ot):Q)),J))}if(!N&&s){const v=Cl(s);d=d.addPrimaryKeyConstraint(`pk#${v.join("#")}`,v)}for(const v of l||[]){const W=Cl(v);d=d.addUniqueConstraint(`un#${W.join("#")}`,W)}return await d.ifNotExists().execute(),m}async function sp(t,e,r){if(!r||!r.update)return;const{triggerKey:s,update:a}=r,l=`tgr_${e}_${a}`;await ot`create trigger if not exists ${ot.ref(l)}
after update
on ${ot.table(e)}
begin
  update ${ot.table(e)}
  set ${ot.ref(a)} = CURRENT_TIMESTAMP
  where ${ot.ref(s)} = NEW.${ot.ref(s)};
end`.execute(t)}async function Bg(t,e,r){await t.schema.alterTable(e).renameTo(r).execute()}function Fg(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,s,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:s,primary:void 0,unique:[]},h=a.matchAll(r);for(const m of h){const[,N,d,v]=m;if(N.startsWith("pk#")){const[,...W]=N.split("#");l.primary=W}else if(N.startsWith("un#")){const[,...W]=N.split("#");l.unique.push(W)}else l.columns[N]={type:d,notNull:!!v}}return l}async function Ug(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",Hf).where("name","!=",Kf).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(h=>l("name","not like",`${h}%`))))).select(["name","sql","type"]).$castTo().execute(),s={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:h}of r)l&&(h==="table"?s.existTables[a]=Fg(l):h==="index"?s.indexList.push(a):s.triggerList.push(a));return s}async function $g(t,e,r={},s){const{truncateIfExists:a=[],log:l,version:{current:h,skipSyncWhenSame:m}={},excludeTablePrefix:N,onSyncSuccess:d,onSyncFail:v}=r;if(h){if(m&&h===await Xh(t))return{ready:!0};await Xh(t,h)}const W=J=>l&&s?.debug(J),{existTables:R,indexList:B,triggerList:pe}=await Ug(t,N);W("====== update tables start ======");const Q=new Set(Array.isArray(a)?a:a?Object.keys(R):[]);return await t.transaction().execute(async J=>{for(const G of B)await J.schema.dropIndex(G).ifExists().execute();for(const G of pe)await ot`drop trigger if exists ${ot.ref(G)}`.execute(J);for(const[G,de]of Object.entries(R))if(!(G in e))W(`remove table: ${G}`),await Ku(J,G);else{W(`diff table: ${G}`);try{await je(J,G,de,e[G])}catch(Ce){throw s?.error(`fail to sync ${G}`,Ce),Ce}}for(const[G,de]of Object.entries(e))G in R||(W(`create table: ${G}`),await Zh(J,G,de))}).then(()=>(d?.(t),W("======= update tables success ======="),{ready:!0})).catch(J=>(v?.(J),W("======= update tables fail ======="),{ready:!1,error:J}));async function je(J,G,de,Ce){if(Q.has(G)){await Ku(J,G),await Zh(J,G,Ce),W("clear and sync structure");return}const{index:dt,...ne}=Ce,He=Qg(de.columns,Ce.columns);if(He.length===Object.keys(de.columns).length){W("same table structure, skip");return}W("different table structure, update");const tt=`_temp_${G}`,Gr=await np(J,tt,ne);He.length&&await J.insertInto(tt).columns(He).expression(Te=>Te.selectFrom(G).select(He)).execute(),await Ku(J,G),await Bg(J,tt,G),await ip(J,G,dt),await sp(J,G,Gr),W(`restore columns: ${He}`)}}function Qg(t,e){const r=[];for(const[s,a]of Object.entries(e))s in t&&rp(a.type).dataType===t[s].type&&(a.notNull||!1)===(t[s].notNull||!1)&&r.push(s);return r}function jg(t,e={}){const{log:r}=e;return(s,a)=>$g(s,t,e,r?a:void 0)}const Vg={test:Lg({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function op(t){const e=new Dg({dialect:t}),r=await e.syncDB(jg(Vg));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let s=0;s<10;s++)await e.transaction(async()=>{await e.transaction(async()=>{if(s>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(s=>s.selectFrom("test").selectAll()).then(async s=>(await e.destroy(),console.log(s),s))}const Jg=new ug({async database(){const t=await pg({locateFile:()=>mg});return new t.Database(await vg("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),Og("sqljs",t)},isThrottle:!0}});function Hg(){const t=Em();function e(){op(Jg).then(r=>{t.value=r})}return{result:t,run:e}}function Kg(t){return new Worker(""+new URL("sqljsWorker-CoXOC6t_.js",import.meta.url).href,{type:"module",name:t?.name})}function Gg(t){return new Worker(""+new URL("officialWasmWorker-CpxScGEA.js",import.meta.url).href,{type:"module",name:t?.name})}var zg=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let s;e?r?(s=t.get(e))&&s.splice(s.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(s=>s(...r))},once(e,r){let s=(...a)=>{r(...a),this.off(e,s)};this.on(e,s)}});function Yg(){return"locks"in navigator}async function ap(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),s=await new Promise((a,l)=>{r.onmessage=({data:h})=>{a(h)},r.onerror=h=>{h.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),s}catch{return!1}}function up(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function ed(t,e){return typeof t=="function"?t(e):t}function Xg(t){return t?new Worker(new URL(""+new URL("worker-Di1Eo8-K.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-Di0OJL7-.js",import.meta.url).href,import.meta.url))}function Zg(t){return t?new URL(""+new URL("wa-sqlite-async-CE83rzeA.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-DBHS7kZ3.wasm",import.meta.url).href,import.meta.url).href}var eb=class{constructor(t){Z(this,"config");Z(this,"worker");Z(this,"connection");Z(this,"connectionMutex",new tb);Z(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await ap():!1;this.mitt=zg(),this.worker=ed(this.config.worker||Xg,t||up()),this.worker.onmessage=({data:[e,...r]})=>{this.mitt?.emit(e,...r)},this.worker.postMessage([0,this.config.fileName,ed(this.config.url||Zg,!t),t]),await new Promise((e,r)=>{this.mitt?.once(0,(s,a)=>{a?r(a):e()})}),this.connection=new rb(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(Tr.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage([2]),new Promise((t,e)=>{this.mitt?.once(2,(r,s)=>{s?e(s):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},tb=class{constructor(){Z(this,"promise");Z(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},rb=class{constructor(t,e){Z(this,"worker");Z(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:s}=t,a=fe.is(s);return this.worker.postMessage([1,a,r,e]),new Promise((l,h)=>{!this.mitt&&h(new Error("kysely instance has been destroyed")),this.mitt.once(1,(m,N)=>{!N&&m?l(m):h(N)})})}},ib=class{constructor(t){Z(this,"config");this.config=t}createDriver(){return new eb(this.config)}createQueryCompiler(){return new Jf}createAdapter(){return new Yf}createIntrospector(t){return new Gf(t)}};const nb=new ib({fileName:"wa-sqlite-worker-test"});async function sb(){console.log("start wa-sqlite-worker test"),op(nb).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=up(),r=Yg(),s=await ap();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",s)})}const ob=st("h1",null,[Ks(" test "),st("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ks(" WASM dialect ")],-1),ab=st("br",null,null,-1),ub=st("h3",null,"see worker result in console",-1),lb=st("h3",null,[Ks(" you can explore "),st("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ks(" file using "),st("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),cb=st("br",null,null,-1),hb={class:"buttons"},db=st("br",null,null,-1),fb=st("div",null," result run in main thread: ",-1),pb=Xm({__name:"App",setup(t){const e=new Kg,{result:r,run:s}=Hg(),a=new Gg;function l(){s()}function h(){e.postMessage("")}function m(){a.postMessage("")}function N(){sb()}async function d(){try{(await window.indexedDB.databases()).forEach(R=>window.indexedDB.deleteDatabase(R.name))}catch{}}async function v(){console.clear(),await zh("sqljs"),await zh("sqljsWorker"),await d();const W=await navigator.storage?.getDirectory();try{await W.removeEntry("test.db")}catch{}try{await W.removeEntry("test.db-journal")}catch{}try{await W.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(W,R)=>(Ey(),Ay(xr,null,[ob,ab,ub,lb,cb,st("div",hb,[st("button",{onClick:R[0]||(R[0]=B=>l())}," test sqljs in main thread "),st("button",{onClick:R[1]||(R[1]=B=>h())}," test sqljs in Worker "),st("button",{onClick:R[2]||(R[2]=B=>m())}," test officialWasm in Worker "),st("button",{onClick:R[3]||(R[3]=B=>N())}," test wa-sqlite in Worker (Better Compability) "),st("button",{onClick:R[4]||(R[4]=B=>v())}," clear ")]),db,fb,st("pre",null,""+nm(qd(r))+`
  `,1)],64))}});Nw(pb).mount("#root");
