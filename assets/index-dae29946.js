var qm=Object.defineProperty;var Cm=(t,e,n)=>e in t?qm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>(Cm(t,typeof e!="symbol"?e+"":e,n),n),vl=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var i=(t,e,n)=>(vl(t,e,"read from private field"),n?n.call(t):e.get(t)),D=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,r)=>(vl(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var ge=(t,e,n)=>(vl(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function wf(t,e){const n=Object.create(null),r=t.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return e?a=>!!n[a.toLowerCase()]:a=>!!n[a]}const st={},zs=[],Xn=()=>{},Im=()=>!1,Tm=/^on[^a-z]/,nl=t=>Tm.test(t),bf=t=>t.startsWith("onUpdate:"),Ct=Object.assign,gf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Sm=Object.prototype.hasOwnProperty,Be=(t,e)=>Sm.call(t,e),qe=Array.isArray,Vs=t=>rl(t)==="[object Map]",bd=t=>rl(t)==="[object Set]",Te=t=>typeof t=="function",It=t=>typeof t=="string",Nf=t=>typeof t=="symbol",lt=t=>t!==null&&typeof t=="object",gd=t=>lt(t)&&Te(t.then)&&Te(t.catch),Nd=Object.prototype.toString,rl=t=>Nd.call(t),km=t=>rl(t).slice(8,-1),vd=t=>rl(t)==="[object Object]",vf=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Du=wf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),il=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Am=/-(\w)/g,No=il(t=>t.replace(Am,(e,n)=>n?n.toUpperCase():"")),Wm=/\B([A-Z])/g,Io=il(t=>t.replace(Wm,"-$1").toLowerCase()),_d=il(t=>t.charAt(0).toUpperCase()+t.slice(1)),_l=il(t=>t?`on${_d(t)}`:""),va=(t,e)=>!Object.is(t,e),xl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Hu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Rm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let oh;const Rl=()=>oh||(oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _f(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],a=It(r)?Mm(r):_f(r);if(a)for(const l in a)e[l]=a[l]}return e}else{if(It(t))return t;if(lt(t))return t}}const Dm=/;(?![^(]*\))/g,Pm=/:([^]+)/,Lm=/\/\*[^]*?\*\//g;function Mm(t){const e={};return t.replace(Lm,"").split(Dm).forEach(n=>{if(n){const r=n.split(Pm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xf(t){let e="";if(It(t))e=t;else if(qe(t))for(let n=0;n<t.length;n++){const r=xf(t[n]);r&&(e+=r+" ")}else if(lt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fm=wf(Bm);function xd(t){return!!t||t===""}const Um=t=>It(t)?t:t==null?"":qe(t)||lt(t)&&(t.toString===Nd||!Te(t.toString))?JSON.stringify(t,Ed,2):String(t),Ed=(t,e)=>e&&e.__v_isRef?Ed(t,e.value):Vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,a])=>(n[`${r} =>`]=a,n),{})}:bd(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!qe(e)&&!vd(e)?String(e):e;let $n;class $m{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$n,!e&&$n&&(this.index=($n.scopes||($n.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=$n;try{return $n=this,e()}finally{$n=n}}}on(){$n=this}off(){$n=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function Qm(t,e=$n){e&&e.active&&e.effects.push(t)}function jm(){return $n}const Ef=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Od=t=>(t.w&fi)>0,qd=t=>(t.n&fi)>0,zm=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=fi},Vm=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const a=e[r];Od(a)&&!qd(a)?a.delete(t):e[n++]=a,a.w&=~fi,a.n&=~fi}e.length=n}},Dl=new WeakMap;let oa=0,fi=1;const Pl=30;let Jn;const as=Symbol(""),Ll=Symbol("");class Of{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Qm(this,r)}run(){if(!this.active)return this.fn();let e=Jn,n=ui;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Jn,Jn=this,ui=!0,fi=1<<++oa,oa<=Pl?zm(this):ah(this),this.fn()}finally{oa<=Pl&&Vm(this),fi=1<<--oa,Jn=this.parent,ui=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Jn===this?this.deferStop=!0:this.active&&(ah(this),this.onStop&&this.onStop(),this.active=!1)}}function ah(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ui=!0;const Cd=[];function To(){Cd.push(ui),ui=!1}function So(){const t=Cd.pop();ui=t===void 0?!0:t}function dn(t,e,n){if(ui&&Jn){let r=Dl.get(t);r||Dl.set(t,r=new Map);let a=r.get(n);a||r.set(n,a=Ef()),Id(a)}}function Id(t,e){let n=!1;oa<=Pl?qd(t)||(t.n|=fi,n=!Od(t)):n=!t.has(Jn),n&&(t.add(Jn),Jn.deps.push(t))}function kr(t,e,n,r,a,l){const m=Dl.get(t);if(!m)return;let b=[];if(e==="clear")b=[...m.values()];else if(n==="length"&&qe(t)){const v=Number(r);m.forEach((d,T)=>{(T==="length"||T>=v)&&b.push(d)})}else switch(n!==void 0&&b.push(m.get(n)),e){case"add":qe(t)?vf(n)&&b.push(m.get("length")):(b.push(m.get(as)),Vs(t)&&b.push(m.get(Ll)));break;case"delete":qe(t)||(b.push(m.get(as)),Vs(t)&&b.push(m.get(Ll)));break;case"set":Vs(t)&&b.push(m.get(as));break}if(b.length===1)b[0]&&Ml(b[0]);else{const v=[];for(const d of b)d&&v.push(...d);Ml(Ef(v))}}function Ml(t,e){const n=qe(t)?t:[...t];for(const r of n)r.computed&&uh(r);for(const r of n)r.computed||uh(r)}function uh(t,e){(t!==Jn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Hm=wf("__proto__,__v_isRef,__isVue"),Td=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nf)),Km=qf(),Jm=qf(!1,!0),Gm=qf(!0),ch=Ym();function Ym(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ue(this);for(let l=0,m=this.length;l<m;l++)dn(r,"get",l+"");const a=r[e](...n);return a===-1||a===!1?r[e](...n.map(Ue)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){To();const r=Ue(this)[e].apply(this,n);return So(),r}}),t}function Xm(t){const e=Ue(this);return dn(e,"has",t),e.hasOwnProperty(t)}function qf(t=!1,e=!1){return function(r,a,l){if(a==="__v_isReactive")return!t;if(a==="__v_isReadonly")return t;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&l===(t?e?py:Rd:e?Wd:Ad).get(r))return r;const m=qe(r);if(!t){if(m&&Be(ch,a))return Reflect.get(ch,a,l);if(a==="hasOwnProperty")return Xm}const b=Reflect.get(r,a,l);return(Nf(a)?Td.has(a):Hm(a))||(t||dn(r,"get",a),e)?b:Vt(b)?m&&vf(a)?b:b.value:lt(b)?t?Dd(b):Tf(b):b}}const Zm=Sd(),ey=Sd(!0);function Sd(t=!1){return function(n,r,a,l){let m=n[r];if(vo(m)&&Vt(m)&&!Vt(a))return!1;if(!t&&(!Ku(a)&&!vo(a)&&(m=Ue(m),a=Ue(a)),!qe(n)&&Vt(m)&&!Vt(a)))return m.value=a,!0;const b=qe(n)&&vf(r)?Number(r)<n.length:Be(n,r),v=Reflect.set(n,r,a,l);return n===Ue(l)&&(b?va(a,m)&&kr(n,"set",r,a):kr(n,"add",r,a)),v}}function ty(t,e){const n=Be(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&kr(t,"delete",e,void 0),r}function ny(t,e){const n=Reflect.has(t,e);return(!Nf(e)||!Td.has(e))&&dn(t,"has",e),n}function ry(t){return dn(t,"iterate",qe(t)?"length":as),Reflect.ownKeys(t)}const kd={get:Km,set:Zm,deleteProperty:ty,has:ny,ownKeys:ry},iy={get:Gm,set(t,e){return!0},deleteProperty(t,e){return!0}},sy=Ct({},kd,{get:Jm,set:ey}),Cf=t=>t,sl=t=>Reflect.getPrototypeOf(t);function Ou(t,e,n=!1,r=!1){t=t.__v_raw;const a=Ue(t),l=Ue(e);n||(e!==l&&dn(a,"get",e),dn(a,"get",l));const{has:m}=sl(a),b=r?Cf:n?kf:_a;if(m.call(a,e))return b(t.get(e));if(m.call(a,l))return b(t.get(l));t!==a&&t.get(e)}function qu(t,e=!1){const n=this.__v_raw,r=Ue(n),a=Ue(t);return e||(t!==a&&dn(r,"has",t),dn(r,"has",a)),t===a?n.has(t):n.has(t)||n.has(a)}function Cu(t,e=!1){return t=t.__v_raw,!e&&dn(Ue(t),"iterate",as),Reflect.get(t,"size",t)}function lh(t){t=Ue(t);const e=Ue(this);return sl(e).has.call(e,t)||(e.add(t),kr(e,"add",t,t)),this}function fh(t,e){e=Ue(e);const n=Ue(this),{has:r,get:a}=sl(n);let l=r.call(n,t);l||(t=Ue(t),l=r.call(n,t));const m=a.call(n,t);return n.set(t,e),l?va(e,m)&&kr(n,"set",t,e):kr(n,"add",t,e),this}function hh(t){const e=Ue(this),{has:n,get:r}=sl(e);let a=n.call(e,t);a||(t=Ue(t),a=n.call(e,t)),r&&r.call(e,t);const l=e.delete(t);return a&&kr(e,"delete",t,void 0),l}function dh(){const t=Ue(this),e=t.size!==0,n=t.clear();return e&&kr(t,"clear",void 0,void 0),n}function Iu(t,e){return function(r,a){const l=this,m=l.__v_raw,b=Ue(m),v=e?Cf:t?kf:_a;return!t&&dn(b,"iterate",as),m.forEach((d,T)=>r.call(a,v(d),v(T),l))}}function Tu(t,e,n){return function(...r){const a=this.__v_raw,l=Ue(a),m=Vs(l),b=t==="entries"||t===Symbol.iterator&&m,v=t==="keys"&&m,d=a[t](...r),T=n?Cf:e?kf:_a;return!e&&dn(l,"iterate",v?Ll:as),{next(){const{value:S,done:H}=d.next();return H?{value:S,done:H}:{value:b?[T(S[0]),T(S[1])]:T(S),done:H}},[Symbol.iterator](){return this}}}}function jr(t){return function(...e){return t==="delete"?!1:this}}function oy(){const t={get(l){return Ou(this,l)},get size(){return Cu(this)},has:qu,add:lh,set:fh,delete:hh,clear:dh,forEach:Iu(!1,!1)},e={get(l){return Ou(this,l,!1,!0)},get size(){return Cu(this)},has:qu,add:lh,set:fh,delete:hh,clear:dh,forEach:Iu(!1,!0)},n={get(l){return Ou(this,l,!0)},get size(){return Cu(this,!0)},has(l){return qu.call(this,l,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!1)},r={get(l){return Ou(this,l,!0,!0)},get size(){return Cu(this,!0)},has(l){return qu.call(this,l,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Tu(l,!1,!1),n[l]=Tu(l,!0,!1),e[l]=Tu(l,!1,!0),r[l]=Tu(l,!0,!0)}),[t,n,e,r]}const[ay,uy,cy,ly]=oy();function If(t,e){const n=e?t?ly:cy:t?uy:ay;return(r,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?r:Reflect.get(Be(n,a)&&a in r?n:r,a,l)}const fy={get:If(!1,!1)},hy={get:If(!1,!0)},dy={get:If(!0,!1)},Ad=new WeakMap,Wd=new WeakMap,Rd=new WeakMap,py=new WeakMap;function my(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yy(t){return t.__v_skip||!Object.isExtensible(t)?0:my(km(t))}function Tf(t){return vo(t)?t:Sf(t,!1,kd,fy,Ad)}function wy(t){return Sf(t,!1,sy,hy,Wd)}function Dd(t){return Sf(t,!0,iy,dy,Rd)}function Sf(t,e,n,r,a){if(!lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const m=yy(t);if(m===0)return t;const b=new Proxy(t,m===2?r:n);return a.set(t,b),b}function Hs(t){return vo(t)?Hs(t.__v_raw):!!(t&&t.__v_isReactive)}function vo(t){return!!(t&&t.__v_isReadonly)}function Ku(t){return!!(t&&t.__v_isShallow)}function Pd(t){return Hs(t)||vo(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Ld(t){return Hu(t,"__v_skip",!0),t}const _a=t=>lt(t)?Tf(t):t,kf=t=>lt(t)?Dd(t):t;function Md(t){ui&&Jn&&(t=Ue(t),Id(t.dep||(t.dep=Ef())))}function Bd(t,e){t=Ue(t);const n=t.dep;n&&Ml(n)}function Vt(t){return!!(t&&t.__v_isRef===!0)}function by(t){return gy(t,!1)}function gy(t,e){return Vt(t)?t:new Ny(t,e)}class Ny{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ue(e),this._value=n?e:_a(e)}get value(){return Md(this),this._value}set value(e){const n=this.__v_isShallow||Ku(e)||vo(e);e=n?e:Ue(e),va(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:_a(e),Bd(this))}}function Fd(t){return Vt(t)?t.value:t}const vy={get:(t,e,n)=>Fd(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const a=t[e];return Vt(a)&&!Vt(n)?(a.value=n,!0):Reflect.set(t,e,n,r)}};function Ud(t){return Hs(t)?t:new Proxy(t,vy)}class _y{constructor(e,n,r,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Of(e,()=>{this._dirty||(this._dirty=!0,Bd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const e=Ue(this);return Md(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function xy(t,e,n=!1){let r,a;const l=Te(t);return l?(r=t,a=Xn):(r=t.get,a=t.set),new _y(r,a,l||!a,n)}function ci(t,e,n,r){let a;try{a=r?t(...r):t()}catch(l){ol(l,e,n)}return a}function Zn(t,e,n,r){if(Te(t)){const l=ci(t,e,n,r);return l&&gd(l)&&l.catch(m=>{ol(m,e,n)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(Zn(t[l],e,n,r));return a}function ol(t,e,n,r=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const m=e.proxy,b=n;for(;l;){const d=l.ec;if(d){for(let T=0;T<d.length;T++)if(d[T](t,m,b)===!1)return}l=l.parent}const v=e.appContext.config.errorHandler;if(v){ci(v,null,10,[t,m,b]);return}}Ey(t,n,a,r)}function Ey(t,e,n,r=!0){console.error(t)}let xa=!1,Bl=!1;const jt=[];let hr=0;const Ks=[];let xr=null,Bi=0;const $d=Promise.resolve();let Af=null;function Oy(t){const e=Af||$d;return t?e.then(this?t.bind(this):t):e}function qy(t){let e=hr+1,n=jt.length;for(;e<n;){const r=e+n>>>1;Ea(jt[r])<t?e=r+1:n=r}return e}function Wf(t){(!jt.length||!jt.includes(t,xa&&t.allowRecurse?hr+1:hr))&&(t.id==null?jt.push(t):jt.splice(qy(t.id),0,t),Qd())}function Qd(){!xa&&!Bl&&(Bl=!0,Af=$d.then(zd))}function Cy(t){const e=jt.indexOf(t);e>hr&&jt.splice(e,1)}function Iy(t){qe(t)?Ks.push(...t):(!xr||!xr.includes(t,t.allowRecurse?Bi+1:Bi))&&Ks.push(t),Qd()}function ph(t,e=xa?hr+1:0){for(;e<jt.length;e++){const n=jt[e];n&&n.pre&&(jt.splice(e,1),e--,n())}}function jd(t){if(Ks.length){const e=[...new Set(Ks)];if(Ks.length=0,xr){xr.push(...e);return}for(xr=e,xr.sort((n,r)=>Ea(n)-Ea(r)),Bi=0;Bi<xr.length;Bi++)xr[Bi]();xr=null,Bi=0}}const Ea=t=>t.id==null?1/0:t.id,Ty=(t,e)=>{const n=Ea(t)-Ea(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function zd(t){Bl=!1,xa=!0,jt.sort(Ty);const e=Xn;try{for(hr=0;hr<jt.length;hr++){const n=jt[hr];n&&n.active!==!1&&ci(n,null,14)}}finally{hr=0,jt.length=0,jd(),xa=!1,Af=null,(jt.length||Ks.length)&&zd()}}function Sy(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||st;let a=n;const l=e.startsWith("update:"),m=l&&e.slice(7);if(m&&m in r){const T=`${m==="modelValue"?"model":m}Modifiers`,{number:S,trim:H}=r[T]||st;H&&(a=n.map(te=>It(te)?te.trim():te)),S&&(a=n.map(Rm))}let b,v=r[b=_l(e)]||r[b=_l(No(e))];!v&&l&&(v=r[b=_l(Io(e))]),v&&Zn(v,t,6,a);const d=r[b+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,Zn(d,t,6,a)}}function Vd(t,e,n=!1){const r=e.emitsCache,a=r.get(t);if(a!==void 0)return a;const l=t.emits;let m={},b=!1;if(!Te(t)){const v=d=>{const T=Vd(d,e,!0);T&&(b=!0,Ct(m,T))};!n&&e.mixins.length&&e.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}return!l&&!b?(lt(t)&&r.set(t,null),null):(qe(l)?l.forEach(v=>m[v]=null):Ct(m,l),lt(t)&&r.set(t,m),m)}function al(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(t,e[0].toLowerCase()+e.slice(1))||Be(t,Io(e))||Be(t,e))}let pr=null,Hd=null;function Ju(t){const e=pr;return pr=t,Hd=t&&t.type.__scopeId||null,e}function ky(t,e=pr,n){if(!e||t._n)return t;const r=(...a)=>{r._d&&Eh(-1);const l=Ju(e);let m;try{m=t(...a)}finally{Ju(l),r._d&&Eh(1)}return m};return r._n=!0,r._c=!0,r._d=!0,r}function El(t){const{type:e,vnode:n,proxy:r,withProxy:a,props:l,propsOptions:[m],slots:b,attrs:v,emit:d,render:T,renderCache:S,data:H,setupState:te,ctx:oe,inheritAttrs:g}=t;let O,N;const C=Ju(t);try{if(n.shapeFlag&4){const V=a||r;O=lr(T.call(V,V,S,l,te,H,oe)),N=v}else{const V=e;O=lr(V.length>1?V(l,{attrs:v,slots:b,emit:d}):V(l,null)),N=e.props?v:Ay(v)}}catch(V){la.length=0,ol(V,t,1),O=us(Oa)}let R=O;if(N&&g!==!1){const V=Object.keys(N),{shapeFlag:Ee}=R;V.length&&Ee&7&&(m&&V.some(bf)&&(N=Wy(N,m)),R=_o(R,N))}return n.dirs&&(R=_o(R),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&(R.transition=n.transition),O=R,Ju(C),O}const Ay=t=>{let e;for(const n in t)(n==="class"||n==="style"||nl(n))&&((e||(e={}))[n]=t[n]);return e},Wy=(t,e)=>{const n={};for(const r in t)(!bf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ry(t,e,n){const{props:r,children:a,component:l}=t,{props:m,children:b,patchFlag:v}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return r?mh(r,m,d):!!m;if(v&8){const T=e.dynamicProps;for(let S=0;S<T.length;S++){const H=T[S];if(m[H]!==r[H]&&!al(d,H))return!0}}}else return(a||b)&&(!b||!b.$stable)?!0:r===m?!1:r?m?mh(r,m,d):!0:!!m;return!1}function mh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let a=0;a<r.length;a++){const l=r[a];if(e[l]!==t[l]&&!al(n,l))return!0}return!1}function Dy({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Py=t=>t.__isSuspense;function Ly(t,e){e&&e.pendingBranch?qe(t)?e.effects.push(...t):e.effects.push(t):Iy(t)}const Su={};function Ol(t,e,n){return Kd(t,e,n)}function Kd(t,e,{immediate:n,deep:r,flush:a,onTrack:l,onTrigger:m}=st){var b;const v=jm()===((b=zt)==null?void 0:b.scope)?zt:null;let d,T=!1,S=!1;if(Vt(t)?(d=()=>t.value,T=Ku(t)):Hs(t)?(d=()=>t,r=!0):qe(t)?(S=!0,T=t.some(V=>Hs(V)||Ku(V)),d=()=>t.map(V=>{if(Vt(V))return V.value;if(Hs(V))return Ms(V);if(Te(V))return ci(V,v,2)})):Te(t)?e?d=()=>ci(t,v,2):d=()=>{if(!(v&&v.isUnmounted))return H&&H(),Zn(t,v,3,[te])}:d=Xn,e&&r){const V=d;d=()=>Ms(V())}let H,te=V=>{H=C.onStop=()=>{ci(V,v,4)}},oe;if(Ia)if(te=Xn,e?n&&Zn(e,v,3,[d(),S?[]:void 0,te]):d(),a==="sync"){const V=Dw();oe=V.__watcherHandles||(V.__watcherHandles=[])}else return Xn;let g=S?new Array(t.length).fill(Su):Su;const O=()=>{if(C.active)if(e){const V=C.run();(r||T||(S?V.some((Ee,ae)=>va(Ee,g[ae])):va(V,g)))&&(H&&H(),Zn(e,v,3,[V,g===Su?void 0:S&&g[0]===Su?[]:g,te]),g=V)}else C.run()};O.allowRecurse=!!e;let N;a==="sync"?N=O:a==="post"?N=()=>un(O,v&&v.suspense):(O.pre=!0,v&&(O.id=v.uid),N=()=>Wf(O));const C=new Of(d,N);e?n?O():g=C.run():a==="post"?un(C.run.bind(C),v&&v.suspense):C.run();const R=()=>{C.stop(),v&&v.scope&&gf(v.scope.effects,C)};return oe&&oe.push(R),R}function My(t,e,n){const r=this.proxy,a=It(t)?t.includes(".")?Jd(r,t):()=>r[t]:t.bind(r,r);let l;Te(e)?l=e:(l=e.handler,n=e);const m=zt;xo(this);const b=Kd(a,l.bind(r),n);return m?xo(m):cs(),b}function Jd(t,e){const n=e.split(".");return()=>{let r=t;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function Ms(t,e){if(!lt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Vt(t))Ms(t.value,e);else if(qe(t))for(let n=0;n<t.length;n++)Ms(t[n],e);else if(bd(t)||Vs(t))t.forEach(n=>{Ms(n,e)});else if(vd(t))for(const n in t)Ms(t[n],e);return t}function Pi(t,e,n,r){const a=t.dirs,l=e&&e.dirs;for(let m=0;m<a.length;m++){const b=a[m];l&&(b.oldValue=l[m].value);let v=b.dir[r];v&&(To(),Zn(v,n,8,[t.el,b,t,e]),So())}}function By(t,e){return Te(t)?(()=>Ct({name:t.name},e,{setup:t}))():t}const Pu=t=>!!t.type.__asyncLoader,Gd=t=>t.type.__isKeepAlive;function Fy(t,e){Yd(t,"a",e)}function Uy(t,e){Yd(t,"da",e)}function Yd(t,e,n=zt){const r=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(ul(e,r,n),n){let a=n.parent;for(;a&&a.parent;)Gd(a.parent.vnode)&&$y(r,e,n,a),a=a.parent}}function $y(t,e,n,r){const a=ul(e,t,r,!0);Xd(()=>{gf(r[e],a)},n)}function ul(t,e,n=zt,r=!1){if(n){const a=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...m)=>{if(n.isUnmounted)return;To(),xo(n);const b=Zn(e,n,t,m);return cs(),So(),b});return r?a.unshift(l):a.push(l),l}}const Rr=t=>(e,n=zt)=>(!Ia||t==="sp")&&ul(t,(...r)=>e(...r),n),Qy=Rr("bm"),jy=Rr("m"),zy=Rr("bu"),Vy=Rr("u"),Hy=Rr("bum"),Xd=Rr("um"),Ky=Rr("sp"),Jy=Rr("rtg"),Gy=Rr("rtc");function Yy(t,e=zt){ul("ec",t,e)}const Xy=Symbol.for("v-ndc"),Fl=t=>t?up(t)?Mf(t)||t.proxy:Fl(t.parent):null,ca=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fl(t.parent),$root:t=>Fl(t.root),$emit:t=>t.emit,$options:t=>Rf(t),$forceUpdate:t=>t.f||(t.f=()=>Wf(t.update)),$nextTick:t=>t.n||(t.n=Oy.bind(t.proxy)),$watch:t=>My.bind(t)}),ql=(t,e)=>t!==st&&!t.__isScriptSetup&&Be(t,e),Zy={get({_:t},e){const{ctx:n,setupState:r,data:a,props:l,accessCache:m,type:b,appContext:v}=t;let d;if(e[0]!=="$"){const te=m[e];if(te!==void 0)switch(te){case 1:return r[e];case 2:return a[e];case 4:return n[e];case 3:return l[e]}else{if(ql(r,e))return m[e]=1,r[e];if(a!==st&&Be(a,e))return m[e]=2,a[e];if((d=t.propsOptions[0])&&Be(d,e))return m[e]=3,l[e];if(n!==st&&Be(n,e))return m[e]=4,n[e];Ul&&(m[e]=0)}}const T=ca[e];let S,H;if(T)return e==="$attrs"&&dn(t,"get",e),T(t);if((S=b.__cssModules)&&(S=S[e]))return S;if(n!==st&&Be(n,e))return m[e]=4,n[e];if(H=v.config.globalProperties,Be(H,e))return H[e]},set({_:t},e,n){const{data:r,setupState:a,ctx:l}=t;return ql(a,e)?(a[e]=n,!0):r!==st&&Be(r,e)?(r[e]=n,!0):Be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:a,propsOptions:l}},m){let b;return!!n[m]||t!==st&&Be(t,m)||ql(e,m)||(b=l[0])&&Be(b,m)||Be(r,m)||Be(ca,m)||Be(a.config.globalProperties,m)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function yh(t){return qe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ul=!0;function ew(t){const e=Rf(t),n=t.proxy,r=t.ctx;Ul=!1,e.beforeCreate&&wh(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:m,watch:b,provide:v,inject:d,created:T,beforeMount:S,mounted:H,beforeUpdate:te,updated:oe,activated:g,deactivated:O,beforeDestroy:N,beforeUnmount:C,destroyed:R,unmounted:V,render:Ee,renderTracked:ae,renderTriggered:Ce,errorCaptured:Tt,serverPrefetch:Wn,expose:pn,inheritAttrs:Rn,components:mn,directives:et,filters:en}=e;if(d&&tw(d,r,null),m)for(const pe in m){const Oe=m[pe];Te(Oe)&&(r[pe]=Oe.bind(n))}if(a){const pe=a.call(n,n);lt(pe)&&(t.data=Tf(pe))}if(Ul=!0,l)for(const pe in l){const Oe=l[pe],rt=Te(Oe)?Oe.bind(n,n):Te(Oe.get)?Oe.get.bind(n,n):Xn,de=!Te(Oe)&&Te(Oe.set)?Oe.set.bind(n):Xn,ke=Ww({get:rt,set:de});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>ke.value,set:St=>ke.value=St})}if(b)for(const pe in b)Zd(b[pe],r,n,pe);if(v){const pe=Te(v)?v.call(n):v;Reflect.ownKeys(pe).forEach(Oe=>{aw(Oe,pe[Oe])})}T&&wh(T,t,"c");function ft(pe,Oe){qe(Oe)?Oe.forEach(rt=>pe(rt.bind(n))):Oe&&pe(Oe.bind(n))}if(ft(Qy,S),ft(jy,H),ft(zy,te),ft(Vy,oe),ft(Fy,g),ft(Uy,O),ft(Yy,Tt),ft(Gy,ae),ft(Jy,Ce),ft(Hy,C),ft(Xd,V),ft(Ky,Wn),qe(pn))if(pn.length){const pe=t.exposed||(t.exposed={});pn.forEach(Oe=>{Object.defineProperty(pe,Oe,{get:()=>n[Oe],set:rt=>n[Oe]=rt})})}else t.exposed||(t.exposed={});Ee&&t.render===Xn&&(t.render=Ee),Rn!=null&&(t.inheritAttrs=Rn),mn&&(t.components=mn),et&&(t.directives=et)}function tw(t,e,n=Xn){qe(t)&&(t=$l(t));for(const r in t){const a=t[r];let l;lt(a)?"default"in a?l=Lu(a.from||r,a.default,!0):l=Lu(a.from||r):l=Lu(a),Vt(l)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:m=>l.value=m}):e[r]=l}}function wh(t,e,n){Zn(qe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Zd(t,e,n,r){const a=r.includes(".")?Jd(n,r):()=>n[r];if(It(t)){const l=e[t];Te(l)&&Ol(a,l)}else if(Te(t))Ol(a,t.bind(n));else if(lt(t))if(qe(t))t.forEach(l=>Zd(l,e,n,r));else{const l=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(l)&&Ol(a,l,t)}}function Rf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:m}}=t.appContext,b=l.get(e);let v;return b?v=b:!a.length&&!n&&!r?v=e:(v={},a.length&&a.forEach(d=>Gu(v,d,m,!0)),Gu(v,e,m)),lt(e)&&l.set(e,v),v}function Gu(t,e,n,r=!1){const{mixins:a,extends:l}=e;l&&Gu(t,l,n,!0),a&&a.forEach(m=>Gu(t,m,n,!0));for(const m in e)if(!(r&&m==="expose")){const b=nw[m]||n&&n[m];t[m]=b?b(t[m],e[m]):e[m]}return t}const nw={data:bh,props:gh,emits:gh,methods:aa,computed:aa,beforeCreate:Jt,created:Jt,beforeMount:Jt,mounted:Jt,beforeUpdate:Jt,updated:Jt,beforeDestroy:Jt,beforeUnmount:Jt,destroyed:Jt,unmounted:Jt,activated:Jt,deactivated:Jt,errorCaptured:Jt,serverPrefetch:Jt,components:aa,directives:aa,watch:iw,provide:bh,inject:rw};function bh(t,e){return e?t?function(){return Ct(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function rw(t,e){return aa($l(t),$l(e))}function $l(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Jt(t,e){return t?[...new Set([].concat(t,e))]:e}function aa(t,e){return t?Ct(Object.create(null),t,e):e}function gh(t,e){return t?qe(t)&&qe(e)?[...new Set([...t,...e])]:Ct(Object.create(null),yh(t),yh(e??{})):e}function iw(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const r in e)n[r]=Jt(t[r],e[r]);return n}function ep(){return{app:null,config:{isNativeTag:Im,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sw=0;function ow(t,e){return function(r,a=null){Te(r)||(r=Ct({},r)),a!=null&&!lt(a)&&(a=null);const l=ep(),m=new Set;let b=!1;const v=l.app={_uid:sw++,_component:r,_props:a,_container:null,_context:l,_instance:null,version:Pw,get config(){return l.config},set config(d){},use(d,...T){return m.has(d)||(d&&Te(d.install)?(m.add(d),d.install(v,...T)):Te(d)&&(m.add(d),d(v,...T))),v},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),v},component(d,T){return T?(l.components[d]=T,v):l.components[d]},directive(d,T){return T?(l.directives[d]=T,v):l.directives[d]},mount(d,T,S){if(!b){const H=us(r,a);return H.appContext=l,T&&e?e(H,d):t(H,d,S),b=!0,v._container=d,d.__vue_app__=v,Mf(H.component)||H.component.proxy}},unmount(){b&&(t(null,v._container),delete v._container.__vue_app__)},provide(d,T){return l.provides[d]=T,v},runWithContext(d){Yu=v;try{return d()}finally{Yu=null}}};return v}}let Yu=null;function aw(t,e){if(zt){let n=zt.provides;const r=zt.parent&&zt.parent.provides;r===n&&(n=zt.provides=Object.create(r)),n[t]=e}}function Lu(t,e,n=!1){const r=zt||pr;if(r||Yu){const a=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Yu._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return n&&Te(e)?e.call(r&&r.proxy):e}}function uw(t,e,n,r=!1){const a={},l={};Hu(l,ll,1),t.propsDefaults=Object.create(null),tp(t,e,a,l);for(const m in t.propsOptions[0])m in a||(a[m]=void 0);n?t.props=r?a:wy(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function cw(t,e,n,r){const{props:a,attrs:l,vnode:{patchFlag:m}}=t,b=Ue(a),[v]=t.propsOptions;let d=!1;if((r||m>0)&&!(m&16)){if(m&8){const T=t.vnode.dynamicProps;for(let S=0;S<T.length;S++){let H=T[S];if(al(t.emitsOptions,H))continue;const te=e[H];if(v)if(Be(l,H))te!==l[H]&&(l[H]=te,d=!0);else{const oe=No(H);a[oe]=Ql(v,b,oe,te,t,!1)}else te!==l[H]&&(l[H]=te,d=!0)}}}else{tp(t,e,a,l)&&(d=!0);let T;for(const S in b)(!e||!Be(e,S)&&((T=Io(S))===S||!Be(e,T)))&&(v?n&&(n[S]!==void 0||n[T]!==void 0)&&(a[S]=Ql(v,b,S,void 0,t,!0)):delete a[S]);if(l!==b)for(const S in l)(!e||!Be(e,S))&&(delete l[S],d=!0)}d&&kr(t,"set","$attrs")}function tp(t,e,n,r){const[a,l]=t.propsOptions;let m=!1,b;if(e)for(let v in e){if(Du(v))continue;const d=e[v];let T;a&&Be(a,T=No(v))?!l||!l.includes(T)?n[T]=d:(b||(b={}))[T]=d:al(t.emitsOptions,v)||(!(v in r)||d!==r[v])&&(r[v]=d,m=!0)}if(l){const v=Ue(n),d=b||st;for(let T=0;T<l.length;T++){const S=l[T];n[S]=Ql(a,v,S,d[S],t,!Be(d,S))}}return m}function Ql(t,e,n,r,a,l){const m=t[n];if(m!=null){const b=Be(m,"default");if(b&&r===void 0){const v=m.default;if(m.type!==Function&&!m.skipFactory&&Te(v)){const{propsDefaults:d}=a;n in d?r=d[n]:(xo(a),r=d[n]=v.call(null,e),cs())}else r=v}m[0]&&(l&&!b?r=!1:m[1]&&(r===""||r===Io(n))&&(r=!0))}return r}function np(t,e,n=!1){const r=e.propsCache,a=r.get(t);if(a)return a;const l=t.props,m={},b=[];let v=!1;if(!Te(t)){const T=S=>{v=!0;const[H,te]=np(S,e,!0);Ct(m,H),te&&b.push(...te)};!n&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!l&&!v)return lt(t)&&r.set(t,zs),zs;if(qe(l))for(let T=0;T<l.length;T++){const S=No(l[T]);Nh(S)&&(m[S]=st)}else if(l)for(const T in l){const S=No(T);if(Nh(S)){const H=l[T],te=m[S]=qe(H)||Te(H)?{type:H}:Ct({},H);if(te){const oe=xh(Boolean,te.type),g=xh(String,te.type);te[0]=oe>-1,te[1]=g<0||oe<g,(oe>-1||Be(te,"default"))&&b.push(S)}}}const d=[m,b];return lt(t)&&r.set(t,d),d}function Nh(t){return t[0]!=="$"}function vh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function _h(t,e){return vh(t)===vh(e)}function xh(t,e){return qe(e)?e.findIndex(n=>_h(n,t)):Te(e)&&_h(e,t)?0:-1}const rp=t=>t[0]==="_"||t==="$stable",Df=t=>qe(t)?t.map(lr):[lr(t)],lw=(t,e,n)=>{if(e._n)return e;const r=ky((...a)=>Df(e(...a)),n);return r._c=!1,r},ip=(t,e,n)=>{const r=t._ctx;for(const a in t){if(rp(a))continue;const l=t[a];if(Te(l))e[a]=lw(a,l,r);else if(l!=null){const m=Df(l);e[a]=()=>m}}},sp=(t,e)=>{const n=Df(e);t.slots.default=()=>n},fw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ue(e),Hu(e,"_",n)):ip(e,t.slots={})}else t.slots={},e&&sp(t,e);Hu(t.slots,ll,1)},hw=(t,e,n)=>{const{vnode:r,slots:a}=t;let l=!0,m=st;if(r.shapeFlag&32){const b=e._;b?n&&b===1?l=!1:(Ct(a,e),!n&&b===1&&delete a._):(l=!e.$stable,ip(e,a)),m=e}else e&&(sp(t,e),m={default:1});if(l)for(const b in a)!rp(b)&&!(b in m)&&delete a[b]};function jl(t,e,n,r,a=!1){if(qe(t)){t.forEach((H,te)=>jl(H,e&&(qe(e)?e[te]:e),n,r,a));return}if(Pu(r)&&!a)return;const l=r.shapeFlag&4?Mf(r.component)||r.component.proxy:r.el,m=a?null:l,{i:b,r:v}=t,d=e&&e.r,T=b.refs===st?b.refs={}:b.refs,S=b.setupState;if(d!=null&&d!==v&&(It(d)?(T[d]=null,Be(S,d)&&(S[d]=null)):Vt(d)&&(d.value=null)),Te(v))ci(v,b,12,[m,T]);else{const H=It(v),te=Vt(v);if(H||te){const oe=()=>{if(t.f){const g=H?Be(S,v)?S[v]:T[v]:v.value;a?qe(g)&&gf(g,l):qe(g)?g.includes(l)||g.push(l):H?(T[v]=[l],Be(S,v)&&(S[v]=T[v])):(v.value=[l],t.k&&(T[t.k]=v.value))}else H?(T[v]=m,Be(S,v)&&(S[v]=m)):te&&(v.value=m,t.k&&(T[t.k]=m))};m?(oe.id=-1,un(oe,n)):oe()}}}const un=Ly;function dw(t){return pw(t)}function pw(t,e){const n=Rl();n.__VUE__=!0;const{insert:r,remove:a,patchProp:l,createElement:m,createText:b,createComment:v,setText:d,setElementText:T,parentNode:S,nextSibling:H,setScopeId:te=Xn,insertStaticContent:oe}=t,g=(x,q,W,M=null,K=null,Z=null,U=!1,z=null,ne=!!q.dynamicChildren)=>{if(x===q)return;x&&!ra(x,q)&&(M=fe(x),St(x,K,Z,!0),x=null),q.patchFlag===-2&&(ne=!1,q.dynamicChildren=null);const{type:J,ref:ce,shapeFlag:se}=q;switch(J){case cl:O(x,q,W,M);break;case Oa:N(x,q,W,M);break;case Cl:x==null&&C(q,W,M,U);break;case cr:mn(x,q,W,M,K,Z,U,z,ne);break;default:se&1?Ee(x,q,W,M,K,Z,U,z,ne):se&6?et(x,q,W,M,K,Z,U,z,ne):(se&64||se&128)&&J.process(x,q,W,M,K,Z,U,z,ne,Dn)}ce!=null&&K&&jl(ce,x&&x.ref,Z,q||x,!q)},O=(x,q,W,M)=>{if(x==null)r(q.el=b(q.children),W,M);else{const K=q.el=x.el;q.children!==x.children&&d(K,q.children)}},N=(x,q,W,M)=>{x==null?r(q.el=v(q.children||""),W,M):q.el=x.el},C=(x,q,W,M)=>{[x.el,x.anchor]=oe(x.children,q,W,M,x.el,x.anchor)},R=({el:x,anchor:q},W,M)=>{let K;for(;x&&x!==q;)K=H(x),r(x,W,M),x=K;r(q,W,M)},V=({el:x,anchor:q})=>{let W;for(;x&&x!==q;)W=H(x),a(x),x=W;a(q)},Ee=(x,q,W,M,K,Z,U,z,ne)=>{U=U||q.type==="svg",x==null?ae(q,W,M,K,Z,U,z,ne):Wn(x,q,K,Z,U,z,ne)},ae=(x,q,W,M,K,Z,U,z)=>{let ne,J;const{type:ce,props:se,shapeFlag:ue,transition:me,dirs:ve}=x;if(ne=x.el=m(x.type,Z,se&&se.is,se),ue&8?T(ne,x.children):ue&16&&Tt(x.children,ne,null,M,K,Z&&ce!=="foreignObject",U,z),ve&&Pi(x,null,M,"created"),Ce(ne,x,x.scopeId,U,M),se){for(const Re in se)Re!=="value"&&!Du(Re)&&l(ne,Re,null,se[Re],Z,x.children,M,K,nn);"value"in se&&l(ne,"value",null,se.value),(J=se.onVnodeBeforeMount)&&rr(J,M,x)}ve&&Pi(x,null,M,"beforeMount");const $e=(!K||K&&!K.pendingBranch)&&me&&!me.persisted;$e&&me.beforeEnter(ne),r(ne,q,W),((J=se&&se.onVnodeMounted)||$e||ve)&&un(()=>{J&&rr(J,M,x),$e&&me.enter(ne),ve&&Pi(x,null,M,"mounted")},K)},Ce=(x,q,W,M,K)=>{if(W&&te(x,W),M)for(let Z=0;Z<M.length;Z++)te(x,M[Z]);if(K){let Z=K.subTree;if(q===Z){const U=K.vnode;Ce(x,U,U.scopeId,U.slotScopeIds,K.parent)}}},Tt=(x,q,W,M,K,Z,U,z,ne=0)=>{for(let J=ne;J<x.length;J++){const ce=x[J]=z?Kr(x[J]):lr(x[J]);g(null,ce,q,W,M,K,Z,U,z)}},Wn=(x,q,W,M,K,Z,U)=>{const z=q.el=x.el;let{patchFlag:ne,dynamicChildren:J,dirs:ce}=q;ne|=x.patchFlag&16;const se=x.props||st,ue=q.props||st;let me;W&&Li(W,!1),(me=ue.onVnodeBeforeUpdate)&&rr(me,W,q,x),ce&&Pi(q,x,W,"beforeUpdate"),W&&Li(W,!0);const ve=K&&q.type!=="foreignObject";if(J?pn(x.dynamicChildren,J,z,W,M,ve,Z):U||Oe(x,q,z,null,W,M,ve,Z,!1),ne>0){if(ne&16)Rn(z,q,se,ue,W,M,K);else if(ne&2&&se.class!==ue.class&&l(z,"class",null,ue.class,K),ne&4&&l(z,"style",se.style,ue.style,K),ne&8){const $e=q.dynamicProps;for(let Re=0;Re<$e.length;Re++){const tt=$e[Re],he=se[tt],wn=ue[tt];(wn!==he||tt==="value")&&l(z,tt,he,wn,K,x.children,W,M,nn)}}ne&1&&x.children!==q.children&&T(z,q.children)}else!U&&J==null&&Rn(z,q,se,ue,W,M,K);((me=ue.onVnodeUpdated)||ce)&&un(()=>{me&&rr(me,W,q,x),ce&&Pi(q,x,W,"updated")},M)},pn=(x,q,W,M,K,Z,U)=>{for(let z=0;z<q.length;z++){const ne=x[z],J=q[z],ce=ne.el&&(ne.type===cr||!ra(ne,J)||ne.shapeFlag&70)?S(ne.el):W;g(ne,J,ce,null,M,K,Z,U,!0)}},Rn=(x,q,W,M,K,Z,U)=>{if(W!==M){if(W!==st)for(const z in W)!Du(z)&&!(z in M)&&l(x,z,W[z],null,U,q.children,K,Z,nn);for(const z in M){if(Du(z))continue;const ne=M[z],J=W[z];ne!==J&&z!=="value"&&l(x,z,J,ne,U,q.children,K,Z,nn)}"value"in M&&l(x,"value",W.value,M.value)}},mn=(x,q,W,M,K,Z,U,z,ne)=>{const J=q.el=x?x.el:b(""),ce=q.anchor=x?x.anchor:b("");let{patchFlag:se,dynamicChildren:ue,slotScopeIds:me}=q;me&&(z=z?z.concat(me):me),x==null?(r(J,W,M),r(ce,W,M),Tt(q.children,W,ce,K,Z,U,z,ne)):se>0&&se&64&&ue&&x.dynamicChildren?(pn(x.dynamicChildren,ue,W,K,Z,U,z),(q.key!=null||K&&q===K.subTree)&&op(x,q,!0)):Oe(x,q,W,ce,K,Z,U,z,ne)},et=(x,q,W,M,K,Z,U,z,ne)=>{q.slotScopeIds=z,x==null?q.shapeFlag&512?K.ctx.activate(q,W,M,U,ne):en(q,W,M,K,Z,U,ne):tn(x,q,ne)},en=(x,q,W,M,K,Z,U)=>{const z=x.component=Cw(x,M,K);if(Gd(x)&&(z.ctx.renderer=Dn),Iw(z),z.asyncDep){if(K&&K.registerDep(z,ft),!x.el){const ne=z.subTree=us(Oa);N(null,ne,q,W)}return}ft(z,x,q,W,K,Z,U)},tn=(x,q,W)=>{const M=q.component=x.component;if(Ry(x,q,W))if(M.asyncDep&&!M.asyncResolved){pe(M,q,W);return}else M.next=q,Cy(M.update),M.update();else q.el=x.el,M.vnode=q},ft=(x,q,W,M,K,Z,U)=>{const z=()=>{if(x.isMounted){let{next:ce,bu:se,u:ue,parent:me,vnode:ve}=x,$e=ce,Re;Li(x,!1),ce?(ce.el=ve.el,pe(x,ce,U)):ce=ve,se&&xl(se),(Re=ce.props&&ce.props.onVnodeBeforeUpdate)&&rr(Re,me,ce,ve),Li(x,!0);const tt=El(x),he=x.subTree;x.subTree=tt,g(he,tt,S(he.el),fe(he),x,K,Z),ce.el=tt.el,$e===null&&Dy(x,tt.el),ue&&un(ue,K),(Re=ce.props&&ce.props.onVnodeUpdated)&&un(()=>rr(Re,me,ce,ve),K)}else{let ce;const{el:se,props:ue}=q,{bm:me,m:ve,parent:$e}=x,Re=Pu(q);if(Li(x,!1),me&&xl(me),!Re&&(ce=ue&&ue.onVnodeBeforeMount)&&rr(ce,$e,q),Li(x,!0),se&&ze){const tt=()=>{x.subTree=El(x),ze(se,x.subTree,x,K,null)};Re?q.type.__asyncLoader().then(()=>!x.isUnmounted&&tt()):tt()}else{const tt=x.subTree=El(x);g(null,tt,W,M,x,K,Z),q.el=tt.el}if(ve&&un(ve,K),!Re&&(ce=ue&&ue.onVnodeMounted)){const tt=q;un(()=>rr(ce,$e,tt),K)}(q.shapeFlag&256||$e&&Pu($e.vnode)&&$e.vnode.shapeFlag&256)&&x.a&&un(x.a,K),x.isMounted=!0,q=W=M=null}},ne=x.effect=new Of(z,()=>Wf(J),x.scope),J=x.update=()=>ne.run();J.id=x.uid,Li(x,!0),J()},pe=(x,q,W)=>{q.component=x;const M=x.vnode.props;x.vnode=q,x.next=null,cw(x,q.props,M,W),hw(x,q.children,W),To(),ph(),So()},Oe=(x,q,W,M,K,Z,U,z,ne=!1)=>{const J=x&&x.children,ce=x?x.shapeFlag:0,se=q.children,{patchFlag:ue,shapeFlag:me}=q;if(ue>0){if(ue&128){de(J,se,W,M,K,Z,U,z,ne);return}else if(ue&256){rt(J,se,W,M,K,Z,U,z,ne);return}}me&8?(ce&16&&nn(J,K,Z),se!==J&&T(W,se)):ce&16?me&16?de(J,se,W,M,K,Z,U,z,ne):nn(J,K,Z,!0):(ce&8&&T(W,""),me&16&&Tt(se,W,M,K,Z,U,z,ne))},rt=(x,q,W,M,K,Z,U,z,ne)=>{x=x||zs,q=q||zs;const J=x.length,ce=q.length,se=Math.min(J,ce);let ue;for(ue=0;ue<se;ue++){const me=q[ue]=ne?Kr(q[ue]):lr(q[ue]);g(x[ue],me,W,null,K,Z,U,z,ne)}J>ce?nn(x,K,Z,!0,!1,se):Tt(q,W,M,K,Z,U,z,ne,se)},de=(x,q,W,M,K,Z,U,z,ne)=>{let J=0;const ce=q.length;let se=x.length-1,ue=ce-1;for(;J<=se&&J<=ue;){const me=x[J],ve=q[J]=ne?Kr(q[J]):lr(q[J]);if(ra(me,ve))g(me,ve,W,null,K,Z,U,z,ne);else break;J++}for(;J<=se&&J<=ue;){const me=x[se],ve=q[ue]=ne?Kr(q[ue]):lr(q[ue]);if(ra(me,ve))g(me,ve,W,null,K,Z,U,z,ne);else break;se--,ue--}if(J>se){if(J<=ue){const me=ue+1,ve=me<ce?q[me].el:M;for(;J<=ue;)g(null,q[J]=ne?Kr(q[J]):lr(q[J]),W,ve,K,Z,U,z,ne),J++}}else if(J>ue)for(;J<=se;)St(x[J],K,Z,!0),J++;else{const me=J,ve=J,$e=new Map;for(J=ve;J<=ue;J++){const le=q[J]=ne?Kr(q[J]):lr(q[J]);le.key!=null&&$e.set(le.key,J)}let Re,tt=0;const he=ue-ve+1;let wn=!1,wi=0;const Ft=new Array(he);for(J=0;J<he;J++)Ft[J]=0;for(J=me;J<=se;J++){const le=x[J];if(tt>=he){St(le,K,Z,!0);continue}let kt;if(le.key!=null)kt=$e.get(le.key);else for(Re=ve;Re<=ue;Re++)if(Ft[Re-ve]===0&&ra(le,q[Re])){kt=Re;break}kt===void 0?St(le,K,Z,!0):(Ft[kt-ve]=J+1,kt>=wi?wi=kt:wn=!0,g(le,q[kt],W,null,K,Z,U,z,ne),tt++)}const ps=wn?mw(Ft):zs;for(Re=ps.length-1,J=he-1;J>=0;J--){const le=ve+J,kt=q[le],ee=le+1<ce?q[le+1].el:M;Ft[J]===0?g(null,kt,W,ee,K,Z,U,z,ne):wn&&(Re<0||J!==ps[Re]?ke(kt,W,ee,2):Re--)}}},ke=(x,q,W,M,K=null)=>{const{el:Z,type:U,transition:z,children:ne,shapeFlag:J}=x;if(J&6){ke(x.component.subTree,q,W,M);return}if(J&128){x.suspense.move(q,W,M);return}if(J&64){U.move(x,q,W,Dn);return}if(U===cr){r(Z,q,W);for(let se=0;se<ne.length;se++)ke(ne[se],q,W,M);r(x.anchor,q,W);return}if(U===Cl){R(x,q,W);return}if(M!==2&&J&1&&z)if(M===0)z.beforeEnter(Z),r(Z,q,W),un(()=>z.enter(Z),K);else{const{leave:se,delayLeave:ue,afterLeave:me}=z,ve=()=>r(Z,q,W),$e=()=>{se(Z,()=>{ve(),me&&me()})};ue?ue(Z,ve,$e):$e()}else r(Z,q,W)},St=(x,q,W,M=!1,K=!1)=>{const{type:Z,props:U,ref:z,children:ne,dynamicChildren:J,shapeFlag:ce,patchFlag:se,dirs:ue}=x;if(z!=null&&jl(z,null,W,x,!0),ce&256){q.ctx.deactivate(x);return}const me=ce&1&&ue,ve=!Pu(x);let $e;if(ve&&($e=U&&U.onVnodeBeforeUnmount)&&rr($e,q,x),ce&6)yn(x.component,W,M);else{if(ce&128){x.suspense.unmount(W,M);return}me&&Pi(x,null,q,"beforeUnmount"),ce&64?x.type.remove(x,q,W,K,Dn,M):J&&(Z!==cr||se>0&&se&64)?nn(J,q,W,!1,!0):(Z===cr&&se&384||!K&&ce&16)&&nn(ne,q,W),M&&gr(x)}(ve&&($e=U&&U.onVnodeUnmounted)||me)&&un(()=>{$e&&rr($e,q,x),me&&Pi(x,null,q,"unmounted")},W)},gr=x=>{const{type:q,el:W,anchor:M,transition:K}=x;if(q===cr){ds(W,M);return}if(q===Cl){V(x);return}const Z=()=>{a(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(x.shapeFlag&1&&K&&!K.persisted){const{leave:U,delayLeave:z}=K,ne=()=>U(W,Z);z?z(x.el,Z,ne):ne()}else Z()},ds=(x,q)=>{let W;for(;x!==q;)W=H(x),a(x),x=W;a(q)},yn=(x,q,W)=>{const{bum:M,scope:K,update:Z,subTree:U,um:z}=x;M&&xl(M),K.stop(),Z&&(Z.active=!1,St(U,x,q,W)),z&&un(z,q),un(()=>{x.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},nn=(x,q,W,M=!1,K=!1,Z=0)=>{for(let U=Z;U<x.length;U++)St(x[U],q,W,M,K)},fe=x=>x.shapeFlag&6?fe(x.component.subTree):x.shapeFlag&128?x.suspense.next():H(x.anchor||x.el),Me=(x,q,W)=>{x==null?q._vnode&&St(q._vnode,null,null,!0):g(q._vnode||null,x,q,null,null,null,W),ph(),jd(),q._vnode=x},Dn={p:g,um:St,m:ke,r:gr,mt:en,mc:Tt,pc:Oe,pbc:pn,n:fe,o:t};let Bt,ze;return e&&([Bt,ze]=e(Dn)),{render:Me,hydrate:Bt,createApp:ow(Me,Bt)}}function Li({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function op(t,e,n=!1){const r=t.children,a=e.children;if(qe(r)&&qe(a))for(let l=0;l<r.length;l++){const m=r[l];let b=a[l];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=a[l]=Kr(a[l]),b.el=m.el),n||op(m,b)),b.type===cl&&(b.el=m.el)}}function mw(t){const e=t.slice(),n=[0];let r,a,l,m,b;const v=t.length;for(r=0;r<v;r++){const d=t[r];if(d!==0){if(a=n[n.length-1],t[a]<d){e[r]=a,n.push(r);continue}for(l=0,m=n.length-1;l<m;)b=l+m>>1,t[n[b]]<d?l=b+1:m=b;d<t[n[l]]&&(l>0&&(e[r]=n[l-1]),n[l]=r)}}for(l=n.length,m=n[l-1];l-- >0;)n[l]=m,m=e[m];return n}const yw=t=>t.__isTeleport,cr=Symbol.for("v-fgt"),cl=Symbol.for("v-txt"),Oa=Symbol.for("v-cmt"),Cl=Symbol.for("v-stc"),la=[];let Gn=null;function ww(t=!1){la.push(Gn=t?null:[])}function bw(){la.pop(),Gn=la[la.length-1]||null}let qa=1;function Eh(t){qa+=t}function gw(t){return t.dynamicChildren=qa>0?Gn||zs:null,bw(),qa>0&&Gn&&Gn.push(t),t}function Nw(t,e,n,r,a,l){return gw(Nt(t,e,n,r,a,l,!0))}function vw(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const ll="__vInternal",ap=({key:t})=>t??null,Mu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Vt(t)||Te(t)?{i:pr,r:t,k:e,f:!!n}:t:null);function Nt(t,e=null,n=null,r=0,a=null,l=t===cr?0:1,m=!1,b=!1){const v={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ap(e),ref:e&&Mu(e),scopeId:Hd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:pr};return b?(Pf(v,n),l&128&&t.normalize(v)):n&&(v.shapeFlag|=It(n)?8:16),qa>0&&!m&&Gn&&(v.patchFlag>0||l&6)&&v.patchFlag!==32&&Gn.push(v),v}const us=_w;function _w(t,e=null,n=null,r=0,a=null,l=!1){if((!t||t===Xy)&&(t=Oa),vw(t)){const b=_o(t,e,!0);return n&&Pf(b,n),qa>0&&!l&&Gn&&(b.shapeFlag&6?Gn[Gn.indexOf(t)]=b:Gn.push(b)),b.patchFlag|=-2,b}if(Aw(t)&&(t=t.__vccOpts),e){e=xw(e);let{class:b,style:v}=e;b&&!It(b)&&(e.class=xf(b)),lt(v)&&(Pd(v)&&!qe(v)&&(v=Ct({},v)),e.style=_f(v))}const m=It(t)?1:Py(t)?128:yw(t)?64:lt(t)?4:Te(t)?2:0;return Nt(t,e,n,r,a,m,l,!0)}function xw(t){return t?Pd(t)||ll in t?Ct({},t):t:null}function _o(t,e,n=!1){const{props:r,ref:a,patchFlag:l,children:m}=t,b=e?Ew(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:b,key:b&&ap(b),ref:e&&e.ref?n&&a?qe(a)?a.concat(Mu(e)):[a,Mu(e)]:Mu(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==cr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_o(t.ssContent),ssFallback:t.ssFallback&&_o(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ca(t=" ",e=0){return us(cl,null,t,e)}function lr(t){return t==null||typeof t=="boolean"?us(Oa):qe(t)?us(cr,null,t.slice()):typeof t=="object"?Kr(t):us(cl,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_o(t)}function Pf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(qe(e))n=16;else if(typeof e=="object")if(r&65){const a=e.default;a&&(a._c&&(a._d=!1),Pf(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(ll in e)?e._ctx=pr:a===3&&pr&&(pr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:pr},n=32):(e=String(e),r&64?(n=16,e=[Ca(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ew(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)if(a==="class")e.class!==r.class&&(e.class=xf([e.class,r.class]));else if(a==="style")e.style=_f([e.style,r.style]);else if(nl(a)){const l=e[a],m=r[a];m&&l!==m&&!(qe(l)&&l.includes(m))&&(e[a]=l?[].concat(l,m):m)}else a!==""&&(e[a]=r[a])}return e}function rr(t,e,n,r=null){Zn(t,e,7,[n,r])}const Ow=ep();let qw=0;function Cw(t,e,n){const r=t.type,a=(e?e.appContext:t.appContext)||Ow,l={uid:qw++,vnode:t,type:r,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new $m(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:np(r,a),emitsOptions:Vd(r,a),emit:null,emitted:null,propsDefaults:st,inheritAttrs:r.inheritAttrs,ctx:st,data:st,props:st,attrs:st,slots:st,refs:st,setupState:st,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=Sy.bind(null,l),t.ce&&t.ce(l),l}let zt=null,Lf,As,Oh="__VUE_INSTANCE_SETTERS__";(As=Rl()[Oh])||(As=Rl()[Oh]=[]),As.push(t=>zt=t),Lf=t=>{As.length>1?As.forEach(e=>e(t)):As[0](t)};const xo=t=>{Lf(t),t.scope.on()},cs=()=>{zt&&zt.scope.off(),Lf(null)};function up(t){return t.vnode.shapeFlag&4}let Ia=!1;function Iw(t,e=!1){Ia=e;const{props:n,children:r}=t.vnode,a=up(t);uw(t,n,a,e),fw(t,r);const l=a?Tw(t,e):void 0;return Ia=!1,l}function Tw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ld(new Proxy(t.ctx,Zy));const{setup:r}=n;if(r){const a=t.setupContext=r.length>1?kw(t):null;xo(t),To();const l=ci(r,t,0,[t.props,a]);if(So(),cs(),gd(l)){if(l.then(cs,cs),e)return l.then(m=>{qh(t,m,e)}).catch(m=>{ol(m,t,0)});t.asyncDep=l}else qh(t,l,e)}else cp(t,e)}function qh(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lt(e)&&(t.setupState=Ud(e)),cp(t,n)}let Ch;function cp(t,e,n){const r=t.type;if(!t.render){if(!e&&Ch&&!r.render){const a=r.template||Rf(t).template;if(a){const{isCustomElement:l,compilerOptions:m}=t.appContext.config,{delimiters:b,compilerOptions:v}=r,d=Ct(Ct({isCustomElement:l,delimiters:b},m),v);r.render=Ch(a,d)}}t.render=r.render||Xn}xo(t),To(),ew(t),So(),cs()}function Sw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return dn(t,"get","$attrs"),e[n]}}))}function kw(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Sw(t)},slots:t.slots,emit:t.emit,expose:e}}function Mf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ud(Ld(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ca)return ca[n](t)},has(e,n){return n in e||n in ca}}))}function Aw(t){return Te(t)&&"__vccOpts"in t}const Ww=(t,e)=>xy(t,e,Ia),Rw=Symbol.for("v-scx"),Dw=()=>Lu(Rw),Pw="3.3.4",Lw="http://www.w3.org/2000/svg",Fi=typeof document<"u"?document:null,Ih=Fi&&Fi.createElement("template"),Mw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const a=e?Fi.createElementNS(Lw,t):Fi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:t=>Fi.createTextNode(t),createComment:t=>Fi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,a,l){const m=n?n.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===l||!(a=a.nextSibling)););else{Ih.innerHTML=r?`<svg>${t}</svg>`:t;const b=Ih.content;if(r){const v=b.firstChild;for(;v.firstChild;)b.appendChild(v.firstChild);b.removeChild(v)}e.insertBefore(b,n)}return[m?m.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Bw(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Fw(t,e,n){const r=t.style,a=It(n);if(n&&!a){if(e&&!It(e))for(const l in e)n[l]==null&&zl(r,l,"");for(const l in n)zl(r,l,n[l])}else{const l=r.display;a?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=l)}}const Th=/\s*!important$/;function zl(t,e,n){if(qe(n))n.forEach(r=>zl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Uw(t,e);Th.test(n)?t.setProperty(Io(r),n.replace(Th,""),"important"):t[r]=n}}const Sh=["Webkit","Moz","ms"],Il={};function Uw(t,e){const n=Il[e];if(n)return n;let r=No(e);if(r!=="filter"&&r in t)return Il[e]=r;r=_d(r);for(let a=0;a<Sh.length;a++){const l=Sh[a]+r;if(l in t)return Il[e]=l}return e}const kh="http://www.w3.org/1999/xlink";function $w(t,e,n,r,a){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,n);else{const l=Fm(e);n==null||l&&!xd(n)?t.removeAttribute(e):t.setAttribute(e,l?"":n)}}function Qw(t,e,n,r,a,l,m){if(e==="innerHTML"||e==="textContent"){r&&m(r,a,l),t[e]=n??"";return}const b=t.tagName;if(e==="value"&&b!=="PROGRESS"&&!b.includes("-")){t._value=n;const d=b==="OPTION"?t.getAttribute("value"):t.value,T=n??"";d!==T&&(t.value=T),n==null&&t.removeAttribute(e);return}let v=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=xd(n):n==null&&d==="string"?(n="",v=!0):d==="number"&&(n=0,v=!0)}try{t[e]=n}catch{}v&&t.removeAttribute(e)}function jw(t,e,n,r){t.addEventListener(e,n,r)}function zw(t,e,n,r){t.removeEventListener(e,n,r)}function Vw(t,e,n,r,a=null){const l=t._vei||(t._vei={}),m=l[e];if(r&&m)m.value=r;else{const[b,v]=Hw(e);if(r){const d=l[e]=Gw(r,a);jw(t,b,d,v)}else m&&(zw(t,b,m,v),l[e]=void 0)}}const Ah=/(?:Once|Passive|Capture)$/;function Hw(t){let e;if(Ah.test(t)){e={};let r;for(;r=t.match(Ah);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Io(t.slice(2)),e]}let Tl=0;const Kw=Promise.resolve(),Jw=()=>Tl||(Kw.then(()=>Tl=0),Tl=Date.now());function Gw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Zn(Yw(r,n.value),e,5,[r])};return n.value=t,n.attached=Jw(),n}function Yw(t,e){if(qe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>a=>!a._stopped&&r&&r(a))}else return e}const Wh=/^on[a-z]/,Xw=(t,e,n,r,a=!1,l,m,b,v)=>{e==="class"?Bw(t,r,a):e==="style"?Fw(t,n,r):nl(e)?bf(e)||Vw(t,e,n,r,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Zw(t,e,r,a))?Qw(t,e,r,l,m,b,v):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),$w(t,e,r,a))};function Zw(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Wh.test(e)&&Te(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Wh.test(e)&&It(n)?!1:e in t}const eb=Ct({patchProp:Xw},Mw);let Rh;function tb(){return Rh||(Rh=dw(eb))}const nb=(...t)=>{const e=tb().createApp(...t),{mount:n}=e;return e.mount=r=>{const a=rb(r);if(!a)return;const l=e._component;!Te(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const m=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),m},e};function rb(t){return It(t)?document.querySelector(t):t}function ls(t){return typeof t>"u"||t===void 0}function wr(t){return typeof t=="string"}function lp(t){return typeof t=="number"}function Xu(t){return typeof t=="boolean"}function Bf(t){return t===null}function ib(t){return t instanceof Date}function sb(t){return typeof t=="bigint"}function On(t){return typeof t=="function"}function dr(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function hi(t){return Array.isArray(t)}function Eo(t){return t}const pt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),ut=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Vr=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:ut.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),fp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),ob=["preserve rows","delete rows","drop"],Un=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),di=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:ut.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:ut.create(t),identifier:ut.create(e)})}}),Bu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:di.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Vl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Hl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),yi=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),li=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:di.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:di.createWithSchema(t,e)})}});function An(t){return dr(t)&&On(t.toOperationNode)}function ab(t){return dr(t)&&"expressionType"in t&&An(t)}function ub(t){return dr(t)&&"expression"in t&&wr(t.alias)&&An(t)}const vr=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),pi=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),ko=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),Sl=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return p({...t,on:e==="And"?pi.create(t.on,n):ko.create(t.on,n)})}}),fa=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return p({kind:"JoinNode",joinType:t,table:e,on:Sl.create(n)})},cloneWithOn(t,e){return p({...t,on:t.on?Sl.cloneWithOperation(t.on,"And",e):Sl.create(e)})}}),Ta=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),cb=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],lb=["+","-","*","/","%","^","&","|","#","<<",">>"],hp=["->","->>"],fb=[...cb,...lb,"&&","||"],hb=["exists","not exists"],db=["not","-",...hb],pb=[...fb,...hp,...db,"between","between symmetric"],fs=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Dh(t){return wr(t)&&hp.includes(t)}const mt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:ut.create(t)})}}),Ff=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),fl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Ff.create()})}});var Js;class mb{constructor(e){D(this,Js,void 0);j(this,Js,e)}get dynamicReference(){return i(this,Js)}get refType(){}toOperationNode(){return wp(i(this,Js))}}Js=new WeakMap;function dp(t){return dr(t)&&An(t)&&wr(t.dynamicReference)}const Kl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Xt=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return Xt.create([t],[])},createWithChild(t){return Xt.create(["",""],[t])},createWithChildren(t){return Xt.create(new Array(t.length+1).fill(""),t)}});function pp(t){return t==="asc"||t==="desc"}function hl(t){if(t.length===2)return[kl(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>kl(n)):[kl(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function kl(t,e){const n=yb(t);if(Kl.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return Kl.create(n,mp(e))}function yb(t){if(ou(t))return Wo(t);if(dp(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!pp(n))throw new Error(`Invalid order by direction: ${n}`);return Kl.create(Ar(e),mp(n))}return Ar(t)}function mp(t){if(t)return t==="asc"||t==="desc"?Xt.createWithSql(t):t.toOperationNode()}const Jl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),yp=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Gl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function wp(t){return wr(t)?Ar(t):t.toOperationNode()}function Sa(t){return hi(t)?t.map(e=>Yn(e)):[Yn(t)]}function Yn(t){return ou(t)?Wo(t):wp(t)}function wb(t,e){const n=Ar(t);if(Dh(e))return Jl.create(n,yp.create(fs.create(e)));const r=e.slice(0,-1);if(Dh(r))return Jl.create(n,Gl.create(fs.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Ar(t){const e=".";if(!t.includes(e))return fl.create(mt.create(t));const n=t.split(e).map(Uf);if(n.length===3)return gb(n);if(n.length===2)return Nb(n);throw new Error(`invalid column reference ${t}`)}function bb(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Uf);return yi.create(Ar(n),ut.create(r))}else return Ar(t)}function bp(t){return mt.create(t)}function Ph(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(Uf);if(!pp(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return hl([n,r])[0]}else return bp(t)}function gb(t){const[e,n,r]=t;return fl.create(mt.create(r),li.createWithSchema(e,n))}function Nb(t){const[e,n]=t;return fl.create(mt.create(n),li.create(e))}function Uf(t){return t.trim()}const gp=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),$f=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),br=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function Np(t){return hi(t)?vb(t):Zt(t)}function Zt(t){return ou(t)?Wo(t):br.create(t)}function Qf(t){return lp(t)||Xu(t)||Bf(t)}function jf(t){if(!Qf(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return br.createImmediate(t)}function vb(t){return t.some(ou)?$f.create(t.map(e=>Zt(e))):gp.create(t)}const Oo=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Ht(t){if(t.length===3)return ha(t[0],t[1],t[2]);if(t.length===1)return Zt(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function ha(t,e,n){return _b(e)&&vp(n)?Ta.create(Yn(t),Xl(e),br.createImmediate(n)):Ta.create(Yn(t),Xl(e),Np(n))}function Wr(t,e,n){return Ta.create(Yn(t),Xl(e),Yn(n))}function Lh(t,e){return Yl(Object.entries(t).filter(([,n])=>!ls(n)).map(([n,r])=>ha(n,vp(r)?"is":"=",r)),e)}function Yl(t,e){const n=e==="and"?pi.create:ko.create;if(t.length===0)return br.createImmediate(e==="and");let r=Mh(t[0]);for(let a=1;a<t.length;++a)r=n(r,Mh(t[a]));return t.length>1?Oo.create(r):r}function _b(t){return t==="is"||t==="is not"}function vp(t){return Bf(t)||Xu(t)}function Xl(t){if(wr(t)&&pb.includes(t))return fs.create(t);if(An(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Mh(t){return An(t)?t.toOperationNode():t}const qo=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Bh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Zl=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Bh.cloneWithItems(t.partitionBy,e):Bh.create(e)})}}),Zu=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),Fh=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Uh=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return p({...t,having:e==="And"?pi.create(t.having,n):ko.create(t.having,n)})}}),De=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?Fh.cloneWithItems(t.groupBy,e):Fh.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?Uh.cloneWithOperation(t.having,"And",e):Uh.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Le(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Qn;const ma=class ma{constructor(e){D(this,Qn,void 0);j(this,Qn,p(e))}on(...e){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Ht(e))})}onRef(e,n,r){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Wr(e,n,r))})}onTrue(){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Xt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return i(this,Qn).joinNode}};Qn=new WeakMap;let ec=ma;Le(ec,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const xb=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function Eb(t){return Sa(t).map(xb.create)}var zi;const Ic=class Ic{constructor(e){D(this,zi,void 0);j(this,zi,p(e))}orderBy(e,n){return new Ic({overNode:Zl.cloneWithOrderByItems(i(this,zi).overNode,hl([e,n]))})}partitionBy(e){return new Ic({overNode:Zl.cloneWithPartitionByItems(i(this,zi).overNode,Eb(e))})}$call(e){return e(this)}toOperationNode(){return i(this,zi).overNode}};zi=new WeakMap;let tc=Ic;Le(tc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const da=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Ff.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:fl.createSelectAll(t)})}});function hs(t){return On(t)?hs(t(Ao())):hi(t)?t.map(e=>$h(e)):[$h(t)]}function $h(t){return wr(t)?da.create(bb(t)):dp(t)?da.create(t.toOperationNode()):da.create(Dp(t))}function iu(t){return t?Array.isArray(t)?t.map(Qh):[Qh(t)]:[da.createSelectAll()]}function Qh(t){if(wr(t))return da.createSelectAllFromTable(hn(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Ob=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),qb=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function Cb(t){const e=On(t)?t(Ao()):t,n=hi(e)?e:p([e]);return Ib(n)}function Ib(t){const e=Tb(t);return[p([...e.keys()].map(mt.create)),Ob.create(t.map(n=>Sb(n,e)))]}function Tb(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const a of r)!e.has(a)&&n[a]!==void 0&&e.set(a,e.size)}return e}function Sb(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let a=!1;for(const m of n){const b=e.get(m);if(ls(b))continue;const v=t[m];(ls(v)||ou(v))&&(a=!0),r[b]=v}if(n.length<e.size||a){const m=qb.create();return $f.create(r.map(b=>ls(b)?m:Zt(b)))}return gp.create(r)}const fr=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?Zu.cloneWithFroms(t.from,e):Zu.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),jh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),pa=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?jh.cloneWithTables(t.using,e):jh.create(e)})}}),ln=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return p({...t,where:e==="And"?pi.create(t.where,n):ko.create(t.where,n)})}}),zh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),kb=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),We=p({is(t){return De.is(t)||fr.is(t)||nc.is(t)||pa.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?ln.cloneWithOperation(t.where,"And",e):ln.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?zh.cloneWithSelections(t.returning,e):zh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,n){return p({...t,explain:kb.create(e,n==null?void 0:n.toOperationNode())})}}),Ab=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function zf(t){const e=On(t)?t(Ao()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>Ab.create(mt.create(n),Zt(r)))}const Wb=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class Rb{constructor(e,n){we(this,"insertId");we(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=n}}class dl extends Error{constructor(n){super("no result");we(this,"node");this.node=n}}function pl(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const En=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?ln.cloneWithOperation(t.indexWhere,"And",e):ln.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?ln.cloneWithOperation(t.indexWhere,"Or",e):ln.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?ln.cloneWithOperation(t.updateWhere,"And",e):ln.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?ln.cloneWithOperation(t.updateWhere,"Or",e):ln.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var Ze;const Er=class Er{constructor(e){D(this,Ze,void 0);j(this,Ze,p(e))}column(e){const n=mt.create(e);return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,n]):p([n])})})}columns(e){const n=e.map(mt.create);return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,...n]):p(n)})})}constraint(e){return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{constraint:ut.create(e)})})}expression(e){return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Er({...i(this,Ze),onConflictNode:En.cloneWithIndexWhere(i(this,Ze).onConflictNode,Ht(e))})}whereRef(e,n,r){return new Er({...i(this,Ze),onConflictNode:En.cloneWithIndexWhere(i(this,Ze).onConflictNode,Wr(e,n,r))})}clearWhere(){return new Er({...i(this,Ze),onConflictNode:En.cloneWithoutIndexWhere(i(this,Ze).onConflictNode)})}doNothing(){return new _p({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ic({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{updates:zf(e)})})}$call(e){return e(this)}};Ze=new WeakMap;let rc=Er;Le(rc,"don't await OnConflictBuilder instances.");var La;class _p{constructor(e){D(this,La,void 0);j(this,La,p(e))}toOperationNode(){return i(this,La).onConflictNode}}La=new WeakMap;Le(_p,"don't await OnConflictDoNothingBuilder instances.");var jn;const ya=class ya{constructor(e){D(this,jn,void 0);j(this,jn,p(e))}where(...e){return new ya({...i(this,jn),onConflictNode:En.cloneWithUpdateWhere(i(this,jn).onConflictNode,Ht(e))})}whereRef(e,n,r){return new ya({...i(this,jn),onConflictNode:En.cloneWithUpdateWhere(i(this,jn).onConflictNode,Wr(e,n,r))})}clearWhere(){return new ya({...i(this,jn),onConflictNode:En.cloneWithoutUpdateWhere(i(this,jn).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return i(this,jn).onConflictNode}};jn=new WeakMap;let ic=ya;Le(ic,"don't await OnConflictUpdateBuilder instances.");var Se;const $t=class $t{constructor(e){D(this,Se,void 0);j(this,Se,p(e))}values(e){const[n,r]=Cb(e);return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:n,values:r})})}columns(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:p(e.map(mt.create))})})}expression(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{values:Wo(e)})})}ignore(){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{ignore:!0})})}onConflict(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onConflict:e(new rc({onConflictNode:En.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onDuplicateKey:Wb.create(zf(e))})})}returning(e){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,hs(e))})}returningAll(){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new $t({...i(this,Se)})}$castTo(){return new $t(i(this,Se))}$narrowType(){return new $t(i(this,Se))}$assertType(){return new $t(i(this,Se))}withPlugin(e){return new $t({...i(this,Se),executor:i(this,Se).executor.withPlugin(e)})}toOperationNode(){return i(this,Se).executor.transformQuery(i(this,Se).queryNode,i(this,Se).queryId)}compile(){return i(this,Se).executor.compileQuery(this.toOperationNode(),i(this,Se).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,Se).executor.executeQuery(e,i(this,Se).queryId);return i(this,Se).executor.adapter.supportsReturning&&n.returning?r.rows:[new Rb(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Se).executor.stream(n,e,i(this,Se).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new $t({...i(this,Se),queryNode:We.cloneWithExplain(i(this,Se).queryNode,e,n)}).execute()}};Se=new WeakMap;let ka=$t;Le(ka,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Db{constructor(e){we(this,"numDeletedRows");this.numDeletedRows=e}}const xp=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:br.create(t)})}});var be;const wt=class wt{constructor(e){D(this,be,void 0);j(this,be,p(e))}where(...e){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Ht(e))})}whereRef(e,n,r){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Wr(e,n,r))})}clearWhere(){return new wt({...i(this,be),queryNode:We.cloneWithoutWhere(i(this,be).queryNode)})}using(e){return new wt({...i(this,be),queryNode:pa.cloneWithUsing(i(this,be).queryNode,Wa(e))})}innerJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("FullJoin",e))})}returning(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,hs(e))})}returningAll(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,iu(e))})}orderBy(e,n){return new wt({...i(this,be),queryNode:pa.cloneWithOrderByItems(i(this,be).queryNode,hl([e,n]))})}limit(e){return new wt({...i(this,be),queryNode:pa.cloneWithLimit(i(this,be).queryNode,xp.create(e))})}$call(e){return e(this)}$if(e,n){return e?n(this):new wt({...i(this,be)})}$castTo(){return new wt(i(this,be))}$narrowType(){return new wt(i(this,be))}$assertType(){return new wt(i(this,be))}withPlugin(e){return new wt({...i(this,be),executor:i(this,be).executor.withPlugin(e)})}toOperationNode(){return i(this,be).executor.transformQuery(i(this,be).queryNode,i(this,be).queryId)}compile(){return i(this,be).executor.compileQuery(this.toOperationNode(),i(this,be).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,be).executor.executeQuery(e,i(this,be).queryId);return i(this,be).executor.adapter.supportsReturning&&n.returning?r.rows:[new Db(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,be).executor.stream(n,e,i(this,be).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new wt({...i(this,be),queryNode:We.cloneWithExplain(i(this,be).queryNode,e,n)}).execute()}};be=new WeakMap;let sc=wt;Le(sc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Pb{constructor(e,n){we(this,"numUpdatedRows");we(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=n}}var xe;const vt=class vt{constructor(e){D(this,xe,void 0);j(this,xe,p(e))}where(...e){return new vt({...i(this,xe),queryNode:We.cloneWithWhere(i(this,xe).queryNode,Ht(e))})}whereRef(e,n,r){return new vt({...i(this,xe),queryNode:We.cloneWithWhere(i(this,xe).queryNode,Wr(e,n,r))})}clearWhere(){return new vt({...i(this,xe),queryNode:We.cloneWithoutWhere(i(this,xe).queryNode)})}from(e){return new vt({...i(this,xe),queryNode:nc.cloneWithFromItems(i(this,xe).queryNode,Wa(e))})}innerJoin(...e){return new vt({...i(this,xe),queryNode:We.cloneWithJoin(i(this,xe).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new vt({...i(this,xe),queryNode:We.cloneWithJoin(i(this,xe).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new vt({...i(this,xe),queryNode:We.cloneWithJoin(i(this,xe).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new vt({...i(this,xe),queryNode:We.cloneWithJoin(i(this,xe).queryNode,fn("FullJoin",e))})}set(e){return new vt({...i(this,xe),queryNode:nc.cloneWithUpdates(i(this,xe).queryNode,zf(e))})}returning(e){return new vt({...i(this,xe),queryNode:We.cloneWithReturning(i(this,xe).queryNode,hs(e))})}returningAll(){return new vt({...i(this,xe),queryNode:We.cloneWithReturning(i(this,xe).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new vt({...i(this,xe)})}$castTo(){return new vt(i(this,xe))}$narrowType(){return new vt(i(this,xe))}$assertType(){return new vt(i(this,xe))}withPlugin(e){return new vt({...i(this,xe),executor:i(this,xe).executor.withPlugin(e)})}toOperationNode(){return i(this,xe).executor.transformQuery(i(this,xe).queryNode,i(this,xe).queryId)}compile(){return i(this,xe).executor.compileQuery(this.toOperationNode(),i(this,xe).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,xe).executor.executeQuery(e,i(this,xe).queryId);return i(this,xe).executor.adapter.supportsReturning&&n.returning?r.rows:[new Pb(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,xe).executor.stream(n,e,i(this,xe).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new vt({...i(this,xe),queryNode:We.cloneWithExplain(i(this,xe).queryNode,e,n)}).execute()}};xe=new WeakMap;let oc=vt;Le(oc,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Vh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:li.create(t),columns:e?p(e.map(mt.create)):void 0})}}),ac=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var Or;const Tc=class Tc{constructor(e){D(this,Or,void 0);j(this,Or,p(e))}materialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!0})})}notMaterialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!1})})}toOperationNode(){return i(this,Or).node}};Or=new WeakMap;let uc=Tc;Le(uc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Hh(t,e){const n=e(Vb()).toOperationNode();return On(t)?t(Lb(n)).toOperationNode():ac.create(Ep(t),n)}function Lb(t){return e=>new uc({node:ac.create(Ep(e),t)})}function Ep(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(a=>a.trim());return Vh.create(n,r)}else return Vh.create(t)}const ku=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Kh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Mb(t){let e="";for(let n=0;n<t;++n)e+=Bb();return e}function Bb(){return Kh[~~(Math.random()*Kh.length)]}function He(){return new Fb}var Gs;class Fb{constructor(){D(this,Gs,void 0)}get queryId(){return i(this,Gs)===void 0&&j(this,Gs,Mb(8)),i(this,Gs)}}Gs=new WeakMap;var Sc;class Vf{constructor(){we(this,"nodeStack",[]);D(this,Sc,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),p(n)}transformNodeImpl(e){return i(this,Sc)[e.kind](e)}transformNodeList(e){return e&&p(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Sc=new WeakMap;const Ub=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Ys,Vi,Hi,kc,Op,Ac,qp,Wc,Cp,Ki,ua,Ma,ef,Rc,Ip;class $b extends Vf{constructor(n){super();D(this,kc);D(this,Ac);D(this,Wc);D(this,Ki);D(this,Ma);D(this,Rc);D(this,Ys,void 0);D(this,Vi,new Set);D(this,Hi,new Set);j(this,Ys,n)}transformNodeImpl(n){if(!ge(this,kc,Op).call(this,n))return super.transformNodeImpl(n);const r=ge(this,Wc,Cp).call(this,n);for(const m of r)i(this,Hi).add(m);const a=ge(this,Ac,qp).call(this,n);for(const m of a)i(this,Vi).add(m);const l=super.transformNodeImpl(n);for(const m of a)i(this,Vi).delete(m);for(const m of r)i(this,Hi).delete(m);return l}transformSchemableIdentifier(n){const r=super.transformSchemableIdentifier(n);return r.schema||!i(this,Vi).has(n.identifier.name)?r:{...r,schema:ut.create(i(this,Ys))}}transformReferences(n){const r=super.transformReferences(n);return r.table.table.schema?r:{...r,table:li.createWithSchema(i(this,Ys),r.table.table.identifier.name)}}}Ys=new WeakMap,Vi=new WeakMap,Hi=new WeakMap,kc=new WeakSet,Op=function(n){return n.kind in Ub},Ac=new WeakSet,qp=function(n){const r=new Set;if("name"in n&&n.name&&di.is(n.name)&&ge(this,Ma,ef).call(this,n.name,r),"from"in n&&n.from)for(const a of n.from.froms)ge(this,Ki,ua).call(this,a,r);if("into"in n&&n.into&&ge(this,Ki,ua).call(this,n.into,r),"table"in n&&n.table&&ge(this,Ki,ua).call(this,n.table,r),"joins"in n&&n.joins)for(const a of n.joins)ge(this,Ki,ua).call(this,a.table,r);return r},Wc=new WeakSet,Cp=function(n){const r=new Set;return"with"in n&&n.with&&ge(this,Rc,Ip).call(this,n.with,r),r},Ki=new WeakSet,ua=function(n,r){const a=li.is(n)?n:yi.is(n)&&li.is(n.node)?n.node:null;a&&ge(this,Ma,ef).call(this,a.table,r)},Ma=new WeakSet,ef=function(n,r){const a=n.identifier.name;!i(this,Vi).has(a)&&!i(this,Hi).has(a)&&r.add(a)},Rc=new WeakSet,Ip=function(n,r){for(const a of n.expressions){const l=a.name.table.table.identifier.name;i(this,Hi).has(l)||r.add(l)}};var Ba;class su{constructor(e){D(this,Ba,void 0);j(this,Ba,new $b(e))}transformQuery(e){return i(this,Ba).transformNode(e.node)}async transformResult(e){return e.result}}Ba=new WeakMap;var Ve;const $i=class $i{constructor(e){D(this,Ve,void 0);j(this,Ve,p(e))}selectFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.createFrom(Wa(e),i(this,Ve).withNode)})}selectNoFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.cloneWithSelections(De.create(i(this,Ve).withNode),hs(e))})}insertInto(e){return new ka({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(hn(e),i(this,Ve).withNode)})}replaceInto(e){return new ka({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(hn(e),i(this,Ve).withNode,!0)})}deleteFrom(e){return new sc({queryId:He(),executor:i(this,Ve).executor,queryNode:pa.create(Wa(e),i(this,Ve).withNode)})}updateTable(e){return new oc({queryId:He(),executor:i(this,Ve).executor,queryNode:nc.create(Ra(e),i(this,Ve).withNode)})}with(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?ku.cloneWithExpression(i(this,Ve).withNode,r):ku.create(r)})}withRecursive(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?ku.cloneWithExpression(i(this,Ve).withNode,r):ku.create(r,{recursive:!0})})}withPlugin(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPlugin(e)})}withoutPlugins(){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withoutPlugins()})}withSchema(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPluginAtFront(new su(e))})}};Ve=new WeakMap;let cc=$i;var Fa,Xs,Zs;class Jh{constructor(){D(this,Fa,void 0);D(this,Xs,void 0);D(this,Zs,void 0);we(this,"resolve",e=>{i(this,Xs)&&i(this,Xs).call(this,e)});we(this,"reject",e=>{i(this,Zs)&&i(this,Zs).call(this,e)});j(this,Fa,new Promise((e,n)=>{j(this,Zs,n),j(this,Xs,e)}))}get promise(){return i(this,Fa)}}Fa=new WeakMap,Xs=new WeakMap,Zs=new WeakMap;const Gh=new Set;function Qb(t){Gh.has(t)||(Gh.add(t),console.log(t))}const jb=p([]);var Ji,Ua,tf;class Tp{constructor(e=jb){D(this,Ua);D(this,Ji,void 0);j(this,Ji,e)}get plugins(){return i(this,Ji)}transformQuery(e,n){for(const r of i(this,Ji)){const a=r.transformQuery({node:e,queryId:n});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const a=await r.executeQuery(e),l=await ge(this,Ua,tf).call(this,a,n);return zb(a,l),l})}async*stream(e,n,r){const a=new Jh,l=new Jh;this.provideConnection(async b=>(a.resolve(b),await l.promise)).catch(b=>a.reject(b));const m=await a.promise;try{for await(const b of m.streamQuery(e,n))yield await ge(this,Ua,tf).call(this,b,r)}finally{l.resolve()}}}Ji=new WeakMap,Ua=new WeakSet,tf=async function(e,n){for(const r of i(this,Ji))e=await r.transformResult({result:e,queryId:n});return e};function zb(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||Qb("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Bs extends Tp{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Bs([...this.plugins,e])}withPlugins(e){return new Bs([...this.plugins,...e])}withPluginAtFront(e){return new Bs([e,...this.plugins])}withoutPlugins(){return new Bs([])}}const Hf=new Bs;function Vb(){return new cc({executor:Hf})}function Hb(t,e){return new ec({joinNode:fa.create(t,Ra(e))})}function Kb(){return new tc({overNode:Zl.create()})}function fn(t,e){if(e.length===3)return Gb(t,e[0],e[1],e[2]);if(e.length===2)return Jb(t,e[0],e[1]);throw new Error("not implemented")}function Jb(t,e,n){return n(Hb(t,e)).toOperationNode()}function Gb(t,e,n,r){return fa.createWithOn(t,Ra(e),Wr(n,"=",r))}const Yb=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:br.create(t)})}}),Xb=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function Zb(t){return t=On(t)?t(Ao()):t,Sa(t).map(Xb.create)}const Sp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return p({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Ws(t,e,n){return On(e)&&(e=e(Gf())),hi(e)||(e=[e]),e.map(r=>Sp.create(t,Wo(r),n))}var Xr;const th=class th{constructor(e){D(this,Xr,void 0);j(this,Xr,e)}get expressionType(){}as(e){return new Kf(this,e)}or(...e){return new nf(ko.create(i(this,Xr),Ht(e)))}and(...e){return new rf(pi.create(i(this,Xr),Ht(e)))}$castTo(){return new th(i(this,Xr))}toOperationNode(){return i(this,Xr)}};Xr=new WeakMap;let nt=th;var eo,Zr;class Kf{constructor(e,n){D(this,eo,void 0);D(this,Zr,void 0);j(this,eo,e),j(this,Zr,n)}get expression(){return i(this,eo)}get alias(){return i(this,Zr)}toOperationNode(){return yi.create(i(this,eo).toOperationNode(),An(i(this,Zr))?i(this,Zr).toOperationNode():ut.create(i(this,Zr)))}}eo=new WeakMap,Zr=new WeakMap;var Gi;const Dc=class Dc{constructor(e){D(this,Gi,void 0);j(this,Gi,e)}get expressionType(){}as(e){return new Kf(this,e)}or(...e){return new Dc(ko.create(i(this,Gi),Ht(e)))}$castTo(){return new Dc(i(this,Gi))}toOperationNode(){return Oo.create(i(this,Gi))}};Gi=new WeakMap;let nf=Dc;var Yi;const Pc=class Pc{constructor(e){D(this,Yi,void 0);j(this,Yi,e)}get expressionType(){}as(e){return new Kf(this,e)}and(...e){return new Pc(pi.create(i(this,Yi),Ht(e)))}$castTo(){return new Pc(i(this,Yi))}toOperationNode(){return Oo.create(i(this,Yi))}};Yi=new WeakMap;let rf=Pc;var X;const Ne=class Ne{constructor(e){D(this,X,void 0);j(this,X,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new Ne({...i(this,X),queryNode:We.cloneWithWhere(i(this,X).queryNode,Ht(e))})}whereRef(e,n,r){return new Ne({...i(this,X),queryNode:We.cloneWithWhere(i(this,X).queryNode,Wr(e,n,r))})}having(...e){return new Ne({...i(this,X),queryNode:De.cloneWithHaving(i(this,X).queryNode,Ht(e))})}havingRef(e,n,r){return new Ne({...i(this,X),queryNode:De.cloneWithHaving(i(this,X).queryNode,Wr(e,n,r))})}select(e){return new Ne({...i(this,X),queryNode:De.cloneWithSelections(i(this,X).queryNode,hs(e))})}distinctOn(e){return new Ne({...i(this,X),queryNode:De.cloneWithDistinctOn(i(this,X).queryNode,Sa(e))})}modifyFront(e){return new Ne({...i(this,X),queryNode:De.cloneWithFrontModifier(i(this,X).queryNode,vr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.createWithExpression(e.toOperationNode()))})}distinct(){return new Ne({...i(this,X),queryNode:De.cloneWithFrontModifier(i(this,X).queryNode,vr.create("Distinct"))})}forUpdate(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForUpdate"))})}forShare(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForShare"))})}forKeyShare(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForKeyShare"))})}forNoKeyUpdate(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForNoKeyUpdate"))})}skipLocked(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("SkipLocked"))})}noWait(){return new Ne({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("NoWait"))})}selectAll(e){return new Ne({...i(this,X),queryNode:De.cloneWithSelections(i(this,X).queryNode,iu(e))})}innerJoin(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("FullJoin",e))})}innerJoinLateral(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("LateralInnerJoin",e))})}leftJoinLateral(...e){return new Ne({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,fn("LateralLeftJoin",e))})}orderBy(...e){return new Ne({...i(this,X),queryNode:De.cloneWithOrderByItems(i(this,X).queryNode,hl(e))})}groupBy(e){return new Ne({...i(this,X),queryNode:De.cloneWithGroupByItems(i(this,X).queryNode,Zb(e))})}limit(e){return new Ne({...i(this,X),queryNode:De.cloneWithLimit(i(this,X).queryNode,xp.create(e))})}offset(e){return new Ne({...i(this,X),queryNode:De.cloneWithOffset(i(this,X).queryNode,Yb.create(e))})}union(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("union",e,!1))})}unionAll(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("union",e,!0))})}intersect(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("intersect",e,!1))})}intersectAll(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("intersect",e,!0))})}except(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("except",e,!1))})}exceptAll(e){return new Ne({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Ws("except",e,!0))})}as(e){return new kp(this,e)}clearSelect(){return new Ne({...i(this,X),queryNode:De.cloneWithoutSelections(i(this,X).queryNode)})}clearWhere(){return new Ne({...i(this,X),queryNode:We.cloneWithoutWhere(i(this,X).queryNode)})}clearLimit(){return new Ne({...i(this,X),queryNode:De.cloneWithoutLimit(i(this,X).queryNode)})}clearOffset(){return new Ne({...i(this,X),queryNode:De.cloneWithoutOffset(i(this,X).queryNode)})}clearOrderBy(){return new Ne({...i(this,X),queryNode:De.cloneWithoutOrderBy(i(this,X).queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Ne({...i(this,X)})}$castTo(){return new Ne(i(this,X))}$narrowType(){return new Ne(i(this,X))}$assertType(){return new Ne(i(this,X))}$asTuple(){return new nt(this.toOperationNode())}withPlugin(e){return new Ne({...i(this,X),executor:i(this,X).executor.withPlugin(e)})}toOperationNode(){return i(this,X).executor.transformQuery(i(this,X).queryNode,i(this,X).queryId)}compile(){return i(this,X).executor.compileQuery(this.toOperationNode(),i(this,X).queryId)}async execute(){const e=this.compile();return(await i(this,X).executor.executeQuery(e,i(this,X).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,X).executor.stream(n,e,i(this,X).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new Ne({...i(this,X),queryNode:We.cloneWithExplain(i(this,X).queryNode,e,n)}).execute()}};X=new WeakMap;let lc=Ne;Le(lc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function fc(t){return new lc(t)}var to,no;class kp{constructor(e,n){D(this,to,void 0);D(this,no,void 0);j(this,to,e),j(this,no,n)}get expression(){return i(this,to)}get alias(){return i(this,no)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return yi.create(i(this,to).toOperationNode(),ut.create(i(this,no)))}}to=new WeakMap,no=new WeakMap;Le(kp,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Fs=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?ln.cloneWithOperation(t.filter,"And",e):ln.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?ln.cloneWithOperation(t.filter,"Or",e):ln.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),eg=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var Nn;const $s=class $s{constructor(e){D(this,Nn,void 0);j(this,Nn,p(e))}get expressionType(){}as(e){return new tg(this,e)}distinct(){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithDistinct(i(this,Nn).aggregateFunctionNode)})}filterWhere(...e){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithFilter(i(this,Nn).aggregateFunctionNode,Ht(e))})}filterWhereRef(e,n,r){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithFilter(i(this,Nn).aggregateFunctionNode,Wr(e,n,r))})}over(e){const n=Kb();return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithOver(i(this,Nn).aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,Nn).aggregateFunctionNode}};Nn=new WeakMap;let Aa=$s;Le(Aa,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var ro,io;class tg{constructor(e,n){D(this,ro,void 0);D(this,io,void 0);j(this,ro,e),j(this,io,n)}get expression(){return i(this,ro)}get alias(){return i(this,io)}toOperationNode(){return yi.create(i(this,ro).toOperationNode(),ut.create(i(this,io)))}}ro=new WeakMap,io=new WeakMap;function Ap(){const t=(n,r)=>new nt(eg.create(n,Sa(r))),e=(n,r)=>new Aa({aggregateFunctionNode:Fs.create(n,r?Sa(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(n,...r){return t("coalesce",[n,...r])},count(n){return e("count",[n])},countAll(n){return new Aa({aggregateFunctionNode:Fs.create("count",iu(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])}})}const ng=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function rg(t,e){return ng.create(fs.create(t),Yn(e))}const Jf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),mr=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Jf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var so;class Wp{constructor(e){D(this,so,void 0);j(this,so,p(e))}when(...e){return new Rp({...i(this,so),node:mr.cloneWithWhen(i(this,so).node,Jf.create(Ht(e)))})}}so=new WeakMap;var oo;class Rp{constructor(e){D(this,oo,void 0);j(this,oo,p(e))}then(e){return new ig({...i(this,oo),node:mr.cloneWithThen(i(this,oo).node,Qf(e)?jf(e):Zt(e))})}}oo=new WeakMap;var or;class ig{constructor(e){D(this,or,void 0);j(this,or,p(e))}when(...e){return new Rp({...i(this,or),node:mr.cloneWithWhen(i(this,or).node,Jf.create(Ht(e)))})}else(e){return new sg({...i(this,or),node:mr.cloneWith(i(this,or).node,{else:Qf(e)?jf(e):Zt(e)})})}end(){return new nt(mr.cloneWith(i(this,or).node,{isStatement:!1}))}endCase(){return new nt(mr.cloneWith(i(this,or).node,{isStatement:!0}))}}or=new WeakMap;var ao;class sg{constructor(e){D(this,ao,void 0);j(this,ao,p(e))}end(){return new nt(mr.cloneWith(i(this,ao).node,{isStatement:!1}))}endCase(){return new nt(mr.cloneWith(i(this,ao).node,{isStatement:!0}))}}ao=new WeakMap;const og=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var ei,$a,of;class sf{constructor(e){D(this,$a);D(this,ei,void 0);j(this,ei,e)}at(e){return ge(this,$a,of).call(this,"ArrayLocation",e)}key(e){return ge(this,$a,of).call(this,"Member",e)}}ei=new WeakMap,$a=new WeakSet,of=function(e,n){return new ag(Jl.cloneWithTraversal(i(this,ei),Gl.is(i(this,ei).traversal)?Gl.cloneWithLeg(i(this,ei).traversal,og.create(e,n)):yp.cloneWithValue(i(this,ei).traversal,br.createImmediate(n))))};var uo;class ag extends sf{constructor(n){super(n);D(this,uo,void 0);j(this,uo,n)}get expressionType(){}as(n){return new ug(this,n)}$castTo(){return new sf(i(this,uo))}toOperationNode(){return i(this,uo)}}uo=new WeakMap;var co,ti;class ug{constructor(e,n){D(this,co,void 0);D(this,ti,void 0);j(this,co,e),j(this,ti,n)}get expression(){return i(this,co)}get alias(){return i(this,ti)}toOperationNode(){return yi.create(i(this,co).toOperationNode(),An(i(this,ti))?i(this,ti).toOperationNode():ut.create(i(this,ti)))}}co=new WeakMap,ti=new WeakMap;const Yh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Gf(t=Hf){function e(a,l,m){return new nt(ha(a,l,m))}function n(a,l){return new nt(rg(a,l))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return fc({queryId:He(),executor:t,queryNode:De.createFrom(Wa(a))})},selectNoFrom(a){return fc({queryId:He(),executor:t,queryNode:De.cloneWithSelections(De.create(),hs(a))})},case(a){return new Wp({node:mr.create(ls(a)?void 0:Yn(a))})},ref(a,l){return ls(l)?new nt(Ar(a)):new sf(wb(a,l))},val(a){return new nt(Np(a))},refTuple(...a){return new nt(Yh.create(a.map(Yn)))},tuple(...a){return new nt(Yh.create(a.map(Zt)))},lit(a){return new nt(jf(a))},cmpr(a,l,m){return new nt(ha(a,l,m))},bxp(a,l,m){return new nt(ha(a,l,m))},unary:n,not(a){return n("not",a)},exists(a){return n("exists",a)},neg(a){return n("-",a)},between(a,l,m){return new nt(Ta.create(Yn(a),fs.create("between"),pi.create(Zt(l),Zt(m))))},betweenSymmetric(a,l,m){return new nt(Ta.create(Yn(a),fs.create("between symmetric"),pi.create(Zt(l),Zt(m))))},and(a){return hi(a)?new nt(Yl(a,"and")):new nt(Lh(a,"and"))},or(a){return hi(a)?new nt(Yl(a,"or")):new nt(Lh(a,"or"))},parens(...a){const l=Ht(a);return Oo.is(l)?new nt(l):new nt(Oo.create(l))},withSchema(a){return Gf(t.withPluginAtFront(new su(a)))}});return r.fn=Ap(),r.eb=r,r}function Ao(t){return Gf()}function Wo(t){if(An(t))return t.toOperationNode();if(On(t))return t(Ao()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Dp(t){if(An(t))return t.toOperationNode();if(On(t))return t(Ao()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ou(t){return ab(t)||ub(t)||On(t)}function Wa(t){return hi(t)?t.map(e=>Ra(e)):[Ra(t)]}function Ra(t){return wr(t)?cg(t):Dp(t)}function cg(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Pp);return yi.create(hn(n),ut.create(r))}else return hn(t)}function hn(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(Pp);return li.createWithSchema(n,r)}else return li.create(t)}function Pp(t){return t.trim()}const Lp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),dt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:mt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),Mp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:mt.create(t)})}}),Bp=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:mt.create(t),renameTo:mt.create(e)})}}),Yf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?ut.create(e):void 0})}}),lg=["no action","restrict","cascade","set null","set default"],Fu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function Fp(t){return An(t)?t.toOperationNode():br.createImmediate(t)}const Au=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),fg=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function hc(t){if(lg.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ge;const Et=class Et{constructor(e){D(this,Ge,void 0);j(this,Ge,e)}autoIncrement(){return new Et(dt.cloneWith(i(this,Ge),{autoIncrement:!0}))}primaryKey(){return new Et(dt.cloneWith(i(this,Ge),{primaryKey:!0}))}references(e){const n=Ar(e);if(!n.table||Ff.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Et(dt.cloneWith(i(this,Ge),{references:Fu.create(n.table,[n.column])}))}onDelete(e){if(!i(this,Ge).references)throw new Error("on delete constraint can only be added for foreign keys");return new Et(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnDelete(i(this,Ge).references,hc(e))}))}onUpdate(e){if(!i(this,Ge).references)throw new Error("on update constraint can only be added for foreign keys");return new Et(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnUpdate(i(this,Ge).references,hc(e))}))}unique(){return new Et(dt.cloneWith(i(this,Ge),{unique:!0}))}notNull(){return new Et(dt.cloneWith(i(this,Ge),{notNull:!0}))}unsigned(){return new Et(dt.cloneWith(i(this,Ge),{unsigned:!0}))}defaultTo(e){return new Et(dt.cloneWith(i(this,Ge),{defaultTo:fg.create(Fp(e))}))}check(e){return new Et(dt.cloneWith(i(this,Ge),{check:Yf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.create({identity:!0,byDefault:!0})}))}stored(){if(!i(this,Ge).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Et(dt.cloneWith(i(this,Ge),{generated:Au.cloneWith(i(this,Ge).generated,{stored:!0})}))}modifyFront(e){return new Et(dt.cloneWithFrontModifier(i(this,Ge),e.toOperationNode()))}modifyEnd(e){return new Et(dt.cloneWithEndModifier(i(this,Ge),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return i(this,Ge)}};Ge=new WeakMap;let mi=Et;Le(mi,"don't await ColumnDefinitionBuilder instances directly.");const Up=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),hg=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function Co(t){return An(t)?t.toOperationNode():hg.create(t)}const dc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Fu.create(e,n),name:r?ut.create(r):void 0})},cloneWith(t,e){return p({...t,...e})}});var Xi;const Lc=class Lc{constructor(e){D(this,Xi,void 0);j(this,Xi,e)}onDelete(e){return new Lc(dc.cloneWith(i(this,Xi),{onDelete:hc(e)}))}onUpdate(e){return new Lc(dc.cloneWith(i(this,Xi),{onUpdate:hc(e)}))}$call(e){return e(this)}toOperationNode(){return i(this,Xi)}};Xi=new WeakMap;let Da=Lc;Le(Da,"don't await ForeignKeyConstraintBuilder instances directly.");const Uu=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),$p=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}}),$u=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:ut.create(t)})},cloneWith(t,e){return p({...t,...e})}}),ia=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return p({kind:"AlterColumnNode",column:mt.create(t),[e]:n})}});var qr;class Xf{constructor(e){D(this,qr,void 0);j(this,qr,e)}setDataType(e){return new sa(ia.create(i(this,qr),"dataType",Co(e)))}setDefault(e){return new sa(ia.create(i(this,qr),"setDefault",Fp(e)))}dropDefault(){return new sa(ia.create(i(this,qr),"dropDefault",!0))}setNotNull(){return new sa(ia.create(i(this,qr),"setNotNull",!0))}dropNotNull(){return new sa(ia.create(i(this,qr),"dropNotNull",!0))}$call(e){return e(this)}}qr=new WeakMap;var Qa;class sa{constructor(e){D(this,Qa,void 0);j(this,Qa,e)}toOperationNode(){return i(this,Qa)}}Qa=new WeakMap;var zn;class Ds{constructor(e){D(this,zn,void 0);j(this,zn,p(e))}toOperationNode(){return i(this,zn).executor.transformQuery(i(this,zn).node,i(this,zn).queryId)}compile(){return i(this,zn).executor.compileQuery(this.toOperationNode(),i(this,zn).queryId)}async execute(){await i(this,zn).executor.executeQuery(this.compile(),i(this,zn).queryId)}}zn=new WeakMap;Le(Ds,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Qt;const Mc=class Mc{constructor(e){D(this,Qt,void 0);j(this,Qt,p(e))}onDelete(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return i(this,Qt).executor.transformQuery(pt.cloneWithTableProps(i(this,Qt).node,{addConstraint:Uu.create(i(this,Qt).constraintBuilder.toOperationNode())}),i(this,Qt).queryId)}compile(){return i(this,Qt).executor.compileQuery(this.toOperationNode(),i(this,Qt).queryId)}async execute(){await i(this,Qt).executor.executeQuery(this.compile(),i(this,Qt).queryId)}};Qt=new WeakMap;let pc=Mc;Le(pc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var bt;const wa=class wa{constructor(e){D(this,bt,void 0);j(this,bt,p(e))}ifExists(){return new wa({...i(this,bt),node:pt.cloneWithTableProps(i(this,bt).node,{dropConstraint:$u.cloneWith(i(this,bt).node.dropConstraint,{ifExists:!0})})})}cascade(){return new wa({...i(this,bt),node:pt.cloneWithTableProps(i(this,bt).node,{dropConstraint:$u.cloneWith(i(this,bt).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new wa({...i(this,bt),node:pt.cloneWithTableProps(i(this,bt).node,{dropConstraint:$u.cloneWith(i(this,bt).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return i(this,bt).executor.transformQuery(i(this,bt).node,i(this,bt).queryId)}compile(){return i(this,bt).executor.compileQuery(this.toOperationNode(),i(this,bt).queryId)}async execute(){await i(this,bt).executor.executeQuery(this.compile(),i(this,bt).queryId)}};bt=new WeakMap;let mc=wa;Le(mc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Qp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}});var Ye;class jp{constructor(e){D(this,Ye,void 0);j(this,Ye,p(e))}renameTo(e){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{renameTo:hn(e)})})}setSchema(e){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{setSchema:ut.create(e)})})}alterColumn(e,n){const r=n(new Xf(e));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,r.toOperationNode())})}dropColumn(e){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Mp.create(e))})}renameColumn(e,n){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Bp.create(e,n))})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Lp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Up.create(a.toOperationNode()))})}addUniqueConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create($p.create(n,e))})})}addCheckConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(Yf.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,a){return new pc({...i(this,Ye),constraintBuilder:new Da(dc.create(n.map(mt.create),hn(r),a.map(mt.create),e))})}addPrimaryKeyConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(Qp.create(n,e))})})}dropConstraint(e){return new mc({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{dropConstraint:$u.create(e)})})}$call(e){return e(this)}}Ye=new WeakMap;var ht;const Qi=class Qi{constructor(e){D(this,ht,void 0);j(this,ht,p(e))}alterColumn(e,n){const r=n(new Xf(e));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,r.toOperationNode())})}dropColumn(e){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Mp.create(e))})}renameColumn(e,n){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Bp.create(e,n))})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Lp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Up.create(a.toOperationNode()))})}toOperationNode(){return i(this,ht).executor.transformQuery(i(this,ht).node,i(this,ht).queryId)}compile(){return i(this,ht).executor.compileQuery(this.toOperationNode(),i(this,ht).queryId)}async execute(){await i(this,ht).executor.executeQuery(this.compile(),i(this,ht).queryId)}};ht=new WeakMap;let Yr=Qi;Le(jp,"don't await AlterTableBuilder instances");Le(Xf,"don't await AlterColumnBuilder instances");Le(Yr,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class zp extends Vf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var Xe;const ir=class ir{constructor(e){D(this,Xe,void 0);j(this,Xe,p(e))}ifNotExists(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{ifNotExists:!0})})}unique(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{unique:!0})})}on(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{table:hn(e)})})}column(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[Ph(e)])})}columns(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,e.map(Ph))})}expression(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[e.toOperationNode()])})}using(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{using:Xt.createWithSql(e)})})}where(...e){const n=new zp;return new ir({...i(this,Xe),node:We.cloneWithWhere(i(this,Xe).node,n.transformNode(Ht(e)))})}$call(e){return e(this)}toOperationNode(){return i(this,Xe).executor.transformQuery(i(this,Xe).node,i(this,Xe).queryId)}compile(){return i(this,Xe).executor.compileQuery(this.toOperationNode(),i(this,Xe).queryId)}async execute(){await i(this,Xe).executor.executeQuery(this.compile(),i(this,Xe).queryId)}};Xe=new WeakMap;let yc=ir;Le(yc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var vn;const nh=class nh{constructor(e){D(this,vn,void 0);j(this,vn,p(e))}ifNotExists(){return new nh({...i(this,vn),node:fp.cloneWith(i(this,vn).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,vn).executor.transformQuery(i(this,vn).node,i(this,vn).queryId)}compile(){return i(this,vn).executor.compileQuery(this.toOperationNode(),i(this,vn).queryId)}async execute(){await i(this,vn).executor.executeQuery(this.compile(),i(this,vn).queryId)}};vn=new WeakMap;let wc=nh;Le(wc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function dg(t){if(ob.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Fe;const kn=class kn{constructor(e){D(this,Fe,void 0);j(this,Fe,p(e))}temporary(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{temporary:!0})})}onCommit(e){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{onCommit:dg(e)})})}ifNotExists(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{ifNotExists:!0})})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new kn({...i(this,Fe),node:Un.cloneWithColumn(i(this,Fe).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,Qp.create(n,e))})}addUniqueConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,$p.create(n,e))})}addCheckConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,Yf.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,a,l=Eo){const m=l(new Da(dc.create(n.map(mt.create),hn(r),a.map(mt.create),e)));return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,m.toOperationNode())})}modifyFront(e){return new kn({...i(this,Fe),node:Un.cloneWithFrontModifier(i(this,Fe).node,e.toOperationNode())})}modifyEnd(e){return new kn({...i(this,Fe),node:Un.cloneWithEndModifier(i(this,Fe).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,Fe).executor.transformQuery(i(this,Fe).node,i(this,Fe).queryId)}compile(){return i(this,Fe).executor.compileQuery(this.toOperationNode(),i(this,Fe).queryId)}async execute(){await i(this,Fe).executor.executeQuery(this.compile(),i(this,Fe).queryId)}};Fe=new WeakMap;let bc=kn;Le(bc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Rt;const ba=class ba{constructor(e){D(this,Rt,void 0);j(this,Rt,p(e))}on(e){return new ba({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{table:hn(e)})})}ifExists(){return new ba({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{ifExists:!0})})}cascade(){return new ba({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Rt).executor.transformQuery(i(this,Rt).node,i(this,Rt).queryId)}compile(){return i(this,Rt).executor.compileQuery(this.toOperationNode(),i(this,Rt).queryId)}async execute(){await i(this,Rt).executor.executeQuery(this.compile(),i(this,Rt).queryId)}};Rt=new WeakMap;let gc=ba;Le(gc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Gt;const Bc=class Bc{constructor(e){D(this,Gt,void 0);j(this,Gt,p(e))}ifExists(){return new Bc({...i(this,Gt),node:Vl.cloneWith(i(this,Gt).node,{ifExists:!0})})}cascade(){return new Bc({...i(this,Gt),node:Vl.cloneWith(i(this,Gt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Gt).executor.transformQuery(i(this,Gt).node,i(this,Gt).queryId)}compile(){return i(this,Gt).executor.compileQuery(this.toOperationNode(),i(this,Gt).queryId)}async execute(){await i(this,Gt).executor.executeQuery(this.compile(),i(this,Gt).queryId)}};Gt=new WeakMap;let Nc=Bc;Le(Nc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Yt;const Fc=class Fc{constructor(e){D(this,Yt,void 0);j(this,Yt,p(e))}ifExists(){return new Fc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{ifExists:!0})})}cascade(){return new Fc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Yt).executor.transformQuery(i(this,Yt).node,i(this,Yt).queryId)}compile(){return i(this,Yt).executor.compileQuery(this.toOperationNode(),i(this,Yt).queryId)}async execute(){await i(this,Yt).executor.executeQuery(this.compile(),i(this,Yt).queryId)}};Yt=new WeakMap;let vc=Fc;Le(vc,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Jr=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Uc;class pg{constructor(){D(this,Uc,new zp)}transformQuery(e){return i(this,Uc).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Uc=new WeakMap;var ot;const Gr=class Gr{constructor(e){D(this,ot,void 0);j(this,ot,p(e))}temporary(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{temporary:!0})})}materialized(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{materialized:!0})})}ifNotExists(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{ifNotExists:!0})})}orReplace(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{orReplace:!0})})}columns(e){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{columns:e.map(bp)})})}as(e){const n=e.withPlugin(new pg).toOperationNode();return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{as:n})})}$call(e){return e(this)}toOperationNode(){return i(this,ot).executor.transformQuery(i(this,ot).node,i(this,ot).queryId)}compile(){return i(this,ot).executor.compileQuery(this.toOperationNode(),i(this,ot).queryId)}async execute(){await i(this,ot).executor.executeQuery(this.compile(),i(this,ot).queryId)}};ot=new WeakMap;let _c=Gr;Le(_c,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Qu=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Dt;const ga=class ga{constructor(e){D(this,Dt,void 0);j(this,Dt,p(e))}materialized(){return new ga({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{materialized:!0})})}ifExists(){return new ga({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{ifExists:!0})})}cascade(){return new ga({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Dt).executor.transformQuery(i(this,Dt).node,i(this,Dt).queryId)}compile(){return i(this,Dt).executor.compileQuery(this.toOperationNode(),i(this,Dt).queryId)}async execute(){await i(this,Dt).executor.executeQuery(this.compile(),i(this,Dt).queryId)}};Dt=new WeakMap;let xc=ga;Le(xc,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Vp=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:$f.create(e.map(n=>br.createImmediate(n)))})}});var _n;const rh=class rh{constructor(e){D(this,_n,void 0);j(this,_n,p(e))}toOperationNode(){return i(this,_n).executor.transformQuery(i(this,_n).node,i(this,_n).queryId)}asEnum(e){return new rh({...i(this,_n),node:Vp.cloneWithEnum(i(this,_n).node,e)})}$call(e){return e(this)}compile(){return i(this,_n).executor.compileQuery(this.toOperationNode(),i(this,_n).queryId)}async execute(){await i(this,_n).executor.executeQuery(this.compile(),i(this,_n).queryId)}};_n=new WeakMap;let Ec=rh;Le(Ec,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Hp=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var xn;const ih=class ih{constructor(e){D(this,xn,void 0);j(this,xn,p(e))}ifExists(){return new ih({...i(this,xn),node:Hp.cloneWith(i(this,xn).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,xn).executor.transformQuery(i(this,xn).node,i(this,xn).queryId)}compile(){return i(this,xn).executor.compileQuery(this.toOperationNode(),i(this,xn).queryId)}async execute(){await i(this,xn).executor.executeQuery(this.compile(),i(this,xn).queryId)}};xn=new WeakMap;let Oc=ih;Le(Oc,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Xh(t){const e=".";if(t.includes(e)){const n=t.split(e).map(mg);if(n.length===2)return di.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return di.create(t)}function mg(t){return t.trim()}var Ot;const Na=class Na{constructor(e){D(this,Ot,void 0);j(this,Ot,e)}createTable(e){return new bc({queryId:He(),executor:i(this,Ot),node:Un.create(hn(e))})}dropTable(e){return new vc({queryId:He(),executor:i(this,Ot),node:Hl.create(hn(e))})}createIndex(e){return new yc({queryId:He(),executor:i(this,Ot),node:Vr.create(e)})}dropIndex(e){return new gc({queryId:He(),executor:i(this,Ot),node:Bu.create(e)})}createSchema(e){return new wc({queryId:He(),executor:i(this,Ot),node:fp.create(e)})}dropSchema(e){return new Nc({queryId:He(),executor:i(this,Ot),node:Vl.create(e)})}alterTable(e){return new jp({queryId:He(),executor:i(this,Ot),node:pt.create(hn(e))})}createView(e){return new _c({queryId:He(),executor:i(this,Ot),node:Jr.create(e)})}dropView(e){return new xc({queryId:He(),executor:i(this,Ot),node:Qu.create(e)})}createType(e){return new Ec({queryId:He(),executor:i(this,Ot),node:Vp.create(Xh(e))})}dropType(e){return new Oc({queryId:He(),executor:i(this,Ot),node:Hp.create(Xh(e))})}withPlugin(e){return new Na(i(this,Ot).withPlugin(e))}withoutPlugins(){return new Na(i(this,Ot).withoutPlugins())}withSchema(e){return new Na(i(this,Ot).withPluginAtFront(new su(e)))}};Ot=new WeakMap;let af=Na;class yg{ref(e){return new mb(e)}}var lo;class wg{constructor(e){D(this,lo,void 0);j(this,lo,e)}async provideConnection(e){const n=await i(this,lo).acquireConnection();try{return await e(n)}finally{await i(this,lo).releaseConnection(n)}}}lo=new WeakMap;var ar,ur,Cr;const ji=class ji extends Tp{constructor(n,r,a,l=[]){super(l);D(this,ar,void 0);D(this,ur,void 0);D(this,Cr,void 0);j(this,ar,n),j(this,ur,r),j(this,Cr,a)}get adapter(){return i(this,ur)}compileQuery(n){return i(this,ar).compileQuery(n)}provideConnection(n){return i(this,Cr).provideConnection(n)}withPlugins(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,...n])}withPlugin(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,n])}withPluginAtFront(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[n,...this.plugins])}withConnectionProvider(n){return new ji(i(this,ar),i(this,ur),n,[...this.plugins])}withoutPlugins(){return new ji(i(this,ar),i(this,ur),i(this,Cr),[])}};ar=new WeakMap,ur=new WeakMap,Cr=new WeakMap;let uf=ji;function Zh(){return typeof performance<"u"&&On(performance.now)?performance.now():Date.now()}var Vn,ni,Ir,fo,Tr,ja,$c,Kp,Qc,Jp,jc,Gp,zc,Yp,za,cf;class bg{constructor(e,n){D(this,$c);D(this,Qc);D(this,jc);D(this,zc);D(this,za);D(this,Vn,void 0);D(this,ni,void 0);D(this,Ir,void 0);D(this,fo,void 0);D(this,Tr,void 0);D(this,ja,new WeakSet);j(this,fo,!1),j(this,Vn,e),j(this,ni,n)}async init(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,Ir)||j(this,Ir,i(this,Vn).init().then(()=>{j(this,fo,!0)}).catch(e=>(j(this,Ir,void 0),Promise.reject(e)))),await i(this,Ir)}async acquireConnection(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,fo)||await this.init();const e=await i(this,Vn).acquireConnection();return i(this,ja).has(e)||(ge(this,$c,Kp).call(this)&&ge(this,Qc,Jp).call(this,e),i(this,ja).add(e)),e}async releaseConnection(e){await i(this,Vn).releaseConnection(e)}beginTransaction(e,n){return i(this,Vn).beginTransaction(e,n)}commitTransaction(e){return i(this,Vn).commitTransaction(e)}rollbackTransaction(e){return i(this,Vn).rollbackTransaction(e)}async destroy(){i(this,Ir)&&(await i(this,Ir),i(this,Tr)||j(this,Tr,i(this,Vn).destroy().catch(e=>(j(this,Tr,void 0),Promise.reject(e)))),await i(this,Tr))}}Vn=new WeakMap,ni=new WeakMap,Ir=new WeakMap,fo=new WeakMap,Tr=new WeakMap,ja=new WeakMap,$c=new WeakSet,Kp=function(){return i(this,ni).isLevelEnabled("query")||i(this,ni).isLevelEnabled("error")},Qc=new WeakSet,Jp=function(e){const n=e.executeQuery;e.executeQuery=async r=>{const a=Zh();try{return await n.call(e,r)}catch(l){throw await ge(this,jc,Gp).call(this,l,r,a),l}finally{await ge(this,zc,Yp).call(this,r,a)}}},jc=new WeakSet,Gp=async function(e,n,r){await i(this,ni).error(()=>({level:"error",error:e,query:n,queryDurationMillis:ge(this,za,cf).call(this,r)}))},zc=new WeakSet,Yp=async function(e,n){await i(this,ni).query(()=>({level:"query",query:e,queryDurationMillis:ge(this,za,cf).call(this,n)}))},za=new WeakSet,cf=function(e){return Zh()-e};var Va,ri,Vc,Zp;class Xp{constructor(e){D(this,Vc);D(this,Va,void 0);D(this,ri,void 0);j(this,Va,e)}async provideConnection(e){for(;i(this,ri);)await i(this,ri);const n=ge(this,Vc,Zp).call(this,e);return j(this,ri,n.then(()=>{j(this,ri,void 0)}).catch(()=>{j(this,ri,void 0)})),n}}Va=new WeakMap,ri=new WeakMap,Vc=new WeakSet,Zp=async function(e){return await e(i(this,Va))};const gg=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var ii,Zi;class Ng{constructor(e){D(this,ii,void 0);D(this,Zi,void 0);On(e)?(j(this,Zi,e),j(this,ii,p({query:!0,error:!0}))):(j(this,Zi,vg),j(this,ii,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return i(this,ii)[e]}async query(e){i(this,ii).query&&await i(this,Zi).call(this,e())}async error(e){i(this,ii).error&&await i(this,Zi).call(this,e())}}ii=new WeakMap,Zi=new WeakMap;function vg(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function _g(t){return dr(t)&&On(t.compile)}var Pt;const Qs=class Qs extends cc{constructor(n){let r,a;if(xg(n))r={executor:n.executor},a={...n};else{const l=n.dialect,m=l.createDriver(),b=l.createQueryCompiler(),v=l.createAdapter(),d=new Ng(n.log??[]),T=new bg(m,d),S=new wg(T),H=new uf(b,v,S,n.plugins??[]);r={executor:H},a={config:n,executor:H,dialect:l,driver:T}}super(r);D(this,Pt,void 0);j(this,Pt,p(a))}get schema(){return new af(i(this,Pt).executor)}get dynamic(){return new yg}get introspection(){return i(this,Pt).dialect.createIntrospector(this.withoutPlugins())}case(n){return new Wp({node:mr.create(ls(n)?void 0:Wo(n))})}get fn(){return Ap()}transaction(){return new qc({...i(this,Pt)})}connection(){return new em({...i(this,Pt)})}withPlugin(n){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withPlugin(n)})}withoutPlugins(){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withoutPlugins()})}withSchema(n){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withPluginAtFront(new su(n))})}withTables(){return new Qs({...i(this,Pt)})}async destroy(){await i(this,Pt).driver.destroy()}get isTransaction(){return!1}getExecutor(){return i(this,Pt).executor}executeQuery(n,r=He()){const a=_g(n)?n.compile():n;return this.getExecutor().executeQuery(a,r)}};Pt=new WeakMap;let Pa=Qs;var Hn;const js=class js extends Pa{constructor(n){super(n);D(this,Hn,void 0);j(this,Hn,n)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(n){return new js({...i(this,Hn),executor:i(this,Hn).executor.withPlugin(n)})}withoutPlugins(){return new js({...i(this,Hn),executor:i(this,Hn).executor.withoutPlugins()})}withSchema(n){return new js({...i(this,Hn),executor:i(this,Hn).executor.withPluginAtFront(new su(n))})}withTables(){return new js({...i(this,Hn)})}};Hn=new WeakMap;let lf=js;function xg(t){return dr(t)&&dr(t.config)&&dr(t.driver)&&dr(t.executor)&&dr(t.dialect)}var es;class em{constructor(e){D(this,es,void 0);j(this,es,p(e))}async execute(e){return i(this,es).executor.provideConnection(async n=>{const r=i(this,es).executor.withConnectionProvider(new Xp(n)),a=new Pa({...i(this,es),executor:r});return await e(a)})}}es=new WeakMap;Le(em,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Kn;const sh=class sh{constructor(e){D(this,Kn,void 0);j(this,Kn,p(e))}setIsolationLevel(e){return new sh({...i(this,Kn),isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=i(this,Kn),a={isolationLevel:n};return Eg(a),i(this,Kn).executor.provideConnection(async l=>{const m=i(this,Kn).executor.withConnectionProvider(new Xp(l)),b=new lf({...r,executor:m});try{await i(this,Kn).driver.beginTransaction(l,a);const v=await e(b);return await i(this,Kn).driver.commitTransaction(l),v}catch(v){throw await i(this,Kn).driver.rollbackTransaction(l),v}})}};Kn=new WeakMap;let qc=sh;Le(qc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Eg(t){if(t.isolationLevel&&!gg.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var cn,ho,ju,Ha,ff,Ka,hf;const Hc=class Hc{constructor(e){D(this,ho);D(this,Ha);D(this,Ka);D(this,cn,void 0);j(this,cn,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new tm(this,e)}$castTo(){return new Hc({...i(this,cn)})}withPlugin(e){return new Hc({...i(this,cn),plugins:i(this,cn).plugins!==void 0?p([...i(this,cn).plugins,e]):p([e])})}toOperationNode(){return ge(this,Ha,ff).call(this,ge(this,ho,ju).call(this))}compile(e){return ge(this,Ka,hf).call(this,ge(this,ho,ju).call(this,e))}async execute(e){const n=ge(this,ho,ju).call(this,e);return n.executeQuery(ge(this,Ka,hf).call(this,n),i(this,cn).queryId)}};cn=new WeakMap,ho=new WeakSet,ju=function(e){const n=e!==void 0?e.getExecutor():Hf;return i(this,cn).plugins!==void 0?n.withPlugins(i(this,cn).plugins):n},Ha=new WeakSet,ff=function(e){return e.transformQuery(i(this,cn).rawNode,i(this,cn).queryId)},Ka=new WeakSet,hf=function(e){return e.compileQuery(ge(this,Ha,ff).call(this,e),i(this,cn).queryId)};let Cc=Hc;function zr(t){return new Cc(t)}Le(Cc,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ts,si;class tm{constructor(e,n){D(this,ts,void 0);D(this,si,void 0);j(this,ts,e),j(this,si,n)}get expression(){return i(this,ts)}get alias(){return i(this,si)}get rawBuilder(){return i(this,ts)}toOperationNode(){return yi.create(i(this,ts).toOperationNode(),An(i(this,si))?i(this,si).toOperationNode():ut.create(i(this,si)))}}ts=new WeakMap,si=new WeakMap;Le(tm,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const at=Object.assign((t,...e)=>zr({queryId:He(),rawNode:Xt.create(t,(e==null?void 0:e.map(Zt))??[])}),{ref(t){return zr({queryId:He(),rawNode:Xt.createWithChild(Ar(t))})},val(t){return zr({queryId:He(),rawNode:Xt.createWithChild(Zt(t))})},value(t){return this.val(t)},table(t){return zr({queryId:He(),rawNode:Xt.createWithChild(hn(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:He(),rawNode:Xt.create(e,t.map(ut.create))})},lit(t){return zr({queryId:He(),rawNode:Xt.createWithChild(br.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:He(),rawNode:Xt.createWithSql(t)})},join(t,e=at`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let a=0;a<t.length;++a)n[2*a]=Zt(t[a]),a!==t.length-1&&(n[2*a+1]=r);return zr({queryId:He(),rawNode:Xt.createWithChildren(n)})}});var Kc;class Og{constructor(){we(this,"nodeStack",[]);D(this,Kc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));we(this,"visitNode",e=>{this.nodeStack.push(e),i(this,Kc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Kc=new WeakMap;var po,ns;class qg extends Og{constructor(){super(...arguments);D(this,po,"");D(this,ns,[])}get numParameters(){return i(this,ns).length}compileQuery(n){return j(this,po,""),j(this,ns,[]),this.visitNode(n),p({query:n,sql:this.getSql(),parameters:[...i(this,ns)]})}getSql(){return i(this,po)}visitSelectQuery(n){var a,l;const r=this.parentNode!==void 0&&!Oo.is(this.parentNode)&&!fr.is(this.parentNode)&&!Jr.is(this.parentNode)&&!Sp.is(this.parentNode);this.parentNode===void 0&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("select"),n.distinctOn&&(this.append(" "),this.compileDistinctOn(n.distinctOn)),(a=n.frontModifiers)!=null&&a.length&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.selections&&(this.append(" "),this.compileList(n.selections)),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.groupBy&&(this.append(" "),this.visitNode(n.groupBy)),n.having&&(this.append(" "),this.visitNode(n.having)),n.setOperations&&(this.append(" "),this.compileList(n.setOperations," ")),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.offset&&(this.append(" "),this.visitNode(n.offset)),(l=n.endModifiers)!=null&&l.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...n.endModifiers])," ")),r&&this.append(")")}visitFrom(n){this.append("from "),this.compileList(n.froms)}visitSelection(n){this.visitNode(n.selection)}visitColumn(n){this.visitNode(n.column)}compileDistinctOn(n){this.append("distinct on ("),this.compileList(n),this.append(")")}compileList(n,r=", "){const a=n.length-1;for(let l=0;l<=a;l++)this.visitNode(n[l]),l<a&&this.append(r)}visitWhere(n){this.append("where "),this.visitNode(n.where)}visitHaving(n){this.append("having "),this.visitNode(n.having)}visitInsertQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append(n.replace?"replace":"insert"),n.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(n.into),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.values&&(this.append(" "),this.visitNode(n.values)),n.onConflict&&(this.append(" "),this.visitNode(n.onConflict)),n.onDuplicateKey&&(this.append(" "),this.visitNode(n.onDuplicateKey)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitValues(n){this.append("values "),this.compileList(n.values)}visitDeleteQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("delete "),this.visitNode(n.from),n.using&&(this.append(" "),this.visitNode(n.using)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitReturning(n){this.append("returning "),this.compileList(n.selections)}visitAlias(n){this.visitNode(n.node),this.append(" as "),this.visitNode(n.alias)}visitReference(n){n.table&&(this.visitNode(n.table),this.append(".")),this.visitNode(n.column)}visitSelectAll(n){this.append("*")}visitIdentifier(n){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(n),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(n){if(!wr(n.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(n.name))}visitAnd(n){this.visitNode(n.left),this.append(" and "),this.visitNode(n.right)}visitOr(n){this.visitNode(n.left),this.append(" or "),this.visitNode(n.right)}visitValue(n){n.immediate?this.appendImmediateValue(n.value):this.appendValue(n.value)}visitValueList(n){this.append("("),this.compileList(n.values),this.append(")")}visitTuple(n){this.append("("),this.compileList(n.values),this.append(")")}visitPrimitiveValueList(n){this.append("(");const{values:r}=n;for(let a=0;a<r.length;++a)this.appendValue(r[a]),a!==r.length-1&&this.append(", ");this.append(")")}visitParens(n){this.append("("),this.visitNode(n.node),this.append(")")}visitJoin(n){this.append(Ig[n.joinType]),this.append(" "),this.visitNode(n.table),n.on&&(this.append(" "),this.visitNode(n.on))}visitOn(n){this.append("on "),this.visitNode(n.on)}visitRaw(n){const{sqlFragments:r,parameters:a}=n;for(let l=0;l<r.length;++l)this.append(r[l]),a.length>l&&this.visitNode(a[l])}visitOperator(n){this.append(n.operator)}visitTable(n){this.visitNode(n.table)}visitSchemableIdentifier(n){n.schema&&(this.visitNode(n.schema),this.append(".")),this.visitNode(n.identifier)}visitCreateTable(n){this.append("create "),n.frontModifiers&&n.frontModifiers.length>0&&(this.compileList(n.frontModifiers," "),this.append(" ")),n.temporary&&this.append("temporary "),this.append("table "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.table),this.append(" ("),this.compileList([...n.columns,...n.constraints??[]]),this.append(")"),n.onCommit&&(this.append(" on commit "),this.append(n.onCommit)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}visitColumnDefinition(n){this.visitNode(n.column),this.append(" "),this.visitNode(n.dataType),n.unsigned&&this.append(" unsigned"),n.frontModifiers&&n.frontModifiers.length>0&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.generated&&(this.append(" "),this.visitNode(n.generated)),n.defaultTo&&(this.append(" "),this.visitNode(n.defaultTo)),n.notNull&&this.append(" not null"),n.unique&&this.append(" unique"),n.primaryKey&&this.append(" primary key"),n.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),n.references&&(this.append(" "),this.visitNode(n.references)),n.check&&(this.append(" "),this.visitNode(n.check)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(n){this.append("references "),this.visitNode(n.table),this.append(" ("),this.compileList(n.columns),this.append(")"),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitDropTable(n){this.append("drop table "),n.ifExists&&this.append("if exists "),this.visitNode(n.table),n.cascade&&this.append(" cascade")}visitDataType(n){this.append(n.dataType)}visitOrderBy(n){this.append("order by "),this.compileList(n.items)}visitOrderByItem(n){this.visitNode(n.orderBy),n.direction&&(this.append(" "),this.visitNode(n.direction))}visitGroupBy(n){this.append("group by "),this.compileList(n.items)}visitGroupByItem(n){this.visitNode(n.groupBy)}visitUpdateQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("update "),this.visitNode(n.table),this.append(" set "),n.updates&&this.compileList(n.updates),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitColumnUpdate(n){this.visitNode(n.column),this.append(" = "),this.visitNode(n.value)}visitLimit(n){this.append("limit "),this.visitNode(n.limit)}visitOffset(n){this.append("offset "),this.visitNode(n.offset)}visitOnConflict(n){this.append("on conflict"),n.columns?(this.append(" ("),this.compileList(n.columns),this.append(")")):n.constraint?(this.append(" on constraint "),this.visitNode(n.constraint)):n.indexExpression&&(this.append(" ("),this.visitNode(n.indexExpression),this.append(")")),n.indexWhere&&(this.append(" "),this.visitNode(n.indexWhere)),n.doNothing===!0?this.append(" do nothing"):n.updates&&(this.append(" do update set "),this.compileList(n.updates),n.updateWhere&&(this.append(" "),this.visitNode(n.updateWhere)))}visitOnDuplicateKey(n){this.append("on duplicate key update "),this.compileList(n.updates)}visitCreateIndex(n){this.append("create "),n.unique&&this.append("unique "),this.append("index "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.using&&(this.append(" using "),this.visitNode(n.using)),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.where&&(this.append(" "),this.visitNode(n.where))}visitDropIndex(n){this.append("drop index "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.cascade&&this.append(" cascade")}visitCreateSchema(n){this.append("create schema "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.schema)}visitDropSchema(n){this.append("drop schema "),n.ifExists&&this.append("if exists "),this.visitNode(n.schema),n.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("primary key ("),this.compileList(n.columns),this.append(")")}visitUniqueConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("unique ("),this.compileList(n.columns),this.append(")")}visitCheckConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("check ("),this.visitNode(n.expression),this.append(")")}visitForeignKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("foreign key ("),this.compileList(n.columns),this.append(") "),this.visitNode(n.references),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitList(n){this.compileList(n.items)}visitWith(n){this.append("with "),n.recursive&&this.append("recursive "),this.compileList(n.expressions)}visitCommonTableExpression(n){this.visitNode(n.name),this.append(" as "),Xu(n.materialized)&&(n.materialized||this.append("not "),this.append("materialized ")),this.visitNode(n.expression)}visitCommonTableExpressionName(n){this.visitNode(n.table),n.columns&&(this.append("("),this.compileList(n.columns),this.append(")"))}visitAlterTable(n){this.append("alter table "),this.visitNode(n.table),this.append(" "),n.renameTo&&(this.append("rename to "),this.visitNode(n.renameTo)),n.setSchema&&(this.append("set schema "),this.visitNode(n.setSchema)),n.addConstraint&&this.visitNode(n.addConstraint),n.dropConstraint&&this.visitNode(n.dropConstraint),n.columnAlterations&&this.compileList(n.columnAlterations)}visitAddColumn(n){this.append("add column "),this.visitNode(n.column)}visitRenameColumn(n){this.append("rename column "),this.visitNode(n.column),this.append(" to "),this.visitNode(n.renameTo)}visitDropColumn(n){this.append("drop column "),this.visitNode(n.column)}visitAlterColumn(n){this.append("alter column "),this.visitNode(n.column),this.append(" "),n.dataType&&(this.append("type "),this.visitNode(n.dataType),n.dataTypeExpression&&(this.append("using "),this.visitNode(n.dataTypeExpression))),n.setDefault&&(this.append("set default "),this.visitNode(n.setDefault)),n.dropDefault&&this.append("drop default"),n.setNotNull&&this.append("set not null"),n.dropNotNull&&this.append("drop not null")}visitModifyColumn(n){this.append("modify column "),this.visitNode(n.column)}visitAddConstraint(n){this.append("add "),this.visitNode(n.constraint)}visitDropConstraint(n){this.append("drop constraint "),n.ifExists&&this.append("if exists "),this.visitNode(n.constraintName),n.modifier==="cascade"?this.append(" cascade"):n.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(n){this.append(n.operator),this.append(" "),n.all&&this.append("all "),this.visitNode(n.expression)}visitCreateView(n){this.append("create "),n.orReplace&&this.append("or replace "),n.materialized&&this.append("materialized "),n.temporary&&this.append("temporary "),this.append("view "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),this.append(" "),n.columns&&(this.append("("),this.compileList(n.columns),this.append(") ")),n.as&&(this.append("as "),this.visitNode(n.as))}visitDropView(n){this.append("drop "),n.materialized&&this.append("materialized "),this.append("view "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.cascade&&this.append(" cascade")}visitGenerated(n){this.append("generated "),n.always&&this.append("always "),n.byDefault&&this.append("by default "),this.append("as "),n.identity&&this.append("identity"),n.expression&&(this.append("("),this.visitNode(n.expression),this.append(")")),n.stored&&this.append(" stored")}visitDefaultValue(n){this.append("default "),this.visitNode(n.defaultValue)}visitSelectModifier(n){n.rawModifier?this.visitNode(n.rawModifier):this.append(Cg[n.modifier])}visitCreateType(n){this.append("create type "),this.visitNode(n.name),n.enum&&(this.append(" as enum "),this.visitNode(n.enum))}visitDropType(n){this.append("drop type "),n.ifExists&&this.append("if exists "),this.visitNode(n.name)}visitExplain(n){this.append("explain"),(n.options||n.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),n.options&&(this.visitNode(n.options),n.format&&this.append(this.getExplainOptionsDelimiter())),n.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(n.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(n){this.append("default")}visitAggregateFunction(n){this.append(n.func),this.append("("),n.distinct&&this.append("distinct "),this.compileList(n.aggregated),this.append(")"),n.filter&&(this.append(" filter("),this.visitNode(n.filter),this.append(")")),n.over&&(this.append(" "),this.visitNode(n.over))}visitOver(n){this.append("over("),n.partitionBy&&(this.visitNode(n.partitionBy),n.orderBy&&this.append(" ")),n.orderBy&&this.visitNode(n.orderBy),this.append(")")}visitPartitionBy(n){this.append("partition by "),this.compileList(n.items)}visitPartitionByItem(n){this.visitNode(n.partitionBy)}visitBinaryOperation(n){this.visitNode(n.leftOperand),this.append(" "),this.visitNode(n.operator),this.append(" "),this.visitNode(n.rightOperand)}visitUnaryOperation(n){this.visitNode(n.operator),this.isMinusOperator(n.operator)||this.append(" "),this.visitNode(n.operand)}isMinusOperator(n){return fs.is(n)&&n.operator==="-"}visitUsing(n){this.append("using "),this.compileList(n.tables)}visitFunction(n){this.append(n.func),this.append("("),this.compileList(n.arguments),this.append(")")}visitCase(n){this.append("case"),n.value&&(this.append(" "),this.visitNode(n.value)),n.when&&(this.append(" "),this.compileList(n.when," ")),n.else&&(this.append(" else "),this.visitNode(n.else)),this.append(" end"),n.isStatement&&this.append(" case")}visitWhen(n){this.append("when "),this.visitNode(n.condition),n.result&&(this.append(" then "),this.visitNode(n.result))}visitJSONReference(n){this.visitNode(n.reference),this.visitNode(n.traversal)}visitJSONPath(n){n.inOperator&&this.visitNode(n.inOperator),this.append("'$");for(const r of n.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(n){const r=n.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(n.value)),r&&this.append("]")}visitJSONOperatorChain(n){for(let r=0,a=n.values.length;r<a;r++)r===a-1?this.visitNode(n.operator):this.append("->"),this.visitNode(n.values[r])}append(n){j(this,po,i(this,po)+n)}appendValue(n){this.addParameter(n),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(n){const r=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const m of n)l+=m,m===r?l+=r:m===a&&(l+=a);return l}addParameter(n){i(this,ns).push(n)}appendImmediateValue(n){if(wr(n))this.append(`'${n}'`);else if(lp(n)||Xu(n))this.append(n.toString());else if(Bf(n))this.append("null");else if(ib(n))this.appendImmediateValue(n.toISOString());else if(sb(n))this.appendImmediateValue(n.toString());else throw new Error(`invalid immediate value ${n}`)}sortSelectModifiers(n){return n.sort((r,a)=>r.modifier&&a.modifier?ed[r.modifier]-ed[a.modifier]:1),p(n)}}po=new WeakMap,ns=new WeakMap;const Cg=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),ed=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Ig=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),yr=p({raw(t,e=[]){return p({sql:t,query:Xt.createWithSql(t),parameters:p(e)})}}),Tg=/"/g;class nm extends qg{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(Tg,'""')}visitDefaultInsertValue(e){this.append("null")}}const rm="kysely_migration",im="kysely_migration_lock";p({__noMigrations__:!0});var mo,Jc,om;class sm{constructor(e){D(this,Jc);D(this,mo,void 0);j(this,mo,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=i(this,mo).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",rm).where("name","!=",im));const r=await n.execute();return Promise.all(r.map(({name:a})=>ge(this,Jc,om).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}mo=new WeakMap,Jc=new WeakSet,om=async function(e){var m,b,v,d,T,S;const n=i(this,mo),r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=(S=(T=(d=(v=(b=(m=r.sql)==null?void 0:m.split(/[\(\),]/))==null?void 0:b.find(H=>H.toLowerCase().includes("autoincrement")))==null?void 0:v.trimStart())==null?void 0:d.split(/\s+/))==null?void 0:T[0])==null?void 0:S.replace(/["`]/g,""),l=await n.selectFrom(at`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:l.map(H=>({name:H.name,dataType:H.type,isNullable:!H.notnull,isAutoIncrementing:H.name===a,hasDefaultValue:H.dflt_value!=null}))}};class am{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}var um=class{createQueryCompiler(){return new nm}createAdapter(){return new am}createIntrospector(t){return new sm(t)}},Ja,pd,cm=(pd=class{constructor(){D(this,Ja,new Sg);we(this,"connection")}async acquireConnection(){return await i(this,Ja).lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){i(this,Ja).unlock()}},Ja=new WeakMap,pd),Sg=class{constructor(){we(this,"promise");we(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e==null||e()}},lm=class{streamQuery(){throw new Error("Sqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t;return["SelectQueryNode","RawNode"].includes(r.kind)?{rows:await this.query(n,e)}:{rows:[],...await this.exec(n,e)}}};function kg({func:t,delay:e,maxCalls:n}){let r,a=0,l=null;function m(){r&&clearTimeout(r),a=0,l=null}function b(){a>=n?(t(l),m()):(r&&clearTimeout(r),r=setTimeout(()=>{t(l),m(),r=void 0},e))}return v=>{a++,l=v,r===void 0&&a===0?(t(v),a++):b()}}var Ag=class extends cm{constructor(e){super();we(this,"config");we(this,"db");this.config=e}async init(){var e,n,r,a,l,m;if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Wg(this.db,(e=this.config.onWrite)==null?void 0:e.func,(n=this.config.onWrite)==null?void 0:n.isThrottle,(r=this.config.onWrite)==null?void 0:r.maxCalls,(a=this.config.onWrite)==null?void 0:a.delay),await((m=(l=this.config).onCreateConnection)==null?void 0:m.call(l,this.connection))}async beginTransaction(e){await e.executeQuery(yr.raw("begin")),e.transactionNum++}async commitTransaction(e){await e.executeQuery(yr.raw("commit")),e.transactionNum--}async rollbackTransaction(e){await e.executeQuery(yr.raw("rollback")),e.transactionNum--}async destroy(){var e;(e=this.db)==null||e.close()}},Wg=class extends lm{constructor(e,n,r=!1,a=1e3,l=2e3){super();we(this,"db");we(this,"onWrite");we(this,"transactionNum",0);this.db=e,this.onWrite=n?r?kg({func:n,maxCalls:a,delay:l}):n:void 0}query(e,n){const r=this.db.prepare(e);r.bind(n);const a=[];for(;r.step();)a.push(r.getAsObject());return r.free(),a}exec(e,n){this.db.run(e,n);const r=BigInt(this.query("SELECT last_insert_rowid() as id")[0].id),a=BigInt(this.db.getRowsModified());return this.transactionNum===0&&this.onWrite&&this.onWrite(this.db.export()),{numAffectedRows:a,insertId:r}}},Ga,md,Rg=(md=class extends um{constructor(e){super();D(this,Ga,void 0);j(this,Ga,e)}createDriver(){return new Ag(i(this,Ga))}},Ga=new WeakMap,md),Dg=class extends cm{constructor(e){super();we(this,"config");we(this,"db");this.config=e}async init(){var e,n;this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new Pg(this.db),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async destroy(){var e;await((e=this.db)==null?void 0:e.sqlite.close(this.db.db))}},Pg=class extends lm{constructor(e){super();we(this,"sqlite");we(this,"db");this.db=e.db,this.sqlite=e.sqlite}async run(e){const n=this.sqlite.str_new(this.db,e.sql),r=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(n));if(r===null)return[];const a=r.stmt;try{typeof e.param<"u"&&this.sqlite.bind_collection(a,e.param);const l=[];let m=[];for(;await this.sqlite.step(a)===100;){m=m.length===0?this.sqlite.column_names(a):m;const b=this.sqlite.row(a);l.push(m.reduce((v,d,T)=>(v[d]=b[T],v),{}))}return l}finally{await this.sqlite.finalize(a)}}async query(e,n){return await this.run({sql:e,param:n})}async exec(e,n){await this.run({sql:e,param:n});const r=await this.run({sql:"SELECT last_insert_rowid() as id"});return{insertId:BigInt(r[0].id),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ya,yd,Lg=(yd=class extends um{constructor(e){super();D(this,Ya,void 0);j(this,Ya,e)}createDriver(){return new Dg(i(this,Ya))}},Ya=new WeakMap,yd);function Mg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var fm={exports:{}};const Fg={},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"})),Wu=Bg(Ug);(function(t,e){var n=void 0,r=function(a){return n||(n=new Promise(function(l,m){var b=typeof a<"u"?a:{},v=b.onAbort;b.onAbort=function(o){m(new Error(o)),v&&v(o)},b.postRun=b.postRun||[],b.postRun.push(function(){l(b)}),t=void 0;var d;d||(d=typeof b<"u"?b:{}),d.onRuntimeInitialized=function(){function o(I,G){switch(typeof G){case"boolean":Eu(I,G?1:0);break;case"number":_u(I,G);break;case"string":ta(I,G,-1,-1);break;case"object":if(G===null)ea(I);else if(G.length!=null){var s=Is(G);xu(I,s,G.length,-1),Ai(s)}else Di(I,"Wrong API use : tried to return a value of an unknown type ("+G+").",-1);break;default:ea(I)}}function c(I,G){for(var s=[],u=0;u<I;u+=1){var f=J(G+4*u,"i32"),y=Zo(f);if(y===1||y===2)f=vu(f);else if(y===3)f=gu(f);else if(y===4){y=f,f=bu(y),y=Nu(y);for(var _=new Uint8Array(f),A=0;A<f;A+=1)_[A]=pe[y+A];f=_}else f=null;s.push(f)}return s}function h(I,G){this.La=I,this.db=G,this.Ja=1,this.fb=[]}function w(I,G){if(this.db=G,G=tn(I)+1,this.Ya=ki(G),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");en(I,Oe,this.Ya,G),this.eb=this.Ya,this.Ua=this.ib=null}function E(I){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),I!=null){var G=this.filename,s="/",u=G;if(s&&(s=typeof s=="string"?s:bi(s),u=G?ue(s+"/"+G):s),G=rn(!0,!0),u=Ni(u,(G!==void 0?G:438)&4095|32768,0),I){if(typeof I=="string"){s=Array(I.length);for(var f=0,y=I.length;f<y;++f)s[f]=I.charCodeAt(f);I=s}Ns(u,G|146),s=tr(u,577),nr(s,I,0,I.length,0),Qe(s),Ns(u,G)}}this.handleError(ye(this.filename,P)),this.db=J(P,"i32"),Ss(this.db),this.Za={},this.Na={}}var P=Bn(4),F=d.cwrap,ye=F("sqlite3_open","number",["string","number"]),Pe=F("sqlite3_close_v2","number",["number"]),Ae=F("sqlite3_exec","number",["number","string","number","number","number"]),it=F("sqlite3_changes","number",["number"]),In=F("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Jo=F("sqlite3_sql","string",["number"]),Go=F("sqlite3_normalized_sql","string",["number"]),Ri=F("sqlite3_prepare_v2","number",["number","number","number","number","number"]),yl=F("sqlite3_bind_text","number",["number","number","number","number","number"]),Fn=F("sqlite3_bind_blob","number",["number","number","number","number","number"]),Tn=F("sqlite3_bind_double","number",["number","number","number"]),lu=F("sqlite3_bind_int","number",["number","number","number"]),Ts=F("sqlite3_bind_parameter_index","number",["number","string"]),fu=F("sqlite3_step","number",["number"]),hu=F("sqlite3_errmsg","string",["number"]),wl=F("sqlite3_column_count","number",["number"]),Yo=F("sqlite3_data_count","number",["number"]),bl=F("sqlite3_column_double","number",["number","number"]),du=F("sqlite3_column_text","string",["number","number"]),gl=F("sqlite3_column_blob","number",["number","number"]),pu=F("sqlite3_column_bytes","number",["number","number"]),mu=F("sqlite3_column_type","number",["number","number"]),yu=F("sqlite3_column_name","string",["number","number"]),Sn=F("sqlite3_reset","number",["number"]),wu=F("sqlite3_clear_bindings","number",["number"]),Nl=F("sqlite3_finalize","number",["number"]),Xo=F("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Zo=F("sqlite3_value_type","number",["number"]),bu=F("sqlite3_value_bytes","number",["number"]),gu=F("sqlite3_value_text","string",["number"]),Nu=F("sqlite3_value_blob","number",["number"]),vu=F("sqlite3_value_double","number",["number"]),_u=F("sqlite3_result_double","",["number","number"]),ea=F("sqlite3_result_null","",["number"]),ta=F("sqlite3_result_text","",["number","string","number","number"]),xu=F("sqlite3_result_blob","",["number","number","number","number"]),Eu=F("sqlite3_result_int","",["number","number"]),Di=F("sqlite3_result_error","",["number","string","number"]),na=F("sqlite3_aggregate_context","number",["number","number"]),Ss=F("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(I){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(I)?this.xb(I):I!=null&&typeof I=="object"?this.yb(I):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var I=fu(this.La);switch(I){case 100:return!0;case 101:return!1;default:throw this.db.handleError(I)}},h.prototype.sb=function(I){return I==null&&(I=this.Ja,this.Ja+=1),bl(this.La,I)},h.prototype.Cb=function(I){if(I==null&&(I=this.Ja,this.Ja+=1),I=du(this.La,I),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(I)},h.prototype.Db=function(I){return I==null&&(I=this.Ja,this.Ja+=1),du(this.La,I)},h.prototype.getBlob=function(I){I==null&&(I=this.Ja,this.Ja+=1);var G=pu(this.La,I);I=gl(this.La,I);for(var s=new Uint8Array(G),u=0;u<G;u+=1)s[u]=pe[I+u];return s},h.prototype.get=function(I,G){G=G||{},I!=null&&this.bind(I)&&this.step(),I=[];for(var s=Yo(this.La),u=0;u<s;u+=1)switch(mu(this.La,u)){case 1:var f=G.useBigInt?this.Cb(u):this.sb(u);I.push(f);break;case 2:I.push(this.sb(u));break;case 3:I.push(this.Db(u));break;case 4:I.push(this.getBlob(u));break;default:I.push(null)}return I},h.prototype.getColumnNames=function(){for(var I=[],G=wl(this.La),s=0;s<G;s+=1)I.push(yu(this.La,s));return I},h.prototype.getAsObject=function(I,G){I=this.get(I,G),G=this.getColumnNames();for(var s={},u=0;u<G.length;u+=1)s[G[u]]=I[u];return s},h.prototype.getSQL=function(){return Jo(this.La)},h.prototype.getNormalizedSQL=function(){return Go(this.La)},h.prototype.run=function(I){return I!=null&&this.bind(I),this.step(),this.reset()},h.prototype.nb=function(I,G){G==null&&(G=this.Ja,this.Ja+=1),I=tt(I);var s=Is(I);this.fb.push(s),this.db.handleError(yl(this.La,G,s,I.length-1,0))},h.prototype.wb=function(I,G){G==null&&(G=this.Ja,this.Ja+=1);var s=Is(I);this.fb.push(s),this.db.handleError(Fn(this.La,G,s,I.length,0))},h.prototype.mb=function(I,G){G==null&&(G=this.Ja,this.Ja+=1),this.db.handleError((I===(I|0)?lu:Tn)(this.La,G,I))},h.prototype.zb=function(I){I==null&&(I=this.Ja,this.Ja+=1),Fn(this.La,I,0,0,0)},h.prototype.ob=function(I,G){switch(G==null&&(G=this.Ja,this.Ja+=1),typeof I){case"string":this.nb(I,G);return;case"number":this.mb(I,G);return;case"bigint":this.nb(I.toString(),G);return;case"boolean":this.mb(I+0,G);return;case"object":if(I===null){this.zb(G);return}if(I.length!=null){this.wb(I,G);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+I+")."},h.prototype.yb=function(I){var G=this;return Object.keys(I).forEach(function(s){var u=Ts(G.La,s);u!==0&&G.ob(I[s],u)}),!0},h.prototype.xb=function(I){for(var G=0;G<I.length;G+=1)this.ob(I[G],G+1);return!0},h.prototype.reset=function(){return this.freemem(),wu(this.La)===0&&Sn(this.La)===0},h.prototype.freemem=function(){for(var I;(I=this.fb.pop())!==void 0;)Ai(I)},h.prototype.free=function(){this.freemem();var I=Nl(this.La)===0;return delete this.db.Za[this.La],this.La=0,I},w.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var I=Ur(),G=Bn(4);ce(P),ce(G);try{this.db.handleError(Ri(this.db.db,this.eb,-1,P,G)),this.eb=J(G,"i32");var s=J(P,"i32");return s===0?(this.gb(),{done:!0}):(this.Ua=new h(s,this.db),this.db.Za[s]=this.Ua,{value:this.Ua,done:!1})}catch(u){throw this.ib=et(this.eb),this.gb(),u}finally{$r(I)}},w.prototype.gb=function(){Ai(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:et(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(w.prototype[Symbol.iterator]=function(){return this}),E.prototype.run=function(I,G){if(!this.db)throw"Database closed";if(G){I=this.prepare(I,G);try{I.step()}finally{I.free()}}else this.handleError(Ae(this.db,I,0,0,P));return this},E.prototype.exec=function(I,G,s){if(!this.db)throw"Database closed";var u=Ur(),f=null;try{var y=tn(I)+1,_=Bn(y);en(I,pe,_,y);var A=_,k=Bn(4);for(I=[];J(A,"i8")!==0;){ce(P),ce(k),this.handleError(Ri(this.db,A,-1,P,k));var Q=J(P,"i32");if(A=J(k,"i32"),Q!==0){for(y=null,f=new h(Q,this),G!=null&&f.bind(G);f.step();)y===null&&(y={columns:f.getColumnNames(),values:[]},I.push(y)),y.values.push(f.get(null,s));f.free()}}return I}catch(L){throw f&&f.free(),L}finally{$r(u)}},E.prototype.each=function(I,G,s,u,f){typeof G=="function"&&(u=s,s=G,G=void 0),I=this.prepare(I,G);try{for(;I.step();)s(I.getAsObject(null,f))}finally{I.free()}if(typeof u=="function")return u()},E.prototype.prepare=function(I,G){if(ce(P),this.handleError(In(this.db,I,-1,P,0)),I=J(P,"i32"),I===0)throw"Nothing to prepare";var s=new h(I,this);return G!=null&&s.bind(G),this.Za[I]=s},E.prototype.iterateStatements=function(I){return new w(I,this)},E.prototype.export=function(){Object.values(this.Za).forEach(function(G){G.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db));var I=vs(this.filename);return this.handleError(ye(this.filename,P)),this.db=J(P,"i32"),I},E.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db)),_i("/"+this.filename),this.db=null)},E.prototype.handleError=function(I){if(I===0)return null;throw I=hu(this.db),Error(I)},E.prototype.getRowsModified=function(){return it(this.db)},E.prototype.create_function=function(I,G){Object.prototype.hasOwnProperty.call(this.Na,I)&&(Fr(this.Na[I]),delete this.Na[I]);var s=Cs(function(u,f,y){f=c(f,y);try{var _=G.apply(null,f)}catch(A){Di(u,A,-1);return}o(u,_)},"viii");return this.Na[I]=s,this.handleError(Xo(this.db,I,G.length,1,0,s,0,0,0)),this},E.prototype.create_aggregate=function(I,G){var s=G.init||function(){return null},u=G.finalize||function(k){return k},f=G.step;if(!f)throw"An aggregate function must have a step function in "+I;var y={};Object.hasOwnProperty.call(this.Na,I)&&(Fr(this.Na[I]),delete this.Na[I]),G=I+"__finalize",Object.hasOwnProperty.call(this.Na,G)&&(Fr(this.Na[G]),delete this.Na[G]);var _=Cs(function(k,Q,L){var B=na(k,1);Object.hasOwnProperty.call(y,B)||(y[B]=s()),Q=c(Q,L),Q=[y[B]].concat(Q);try{y[B]=f.apply(null,Q)}catch(re){delete y[B],Di(k,re,-1)}},"viii"),A=Cs(function(k){var Q=na(k,1);try{var L=u(y[Q])}catch(B){delete y[Q],Di(k,B,-1);return}o(k,L),delete y[Q]},"vi");return this.Na[I]=_,this.Na[G]=A,this.handleError(Xo(this.db,I,f.length-1,1,0,0,_,A,0)),this},d.Database=E};var T=Object.assign({},d),S="./this.program",H=typeof window=="object",te=typeof importScripts=="function",oe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="",O,N,C,R,V,Ee;oe?(g=te?Wu.dirname(g)+"/":__dirname+"/",Ee=()=>{V||(R=Wu,V=Wu)},O=function(o,c){return Ee(),o=V.normalize(o),R.readFileSync(o,c?void 0:"utf8")},C=o=>(o=O(o,!0),o.buffer||(o=new Uint8Array(o)),o),N=(o,c,h)=>{Ee(),o=V.normalize(o),R.readFile(o,function(w,E){w?h(w):c(E.buffer)})},1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=function(){return"[Emscripten Module object]"}):(H||te)&&(te?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=g.indexOf("blob:")!==0?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",O=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.send(null),c.responseText},te&&(C=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),N=(o,c,h)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?c(w.response):h()},w.onerror=h,w.send(null)});var ae=d.print||console.log.bind(console),Ce=d.printErr||console.warn.bind(console);Object.assign(d,T),T=null,d.thisProgram&&(S=d.thisProgram);var Tt;d.wasmBinary&&(Tt=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var Wn,pn=!1,Rn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function mn(o,c,h){var w=c+h;for(h=c;o[h]&&!(h>=w);)++h;if(16<h-c&&o.buffer&&Rn)return Rn.decode(o.subarray(c,h));for(w="";c<h;){var E=o[c++];if(E&128){var P=o[c++]&63;if((E&224)==192)w+=String.fromCharCode((E&31)<<6|P);else{var F=o[c++]&63;E=(E&240)==224?(E&15)<<12|P<<6|F:(E&7)<<18|P<<12|F<<6|o[c++]&63,65536>E?w+=String.fromCharCode(E):(E-=65536,w+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else w+=String.fromCharCode(E)}return w}function et(o,c){return o?mn(Oe,o,c):""}function en(o,c,h,w){if(!(0<w))return 0;var E=h;w=h+w-1;for(var P=0;P<o.length;++P){var F=o.charCodeAt(P);if(55296<=F&&57343>=F){var ye=o.charCodeAt(++P);F=65536+((F&1023)<<10)|ye&1023}if(127>=F){if(h>=w)break;c[h++]=F}else{if(2047>=F){if(h+1>=w)break;c[h++]=192|F>>6}else{if(65535>=F){if(h+2>=w)break;c[h++]=224|F>>12}else{if(h+3>=w)break;c[h++]=240|F>>18,c[h++]=128|F>>12&63}c[h++]=128|F>>6&63}c[h++]=128|F&63}}return c[h]=0,h-E}function tn(o){for(var c=0,h=0;h<o.length;++h){var w=o.charCodeAt(h);127>=w?c++:2047>=w?c+=2:55296<=w&&57343>=w?(c+=4,++h):c+=3}return c}var ft,pe,Oe,rt,de,ke,St,gr;function ds(){var o=Wn.buffer;ft=o,d.HEAP8=pe=new Int8Array(o),d.HEAP16=rt=new Int16Array(o),d.HEAP32=de=new Int32Array(o),d.HEAPU8=Oe=new Uint8Array(o),d.HEAPU16=new Uint16Array(o),d.HEAPU32=ke=new Uint32Array(o),d.HEAPF32=St=new Float32Array(o),d.HEAPF64=gr=new Float64Array(o)}var yn,nn=[],fe=[],Me=[];function Dn(){var o=d.preRun.shift();nn.unshift(o)}var Bt=0,ze=null;function x(o){throw d.onAbort&&d.onAbort(o),o="Aborted("+o+")",Ce(o),pn=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}function q(){return W.startsWith("data:application/octet-stream;base64,")}var W;if(W="sql-wasm.wasm",!q()){var M=W;W=d.locateFile?d.locateFile(M,g):g+M}function K(){var o=W;try{if(o==W&&Tt)return new Uint8Array(Tt);if(C)return C(o);throw"both async and sync fetching of the wasm failed"}catch(c){x(c)}}function Z(){if(!Tt&&(H||te)){if(typeof fetch=="function"&&!W.startsWith("file://"))return fetch(W,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+W+"'";return o.arrayBuffer()}).catch(function(){return K()});if(N)return new Promise(function(o,c){N(W,function(h){o(new Uint8Array(h))},c)})}return Promise.resolve().then(function(){return K()})}var U,z;function ne(o){for(;0<o.length;)o.shift()(d)}function J(o,c="i8"){switch(c.endsWith("*")&&(c="*"),c){case"i1":return pe[o>>0];case"i8":return pe[o>>0];case"i16":return rt[o>>1];case"i32":return de[o>>2];case"i64":return de[o>>2];case"float":return St[o>>2];case"double":return gr[o>>3];case"*":return ke[o>>2];default:x("invalid type for getValue: "+c)}return null}function ce(o){var c="i32";switch(c.endsWith("*")&&(c="*"),c){case"i1":pe[o>>0]=0;break;case"i8":pe[o>>0]=0;break;case"i16":rt[o>>1]=0;break;case"i32":de[o>>2]=0;break;case"i64":z=[0,(U=0,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[o>>2]=z[0],de[o+4>>2]=z[1];break;case"float":St[o>>2]=0;break;case"double":gr[o>>3]=0;break;case"*":ke[o>>2]=0;break;default:x("invalid type for setValue: "+c)}}var se=(o,c)=>{for(var h=0,w=o.length-1;0<=w;w--){var E=o[w];E==="."?o.splice(w,1):E===".."?(o.splice(w,1),h++):h&&(o.splice(w,1),h--)}if(c)for(;h;h--)o.unshift("..");return o},ue=o=>{var c=o.charAt(0)==="/",h=o.substr(-1)==="/";return(o=se(o.split("/").filter(w=>!!w),!c).join("/"))||c||(o="."),o&&h&&(o+="/"),(c?"/":"")+o},me=o=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=c[0],c=c[1],!o&&!c?".":(c&&(c=c.substr(0,c.length-1)),o+c)},ve=o=>{if(o==="/")return"/";o=ue(o),o=o.replace(/\/$/,"");var c=o.lastIndexOf("/");return c===-1?o:o.substr(c+1)};function $e(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var o=new Uint8Array(1);return()=>(crypto.getRandomValues(o),o[0])}if(oe)try{var c=Wu;return()=>c.randomBytes(1)[0]}catch{}return()=>x("randomDevice")}function Re(){for(var o="",c=!1,h=arguments.length-1;-1<=h&&!c;h--){if(c=0<=h?arguments[h]:"/",typeof c!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!c)return"";o=c+"/"+o,c=c.charAt(0)==="/"}return o=se(o.split("/").filter(w=>!!w),!c).join("/"),(c?"/":"")+o||"."}function tt(o,c){var h=Array(tn(o)+1);return o=en(o,h,0,h.length),c&&(h.length=o),h}var he=[];function wn(o,c){he[o]={input:[],output:[],Xa:c},gi(o,wi)}var wi={open:function(o){var c=he[o.node.rdev];if(!c)throw new $(43);o.tty=c,o.seekable=!1},close:function(o){o.tty.Xa.fsync(o.tty)},fsync:function(o){o.tty.Xa.fsync(o.tty)},read:function(o,c,h,w){if(!o.tty||!o.tty.Xa.tb)throw new $(60);for(var E=0,P=0;P<w;P++){try{var F=o.tty.Xa.tb(o.tty)}catch{throw new $(29)}if(F===void 0&&E===0)throw new $(6);if(F==null)break;E++,c[h+P]=F}return E&&(o.node.timestamp=Date.now()),E},write:function(o,c,h,w){if(!o.tty||!o.tty.Xa.jb)throw new $(60);try{for(var E=0;E<w;E++)o.tty.Xa.jb(o.tty,c[h+E])}catch{throw new $(29)}return w&&(o.node.timestamp=Date.now()),E}},Ft={tb:function(o){if(!o.input.length){var c=null;if(oe){var h=Buffer.alloc(256),w=0;try{w=R.readSync(process.stdin.fd,h,0,256,-1)}catch(E){if(E.toString().includes("EOF"))w=0;else throw E}0<w?c=h.slice(0,w).toString("utf-8"):c=null}else typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`));if(!c)return null;o.input=tt(c,!0)}return o.input.shift()},jb:function(o,c){c===null||c===10?(ae(mn(o.output,0)),o.output=[]):c!=0&&o.output.push(c)},fsync:function(o){o.output&&0<o.output.length&&(ae(mn(o.output,0)),o.output=[])}},ps={jb:function(o,c){c===null||c===10?(Ce(mn(o.output,0)),o.output=[]):c!=0&&o.output.push(c)},fsync:function(o){o.output&&0<o.output.length&&(Ce(mn(o.output,0)),o.output=[])}},le={Qa:null,Ra:function(){return le.createNode(null,"/",16895,0)},createNode:function(o,c,h,w){if((h&61440)===24576||(h&61440)===4096)throw new $(63);return le.Qa||(le.Qa={dir:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,lookup:le.Ga.lookup,ab:le.Ga.ab,rename:le.Ga.rename,unlink:le.Ga.unlink,rmdir:le.Ga.rmdir,readdir:le.Ga.readdir,symlink:le.Ga.symlink},stream:{Ta:le.Ha.Ta}},file:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:{Ta:le.Ha.Ta,read:le.Ha.read,write:le.Ha.write,lb:le.Ha.lb,bb:le.Ha.bb,cb:le.Ha.cb}},link:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,readlink:le.Ga.readlink},stream:{}},pb:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:bs}}),h=Ro(o,c,h,w),(h.mode&61440)===16384?(h.Ga=le.Qa.dir.node,h.Ha=le.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=le.Qa.file.node,h.Ha=le.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=le.Qa.link.node,h.Ha=le.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=le.Qa.pb.node,h.Ha=le.Qa.pb.stream),h.timestamp=Date.now(),o&&(o.Ia[c]=h,o.timestamp=h.timestamp),h},Jb:function(o){return o.Ia?o.Ia.subarray?o.Ia.subarray(0,o.Ma):new Uint8Array(o.Ia):new Uint8Array(0)},qb:function(o,c){var h=o.Ia?o.Ia.length:0;h>=c||(c=Math.max(c,h*(1048576>h?2:1.125)>>>0),h!=0&&(c=Math.max(c,256)),h=o.Ia,o.Ia=new Uint8Array(c),0<o.Ma&&o.Ia.set(h.subarray(0,o.Ma),0))},Gb:function(o,c){if(o.Ma!=c)if(c==0)o.Ia=null,o.Ma=0;else{var h=o.Ia;o.Ia=new Uint8Array(c),h&&o.Ia.set(h.subarray(0,Math.min(c,o.Ma))),o.Ma=c}},Ga:{Pa:function(o){var c={};return c.dev=(o.mode&61440)===8192?o.id:1,c.ino=o.id,c.mode=o.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=o.rdev,(o.mode&61440)===16384?c.size=4096:(o.mode&61440)===32768?c.size=o.Ma:(o.mode&61440)===40960?c.size=o.link.length:c.size=0,c.atime=new Date(o.timestamp),c.mtime=new Date(o.timestamp),c.ctime=new Date(o.timestamp),c.Ab=4096,c.blocks=Math.ceil(c.size/c.Ab),c},Oa:function(o,c){c.mode!==void 0&&(o.mode=c.mode),c.timestamp!==void 0&&(o.timestamp=c.timestamp),c.size!==void 0&&le.Gb(o,c.size)},lookup:function(){throw Pn[44]},ab:function(o,c,h,w){return le.createNode(o,c,h,w)},rename:function(o,c,h){if((o.mode&61440)===16384){try{var w=er(c,h)}catch{}if(w)for(var E in w.Ia)throw new $(55)}delete o.parent.Ia[o.name],o.parent.timestamp=Date.now(),o.name=h,c.Ia[h]=o,c.timestamp=o.parent.timestamp,o.parent=c},unlink:function(o,c){delete o.Ia[c],o.timestamp=Date.now()},rmdir:function(o,c){var h=er(o,c),w;for(w in h.Ia)throw new $(55);delete o.Ia[c],o.timestamp=Date.now()},readdir:function(o){var c=[".",".."],h;for(h in o.Ia)o.Ia.hasOwnProperty(h)&&c.push(h);return c},symlink:function(o,c,h){return o=le.createNode(o,c,41471,0),o.link=h,o},readlink:function(o){if((o.mode&61440)!==40960)throw new $(28);return o.link}},Ha:{read:function(o,c,h,w,E){var P=o.node.Ia;if(E>=o.node.Ma)return 0;if(o=Math.min(o.node.Ma-E,w),8<o&&P.subarray)c.set(P.subarray(E,E+o),h);else for(w=0;w<o;w++)c[h+w]=P[E+w];return o},write:function(o,c,h,w,E,P){if(c.buffer===pe.buffer&&(P=!1),!w)return 0;if(o=o.node,o.timestamp=Date.now(),c.subarray&&(!o.Ia||o.Ia.subarray)){if(P)return o.Ia=c.subarray(h,h+w),o.Ma=w;if(o.Ma===0&&E===0)return o.Ia=c.slice(h,h+w),o.Ma=w;if(E+w<=o.Ma)return o.Ia.set(c.subarray(h,h+w),E),w}if(le.qb(o,E+w),o.Ia.subarray&&c.subarray)o.Ia.set(c.subarray(h,h+w),E);else for(P=0;P<w;P++)o.Ia[E+P]=c[h+P];return o.Ma=Math.max(o.Ma,E+w),w},Ta:function(o,c,h){if(h===1?c+=o.position:h===2&&(o.node.mode&61440)===32768&&(c+=o.node.Ma),0>c)throw new $(28);return c},lb:function(o,c,h){le.qb(o.node,c+h),o.node.Ma=Math.max(o.node.Ma,c+h)},bb:function(o,c,h,w,E){if((o.node.mode&61440)!==32768)throw new $(43);if(o=o.node.Ia,E&2||o.buffer!==ft){if((0<h||h+c<o.length)&&(o.subarray?o=o.subarray(h,h+c):o=Array.prototype.slice.call(o,h,h+c)),h=!0,c=65536*Math.ceil(c/65536),(E=Ho(65536,c))?(Oe.fill(0,E,E+c),c=E):c=0,!c)throw new $(48);pe.set(o,c)}else h=!1,c=o.byteOffset;return{Fb:c,vb:h}},cb:function(o,c,h,w,E){if((o.node.mode&61440)!==32768)throw new $(43);return E&2||le.Ha.write(o,c,0,w,h,!1),0}}},kt=null,ee={},qn=[],Ut=1,bn=null,ms=!0,$=null,Pn={},At=(o,c={})=>{if(o=Re("/",o),!o)return{path:"",node:null};if(c=Object.assign({rb:!0,kb:0},c),8<c.kb)throw new $(32);o=se(o.split("/").filter(F=>!!F),!1);for(var h=kt,w="/",E=0;E<o.length;E++){var P=E===o.length-1;if(P&&c.parent)break;if(h=er(h,o[E]),w=ue(w+"/"+o[E]),h.Va&&(!P||P&&c.rb)&&(h=h.Va.root),!P||c.Sa){for(P=0;(h.mode&61440)===40960;)if(h=Fo(w),w=Re(me(w),h),h=At(w,{kb:c.kb+1}).node,40<P++)throw new $(32)}}return{path:w,node:h}},bi=o=>{for(var c;;){if(o===o.parent)return o=o.Ra.ub,c?o[o.length-1]!=="/"?o+"/"+c:o+c:o;c=c?o.name+"/"+c:o.name,o=o.parent}},ys=(o,c)=>{for(var h=0,w=0;w<c.length;w++)h=(h<<5)-h+c.charCodeAt(w)|0;return(o+h>>>0)%bn.length},Nr=o=>{var c=ys(o.parent.id,o.name);if(bn[c]===o)bn[c]=o.Wa;else for(c=bn[c];c;){if(c.Wa===o){c.Wa=o.Wa;break}c=c.Wa}},er=(o,c)=>{var h;if(h=(h=Dr(o,"x"))?h:o.Ga.lookup?0:2)throw new $(h,o);for(h=bn[ys(o.id,c)];h;h=h.Wa){var w=h.name;if(h.parent.id===o.id&&w===c)return h}return o.Ga.lookup(o,c)},Ro=(o,c,h,w)=>(o=new zo(o,c,h,w),c=ys(o.parent.id,o.name),o.Wa=bn[c],bn[c]=o),ml={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Do=o=>{var c=["r","w","rw"][o&3];return o&512&&(c+="w"),c},Dr=(o,c)=>{if(ms)return 0;if(!c.includes("r")||o.mode&292){if(c.includes("w")&&!(o.mode&146)||c.includes("x")&&!(o.mode&73))return 2}else return 2;return 0},ws=(o,c)=>{try{return er(o,c),20}catch{}return Dr(o,"wx")},Po=(o,c,h)=>{try{var w=er(o,c)}catch(E){return E.Ka}if(o=Dr(o,"wx"))return o;if(h){if((w.mode&61440)!==16384)return 54;if(w===w.parent||bi(w)==="/")return 10}else if((w.mode&61440)===16384)return 31;return 0},Lo=(o=0)=>{for(;4096>=o;o++)if(!qn[o])return o;throw new $(33)},gn=(o,c)=>(Ci||(Ci=function(){this.$a={}},Ci.prototype={},Object.defineProperties(Ci.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},flags:{get:function(){return this.$a.flags},set:function(h){this.$a.flags=h}},position:{get:function(){return this.$a.position},set:function(h){this.$a.position=h}}})),o=Object.assign(new Ci,o),c=Lo(c),o.fd=c,qn[c]=o),bs={open:o=>{o.Ha=ee[o.node.rdev].Ha,o.Ha.open&&o.Ha.open(o)},Ta:()=>{throw new $(70)}},gi=(o,c)=>{ee[o]={Ha:c}},Mo=(o,c)=>{var h=c==="/",w=!c;if(h&&kt)throw new $(10);if(!h&&!w){var E=At(c,{rb:!1});if(c=E.path,E=E.node,E.Va)throw new $(10);if((E.mode&61440)!==16384)throw new $(54)}c={type:o,Kb:{},ub:c,Eb:[]},o=o.Ra(c),o.Ra=c,c.root=o,h?kt=o:E&&(E.Va=c,E.Ra&&E.Ra.Eb.push(c))},Ni=(o,c,h)=>{var w=At(o,{parent:!0}).node;if(o=ve(o),!o||o==="."||o==="..")throw new $(28);var E=ws(w,o);if(E)throw new $(E);if(!w.Ga.ab)throw new $(63);return w.Ga.ab(w,o,c,h)},Kt=(o,c)=>Ni(o,(c!==void 0?c:511)&1023|16384,0),vi=(o,c,h)=>{typeof h>"u"&&(h=c,c=438),Ni(o,c|8192,h)},gs=(o,c)=>{if(!Re(o))throw new $(44);var h=At(c,{parent:!0}).node;if(!h)throw new $(44);c=ve(c);var w=ws(h,c);if(w)throw new $(w);if(!h.Ga.symlink)throw new $(63);h.Ga.symlink(h,c,o)},Bo=o=>{var c=At(o,{parent:!0}).node;o=ve(o);var h=er(c,o),w=Po(c,o,!0);if(w)throw new $(w);if(!c.Ga.rmdir)throw new $(63);if(h.Va)throw new $(10);c.Ga.rmdir(c,o),Nr(h)},_i=o=>{var c=At(o,{parent:!0}).node;if(!c)throw new $(44);o=ve(o);var h=er(c,o),w=Po(c,o,!1);if(w)throw new $(w);if(!c.Ga.unlink)throw new $(63);if(h.Va)throw new $(10);c.Ga.unlink(c,o),Nr(h)},Fo=o=>{if(o=At(o).node,!o)throw new $(44);if(!o.Ga.readlink)throw new $(28);return Re(bi(o.parent),o.Ga.readlink(o))},Pr=(o,c)=>{if(o=At(o,{Sa:!c}).node,!o)throw new $(44);if(!o.Ga.Pa)throw new $(63);return o.Ga.Pa(o)},Uo=o=>Pr(o,!0),Ns=(o,c)=>{if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new $(63);o.Ga.Oa(o,{mode:c&4095|o.mode&-4096,timestamp:Date.now()})},Lr=(o,c)=>{if(0>c)throw new $(28);if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new $(63);if((o.mode&61440)===16384)throw new $(31);if((o.mode&61440)!==32768)throw new $(28);var h=Dr(o,"w");if(h)throw new $(h);o.Ga.Oa(o,{size:c,timestamp:Date.now()})},tr=(o,c,h)=>{if(o==="")throw new $(44);if(typeof c=="string"){var w=ml[c];if(typeof w>"u")throw Error("Unknown file open mode: "+c);c=w}if(h=c&64?(typeof h>"u"?438:h)&4095|32768:0,typeof o=="object")var E=o;else{o=ue(o);try{E=At(o,{Sa:!(c&131072)}).node}catch{}}if(w=!1,c&64)if(E){if(c&128)throw new $(20)}else E=Ni(o,h,0),w=!0;if(!E)throw new $(44);if((E.mode&61440)===8192&&(c&=-513),c&65536&&(E.mode&61440)!==16384)throw new $(54);if(!w&&(h=E?(E.mode&61440)===40960?32:(E.mode&61440)===16384&&(Do(c)!=="r"||c&512)?31:Dr(E,Do(c)):44))throw new $(h);return c&512&&!w&&Lr(E,0),c&=-131713,E=gn({node:E,path:bi(E),flags:c,seekable:!0,position:0,Ha:E.Ha,Ib:[],error:!1}),E.Ha.open&&E.Ha.open(E),!d.logReadFiles||c&1||(Ii||(Ii={}),o in Ii||(Ii[o]=1)),E},Qe=o=>{if(o.fd===null)throw new $(8);o.hb&&(o.hb=null);try{o.Ha.close&&o.Ha.close(o)}catch(c){throw c}finally{qn[o.fd]=null}o.fd=null},Mr=(o,c,h)=>{if(o.fd===null)throw new $(8);if(!o.seekable||!o.Ha.Ta)throw new $(70);if(h!=0&&h!=1&&h!=2)throw new $(28);o.position=o.Ha.Ta(o,c,h),o.Ib=[]},xi=(o,c,h,w,E)=>{if(0>w||0>E)throw new $(28);if(o.fd===null)throw new $(8);if((o.flags&2097155)===1)throw new $(8);if((o.node.mode&61440)===16384)throw new $(31);if(!o.Ha.read)throw new $(28);var P=typeof E<"u";if(!P)E=o.position;else if(!o.seekable)throw new $(70);return c=o.Ha.read(o,c,h,w,E),P||(o.position+=c),c},nr=(o,c,h,w,E)=>{if(0>w||0>E)throw new $(28);if(o.fd===null)throw new $(8);if(!(o.flags&2097155))throw new $(8);if((o.node.mode&61440)===16384)throw new $(31);if(!o.Ha.write)throw new $(28);o.seekable&&o.flags&1024&&Mr(o,0,2);var P=typeof E<"u";if(!P)E=o.position;else if(!o.seekable)throw new $(70);return c=o.Ha.write(o,c,h,w,E,void 0),P||(o.position+=c),c},vs=o=>{var c,h=tr(o,h||0);o=Pr(o).size;var w=new Uint8Array(o);return xi(h,w,0,o,0),c=w,Qe(h),c},Ei=()=>{$||($=function(o,c){this.node=c,this.Hb=function(h){this.Ka=h},this.Hb(o),this.message="FS error"},$.prototype=Error(),$.prototype.constructor=$,[44].forEach(o=>{Pn[o]=new $(o),Pn[o].stack="<generic error, no stack>"}))},Oi,rn=(o,c)=>{var h=0;return o&&(h|=365),c&&(h|=146),h},Cn=(o,c,h)=>{o=ue("/dev/"+o);var w=rn(!!c,!!h);qi||(qi=64);var E=qi++<<8|0;gi(E,{open:P=>{P.seekable=!1},close:()=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(P,F,ye,Pe)=>{for(var Ae=0,it=0;it<Pe;it++){try{var In=c()}catch{throw new $(29)}if(In===void 0&&Ae===0)throw new $(6);if(In==null)break;Ae++,F[ye+it]=In}return Ae&&(P.node.timestamp=Date.now()),Ae},write:(P,F,ye,Pe)=>{for(var Ae=0;Ae<Pe;Ae++)try{h(F[ye+Ae])}catch{throw new $(29)}return Pe&&(P.node.timestamp=Date.now()),Ae}}),vi(o,w,E)},qi,Ke={},Ci,Ii;function Ln(o,c,h){if(c.charAt(0)==="/")return c;if(o=o===-100?"/":sn(o).path,c.length==0){if(!h)throw new $(44);return o}return ue(o+"/"+c)}function Ti(o,c,h){try{var w=o(c)}catch(E){if(E&&E.node&&ue(c)!==ue(bi(E.node)))return-54;throw E}return de[h>>2]=w.dev,de[h+8>>2]=w.ino,de[h+12>>2]=w.mode,ke[h+16>>2]=w.nlink,de[h+20>>2]=w.uid,de[h+24>>2]=w.gid,de[h+28>>2]=w.rdev,z=[w.size>>>0,(U=w.size,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+40>>2]=z[0],de[h+44>>2]=z[1],de[h+48>>2]=4096,de[h+52>>2]=w.blocks,z=[Math.floor(w.atime.getTime()/1e3)>>>0,(U=Math.floor(w.atime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+56>>2]=z[0],de[h+60>>2]=z[1],ke[h+64>>2]=0,z=[Math.floor(w.mtime.getTime()/1e3)>>>0,(U=Math.floor(w.mtime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+72>>2]=z[0],de[h+76>>2]=z[1],ke[h+80>>2]=0,z=[Math.floor(w.ctime.getTime()/1e3)>>>0,(U=Math.floor(w.ctime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+88>>2]=z[0],de[h+92>>2]=z[1],ke[h+96>>2]=0,z=[w.ino>>>0,(U=w.ino,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+104>>2]=z[0],de[h+108>>2]=z[1],0}var Br=void 0;function Si(){return Br+=4,de[Br-4>>2]}function sn(o){if(o=qn[o],!o)throw new $(8);return o}function _s(o){return ke[o>>2]+4294967296*de[o+4>>2]}function $o(o){var c=tn(o)+1,h=ki(c);return h&&en(o,pe,h,c),h}function au(o,c,h){function w(Pe){return(Pe=Pe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Pe[1]:"GMT"}var E=new Date().getFullYear(),P=new Date(E,0,1),F=new Date(E,6,1);E=P.getTimezoneOffset();var ye=F.getTimezoneOffset();de[o>>2]=60*Math.max(E,ye),de[c>>2]=+(E!=ye),o=w(P),c=w(F),o=$o(o),c=$o(c),ye<E?(ke[h>>2]=o,ke[h+4>>2]=c):(ke[h>>2]=c,ke[h+4>>2]=o)}function xs(o,c,h){xs.Bb||(xs.Bb=!0,au(o,c,h))}var Qo;Qo=oe?()=>{var o=process.hrtime();return 1e3*o[0]+o[1]/1e6}:()=>performance.now();var Es={};function jo(){if(!Os){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},c;for(c in Es)Es[c]===void 0?delete o[c]:o[c]=Es[c];var h=[];for(c in o)h.push(c+"="+o[c]);Os=h}return Os}var Os,Mn=void 0,qs=[];function Cs(o,c){if(!Mn){Mn=new WeakMap;var h=yn.length;if(Mn)for(var w=0;w<0+h;w++){var E=yn.get(w);E&&Mn.set(E,w)}}if(Mn.has(o))return Mn.get(o);if(qs.length)h=qs.pop();else{try{yn.grow(1)}catch(ye){throw ye instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ye}h=yn.length-1}try{yn.set(h,o)}catch(ye){if(!(ye instanceof TypeError))throw ye;if(typeof WebAssembly.Function=="function"){w=WebAssembly.Function,E={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var P={parameters:[],results:c[0]=="v"?[]:[E[c[0]]]},F=1;F<c.length;++F)P.parameters.push(E[c[F]]);c=new w(P,o)}else{for(w=[1,96],E=c.slice(0,1),c=c.slice(1),P={i:127,p:127,j:126,f:125,d:124},F=c.length,128>F?w.push(F):w.push(F%128|128,F>>7),F=0;F<c.length;++F)w.push(P[c[F]]);E=="v"?w.push(0):w.push(1,P[E]),c=[0,97,115,109,1,0,0,0,1],E=w.length,128>E?c.push(E):c.push(E%128|128,E>>7),c.push.apply(c,w),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:o}}).exports.f}yn.set(h,c)}return Mn.set(o,h),h}function Fr(o){Mn.delete(yn.get(o)),qs.push(o)}function Is(o){var c=ki(o.length);return o.subarray||o.slice||(o=new Uint8Array(o)),Oe.set(o,c),c}function uu(o,c,h,w){var E={string:Ae=>{var it=0;if(Ae!=null&&Ae!==0){var In=(Ae.length<<2)+1;it=Bn(In),en(Ae,Oe,it,In)}return it},array:Ae=>{var it=Bn(Ae.length);return pe.set(Ae,it),it}};o=d["_"+o];var P=[],F=0;if(w)for(var ye=0;ye<w.length;ye++){var Pe=E[h[ye]];Pe?(F===0&&(F=Ur()),P[ye]=Pe(w[ye])):P[ye]=w[ye]}return h=o.apply(null,P),h=function(Ae){return F!==0&&$r(F),c==="string"?et(Ae):c==="boolean"?!!Ae:Ae}(h)}function zo(o,c,h,w){o||(o=this),this.parent=o,this.Ra=o.Ra,this.Va=null,this.id=Ut++,this.name=c,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(zo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(o){o?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(o){o?this.mode|=146:this.mode&=-147}}}),Ei(),bn=Array(4096),Mo(le,"/"),Kt("/tmp"),Kt("/home"),Kt("/home/web_user"),(()=>{Kt("/dev"),gi(259,{read:()=>0,write:(c,h,w,E)=>E}),vi("/dev/null",259),wn(1280,Ft),wn(1536,ps),vi("/dev/tty",1280),vi("/dev/tty1",1536);var o=$e();Cn("random",o),Cn("urandom",o),Kt("/dev/shm"),Kt("/dev/shm/tmp")})(),(()=>{Kt("/proc");var o=Kt("/proc/self");Kt("/proc/self/fd"),Mo({Ra:()=>{var c=Ro(o,"fd",16895,73);return c.Ga={lookup:(h,w)=>{var E=qn[+w];if(!E)throw new $(8);return h={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>E.path}},h.parent=h}},c}},"/proc/self/fd")})();var cu={a:function(o,c,h,w){x("Assertion failed: "+et(o)+", at: "+[c?et(c):"unknown filename",h,w?et(w):"unknown function"])},h:function(o,c){try{return o=et(o),Ns(o,c),0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},H:function(o,c,h){try{if(c=et(c),c=Ln(o,c),h&-8)return-28;var w=At(c,{Sa:!0}).node;return w?(o="",h&4&&(o+="r"),h&2&&(o+="w"),h&1&&(o+="x"),o&&Dr(w,o)?-2:0):-44}catch(E){if(typeof Ke>"u"||!(E instanceof $))throw E;return-E.Ka}},i:function(o,c){try{var h=qn[o];if(!h)throw new $(8);return Ns(h.node,c),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},g:function(o){try{var c=qn[o];if(!c)throw new $(8);var h=c.node,w=typeof h=="string"?At(h,{Sa:!0}).node:h;if(!w.Ga.Oa)throw new $(63);return w.Ga.Oa(w,{timestamp:Date.now()}),0}catch(E){if(typeof Ke>"u"||!(E instanceof $))throw E;return-E.Ka}},b:function(o,c,h){Br=h;try{var w=sn(o);switch(c){case 0:var E=Si();return 0>E?-28:gn(w,E).fd;case 1:case 2:return 0;case 3:return w.flags;case 4:return E=Si(),w.flags|=E,0;case 5:return E=Si(),rt[E+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return de[Vo()>>2]=28,-1;default:return-28}}catch(P){if(typeof Ke>"u"||!(P instanceof $))throw P;return-P.Ka}},G:function(o,c){try{var h=sn(o);return Ti(Pr,h.path,c)}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},l:function(o,c,h){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return-61;var w=qn[o];if(!w)throw new $(8);if(!(w.flags&2097155))throw new $(28);return Lr(w.node,c),0}catch(E){if(typeof Ke>"u"||!(E instanceof $))throw E;return-E.Ka}},B:function(o,c){try{if(c===0)return-28;var h=tn("/")+1;return c<h?-68:(en("/",Oe,o,c),h)}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},E:function(o,c){try{return o=et(o),Ti(Uo,o,c)}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},y:function(o,c,h){try{return c=et(c),c=Ln(o,c),c=ue(c),c[c.length-1]==="/"&&(c=c.substr(0,c.length-1)),Kt(c,h),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},D:function(o,c,h,w){try{c=et(c);var E=w&256;return c=Ln(o,c,w&4096),Ti(E?Uo:Pr,c,h)}catch(P){if(typeof Ke>"u"||!(P instanceof $))throw P;return-P.Ka}},v:function(o,c,h,w){Br=w;try{c=et(c),c=Ln(o,c);var E=w?Si():0;return tr(c,h,E).fd}catch(P){if(typeof Ke>"u"||!(P instanceof $))throw P;return-P.Ka}},t:function(o,c,h,w){try{if(c=et(c),c=Ln(o,c),0>=w)return-28;var E=Fo(c),P=Math.min(w,tn(E)),F=pe[h+P];return en(E,Oe,h,w+1),pe[h+P]=F,P}catch(ye){if(typeof Ke>"u"||!(ye instanceof $))throw ye;return-ye.Ka}},s:function(o){try{return o=et(o),Bo(o),0}catch(c){if(typeof Ke>"u"||!(c instanceof $))throw c;return-c.Ka}},F:function(o,c){try{return o=et(o),Ti(Pr,o,c)}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},p:function(o,c,h){try{return c=et(c),c=Ln(o,c),h===0?_i(c):h===512?Bo(c):x("Invalid flags passed to unlinkat"),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},o:function(o,c,h){try{if(c=et(c),c=Ln(o,c,!0),h){var w=_s(h),E=de[h+8>>2];P=1e3*w+E/1e6,h+=16,w=_s(h),E=de[h+8>>2],F=1e3*w+E/1e6}else var P=Date.now(),F=P;o=P;var ye=At(c,{Sa:!0}).node;return ye.Ga.Oa(ye,{timestamp:Math.max(o,F)}),0}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof $))throw Pe;return-Pe.Ka}},e:function(){return Date.now()},j:function(o,c){o=new Date(1e3*_s(o)),de[c>>2]=o.getSeconds(),de[c+4>>2]=o.getMinutes(),de[c+8>>2]=o.getHours(),de[c+12>>2]=o.getDate(),de[c+16>>2]=o.getMonth(),de[c+20>>2]=o.getFullYear()-1900,de[c+24>>2]=o.getDay();var h=new Date(o.getFullYear(),0,1);de[c+28>>2]=(o.getTime()-h.getTime())/864e5|0,de[c+36>>2]=-(60*o.getTimezoneOffset());var w=new Date(o.getFullYear(),6,1).getTimezoneOffset();h=h.getTimezoneOffset(),de[c+32>>2]=(w!=h&&o.getTimezoneOffset()==Math.min(h,w))|0},w:function(o,c,h,w,E,P){try{var F=sn(w);if(c&2&&!(h&2)&&(F.flags&2097155)!==2)throw new $(2);if((F.flags&2097155)===1)throw new $(2);if(!F.Ha.bb)throw new $(43);var ye=F.Ha.bb(F,o,E,c,h),Pe=ye.Fb;return de[P>>2]=ye.vb,Pe}catch(Ae){if(typeof Ke>"u"||!(Ae instanceof $))throw Ae;return-Ae.Ka}},x:function(o,c,h,w,E,P){try{var F=sn(E);if(h&2){var ye=Oe.slice(o,o+c);F&&F.Ha.cb&&F.Ha.cb(F,ye,P,c,w)}}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof $))throw Pe;return-Pe.Ka}},n:xs,q:function(){return 2147483648},d:Qo,c:function(o){var c=Oe.length;if(o>>>=0,2147483648<o)return!1;for(var h=1;4>=h;h*=2){var w=c*(1+.2/h);w=Math.min(w,o+100663296);var E=Math;w=Math.max(o,w),E=E.min.call(E,2147483648,w+(65536-w%65536)%65536);e:{try{Wn.grow(E-ft.byteLength+65535>>>16),ds();var P=1;break e}catch{}P=void 0}if(P)return!0}return!1},z:function(o,c){var h=0;return jo().forEach(function(w,E){var P=c+h;for(E=ke[o+4*E>>2]=P,P=0;P<w.length;++P)pe[E++>>0]=w.charCodeAt(P);pe[E>>0]=0,h+=w.length+1}),0},A:function(o,c){var h=jo();ke[o>>2]=h.length;var w=0;return h.forEach(function(E){w+=E.length+1}),ke[c>>2]=w,0},f:function(o){try{var c=sn(o);return Qe(c),0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return h.Ka}},m:function(o,c){try{var h=sn(o);return pe[c>>0]=h.tty?2:(h.mode&61440)===16384?3:(h.mode&61440)===40960?7:4,0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return w.Ka}},u:function(o,c,h,w){try{e:{var E=sn(o);o=c;for(var P=c=0;P<h;P++){var F=ke[o>>2],ye=ke[o+4>>2];o+=8;var Pe=xi(E,pe,F,ye);if(0>Pe){var Ae=-1;break e}if(c+=Pe,Pe<ye)break}Ae=c}return ke[w>>2]=Ae,0}catch(it){if(typeof Ke>"u"||!(it instanceof $))throw it;return it.Ka}},k:function(o,c,h,w,E){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return 61;var P=sn(o);return Mr(P,c,w),z=[P.position>>>0,(U=P.position,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[E>>2]=z[0],de[E+4>>2]=z[1],P.hb&&c===0&&w===0&&(P.hb=null),0}catch(F){if(typeof Ke>"u"||!(F instanceof $))throw F;return F.Ka}},C:function(o){try{var c=sn(o);return c.Ha&&c.Ha.fsync?c.Ha.fsync(c):0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return h.Ka}},r:function(o,c,h,w){try{e:{var E=sn(o);o=c;for(var P=c=0;P<h;P++){var F=ke[o>>2],ye=ke[o+4>>2];o+=8;var Pe=nr(E,pe,F,ye);if(0>Pe){var Ae=-1;break e}c+=Pe}Ae=c}return ke[w>>2]=Ae,0}catch(it){if(typeof Ke>"u"||!(it instanceof $))throw it;return it.Ka}}};(function(){function o(E){d.asm=E.exports,Wn=d.asm.I,ds(),yn=d.asm.Aa,fe.unshift(d.asm.J),Bt--,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),Bt==0&&ze&&(E=ze,ze=null,E())}function c(E){o(E.instance)}function h(E){return Z().then(function(P){return WebAssembly.instantiate(P,w)}).then(function(P){return P}).then(E,function(P){Ce("failed to asynchronously prepare wasm: "+P),x(P)})}var w={a:cu};if(Bt++,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),d.instantiateWasm)try{return d.instantiateWasm(w,o)}catch(E){return Ce("Module.instantiateWasm callback failed with error: "+E),!1}return function(){return Tt||typeof WebAssembly.instantiateStreaming!="function"||q()||W.startsWith("file://")||oe||typeof fetch!="function"?h(c):fetch(W,{credentials:"same-origin"}).then(function(E){return WebAssembly.instantiateStreaming(E,w).then(c,function(P){return Ce("wasm streaming compile failed: "+P),Ce("falling back to ArrayBuffer instantiation"),h(c)})})}(),{}})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.J).apply(null,arguments)},d._sqlite3_free=function(){return(d._sqlite3_free=d.asm.K).apply(null,arguments)},d._sqlite3_value_double=function(){return(d._sqlite3_value_double=d.asm.L).apply(null,arguments)},d._sqlite3_value_text=function(){return(d._sqlite3_value_text=d.asm.M).apply(null,arguments)};var Vo=d.___errno_location=function(){return(Vo=d.___errno_location=d.asm.N).apply(null,arguments)};d._sqlite3_prepare_v2=function(){return(d._sqlite3_prepare_v2=d.asm.O).apply(null,arguments)},d._sqlite3_step=function(){return(d._sqlite3_step=d.asm.P).apply(null,arguments)},d._sqlite3_finalize=function(){return(d._sqlite3_finalize=d.asm.Q).apply(null,arguments)},d._sqlite3_reset=function(){return(d._sqlite3_reset=d.asm.R).apply(null,arguments)},d._sqlite3_value_int=function(){return(d._sqlite3_value_int=d.asm.S).apply(null,arguments)},d._sqlite3_clear_bindings=function(){return(d._sqlite3_clear_bindings=d.asm.T).apply(null,arguments)},d._sqlite3_value_blob=function(){return(d._sqlite3_value_blob=d.asm.U).apply(null,arguments)},d._sqlite3_value_bytes=function(){return(d._sqlite3_value_bytes=d.asm.V).apply(null,arguments)},d._sqlite3_value_type=function(){return(d._sqlite3_value_type=d.asm.W).apply(null,arguments)},d._sqlite3_result_blob=function(){return(d._sqlite3_result_blob=d.asm.X).apply(null,arguments)},d._sqlite3_result_double=function(){return(d._sqlite3_result_double=d.asm.Y).apply(null,arguments)},d._sqlite3_result_error=function(){return(d._sqlite3_result_error=d.asm.Z).apply(null,arguments)},d._sqlite3_result_int=function(){return(d._sqlite3_result_int=d.asm._).apply(null,arguments)},d._sqlite3_result_int64=function(){return(d._sqlite3_result_int64=d.asm.$).apply(null,arguments)},d._sqlite3_result_null=function(){return(d._sqlite3_result_null=d.asm.aa).apply(null,arguments)},d._sqlite3_result_text=function(){return(d._sqlite3_result_text=d.asm.ba).apply(null,arguments)},d._sqlite3_sql=function(){return(d._sqlite3_sql=d.asm.ca).apply(null,arguments)},d._sqlite3_aggregate_context=function(){return(d._sqlite3_aggregate_context=d.asm.da).apply(null,arguments)},d._sqlite3_column_count=function(){return(d._sqlite3_column_count=d.asm.ea).apply(null,arguments)},d._sqlite3_data_count=function(){return(d._sqlite3_data_count=d.asm.fa).apply(null,arguments)},d._sqlite3_column_blob=function(){return(d._sqlite3_column_blob=d.asm.ga).apply(null,arguments)},d._sqlite3_column_bytes=function(){return(d._sqlite3_column_bytes=d.asm.ha).apply(null,arguments)},d._sqlite3_column_double=function(){return(d._sqlite3_column_double=d.asm.ia).apply(null,arguments)},d._sqlite3_column_text=function(){return(d._sqlite3_column_text=d.asm.ja).apply(null,arguments)},d._sqlite3_column_type=function(){return(d._sqlite3_column_type=d.asm.ka).apply(null,arguments)},d._sqlite3_column_name=function(){return(d._sqlite3_column_name=d.asm.la).apply(null,arguments)},d._sqlite3_bind_blob=function(){return(d._sqlite3_bind_blob=d.asm.ma).apply(null,arguments)},d._sqlite3_bind_double=function(){return(d._sqlite3_bind_double=d.asm.na).apply(null,arguments)},d._sqlite3_bind_int=function(){return(d._sqlite3_bind_int=d.asm.oa).apply(null,arguments)},d._sqlite3_bind_text=function(){return(d._sqlite3_bind_text=d.asm.pa).apply(null,arguments)},d._sqlite3_bind_parameter_index=function(){return(d._sqlite3_bind_parameter_index=d.asm.qa).apply(null,arguments)},d._sqlite3_normalized_sql=function(){return(d._sqlite3_normalized_sql=d.asm.ra).apply(null,arguments)},d._sqlite3_errmsg=function(){return(d._sqlite3_errmsg=d.asm.sa).apply(null,arguments)},d._sqlite3_exec=function(){return(d._sqlite3_exec=d.asm.ta).apply(null,arguments)},d._sqlite3_changes=function(){return(d._sqlite3_changes=d.asm.ua).apply(null,arguments)},d._sqlite3_close_v2=function(){return(d._sqlite3_close_v2=d.asm.va).apply(null,arguments)},d._sqlite3_create_function_v2=function(){return(d._sqlite3_create_function_v2=d.asm.wa).apply(null,arguments)},d._sqlite3_open=function(){return(d._sqlite3_open=d.asm.xa).apply(null,arguments)};var ki=d._malloc=function(){return(ki=d._malloc=d.asm.ya).apply(null,arguments)},Ai=d._free=function(){return(Ai=d._free=d.asm.za).apply(null,arguments)};d._RegisterExtensionFunctions=function(){return(d._RegisterExtensionFunctions=d.asm.Ba).apply(null,arguments)};var Ho=d._emscripten_builtin_memalign=function(){return(Ho=d._emscripten_builtin_memalign=d.asm.Ca).apply(null,arguments)},Ur=d.stackSave=function(){return(Ur=d.stackSave=d.asm.Da).apply(null,arguments)},$r=d.stackRestore=function(){return($r=d.stackRestore=d.asm.Ea).apply(null,arguments)},Bn=d.stackAlloc=function(){return(Bn=d.stackAlloc=d.asm.Fa).apply(null,arguments)};d.UTF8ToString=et,d.stackAlloc=Bn,d.stackSave=Ur,d.stackRestore=$r,d.cwrap=function(o,c,h,w){h=h||[];var E=h.every(P=>P==="number"||P==="boolean");return c!=="string"&&E&&!w?d["_"+o]:function(){return uu(o,c,h,arguments)}};var Wi;ze=function o(){Wi||Ko(),Wi||(ze=o)};function Ko(){function o(){if(!Wi&&(Wi=!0,d.calledRun=!0,!pn)){if(d.noFSInit||Oi||(Oi=!0,Ei(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?Cn("stdin",d.stdin):gs("/dev/tty","/dev/stdin"),d.stdout?Cn("stdout",null,d.stdout):gs("/dev/tty","/dev/stdout"),d.stderr?Cn("stderr",null,d.stderr):gs("/dev/tty1","/dev/stderr"),tr("/dev/stdin",0),tr("/dev/stdout",1),tr("/dev/stderr",1)),ms=!1,ne(fe),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var c=d.postRun.shift();Me.unshift(c)}ne(Me)}}if(!(0<Bt)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Dn();ne(nn),0<Bt||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),o()},1)):o())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Ko(),b}),n)};t.exports=r,t.exports.default=r})(fm);var $g=fm.exports;const Qg=Mg($g),jg=""+new URL("sql-wasm-18fc45ef.wasm",import.meta.url).href,zg="sqlitevfs",Us=new Map,Vg=2048,Hg=65536;class Kg{constructor(e){we(this,"_data");we(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,n){if(e>=this._size)return 0;const r=this._data.subarray(e,Math.min(this._size,e+n.length));return n.set(r),r.length}reserve(e){if(this._data.length>=e)return;const n=e-this._data.length,r=Math.min(Hg,Math.max(Vg,this._data.length)),a=new Uint8Array(this._data.length+Math.max(r,n));a.set(this._data),this._data=a}write(e,n){return this.reserve(e+n.length),this._data.set(n,e),this._size=Math.max(this._size,e+n.length),n.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const Jg=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Zf=new Promise((t,e)=>{const n=Jg.open(zg,1);n.onupgradeneeded=()=>n.result.createObjectStore("files",{keyPath:"name"}),n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)});async function Gg(t){const e=await Zf,n=await new Promise((r,a)=>{const m=e.transaction("files","readonly").objectStore("files").get(t);m.onsuccess=()=>r(m.result),m.onerror=()=>a(m.error)});if(n&&!Us.has(t)){const r=new Kg(n.data);return Us.set(t,r),r}else return Us.has(t)?Us.get(t):null}async function Yg(t,e){const n=await Zf;await new Promise((r,a)=>{const m=n.transaction("files","readwrite").objectStore("files").put({name:t,data:e});m.onsuccess=()=>r(!0),m.onerror=()=>a(m.error)})}async function td(t){const e=await Zf;await new Promise((n,r)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>n(!0),l.onerror=()=>r(l.error)})}async function Xg(t,e){if(await Yg(t,e),Us.has(t)){const n=Us.get(t);n.truncate(0),n.write(0,e)}}var hm=t=>t==null||typeof t=="bigint"||typeof t=="string"||typeof t=="number"||typeof t=="object"&&"buffer"in t?t:typeof t=="boolean"?`${t}`:t instanceof Date?t.toISOString():JSON.stringify(t),Zg=t=>{if(t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t)return t;if(typeof t=="string"){const e=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/;if(/^(true|false)$/.test(t))return t==="true";if(e.test(t))return new Date(t);try{return JSON.parse(t,(n,r)=>typeof r=="string"&&e.exec(r)?new Date(r):r)}catch{}}return t},eN=class extends Vf{constructor(e){super();we(this,"serializer");this.serializer=e||hm}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:n}=e;if(n.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:r,...a}=n,l=this.serializer(r);return r===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},tN=class{constructor({selectOrRawOnly:t,deserializer:e,serializer:n}={}){we(this,"serializeParametersTransformer");we(this,"deserializer");we(this,"only");we(this,"ctx");this.serializeParametersTransformer=new eN(n),this.deserializer=e||Zg,this.only=t||!1}transformQuery({node:t,queryId:e}){var n;return this.only&&(t.kind==="SelectQueryNode"||t.kind==="RawNode")&&((n=this.ctx)==null||n.add(e)),this.serializeParametersTransformer.transformNode(t)}async parseResult(t){return t.length?await Promise.all(t.map(async e=>{const n={...e};for(const r in n)n[r]=await this.deserializer(n[r]);return n})):[]}async transformResult({result:t,queryId:e}){var r,a;const n=async()=>({...t,rows:await this.parseResult(t.rows)});return this.only?(r=this.ctx)!=null&&r.has(e)?((a=this.ctx)==null||a.delete(e),await n()):t:await n()}};function nN(t){return`__precomile_${t}`}function rN(t,e=n=>n){return{setParam:n=>{let r;return(a,l)=>{if(!r){const{parameters:m,sql:b,query:v}=n({qb:t,param:nN}).compile();r={sql:b,query:(l==null?void 0:l(v))||{kind:v.kind},parameters:m}}return{...r,parameters:r.parameters.map(m=>typeof m=="string"&&m.startsWith("__precomile_")?e(a[m.slice(12)]):m)}}}}}async function iN(t){return(await at`PRAGMA integrity_check`.execute(t)).rows[0].integrity_check==="ok"}async function sN(t,e){const n=e||`sp_${Date.now()%1e8}`;return await at`savepoint ${at.raw(n)}`.execute(t),{release:async()=>{await at`release savepoint ${at.raw(n)}`.execute(t)},rollback:async()=>{await at`rollback to savepoint ${at.raw(n)}`.execute(t)}}}function nd(t){const{logger:e,merge:n,queryNode:r}=t;return a=>{const{level:l,queryDurationMillis:m,query:{parameters:b,sql:v,query:d}}=a,T=l==="error"?a.error:void 0;let S=v.replace(/\r?\n/g," ").replace(/\s+/g," ");n&&b.forEach(te=>{S=S.replace("?",JSON.stringify(te))});const H={sql:S,params:b,duration:m,error:T};r&&(H.queryNode=d),e(H)}}var oN=class extends Error{constructor(){super("db file maybe broken")}};function aN(t){return t.toOperationNode().kind==="SelectQueryNode"}var uN=class{constructor(t){we(this,"kysely");we(this,"trxCount",0);we(this,"trx");we(this,"logger");we(this,"serializer",hm);const{dialect:e,logger:n,onQuery:r,plugins:a=[],serializerPluginOptions:l}=t;this.logger=n,l!=null&&l.serializer&&(this.serializer=l.serializer),a.push(new tN(l));let m;r===!0?m=nd({logger:console.log,merge:!0}):r&&(m=nd(r)),this.kysely=new Pa({dialect:e,log:m,plugins:a})}async updateTables(t,e){var n,r;try{if(e&&!await iN(this.kysely))return(n=this.logger)==null||n.error("integrity check fail"),{ready:!1,error:new oN};await t(this.kysely,this.logger)}catch(a){return this.logError(a,"sync table fail"),{ready:!1,error:a}}return(r=this.logger)==null||r.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){var n;e&&((n=this.logger)==null||n.error(e,t instanceof Error?t:void 0))}async transaction(t,e){var a;if(!this.trx)try{return await this.kysely.transaction().execute(async l=>{var b;return this.trx=l,(b=this.logger)==null||b.debug("run in transaction"),await t(l)})}catch(l){this.logError(l,e);return}finally{this.trx=void 0}this.trxCount++;const n=this.getDB(),r=await sN(n,`sp_${this.trxCount}`);(a=this.logger)==null||a.debug(`run in savepoint:${this.trxCount}`);try{const l=await t(n);return await r.release(),this.trxCount--,l}catch(l){await r.rollback(),this.logError(l,e),this.trxCount--;return}}async execute(t,e){try{return await t(this.getDB()).execute()}catch(n){this.logError(n,e);return}}async executeTakeFirst(t,e){try{let n=t(this.getDB());return aN(n)&&(n=n.limit(1)),await n.executeTakeFirstOrThrow()}catch(n){this.logError(n,e);return}}precompile(t){var e,n;return(n=(e=this.logger)==null?void 0:e.debug)==null||n.call(e,"precompile"),rN(t(this.kysely),this.serializer)}async executeCompiled(t,e){try{return await this.getDB().executeQuery(t)}catch(n){this.logError(n,e);return}}async executeCompiledTakeList(t,e){const n=await this.executeCompiled(t,e);return n==null?void 0:n.rows}async raw(t,e){try{return typeof t=="string"?await this.getDB().executeQuery(yr.raw(t)):await t.execute(this.getDB())}catch(n){this.logError(n,e);return}}async destroy(){var t;(t=this.logger)==null||t.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},dm="__TIME_TRIGGER__";function cN(t,e){const{create:n,update:r}=(e==null?void 0:e.timeTrigger)||{},a={type:"date",defaultTo:dm};return n===!0?t.createAt=a:n&&(t[n]=a),r===!0?t.updateAt={...a,notNull:0}:r&&(t[r]={...a,notNull:0}),{columns:t,...e}}function pm(t){let e="text",n=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":n=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:n}}function df(t){return Array.isArray(t)?t:[t]}function lN(t){return typeof t=="function"}async function Ru(t,e){await t.schema.dropTable(e).execute()}async function rd(t,e,n){const{index:r,...a}=n;await t.transaction().execute(async l=>{const m=await pf(l,e,a);await ym(l,e,m),await mm(l,e,r)})}async function mm(t,e,n){for(const r of n||[]){const a=df(r);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function pf(t,e,{columns:n,primary:r,timeTrigger:a,unique:l},m=!1){const b=a?{triggerKey:"rowid",update:void 0}:void 0;let v=!1,d=t.schema.createTable(e);m&&(d=d.temporary());for(const[T,S]of Object.entries(n)){let H="text";const{type:te,notNull:oe,defaultTo:g}=S,O=pm(te);H=O.dataType,d=d.addColumn(T,H,N=>O.isIncrements?(v=!0,b&&(b.triggerKey=T),N.autoIncrement().primaryKey()):g===dm?(b&&oe===0&&(b.update=T),N.defaultTo(at`CURRENT_TIMESTAMP`)):(oe&&(N=N.notNull()),g!==void 0&&(N=N.defaultTo(lN(g)?g(at):g)),N))}if(!v&&r){const T=df(r);d=d.addPrimaryKeyConstraint(`pk#${T.join("#")}`,T)}for(const T of l||[]){const S=df(T);d=d.addUniqueConstraint(`un#${S.join("#")}`,S)}return await d.ifNotExists().execute(),b}async function ym(t,e,n){if(!n||!n.update)return;const{triggerKey:r,update:a}=n,l=`tgr_${e}_${a}`;await at`create trigger if not exists ${at.ref(l)}
after update
on ${at.table(e)}
begin
  update ${at.table(e)}
  set ${at.ref(a)} = CURRENT_TIMESTAMP
  where ${at.ref(r)} = NEW.${at.ref(r)};
end`.execute(t)}function fN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,n=/"([^"]+)"\s+(\w+)\s?(not null)?/g,[,r,a]=t.replace(/\r\n?/g,"").match(e),l={columns:{},name:r,primary:void 0,unique:[]},m=a.matchAll(n);for(const b of m){const[,v,d,T]=b;if(v.startsWith("pk#")){const[,...S]=v.split("#");l.primary=S}else if(v.startsWith("un#")){const[,...S]=v.split("#");l.unique.push(S)}else l.columns[v]={type:d,notNull:!!T}}return l}async function hN(t,e=[]){const n=await t.selectFrom("sqlite_master").where(({eb:a,and:l})=>{const m=l([a("type","in",["table","trigger","index"]),a("name","!=",rm),a("name","!=",im),a("name","not like","sqlite_%")]);return e.forEach(b=>m.and("name","not like",`${b}%`)),m}).select(["name","sql","type"]).$castTo().execute(),r={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:m}of n)l&&(m==="table"?r.existTables[a]=fN(l):m==="index"?r.indexList.push(a):r.triggerList.push(a));return r}async function dN(t,e,n={},r){r==null||r.debug("====== sync tables start ======");const{existTables:a,indexList:l,triggerList:m}=await hN(t),{reserveOldData:b,truncateIfExists:v=[]}=n,d=new Set(Array.isArray(v)?v:v?Object.keys(a):[]);for(const S of l)await t.schema.dropIndex(S).ifExists().execute();for(const S of m)await at`drop trigger if exists ${at.ref(S)}`.execute(t);for(const[S,H]of Object.entries(a))S in e?(r==null||r.debug(`diff table: ${S}`),await T(S,H,e[S])):(r==null||r.debug(`remove table: ${S}`),await Ru(t,S));for(const[S,H]of Object.entries(e))S in a||(r==null||r.debug(`create table: ${S}`),await rd(t,S,H));r==null||r.debug("======= sync tables end =======");async function T(S,H,te){if(d.has(S)){await t.transaction().execute(async C=>{await Ru(C,S),await rd(C,S,te),r==null||r.debug("clear and sync structure")});return}const{index:oe,...g}=te,O=[],N=pN(H.columns,te.columns);if(N.length===Object.keys(H.columns).length){r==null||r.debug("same table structure, skip");return}r==null||r.debug("different table structure, update"),await t.transaction().execute(async C=>{const R=`_temp_${S}`;await pf(C,R,H,!0),O.push(`copy table ${S} structure to ${R}`),await C.insertInto(R).expression(Ee=>Ee.selectFrom(S).selectAll()).execute(),O.push(`copy table ${S} all data to ${R}`),await Ru(C,S),O.push(`remove table ${S}`);const V=await pf(C,S,g);O.push(`create table ${S}`),N.length&&(await C.insertInto(S).columns(N).expression(Ee=>Ee.selectFrom(R).select(N)).execute(),O.push(`copy columns: ${JSON.stringify(N)}`)),await mm(C,S,oe),await ym(C,S,V),O.push(`add index and trigger for ${S}`),b||(await Ru(C,R),O.push(`remove temporary table ${R}`))}).then(()=>{var C;return(C=r==null?void 0:r.trace)==null?void 0:C.call(r,O.join(`
`))}).catch(C=>{var R;(R=r==null?void 0:r.trace)==null||R.call(r,O.join(`
`)),r==null||r.error(`fail to sync ${S}`,C)})}}function pN(t,e){const n=[];for(const[r,a]of Object.entries(e))if(r in t){const{type:l,notNull:m=!1}=t[r];pm(a.type).dataType===l&&(a.notNull||!1)===m&&n.push(r)}return n}function mN(t,e={}){const{logger:n,...r}=e;return async(a,l)=>{await dN(a,t,r,n?l:void 0)}}const yN={test:cN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function eh(t){const e=new uN({dialect:t}),n=await e.updateTables(mN(yN));if(!n.ready)throw n.error;console.log("test"),console.log(await e.raw(at`PRAGMA table_info(${at.table("test")});`)),console.log(await e.raw(at`select last_insert_rowid()`));for(let r=0;r<10;r++)await e.transaction(async a=>{await a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}).execute()});return e.execute(r=>r.selectFrom("test").selectAll())}const wN=new Rg({async database(){const t=await Qg({locateFile:()=>jg});return new t.Database(await Gg("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),Xg("sqljs",t)},isThrottle:!0}});function bN(){const t=by();function e(){eh(wN).then(n=>{t.value=n})}return{result:t,run:e}}function gN(){return new Worker(""+new URL("sqljsWorker-dc06b080.js",import.meta.url).href)}function NN(){return new Worker(""+new URL("officialWasmWorker-6e6b3fab.js",import.meta.url).href)}const je=0,vN=5,gt=10,wm=12,bm=14,Mi=21,Al=25,_N=27,id=100,xN=101,EN=3850,ON=522,qN=1,CN=2,gm=4,IN=8,Ps=0,Ui=1,zu=2,TN=3,Vu=4,SN=512,kN=1024,AN=2048,WN=16384,sd=1,od=2,ad=3,ud=4,cd=5,ld=0x7fffffffffffffffn,fd=-0x8000000000000000n;class _r extends Error{constructor(e,n){super(e),this.code=n}}const Rs=!0;function RN(t){const e={},n=t._getSqliteFree(),r=t._malloc(8),a=[r,r+4];function l(g){if(typeof g!="string")return 0;const O=t.lengthBytesUTF8(g),N=t._sqlite3_malloc(O+1);return t.stringToUTF8(g,N,O+1),N}function m(g,O){return BigInt(O)<<32n|BigInt(g)&0xffffffffn}const b=function(){const g=BigInt(Number.MAX_SAFE_INTEGER)>>32n,O=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(N,C){return C>g||C<O?m(N,C):C*4294967296+(N&2147483647)-(N&2147483648)}}(),v=new Set;function d(g){if(!v.has(g))throw new _r("not a database",Mi)}const T=new Map;function S(g){if(!T.has(g))throw new _r("not a statement",Mi)}e.bind_collection=function(g,O){S(g);const N=Array.isArray(O),C=e.bind_parameter_count(g);for(let R=1;R<=C;++R){const V=N?R-1:e.bind_parameter_name(g,R),Ee=O[V];Ee!==void 0&&e.bind(g,R,Ee)}return je},e.bind=function(g,O,N){switch(S(g),typeof N){case"number":return N===(N|0)?e.bind_int(g,O,N):e.bind_double(g,O,N);case"string":return e.bind_text(g,O,N);default:return N instanceof Uint8Array||Array.isArray(N)?e.bind_blob(g,O,N):N===null?e.bind_null(g,O):typeof N=="bigint"?e.bind_int64(g,O,N):N===void 0?_N:(console.warn("unknown binding converted to null",N),e.bind_null(g,O))}},e.bind_blob=function(){const g="sqlite3_bind_blob",O=t.cwrap(g,..._e("nnnnn:n"));return function(N,C,R){S(N);const V=R.byteLength??R.length,Ee=t._sqlite3_malloc(V);t.HEAPU8.subarray(Ee).set(R);const ae=O(N,C,Ee,V,n);return oe(g,ae,T.get(N))}}(),e.bind_parameter_count=function(){const g="sqlite3_bind_parameter_count",O=t.cwrap(g,..._e("n:n"));return function(N){return S(N),O(N)}}(),e.bind_double=function(){const g="sqlite3_bind_double",O=t.cwrap(g,..._e("nnn:n"));return function(N,C,R){S(N);const V=O(N,C,R);return oe(g,V,T.get(N))}}(),e.bind_int=function(){const g="sqlite3_bind_int",O=t.cwrap(g,..._e("nnn:n"));return function(N,C,R){if(S(N),R>2147483647||R<-2147483648)return Al;const V=O(N,C,R);return oe(g,V,T.get(N))}}(),e.bind_int64=function(){const g="sqlite3_bind_int64",O=t.cwrap(g,..._e("nnnn:n"));return function(N,C,R){if(S(N),R>ld||R<fd)return Al;const V=R&0xffffffffn,Ee=R>>32n,ae=O(N,C,Number(V),Number(Ee));return oe(g,ae,T.get(N))}}(),e.bind_null=function(){const g="sqlite3_bind_null",O=t.cwrap(g,..._e("nn:n"));return function(N,C){S(N);const R=O(N,C);return oe(g,R,T.get(N))}}(),e.bind_parameter_name=function(){const g="sqlite3_bind_parameter_name",O=t.cwrap(g,..._e("n:s"));return function(N,C){return S(N),O(N,C)}}(),e.bind_text=function(){const g="sqlite3_bind_text",O=t.cwrap(g,..._e("nnnnn:n"));return function(N,C,R){S(N);const V=l(R),Ee=O(N,C,V,-1,n);return oe(g,Ee,T.get(N))}}(),e.changes=function(){const g="sqlite3_changes",O=t.cwrap(g,..._e("n:n"));return function(N){return d(N),O(N)}}(),e.close=function(){const g="sqlite3_close",O=t.cwrap(g,..._e("n:n"),{async:Rs});return async function(N){d(N);const C=await O(N);return v.delete(N),oe(g,C,N)}}(),e.column=function(g,O){S(g);const N=e.column_type(g,O);switch(N){case ud:return e.column_blob(g,O);case od:return e.column_double(g,O);case sd:const C=e.column_int(g,O),R=t.getTempRet0();return b(C,R);case cd:return null;case ad:return e.column_text(g,O);default:throw new _r("unknown type",N)}},e.column_blob=function(){const g="sqlite3_column_blob",O=t.cwrap(g,..._e("nn:n"));return function(N,C){S(N);const R=e.column_bytes(N,C),V=O(N,C);return t.HEAPU8.subarray(V,V+R)}}(),e.column_bytes=function(){const g="sqlite3_column_bytes",O=t.cwrap(g,..._e("nn:n"));return function(N,C){return S(N),O(N,C)}}(),e.column_count=function(){const g="sqlite3_column_count",O=t.cwrap(g,..._e("n:n"));return function(N){return S(N),O(N)}}(),e.column_double=function(){const g="sqlite3_column_double",O=t.cwrap(g,..._e("nn:n"));return function(N,C){return S(N),O(N,C)}}(),e.column_int=function(){const g="sqlite3_column_int64",O=t.cwrap(g,..._e("nn:n"));return function(N,C){return S(N),O(N,C)}}(),e.column_int64=function(){const g="sqlite3_column_int64",O=t.cwrap(g,..._e("nn:n"));return function(N,C){S(N);const R=O(N,C),V=t.getTempRet0();return m(R,V)}}(),e.column_name=function(){const g="sqlite3_column_name",O=t.cwrap(g,..._e("nn:s"));return function(N,C){return S(N),O(N,C)}}(),e.column_names=function(g){const O=[],N=e.column_count(g);for(let C=0;C<N;++C)O.push(e.column_name(g,C));return O},e.column_text=function(){const g="sqlite3_column_text",O=t.cwrap(g,..._e("nn:s"));return function(N,C){return S(N),O(N,C)}}(),e.column_type=function(){const g="sqlite3_column_type",O=t.cwrap(g,..._e("nn:n"));return function(N,C){return S(N),O(N,C)}}(),e.create_function=function(g,O,N,C,R,V,Ee,ae){if(d(g),V&&!Ee&&!ae){const Ce=t.createFunction(g,O,N,C,R,V);return oe("sqlite3_create_function",Ce,g)}if(!V&&Ee&&ae){const Ce=t.createAggregate(g,O,N,C,R,Ee,ae);return oe("sqlite3_create_function",Ce,g)}throw new _r("invalid function combination",Mi)},e.create_module=function(g,O,N,C){d(g);const R=t.createModule(g,O,N,C);return oe("sqlite3_create_module",R,g)},e.data_count=function(){const g="sqlite3_data_count",O=t.cwrap(g,..._e("n:n"));return function(N){return S(N),O(N)}}(),e.declare_vtab=function(){const g="sqlite3_declare_vtab",O=t.cwrap(g,..._e("ns:n"));return function(N,C){const R=O(N,C);return oe("sqlite3_declare_vtab",R)}}(),e.exec=async function(g,O,N){for await(const C of e.statements(g,O)){let R;for(;await e.step(C)===id;)if(N){R=R??e.column_names(C);const V=e.row(C);await N(V,R)}}return je},e.finalize=function(){const g="sqlite3_finalize",O=t.cwrap(g,..._e("n:n"),{async:Rs});return async function(N){if(!T.has(N))return Mi;const C=await O(N);return T.get(N),T.delete(N),C}}(),e.get_autocommit=function(){const g="sqlite3_get_autocommit",O=t.cwrap(g,..._e("n:n"));return function(N){return O(N)}}(),e.libversion=function(){const g="sqlite3_libversion",O=t.cwrap(g,..._e(":s"));return function(){return O()}}(),e.libversion_number=function(){const g="sqlite3_libversion_number",O=t.cwrap(g,..._e(":n"));return function(){return O()}}(),e.limit=function(){const g="sqlite3_limit",O=t.cwrap(g,..._e("nnn:n"));return function(N,C,R){return O(N,C,R)}}(),e.open_v2=function(){const g="sqlite3_open_v2",O=t.cwrap(g,..._e("snnn:n"),{async:Rs});return async function(N,C,R){C=C||gm|CN,R=l(R);const V=await O(N,a[0],C,R),Ee=t.getValue(a[0],"*");return v.add(Ee),t._sqlite3_free(R),t.ccall("RegisterExtensionFunctions","void",["number"],[Ee]),oe(g,V),Ee}}(),e.prepare_v2=function(){const g="sqlite3_prepare_v2",O=t.cwrap(g,..._e("nnnnn:n"),{async:Rs});return async function(N,C){const R=await O(N,C,-1,a[0],a[1]);oe(g,R,N);const V=t.getValue(a[0],"*");return V?(T.set(V,N),{stmt:V,sql:t.getValue(a[1],"*")}):null}}(),e.progress_handler=function(g,O,N,C){d(g),t.progressHandler(g,O,N,C)},e.reset=function(){const g="sqlite3_reset",O=t.cwrap(g,..._e("n:n"),{async:Rs});return async function(N){S(N);const C=await O(N);return oe(g,C,T.get(N))}}(),e.result=function(g,O){switch(typeof O){case"number":O===(O|0)?e.result_int(g,O):e.result_double(g,O);break;case"string":e.result_text(g,O);break;default:if(O instanceof Uint8Array||Array.isArray(O))e.result_blob(g,O);else if(O===null)e.result_null(g);else{if(typeof O=="bigint")return e.result_int64(g,O);console.warn("unknown result converted to null",O),e.result_null(g)}break}},e.result_blob=function(){const g="sqlite3_result_blob",O=t.cwrap(g,..._e("nnnn:n"));return function(N,C){const R=C.byteLength??C.length,V=t._sqlite3_malloc(R);t.HEAPU8.subarray(V).set(C),O(N,V,R,n)}}(),e.result_double=function(){const g="sqlite3_result_double",O=t.cwrap(g,..._e("nn:n"));return function(N,C){O(N,C)}}(),e.result_int=function(){const g="sqlite3_result_int",O=t.cwrap(g,..._e("nn:n"));return function(N,C){O(N,C)}}(),e.result_int64=function(){const g="sqlite3_result_int64",O=t.cwrap(g,..._e("nnn:n"));return function(N,C){if(C>ld||C<fd)return Al;const R=C&0xffffffffn,V=C>>32n;O(N,Number(R),Number(V))}}(),e.result_null=function(){const g="sqlite3_result_null",O=t.cwrap(g,..._e("n:n"));return function(N){O(N)}}(),e.result_text=function(){const g="sqlite3_result_text",O=t.cwrap(g,..._e("nnnn:n"));return function(N,C){const R=l(C);O(N,R,-1,n)}}(),e.row=function(g){const O=[],N=e.data_count(g);for(let C=0;C<N;++C){const R=e.column(g,C);O.push((R==null?void 0:R.buffer)===t.HEAPU8.buffer?R.slice():R)}return O},e.set_authorizer=function(g,O,N){d(g);const C=t.setAuthorizer(g,O,N);return oe("sqlite3_set_authorizer",C,g)},e.sql=function(){const g="sqlite3_sql",O=t.cwrap(g,..._e("n:s"));return function(N){return S(N),O(N)}}(),e.statements=function(g,O){return async function*(){const N=e.str_new(g,O);let C={stmt:null,sql:e.str_value(N)};try{for(;C=await e.prepare_v2(g,C.sql);)yield C.stmt,e.finalize(C.stmt),C.stmt=null}finally{C!=null&&C.stmt&&e.finalize(C.stmt),e.str_finish(N)}}()},e.step=function(){const g="sqlite3_step",O=t.cwrap(g,..._e("n:n"),{async:Rs});return async function(N){S(N);const C=await O(N);return oe(g,C,T.get(N),[id,xN])}}();let H=0;const te=new Map;e.str_new=function(g,O=""){const N=t.lengthBytesUTF8(O),C=H++&4294967295,R={offset:t._sqlite3_malloc(N+1),bytes:N};return te.set(C,R),t.stringToUTF8(O,R.offset,R.bytes+1),C},e.str_appendall=function(g,O){if(!te.has(g))throw new _r("not a string",Mi);const N=te.get(g),C=t.lengthBytesUTF8(O),R=N.bytes+C,V=t._sqlite3_malloc(R+1);t.HEAPU8.subarray(V,V+R+1).set(t.HEAPU8.subarray(N.offset,N.offset+N.bytes)),t.stringToUTF8(O,V+N.bytes,C+1),t._sqlite3_free(N.offset),N.offset=V,N.bytes=R,te.set(g,N)},e.str_finish=function(g){if(!te.has(g))throw new _r("not a string",Mi);const O=te.get(g);te.delete(g),t._sqlite3_free(O.offset)},e.str_value=function(g){if(!te.has(g))throw new _r("not a string",Mi);return te.get(g).offset},e.user_data=function(g){return t.getFunctionUserData(g)},e.value=function(g){const O=e.value_type(g);switch(O){case ud:return e.value_blob(g);case od:return e.value_double(g);case sd:const N=e.value_int(g),C=t.getTempRet0();return b(N,C);case cd:return null;case ad:return e.value_text(g);default:throw new _r("unknown type",O)}},e.value_blob=function(){const g="sqlite3_value_blob",O=t.cwrap(g,..._e("n:n"));return function(N){const C=e.value_bytes(N),R=O(N);return t.HEAPU8.subarray(R,R+C)}}(),e.value_bytes=function(){const g="sqlite3_value_bytes",O=t.cwrap(g,..._e("n:n"));return function(N){return O(N)}}(),e.value_double=function(){const g="sqlite3_value_double",O=t.cwrap(g,..._e("n:n"));return function(N){return O(N)}}(),e.value_int=function(){const g="sqlite3_value_int64",O=t.cwrap(g,..._e("n:n"));return function(N){return O(N)}}(),e.value_int64=function(){const g="sqlite3_value_int64",O=t.cwrap(g,..._e("n:n"));return function(N){const C=O(N),R=t.getTempRet0();return m(C,R)}}(),e.value_text=function(){const g="sqlite3_value_text",O=t.cwrap(g,..._e("n:s"));return function(N){return O(N)}}(),e.value_type=function(){const g="sqlite3_value_type",O=t.cwrap(g,..._e("n:n"));return function(N){return O(N)}}(),e.vfs_register=function(g,O){const N=t.registerVFS(g,O);return oe("sqlite3_vfs_register",N)};function oe(g,O,N=null,C=[je]){if(C.includes(O))return O;const R=N?t.ccall("sqlite3_errmsg","string",["number"],[N]):g;throw new _r(R,O)}return e}function _e(t){const e=[],n=t.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const r=[];for(let a of n[1])switch(a){case"n":r.push("number");break;case"s":r.push("string");break}return e.push(r),e}var DN=(()=>{var t=import.meta.url;return function(e={}){var n;n||(n=typeof e<"u"?e:{});var r,a;n.ready=new Promise((s,u)=>{r=s,a=u});var l=Object.assign({},n),m="./this.program",b=(s,u)=>{throw u},v=typeof window=="object",d=typeof importScripts=="function",T="",S;(v||d)&&(d?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),t&&(T=t),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",d&&(S=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var H=n.print||console.log.bind(console),te=n.printErr||console.warn.bind(console);Object.assign(n,l),l=null,n.thisProgram&&(m=n.thisProgram),n.quit&&(b=n.quit);var oe;n.wasmBinary&&(oe=n.wasmBinary);var g=n.noExitRuntime||!0;typeof WebAssembly!="object"&&rt("no native wasm support detected");var O,N=!1,C,R,V,Ee,ae,Ce,Tt,Wn;function pn(){var s=O.buffer;n.HEAP8=R=new Int8Array(s),n.HEAP16=Ee=new Int16Array(s),n.HEAP32=ae=new Int32Array(s),n.HEAPU8=V=new Uint8Array(s),n.HEAPU16=new Uint16Array(s),n.HEAPU32=Ce=new Uint32Array(s),n.HEAPF32=Tt=new Float32Array(s),n.HEAPF64=Wn=new Float64Array(s)}var Rn=[],mn=[],et=[],en=[],tn=0;function ft(){var s=n.preRun.shift();Rn.unshift(s)}var pe=0,Oe=null;function rt(s){throw n.onAbort&&n.onAbort(s),s="Aborted("+s+")",te(s),N=!0,C=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),a(s),s}function de(s){return s.startsWith("data:application/octet-stream;base64,")}var ke;if(n.locateFile){if(ke="wa-sqlite-async.wasm",!de(ke)){var St=ke;ke=n.locateFile?n.locateFile(St,T):T+St}}else ke=new URL(""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,self.location).href;function gr(s){try{if(s==ke&&oe)return new Uint8Array(oe);if(S)return S(s);throw"both async and sync fetching of the wasm failed"}catch(u){rt(u)}}function ds(s){return oe||!v&&!d||typeof fetch!="function"?Promise.resolve().then(()=>gr(s)):fetch(s,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+s+"'";return u.arrayBuffer()}).catch(()=>gr(s))}function yn(s,u,f){return ds(s).then(y=>WebAssembly.instantiate(y,u)).then(y=>y).then(f,y=>{te("failed to asynchronously prepare wasm: "+y),rt(y)})}function nn(s,u){var f=ke;return oe||typeof WebAssembly.instantiateStreaming!="function"||de(f)||typeof fetch!="function"?yn(f,s,u):fetch(f,{credentials:"same-origin"}).then(y=>WebAssembly.instantiateStreaming(y,s).then(u,function(_){return te("wasm streaming compile failed: "+_),te("falling back to ArrayBuffer instantiation"),yn(f,s,u)}))}var fe,Me;function Dn(s){this.name="ExitStatus",this.message="Program terminated with exit("+s+")",this.status=s}function Bt(s){for(;0<s.length;)s.shift()(n)}function ze(s,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return R[s>>0];case"i8":return R[s>>0];case"i16":return Ee[s>>1];case"i32":return ae[s>>2];case"i64":return ae[s>>2];case"float":return Tt[s>>2];case"double":return Wn[s>>3];case"*":return Ce[s>>2];default:rt("invalid type for getValue: "+u)}}function x(s,u,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":R[s>>0]=u;break;case"i8":R[s>>0]=u;break;case"i16":Ee[s>>1]=u;break;case"i32":ae[s>>2]=u;break;case"i64":Me=[u>>>0,(fe=u,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[s>>2]=Me[0],ae[s+4>>2]=Me[1];break;case"float":Tt[s>>2]=u;break;case"double":Wn[s>>3]=u;break;case"*":Ce[s>>2]=u;break;default:rt("invalid type for setValue: "+f)}}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function W(s,u,f){var y=u+f;for(f=u;s[f]&&!(f>=y);)++f;if(16<f-u&&s.buffer&&q)return q.decode(s.subarray(u,f));for(y="";u<f;){var _=s[u++];if(_&128){var A=s[u++]&63;if((_&224)==192)y+=String.fromCharCode((_&31)<<6|A);else{var k=s[u++]&63;_=(_&240)==224?(_&15)<<12|A<<6|k:(_&7)<<18|A<<12|k<<6|s[u++]&63,65536>_?y+=String.fromCharCode(_):(_-=65536,y+=String.fromCharCode(55296|_>>10,56320|_&1023))}}else y+=String.fromCharCode(_)}return y}function M(s,u){return s?W(V,s,u):""}var K=(s,u)=>{for(var f=0,y=s.length-1;0<=y;y--){var _=s[y];_==="."?s.splice(y,1):_===".."?(s.splice(y,1),f++):f&&(s.splice(y,1),f--)}if(u)for(;f;f--)s.unshift("..");return s},Z=s=>{var u=s.charAt(0)==="/",f=s.substr(-1)==="/";return(s=K(s.split("/").filter(y=>!!y),!u).join("/"))||u||(s="."),s&&f&&(s+="/"),(u?"/":"")+s},U=s=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=u[0],u=u[1],!s&&!u?".":(u&&(u=u.substr(0,u.length-1)),s+u)},z=s=>{if(s==="/")return"/";s=Z(s),s=s.replace(/\/$/,"");var u=s.lastIndexOf("/");return u===-1?s:s.substr(u+1)};function ne(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return s=>crypto.getRandomValues(s);rt("initRandomDevice")}function J(s){return(J=ne())(s)}function ce(){for(var s="",u=!1,f=arguments.length-1;-1<=f&&!u;f--){if(u=0<=f?arguments[f]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";s=u+"/"+s,u=u.charAt(0)==="/"}return s=K(s.split("/").filter(y=>!!y),!u).join("/"),(u?"/":"")+s||"."}function se(s){for(var u=0,f=0;f<s.length;++f){var y=s.charCodeAt(f);127>=y?u++:2047>=y?u+=2:55296<=y&&57343>=y?(u+=4,++f):u+=3}return u}function ue(s,u,f,y){if(!(0<y))return 0;var _=f;y=f+y-1;for(var A=0;A<s.length;++A){var k=s.charCodeAt(A);if(55296<=k&&57343>=k){var Q=s.charCodeAt(++A);k=65536+((k&1023)<<10)|Q&1023}if(127>=k){if(f>=y)break;u[f++]=k}else{if(2047>=k){if(f+1>=y)break;u[f++]=192|k>>6}else{if(65535>=k){if(f+2>=y)break;u[f++]=224|k>>12}else{if(f+3>=y)break;u[f++]=240|k>>18,u[f++]=128|k>>12&63}u[f++]=128|k>>6&63}u[f++]=128|k&63}}return u[f]=0,f-_}var me=[];function ve(s,u){me[s]={input:[],Rb:[],bc:u},ws(s,$e)}var $e={open:function(s){var u=me[s.node.ec];if(!u)throw new ee(43);s.Sb=u,s.seekable=!1},close:function(s){s.Sb.bc.ic(s.Sb)},ic:function(s){s.Sb.bc.ic(s.Sb)},read:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.zc)throw new ee(60);for(var _=0,A=0;A<y;A++){try{var k=s.Sb.bc.zc(s.Sb)}catch{throw new ee(29)}if(k===void 0&&_===0)throw new ee(6);if(k==null)break;_++,u[f+A]=k}return _&&(s.node.timestamp=Date.now()),_},write:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.sc)throw new ee(60);try{for(var _=0;_<y;_++)s.Sb.bc.sc(s.Sb,u[f+_])}catch{throw new ee(29)}return y&&(s.node.timestamp=Date.now()),_}},Re={zc:function(s){if(!s.input.length){var u=null;if(typeof window<"u"&&typeof window.prompt=="function"?(u=window.prompt("Input: "),u!==null&&(u+=`
`)):typeof readline=="function"&&(u=readline(),u!==null&&(u+=`
`)),!u)return null;var f=Array(se(u)+1);u=ue(u,f,0,f.length),f.length=u,s.input=f}return s.input.shift()},sc:function(s,u){u===null||u===10?(H(W(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(H(W(s.Rb,0)),s.Rb=[])}},tt={sc:function(s,u){u===null||u===10?(te(W(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(te(W(s.Rb,0)),s.Rb=[])}},he={Vb:null,Ub:function(){return he.createNode(null,"/",16895,0)},createNode:function(s,u,f,y){if((f&61440)===24576||(f&61440)===4096)throw new ee(63);return he.Vb||(he.Vb={dir:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,cc:he.Cb.cc,jc:he.Cb.jc,Cc:he.Cb.Cc,oc:he.Cb.oc,mc:he.Cb.mc,Bc:he.Cb.Bc,nc:he.Cb.nc},stream:{Zb:he.Mb.Zb}},file:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:{Zb:he.Mb.Zb,read:he.Mb.read,write:he.Mb.write,vc:he.Mb.vc,kc:he.Mb.kc,lc:he.Mb.lc}},link:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,fc:he.Cb.fc},stream:{}},wc:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:Dr}}),f=At(s,u,f,y),(f.mode&61440)===16384?(f.Cb=he.Vb.dir.node,f.Mb=he.Vb.dir.stream,f.Nb={}):(f.mode&61440)===32768?(f.Cb=he.Vb.file.node,f.Mb=he.Vb.file.stream,f.Pb=0,f.Nb=null):(f.mode&61440)===40960?(f.Cb=he.Vb.link.node,f.Mb=he.Vb.link.stream):(f.mode&61440)===8192&&(f.Cb=he.Vb.wc.node,f.Mb=he.Vb.wc.stream),f.timestamp=Date.now(),s&&(s.Nb[u]=f,s.timestamp=f.timestamp),f},Uc:function(s){return s.Nb?s.Nb.subarray?s.Nb.subarray(0,s.Pb):new Uint8Array(s.Nb):new Uint8Array(0)},xc:function(s,u){var f=s.Nb?s.Nb.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),f!=0&&(u=Math.max(u,256)),f=s.Nb,s.Nb=new Uint8Array(u),0<s.Pb&&s.Nb.set(f.subarray(0,s.Pb),0))},Qc:function(s,u){if(s.Pb!=u)if(u==0)s.Nb=null,s.Pb=0;else{var f=s.Nb;s.Nb=new Uint8Array(u),f&&s.Nb.set(f.subarray(0,Math.min(u,s.Pb))),s.Pb=u}},Cb:{Tb:function(s){var u={};return u.Ic=(s.mode&61440)===8192?s.id:1,u.qc=s.id,u.mode=s.mode,u.Oc=1,u.uid=0,u.Lc=0,u.ec=s.ec,(s.mode&61440)===16384?u.size=4096:(s.mode&61440)===32768?u.size=s.Pb:(s.mode&61440)===40960?u.size=s.link.length:u.size=0,u.Ec=new Date(s.timestamp),u.Nc=new Date(s.timestamp),u.Hc=new Date(s.timestamp),u.Fc=4096,u.Gc=Math.ceil(u.size/u.Fc),u},Qb:function(s,u){u.mode!==void 0&&(s.mode=u.mode),u.timestamp!==void 0&&(s.timestamp=u.timestamp),u.size!==void 0&&he.Qc(s,u.size)},cc:function(){throw qn[44]},jc:function(s,u,f,y){return he.createNode(s,u,f,y)},Cc:function(s,u,f){if((s.mode&61440)===16384){try{var y=Pn(u,f)}catch{}if(y)for(var _ in y.Nb)throw new ee(55)}delete s.parent.Nb[s.name],s.parent.timestamp=Date.now(),s.name=f,u.Nb[f]=s,u.timestamp=s.parent.timestamp,s.parent=u},oc:function(s,u){delete s.Nb[u],s.timestamp=Date.now()},mc:function(s,u){var f=Pn(s,u),y;for(y in f.Nb)throw new ee(55);delete s.Nb[u],s.timestamp=Date.now()},Bc:function(s){var u=[".",".."],f;for(f in s.Nb)s.Nb.hasOwnProperty(f)&&u.push(f);return u},nc:function(s,u,f){return s=he.createNode(s,u,41471,0),s.link=f,s},fc:function(s){if((s.mode&61440)!==40960)throw new ee(28);return s.link}},Mb:{read:function(s,u,f,y,_){var A=s.node.Nb;if(_>=s.node.Pb)return 0;if(s=Math.min(s.node.Pb-_,y),8<s&&A.subarray)u.set(A.subarray(_,_+s),f);else for(y=0;y<s;y++)u[f+y]=A[_+y];return s},write:function(s,u,f,y,_,A){if(u.buffer===R.buffer&&(A=!1),!y)return 0;if(s=s.node,s.timestamp=Date.now(),u.subarray&&(!s.Nb||s.Nb.subarray)){if(A)return s.Nb=u.subarray(f,f+y),s.Pb=y;if(s.Pb===0&&_===0)return s.Nb=u.slice(f,f+y),s.Pb=y;if(_+y<=s.Pb)return s.Nb.set(u.subarray(f,f+y),_),y}if(he.xc(s,_+y),s.Nb.subarray&&u.subarray)s.Nb.set(u.subarray(f,f+y),_);else for(A=0;A<y;A++)s.Nb[_+A]=u[f+A];return s.Pb=Math.max(s.Pb,_+y),y},Zb:function(s,u,f){if(f===1?u+=s.position:f===2&&(s.node.mode&61440)===32768&&(u+=s.node.Pb),0>u)throw new ee(28);return u},vc:function(s,u,f){he.xc(s.node,u+f),s.node.Pb=Math.max(s.node.Pb,u+f)},kc:function(s,u,f,y,_){if((s.node.mode&61440)!==32768)throw new ee(43);if(s=s.node.Nb,_&2||s.buffer!==R.buffer){if((0<f||f+u<s.length)&&(s.subarray?s=s.subarray(f,f+u):s=Array.prototype.slice.call(s,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(_=Nu(65536,u))?(V.fill(0,_,_+u),u=_):u=0,!u)throw new ee(48);R.set(s,u)}else f=!1,u=s.byteOffset;return{Pc:u,Dc:f}},lc:function(s,u,f,y){return he.Mb.write(s,u,0,y,f,!1),0}}},wn=null,wi={},Ft=[],ps=1,le=null,kt=!0,ee=null,qn={},Ut=(s,u={})=>{if(s=ce(s),!s)return{path:"",node:null};if(u=Object.assign({yc:!0,tc:0},u),8<u.tc)throw new ee(32);s=s.split("/").filter(k=>!!k);for(var f=wn,y="/",_=0;_<s.length;_++){var A=_===s.length-1;if(A&&u.parent)break;if(f=Pn(f,s[_]),y=Z(y+"/"+s[_]),f.$b&&(!A||A&&u.yc)&&(f=f.$b.root),!A||u.Yb){for(A=0;(f.mode&61440)===40960;)if(f=Ni(y),y=ce(U(y),f),f=Ut(y,{tc:u.tc+1}).node,40<A++)throw new ee(32)}}return{path:y,node:f}},bn=s=>{for(var u;;){if(s===s.parent)return s=s.Ub.Ac,u?s[s.length-1]!=="/"?s+"/"+u:s+u:s;u=u?s.name+"/"+u:s.name,s=s.parent}},ms=(s,u)=>{for(var f=0,y=0;y<u.length;y++)f=(f<<5)-f+u.charCodeAt(y)|0;return(s+f>>>0)%le.length},$=s=>{var u=ms(s.parent.id,s.name);if(le[u]===s)le[u]=s.ac;else for(u=le[u];u;){if(u.ac===s){u.ac=s.ac;break}u=u.ac}},Pn=(s,u)=>{var f;if(f=(f=Nr(s,"x"))?f:s.Cb.cc?0:2)throw new ee(f,s);for(f=le[ms(s.id,u)];f;f=f.ac){var y=f.name;if(f.parent.id===s.id&&y===u)return f}return s.Cb.cc(s,u)},At=(s,u,f,y)=>(s=new wu(s,u,f,y),u=ms(s.parent.id,s.name),s.ac=le[u],le[u]=s),bi={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},ys=s=>{var u=["r","w","rw"][s&3];return s&512&&(u+="w"),u},Nr=(s,u)=>{if(kt)return 0;if(!u.includes("r")||s.mode&292){if(u.includes("w")&&!(s.mode&146)||u.includes("x")&&!(s.mode&73))return 2}else return 2;return 0},er=(s,u)=>{try{return Pn(s,u),20}catch{}return Nr(s,"wx")},Ro=(s,u,f)=>{try{var y=Pn(s,u)}catch(_){return _.Ob}if(s=Nr(s,"wx"))return s;if(f){if((y.mode&61440)!==16384)return 54;if(y===y.parent||bn(y)==="/")return 10}else if((y.mode&61440)===16384)return 31;return 0},ml=(s=0)=>{for(;4096>=s;s++)if(!Ft[s])return s;throw new ee(33)},Do=(s,u)=>(Mr||(Mr=function(){this.hc={}},Mr.prototype={},Object.defineProperties(Mr.prototype,{object:{get:function(){return this.node},set:function(f){this.node=f}},flags:{get:function(){return this.hc.flags},set:function(f){this.hc.flags=f}},position:{get:function(){return this.hc.position},set:function(f){this.hc.position=f}}})),s=Object.assign(new Mr,s),u=ml(u),s.Wb=u,Ft[u]=s),Dr={open:s=>{s.Mb=wi[s.node.ec].Mb,s.Mb.open&&s.Mb.open(s)},Zb:()=>{throw new ee(70)}},ws=(s,u)=>{wi[s]={Mb:u}},Po=(s,u)=>{var f=u==="/",y=!u;if(f&&wn)throw new ee(10);if(!f&&!y){var _=Ut(u,{yc:!1});if(u=_.path,_=_.node,_.$b)throw new ee(10);if((_.mode&61440)!==16384)throw new ee(54)}u={type:s,Wc:{},Ac:u,Mc:[]},s=s.Ub(u),s.Ub=u,u.root=s,f?wn=s:_&&(_.$b=u,_.Ub&&_.Ub.Mc.push(u))},Lo=(s,u,f)=>{var y=Ut(s,{parent:!0}).node;if(s=z(s),!s||s==="."||s==="..")throw new ee(28);var _=er(y,s);if(_)throw new ee(_);if(!y.Cb.jc)throw new ee(63);return y.Cb.jc(y,s,u,f)},gn=(s,u)=>Lo(s,(u!==void 0?u:511)&1023|16384,0),bs=(s,u,f)=>{typeof f>"u"&&(f=u,u=438),Lo(s,u|8192,f)},gi=(s,u)=>{if(!ce(s))throw new ee(44);var f=Ut(u,{parent:!0}).node;if(!f)throw new ee(44);u=z(u);var y=er(f,u);if(y)throw new ee(y);if(!f.Cb.nc)throw new ee(63);f.Cb.nc(f,u,s)},Mo=s=>{var u=Ut(s,{parent:!0}).node;s=z(s);var f=Pn(u,s),y=Ro(u,s,!0);if(y)throw new ee(y);if(!u.Cb.mc)throw new ee(63);if(f.$b)throw new ee(10);u.Cb.mc(u,s),$(f)},Ni=s=>{if(s=Ut(s).node,!s)throw new ee(44);if(!s.Cb.fc)throw new ee(28);return ce(bn(s.parent),s.Cb.fc(s))},Kt=(s,u)=>{if(s=Ut(s,{Yb:!u}).node,!s)throw new ee(44);if(!s.Cb.Tb)throw new ee(63);return s.Cb.Tb(s)},vi=s=>Kt(s,!0),gs=(s,u)=>{if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new ee(63);s.Cb.Qb(s,{mode:u&4095|s.mode&-4096,timestamp:Date.now()})},Bo=(s,u)=>{if(0>u)throw new ee(28);if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new ee(63);if((s.mode&61440)===16384)throw new ee(31);if((s.mode&61440)!==32768)throw new ee(28);var f=Nr(s,"w");if(f)throw new ee(f);s.Cb.Qb(s,{size:u,timestamp:Date.now()})},_i=(s,u,f)=>{if(s==="")throw new ee(44);if(typeof u=="string"){var y=bi[u];if(typeof y>"u")throw Error("Unknown file open mode: "+u);u=y}if(f=u&64?(typeof f>"u"?438:f)&4095|32768:0,typeof s=="object")var _=s;else{s=Z(s);try{_=Ut(s,{Yb:!(u&131072)}).node}catch{}}if(y=!1,u&64)if(_){if(u&128)throw new ee(20)}else _=Lo(s,f,0),y=!0;if(!_)throw new ee(44);if((_.mode&61440)===8192&&(u&=-513),u&65536&&(_.mode&61440)!==16384)throw new ee(54);if(!y&&(f=_?(_.mode&61440)===40960?32:(_.mode&61440)===16384&&(ys(u)!=="r"||u&512)?31:Nr(_,ys(u)):44))throw new ee(f);return u&512&&!y&&Bo(_,0),u&=-131713,_=Do({node:_,path:bn(_),flags:u,seekable:!0,position:0,Mb:_.Mb,Tc:[],error:!1}),_.Mb.open&&_.Mb.open(_),!n.logReadFiles||u&1||(xi||(xi={}),s in xi||(xi[s]=1)),_},Fo=(s,u,f)=>{if(s.Wb===null)throw new ee(8);if(!s.seekable||!s.Mb.Zb)throw new ee(70);if(f!=0&&f!=1&&f!=2)throw new ee(28);s.position=s.Mb.Zb(s,u,f),s.Tc=[]},Pr=()=>{ee||(ee=function(s,u){this.name="ErrnoError",this.node=u,this.Rc=function(f){this.Ob=f},this.Rc(s),this.message="FS error"},ee.prototype=Error(),ee.prototype.constructor=ee,[44].forEach(s=>{qn[s]=new ee(s),qn[s].stack="<generic error, no stack>"}))},Uo,Ns=(s,u)=>{var f=0;return s&&(f|=365),u&&(f|=146),f},Lr=(s,u,f)=>{s=Z("/dev/"+s);var y=Ns(!!u,!!f);tr||(tr=64);var _=tr++<<8|0;ws(_,{open:A=>{A.seekable=!1},close:()=>{f&&f.buffer&&f.buffer.length&&f(10)},read:(A,k,Q,L)=>{for(var B=0,re=0;re<L;re++){try{var Y=u()}catch{throw new ee(29)}if(Y===void 0&&B===0)throw new ee(6);if(Y==null)break;B++,k[Q+re]=Y}return B&&(A.node.timestamp=Date.now()),B},write:(A,k,Q,L)=>{for(var B=0;B<L;B++)try{f(k[Q+B])}catch{throw new ee(29)}return L&&(A.node.timestamp=Date.now()),B}}),bs(s,y,_)},tr,Qe={},Mr,xi;function nr(s,u,f){if(u.charAt(0)==="/")return u;if(s=s===-100?"/":rn(s).path,u.length==0){if(!f)throw new ee(44);return s}return Z(s+"/"+u)}function vs(s,u,f){try{var y=s(u)}catch(A){if(A&&A.node&&Z(u)!==Z(bn(A.node)))return-54;throw A}ae[f>>2]=y.Ic,ae[f+8>>2]=y.qc,ae[f+12>>2]=y.mode,Ce[f+16>>2]=y.Oc,ae[f+20>>2]=y.uid,ae[f+24>>2]=y.Lc,ae[f+28>>2]=y.ec,Me=[y.size>>>0,(fe=y.size,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+40>>2]=Me[0],ae[f+44>>2]=Me[1],ae[f+48>>2]=4096,ae[f+52>>2]=y.Gc,s=y.Ec.getTime(),u=y.Nc.getTime();var _=y.Hc.getTime();return Me=[Math.floor(s/1e3)>>>0,(fe=Math.floor(s/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+56>>2]=Me[0],ae[f+60>>2]=Me[1],Ce[f+64>>2]=s%1e3*1e3,Me=[Math.floor(u/1e3)>>>0,(fe=Math.floor(u/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+72>>2]=Me[0],ae[f+76>>2]=Me[1],Ce[f+80>>2]=u%1e3*1e3,Me=[Math.floor(_/1e3)>>>0,(fe=Math.floor(_/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+88>>2]=Me[0],ae[f+92>>2]=Me[1],Ce[f+96>>2]=_%1e3*1e3,Me=[y.qc>>>0,(fe=y.qc,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+104>>2]=Me[0],ae[f+108>>2]=Me[1],0}var Ei=void 0;function Oi(){return Ei+=4,ae[Ei-4>>2]}function rn(s){if(s=Ft[s],!s)throw new ee(8);return s}function Cn(s,u,f){return ue(s,V,u,f)}function qi(s){return Ce[s>>2]+4294967296*ae[s+4>>2]}var Ke=[0,31,60,91,121,152,182,213,244,274,305,335],Ci=[0,31,59,90,120,151,181,212,243,273,304,334];function Ii(s){var u=se(s)+1,f=Zo(u);return f&&Cn(s,f,u),f}var Ln={};function Ti(){if(!Br){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},u;for(u in Ln)Ln[u]===void 0?delete s[u]:s[u]=Ln[u];var f=[];for(u in s)f.push(u+"="+s[u]);Br=f}return Br}var Br;function Si(){}function sn(){}function _s(){}function $o(){}function au(){}function xs(){}function Qo(){}function Es(){}function jo(){}function Os(){}function Mn(){}function qs(){}function Cs(){}function Fr(){}function Is(){}function uu(){}function zo(){}function cu(){}function Vo(){}function ki(){}function Ai(){}function Ho(){}function Ur(){}function $r(){}function Bn(){}function Wi(){}function Ko(){}function o(){}function c(){}function h(){}function w(){}function E(){}function P(){}function F(){}function ye(){}function Pe(){}function Ae(){}function it(){}function In(){}function Jo(s){C=s,g||0<tn||(n.onExit&&n.onExit(s),N=!0),b(s,new Dn(s))}function Go(s){s instanceof Dn||s=="unwind"||b(1,s)}function Ri(s){try{s()}catch(u){rt(u)}}function yl(s){var u={},f;for(f in s)(function(y){var _=s[y];u[y]=typeof _=="function"?function(){Ts.push(y);try{return _.apply(null,arguments)}finally{N||(Ts.pop()===y||rt(),Tn&&Fn===1&&Ts.length===0&&(Fn=0,Ri(Eu),typeof Fibers<"u"&&Fibers.Xc()))}}:_})(f);return u}var Fn=0,Tn=null,lu=0,Ts=[],fu={},hu={},wl=0,Yo=null,bl=[];function du(){return new Promise((s,u)=>{Yo={resolve:s,reject:u}})}function gl(){var s=Zo(12300),u=s+12;ae[s>>2]=u,ae[s+4>>2]=u+12288,u=Ts[0];var f=fu[u];return f===void 0&&(f=wl++,fu[u]=f,hu[f]=u),ae[s+8>>2]=f,s}function pu(s){if(!N){if(Fn===0){var u=!1,f=!1;s((y=0)=>{if(!N&&(lu=y,u=!0,f)){Fn=2,Ri(()=>Di(Tn)),y=!1;try{var _=(0,n.asm[hu[ae[Tn+8>>2]]])()}catch(Q){_=Q,y=!0}var A=!1;if(!Tn){var k=Yo;k&&(Yo=null,(y?k.reject:k.resolve)(_),A=!0)}if(y&&!A)throw _}}),f=!0,u||(Fn=1,Tn=gl(),Ri(()=>xu(Tn)))}else Fn===2?(Fn=0,Ri(na),bu(Tn),Tn=null,bl.forEach(y=>{if(!N)try{if(y(),!(g||0<tn))try{C=y=C,Jo(y)}catch(_){Go(_)}}catch(_){Go(_)}})):rt("invalid state: "+Fn);return lu}}function mu(s){return pu(u=>{s().then(u)})}var yu={};function Sn(s,u,f,y,_){function A(Y){return--tn,L!==0&&ea(L),u==="string"?M(Y):u==="boolean"?!!Y:Y}var k={string:Y=>{var ie=0;if(Y!=null&&Y!==0){ie=se(Y)+1;var Ie=ta(ie);Cn(Y,Ie,ie),ie=Ie}return ie},array:Y=>{var ie=ta(Y.length);return R.set(Y,ie),ie}};s=n["_"+s];var Q=[],L=0;if(y)for(var B=0;B<y.length;B++){var re=k[f[B]];re?(L===0&&(L=_u()),Q[B]=re(y[B])):Q[B]=y[B]}return f=Tn,y=s.apply(null,Q),tn+=1,_=_&&_.async,Tn!=f?du().then(A):(y=A(y),_?Promise.resolve(y):y)}function wu(s,u,f,y){s||(s=this),this.parent=s,this.Ub=s.Ub,this.$b=null,this.id=ps++,this.name=u,this.mode=f,this.Cb={},this.Mb={},this.ec=y}Object.defineProperties(wu.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(s){s?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(s){s?this.mode|=146:this.mode&=-147}}}),Pr(),le=Array(4096),Po(he,"/"),gn("/tmp"),gn("/home"),gn("/home/web_user"),(()=>{gn("/dev"),ws(259,{read:()=>0,write:(y,_,A,k)=>k}),bs("/dev/null",259),ve(1280,Re),ve(1536,tt),bs("/dev/tty",1280),bs("/dev/tty1",1536);var s=new Uint8Array(1024),u=0,f=()=>(u===0&&(u=J(s).byteLength),s[--u]);Lr("random",f),Lr("urandom",f),gn("/dev/shm"),gn("/dev/shm/tmp")})(),(()=>{gn("/proc");var s=gn("/proc/self");gn("/proc/self/fd"),Po({Ub:()=>{var u=At(s,"fd",16895,73);return u.Cb={cc:(f,y)=>{var _=Ft[+y];if(!_)throw new ee(8);return f={parent:null,Ub:{Ac:"fake"},Cb:{fc:()=>_.path}},f.parent=f}},u}},"/proc/self/fd")})(),function(){const s=new Map;n.setAuthorizer=function(u,f,y){return f?s.set(u,{f,uc:y}):s.delete(u),Sn("set_authorizer","number",["number"],[u])},Si=function(u,f,y,_,A,k){if(s.has(u)){const{f:Q,uc:L}=s.get(u);return Q(L,f,y?M(y):null,_?M(_):null,A?M(A):null,k?M(k):null)}return 0}}(),function(){const s=new Map,u=new Map;n.createFunction=function(f,y,_,A,k,Q){const L=s.size;return s.set(L,{f:Q,Xb:k}),Sn("create_function","number","number string number number number number".split(" "),[f,y,_,A,L,0])},n.createAggregate=function(f,y,_,A,k,Q,L){const B=s.size;return s.set(B,{step:Q,Jc:L,Xb:k}),Sn("create_function","number","number string number number number number".split(" "),[f,y,_,A,B,1])},n.getFunctionUserData=function(f){return u.get(f)},_s=function(f,y,_,A){f=s.get(f),u.set(y,f.Xb),f.f(y,new Uint32Array(V.buffer,A,_)),u.delete(y)},au=function(f,y,_,A){f=s.get(f),u.set(y,f.Xb),f.step(y,new Uint32Array(V.buffer,A,_)),u.delete(y)},sn=function(f,y){f=s.get(f),u.set(y,f.Xb),f.Jc(y),u.delete(y)}}(),function(){const s=new Map;n.progressHandler=function(u,f,y,_){return y?s.set(u,{f:y,uc:_}):s.delete(u),Sn("progress_handler",null,["number","number"],[u,f])},$o=function(u){if(s.has(u)){const{f,uc:y}=s.get(u);return f(y)}return 0}}(),function(){function s(L,B){const re=`get${L}`,Y=`set${L}`;return new Proxy(new DataView(V.buffer,B,L==="Int32"?4:8),{get(ie,Ie){if(Ie===re)return function(Je,xt){if(!xt)throw Error("must be little endian");return ie[Ie](Je,xt)};if(Ie===Y)return function(Je,xt,yt){if(!yt)throw Error("must be little endian");return ie[Ie](Je,xt,yt)};if(typeof Ie=="string"&&Ie.match(/^(get)|(set)/))throw Error("invalid type");return ie[Ie]}})}const u=typeof yu=="object",f=new Map,y=new Map,_=new Map,A=u?new Set:null,k=u?new Set:null,Q=new Map;Ho=function(L,B,re,Y){Q.set(M(L),{size:B,dc:Array.from(new Uint32Array(V.buffer,Y,re))})},n.createModule=function(L,B,re,Y){u&&(re.handleAsync=mu);const ie=f.size;return f.set(ie,{module:re,Xb:Y}),Y=0,re.xCreate&&(Y|=1),re.xConnect&&(Y|=2),re.xBestIndex&&(Y|=4),re.xDisconnect&&(Y|=8),re.xDestroy&&(Y|=16),re.xOpen&&(Y|=32),re.xClose&&(Y|=64),re.xFilter&&(Y|=128),re.xNext&&(Y|=256),re.xEof&&(Y|=512),re.xColumn&&(Y|=1024),re.xRowid&&(Y|=2048),re.xUpdate&&(Y|=4096),re.xBegin&&(Y|=8192),re.xSync&&(Y|=16384),re.xCommit&&(Y|=32768),re.xRollback&&(Y|=65536),re.xFindFunction&&(Y|=131072),re.xRename&&(Y|=262144),Sn("create_module","number",["number","string","number","number"],[L,B,ie,Y])},qs=function(L,B,re,Y,ie,Ie){if(B=f.get(B),y.set(ie,B),u){A.delete(ie);for(const Je of A)y.delete(Je)}return Y=Array.from(new Uint32Array(V.buffer,Y,re)).map(Je=>M(Je)),B.module.xCreate(L,B.Xb,Y,ie,s("Int32",Ie))},Mn=function(L,B,re,Y,ie,Ie){if(B=f.get(B),y.set(ie,B),u){A.delete(ie);for(const Je of A)y.delete(Je)}return Y=Array.from(new Uint32Array(V.buffer,Y,re)).map(Je=>M(Je)),B.module.xConnect(L,B.Xb,Y,ie,s("Int32",Ie))},Qo=function(L,B){var re=y.get(L),Y=Q.get("sqlite3_index_info").dc;const ie={};ie.nConstraint=ze(B+Y[0],"i32"),ie.aConstraint=[];for(var Ie=ze(B+Y[1],"*"),Je=Q.get("sqlite3_index_constraint").size,xt=0;xt<ie.nConstraint;++xt){var yt=ie.aConstraint,on=yt.push,Wt=Ie+xt*Je,ks=Q.get("sqlite3_index_constraint").dc,Qr={};Qr.iColumn=ze(Wt+ks[0],"i32"),Qr.op=ze(Wt+ks[1],"i8"),Qr.usable=!!ze(Wt+ks[2],"i8"),on.call(yt,Qr)}for(ie.nOrderBy=ze(B+Y[2],"i32"),ie.aOrderBy=[],Ie=ze(B+Y[3],"*"),Je=Q.get("sqlite3_index_orderby").size,xt=0;xt<ie.nOrderBy;++xt)yt=ie.aOrderBy,on=yt.push,Wt=Ie+xt*Je,ks=Q.get("sqlite3_index_orderby").dc,Qr={},Qr.iColumn=ze(Wt+ks[0],"i32"),Qr.desc=!!ze(Wt+ks[1],"i8"),on.call(yt,Qr);for(ie.aConstraintUsage=[],Ie=0;Ie<ie.nConstraint;++Ie)ie.aConstraintUsage.push({argvIndex:0,omit:!1});for(ie.idxNum=ze(B+Y[5],"i32"),ie.idxStr=null,ie.orderByConsumed=!!ze(B+Y[8],"i8"),ie.estimatedCost=ze(B+Y[9],"double"),ie.estimatedRows=ze(B+Y[10],"i64"),ie.idxFlags=ze(B+Y[11],"i32"),ie.colUsed=ze(B+Y[12],"i64"),L=re.module.xBestIndex(L,ie),re=Q.get("sqlite3_index_info").dc,Y=ze(B+re[4],"*"),Ie=Q.get("sqlite3_index_constraint_usage").size,on=0;on<ie.nConstraint;++on)Je=Y+on*Ie,yt=ie.aConstraintUsage[on],Wt=Q.get("sqlite3_index_constraint_usage").dc,x(Je+Wt[0],yt.argvIndex,"i32"),x(Je+Wt[1],yt.omit?1:0,"i8");return x(B+re[5],ie.idxNum,"i32"),typeof ie.idxStr=="string"&&(Y=se(ie.idxStr),Ie=Sn("sqlite3_malloc","number",["number"],[Y+1]),Cn(ie.idxStr,Ie,Y+1),x(B+re[6],Ie,"*"),x(B+re[7],1,"i32")),x(B+re[8],ie.orderByConsumed,"i32"),x(B+re[9],ie.estimatedCost,"double"),x(B+re[10],ie.estimatedRows,"i64"),x(B+re[11],ie.idxFlags,"i32"),L},Fr=function(L){const B=y.get(L);return u?A.add(L):y.delete(L),B.module.xDisconnect(L)},Cs=function(L){const B=y.get(L);return u?A.add(L):y.delete(L),B.module.xDestroy(L)},cu=function(L,B){const re=y.get(L);if(_.set(B,re),u){k.delete(B);for(const Y of k)_.delete(Y)}return re.module.xOpen(L,B)},Es=function(L){const B=_.get(L);return u?k.add(L):_.delete(L),B.module.xClose(L)},Is=function(L){return _.get(L).module.xEof(L)?1:0},uu=function(L,B,re,Y,ie){const Ie=_.get(L);return re=re?M(re):null,ie=new Uint32Array(V.buffer,ie,Y),Ie.module.xFilter(L,B,re,ie)},zo=function(L){return _.get(L).module.xNext(L)},jo=function(L,B,re){return _.get(L).module.xColumn(L,B,re)},Ai=function(L,B){return _.get(L).module.xRowid(L,s("BigInt64",B))},$r=function(L,B,re,Y){const ie=y.get(L);return re=new Uint32Array(V.buffer,re,B),ie.module.xUpdate(L,re,s("BigInt64",Y))},xs=function(L){return y.get(L).module.xBegin(L)},Ur=function(L){return y.get(L).module.xSync(L)},Os=function(L){return y.get(L).module.xCommit(L)},ki=function(L){return y.get(L).module.xRollback(L)},Vo=function(L,B){const re=y.get(L);return B=M(B),re.module.xRename(L,B)}}(),function(){function s(k,Q){const L=`get${k}`,B=`set${k}`;return new Proxy(new DataView(V.buffer,Q,k==="Int32"?4:8),{get(re,Y){if(Y===L)return function(ie,Ie){if(!Ie)throw Error("must be little endian");return re[Y](ie,Ie)};if(Y===B)return function(ie,Ie,Je){if(!Je)throw Error("must be little endian");return re[Y](ie,Ie,Je)};if(typeof Y=="string"&&Y.match(/^(get)|(set)/))throw Error("invalid type");return re[Y]}})}function u(k){return k>>=2,Ce[k]+Ce[k+1]*2**32}const f=typeof yu=="object",y=new Map,_=new Map;n.registerVFS=function(k,Q){if(Sn("sqlite3_vfs_find","number",["string"],[k.name]))throw Error(`VFS '${k.name}' already registered`);f&&(k.handleAsync=mu);var L=k.Vc??64;const B=n._malloc(4);return Q=Sn("register_vfs","number",["string","number","number","number"],[k.name,L,Q?1:0,B]),Q||(L=ze(B,"*"),y.set(L,k)),n._free(B),Q};const A=f?new Set:null;Ko=function(k){const Q=_.get(k);return f?A.add(k):_.delete(k),Q.xClose(k)},F=function(k,Q,L,B){return _.get(k).xRead(k,V.subarray(Q,Q+L),u(B))},In=function(k,Q,L,B){return _.get(k).xWrite(k,V.subarray(Q,Q+L),u(B))},Ae=function(k,Q){return _.get(k).xTruncate(k,u(Q))},Pe=function(k,Q){return _.get(k).xSync(k,Q)},w=function(k,Q){const L=_.get(k);return Q=s("BigInt64",Q),L.xFileSize(k,Q)},E=function(k,Q){return _.get(k).xLock(k,Q)},it=function(k,Q){return _.get(k).xUnlock(k,Q)},Wi=function(k,Q){const L=_.get(k);return Q=s("Int32",Q),L.xCheckReservedLock(k,Q)},h=function(k,Q,L){const B=_.get(k);return L=new DataView(V.buffer,L),B.xFileControl(k,Q,L)},ye=function(k){return _.get(k).xSectorSize(k)},c=function(k){return _.get(k).xDeviceCharacteristics(k)},P=function(k,Q,L,B,re){if(k=y.get(k),_.set(L,k),f){A.delete(L);for(var Y of A)_.delete(Y)}if(Y=null,B&64){Y=1;const ie=[];for(;Y;){const Ie=V[Q++];if(Ie)ie.push(Ie);else switch(V[Q]||(Y=null),Y){case 1:ie.push(63),Y=2;break;case 2:ie.push(61),Y=3;break;case 3:ie.push(38),Y=2}}Y=new TextDecoder().decode(new Uint8Array(ie))}else Q&&(Y=M(Q));return re=s("Int32",re),k.xOpen(Y,L,B,re)},o=function(k,Q,L){return y.get(k).xDelete(M(Q),L)},Bn=function(k,Q,L,B){return k=y.get(k),B=s("Int32",B),k.xAccess(M(Q),L,B)}}();var Nl={a:function(s,u,f,y){rt("Assertion failed: "+M(s)+", at: "+[u?M(u):"unknown filename",f,y?M(y):"unknown function"])},K:function(s,u){try{return s=M(s),gs(s,u),0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},M:function(s,u,f){try{if(u=M(u),u=nr(s,u),f&-8)return-28;var y=Ut(u,{Yb:!0}).node;return y?(s="",f&4&&(s+="r"),f&2&&(s+="w"),f&1&&(s+="x"),s&&Nr(y,s)?-2:0):-44}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},L:function(s,u){try{var f=Ft[s];if(!f)throw new ee(8);return gs(f.node,u),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},J:function(s){try{var u=Ft[s];if(!u)throw new ee(8);var f=u.node,y=typeof f=="string"?Ut(f,{Yb:!0}).node:f;if(!y.Cb.Qb)throw new ee(63);return y.Cb.Qb(y,{timestamp:Date.now()}),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},b:function(s,u,f){Ei=f;try{var y=rn(s);switch(u){case 0:var _=Oi();return 0>_?-28:Do(y,_).Wb;case 1:case 2:return 0;case 3:return y.flags;case 4:return _=Oi(),y.flags|=_,0;case 5:return _=Oi(),Ee[_+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ae[Xo()>>2]=28,-1;default:return-28}}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},I:function(s,u){try{var f=rn(s);return vs(Kt,f.path,u)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},j:function(s,u,f){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return-61;var y=Ft[s];if(!y)throw new ee(8);if(!(y.flags&2097155))throw new ee(28);return Bo(y.node,u),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},C:function(s,u){try{if(u===0)return-28;var f=se("/")+1;return u<f?-68:(Cn("/",s,u),f)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},F:function(s,u){try{return s=M(s),vs(vi,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},z:function(s,u,f){try{return u=M(u),u=nr(s,u),u=Z(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),gn(u,f),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},E:function(s,u,f,y){try{u=M(u);var _=y&256;return u=nr(s,u,y&4096),vs(_?vi:Kt,u,f)}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},u:function(s,u,f,y){Ei=y;try{u=M(u),u=nr(s,u);var _=y?Oi():0;return _i(u,f,_).Wb}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},s:function(s,u,f,y){try{if(u=M(u),u=nr(s,u),0>=y)return-28;var _=Ni(u),A=Math.min(y,se(_)),k=R[f+A];return Cn(_,f,y+1),R[f+A]=k,A}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},r:function(s){try{return s=M(s),Mo(s),0}catch(u){if(typeof Qe>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(s,u){try{return s=M(s),vs(Kt,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},o:function(s,u,f){try{if(u=M(u),u=nr(s,u),f===0){s=u;var y=Ut(s,{parent:!0}).node;if(!y)throw new ee(44);var _=z(s),A=Pn(y,_),k=Ro(y,_,!1);if(k)throw new ee(k);if(!y.Cb.oc)throw new ee(63);if(A.$b)throw new ee(10);y.Cb.oc(y,_),$(A)}else f===512?Mo(u):rt("Invalid flags passed to unlinkat");return 0}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},n:function(s,u,f){try{if(u=M(u),u=nr(s,u,!0),f){var y=qi(f),_=ae[f+8>>2];A=1e3*y+_/1e6,f+=16,y=qi(f),_=ae[f+8>>2],k=1e3*y+_/1e6}else var A=Date.now(),k=A;s=A;var Q=Ut(u,{Yb:!0}).node;return Q.Cb.Qb(Q,{timestamp:Math.max(s,k)}),0}catch(L){if(typeof Qe>"u"||L.name!=="ErrnoError")throw L;return-L.Ob}},y:function(s,u){s=new Date(1e3*qi(s)),ae[u>>2]=s.getSeconds(),ae[u+4>>2]=s.getMinutes(),ae[u+8>>2]=s.getHours(),ae[u+12>>2]=s.getDate(),ae[u+16>>2]=s.getMonth(),ae[u+20>>2]=s.getFullYear()-1900,ae[u+24>>2]=s.getDay();var f=s.getFullYear();ae[u+28>>2]=(f%4!==0||f%100===0&&f%400!==0?Ci:Ke)[s.getMonth()]+s.getDate()-1|0,ae[u+36>>2]=-(60*s.getTimezoneOffset()),f=new Date(s.getFullYear(),6,1).getTimezoneOffset();var y=new Date(s.getFullYear(),0,1).getTimezoneOffset();ae[u+32>>2]=(f!=y&&s.getTimezoneOffset()==Math.min(y,f))|0},w:function(s,u,f,y,_,A,k){try{var Q=rn(y);if(u&2&&!(f&2)&&(Q.flags&2097155)!==2)throw new ee(2);if((Q.flags&2097155)===1)throw new ee(2);if(!Q.Mb.kc)throw new ee(43);var L=Q.Mb.kc(Q,s,_,u,f),B=L.Pc;return ae[A>>2]=L.Dc,Ce[k>>2]=B,0}catch(re){if(typeof Qe>"u"||re.name!=="ErrnoError")throw re;return-re.Ob}},x:function(s,u,f,y,_,A){try{var k=rn(_);if(f&2){if((k.node.mode&61440)!==32768)throw new ee(43);y&2||k.Mb.lc&&k.Mb.lc(k,V.slice(s,s+u),A,u,y)}}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},p:function(s,u,f){function y(L){return(L=L.toTimeString().match(/\(([A-Za-z ]+)\)$/))?L[1]:"GMT"}var _=new Date().getFullYear(),A=new Date(_,0,1),k=new Date(_,6,1);_=A.getTimezoneOffset();var Q=k.getTimezoneOffset();Ce[s>>2]=60*Math.max(_,Q),ae[u>>2]=+(_!=Q),s=y(A),u=y(k),s=Ii(s),u=Ii(u),Q<_?(Ce[f>>2]=s,Ce[f+4>>2]=u):(Ce[f>>2]=u,Ce[f+4>>2]=s)},e:function(){return Date.now()},d:()=>performance.now(),l:function(s){var u=V.length;if(s>>>=0,2147483648<s)return!1;for(var f=1;4>=f;f*=2){var y=u*(1+.2/f);y=Math.min(y,s+100663296);var _=Math,A=_.min;y=Math.max(s,y),y+=(65536-y%65536)%65536;e:{var k=O.buffer;try{O.grow(A.call(_,2147483648,y)-k.byteLength+65535>>>16),pn();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},A:function(s,u){var f=0;return Ti().forEach(function(y,_){var A=u+f;for(_=Ce[s+4*_>>2]=A,A=0;A<y.length;++A)R[_++>>0]=y.charCodeAt(A);R[_>>0]=0,f+=y.length+1}),0},B:function(s,u){var f=Ti();Ce[s>>2]=f.length;var y=0;return f.forEach(function(_){y+=_.length+1}),Ce[u>>2]=y,0},f:function(s){try{var u=rn(s);if(u.Wb===null)throw new ee(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(f){throw f}finally{Ft[u.Wb]=null}return u.Wb=null,0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},m:function(s,u){try{var f=rn(s);return R[u>>0]=f.Sb?2:(f.mode&61440)===16384?3:(f.mode&61440)===40960?7:4,Ee[u+2>>1]=0,Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[u+8>>2]=Me[0],ae[u+12>>2]=Me[1],Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[u+16>>2]=Me[0],ae[u+20>>2]=Me[1],0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return y.Ob}},t:function(s,u,f,y){try{e:{var _=rn(s);s=u;for(var A,k=u=0;k<f;k++){var Q=Ce[s>>2],L=Ce[s+4>>2];s+=8;var B=_,re=Q,Y=L,ie=A,Ie=R;if(0>Y||0>ie)throw new ee(28);if(B.Wb===null)throw new ee(8);if((B.flags&2097155)===1)throw new ee(8);if((B.node.mode&61440)===16384)throw new ee(31);if(!B.Mb.read)throw new ee(28);var Je=typeof ie<"u";if(!Je)ie=B.position;else if(!B.seekable)throw new ee(70);var xt=B.Mb.read(B,Ie,re,Y,ie);Je||(B.position+=xt);var yt=xt;if(0>yt){var on=-1;break e}if(u+=yt,yt<L)break;typeof A<"u"&&(A+=yt)}on=u}return Ce[y>>2]=on,0}catch(Wt){if(typeof Qe>"u"||Wt.name!=="ErrnoError")throw Wt;return Wt.Ob}},i:function(s,u,f,y,_){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return 61;var A=rn(s);return Fo(A,u,y),Me=[A.position>>>0,(fe=A.position,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[_>>2]=Me[0],ae[_+4>>2]=Me[1],A.pc&&u===0&&y===0&&(A.pc=null),0}catch(k){if(typeof Qe>"u"||k.name!=="ErrnoError")throw k;return k.Ob}},D:function(s){try{var u=rn(s);return pu(function(f){var y=u.node.Ub;y.type.Sc?y.type.Sc(y,!1,function(_){f(_?function(){return 29}:0)}):f(0)})}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},q:function(s,u,f,y){try{e:{var _=rn(s);s=u;for(var A,k=u=0;k<f;k++){var Q=Ce[s>>2],L=Ce[s+4>>2];s+=8;var B=_,re=Q,Y=L,ie=A,Ie=R;if(0>Y||0>ie)throw new ee(28);if(B.Wb===null)throw new ee(8);if(!(B.flags&2097155))throw new ee(8);if((B.node.mode&61440)===16384)throw new ee(31);if(!B.Mb.write)throw new ee(28);B.seekable&&B.flags&1024&&Fo(B,0,2);var Je=typeof ie<"u";if(!Je)ie=B.position;else if(!B.seekable)throw new ee(70);var xt=B.Mb.write(B,Ie,re,Y,ie,void 0);Je||(B.position+=xt);var yt=xt;if(0>yt){var on=-1;break e}u+=yt,typeof A<"u"&&(A+=yt)}on=u}return Ce[y>>2]=on,0}catch(Wt){if(typeof Qe>"u"||Wt.name!=="ErrnoError")throw Wt;return Wt.Ob}},ra:Si,N:sn,ga:_s,ca:$o,Y:au,la:xs,G:Qo,h:Es,oa:jo,ja:Os,ea:Mn,fa:qs,k:Cs,v:Fr,pa:Is,g:uu,qa:zo,da:cu,ha:Vo,ia:ki,na:Ai,c:Ho,ka:Ur,ma:$r,aa:Bn,V:Wi,$:Ko,ba:o,S:c,U:h,Z:w,X:E,R:P,Q:F,T:ye,_:Pe,O:Ae,W:it,P:In};(function(){function s(f){if(f=f.exports,f=yl(f),n.asm=f,O=n.asm.sa,pn(),mn.unshift(n.asm.ta),pe--,n.monitorRunDependencies&&n.monitorRunDependencies(pe),pe==0&&Oe){var y=Oe;Oe=null,y()}return f}var u={a:Nl};if(pe++,n.monitorRunDependencies&&n.monitorRunDependencies(pe),n.instantiateWasm)try{return n.instantiateWasm(u,s)}catch(f){te("Module.instantiateWasm callback failed with error: "+f),a(f)}return nn(u,function(f){s(f.instance)}).catch(a),{}})(),n._sqlite3_vfs_find=function(){return(n._sqlite3_vfs_find=n.asm.ua).apply(null,arguments)},n._sqlite3_malloc=function(){return(n._sqlite3_malloc=n.asm.va).apply(null,arguments)},n._sqlite3_free=function(){return(n._sqlite3_free=n.asm.wa).apply(null,arguments)},n._sqlite3_prepare_v2=function(){return(n._sqlite3_prepare_v2=n.asm.xa).apply(null,arguments)},n._sqlite3_step=function(){return(n._sqlite3_step=n.asm.ya).apply(null,arguments)},n._sqlite3_column_int64=function(){return(n._sqlite3_column_int64=n.asm.za).apply(null,arguments)},n._sqlite3_column_int=function(){return(n._sqlite3_column_int=n.asm.Aa).apply(null,arguments)},n._sqlite3_finalize=function(){return(n._sqlite3_finalize=n.asm.Ba).apply(null,arguments)},n._sqlite3_reset=function(){return(n._sqlite3_reset=n.asm.Ca).apply(null,arguments)},n._sqlite3_clear_bindings=function(){return(n._sqlite3_clear_bindings=n.asm.Da).apply(null,arguments)},n._sqlite3_value_blob=function(){return(n._sqlite3_value_blob=n.asm.Ea).apply(null,arguments)},n._sqlite3_value_text=function(){return(n._sqlite3_value_text=n.asm.Fa).apply(null,arguments)},n._sqlite3_value_bytes=function(){return(n._sqlite3_value_bytes=n.asm.Ga).apply(null,arguments)},n._sqlite3_value_double=function(){return(n._sqlite3_value_double=n.asm.Ha).apply(null,arguments)},n._sqlite3_value_int=function(){return(n._sqlite3_value_int=n.asm.Ia).apply(null,arguments)},n._sqlite3_value_int64=function(){return(n._sqlite3_value_int64=n.asm.Ja).apply(null,arguments)},n._sqlite3_value_type=function(){return(n._sqlite3_value_type=n.asm.Ka).apply(null,arguments)},n._sqlite3_result_blob=function(){return(n._sqlite3_result_blob=n.asm.La).apply(null,arguments)},n._sqlite3_result_double=function(){return(n._sqlite3_result_double=n.asm.Ma).apply(null,arguments)},n._sqlite3_result_error=function(){return(n._sqlite3_result_error=n.asm.Na).apply(null,arguments)},n._sqlite3_result_int=function(){return(n._sqlite3_result_int=n.asm.Oa).apply(null,arguments)},n._sqlite3_result_int64=function(){return(n._sqlite3_result_int64=n.asm.Pa).apply(null,arguments)},n._sqlite3_result_null=function(){return(n._sqlite3_result_null=n.asm.Qa).apply(null,arguments)},n._sqlite3_result_text=function(){return(n._sqlite3_result_text=n.asm.Ra).apply(null,arguments)},n._sqlite3_column_count=function(){return(n._sqlite3_column_count=n.asm.Sa).apply(null,arguments)},n._sqlite3_data_count=function(){return(n._sqlite3_data_count=n.asm.Ta).apply(null,arguments)},n._sqlite3_column_blob=function(){return(n._sqlite3_column_blob=n.asm.Ua).apply(null,arguments)},n._sqlite3_column_bytes=function(){return(n._sqlite3_column_bytes=n.asm.Va).apply(null,arguments)},n._sqlite3_column_double=function(){return(n._sqlite3_column_double=n.asm.Wa).apply(null,arguments)},n._sqlite3_column_text=function(){return(n._sqlite3_column_text=n.asm.Xa).apply(null,arguments)},n._sqlite3_column_type=function(){return(n._sqlite3_column_type=n.asm.Ya).apply(null,arguments)},n._sqlite3_column_name=function(){return(n._sqlite3_column_name=n.asm.Za).apply(null,arguments)},n._sqlite3_bind_blob=function(){return(n._sqlite3_bind_blob=n.asm._a).apply(null,arguments)},n._sqlite3_bind_double=function(){return(n._sqlite3_bind_double=n.asm.$a).apply(null,arguments)},n._sqlite3_bind_int=function(){return(n._sqlite3_bind_int=n.asm.ab).apply(null,arguments)},n._sqlite3_bind_int64=function(){return(n._sqlite3_bind_int64=n.asm.bb).apply(null,arguments)},n._sqlite3_bind_null=function(){return(n._sqlite3_bind_null=n.asm.cb).apply(null,arguments)},n._sqlite3_bind_text=function(){return(n._sqlite3_bind_text=n.asm.db).apply(null,arguments)},n._sqlite3_bind_parameter_count=function(){return(n._sqlite3_bind_parameter_count=n.asm.eb).apply(null,arguments)},n._sqlite3_bind_parameter_name=function(){return(n._sqlite3_bind_parameter_name=n.asm.fb).apply(null,arguments)},n._sqlite3_sql=function(){return(n._sqlite3_sql=n.asm.gb).apply(null,arguments)},n._sqlite3_exec=function(){return(n._sqlite3_exec=n.asm.hb).apply(null,arguments)},n._sqlite3_errmsg=function(){return(n._sqlite3_errmsg=n.asm.ib).apply(null,arguments)},n._sqlite3_declare_vtab=function(){return(n._sqlite3_declare_vtab=n.asm.jb).apply(null,arguments)},n._sqlite3_libversion=function(){return(n._sqlite3_libversion=n.asm.kb).apply(null,arguments)},n._sqlite3_libversion_number=function(){return(n._sqlite3_libversion_number=n.asm.lb).apply(null,arguments)},n._sqlite3_changes=function(){return(n._sqlite3_changes=n.asm.mb).apply(null,arguments)},n._sqlite3_close=function(){return(n._sqlite3_close=n.asm.nb).apply(null,arguments)},n._sqlite3_limit=function(){return(n._sqlite3_limit=n.asm.ob).apply(null,arguments)},n._sqlite3_open_v2=function(){return(n._sqlite3_open_v2=n.asm.pb).apply(null,arguments)},n._sqlite3_get_autocommit=function(){return(n._sqlite3_get_autocommit=n.asm.qb).apply(null,arguments)};function Xo(){return(Xo=n.asm.rb).apply(null,arguments)}var Zo=n._malloc=function(){return(Zo=n._malloc=n.asm.sb).apply(null,arguments)},bu=n._free=function(){return(bu=n._free=n.asm.tb).apply(null,arguments)};n._RegisterExtensionFunctions=function(){return(n._RegisterExtensionFunctions=n.asm.ub).apply(null,arguments)},n._set_authorizer=function(){return(n._set_authorizer=n.asm.vb).apply(null,arguments)},n._create_function=function(){return(n._create_function=n.asm.wb).apply(null,arguments)},n._create_module=function(){return(n._create_module=n.asm.xb).apply(null,arguments)},n._progress_handler=function(){return(n._progress_handler=n.asm.yb).apply(null,arguments)},n._register_vfs=function(){return(n._register_vfs=n.asm.zb).apply(null,arguments)},n._getSqliteFree=function(){return(n._getSqliteFree=n.asm.Ab).apply(null,arguments)};var gu=n._main=function(){return(gu=n._main=n.asm.Bb).apply(null,arguments)};function Nu(){return(Nu=n.asm.Db).apply(null,arguments)}function vu(){return(vu=n.asm.Eb).apply(null,arguments)}function _u(){return(_u=n.asm.Fb).apply(null,arguments)}function ea(){return(ea=n.asm.Gb).apply(null,arguments)}function ta(){return(ta=n.asm.Hb).apply(null,arguments)}function xu(){return(xu=n.asm.Ib).apply(null,arguments)}function Eu(){return(Eu=n.asm.Jb).apply(null,arguments)}function Di(){return(Di=n.asm.Kb).apply(null,arguments)}function na(){return(na=n.asm.Lb).apply(null,arguments)}n.getTempRet0=vu,n.ccall=Sn,n.cwrap=function(s,u,f,y){var _=!f||f.every(A=>A==="number"||A==="boolean");return u!=="string"&&_&&!y?n["_"+s]:function(){return Sn(s,u,f,arguments,y)}},n.setValue=x,n.getValue=ze,n.UTF8ToString=M,n.stringToUTF8=Cn,n.lengthBytesUTF8=se;var Ss;Oe=function s(){Ss||I(),Ss||(Oe=s)};function I(){function s(){if(!Ss&&(Ss=!0,n.calledRun=!0,!N)){if(n.noFSInit||Uo||(Uo=!0,Pr(),n.stdin=n.stdin,n.stdout=n.stdout,n.stderr=n.stderr,n.stdin?Lr("stdin",n.stdin):gi("/dev/tty","/dev/stdin"),n.stdout?Lr("stdout",null,n.stdout):gi("/dev/tty","/dev/stdout"),n.stderr?Lr("stderr",null,n.stderr):gi("/dev/tty1","/dev/stderr"),_i("/dev/stdin",0),_i("/dev/stdout",1),_i("/dev/stderr",1)),kt=!1,Bt(mn),Bt(et),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),G){var u=gu;try{var f=u(0,0);C=f,Jo(f)}catch(y){Go(y)}}if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)u=n.postRun.shift(),en.unshift(u);Bt(en)}}if(!(0<pe)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ft();Bt(Rn),0<pe||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),s()},1)):s())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();var G=!0;return n.noInitialRun&&(G=!1),I(),e.ready}})();class PN{constructor(){we(this,"mxPathName",64)}xClose(e){return gt}xRead(e,n,r){return gt}xWrite(e,n,r){return gt}xTruncate(e,n){return gt}xSync(e,n){return je}xFileSize(e,n){return gt}xLock(e,n){return je}xUnlock(e,n){return je}xCheckReservedLock(e,n){return n.setInt32(0,0,!0),je}xFileControl(e,n,r){return wm}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 0}xOpen(e,n,r,a){return bm}xDelete(e,n){return gt}xAccess(e,n,r){return gt}handleAsync(e){return e()}}const LN=Ps|Ui|zu|TN|Vu;var Lt,yo,Xa,Za,mf,Gc,Nm,Yc,vm;class MN{constructor(){D(this,Za);D(this,Gc);D(this,Yc);D(this,Lt,Ps);we(this,"timeoutMillis",0);D(this,yo,new Map);D(this,Xa,Promise.resolve(0))}get state(){return i(this,Lt)}async lock(e){return ge(this,Za,mf).call(this,ge(this,Gc,Nm),e)}async unlock(e){return ge(this,Za,mf).call(this,ge(this,Yc,vm),e)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(e,n){return new Promise(async(r,a)=>{try{await navigator.locks.request(e,n,l=>{if(r(l),l)return new Promise(m=>i(this,yo).set(e,m))})}catch(l){a(l)}})}_releaseWebLock(e){var n;(n=i(this,yo).get(e))==null||n(),i(this,yo).delete(e)}async _pollWebLock(e){var r;return(r=(await navigator.locks.query()).held.find(({name:a})=>a===e))==null?void 0:r.mode}_getTimeoutSignal(){if(this.timeoutMillis){const e=new AbortController;return setTimeout(()=>e.abort(),this.timeoutMillis),e.signal}}}Lt=new WeakMap,yo=new WeakMap,Xa=new WeakMap,Za=new WeakSet,mf=async function(e,n){const r=n&LN;try{const a=()=>e.call(this,r);return await j(this,Xa,i(this,Xa).then(a,a)),j(this,Lt,r),je}catch(a){return a.name==="AbortError"?vN:(console.error(a),EN)}},Gc=new WeakSet,Nm=async function(e){if(e===i(this,Lt))return je;switch(i(this,Lt)){case Ps:switch(e){case Ui:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case Ui:switch(e){case zu:return this._SHAREDtoRESERVED();case Vu:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case zu:switch(e){case Vu:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}},Yc=new WeakSet,vm=async function(e){if(e===i(this,Lt))return je;switch(i(this,Lt)){case Vu:switch(e){case Ui:return this._EXCLUSIVEtoSHARED();case Ps:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case zu:switch(e){case Ui:return this._RESERVEDtoSHARED();case Ps:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case Ui:switch(e){case Ps:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}};class BN extends MN{constructor(e){super(),this._lockName=e+"-outer",this._reservedName=e+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}const FN=5e3;let UN=0;const Wl=new WeakMap;function sr(...t){}var wo,bo,eu,qt,tu,go,rs,Xc,_m;class $N{constructor(e,n={durability:"default"}){D(this,Xc);D(this,wo,void 0);D(this,bo,void 0);D(this,eu,void 0);D(this,qt,null);D(this,tu,0);D(this,go,Promise.resolve());D(this,rs,Promise.resolve());j(this,bo,Promise.resolve(e).then(r=>j(this,wo,r))),j(this,eu,n)}async close(){const e=i(this,wo)??await i(this,bo);await i(this,go),await this.sync(),e.close()}async run(e,n){const r=i(this,go).then(()=>ge(this,Xc,_m).call(this,e,n));return j(this,go,r.catch(()=>{})),r}async sync(){await i(this,rs),j(this,rs,Promise.resolve())}}wo=new WeakMap,bo=new WeakMap,eu=new WeakMap,qt=new WeakMap,tu=new WeakMap,go=new WeakMap,rs=new WeakMap,Xc=new WeakSet,_m=async function(e,n){var a,l;const r=i(this,wo)??await i(this,bo);if(e==="readwrite"&&((a=i(this,qt))==null?void 0:a.mode)==="readonly")j(this,qt,null);else if(performance.now()-i(this,tu)>FN){try{(l=i(this,qt))==null||l.commit()}catch(m){if(m.name!=="InvalidStateError")throw m}await new Promise(m=>setTimeout(m)),j(this,qt,null)}for(let m=0;m<2;++m){if(!i(this,qt)){j(this,qt,r.transaction(r.objectStoreNames,e,i(this,eu)));const b=j(this,tu,performance.now());j(this,rs,i(this,rs).then(()=>new Promise((v,d)=>{i(this,qt).addEventListener("complete",T=>{v(),i(this,qt)===T.target&&j(this,qt,null),sr(`transaction ${Wl.get(T.target)} complete`)}),i(this,qt).addEventListener("abort",T=>{console.warn("tx abort",(performance.now()-b)/1e3);const S=T.target.error;d(S),i(this,qt)===T.target&&j(this,qt,null),sr(`transaction ${Wl.get(T.target)} aborted`,S)})}))),Wl.set(i(this,qt),UN++)}try{const b=Object.fromEntries(Array.from(r.objectStoreNames,v=>[v,new QN(i(this,qt).objectStore(v))]));return await n(b)}catch(b){if(j(this,qt,null),m)throw b}}};function Hr(t){return new Promise((e,n)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>n(t.error))})}var _t;class QN{constructor(e){D(this,_t,void 0);j(this,_t,e)}get(e){sr(`get ${i(this,_t).name}`,e);const n=i(this,_t).get(e);return Hr(n)}getAll(e,n){sr(`getAll ${i(this,_t).name}`,e,n);const r=i(this,_t).getAll(e,n);return Hr(r)}getKey(e){sr(`getKey ${i(this,_t).name}`,e);const n=i(this,_t).getKey(e);return Hr(n)}getAllKeys(e,n){sr(`getAllKeys ${i(this,_t).name}`,e,n);const r=i(this,_t).getAllKeys(e,n);return Hr(r)}put(e,n){sr(`put ${i(this,_t).name}`,e,n);const r=i(this,_t).put(e,n);return Hr(r)}delete(e){sr(`delete ${i(this,_t).name}`,e);const n=i(this,_t).delete(e);return Hr(n)}clear(){sr(`clear ${i(this,_t).name}`);const e=i(this,_t).clear();return Hr(e)}index(e){return new jN(i(this,_t).index(e))}}_t=new WeakMap;var is;class jN{constructor(e){D(this,is,void 0);j(this,is,e)}getAllKeys(e,n){sr(`IDBIndex.getAllKeys ${i(this,is).objectStore.name}<${i(this,is).name}>`,e,n);const r=i(this,is).getAllKeys(e,n);return Hr(r)}}is=new WeakMap;const zN=512,hd=3e3,dd={durability:"default",purge:"deferred",purgeAtLeast:16};function an(...t){}var oi,Mt,ct,ss,os,Sr,nu,yf,Zc,xm,el,Em,ai,Ls,tl,Om;class VN extends PN{constructor(n="wa-sqlite",r=dd){super();D(this,nu);D(this,Zc);D(this,el);D(this,ai);D(this,tl);D(this,oi,void 0);D(this,Mt,new Map);D(this,ct,void 0);D(this,ss,new Set);D(this,os,performance.now());D(this,Sr,new Set);this.name=n,j(this,oi,Object.assign({},dd,r)),j(this,ct,new $N(HN(n),{durability:i(this,oi).durability}))}async close(){var n;for(const r of i(this,Mt).keys())await this.xClose(r);await((n=i(this,ct))==null?void 0:n.close()),j(this,ct,null)}xOpen(n,r,a,l){return this.handleAsync(async()=>{n===null&&(n=`null_${r}`),an(`xOpen ${n} 0x${r.toString(16)} 0x${a.toString(16)}`);try{const m=new URL(n,"http://localhost/"),b={path:m.pathname,flags:a,block0:null,locks:new BN(m.pathname)};return i(this,Mt).set(r,b),await i(this,ct).run("readwrite",async({blocks:v})=>{if(b.block0=await v.get(ge(this,ai,Ls).call(this,b,0)),!b.block0)if(a&gm)b.block0={path:b.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},v.put(b.block0);else throw new Error(`file not found: ${b.path}`)}),l.setInt32(0,a&qN,!0),je}catch(m){return console.error(m),bm}})}xClose(n){return this.handleAsync(async()=>{try{const r=i(this,Mt).get(n);return r&&(an(`xClose ${r.path}`),i(this,Mt).delete(n),r.flags&IN&&i(this,ct).run("readwrite",({blocks:a})=>{a.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),je}catch(r){return console.error(r),gt}})}xRead(n,r,a){return this.handleAsync(async()=>{const l=i(this,Mt).get(n);an(`xRead ${l.path} ${r.byteLength} ${a}`);try{return await i(this,ct).run("readonly",async({blocks:b})=>{let v=0;for(;v<r.byteLength;){const d=a+v,T=d<l.block0.data.byteLength?l.block0:await b.get(ge(this,ai,Ls).call(this,l,-d));if(!T||T.data.byteLength-T.offset<=d)return r.fill(0,v),ON;const S=r.subarray(v),H=d+T.offset,te=Math.min(Math.max(T.data.byteLength-H,0),S.byteLength);S.set(T.data.subarray(H,H+te)),v+=te}return je})}catch(m){return console.error(m),gt}})}xWrite(n,r,a){const l=i(this,Sr).has(n);if(l||performance.now()-i(this,os)>hd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n),await new Promise(v=>setTimeout(v));const b=ge(this,nu,yf).call(this,n,r,a);return j(this,os,performance.now()),b});return l&&i(this,Sr).delete(n),m}return ge(this,nu,yf).call(this,n,r,a)}xTruncate(n,r){const a=i(this,Mt).get(n);an(`xTruncate ${a.path} ${r}`);try{Object.assign(a.block0,{fileSize:r,data:a.block0.data.slice(0,r)});const l=Object.assign({},a.block0);return i(this,ct).run("readwrite",({blocks:m})=>{m.delete(ge(this,ai,Ls).call(this,a,-1/0,-r)),m.put(l)}),je}catch(l){return console.error(l),gt}}xSync(n,r){const a=i(this,Sr).has(n);if(a||i(this,oi).durability!=="relaxed"||performance.now()-i(this,os)>hd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n);const b=await ge(this,Zc,xm).call(this,n,r);return j(this,os,performance.now()),b});return a&&i(this,Sr).delete(n),m}const l=i(this,Mt).get(n);return an(`xSync ${l.path} ${r}`),je}xFileSize(n,r){const a=i(this,Mt).get(n);return an(`xFileSize ${a.path}`),r.setBigInt64(0,BigInt(a.block0.fileSize),!0),je}xLock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xLock ${a.path} ${r}`);try{const l=await a.locks.lock(r);return l===je&&a.locks.state===Ui&&(a.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get(ge(this,ai,Ls).call(this,a,0)))),l}catch(l){return console.error(l),gt}})}xUnlock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xUnlock ${a.path} ${r}`);try{return a.locks.unlock(r)}catch(l){return console.error(l),gt}})}xCheckReservedLock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xCheckReservedLock ${a.path}`);const l=await a.locks.isSomewhereReserved();return r.setInt32(0,l?1:0,!0),je})}xSectorSize(n){return zN}xDeviceCharacteristics(n){return WN|SN|kN|AN}xFileControl(n,r,a){const l=i(this,Mt).get(n);switch(an(`xFileControl ${l.path} ${r}`),r){case 11:return l.overwrite=!0,je;case 21:if(l.overwrite)try{return this.handleAsync(async()=>(await ge(this,tl,Om).call(this,l),je))}catch(m){return console.error(m),gt}return je;case 22:return l.overwrite=!1,je;case 31:return this.handleAsync(async()=>{try{return l.block0.version--,l.changedPages=new Set,i(this,ct).run("readwrite",async({blocks:m})=>{const b=await m.index("version").getAllKeys(IDBKeyRange.bound([l.path],[l.path,l.block0.version]));for(const v of b)m.delete(v)}),je}catch(m){return console.error(m),gt}});case 32:try{const m=Object.assign({},l.block0);m.data=m.data.slice();const b=l.changedPages;return l.changedPages=null,i(this,ct).run("readwrite",async({blocks:v})=>{v.put(m);const d=await v.get([l.path,"purge",0])??{path:l.path,offset:"purge",version:0,data:new Map,count:0};d.count+=b.size;for(const T of b)d.data.set(T,m.version);v.put(d),ge(this,el,Em).call(this,l.path,d.count)}),je}catch(m){return console.error(m),gt}case 33:return this.handleAsync(async()=>{try{return l.changedPages=null,l.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get([l.path,0,l.block0.version+1])),je}catch(m){return console.error(m),gt}});default:return wm}}xAccess(n,r,a){return this.handleAsync(async()=>{try{const l=new URL(n,"file://localhost/").pathname;an(`xAccess ${l} ${r}`);const m=await i(this,ct).run("readonly",({blocks:b})=>b.getKey(ge(this,ai,Ls).call(this,{path:l},0)));return a.setInt32(0,m?1:0,!0),je}catch(l){return console.error(l),gt}})}xDelete(n,r){return this.handleAsync(async()=>{const a=new URL(n,"file://localhost/").pathname;try{return i(this,ct).run("readwrite",({blocks:l})=>l.delete(IDBKeyRange.bound([a],[a,[]]))),r&&await i(this,ct).sync(),je}catch(l){return console.error(l),gt}})}async purge(n){const r=Date.now();await i(this,ct).run("readwrite",async({blocks:a})=>{const l=await a.get([n,"purge",0]);if(l){for(const[m,b]of l.data)a.delete(IDBKeyRange.bound([n,m,b],[n,m,1/0],!0,!1));await a.delete([n,"purge",0])}an(`purge ${n} ${(l==null?void 0:l.data.size)??0} pages in ${Date.now()-r} ms`)})}}oi=new WeakMap,Mt=new WeakMap,ct=new WeakMap,ss=new WeakMap,os=new WeakMap,Sr=new WeakMap,nu=new WeakSet,yf=function(n,r,a){const l=i(this,Mt).get(n);an(`xWrite ${l.path} ${r.byteLength} ${a}`);try{const m=l.block0.fileSize;l.block0.fileSize=Math.max(l.block0.fileSize,a+r.byteLength);const b=a===0?l.block0:{path:l.path,offset:-a,version:l.block0.version,data:null};return b.data=r.slice(),l.changedPages?(m===l.block0.fileSize&&l.changedPages.add(-a),a!==0&&i(this,ct).run("readwrite",({blocks:v})=>v.put(b))):i(this,ct).run("readwrite",({blocks:v})=>v.put(b)),je}catch(m){return console.error(m),gt}},Zc=new WeakSet,xm=async function(n,r){const a=i(this,Mt).get(n);an(`xSync ${a.path} ${r}`);try{await i(this,ct).sync()}catch(l){return console.error(l),gt}return je},el=new WeakSet,Em=function(n,r){i(this,oi).purge==="manual"||i(this,ss).has(n)||r<i(this,oi).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(n),i(this,ss).delete(n)}):setTimeout(()=>{this.purge(n),i(this,ss).delete(n)}),i(this,ss).add(n))},ai=new WeakSet,Ls=function(n,r,a=0){const l=!r||-r<n.block0.data.length?-1/0:n.block0.version;return IDBKeyRange.bound([n.path,r,l],[n.path,a,1/0])},tl=new WeakSet,Om=async function(n){const r=n.block0.data.length;if(r<18)return;const a=new DataView(n.block0.data.buffer,n.block0.data.byteOffset);let l=a.getUint16(16);if(l===1&&(l=65536),l===r)return;const m=Math.max(r,l),b=m/r,v=m/l,T=a.getUint32(28)*l,S=n.block0.version;await i(this,ct).run("readwrite",async({blocks:H})=>{const te=await H.index("version").getAllKeys(IDBKeyRange.bound([n.path,S+1],[n.path,1/0]));for(const oe of te)H.delete(oe);H.delete([n.path,"purge",0]);for(let oe=0;oe<T;oe+=m){const g=await H.getAll(IDBKeyRange.lowerBound([n.path,-(oe+m),1/0]),b);for(const O of g)H.delete([O.path,O.offset,O.version]);if(v===1){const O=new Uint8Array(l);for(const C of g)O.set(C.data,-(oe+C.offset));const N={path:n.path,offset:-oe,version:S,data:O};N.offset===0&&(N.fileSize=T,n.block0=N),H.put(N)}else{const O=g[0];for(let N=0;N<v;++N){const C=-(oe+N*l);if(-C>=T)break;const R={path:O.path,offset:C,version:S,data:O.data.subarray(N*l,(N+1)*l)};R.offset===0&&(R.fileSize=T,n.block0=R),H.put(R)}}}})};function HN(t){return new Promise((e,n)=>{const r=globalThis.indexedDB.open(t,5);r.addEventListener("upgradeneeded",function(){r.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),r.addEventListener("success",()=>{e(r.result)}),r.addEventListener("error",()=>{n(r.error)})})}const KN=""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,JN=new Lg({async database(){const t=await DN({locateFile:()=>KN}),e=RN(t),n="wa-sqlite-test";e.vfs_register(new VN(n));const r=await e.open_v2(n,void 0,n);return{sqlite:e,db:r}}});function GN(){console.log("start wa-sqlite test"),eh(JN).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite]",e))})}function YN(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(a){a(n)}),(r=t.get("*"))&&r.slice().map(function(a){a(e,n)})}}}function XN(t){const e=YN(t);return{...e,once(n,r){const a=l=>{e.off(n,a),r(l)};e.on(n,a)}}}var ZN=class{constructor(t){we(this,"config");we(this,"worker");we(this,"connection");we(this,"connectionMutex",new e0);we(this,"mitt");this.config=t}async init(){var e,n;this.worker=this.config.worker??new Worker(new URL(""+new URL("worker-a33901b8.js",import.meta.url).href,self.location),{type:"module"}),this.mitt=XN(),this.worker.onmessage=({data:{type:r,...a}})=>{var l;(l=this.mitt)==null||l.emit(r,a)};const t={type:"init",dbName:this.config.dbName,url:this.config.url};this.worker.postMessage(t),await new Promise((r,a)=>{var l;(l=this.mitt)==null||l.once("init",({err:m})=>{m?a(m):r()})}),this.connection=new t0(this.worker,this.mitt),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{var n;(n=this.mitt)==null||n.once("close",({err:r})=>{var a,l;r?e(r):((a=this.worker)==null||a.terminate(),(l=this.mitt)==null||l.all.clear(),this.mitt=void 0,t())})})}},e0=class{constructor(){we(this,"promise");we(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t==null||t()}},t0=class{constructor(t,e){we(this,"worker");we(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("Sqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t,l={type:"run",mode:r.kind==="SelectQueryNode"?"query":r.kind==="RawNode"?"raw":"exec",sql:n,parameters:e};return this.worker.postMessage(l),new Promise((m,b)=>{this.mitt||b("kysely instance has been destroyed"),this.mitt.once("run",({data:v,err:d})=>{!d&&v?m(v):b(d)})})}},ru,wd,n0=(wd=class{constructor(t){D(this,ru,void 0);j(this,ru,t)}createDriver(){return new ZN(i(this,ru))}createQueryCompiler(){return new nm}createAdapter(){return new am}createIntrospector(t){return new sm(t)}},ru=new WeakMap,wd);const r0=new n0({dbName:"wa-sqlite-worker-test"});function i0(){console.log("start wa-sqlite-worker test"),eh(r0).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite-worker]",e))})}const s0=Nt("h1",null,[Ca(" test "),Nt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ca(" WASM dialect ")],-1),o0=Nt("br",null,null,-1),a0=Nt("h3",null,"see worker result in console",-1),u0=Nt("h3",null,[Ca(" you can explore "),Nt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ca(" file using "),Nt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),c0=Nt("br",null,null,-1),l0={class:"buttons"},f0=Nt("br",null,null,-1),h0=Nt("div",null," result run in main thread: ",-1),d0=By({__name:"App",setup(t){const e=new gN,{result:n,run:r}=bN(),a=new NN;function l(){r()}function m(){e.postMessage("")}function b(){a.postMessage("")}function v(){GN()}function d(){i0()}async function T(){(await window.indexedDB.databases()).forEach(te=>{window.indexedDB.deleteDatabase(te.name)})}async function S(){const H=await navigator.storage.getDirectory();await td("sqljs"),await td("sqlijsWorker"),await T();try{await H.removeEntry("test.db")}catch{}try{await H.removeEntry("test.db-journal")}catch{}console.log("clear all")}return(H,te)=>(ww(),Nw(cr,null,[s0,o0,a0,u0,c0,Nt("div",l0,[Nt("button",{onClick:te[0]||(te[0]=oe=>l())}," test sqljs in main thread "),Nt("button",{onClick:te[1]||(te[1]=oe=>m())}," test sqljs in Worker "),Nt("button",{onClick:te[2]||(te[2]=oe=>b())}," test officialWasm in Worker "),Nt("button",{onClick:te[3]||(te[3]=oe=>v())}," test wa-sqlite in main thread "),Nt("button",{onClick:te[4]||(te[4]=oe=>d())}," test wa-sqlite in Worker "),Nt("button",{onClick:te[5]||(te[5]=oe=>S())}," clear ")]),f0,h0,Nt("pre",null,""+Um(Fd(n))+`
  `,1)],64))}});nb(d0).mount("#root");
