var hi=Object.defineProperty;var bi=(f,o,i)=>o in f?hi(f,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[o]=i;var Dn=(f,o,i)=>(bi(f,typeof o!="symbol"?o+"":o,i),i),zt=(f,o,i)=>{if(!o.has(f))throw TypeError("Cannot "+i)};var d=(f,o,i)=>(zt(f,o,"read from private field"),i?i.call(f):o.get(f)),N=(f,o,i)=>{if(o.has(f))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(f):o.set(f,i)},I=(f,o,i,m)=>(zt(f,o,"write to private field"),m?m.call(f,i):o.set(f,i),i);var Q=(f,o,i)=>(zt(f,o,"access private method"),i);import{u as di}from"./chunk-C2C432FW-3536057a.js";import{a as wi,K as mi,j as _i,v as z,W as yi,Z as pi,z as te,Y as gi,t as Me,f as vi,c as Ei,o as xi,u as ki,J as Ri,n as Ue,G as Ai,X as Si,r as wt,s as mt,e as qi}from"./worker-63343a1a.js";var Ci=(()=>{var f=import.meta.url;return function(o={}){var i=o,m,h;i.ready=new Promise((e,t)=>{m=e,h=t});var v=Object.assign({},i),R="./this.program",q=(e,t)=>{throw t},U=typeof window=="object",ne=typeof importScripts=="function",L="",me;(U||ne)&&(ne?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),f&&(L=f),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",ne&&(me=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var se=i.print||console.log.bind(console),ue=i.printErr||console.error.bind(console);Object.assign(i,v),v=null,i.thisProgram&&(R=i.thisProgram),i.quit&&(q=i.quit);var Y;i.wasmBinary&&(Y=i.wasmBinary),typeof WebAssembly!="object"&&ae("no native wasm support detected");var Z,ie=!1,ce,X,E,Te,k,D,xt,kt;function Tt(){var e=Z.buffer;i.HEAP8=X=new Int8Array(e),i.HEAP16=Te=new Int16Array(e),i.HEAPU8=E=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=k=new Int32Array(e),i.HEAPU32=D=new Uint32Array(e),i.HEAPF32=xt=new Float32Array(e),i.HEAPF64=kt=new Float64Array(e)}var Ht=[],Wt=[],Wn=[],jt=[];function jn(){var e=i.preRun.shift();Ht.unshift(e)}var ke=0,He=null;function ae(e){throw i.onAbort&&i.onAbort(e),e="Aborted("+e+")",ue(e),ie=!0,ce=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),h(e),e}var Kt=e=>e.startsWith("data:application/octet-stream;base64,"),Re;if(i.locateFile){if(Re="wa-sqlite-async.wasm",!Kt(Re)){var Xt=Re;Re=i.locateFile?i.locateFile(Xt,L):L+Xt}}else Re=new URL(""+new URL("wa-sqlite-async-715b3d85.wasm",import.meta.url).href,self.location).href;function Qt(e){if(e==Re&&Y)return new Uint8Array(Y);if(me)return me(e);throw"both async and sync fetching of the wasm failed"}function Kn(e){return Y||!U&&!ne||typeof fetch!="function"?Promise.resolve().then(()=>Qt(e)):fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Qt(e))}function Yt(e,t,r){return Kn(e).then(n=>WebAssembly.instantiate(n,t)).then(n=>n).then(r,n=>{ue(`failed to asynchronously prepare wasm: ${n}`),ae(n)})}function Xn(e,t){var r=Re;return Y||typeof WebAssembly.instantiateStreaming!="function"||Kt(r)||typeof fetch!="function"?Yt(r,e,t):fetch(r,{credentials:"same-origin"}).then(n=>WebAssembly.instantiateStreaming(n,e).then(t,function(a){return ue(`wasm streaming compile failed: ${a}`),ue("falling back to ArrayBuffer instantiation"),Yt(r,e,t)}))}var x,O;function Zt(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var et=e=>{for(;0<e.length;)e.shift()(i)};function B(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return X[e>>0];case"i8":return X[e>>0];case"i16":return Te[e>>1];case"i32":return k[e>>2];case"i64":ae("to do getValue(i64) use WASM_BIGINT");case"float":return xt[e>>2];case"double":return kt[e>>3];case"*":return D[e>>2];default:ae(`invalid type for getValue: ${t}`)}}var Gt=i.noExitRuntime||!0;function le(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":X[e>>0]=t;break;case"i8":X[e>>0]=t;break;case"i16":Te[e>>1]=t;break;case"i32":k[e>>2]=t;break;case"i64":ae("to do setValue(i64) use WASM_BIGINT");case"float":xt[e>>2]=t;break;case"double":kt[e>>3]=t;break;case"*":D[e>>2]=t;break;default:ae(`invalid type for setValue: ${r}`)}}var Jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,C=(e,t,r)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&Jt)return Jt.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(a&128){var c=e[t++]&63;if((a&224)==192)n+=String.fromCharCode((a&31)<<6|c);else{var s=e[t++]&63;a=(a&240)==224?(a&15)<<12|c<<6|s:(a&7)<<18|c<<12|s<<6|e[t++]&63,65536>a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|a&1023))}}else n+=String.fromCharCode(a)}return n},er=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var a=e[n];a==="."?e.splice(n,1):a===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},_e=e=>{var t=e.charAt(0)==="/",r=e.substr(-1)==="/";return(e=er(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},Qn=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},tt=e=>{if(e==="/")return"/";e=_e(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},Yn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ae("initRandomDevice")},tr=e=>(tr=Yn())(e);function rt(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if(t=0<=r?arguments[r]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=er(e.split("/").filter(n=>!!n),!t).join("/"),(t?"/":"")+e||"."}var Rt=[],Ae=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},Se=(e,t,r,n)=>{if(!(0<n))return 0;var a=r;n=r+n-1;for(var c=0;c<e.length;++c){var s=e.charCodeAt(c);if(55296<=s&&57343>=s){var w=e.charCodeAt(++c);s=65536+((s&1023)<<10)|w&1023}if(127>=s){if(r>=n)break;t[r++]=s}else{if(2047>=s){if(r+1>=n)break;t[r++]=192|s>>6}else{if(65535>=s){if(r+2>=n)break;t[r++]=224|s>>12}else{if(r+3>=n)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63}t[r++]=128|s>>6&63}t[r++]=128|s&63}}return t[r]=0,r-a},rr=[];function nr(e,t){rr[e]={input:[],Rb:[],bc:t},Ct(e,Zn)}var Zn={open(e){var t=rr[e.node.ec];if(!t)throw new _(43);e.Sb=t,e.seekable=!1},close(e){e.Sb.bc.ic(e.Sb)},ic(e){e.Sb.bc.ic(e.Sb)},read(e,t,r,n){if(!e.Sb||!e.Sb.bc.xc)throw new _(60);for(var a=0,c=0;c<n;c++){try{var s=e.Sb.bc.xc(e.Sb)}catch{throw new _(29)}if(s===void 0&&a===0)throw new _(6);if(s==null)break;a++,t[r+c]=s}return a&&(e.node.timestamp=Date.now()),a},write(e,t,r,n){if(!e.Sb||!e.Sb.bc.rc)throw new _(60);try{for(var a=0;a<n;a++)e.Sb.bc.rc(e.Sb,t[r+a])}catch{throw new _(29)}return n&&(e.node.timestamp=Date.now()),a}},Gn={xc(){e:{if(!Rt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e){var t=null;break e}t=Array(Ae(e)+1),e=Se(e,t,0,t.length),t.length=e,Rt=t}t=Rt.shift()}return t},rc(e,t){t===null||t===10?(se(C(e.Rb,0)),e.Rb=[]):t!=0&&e.Rb.push(t)},ic(e){e.Rb&&0<e.Rb.length&&(se(C(e.Rb,0)),e.Rb=[])},Yc(){return{Uc:25856,Wc:5,Tc:191,Vc:35387,Sc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Zc(){return 0},$c(){return[24,80]}},Jn={rc(e,t){t===null||t===10?(ue(C(e.Rb,0)),e.Rb=[]):t!=0&&e.Rb.push(t)},ic(e){e.Rb&&0<e.Rb.length&&(ue(C(e.Rb,0)),e.Rb=[])}};function ir(e,t){var r=e.Nb?e.Nb.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),r!=0&&(t=Math.max(t,256)),r=e.Nb,e.Nb=new Uint8Array(t),0<e.Pb&&e.Nb.set(r.subarray(0,e.Pb),0))}var S={Vb:null,Ub(){return S.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new _(63);return S.Vb||(S.Vb={dir:{node:{Tb:S.Cb.Tb,Qb:S.Cb.Qb,cc:S.Cb.cc,jc:S.Cb.jc,Bc:S.Cb.Bc,oc:S.Cb.oc,mc:S.Cb.mc,Ac:S.Cb.Ac,nc:S.Cb.nc},stream:{Zb:S.Mb.Zb}},file:{node:{Tb:S.Cb.Tb,Qb:S.Cb.Qb},stream:{Zb:S.Mb.Zb,read:S.Mb.read,write:S.Mb.write,uc:S.Mb.uc,kc:S.Mb.kc,lc:S.Mb.lc}},link:{node:{Tb:S.Cb.Tb,Qb:S.Cb.Qb,fc:S.Cb.fc},stream:{}},vc:{node:{Tb:S.Cb.Tb,Qb:S.Cb.Qb},stream:ni}}),r=ur(e,t,r,n),oe(r.mode)?(r.Cb=S.Vb.dir.node,r.Mb=S.Vb.dir.stream,r.Nb={}):(r.mode&61440)===32768?(r.Cb=S.Vb.file.node,r.Mb=S.Vb.file.stream,r.Pb=0,r.Nb=null):(r.mode&61440)===40960?(r.Cb=S.Vb.link.node,r.Mb=S.Vb.link.stream):(r.mode&61440)===8192&&(r.Cb=S.Vb.vc.node,r.Mb=S.Vb.vc.stream),r.timestamp=Date.now(),e&&(e.Nb[t]=r,e.timestamp=r.timestamp),r},Xc(e){return e.Nb?e.Nb.subarray?e.Nb.subarray(0,e.Pb):new Uint8Array(e.Nb):new Uint8Array(0)},Cb:{Tb(e){var t={};return t.Hc=(e.mode&61440)===8192?e.id:1,t.yc=e.id,t.mode=e.mode,t.Nc=1,t.uid=0,t.Kc=0,t.ec=e.ec,oe(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Pb:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.Dc=new Date(e.timestamp),t.Mc=new Date(e.timestamp),t.Gc=new Date(e.timestamp),t.Ec=4096,t.Fc=Math.ceil(t.size/t.Ec),t},Qb(e,t){if(t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&(t=t.size,e.Pb!=t))if(t==0)e.Nb=null,e.Pb=0;else{var r=e.Nb;e.Nb=new Uint8Array(t),r&&e.Nb.set(r.subarray(0,Math.min(t,e.Pb))),e.Pb=t}},cc(){throw St[44]},jc(e,t,r,n){return S.createNode(e,t,r,n)},Bc(e,t,r){if(oe(e.mode)){try{var n=qe(t,r)}catch{}if(n)for(var a in n.Nb)throw new _(55)}delete e.parent.Nb[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Nb[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},oc(e,t){delete e.Nb[t],e.timestamp=Date.now()},mc(e,t){var r=qe(e,t),n;for(n in r.Nb)throw new _(55);delete e.Nb[t],e.timestamp=Date.now()},Ac(e){var t=[".",".."],r;for(r in e.Nb)e.Nb.hasOwnProperty(r)&&t.push(r);return t},nc(e,t,r){return e=S.createNode(e,t,41471,0),e.link=r,e},fc(e){if((e.mode&61440)!==40960)throw new _(28);return e.link}},Mb:{read(e,t,r,n,a){var c=e.node.Nb;if(a>=e.node.Pb)return 0;if(e=Math.min(e.node.Pb-a,n),8<e&&c.subarray)t.set(c.subarray(a,a+e),r);else for(n=0;n<e;n++)t[r+n]=c[a+n];return e},write(e,t,r,n,a,c){if(t.buffer===X.buffer&&(c=!1),!n)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Nb||e.Nb.subarray)){if(c)return e.Nb=t.subarray(r,r+n),e.Pb=n;if(e.Pb===0&&a===0)return e.Nb=t.slice(r,r+n),e.Pb=n;if(a+n<=e.Pb)return e.Nb.set(t.subarray(r,r+n),a),n}if(ir(e,a+n),e.Nb.subarray&&t.subarray)e.Nb.set(t.subarray(r,r+n),a);else for(c=0;c<n;c++)e.Nb[a+c]=t[r+c];return e.Pb=Math.max(e.Pb,a+n),n},Zb(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Pb),0>t)throw new _(28);return t},uc(e,t,r){ir(e.node,t+r),e.node.Pb=Math.max(e.node.Pb,t+r)},kc(e,t,r,n,a){if((e.node.mode&61440)!==32768)throw new _(43);if(e=e.node.Nb,a&2||e.buffer!==X.buffer){if((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),r=!0,t=65536*Math.ceil(t/65536),(a=vn(65536,t))?(E.fill(0,a,a+t),t=a):t=0,!t)throw new _(48);X.set(e,t)}else r=!1,t=e.byteOffset;return{Oc:t,Cc:r}},lc(e,t,r,n){return S.Mb.write(e,t,0,n,r,!1),0}}},ei=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},At=null,ar={},We=[],ti=1,ye=null,or=!0,_=null,St={};function J(e,t={}){if(e=rt(e),!e)return{path:"",node:null};if(t=Object.assign({wc:!0,sc:0},t),8<t.sc)throw new _(32);e=e.split("/").filter(s=>!!s);for(var r=At,n="/",a=0;a<e.length;a++){var c=a===e.length-1;if(c&&t.parent)break;if(r=qe(r,e[a]),n=_e(n+"/"+e[a]),r.$b&&(!c||c&&t.wc)&&(r=r.$b.root),!c||t.Yb){for(c=0;(r.mode&61440)===40960;)if(r=wr(n),n=rt(Qn(n),r),r=J(n,{sc:t.sc+1}).node,40<c++)throw new _(32)}}return{path:n,node:r}}function nt(e){for(var t;;){if(e===e.parent)return e=e.Ub.zc,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function qt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ye.length}function sr(e){var t=qt(e.parent.id,e.name);if(ye[t]===e)ye[t]=e.ac;else for(t=ye[t];t;){if(t.ac===e){t.ac=e.ac;break}t=t.ac}}function qe(e,t){var r;if(r=(r=Ie(e,"x"))?r:e.Cb.cc?0:2)throw new _(r,e);for(r=ye[qt(e.id,t)];r;r=r.ac){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.Cb.cc(e,t)}function ur(e,t,r,n){return e=new _n(e,t,r,n),t=qt(e.parent.id,e.name),e.ac=ye[t],ye[t]=e}function oe(e){return(e&61440)===16384}function cr(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function Ie(e,t){if(or)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function lr(e,t){try{return qe(e,t),20}catch{}return Ie(e,"wx")}function fr(e,t,r){try{var n=qe(e,t)}catch(a){return a.Ob}if(e=Ie(e,"wx"))return e;if(r){if(!oe(n.mode))return 54;if(n===n.parent||nt(n)==="/")return 10}else if(oe(n.mode))return 31;return 0}function ri(){for(var e=0;4096>=e;e++)if(!We[e])return e;throw new _(33)}function G(e){if(e=We[e],!e)throw new _(8);return e}function hr(e,t=-1){return Ke||(Ke=function(){this.hc={}},Ke.prototype={},Object.defineProperties(Ke.prototype,{object:{get(){return this.node},set(r){this.node=r}},flags:{get(){return this.hc.flags},set(r){this.hc.flags=r}},position:{get(){return this.hc.position},set(r){this.hc.position=r}}})),e=Object.assign(new Ke,e),t==-1&&(t=ri()),e.Wb=t,We[t]=e}var ni={open(e){e.Mb=ar[e.node.ec].Mb,e.Mb.open&&e.Mb.open(e)},Zb(){throw new _(70)}};function Ct(e,t){ar[e]={Mb:t}}function br(e,t){var r=t==="/",n=!t;if(r&&At)throw new _(10);if(!r&&!n){var a=J(t,{wc:!1});if(t=a.path,a=a.node,a.$b)throw new _(10);if(!oe(a.mode))throw new _(54)}t={type:e,bd:{},zc:t,Lc:[]},e=e.Ub(t),e.Ub=t,t.root=e,r?At=e:a&&(a.$b=t,a.Ub&&a.Ub.Lc.push(t))}function Mt(e,t,r){var n=J(e,{parent:!0}).node;if(e=tt(e),!e||e==="."||e==="..")throw new _(28);var a=lr(n,e);if(a)throw new _(a);if(!n.Cb.jc)throw new _(63);return n.Cb.jc(n,e,t,r)}function fe(e,t){return Mt(e,(t!==void 0?t:511)&1023|16384,0)}function it(e,t,r){typeof r>"u"&&(r=t,t=438),Mt(e,t|8192,r)}function Dt(e,t){if(!rt(e))throw new _(44);var r=J(t,{parent:!0}).node;if(!r)throw new _(44);t=tt(t);var n=lr(r,t);if(n)throw new _(n);if(!r.Cb.nc)throw new _(63);r.Cb.nc(r,t,e)}function dr(e){var t=J(e,{parent:!0}).node;e=tt(e);var r=qe(t,e),n=fr(t,e,!0);if(n)throw new _(n);if(!t.Cb.mc)throw new _(63);if(r.$b)throw new _(10);t.Cb.mc(t,e),sr(r)}function wr(e){if(e=J(e).node,!e)throw new _(44);if(!e.Cb.fc)throw new _(28);return rt(nt(e.parent),e.Cb.fc(e))}function at(e,t){if(e=J(e,{Yb:!t}).node,!e)throw new _(44);if(!e.Cb.Tb)throw new _(63);return e.Cb.Tb(e)}function mr(e){return at(e,!0)}function _r(e,t){if(e=typeof e=="string"?J(e,{Yb:!0}).node:e,!e.Cb.Qb)throw new _(63);e.Cb.Qb(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})}function yr(e,t){if(0>t)throw new _(28);if(e=typeof e=="string"?J(e,{Yb:!0}).node:e,!e.Cb.Qb)throw new _(63);if(oe(e.mode))throw new _(31);if((e.mode&61440)!==32768)throw new _(28);var r=Ie(e,"w");if(r)throw new _(r);e.Cb.Qb(e,{size:t,timestamp:Date.now()})}function ot(e,t,r){if(e==="")throw new _(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?(typeof r>"u"?438:r)&4095|32768:0,typeof e=="object")var a=e;else{e=_e(e);try{a=J(e,{Yb:!(t&131072)}).node}catch{}}if(n=!1,t&64)if(a){if(t&128)throw new _(20)}else a=Mt(e,r,0),n=!0;if(!a)throw new _(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&!oe(a.mode))throw new _(54);if(!n&&(r=a?(a.mode&61440)===40960?32:oe(a.mode)&&(cr(t)!=="r"||t&512)?31:Ie(a,cr(t)):44))throw new _(r);return t&512&&!n&&yr(a,0),t&=-131713,a=hr({node:a,path:nt(a),flags:t,seekable:!0,position:0,Mb:a.Mb,Rc:[],error:!1}),a.Mb.open&&a.Mb.open(a),!i.logReadFiles||t&1||(st||(st={}),e in st||(st[e]=1)),a}function pr(e,t,r){if(e.Wb===null)throw new _(8);if(!e.seekable||!e.Mb.Zb)throw new _(70);if(r!=0&&r!=1&&r!=2)throw new _(28);e.position=e.Mb.Zb(e,t,r),e.Rc=[]}function gr(){_||(_=function(e,t){this.name="ErrnoError",this.node=t,this.Pc=function(r){this.Ob=r},this.Pc(e),this.message="FS error"},_.prototype=Error(),_.prototype.constructor=_,[44].forEach(e=>{St[e]=new _(e),St[e].stack="<generic error, no stack>"}))}var vr;function je(e,t,r){e=_e("/dev/"+e);var n=ei(!!t,!!r);Nt||(Nt=64);var a=Nt++<<8|0;Ct(a,{open(c){c.seekable=!1},close(){r&&r.buffer&&r.buffer.length&&r(10)},read(c,s,w,u){for(var l=0,g=0;g<u;g++){try{var b=t()}catch{throw new _(29)}if(b===void 0&&l===0)throw new _(6);if(b==null)break;l++,s[w+g]=b}return l&&(c.node.timestamp=Date.now()),l},write(c,s,w,u){for(var l=0;l<u;l++)try{r(s[w+l])}catch{throw new _(29)}return u&&(c.node.timestamp=Date.now()),l}}),it(e,n,a)}var Nt,$={},Ke,st;function Ce(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":G(e).path,t.length==0){if(!r)throw new _(44);return e}return _e(e+"/"+t)}function ut(e,t,r){try{var n=e(t)}catch(c){if(c&&c.node&&_e(t)!==_e(nt(c.node)))return-54;throw c}k[r>>2]=n.Hc,k[r+4>>2]=n.mode,D[r+8>>2]=n.Nc,k[r+12>>2]=n.uid,k[r+16>>2]=n.Kc,k[r+20>>2]=n.ec,O=[n.size>>>0,(x=n.size,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[r+24>>2]=O[0],k[r+28>>2]=O[1],k[r+32>>2]=4096,k[r+36>>2]=n.Fc,e=n.Dc.getTime(),t=n.Mc.getTime();var a=n.Gc.getTime();return O=[Math.floor(e/1e3)>>>0,(x=Math.floor(e/1e3),1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[r+40>>2]=O[0],k[r+44>>2]=O[1],D[r+48>>2]=e%1e3*1e3,O=[Math.floor(t/1e3)>>>0,(x=Math.floor(t/1e3),1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[r+56>>2]=O[0],k[r+60>>2]=O[1],D[r+64>>2]=t%1e3*1e3,O=[Math.floor(a/1e3)>>>0,(x=Math.floor(a/1e3),1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[r+72>>2]=O[0],k[r+76>>2]=O[1],D[r+80>>2]=a%1e3*1e3,O=[n.yc>>>0,(x=n.yc,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[r+88>>2]=O[0],k[r+92>>2]=O[1],0}var ct=void 0;function lt(){var e=k[+ct>>2];return ct+=4,e}var Xe=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,ii=[0,31,60,91,121,152,182,213,244,274,305,335],ai=[0,31,59,90,120,151,181,212,243,273,304,334],Er=e=>{var t=Ae(e)+1,r=Ut(t);return r&&Se(e,E,r,t),r},$t={},xr=()=>{if(!Ot){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"},t;for(t in $t)$t[t]===void 0?delete e[t]:e[t]=$t[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Ot=r}return Ot},Ot;function kr(){}function Rr(){}function Ar(){}function Sr(){}function qr(){}function Cr(){}function Mr(){}function Dr(){}function Nr(){}function $r(){}function Or(){}function Ir(){}function Pr(){}function Ur(){}function Lr(){}function zr(){}function Vr(){}function Fr(){}function Br(){}function Tr(){}function Hr(){}function Wr(){}function jr(){}function Kr(){}function Xr(){}function Qr(){}function Yr(){}function Zr(){}function Gr(){}function Jr(){}function en(){}function tn(){}function rn(){}function nn(){}function an(){}function on(){}function sn(){}function un(){}function cn(){}var ft=0,ln=e=>{ce=e,Gt||0<ft||(i.onExit&&i.onExit(e),ie=!0),q(e,new Zt(e))},It=e=>{e instanceof Zt||e=="unwind"||q(1,e)},ht=e=>{try{e()}catch(t){ae(t)}};function oi(){var e=p,t={},r;for(r in e)(function(n){var a=e[n];t[n]=typeof a=="function"?function(){bt.push(n);try{return a.apply(null,arguments)}finally{ie||(bt.pop()===n||ae(),he&&pe===1&&bt.length===0&&(pe=0,ht(An),typeof Fibers<"u"&&Fibers.cd()))}}:a})(r);return t}var pe=0,he=null,fn=0,bt=[],hn={},bn={},si=0,Pt=null,ui=[];function ci(){return new Promise((e,t)=>{Pt={resolve:e,reject:t}})}function li(){var e=Ut(16396),t=e+12;D[e>>2]=t,D[e+4>>2]=t+16384,t=bt[0];var r=hn[t];return r===void 0&&(r=si++,hn[t]=r,bn[r]=t),k[e+8>>2]=r,e}function dn(e){if(!ie){if(pe===0){var t=!1,r=!1;e((n=0)=>{if(!ie&&(fn=n,t=!0,r)){pe=2,ht(()=>Sn(he)),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.resume(),n=!1;try{var a=(0,p[bn[k[he+8>>2]]])()}catch(w){a=w,n=!0}var c=!1;if(!he){var s=Pt;s&&(Pt=null,(n?s.reject:s.resolve)(a),c=!0)}if(n&&!c)throw a}}),r=!0,t||(pe=1,he=li(),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.pause(),ht(()=>Rn(he)))}else pe===2?(pe=0,ht(qn),pn(he),he=null,ui.forEach(n=>{if(!ie)try{if(n(),!(Gt||0<ft))try{ce=n=ce,ln(n)}catch(a){It(a)}}catch(a){It(a)}})):ae(`invalid state: ${pe}`);return fn}}function wn(e){return dn(t=>{e().then(t)})}var mn={},be=(e,t,r,n,a)=>{function c(b){return--ft,u!==0&&kn(u),t==="string"?b?C(E,b):"":t==="boolean"?!!b:b}var s={string:b=>{var y=0;if(b!=null&&b!==0){y=Ae(b)+1;var A=Lt(y);Se(b,E,A,y),y=A}return y},array:b=>{var y=Lt(b.length);return X.set(b,y),y}};e=i["_"+e];var w=[],u=0;if(n)for(var l=0;l<n.length;l++){var g=s[r[l]];g?(u===0&&(u=xn()),w[l]=g(n[l])):w[l]=n[l]}return r=he,n=e.apply(null,w),a=a&&a.async,ft+=1,he!=r?ci().then(c):(n=c(n),a?Promise.resolve(n):n)};function _n(e,t,r,n){e||(e=this),this.parent=e,this.Ub=e.Ub,this.$b=null,this.id=ti++,this.name=t,this.mode=r,this.Cb={},this.Mb={},this.ec=n}Object.defineProperties(_n.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),gr(),ye=Array(4096),br(S,"/"),fe("/tmp"),fe("/home"),fe("/home/web_user"),function(){fe("/dev"),Ct(259,{read:()=>0,write:(n,a,c,s)=>s}),it("/dev/null",259),nr(1280,Gn),nr(1536,Jn),it("/dev/tty",1280),it("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(t=tr(e).byteLength),e[--t]);je("random",r),je("urandom",r),fe("/dev/shm"),fe("/dev/shm/tmp")}(),function(){fe("/proc");var e=fe("/proc/self");fe("/proc/self/fd"),br({Ub(){var t=ur(e,"fd",16895,73);return t.Cb={cc(r,n){var a=G(+n);return r={parent:null,Ub:{zc:"fake"},Cb:{fc:()=>a.path}},r.parent=r}},t}},"/proc/self/fd")}(),function(){let e=new Map;i.setAuthorizer=function(t,r,n){return r?e.set(t,{f:r,tc:n}):e.delete(t),be("set_authorizer","number",["number"],[t])},kr=function(t,r,n,a,c,s){if(e.has(t)){let{f:w,tc:u}=e.get(t);return w(u,r,n?n?C(E,n):"":null,a?a?C(E,a):"":null,c?c?C(E,c):"":null,s?s?C(E,s):"":null)}return 0}}(),function(){let e=new Map,t=new Map;i.createFunction=function(r,n,a,c,s,w){let u=e.size;return e.set(u,{f:w,Xb:s}),be("create_function","number","number string number number number number".split(" "),[r,n,a,c,u,0])},i.createAggregate=function(r,n,a,c,s,w,u){let l=e.size;return e.set(l,{step:w,Ic:u,Xb:s}),be("create_function","number","number string number number number number".split(" "),[r,n,a,c,l,1])},i.getFunctionUserData=function(r){return t.get(r)},Ar=function(r,n,a,c){r=e.get(r),t.set(n,r.Xb),r.f(n,new Uint32Array(E.buffer,c,a)),t.delete(n)},qr=function(r,n,a,c){r=e.get(r),t.set(n,r.Xb),r.step(n,new Uint32Array(E.buffer,c,a)),t.delete(n)},Rr=function(r,n){r=e.get(r),t.set(n,r.Xb),r.Ic(n),t.delete(n)}}(),function(){let e=new Map;i.progressHandler=function(t,r,n,a){return n?e.set(t,{f:n,tc:a}):e.delete(t),be("progress_handler",null,["number","number"],[t,r])},Sr=function(t){if(e.has(t)){let{f:r,tc:n}=e.get(t);return r(n)}return 0}}(),function(){function e(u,l){let g=`get${u}`,b=`set${u}`;return new Proxy(new DataView(E.buffer,l,u==="Int32"?4:8),{get(y,A){if(A===g)return function(M,T){if(!T)throw Error("must be little endian");return y[A](M,T)};if(A===b)return function(M,T,V){if(!V)throw Error("must be little endian");return y[A](M,T,V)};if(typeof A=="string"&&A.match(/^(get)|(set)/))throw Error("invalid type");return y[A]}})}let t=typeof mn=="object",r=new Map,n=new Map,a=new Map,c=t?new Set:null,s=t?new Set:null,w=new Map;Wr=function(u,l,g,b){w.set(u?C(E,u):"",{size:l,dc:Array.from(new Uint32Array(E.buffer,b,g))})},i.createModule=function(u,l,g,b){t&&(g.handleAsync=wn);let y=r.size;return r.set(y,{module:g,Xb:b}),b=0,g.xCreate&&(b|=1),g.xConnect&&(b|=2),g.xBestIndex&&(b|=4),g.xDisconnect&&(b|=8),g.xDestroy&&(b|=16),g.xOpen&&(b|=32),g.xClose&&(b|=64),g.xFilter&&(b|=128),g.xNext&&(b|=256),g.xEof&&(b|=512),g.xColumn&&(b|=1024),g.xRowid&&(b|=2048),g.xUpdate&&(b|=4096),g.xBegin&&(b|=8192),g.xSync&&(b|=16384),g.xCommit&&(b|=32768),g.xRollback&&(b|=65536),g.xFindFunction&&(b|=131072),g.xRename&&(b|=262144),be("create_module","number",["number","string","number","number"],[u,l,y,b])},Ir=function(u,l,g,b,y,A){if(l=r.get(l),n.set(y,l),t){c.delete(y);for(let M of c)n.delete(M)}return b=Array.from(new Uint32Array(E.buffer,b,g)).map(M=>M?C(E,M):""),l.module.xCreate(u,l.Xb,b,y,e("Int32",A))},Or=function(u,l,g,b,y,A){if(l=r.get(l),n.set(y,l),t){c.delete(y);for(let M of c)n.delete(M)}return b=Array.from(new Uint32Array(E.buffer,b,g)).map(M=>M?C(E,M):""),l.module.xConnect(u,l.Xb,b,y,e("Int32",A))},Mr=function(u,l){var g=n.get(u),b=w.get("sqlite3_index_info").dc;let y={};y.nConstraint=B(l+b[0],"i32"),y.aConstraint=[];for(var A=B(l+b[1],"*"),M=w.get("sqlite3_index_constraint").size,T=0;T<y.nConstraint;++T){var V=y.aConstraint,ee=V.push,W=A+T*M,Pe=w.get("sqlite3_index_constraint").dc,ge={};ge.iColumn=B(W+Pe[0],"i32"),ge.op=B(W+Pe[1],"i8"),ge.usable=!!B(W+Pe[2],"i8"),ee.call(V,ge)}for(y.nOrderBy=B(l+b[2],"i32"),y.aOrderBy=[],A=B(l+b[3],"*"),M=w.get("sqlite3_index_orderby").size,T=0;T<y.nOrderBy;++T)V=y.aOrderBy,ee=V.push,W=A+T*M,Pe=w.get("sqlite3_index_orderby").dc,ge={},ge.iColumn=B(W+Pe[0],"i32"),ge.desc=!!B(W+Pe[1],"i8"),ee.call(V,ge);for(y.aConstraintUsage=[],A=0;A<y.nConstraint;++A)y.aConstraintUsage.push({argvIndex:0,omit:!1});for(y.idxNum=B(l+b[5],"i32"),y.idxStr=null,y.orderByConsumed=!!B(l+b[8],"i8"),y.estimatedCost=B(l+b[9],"double"),y.estimatedRows=B(l+b[10],"i32"),y.idxFlags=B(l+b[11],"i32"),y.colUsed=B(l+b[12],"i32"),u=g.module.xBestIndex(u,y),g=w.get("sqlite3_index_info").dc,b=B(l+g[4],"*"),A=w.get("sqlite3_index_constraint_usage").size,ee=0;ee<y.nConstraint;++ee)M=b+ee*A,V=y.aConstraintUsage[ee],W=w.get("sqlite3_index_constraint_usage").dc,le(M+W[0],V.argvIndex,"i32"),le(M+W[1],V.omit?1:0,"i8");return le(l+g[5],y.idxNum,"i32"),typeof y.idxStr=="string"&&(b=Ae(y.idxStr),A=be("sqlite3_malloc","number",["number"],[b+1]),Se(y.idxStr,E,A,b+1),le(l+g[6],A,"*"),le(l+g[7],1,"i32")),le(l+g[8],y.orderByConsumed,"i32"),le(l+g[9],y.estimatedCost,"double"),le(l+g[10],y.estimatedRows,"i32"),le(l+g[11],y.idxFlags,"i32"),u},Ur=function(u){let l=n.get(u);return t?c.add(u):n.delete(u),l.module.xDisconnect(u)},Pr=function(u){let l=n.get(u);return t?c.add(u):n.delete(u),l.module.xDestroy(u)},Fr=function(u,l){let g=n.get(u);if(a.set(l,g),t){s.delete(l);for(let b of s)a.delete(b)}return g.module.xOpen(u,l)},Dr=function(u){let l=a.get(u);return t?s.add(u):a.delete(u),l.module.xClose(u)},Lr=function(u){return a.get(u).module.xEof(u)?1:0},zr=function(u,l,g,b,y){let A=a.get(u);return g=g?g?C(E,g):"":null,y=new Uint32Array(E.buffer,y,b),A.module.xFilter(u,l,g,y)},Vr=function(u){return a.get(u).module.xNext(u)},Nr=function(u,l,g){return a.get(u).module.xColumn(u,l,g)},Hr=function(u,l){return a.get(u).module.xRowid(u,e("BigInt64",l))},Kr=function(u,l,g,b){let y=n.get(u);return g=new Uint32Array(E.buffer,g,l),y.module.xUpdate(u,g,e("BigInt64",b))},Cr=function(u){return n.get(u).module.xBegin(u)},jr=function(u){return n.get(u).module.xSync(u)},$r=function(u){return n.get(u).module.xCommit(u)},Tr=function(u){return n.get(u).module.xRollback(u)},Br=function(u,l){let g=n.get(u);return l=l?C(E,l):"",g.module.xRename(u,l)}}(),function(){function e(s,w){let u=`get${s}`,l=`set${s}`;return new Proxy(new DataView(E.buffer,w,s==="Int32"?4:8),{get(g,b){if(b===u)return function(y,A){if(!A)throw Error("must be little endian");return g[b](y,A)};if(b===l)return function(y,A,M){if(!M)throw Error("must be little endian");return g[b](y,A,M)};if(typeof b=="string"&&b.match(/^(get)|(set)/))throw Error("invalid type");return g[b]}})}function t(s){return s>>=2,D[s]+D[s+1]*2**32}let r=typeof mn=="object",n=new Map,a=new Map;i.registerVFS=function(s,w){if(be("sqlite3_vfs_find","number",["string"],[s.name]))throw Error(`VFS '${s.name}' already registered`);r&&(s.handleAsync=wn);var u=s.ad??64;let l=i._malloc(4);return w=be("register_vfs","number",["string","number","number","number"],[s.name,u,w?1:0,l]),w||(u=B(l,"*"),n.set(u,s)),i._free(l),w};let c=r?new Set:null;Yr=function(s){let w=a.get(s);return r?c.add(s):a.delete(s),w.xClose(s)},nn=function(s,w,u,l){return a.get(s).xRead(s,E.subarray(w,w+u),t(l))},cn=function(s,w,u,l){return a.get(s).xWrite(s,E.subarray(w,w+u),t(l))},sn=function(s,w){return a.get(s).xTruncate(s,t(w))},on=function(s,w){return a.get(s).xSync(s,w)},en=function(s,w){let u=a.get(s);return w=e("BigInt64",w),u.xFileSize(s,w)},tn=function(s,w){return a.get(s).xLock(s,w)},un=function(s,w){return a.get(s).xUnlock(s,w)},Qr=function(s,w){let u=a.get(s);return w=e("Int32",w),u.xCheckReservedLock(s,w)},Jr=function(s,w,u){let l=a.get(s);return u=new DataView(E.buffer,u),l.xFileControl(s,w,u)},an=function(s){return a.get(s).xSectorSize(s)},Gr=function(s){return a.get(s).xDeviceCharacteristics(s)},rn=function(s,w,u,l,g){if(s=n.get(s),a.set(u,s),r){c.delete(u);for(var b of c)a.delete(b)}if(b=null,l&64){b=1;let y=[];for(;b;){let A=E[w++];if(A)y.push(A);else switch(E[w]||(b=null),b){case 1:y.push(63),b=2;break;case 2:y.push(61),b=3;break;case 3:y.push(38),b=2}}b=new TextDecoder().decode(new Uint8Array(y))}else w&&(b=w?C(E,w):"");return g=e("Int32",g),s.xOpen(b,u,l,g)},Zr=function(s,w,u){return n.get(s).xDelete(w?C(E,w):"",u)},Xr=function(s,w,u,l){return s=n.get(s),l=e("Int32",l),s.xAccess(w?C(E,w):"",u,l)}}();var fi={a:(e,t,r,n)=>{ae(`Assertion failed: ${e?C(E,e):""}, at: `+[t?t?C(E,t):"":"unknown filename",r,n?n?C(E,n):"":"unknown function"])},K:function(e,t){try{return e=e?C(E,e):"",_r(e,t),0}catch(r){if(typeof $>"u"||r.name!=="ErrnoError")throw r;return-r.Ob}},M:function(e,t,r){try{if(t=t?C(E,t):"",t=Ce(e,t),r&-8)return-28;var n=J(t,{Yb:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&Ie(n,e)?-2:0):-44}catch(a){if(typeof $>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},L:function(e,t){try{var r=G(e);return _r(r.node,t),0}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},J:function(e){try{var t=G(e).node,r=typeof t=="string"?J(t,{Yb:!0}).node:t;if(!r.Cb.Qb)throw new _(63);return r.Cb.Qb(r,{timestamp:Date.now()}),0}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},b:function(e,t,r){ct=r;try{var n=G(e);switch(t){case 0:var a=lt();if(0>a)return-28;for(;We[a];)a++;return hr(n,a).Wb;case 1:case 2:return 0;case 3:return n.flags;case 4:return a=lt(),n.flags|=a,0;case 5:return a=lt(),Te[a+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return k[yn()>>2]=28,-1;default:return-28}}catch(c){if(typeof $>"u"||c.name!=="ErrnoError")throw c;return-c.Ob}},I:function(e,t){try{var r=G(e);return ut(at,r.path,t)}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},n:function(e,t,r){t=Xe(t,r);try{if(isNaN(t))return 61;var n=G(e);if(!(n.flags&2097155))throw new _(28);return yr(n.node,t),0}catch(a){if(typeof $>"u"||a.name!=="ErrnoError")throw a;return-a.Ob}},C:function(e,t){try{if(t===0)return-28;var r=Ae("/")+1;return t<r?-68:(Se("/",E,e,t),r)}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},F:function(e,t){try{return e=e?C(E,e):"",ut(mr,e,t)}catch(r){if(typeof $>"u"||r.name!=="ErrnoError")throw r;return-r.Ob}},z:function(e,t,r){try{return t=t?C(E,t):"",t=Ce(e,t),t=_e(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),fe(t,r),0}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},E:function(e,t,r,n){try{t=t?C(E,t):"";var a=n&256;return t=Ce(e,t,n&4096),ut(a?mr:at,t,r)}catch(c){if(typeof $>"u"||c.name!=="ErrnoError")throw c;return-c.Ob}},y:function(e,t,r,n){ct=n;try{t=t?C(E,t):"",t=Ce(e,t);var a=n?lt():0;return ot(t,r,a).Wb}catch(c){if(typeof $>"u"||c.name!=="ErrnoError")throw c;return-c.Ob}},w:function(e,t,r,n){try{if(t=t?C(E,t):"",t=Ce(e,t),0>=n)return-28;var a=wr(t),c=Math.min(n,Ae(a)),s=X[r+c];return Se(a,E,r,n+1),X[r+c]=s,c}catch(w){if(typeof $>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},u:function(e){try{return e=e?C(E,e):"",dr(e),0}catch(t){if(typeof $>"u"||t.name!=="ErrnoError")throw t;return-t.Ob}},H:function(e,t){try{return e=e?C(E,e):"",ut(at,e,t)}catch(r){if(typeof $>"u"||r.name!=="ErrnoError")throw r;return-r.Ob}},r:function(e,t,r){try{if(t=t?C(E,t):"",t=Ce(e,t),r===0){e=t;var n=J(e,{parent:!0}).node;if(!n)throw new _(44);var a=tt(e),c=qe(n,a),s=fr(n,a,!1);if(s)throw new _(s);if(!n.Cb.oc)throw new _(63);if(c.$b)throw new _(10);n.Cb.oc(n,a),sr(c)}else r===512?dr(t):ae("Invalid flags passed to unlinkat");return 0}catch(w){if(typeof $>"u"||w.name!=="ErrnoError")throw w;return-w.Ob}},q:function(e,t,r){try{if(t=t?C(E,t):"",t=Ce(e,t,!0),r){var n=D[r>>2]+4294967296*k[r+4>>2],a=k[r+8>>2];c=1e3*n+a/1e6,r+=16,n=D[r>>2]+4294967296*k[r+4>>2],a=k[r+8>>2],s=1e3*n+a/1e6}else var c=Date.now(),s=c;e=c;var w=J(t,{Yb:!0}).node;return w.Cb.Qb(w,{timestamp:Math.max(e,s)}),0}catch(u){if(typeof $>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},l:function(e,t,r){e=new Date(1e3*Xe(e,t)),k[r>>2]=e.getSeconds(),k[r+4>>2]=e.getMinutes(),k[r+8>>2]=e.getHours(),k[r+12>>2]=e.getDate(),k[r+16>>2]=e.getMonth(),k[r+20>>2]=e.getFullYear()-1900,k[r+24>>2]=e.getDay(),t=e.getFullYear(),k[r+28>>2]=(t%4!==0||t%100===0&&t%400!==0?ai:ii)[e.getMonth()]+e.getDate()-1|0,k[r+36>>2]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();k[r+32>>2]=(t!=n&&e.getTimezoneOffset()==Math.min(n,t))|0},i:function(e,t,r,n,a,c,s,w){a=Xe(a,c);try{if(isNaN(a))return 61;var u=G(n);if(t&2&&!(r&2)&&(u.flags&2097155)!==2)throw new _(2);if((u.flags&2097155)===1)throw new _(2);if(!u.Mb.kc)throw new _(43);var l=u.Mb.kc(u,e,a,t,r),g=l.Oc;return k[s>>2]=l.Cc,D[w>>2]=g,0}catch(b){if(typeof $>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},j:function(e,t,r,n,a,c,s){c=Xe(c,s);try{if(isNaN(c))return 61;var w=G(a);if(r&2){if((w.node.mode&61440)!==32768)throw new _(43);n&2||w.Mb.lc&&w.Mb.lc(w,E.slice(e,e+t),c,t,n)}}catch(u){if(typeof $>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},s:(e,t,r)=>{function n(u){return(u=u.toTimeString().match(/\(([A-Za-z ]+)\)$/))?u[1]:"GMT"}var a=new Date().getFullYear(),c=new Date(a,0,1),s=new Date(a,6,1);a=c.getTimezoneOffset();var w=s.getTimezoneOffset();D[e>>2]=60*Math.max(a,w),k[t>>2]=+(a!=w),e=n(c),t=n(s),e=Er(e),t=Er(t),w<a?(D[r>>2]=e,D[r+4>>2]=t):(D[r>>2]=t,D[r+4>>2]=e)},e:()=>Date.now(),d:()=>performance.now(),o:e=>{var t=E.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math;n=Math.max(e,n);e:{a=(a.min.call(a,2147483648,n+(65536-n%65536)%65536)-Z.buffer.byteLength+65535)/65536;try{Z.grow(a),Tt();var c=1;break e}catch{}c=void 0}if(c)return!0}return!1},A:(e,t)=>{var r=0;return xr().forEach((n,a)=>{var c=t+r;for(a=D[e+4*a>>2]=c,c=0;c<n.length;++c)X[a++>>0]=n.charCodeAt(c);X[a>>0]=0,r+=n.length+1}),0},B:(e,t)=>{var r=xr();D[e>>2]=r.length;var n=0;return r.forEach(a=>n+=a.length+1),D[t>>2]=n,0},f:function(e){try{var t=G(e);if(t.Wb===null)throw new _(8);t.pc&&(t.pc=null);try{t.Mb.close&&t.Mb.close(t)}catch(r){throw r}finally{We[t.Wb]=null}return t.Wb=null,0}catch(r){if(typeof $>"u"||r.name!=="ErrnoError")throw r;return r.Ob}},p:function(e,t){try{var r=G(e);return X[t>>0]=r.Sb?2:oe(r.mode)?3:(r.mode&61440)===40960?7:4,Te[t+2>>1]=0,O=[0,(x=0,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[t+8>>2]=O[0],k[t+12>>2]=O[1],O=[0,(x=0,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[t+16>>2]=O[0],k[t+20>>2]=O[1],0}catch(n){if(typeof $>"u"||n.name!=="ErrnoError")throw n;return n.Ob}},x:function(e,t,r,n){try{e:{var a=G(e);e=t;for(var c,s=t=0;s<r;s++){var w=D[e>>2],u=D[e+4>>2];e+=8;var l=a,g=w,b=u,y=c,A=X;if(0>b||0>y)throw new _(28);if(l.Wb===null)throw new _(8);if((l.flags&2097155)===1)throw new _(8);if(oe(l.node.mode))throw new _(31);if(!l.Mb.read)throw new _(28);var M=typeof y<"u";if(!M)y=l.position;else if(!l.seekable)throw new _(70);var T=l.Mb.read(l,A,g,b,y);M||(l.position+=T);var V=T;if(0>V){var ee=-1;break e}if(t+=V,V<u)break;typeof c<"u"&&(c+=V)}ee=t}return D[n>>2]=ee,0}catch(W){if(typeof $>"u"||W.name!=="ErrnoError")throw W;return W.Ob}},m:function(e,t,r,n,a){t=Xe(t,r);try{if(isNaN(t))return 61;var c=G(e);return pr(c,t,n),O=[c.position>>>0,(x=c.position,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],k[a>>2]=O[0],k[a+4>>2]=O[1],c.pc&&t===0&&n===0&&(c.pc=null),0}catch(s){if(typeof $>"u"||s.name!=="ErrnoError")throw s;return s.Ob}},D:function(e){try{var t=G(e);return dn(r=>{var n=t.node.Ub;n.type.Qc?n.type.Qc(n,!1,a=>{r(a?29:0)}):r(0)})}catch(r){if(typeof $>"u"||r.name!=="ErrnoError")throw r;return r.Ob}},t:function(e,t,r,n){try{e:{var a=G(e);e=t;for(var c,s=t=0;s<r;s++){var w=D[e>>2],u=D[e+4>>2];e+=8;var l=a,g=w,b=u,y=c,A=X;if(0>b||0>y)throw new _(28);if(l.Wb===null)throw new _(8);if(!(l.flags&2097155))throw new _(8);if(oe(l.node.mode))throw new _(31);if(!l.Mb.write)throw new _(28);l.seekable&&l.flags&1024&&pr(l,0,2);var M=typeof y<"u";if(!M)y=l.position;else if(!l.seekable)throw new _(70);var T=l.Mb.write(l,A,g,b,y,void 0);M||(l.position+=T);var V=T;if(0>V){var ee=-1;break e}t+=V,typeof c<"u"&&(c+=V)}ee=t}return D[n>>2]=ee,0}catch(W){if(typeof $>"u"||W.name!=="ErrnoError")throw W;return W.Ob}},ra:kr,N:Rr,ga:Ar,ca:Sr,Y:qr,la:Cr,G:Mr,h:Dr,oa:Nr,ja:$r,ea:Or,fa:Ir,k:Pr,v:Ur,pa:Lr,g:zr,qa:Vr,da:Fr,ha:Br,ia:Tr,na:Hr,c:Wr,ka:jr,ma:Kr,aa:Xr,V:Qr,$:Yr,ba:Zr,S:Gr,U:Jr,Z:en,X:tn,R:rn,Q:nn,T:an,_:on,O:sn,W:un,P:cn},p=function(){function e(r){return p=r.exports,p=oi(),Z=p.sa,Tt(),Wt.unshift(p.ta),ke--,i.monitorRunDependencies&&i.monitorRunDependencies(ke),ke==0&&He&&(r=He,He=null,r()),p}var t={a:fi};if(ke++,i.monitorRunDependencies&&i.monitorRunDependencies(ke),i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(r){ue(`Module.instantiateWasm callback failed with error: ${r}`),h(r)}return Xn(t,function(r){e(r.instance)}).catch(h),{}}();i._sqlite3_vfs_find=e=>(i._sqlite3_vfs_find=p.ua)(e),i._sqlite3_malloc=e=>(i._sqlite3_malloc=p.va)(e),i._sqlite3_free=e=>(i._sqlite3_free=p.wa)(e),i._sqlite3_prepare_v2=(e,t,r,n,a)=>(i._sqlite3_prepare_v2=p.xa)(e,t,r,n,a),i._sqlite3_step=e=>(i._sqlite3_step=p.ya)(e),i._sqlite3_column_int64=(e,t)=>(i._sqlite3_column_int64=p.za)(e,t),i._sqlite3_column_int=(e,t)=>(i._sqlite3_column_int=p.Aa)(e,t),i._sqlite3_finalize=e=>(i._sqlite3_finalize=p.Ba)(e),i._sqlite3_reset=e=>(i._sqlite3_reset=p.Ca)(e),i._sqlite3_clear_bindings=e=>(i._sqlite3_clear_bindings=p.Da)(e),i._sqlite3_value_blob=e=>(i._sqlite3_value_blob=p.Ea)(e),i._sqlite3_value_text=e=>(i._sqlite3_value_text=p.Fa)(e),i._sqlite3_value_bytes=e=>(i._sqlite3_value_bytes=p.Ga)(e),i._sqlite3_value_double=e=>(i._sqlite3_value_double=p.Ha)(e),i._sqlite3_value_int=e=>(i._sqlite3_value_int=p.Ia)(e),i._sqlite3_value_int64=e=>(i._sqlite3_value_int64=p.Ja)(e),i._sqlite3_value_type=e=>(i._sqlite3_value_type=p.Ka)(e),i._sqlite3_result_blob=(e,t,r,n)=>(i._sqlite3_result_blob=p.La)(e,t,r,n),i._sqlite3_result_double=(e,t)=>(i._sqlite3_result_double=p.Ma)(e,t),i._sqlite3_result_error=(e,t,r)=>(i._sqlite3_result_error=p.Na)(e,t,r),i._sqlite3_result_int=(e,t)=>(i._sqlite3_result_int=p.Oa)(e,t),i._sqlite3_result_int64=(e,t,r)=>(i._sqlite3_result_int64=p.Pa)(e,t,r),i._sqlite3_result_null=e=>(i._sqlite3_result_null=p.Qa)(e),i._sqlite3_result_text=(e,t,r,n)=>(i._sqlite3_result_text=p.Ra)(e,t,r,n),i._sqlite3_column_count=e=>(i._sqlite3_column_count=p.Sa)(e),i._sqlite3_data_count=e=>(i._sqlite3_data_count=p.Ta)(e),i._sqlite3_column_blob=(e,t)=>(i._sqlite3_column_blob=p.Ua)(e,t),i._sqlite3_column_bytes=(e,t)=>(i._sqlite3_column_bytes=p.Va)(e,t),i._sqlite3_column_double=(e,t)=>(i._sqlite3_column_double=p.Wa)(e,t),i._sqlite3_column_text=(e,t)=>(i._sqlite3_column_text=p.Xa)(e,t),i._sqlite3_column_type=(e,t)=>(i._sqlite3_column_type=p.Ya)(e,t),i._sqlite3_column_name=(e,t)=>(i._sqlite3_column_name=p.Za)(e,t),i._sqlite3_bind_blob=(e,t,r,n,a)=>(i._sqlite3_bind_blob=p._a)(e,t,r,n,a),i._sqlite3_bind_double=(e,t,r)=>(i._sqlite3_bind_double=p.$a)(e,t,r),i._sqlite3_bind_int=(e,t,r)=>(i._sqlite3_bind_int=p.ab)(e,t,r),i._sqlite3_bind_int64=(e,t,r,n)=>(i._sqlite3_bind_int64=p.bb)(e,t,r,n),i._sqlite3_bind_null=(e,t)=>(i._sqlite3_bind_null=p.cb)(e,t),i._sqlite3_bind_text=(e,t,r,n,a)=>(i._sqlite3_bind_text=p.db)(e,t,r,n,a),i._sqlite3_bind_parameter_count=e=>(i._sqlite3_bind_parameter_count=p.eb)(e),i._sqlite3_bind_parameter_name=(e,t)=>(i._sqlite3_bind_parameter_name=p.fb)(e,t),i._sqlite3_sql=e=>(i._sqlite3_sql=p.gb)(e),i._sqlite3_exec=(e,t,r,n,a)=>(i._sqlite3_exec=p.hb)(e,t,r,n,a),i._sqlite3_errmsg=e=>(i._sqlite3_errmsg=p.ib)(e),i._sqlite3_declare_vtab=(e,t)=>(i._sqlite3_declare_vtab=p.jb)(e,t),i._sqlite3_libversion=()=>(i._sqlite3_libversion=p.kb)(),i._sqlite3_libversion_number=()=>(i._sqlite3_libversion_number=p.lb)(),i._sqlite3_changes=e=>(i._sqlite3_changes=p.mb)(e),i._sqlite3_close=e=>(i._sqlite3_close=p.nb)(e),i._sqlite3_limit=(e,t,r)=>(i._sqlite3_limit=p.ob)(e,t,r),i._sqlite3_open_v2=(e,t,r,n)=>(i._sqlite3_open_v2=p.pb)(e,t,r,n),i._sqlite3_get_autocommit=e=>(i._sqlite3_get_autocommit=p.qb)(e);var yn=()=>(yn=p.rb)(),Ut=i._malloc=e=>(Ut=i._malloc=p.sb)(e),pn=i._free=e=>(pn=i._free=p.tb)(e);i._RegisterExtensionFunctions=e=>(i._RegisterExtensionFunctions=p.ub)(e),i._set_authorizer=e=>(i._set_authorizer=p.vb)(e),i._create_function=(e,t,r,n,a,c)=>(i._create_function=p.wb)(e,t,r,n,a,c),i._create_module=(e,t,r,n)=>(i._create_module=p.xb)(e,t,r,n),i._progress_handler=(e,t)=>(i._progress_handler=p.yb)(e,t),i._register_vfs=(e,t,r,n)=>(i._register_vfs=p.zb)(e,t,r,n),i._getSqliteFree=()=>(i._getSqliteFree=p.Ab)();var gn=i._main=(e,t)=>(gn=i._main=p.Bb)(e,t),vn=(e,t)=>(vn=p.Db)(e,t),En=()=>(En=p.Eb)(),xn=()=>(xn=p.Fb)(),kn=e=>(kn=p.Gb)(e),Lt=e=>(Lt=p.Hb)(e),Rn=e=>(Rn=p.Ib)(e),An=()=>(An=p.Jb)(),Sn=e=>(Sn=p.Kb)(e),qn=()=>(qn=p.Lb)();i.getTempRet0=En,i.ccall=be,i.cwrap=(e,t,r,n)=>{var a=!r||r.every(c=>c==="number"||c==="boolean");return t!=="string"&&a&&!n?i["_"+e]:function(){return be(e,t,r,arguments,n)}},i.setValue=le,i.getValue=B,i.UTF8ToString=(e,t)=>e?C(E,e,t):"",i.stringToUTF8=(e,t,r)=>Se(e,E,t,r),i.lengthBytesUTF8=Ae;var dt;He=function e(){dt||Cn(),dt||(He=e)};function Cn(){function e(){if(!dt&&(dt=!0,i.calledRun=!0,!ie)){if(i.noFSInit||vr||(vr=!0,gr(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?je("stdin",i.stdin):Dt("/dev/tty","/dev/stdin"),i.stdout?je("stdout",null,i.stdout):Dt("/dev/tty","/dev/stdout"),i.stderr?je("stderr",null,i.stderr):Dt("/dev/tty1","/dev/stderr"),ot("/dev/stdin",0),ot("/dev/stdout",1),ot("/dev/stderr",1)),or=!1,et(Wt),et(Wn),m(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Mn){var t=gn;try{var r=t(0,0);ce=r,ln(r)}catch(n){It(n)}}if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)t=i.postRun.shift(),jt.unshift(t);et(jt)}}if(!(0<ke)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)jn();et(Ht),0<ke||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();var Mn=!0;return i.noInitialRun&&(Mn=!1),Cn(),o.ready}})(),Mi=Ci,Di=Ue|Me|wt|qi|mt,j,ze,Qe,Ye,Ft,_t,zn,yt,Vn,On,Ni=(On=class{constructor(){N(this,Ye);N(this,_t);N(this,yt);N(this,j,Ue);Dn(this,"timeoutMillis",0);N(this,ze,new Map);N(this,Qe,Promise.resolve(0))}get state(){return d(this,j)}async lock(f){return Q(this,Ye,Ft).call(this,Q(this,_t,zn),f)}async unlock(f){return Q(this,Ye,Ft).call(this,Q(this,yt,Vn),f)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(f,o){return new Promise(async(i,m)=>{try{await navigator.locks.request(f,o,h=>{if(i(h),h)return new Promise(v=>d(this,ze).set(f,v))})}catch(h){m(h)}})}_releaseWebLock(f){d(this,ze).get(f)?.(),d(this,ze).delete(f)}async _pollWebLock(f){return(await navigator.locks.query()).held.find(({name:o})=>o===f)?.mode}_getTimeoutSignal(){if(this.timeoutMillis){let f=new AbortController;return setTimeout(()=>f.abort(),this.timeoutMillis),f.signal}}},j=new WeakMap,ze=new WeakMap,Qe=new WeakMap,Ye=new WeakSet,Ft=async function(f,o){let i=o&Di;try{let m=()=>f.call(this,i);return await I(this,Qe,d(this,Qe).then(m,m)),I(this,j,i),z}catch(m){return m.name==="AbortError"?Ai:(console.error(m),Si)}},_t=new WeakSet,zn=async function(f){if(f===d(this,j))return z;switch(d(this,j)){case Ue:switch(f){case Me:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}case Me:switch(f){case wt:return this._SHAREDtoRESERVED();case mt:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}case wt:switch(f){case mt:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}},yt=new WeakSet,Vn=async function(f){if(f===d(this,j))return z;switch(d(this,j)){case mt:switch(f){case Me:return this._EXCLUSIVEtoSHARED();case Ue:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}case wt:switch(f){case Me:return this._RESERVEDtoSHARED();case Ue:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}case Me:switch(f){case Ue:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}default:throw new Error(`unexpected transition ${d(this,j)} -> ${f}`)}},On),$i=class extends Ni{constructor(f){super(),this._lockName=f+"-outer",this._reservedName=f+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},Oi=5e3,Ii=0,Vt=new WeakMap;function de(...f){}var Ve,Fe,Ze,H,Ge,Be,De,pt,Fn,In,Pi=(In=class{constructor(f,o={durability:"default"}){N(this,pt);N(this,Ve,void 0);N(this,Fe,void 0);N(this,Ze,void 0);N(this,H,null);N(this,Ge,0);N(this,Be,Promise.resolve());N(this,De,Promise.resolve());I(this,Fe,Promise.resolve(f).then(i=>I(this,Ve,i))),I(this,Ze,o)}async close(){let f=d(this,Ve)??await d(this,Fe);await d(this,Be),await this.sync(),f.close()}async run(f,o){let i=d(this,Be).then(()=>Q(this,pt,Fn).call(this,f,o));return I(this,Be,i.catch(()=>{})),i}async sync(){await d(this,De),I(this,De,Promise.resolve())}},Ve=new WeakMap,Fe=new WeakMap,Ze=new WeakMap,H=new WeakMap,Ge=new WeakMap,Be=new WeakMap,De=new WeakMap,pt=new WeakSet,Fn=async function(f,o){let i=d(this,Ve)??await d(this,Fe);if(f==="readwrite"&&d(this,H)?.mode==="readonly")I(this,H,null);else if(performance.now()-d(this,Ge)>Oi){try{d(this,H)?.commit()}catch(m){if(m.name!=="InvalidStateError")throw m}await new Promise(m=>setTimeout(m)),I(this,H,null)}for(let m=0;m<2;++m){if(!d(this,H)){I(this,H,i.transaction(i.objectStoreNames,f,d(this,Ze)));let h=I(this,Ge,performance.now());I(this,De,d(this,De).then(()=>new Promise((v,R)=>{d(this,H).addEventListener("complete",q=>{v(),d(this,H)===q.target&&I(this,H,null),de(`transaction ${Vt.get(q.target)} complete`)}),d(this,H).addEventListener("abort",q=>{console.warn("tx abort",(performance.now()-h)/1e3);let U=q.target.error;R(U),d(this,H)===q.target&&I(this,H,null),de(`transaction ${Vt.get(q.target)} aborted`,U)})}))),Vt.set(d(this,H),Ii++)}try{let h=Object.fromEntries(Array.from(i.objectStoreNames,v=>[v,new Ui(d(this,H).objectStore(v))]));return await o(h)}catch(h){if(I(this,H,null),m)throw h}}},In);function ve(f){return new Promise((o,i)=>{f.addEventListener("success",()=>o(f.result)),f.addEventListener("error",()=>i(f.error))})}var F,Pn,Ui=(Pn=class{constructor(f){N(this,F,void 0);I(this,F,f)}get(f){de(`get ${d(this,F).name}`,f);let o=d(this,F).get(f);return ve(o)}getAll(f,o){de(`getAll ${d(this,F).name}`,f,o);let i=d(this,F).getAll(f,o);return ve(i)}getKey(f){de(`getKey ${d(this,F).name}`,f);let o=d(this,F).getKey(f);return ve(o)}getAllKeys(f,o){de(`getAllKeys ${d(this,F).name}`,f,o);let i=d(this,F).getAllKeys(f,o);return ve(i)}put(f,o){de(`put ${d(this,F).name}`,f,o);let i=d(this,F).put(f,o);return ve(i)}delete(f){de(`delete ${d(this,F).name}`,f);let o=d(this,F).delete(f);return ve(o)}clear(){de(`clear ${d(this,F).name}`);let f=d(this,F).clear();return ve(f)}index(f){return new Li(d(this,F).index(f))}},F=new WeakMap,Pn),Ne,Un,Li=(Un=class{constructor(f){N(this,Ne,void 0);I(this,Ne,f)}getAllKeys(f,o){de(`IDBIndex.getAllKeys ${d(this,Ne).objectStore.name}<${d(this,Ne).name}>`,f,o);let i=d(this,Ne).getAllKeys(f,o);return ve(i)}},Ne=new WeakMap,Un),zi=512,Nn=3e3,$n={durability:"default",purge:"deferred",purgeAtLeast:16};function re(...f){}var Ee,K,P,$e,Oe,we,Je,Bt,gt,Bn,vt,Tn,xe,Le,Et,Hn,Ln,Vi=(Ln=class extends di{constructor(o="wa-sqlite",i=$n){super();N(this,Je);N(this,gt);N(this,vt);N(this,xe);N(this,Et);N(this,Ee,void 0);N(this,K,new Map);N(this,P,void 0);N(this,$e,new Set);N(this,Oe,performance.now());N(this,we,new Set);this.name=o,I(this,Ee,Object.assign({},$n,i)),I(this,P,new Pi(Fi(o),{durability:d(this,Ee).durability}))}async close(){for(let o of d(this,K).keys())await this.xClose(o);await d(this,P)?.close(),I(this,P,null)}xOpen(o,i,m,h){return this.handleAsync(async()=>{o===null&&(o=`null_${i}`),re(`xOpen ${o} 0x${i.toString(16)} 0x${m.toString(16)}`);try{let v=new URL(o,"http://localhost/"),R={path:v.pathname,flags:m,block0:null,isMetadataChanged:!0,locks:new $i(v.pathname)};return d(this,K).set(i,R),await d(this,P).run("readwrite",async({blocks:q})=>{if(R.block0=await q.get(Q(this,xe,Le).call(this,R,0)),!R.block0)if(m&mi)R.block0={path:R.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},q.put(R.block0);else throw new Error(`file not found: ${R.path}`)}),h.setInt32(0,m&_i,!0),z}catch(v){return console.error(v),yi}})}xClose(o){return this.handleAsync(async()=>{try{let i=d(this,K).get(o);return i&&(re(`xClose ${i.path}`),d(this,K).delete(o),i.flags&pi&&d(this,P).run("readwrite",({blocks:m})=>{m.delete(IDBKeyRange.bound([i.path],[i.path,[]]))})),z}catch(i){return console.error(i),te}})}xRead(o,i,m){return this.handleAsync(async()=>{let h=d(this,K).get(o);re(`xRead ${h.path} ${i.byteLength} ${m}`);try{return await d(this,P).run("readonly",async({blocks:v})=>{let R=0;for(;R<i.byteLength;){let q=m+R,U=q<h.block0.data.byteLength?h.block0:await v.get(Q(this,xe,Le).call(this,h,-q));if(!U||U.data.byteLength-U.offset<=q)return i.fill(0,R),gi;let ne=i.subarray(R),L=q+U.offset,me=Math.min(Math.max(U.data.byteLength-L,0),ne.byteLength);ne.set(U.data.subarray(L,L+me)),R+=me}return z})}catch(v){return console.error(v),te}})}xWrite(o,i,m){let h=d(this,we).has(o);if(h||performance.now()-d(this,Oe)>Nn){let v=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&d(this,we).add(o),await new Promise(q=>setTimeout(q));let R=Q(this,Je,Bt).call(this,o,i,m);return I(this,Oe,performance.now()),R});return h&&d(this,we).delete(o),v}return Q(this,Je,Bt).call(this,o,i,m)}xTruncate(o,i){let m=d(this,K).get(o);re(`xTruncate ${m.path} ${i}`);try{Object.assign(m.block0,{fileSize:i,data:m.block0.data.slice(0,i)});let h=Object.assign({},m.block0);return d(this,P).run("readwrite",({blocks:v})=>{v.delete(Q(this,xe,Le).call(this,m,-1/0,-i)),v.put(h)}),z}catch(h){return console.error(h),te}}xSync(o,i){let m=d(this,we).has(o);if(m||d(this,Ee).durability!=="relaxed"||performance.now()-d(this,Oe)>Nn){let v=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&d(this,we).add(o);let R=await Q(this,gt,Bn).call(this,o,i);return I(this,Oe,performance.now()),R});return m&&d(this,we).delete(o),v}let h=d(this,K).get(o);return re(`xSync ${h.path} ${i}`),z}xFileSize(o,i){let m=d(this,K).get(o);return re(`xFileSize ${m.path}`),i.setBigInt64(0,BigInt(m.block0.fileSize),!0),z}xLock(o,i){return this.handleAsync(async()=>{let m=d(this,K).get(o);re(`xLock ${m.path} ${i}`);try{let h=await m.locks.lock(i);return h===z&&m.locks.state===Me&&(m.block0=await d(this,P).run("readonly",({blocks:v})=>v.get(Q(this,xe,Le).call(this,m,0)))),h}catch(h){return console.error(h),te}})}xUnlock(o,i){return this.handleAsync(async()=>{let m=d(this,K).get(o);re(`xUnlock ${m.path} ${i}`);try{return m.locks.unlock(i)}catch(h){return console.error(h),te}})}xCheckReservedLock(o,i){return this.handleAsync(async()=>{let m=d(this,K).get(o);re(`xCheckReservedLock ${m.path}`);let h=await m.locks.isSomewhereReserved();return i.setInt32(0,h?1:0,!0),z})}xSectorSize(o){return zi}xDeviceCharacteristics(o){return vi|Ei|xi|ki}xFileControl(o,i,m){let h=d(this,K).get(o);switch(re(`xFileControl ${h.path} ${i}`),i){case 11:return h.overwrite=!0,z;case 21:if(h.overwrite)try{return this.handleAsync(async()=>(await Q(this,Et,Hn).call(this,h),z))}catch(v){return console.error(v),te}if(h.isMetadataChanged)try{d(this,P).run("readwrite",async({blocks:v})=>{await v.put(h.block0)})}catch(v){return console.error(v),te}return z;case 22:return h.overwrite=!1,z;case 31:return this.handleAsync(async()=>{try{return h.block0.version--,h.changedPages=new Set,d(this,P).run("readwrite",async({blocks:v})=>{let R=await v.index("version").getAllKeys(IDBKeyRange.bound([h.path],[h.path,h.block0.version]));for(let q of R)v.delete(q)}),z}catch(v){return console.error(v),te}});case 32:try{let v=Object.assign({},h.block0);v.data=v.data.slice();let R=h.changedPages;return h.changedPages=null,h.isMetadataChanged=!1,d(this,P).run("readwrite",async({blocks:q})=>{q.put(v);let U=await q.get([h.path,"purge",0])??{path:h.path,offset:"purge",version:0,data:new Map,count:0};U.count+=R.size;for(let ne of R)U.data.set(ne,v.version);q.put(U),Q(this,vt,Tn).call(this,h.path,U.count)}),z}catch(v){return console.error(v),te}case 33:return this.handleAsync(async()=>{try{return h.changedPages=null,h.isMetadataChanged=!1,h.block0=await d(this,P).run("readonly",({blocks:v})=>v.get([h.path,0,h.block0.version+1])),z}catch(v){return console.error(v),te}});default:return Ri}}xAccess(o,i,m){return this.handleAsync(async()=>{try{let h=new URL(o,"file://localhost/").pathname;re(`xAccess ${h} ${i}`);let v=await d(this,P).run("readonly",({blocks:R})=>R.getKey(Q(this,xe,Le).call(this,{path:h},0)));return m.setInt32(0,v?1:0,!0),z}catch(h){return console.error(h),te}})}xDelete(o,i){return this.handleAsync(async()=>{let m=new URL(o,"file://localhost/").pathname;try{return d(this,P).run("readwrite",({blocks:h})=>h.delete(IDBKeyRange.bound([m],[m,[]]))),i&&await d(this,P).sync(),z}catch(h){return console.error(h),te}})}async purge(o){let i=Date.now();await d(this,P).run("readwrite",async({blocks:m})=>{let h=await m.get([o,"purge",0]);if(h){for(let[v,R]of h.data)m.delete(IDBKeyRange.bound([o,v,R],[o,v,1/0],!0,!1));await m.delete([o,"purge",0])}re(`purge ${o} ${h?.data.size??0} pages in ${Date.now()-i} ms`)})}},Ee=new WeakMap,K=new WeakMap,P=new WeakMap,$e=new WeakMap,Oe=new WeakMap,we=new WeakMap,Je=new WeakSet,Bt=function(o,i,m){let h=d(this,K).get(o);re(`xWrite ${h.path} ${i.byteLength} ${m}`);try{let v=h.block0.fileSize;h.block0.fileSize<m+i.byteLength&&(h.block0.fileSize=m+i.byteLength,h.isMetadataChanged=!0);let R=m===0?h.block0:{path:h.path,offset:-m,version:h.block0.version,data:null};return R.data=i.slice(),h.changedPages?(v===h.block0.fileSize&&h.changedPages.add(-m),m!==0&&d(this,P).run("readwrite",({blocks:q})=>q.put(R))):d(this,P).run("readwrite",({blocks:q})=>q.put(R)),h.isMetadataChanged=m===0?!1:h.isMetadataChanged,z}catch(v){return console.error(v),te}},gt=new WeakSet,Bn=async function(o,i){let m=d(this,K).get(o);re(`xSync ${m.path} ${i}`);try{await d(this,P).sync()}catch(h){return console.error(h),te}return z},vt=new WeakSet,Tn=function(o,i){d(this,Ee).purge==="manual"||d(this,$e).has(o)||i<d(this,Ee).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(o),d(this,$e).delete(o)}):setTimeout(()=>{this.purge(o),d(this,$e).delete(o)}),d(this,$e).add(o))},xe=new WeakSet,Le=function(o,i,m=0){let h=!i||-i<o.block0.data.length?-1/0:o.block0.version;return IDBKeyRange.bound([o.path,i,h],[o.path,m,1/0])},Et=new WeakSet,Hn=async function(o){let i=o.block0.data.length;if(i<18)return;let m=new DataView(o.block0.data.buffer,o.block0.data.byteOffset),h=m.getUint16(16);if(h===1&&(h=65536),h===i)return;let v=Math.max(i,h),R=v/i,q=v/h,U=m.getUint32(28)*h,ne=o.block0.version;await d(this,P).run("readwrite",async({blocks:L})=>{let me=await L.index("version").getAllKeys(IDBKeyRange.bound([o.path,ne+1],[o.path,1/0]));for(let se of me)L.delete(se);L.delete([o.path,"purge",0]);for(let se=0;se<U;se+=v){let ue=await L.getAll(IDBKeyRange.lowerBound([o.path,-(se+v),1/0]),R);for(let Y of ue)L.delete([Y.path,Y.offset,Y.version]);if(q===1){let Y=new Uint8Array(h);for(let ie of ue)Y.set(ie.data,-(se+ie.offset));let Z={path:o.path,offset:-se,version:ne,data:Y};Z.offset===0&&(Z.fileSize=U,o.block0=Z),L.put(Z)}else{let Y=ue[0];for(let Z=0;Z<q;++Z){let ie=-(se+Z*h);if(-ie>=U)break;let ce={path:Y.path,offset:ie,version:ne,data:Y.data.subarray(Z*h,(Z+1)*h)};ce.offset===0&&(ce.fileSize=U,o.block0=ce),L.put(ce)}}}})},Ln);function Fi(f){return new Promise((o,i)=>{let m=globalThis.indexedDB.open(f,5);m.addEventListener("upgradeneeded",function(){m.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),m.addEventListener("success",()=>{o(m.result)}),m.addEventListener("error",()=>{i(m.error)})})}async function Wi(f,o={}){let{url:i,durability:m="relaxed",...h}=o,v=await Mi(i?{locateFile:()=>i}:void 0),R=wi(v);return R.vfs_register(new Vi(f,{durability:m,...h})),{fileName:f,sqlite:R}}export{Wi as useIdbStorage};
