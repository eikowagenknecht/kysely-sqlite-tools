var Wm=Object.defineProperty;var Rm=(t,e,r)=>e in t?Wm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>(Rm(t,typeof e!="symbol"?e+"":e,r),r),_l=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(_l(t,e,"read from private field"),r?r.call(t):e.get(t)),P=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},$=(t,e,r,i)=>(_l(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var _e=(t,e,r)=>(_l(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function bf(t,e){const r=Object.create(null),i=t.split(",");for(let a=0;a<i.length;a++)r[i[a]]=!0;return e?a=>!!r[a.toLowerCase()]:a=>!!r[a]}const at={},Fs=[],Hr=()=>{},Dm=()=>!1,Pm=/^on[^a-z]/,nl=t=>Pm.test(t),Nf=t=>t.startsWith("onUpdate:"),Qt=Object.assign,vf=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Lm=Object.prototype.hasOwnProperty,Be=(t,e)=>Lm.call(t,e),Ce=Array.isArray,Us=t=>sl(t)==="[object Map]",Od=t=>sl(t)==="[object Set]",Te=t=>typeof t=="function",Dt=t=>typeof t=="string",il=t=>typeof t=="symbol",yt=t=>t!==null&&typeof t=="object",qd=t=>(yt(t)||Te(t))&&Te(t.then)&&Te(t.catch),Ed=Object.prototype.toString,sl=t=>Ed.call(t),Mm=t=>sl(t).slice(8,-1),Cd=t=>sl(t)==="[object Object]",_f=t=>Dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pu=bf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ol=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Bm=/-(\w)/g,mo=ol(t=>t.replace(Bm,(e,r)=>r?r.toUpperCase():"")),Fm=/\B([A-Z])/g,xo=ol(t=>t.replace(Fm,"-$1").toLowerCase()),Id=ol(t=>t.charAt(0).toUpperCase()+t.slice(1)),xl=ol(t=>t?`on${Id(t)}`:""),ds=(t,e)=>!Object.is(t,e),Ol=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Ju=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Um=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let oh;const Dl=()=>oh||(oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xf(t){if(Ce(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],a=Dt(i)?Vm(i):xf(i);if(a)for(const l in a)e[l]=a[l]}return e}else if(Dt(t)||yt(t))return t}const $m=/;(?![^(]*\))/g,Qm=/:([^]+)/,jm=/\/\*[^]*?\*\//g;function Vm(t){const e={};return t.replace(jm,"").split($m).forEach(r=>{if(r){const i=r.split(Qm);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Of(t){let e="";if(Dt(t))e=t;else if(Ce(t))for(let r=0;r<t.length;r++){const i=Of(t[r]);i&&(e+=i+" ")}else if(yt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const zm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Km=bf(zm);function Sd(t){return!!t||t===""}const Jm=t=>Dt(t)?t:t==null?"":Ce(t)||yt(t)&&(t.toString===Ed||!Te(t.toString))?JSON.stringify(t,Td,2):String(t),Td=(t,e)=>e&&e.__v_isRef?Td(t,e.value):Us(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,a])=>(r[`${i} =>`]=a,r),{})}:Od(e)?{[`Set(${e.size})`]:[...e.values()]}:yt(e)&&!Ce(e)&&!Cd(e)?String(e):e;let Br;class Hm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Br,!e&&Br&&(this.index=(Br.scopes||(Br.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=Br;try{return Br=this,e()}finally{Br=r}}}on(){Br=this}off(){Br=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function Gm(t,e=Br){e&&e.active&&e.effects.push(t)}function Ym(){return Br}const qf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},kd=t=>(t.w&mi)>0,Ad=t=>(t.n&mi)>0,Xm=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=mi},Zm=t=>{const{deps:e}=t;if(e.length){let r=0;for(let i=0;i<e.length;i++){const a=e[i];kd(a)&&!Ad(a)?a.delete(t):e[r++]=a,a.w&=~mi,a.n&=~mi}e.length=r}},Pl=new WeakMap;let sa=0,mi=1;const Ll=30;let zr;const us=Symbol(""),Ml=Symbol("");class Ef{constructor(e,r=null,i){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Gm(this,i)}run(){if(!this.active)return this.fn();let e=zr,r=hi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=zr,zr=this,hi=!0,mi=1<<++sa,sa<=Ll?Xm(this):ah(this),this.fn()}finally{sa<=Ll&&Zm(this),mi=1<<--sa,zr=this.parent,hi=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zr===this?this.deferStop=!0:this.active&&(ah(this),this.onStop&&this.onStop(),this.active=!1)}}function ah(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let hi=!0;const Wd=[];function Oo(){Wd.push(hi),hi=!1}function qo(){const t=Wd.pop();hi=t===void 0?!0:t}function yr(t,e,r){if(hi&&zr){let i=Pl.get(t);i||Pl.set(t,i=new Map);let a=i.get(r);a||i.set(r,a=qf()),Rd(a)}}function Rd(t,e){let r=!1;sa<=Ll?Ad(t)||(t.n|=mi,r=!kd(t)):r=!t.has(zr),r&&(t.add(zr),zr.deps.push(t))}function kn(t,e,r,i,a,l){const y=Pl.get(t);if(!y)return;let g=[];if(e==="clear")g=[...y.values()];else if(r==="length"&&Ce(t)){const O=Number(i);y.forEach((d,T)=>{(T==="length"||!il(T)&&T>=O)&&g.push(d)})}else switch(r!==void 0&&g.push(y.get(r)),e){case"add":Ce(t)?_f(r)&&g.push(y.get("length")):(g.push(y.get(us)),Us(t)&&g.push(y.get(Ml)));break;case"delete":Ce(t)||(g.push(y.get(us)),Us(t)&&g.push(y.get(Ml)));break;case"set":Us(t)&&g.push(y.get(us));break}if(g.length===1)g[0]&&Bl(g[0]);else{const O=[];for(const d of g)d&&O.push(...d);Bl(qf(O))}}function Bl(t,e){const r=Ce(t)?t:[...t];for(const i of r)i.computed&&uh(i);for(const i of r)i.computed||uh(i)}function uh(t,e){(t!==zr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ey=bf("__proto__,__v_isRef,__isVue"),Dd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(il)),ch=ty();function ty(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=$e(this);for(let l=0,y=this.length;l<y;l++)yr(i,"get",l+"");const a=i[e](...r);return a===-1||a===!1?i[e](...r.map($e)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Oo();const i=$e(this)[e].apply(this,r);return qo(),i}}),t}function ry(t){const e=$e(this);return yr(e,"has",t),e.hasOwnProperty(t)}class Pd{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,i){const a=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw"&&i===(a?l?my:Fd:l?Bd:Md).get(e))return e;const y=Ce(e);if(!a){if(y&&Be(ch,r))return Reflect.get(ch,r,i);if(r==="hasOwnProperty")return ry}const g=Reflect.get(e,r,i);return(il(r)?Dd.has(r):ey(r))||(a||yr(e,"get",r),l)?g:Gt(g)?y&&_f(r)?g:g.value:yt(g)?a?Ud(g):Sf(g):g}}class Ld extends Pd{constructor(e=!1){super(!1,e)}set(e,r,i,a){let l=e[r];if(yo(l)&&Gt(l)&&!Gt(i))return!1;if(!this._shallow&&(!Hu(i)&&!yo(i)&&(l=$e(l),i=$e(i)),!Ce(e)&&Gt(l)&&!Gt(i)))return l.value=i,!0;const y=Ce(e)&&_f(r)?Number(r)<e.length:Be(e,r),g=Reflect.set(e,r,i,a);return e===$e(a)&&(y?ds(i,l)&&kn(e,"set",r,i):kn(e,"add",r,i)),g}deleteProperty(e,r){const i=Be(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&i&&kn(e,"delete",r,void 0),a}has(e,r){const i=Reflect.has(e,r);return(!il(r)||!Dd.has(r))&&yr(e,"has",r),i}ownKeys(e){return yr(e,"iterate",Ce(e)?"length":us),Reflect.ownKeys(e)}}class ny extends Pd{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const iy=new Ld,sy=new ny,oy=new Ld(!0),Cf=t=>t,al=t=>Reflect.getPrototypeOf(t);function Eu(t,e,r=!1,i=!1){t=t.__v_raw;const a=$e(t),l=$e(e);r||(ds(e,l)&&yr(a,"get",e),yr(a,"get",l));const{has:y}=al(a),g=i?Cf:r?kf:Na;if(y.call(a,e))return g(t.get(e));if(y.call(a,l))return g(t.get(l));t!==a&&t.get(e)}function Cu(t,e=!1){const r=this.__v_raw,i=$e(r),a=$e(t);return e||(ds(t,a)&&yr(i,"has",t),yr(i,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Iu(t,e=!1){return t=t.__v_raw,!e&&yr($e(t),"iterate",us),Reflect.get(t,"size",t)}function lh(t){t=$e(t);const e=$e(this);return al(e).has.call(e,t)||(e.add(t),kn(e,"add",t,t)),this}function fh(t,e){e=$e(e);const r=$e(this),{has:i,get:a}=al(r);let l=i.call(r,t);l||(t=$e(t),l=i.call(r,t));const y=a.call(r,t);return r.set(t,e),l?ds(e,y)&&kn(r,"set",t,e):kn(r,"add",t,e),this}function hh(t){const e=$e(this),{has:r,get:i}=al(e);let a=r.call(e,t);a||(t=$e(t),a=r.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return a&&kn(e,"delete",t,void 0),l}function dh(){const t=$e(this),e=t.size!==0,r=t.clear();return e&&kn(t,"clear",void 0,void 0),r}function Su(t,e){return function(i,a){const l=this,y=l.__v_raw,g=$e(y),O=e?Cf:t?kf:Na;return!t&&yr(g,"iterate",us),y.forEach((d,T)=>i.call(a,O(d),O(T),l))}}function Tu(t,e,r){return function(...i){const a=this.__v_raw,l=$e(a),y=Us(l),g=t==="entries"||t===Symbol.iterator&&y,O=t==="keys"&&y,d=a[t](...i),T=r?Cf:e?kf:Na;return!e&&yr(l,"iterate",O?Ml:us),{next(){const{value:D,done:ee}=d.next();return ee?{value:D,done:ee}:{value:g?[T(D[0]),T(D[1])]:T(D),done:ee}},[Symbol.iterator](){return this}}}}function Jn(t){return function(...e){return t==="delete"?!1:this}}function ay(){const t={get(l){return Eu(this,l)},get size(){return Iu(this)},has:Cu,add:lh,set:fh,delete:hh,clear:dh,forEach:Su(!1,!1)},e={get(l){return Eu(this,l,!1,!0)},get size(){return Iu(this)},has:Cu,add:lh,set:fh,delete:hh,clear:dh,forEach:Su(!1,!0)},r={get(l){return Eu(this,l,!0)},get size(){return Iu(this,!0)},has(l){return Cu.call(this,l,!0)},add:Jn("add"),set:Jn("set"),delete:Jn("delete"),clear:Jn("clear"),forEach:Su(!0,!1)},i={get(l){return Eu(this,l,!0,!0)},get size(){return Iu(this,!0)},has(l){return Cu.call(this,l,!0)},add:Jn("add"),set:Jn("set"),delete:Jn("delete"),clear:Jn("clear"),forEach:Su(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Tu(l,!1,!1),r[l]=Tu(l,!0,!1),e[l]=Tu(l,!1,!0),i[l]=Tu(l,!0,!0)}),[t,r,e,i]}const[uy,cy,ly,fy]=ay();function If(t,e){const r=e?t?fy:ly:t?cy:uy;return(i,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?i:Reflect.get(Be(r,a)&&a in i?r:i,a,l)}const hy={get:If(!1,!1)},dy={get:If(!1,!0)},py={get:If(!0,!1)},Md=new WeakMap,Bd=new WeakMap,Fd=new WeakMap,my=new WeakMap;function yy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wy(t){return t.__v_skip||!Object.isExtensible(t)?0:yy(Mm(t))}function Sf(t){return yo(t)?t:Tf(t,!1,iy,hy,Md)}function gy(t){return Tf(t,!1,oy,dy,Bd)}function Ud(t){return Tf(t,!0,sy,py,Fd)}function Tf(t,e,r,i,a){if(!yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const y=wy(t);if(y===0)return t;const g=new Proxy(t,y===2?i:r);return a.set(t,g),g}function $s(t){return yo(t)?$s(t.__v_raw):!!(t&&t.__v_isReactive)}function yo(t){return!!(t&&t.__v_isReadonly)}function Hu(t){return!!(t&&t.__v_isShallow)}function $d(t){return $s(t)||yo(t)}function $e(t){const e=t&&t.__v_raw;return e?$e(e):t}function Qd(t){return Ju(t,"__v_skip",!0),t}const Na=t=>yt(t)?Sf(t):t,kf=t=>yt(t)?Ud(t):t;function jd(t){hi&&zr&&(t=$e(t),Rd(t.dep||(t.dep=qf())))}function Vd(t,e){t=$e(t);const r=t.dep;r&&Bl(r)}function Gt(t){return!!(t&&t.__v_isRef===!0)}function by(t){return Ny(t,!1)}function Ny(t,e){return Gt(t)?t:new vy(t,e)}class vy{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:$e(e),this._value=r?e:Na(e)}get value(){return jd(this),this._value}set value(e){const r=this.__v_isShallow||Hu(e)||yo(e);e=r?e:$e(e),ds(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Na(e),Vd(this))}}function zd(t){return Gt(t)?t.value:t}const _y={get:(t,e,r)=>zd(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const a=t[e];return Gt(a)&&!Gt(r)?(a.value=r,!0):Reflect.set(t,e,r,i)}};function Kd(t){return $s(t)?t:new Proxy(t,_y)}class xy{constructor(e,r,i,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ef(e,()=>{this._dirty||(this._dirty=!0,Vd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=i}get value(){const e=$e(this);return jd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Oy(t,e,r=!1){let i,a;const l=Te(t);return l?(i=t,a=Hr):(i=t.get,a=t.set),new xy(i,a,l||!a,r)}function di(t,e,r,i){let a;try{a=i?t(...i):t()}catch(l){ul(l,e,r)}return a}function Gr(t,e,r,i){if(Te(t)){const l=di(t,e,r,i);return l&&qd(l)&&l.catch(y=>{ul(y,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(Gr(t[l],e,r,i));return a}function ul(t,e,r,i=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const y=e.proxy,g=r;for(;l;){const d=l.ec;if(d){for(let T=0;T<d.length;T++)if(d[T](t,y,g)===!1)return}l=l.parent}const O=e.appContext.config.errorHandler;if(O){di(O,null,10,[t,y,g]);return}}qy(t,r,a,i)}function qy(t,e,r,i=!0){console.error(t)}let va=!1,Fl=!1;const Jt=[];let dn=0;const Qs=[];let xn=null,Fi=0;const Jd=Promise.resolve();let Af=null;function Ey(t){const e=Af||Jd;return t?e.then(this?t.bind(this):t):e}function Cy(t){let e=dn+1,r=Jt.length;for(;e<r;){const i=e+r>>>1,a=Jt[i],l=_a(a);l<t||l===t&&a.pre?e=i+1:r=i}return e}function Wf(t){(!Jt.length||!Jt.includes(t,va&&t.allowRecurse?dn+1:dn))&&(t.id==null?Jt.push(t):Jt.splice(Cy(t.id),0,t),Hd())}function Hd(){!va&&!Fl&&(Fl=!0,Af=Jd.then(Yd))}function Iy(t){const e=Jt.indexOf(t);e>dn&&Jt.splice(e,1)}function Sy(t){Ce(t)?Qs.push(...t):(!xn||!xn.includes(t,t.allowRecurse?Fi+1:Fi))&&Qs.push(t),Hd()}function ph(t,e=va?dn+1:0){for(;e<Jt.length;e++){const r=Jt[e];r&&r.pre&&(Jt.splice(e,1),e--,r())}}function Gd(t){if(Qs.length){const e=[...new Set(Qs)];if(Qs.length=0,xn){xn.push(...e);return}for(xn=e,xn.sort((r,i)=>_a(r)-_a(i)),Fi=0;Fi<xn.length;Fi++)xn[Fi]();xn=null,Fi=0}}const _a=t=>t.id==null?1/0:t.id,Ty=(t,e)=>{const r=_a(t)-_a(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Yd(t){Fl=!1,va=!0,Jt.sort(Ty);const e=Hr;try{for(dn=0;dn<Jt.length;dn++){const r=Jt[dn];r&&r.active!==!1&&di(r,null,14)}}finally{dn=0,Jt.length=0,Gd(),va=!1,Af=null,(Jt.length||Qs.length)&&Yd()}}function ky(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||at;let a=r;const l=e.startsWith("update:"),y=l&&e.slice(7);if(y&&y in i){const T=`${y==="modelValue"?"model":y}Modifiers`,{number:D,trim:ee}=i[T]||at;ee&&(a=r.map(G=>Dt(G)?G.trim():G)),D&&(a=r.map(Um))}let g,O=i[g=xl(e)]||i[g=xl(mo(e))];!O&&l&&(O=i[g=xl(xo(e))]),O&&Gr(O,t,6,a);const d=i[g+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[g])return;t.emitted[g]=!0,Gr(d,t,6,a)}}function Xd(t,e,r=!1){const i=e.emitsCache,a=i.get(t);if(a!==void 0)return a;const l=t.emits;let y={},g=!1;if(!Te(t)){const O=d=>{const T=Xd(d,e,!0);T&&(g=!0,Qt(y,T))};!r&&e.mixins.length&&e.mixins.forEach(O),t.extends&&O(t.extends),t.mixins&&t.mixins.forEach(O)}return!l&&!g?(yt(t)&&i.set(t,null),null):(Ce(l)?l.forEach(O=>y[O]=null):Qt(y,l),yt(t)&&i.set(t,y),y)}function cl(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(t,e[0].toLowerCase()+e.slice(1))||Be(t,xo(e))||Be(t,e))}let mn=null,Zd=null;function Gu(t){const e=mn;return mn=t,Zd=t&&t.type.__scopeId||null,e}function Ay(t,e=mn,r){if(!e||t._n)return t;const i=(...a)=>{i._d&&Oh(-1);const l=Gu(e);let y;try{y=t(...a)}finally{Gu(l),i._d&&Oh(1)}return y};return i._n=!0,i._c=!0,i._d=!0,i}function ql(t){const{type:e,vnode:r,proxy:i,withProxy:a,props:l,propsOptions:[y],slots:g,attrs:O,emit:d,render:T,renderCache:D,data:ee,setupState:G,ctx:le,inheritAttrs:b}=t;let _,v;const C=Gu(t);try{if(r.shapeFlag&4){const X=a||i;_=fn(T.call(X,X,D,l,G,ee,le)),v=O}else{const X=e;_=fn(X.length>1?X(l,{attrs:O,slots:g,emit:d}):X(l,null)),v=e.props?O:Wy(O)}}catch(X){ca.length=0,ul(X,t,1),_=cs(xa)}let S=_;if(v&&b!==!1){const X=Object.keys(v),{shapeFlag:re}=S;X.length&&re&7&&(y&&X.some(Nf)&&(v=Ry(v,y)),S=wo(S,v))}return r.dirs&&(S=wo(S),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&(S.transition=r.transition),_=S,Gu(C),_}const Wy=t=>{let e;for(const r in t)(r==="class"||r==="style"||nl(r))&&((e||(e={}))[r]=t[r]);return e},Ry=(t,e)=>{const r={};for(const i in t)(!Nf(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function Dy(t,e,r){const{props:i,children:a,component:l}=t,{props:y,children:g,patchFlag:O}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&O>=0){if(O&1024)return!0;if(O&16)return i?mh(i,y,d):!!y;if(O&8){const T=e.dynamicProps;for(let D=0;D<T.length;D++){const ee=T[D];if(y[ee]!==i[ee]&&!cl(d,ee))return!0}}}else return(a||g)&&(!g||!g.$stable)?!0:i===y?!1:i?y?mh(i,y,d):!0:!!y;return!1}function mh(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let a=0;a<i.length;a++){const l=i[a];if(e[l]!==t[l]&&!cl(r,l))return!0}return!1}function Py({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const Ly=t=>t.__isSuspense;function My(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Sy(t)}const ku={};function El(t,e,r){return ep(t,e,r)}function ep(t,e,{immediate:r,deep:i,flush:a,onTrack:l,onTrigger:y}=at){var g;const O=Ym()===((g=Ht)==null?void 0:g.scope)?Ht:null;let d,T=!1,D=!1;if(Gt(t)?(d=()=>t.value,T=Hu(t)):$s(t)?(d=()=>t,i=!0):Ce(t)?(D=!0,T=t.some(X=>$s(X)||Hu(X)),d=()=>t.map(X=>{if(Gt(X))return X.value;if($s(X))return Ws(X);if(Te(X))return di(X,O,2)})):Te(t)?e?d=()=>di(t,O,2):d=()=>{if(!(O&&O.isUnmounted))return ee&&ee(),Gr(t,O,3,[G])}:d=Hr,e&&i){const X=d;d=()=>Ws(X())}let ee,G=X=>{ee=C.onStop=()=>{di(X,O,4)}},le;if(Ea)if(G=Hr,e?r&&Gr(e,O,3,[d(),D?[]:void 0,G]):d(),a==="sync"){const X=Lw();le=X.__watcherHandles||(X.__watcherHandles=[])}else return Hr;let b=D?new Array(t.length).fill(ku):ku;const _=()=>{if(C.active)if(e){const X=C.run();(i||T||(D?X.some((re,he)=>ds(re,b[he])):ds(X,b)))&&(ee&&ee(),Gr(e,O,3,[X,b===ku?void 0:D&&b[0]===ku?[]:b,G]),b=X)}else C.run()};_.allowRecurse=!!e;let v;a==="sync"?v=_:a==="post"?v=()=>fr(_,O&&O.suspense):(_.pre=!0,O&&(_.id=O.uid),v=()=>Wf(_));const C=new Ef(d,v);e?r?_():b=C.run():a==="post"?fr(C.run.bind(C),O&&O.suspense):C.run();const S=()=>{C.stop(),O&&O.scope&&vf(O.scope.effects,C)};return le&&le.push(S),S}function By(t,e,r){const i=this.proxy,a=Dt(t)?t.includes(".")?tp(i,t):()=>i[t]:t.bind(i,i);let l;Te(e)?l=e:(l=e.handler,r=e);const y=Ht;go(this);const g=ep(a,l.bind(i),r);return y?go(y):ls(),g}function tp(t,e){const r=e.split(".");return()=>{let i=t;for(let a=0;a<r.length&&i;a++)i=i[r[a]];return i}}function Ws(t,e){if(!yt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Gt(t))Ws(t.value,e);else if(Ce(t))for(let r=0;r<t.length;r++)Ws(t[r],e);else if(Od(t)||Us(t))t.forEach(r=>{Ws(r,e)});else if(Cd(t))for(const r in t)Ws(t[r],e);return t}function Li(t,e,r,i){const a=t.dirs,l=e&&e.dirs;for(let y=0;y<a.length;y++){const g=a[y];l&&(g.oldValue=l[y].value);let O=g.dir[i];O&&(Oo(),Gr(O,r,8,[t.el,g,t,e]),qo())}}/*! #__NO_SIDE_EFFECTS__ */function Fy(t,e){return Te(t)?(()=>Qt({name:t.name},e,{setup:t}))():t}const Lu=t=>!!t.type.__asyncLoader,rp=t=>t.type.__isKeepAlive;function Uy(t,e){np(t,"a",e)}function $y(t,e){np(t,"da",e)}function np(t,e,r=Ht){const i=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(ll(e,i,r),r){let a=r.parent;for(;a&&a.parent;)rp(a.parent.vnode)&&Qy(i,e,r,a),a=a.parent}}function Qy(t,e,r,i){const a=ll(e,t,i,!0);ip(()=>{vf(i[e],a)},r)}function ll(t,e,r=Ht,i=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...y)=>{if(r.isUnmounted)return;Oo(),go(r);const g=Gr(e,r,t,y);return ls(),qo(),g});return i?a.unshift(l):a.push(l),l}}const Rn=t=>(e,r=Ht)=>(!Ea||t==="sp")&&ll(t,(...i)=>e(...i),r),jy=Rn("bm"),Vy=Rn("m"),zy=Rn("bu"),Ky=Rn("u"),Jy=Rn("bum"),ip=Rn("um"),Hy=Rn("sp"),Gy=Rn("rtg"),Yy=Rn("rtc");function Xy(t,e=Ht){ll("ec",t,e)}const Zy=Symbol.for("v-ndc"),Ul=t=>t?pp(t)?Mf(t)||t.proxy:Ul(t.parent):null,ua=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ul(t.parent),$root:t=>Ul(t.root),$emit:t=>t.emit,$options:t=>Rf(t),$forceUpdate:t=>t.f||(t.f=()=>Wf(t.update)),$nextTick:t=>t.n||(t.n=Ey.bind(t.proxy)),$watch:t=>By.bind(t)}),Cl=(t,e)=>t!==at&&!t.__isScriptSetup&&Be(t,e),ew={get({_:t},e){const{ctx:r,setupState:i,data:a,props:l,accessCache:y,type:g,appContext:O}=t;let d;if(e[0]!=="$"){const G=y[e];if(G!==void 0)switch(G){case 1:return i[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(Cl(i,e))return y[e]=1,i[e];if(a!==at&&Be(a,e))return y[e]=2,a[e];if((d=t.propsOptions[0])&&Be(d,e))return y[e]=3,l[e];if(r!==at&&Be(r,e))return y[e]=4,r[e];$l&&(y[e]=0)}}const T=ua[e];let D,ee;if(T)return e==="$attrs"&&yr(t,"get",e),T(t);if((D=g.__cssModules)&&(D=D[e]))return D;if(r!==at&&Be(r,e))return y[e]=4,r[e];if(ee=O.config.globalProperties,Be(ee,e))return ee[e]},set({_:t},e,r){const{data:i,setupState:a,ctx:l}=t;return Cl(a,e)?(a[e]=r,!0):i!==at&&Be(i,e)?(i[e]=r,!0):Be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:a,propsOptions:l}},y){let g;return!!r[y]||t!==at&&Be(t,y)||Cl(e,y)||(g=l[0])&&Be(g,y)||Be(i,y)||Be(ua,y)||Be(a.config.globalProperties,y)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Be(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function yh(t){return Ce(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let $l=!0;function tw(t){const e=Rf(t),r=t.proxy,i=t.ctx;$l=!1,e.beforeCreate&&wh(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:y,watch:g,provide:O,inject:d,created:T,beforeMount:D,mounted:ee,beforeUpdate:G,updated:le,activated:b,deactivated:_,beforeDestroy:v,beforeUnmount:C,destroyed:S,unmounted:X,render:re,renderTracked:he,renderTriggered:nt,errorCaptured:It,serverPrefetch:nr,expose:wr,inheritAttrs:Ar,components:Er,directives:et,filters:gr}=e;if(d&&rw(d,i,null),y)for(const me in y){const Ie=y[me];Te(Ie)&&(i[me]=Ie.bind(r))}if(a){const me=a.call(r,r);yt(me)&&(t.data=Sf(me))}if($l=!0,l)for(const me in l){const Ie=l[me],_t=Te(Ie)?Ie.bind(r,r):Te(Ie.get)?Ie.get.bind(r,r):Hr,we=!Te(Ie)&&Te(Ie.set)?Ie.set.bind(r):Hr,Fe=Dw({get:_t,set:we});Object.defineProperty(i,me,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:jt=>Fe.value=jt})}if(g)for(const me in g)sp(g[me],i,r,me);if(O){const me=Te(O)?O.call(r):O;Reflect.ownKeys(me).forEach(Ie=>{uw(Ie,me[Ie])})}T&&wh(T,t,"c");function it(me,Ie){Ce(Ie)?Ie.forEach(_t=>me(_t.bind(r))):Ie&&me(Ie.bind(r))}if(it(jy,D),it(Vy,ee),it(zy,G),it(Ky,le),it(Uy,b),it($y,_),it(Xy,It),it(Yy,he),it(Gy,nt),it(Jy,C),it(ip,X),it(Hy,nr),Ce(wr))if(wr.length){const me=t.exposed||(t.exposed={});wr.forEach(Ie=>{Object.defineProperty(me,Ie,{get:()=>r[Ie],set:_t=>r[Ie]=_t})})}else t.exposed||(t.exposed={});re&&t.render===Hr&&(t.render=re),Ar!=null&&(t.inheritAttrs=Ar),Er&&(t.components=Er),et&&(t.directives=et)}function rw(t,e,r=Hr){Ce(t)&&(t=Ql(t));for(const i in t){const a=t[i];let l;yt(a)?"default"in a?l=Mu(a.from||i,a.default,!0):l=Mu(a.from||i):l=Mu(a),Gt(l)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:y=>l.value=y}):e[i]=l}}function wh(t,e,r){Gr(Ce(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function sp(t,e,r,i){const a=i.includes(".")?tp(r,i):()=>r[i];if(Dt(t)){const l=e[t];Te(l)&&El(a,l)}else if(Te(t))El(a,t.bind(r));else if(yt(t))if(Ce(t))t.forEach(l=>sp(l,e,r,i));else{const l=Te(t.handler)?t.handler.bind(r):e[t.handler];Te(l)&&El(a,l,t)}}function Rf(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:y}}=t.appContext,g=l.get(e);let O;return g?O=g:!a.length&&!r&&!i?O=e:(O={},a.length&&a.forEach(d=>Yu(O,d,y,!0)),Yu(O,e,y)),yt(e)&&l.set(e,O),O}function Yu(t,e,r,i=!1){const{mixins:a,extends:l}=e;l&&Yu(t,l,r,!0),a&&a.forEach(y=>Yu(t,y,r,!0));for(const y in e)if(!(i&&y==="expose")){const g=nw[y]||r&&r[y];t[y]=g?g(t[y],e[y]):e[y]}return t}const nw={data:gh,props:bh,emits:bh,methods:oa,computed:oa,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:oa,directives:oa,watch:sw,provide:gh,inject:iw};function gh(t,e){return e?t?function(){return Qt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function iw(t,e){return oa(Ql(t),Ql(e))}function Ql(t){if(Ce(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function oa(t,e){return t?Qt(Object.create(null),t,e):e}function bh(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:Qt(Object.create(null),yh(t),yh(e??{})):e}function sw(t,e){if(!t)return e;if(!e)return t;const r=Qt(Object.create(null),t);for(const i in e)r[i]=Xt(t[i],e[i]);return r}function op(){return{app:null,config:{isNativeTag:Dm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ow=0;function aw(t,e){return function(i,a=null){Te(i)||(i=Qt({},i)),a!=null&&!yt(a)&&(a=null);const l=op(),y=new WeakSet;let g=!1;const O=l.app={_uid:ow++,_component:i,_props:a,_container:null,_context:l,_instance:null,version:Mw,get config(){return l.config},set config(d){},use(d,...T){return y.has(d)||(d&&Te(d.install)?(y.add(d),d.install(O,...T)):Te(d)&&(y.add(d),d(O,...T))),O},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),O},component(d,T){return T?(l.components[d]=T,O):l.components[d]},directive(d,T){return T?(l.directives[d]=T,O):l.directives[d]},mount(d,T,D){if(!g){const ee=cs(i,a);return ee.appContext=l,T&&e?e(ee,d):t(ee,d,D),g=!0,O._container=d,d.__vue_app__=O,Mf(ee.component)||ee.component.proxy}},unmount(){g&&(t(null,O._container),delete O._container.__vue_app__)},provide(d,T){return l.provides[d]=T,O},runWithContext(d){Xu=O;try{return d()}finally{Xu=null}}};return O}}let Xu=null;function uw(t,e){if(Ht){let r=Ht.provides;const i=Ht.parent&&Ht.parent.provides;i===r&&(r=Ht.provides=Object.create(i)),r[t]=e}}function Mu(t,e,r=!1){const i=Ht||mn;if(i||Xu){const a=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Xu._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Te(e)?e.call(i&&i.proxy):e}}function cw(t,e,r,i=!1){const a={},l={};Ju(l,hl,1),t.propsDefaults=Object.create(null),ap(t,e,a,l);for(const y in t.propsOptions[0])y in a||(a[y]=void 0);r?t.props=i?a:gy(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function lw(t,e,r,i){const{props:a,attrs:l,vnode:{patchFlag:y}}=t,g=$e(a),[O]=t.propsOptions;let d=!1;if((i||y>0)&&!(y&16)){if(y&8){const T=t.vnode.dynamicProps;for(let D=0;D<T.length;D++){let ee=T[D];if(cl(t.emitsOptions,ee))continue;const G=e[ee];if(O)if(Be(l,ee))G!==l[ee]&&(l[ee]=G,d=!0);else{const le=mo(ee);a[le]=jl(O,g,le,G,t,!1)}else G!==l[ee]&&(l[ee]=G,d=!0)}}}else{ap(t,e,a,l)&&(d=!0);let T;for(const D in g)(!e||!Be(e,D)&&((T=xo(D))===D||!Be(e,T)))&&(O?r&&(r[D]!==void 0||r[T]!==void 0)&&(a[D]=jl(O,g,D,void 0,t,!0)):delete a[D]);if(l!==g)for(const D in l)(!e||!Be(e,D))&&(delete l[D],d=!0)}d&&kn(t,"set","$attrs")}function ap(t,e,r,i){const[a,l]=t.propsOptions;let y=!1,g;if(e)for(let O in e){if(Pu(O))continue;const d=e[O];let T;a&&Be(a,T=mo(O))?!l||!l.includes(T)?r[T]=d:(g||(g={}))[T]=d:cl(t.emitsOptions,O)||(!(O in i)||d!==i[O])&&(i[O]=d,y=!0)}if(l){const O=$e(r),d=g||at;for(let T=0;T<l.length;T++){const D=l[T];r[D]=jl(a,O,D,d[D],t,!Be(d,D))}}return y}function jl(t,e,r,i,a,l){const y=t[r];if(y!=null){const g=Be(y,"default");if(g&&i===void 0){const O=y.default;if(y.type!==Function&&!y.skipFactory&&Te(O)){const{propsDefaults:d}=a;r in d?i=d[r]:(go(a),i=d[r]=O.call(null,e),ls())}else i=O}y[0]&&(l&&!g?i=!1:y[1]&&(i===""||i===xo(r))&&(i=!0))}return i}function up(t,e,r=!1){const i=e.propsCache,a=i.get(t);if(a)return a;const l=t.props,y={},g=[];let O=!1;if(!Te(t)){const T=D=>{O=!0;const[ee,G]=up(D,e,!0);Qt(y,ee),G&&g.push(...G)};!r&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!l&&!O)return yt(t)&&i.set(t,Fs),Fs;if(Ce(l))for(let T=0;T<l.length;T++){const D=mo(l[T]);Nh(D)&&(y[D]=at)}else if(l)for(const T in l){const D=mo(T);if(Nh(D)){const ee=l[T],G=y[D]=Ce(ee)||Te(ee)?{type:ee}:Qt({},ee);if(G){const le=xh(Boolean,G.type),b=xh(String,G.type);G[0]=le>-1,G[1]=b<0||le<b,(le>-1||Be(G,"default"))&&g.push(D)}}}const d=[y,g];return yt(t)&&i.set(t,d),d}function Nh(t){return t[0]!=="$"}function vh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function _h(t,e){return vh(t)===vh(e)}function xh(t,e){return Ce(e)?e.findIndex(r=>_h(r,t)):Te(e)&&_h(e,t)?0:-1}const cp=t=>t[0]==="_"||t==="$stable",Df=t=>Ce(t)?t.map(fn):[fn(t)],fw=(t,e,r)=>{if(e._n)return e;const i=Ay((...a)=>Df(e(...a)),r);return i._c=!1,i},lp=(t,e,r)=>{const i=t._ctx;for(const a in t){if(cp(a))continue;const l=t[a];if(Te(l))e[a]=fw(a,l,i);else if(l!=null){const y=Df(l);e[a]=()=>y}}},fp=(t,e)=>{const r=Df(e);t.slots.default=()=>r},hw=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=$e(e),Ju(e,"_",r)):lp(e,t.slots={})}else t.slots={},e&&fp(t,e);Ju(t.slots,hl,1)},dw=(t,e,r)=>{const{vnode:i,slots:a}=t;let l=!0,y=at;if(i.shapeFlag&32){const g=e._;g?r&&g===1?l=!1:(Qt(a,e),!r&&g===1&&delete a._):(l=!e.$stable,lp(e,a)),y=e}else e&&(fp(t,e),y={default:1});if(l)for(const g in a)!cp(g)&&y[g]==null&&delete a[g]};function Vl(t,e,r,i,a=!1){if(Ce(t)){t.forEach((ee,G)=>Vl(ee,e&&(Ce(e)?e[G]:e),r,i,a));return}if(Lu(i)&&!a)return;const l=i.shapeFlag&4?Mf(i.component)||i.component.proxy:i.el,y=a?null:l,{i:g,r:O}=t,d=e&&e.r,T=g.refs===at?g.refs={}:g.refs,D=g.setupState;if(d!=null&&d!==O&&(Dt(d)?(T[d]=null,Be(D,d)&&(D[d]=null)):Gt(d)&&(d.value=null)),Te(O))di(O,g,12,[y,T]);else{const ee=Dt(O),G=Gt(O);if(ee||G){const le=()=>{if(t.f){const b=ee?Be(D,O)?D[O]:T[O]:O.value;a?Ce(b)&&vf(b,l):Ce(b)?b.includes(l)||b.push(l):ee?(T[O]=[l],Be(D,O)&&(D[O]=T[O])):(O.value=[l],t.k&&(T[t.k]=O.value))}else ee?(T[O]=y,Be(D,O)&&(D[O]=y)):G&&(O.value=y,t.k&&(T[t.k]=y))};y?(le.id=-1,fr(le,r)):le()}}}const fr=My;function pw(t){return mw(t)}function mw(t,e){const r=Dl();r.__VUE__=!0;const{insert:i,remove:a,patchProp:l,createElement:y,createText:g,createComment:O,setText:d,setElementText:T,parentNode:D,nextSibling:ee,setScopeId:G=Hr,insertStaticContent:le}=t,b=(x,E,R,Q=null,H=null,te=null,U=!1,j=null,ne=!!E.dynamicChildren)=>{if(x===E)return;x&&!ra(x,E)&&(Q=Yr(x),jt(x,H,te,!0),x=null),E.patchFlag===-2&&(ne=!1,E.dynamicChildren=null);const{type:V,ref:ue,shapeFlag:ae}=E;switch(V){case fl:_(x,E,R,Q);break;case xa:v(x,E,R,Q);break;case Il:x==null&&C(E,R,Q,U);break;case ln:Er(x,E,R,Q,H,te,U,j,ne);break;default:ae&1?re(x,E,R,Q,H,te,U,j,ne):ae&6?et(x,E,R,Q,H,te,U,j,ne):(ae&64||ae&128)&&V.process(x,E,R,Q,H,te,U,j,ne,He)}ue!=null&&H&&Vl(ue,x&&x.ref,te,E||x,!E)},_=(x,E,R,Q)=>{if(x==null)i(E.el=g(E.children),R,Q);else{const H=E.el=x.el;E.children!==x.children&&d(H,E.children)}},v=(x,E,R,Q)=>{x==null?i(E.el=O(E.children||""),R,Q):E.el=x.el},C=(x,E,R,Q)=>{[x.el,x.anchor]=le(x.children,E,R,Q,x.el,x.anchor)},S=({el:x,anchor:E},R,Q)=>{let H;for(;x&&x!==E;)H=ee(x),i(x,R,Q),x=H;i(E,R,Q)},X=({el:x,anchor:E})=>{let R;for(;x&&x!==E;)R=ee(x),a(x),x=R;a(E)},re=(x,E,R,Q,H,te,U,j,ne)=>{U=U||E.type==="svg",x==null?he(E,R,Q,H,te,U,j,ne):nr(x,E,H,te,U,j,ne)},he=(x,E,R,Q,H,te,U,j)=>{let ne,V;const{type:ue,props:ae,shapeFlag:ce,transition:ge,dirs:Ee}=x;if(ne=x.el=y(x.type,te,ae&&ae.is,ae),ce&8?T(ne,x.children):ce&16&&It(x.children,ne,null,Q,H,te&&ue!=="foreignObject",U,j),Ee&&Li(x,null,Q,"created"),nt(ne,x,x.scopeId,U,Q),ae){for(const De in ae)De!=="value"&&!Pu(De)&&l(ne,De,null,ae[De],te,x.children,Q,H,Ae);"value"in ae&&l(ne,"value",null,ae.value),(V=ae.onVnodeBeforeMount)&&nn(V,Q,x)}Ee&&Li(x,null,Q,"beforeMount");const Qe=yw(H,ge);Qe&&ge.beforeEnter(ne),i(ne,E,R),((V=ae&&ae.onVnodeMounted)||Qe||Ee)&&fr(()=>{V&&nn(V,Q,x),Qe&&ge.enter(ne),Ee&&Li(x,null,Q,"mounted")},H)},nt=(x,E,R,Q,H)=>{if(R&&G(x,R),Q)for(let te=0;te<Q.length;te++)G(x,Q[te]);if(H){let te=H.subTree;if(E===te){const U=H.vnode;nt(x,U,U.scopeId,U.slotScopeIds,H.parent)}}},It=(x,E,R,Q,H,te,U,j,ne=0)=>{for(let V=ne;V<x.length;V++){const ue=x[V]=j?Xn(x[V]):fn(x[V]);b(null,ue,E,R,Q,H,te,U,j)}},nr=(x,E,R,Q,H,te,U)=>{const j=E.el=x.el;let{patchFlag:ne,dynamicChildren:V,dirs:ue}=E;ne|=x.patchFlag&16;const ae=x.props||at,ce=E.props||at;let ge;R&&Mi(R,!1),(ge=ce.onVnodeBeforeUpdate)&&nn(ge,R,E,x),ue&&Li(E,x,R,"beforeUpdate"),R&&Mi(R,!0);const Ee=H&&E.type!=="foreignObject";if(V?wr(x.dynamicChildren,V,j,R,Q,Ee,te):U||Ie(x,E,j,null,R,Q,Ee,te,!1),ne>0){if(ne&16)Ar(j,E,ae,ce,R,Q,H);else if(ne&2&&ae.class!==ce.class&&l(j,"class",null,ce.class,H),ne&4&&l(j,"style",ae.style,ce.style,H),ne&8){const Qe=E.dynamicProps;for(let De=0;De<Qe.length;De++){const tt=Qe[De],ye=ae[tt],Wr=ce[tt];(Wr!==ye||tt==="value")&&l(j,tt,ye,Wr,H,x.children,R,Q,Ae)}}ne&1&&x.children!==E.children&&T(j,E.children)}else!U&&V==null&&Ar(j,E,ae,ce,R,Q,H);((ge=ce.onVnodeUpdated)||ue)&&fr(()=>{ge&&nn(ge,R,E,x),ue&&Li(E,x,R,"updated")},Q)},wr=(x,E,R,Q,H,te,U)=>{for(let j=0;j<E.length;j++){const ne=x[j],V=E[j],ue=ne.el&&(ne.type===ln||!ra(ne,V)||ne.shapeFlag&70)?D(ne.el):R;b(ne,V,ue,null,Q,H,te,U,!0)}},Ar=(x,E,R,Q,H,te,U)=>{if(R!==Q){if(R!==at)for(const j in R)!Pu(j)&&!(j in Q)&&l(x,j,R[j],null,U,E.children,H,te,Ae);for(const j in Q){if(Pu(j))continue;const ne=Q[j],V=R[j];ne!==V&&j!=="value"&&l(x,j,V,ne,U,E.children,H,te,Ae)}"value"in Q&&l(x,"value",R.value,Q.value)}},Er=(x,E,R,Q,H,te,U,j,ne)=>{const V=E.el=x?x.el:g(""),ue=E.anchor=x?x.anchor:g("");let{patchFlag:ae,dynamicChildren:ce,slotScopeIds:ge}=E;ge&&(j=j?j.concat(ge):ge),x==null?(i(V,R,Q),i(ue,R,Q),It(E.children,R,ue,H,te,U,j,ne)):ae>0&&ae&64&&ce&&x.dynamicChildren?(wr(x.dynamicChildren,ce,R,H,te,U,j),(E.key!=null||H&&E===H.subTree)&&hp(x,E,!0)):Ie(x,E,R,ue,H,te,U,j,ne)},et=(x,E,R,Q,H,te,U,j,ne)=>{E.slotScopeIds=j,x==null?E.shapeFlag&512?H.ctx.activate(E,R,Q,U,ne):gr(E,R,Q,H,te,U,ne):Pt(x,E,ne)},gr=(x,E,R,Q,H,te,U)=>{const j=x.component=Sw(x,Q,H);if(rp(x)&&(j.ctx.renderer=He),Tw(j),j.asyncDep){if(H&&H.registerDep(j,it),!x.el){const ne=j.subTree=cs(xa);v(null,ne,E,R)}return}it(j,x,E,R,H,te,U)},Pt=(x,E,R)=>{const Q=E.component=x.component;if(Dy(x,E,R))if(Q.asyncDep&&!Q.asyncResolved){me(Q,E,R);return}else Q.next=E,Iy(Q.update),Q.update();else E.el=x.el,Q.vnode=E},it=(x,E,R,Q,H,te,U)=>{const j=()=>{if(x.isMounted){let{next:ue,bu:ae,u:ce,parent:ge,vnode:Ee}=x,Qe=ue,De;Mi(x,!1),ue?(ue.el=Ee.el,me(x,ue,U)):ue=Ee,ae&&Ol(ae),(De=ue.props&&ue.props.onVnodeBeforeUpdate)&&nn(De,ge,ue,Ee),Mi(x,!0);const tt=ql(x),ye=x.subTree;x.subTree=tt,b(ye,tt,D(ye.el),Yr(ye),x,H,te),ue.el=tt.el,Qe===null&&Py(x,tt.el),ce&&fr(ce,H),(De=ue.props&&ue.props.onVnodeUpdated)&&fr(()=>nn(De,ge,ue,Ee),H)}else{let ue;const{el:ae,props:ce}=E,{bm:ge,m:Ee,parent:Qe}=x,De=Lu(E);if(Mi(x,!1),ge&&Ol(ge),!De&&(ue=ce&&ce.onVnodeBeforeMount)&&nn(ue,Qe,E),Mi(x,!0),ae&&xt){const tt=()=>{x.subTree=ql(x),xt(ae,x.subTree,x,H,null)};De?E.type.__asyncLoader().then(()=>!x.isUnmounted&&tt()):tt()}else{const tt=x.subTree=ql(x);b(null,tt,R,Q,x,H,te),E.el=tt.el}if(Ee&&fr(Ee,H),!De&&(ue=ce&&ce.onVnodeMounted)){const tt=E;fr(()=>nn(ue,Qe,tt),H)}(E.shapeFlag&256||Qe&&Lu(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&x.a&&fr(x.a,H),x.isMounted=!0,E=R=Q=null}},ne=x.effect=new Ef(j,()=>Wf(V),x.scope),V=x.update=()=>ne.run();V.id=x.uid,Mi(x,!0),V()},me=(x,E,R)=>{E.component=x;const Q=x.vnode.props;x.vnode=E,x.next=null,lw(x,E.props,Q,R),dw(x,E.children,R),Oo(),ph(),qo()},Ie=(x,E,R,Q,H,te,U,j,ne=!1)=>{const V=x&&x.children,ue=x?x.shapeFlag:0,ae=E.children,{patchFlag:ce,shapeFlag:ge}=E;if(ce>0){if(ce&128){we(V,ae,R,Q,H,te,U,j,ne);return}else if(ce&256){_t(V,ae,R,Q,H,te,U,j,ne);return}}ge&8?(ue&16&&Ae(V,H,te),ae!==V&&T(R,ae)):ue&16?ge&16?we(V,ae,R,Q,H,te,U,j,ne):Ae(V,H,te,!0):(ue&8&&T(R,""),ge&16&&It(ae,R,Q,H,te,U,j,ne))},_t=(x,E,R,Q,H,te,U,j,ne)=>{x=x||Fs,E=E||Fs;const V=x.length,ue=E.length,ae=Math.min(V,ue);let ce;for(ce=0;ce<ae;ce++){const ge=E[ce]=ne?Xn(E[ce]):fn(E[ce]);b(x[ce],ge,R,null,H,te,U,j,ne)}V>ue?Ae(x,H,te,!0,!1,ae):It(E,R,Q,H,te,U,j,ne,ae)},we=(x,E,R,Q,H,te,U,j,ne)=>{let V=0;const ue=E.length;let ae=x.length-1,ce=ue-1;for(;V<=ae&&V<=ce;){const ge=x[V],Ee=E[V]=ne?Xn(E[V]):fn(E[V]);if(ra(ge,Ee))b(ge,Ee,R,null,H,te,U,j,ne);else break;V++}for(;V<=ae&&V<=ce;){const ge=x[ae],Ee=E[ce]=ne?Xn(E[ce]):fn(E[ce]);if(ra(ge,Ee))b(ge,Ee,R,null,H,te,U,j,ne);else break;ae--,ce--}if(V>ae){if(V<=ce){const ge=ce+1,Ee=ge<ue?E[ge].el:Q;for(;V<=ce;)b(null,E[V]=ne?Xn(E[V]):fn(E[V]),R,Ee,H,te,U,j,ne),V++}}else if(V>ce)for(;V<=ae;)jt(x[V],H,te,!0),V++;else{const ge=V,Ee=V,Qe=new Map;for(V=Ee;V<=ce;V++){const pe=E[V]=ne?Xn(E[V]):fn(E[V]);pe.key!=null&&Qe.set(pe.key,V)}let De,tt=0;const ye=ce-Ee+1;let Wr=!1,Dn=0;const Zr=new Array(ye);for(V=0;V<ye;V++)Zr[V]=0;for(V=ge;V<=ae;V++){const pe=x[V];if(tt>=ye){jt(pe,H,te,!0);continue}let ut;if(pe.key!=null)ut=Qe.get(pe.key);else for(De=Ee;De<=ce;De++)if(Zr[De-Ee]===0&&ra(pe,E[De])){ut=De;break}ut===void 0?jt(pe,H,te,!0):(Zr[ut-Ee]=V+1,ut>=Dn?Dn=ut:Wr=!0,b(pe,E[ut],R,null,H,te,U,j,ne),tt++)}const en=Wr?ww(Zr):Fs;for(De=en.length-1,V=ye-1;V>=0;V--){const pe=Ee+V,ut=E[pe],Pn=pe+1<ue?E[pe+1].el:Q;Zr[V]===0?b(null,ut,R,Pn,H,te,U,j,ne):Wr&&(De<0||V!==en[De]?Fe(ut,R,Pn,2):De--)}}},Fe=(x,E,R,Q,H=null)=>{const{el:te,type:U,transition:j,children:ne,shapeFlag:V}=x;if(V&6){Fe(x.component.subTree,E,R,Q);return}if(V&128){x.suspense.move(E,R,Q);return}if(V&64){U.move(x,E,R,He);return}if(U===ln){i(te,E,R);for(let ae=0;ae<ne.length;ae++)Fe(ne[ae],E,R,Q);i(x.anchor,E,R);return}if(U===Il){S(x,E,R);return}if(Q!==2&&V&1&&j)if(Q===0)j.beforeEnter(te),i(te,E,R),fr(()=>j.enter(te),H);else{const{leave:ae,delayLeave:ce,afterLeave:ge}=j,Ee=()=>i(te,E,R),Qe=()=>{ae(te,()=>{Ee(),ge&&ge()})};ce?ce(te,Ee,Qe):Qe()}else i(te,E,R)},jt=(x,E,R,Q=!1,H=!1)=>{const{type:te,props:U,ref:j,children:ne,dynamicChildren:V,shapeFlag:ue,patchFlag:ae,dirs:ce}=x;if(j!=null&&Vl(j,null,R,x,!0),ue&256){E.ctx.deactivate(x);return}const ge=ue&1&&ce,Ee=!Lu(x);let Qe;if(Ee&&(Qe=U&&U.onVnodeBeforeUnmount)&&nn(Qe,E,x),ue&6)de(x.component,R,Q);else{if(ue&128){x.suspense.unmount(R,Q);return}ge&&Li(x,null,E,"beforeUnmount"),ue&64?x.type.remove(x,E,R,H,He,Q):V&&(te!==ln||ae>0&&ae&64)?Ae(V,E,R,!1,!0):(te===ln&&ae&384||!H&&ue&16)&&Ae(ne,E,R),Q&&bn(x)}(Ee&&(Qe=U&&U.onVnodeUnmounted)||ge)&&fr(()=>{Qe&&nn(Qe,E,x),ge&&Li(x,null,E,"unmounted")},R)},bn=x=>{const{type:E,el:R,anchor:Q,transition:H}=x;if(E===ln){ys(R,Q);return}if(E===Il){X(x);return}const te=()=>{a(R),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(x.shapeFlag&1&&H&&!H.persisted){const{leave:U,delayLeave:j}=H,ne=()=>U(R,te);j?j(x.el,te,ne):ne()}else te()},ys=(x,E)=>{let R;for(;x!==E;)R=ee(x),a(x),x=R;a(E)},de=(x,E,R)=>{const{bum:Q,scope:H,update:te,subTree:U,um:j}=x;Q&&Ol(Q),H.stop(),te&&(te.active=!1,jt(U,x,E,R)),j&&fr(j,E),fr(()=>{x.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},Ae=(x,E,R,Q=!1,H=!1,te=0)=>{for(let U=te;U<x.length;U++)jt(x[U],E,R,Q,H)},Yr=x=>x.shapeFlag&6?Yr(x.component.subTree):x.shapeFlag&128?x.suspense.next():ee(x.anchor||x.el),Xr=(x,E,R)=>{x==null?E._vnode&&jt(E._vnode,null,null,!0):b(E._vnode||null,x,E,null,null,null,R),ph(),Gd(),E._vnode=x},He={p:b,um:jt,m:Fe,r:bn,mt:gr,mc:It,pc:Ie,pbc:wr,n:Yr,o:t};let ir,xt;return e&&([ir,xt]=e(He)),{render:Xr,hydrate:ir,createApp:aw(Xr,ir)}}function Mi({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function yw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function hp(t,e,r=!1){const i=t.children,a=e.children;if(Ce(i)&&Ce(a))for(let l=0;l<i.length;l++){const y=i[l];let g=a[l];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=a[l]=Xn(a[l]),g.el=y.el),r||hp(y,g)),g.type===fl&&(g.el=y.el)}}function ww(t){const e=t.slice(),r=[0];let i,a,l,y,g;const O=t.length;for(i=0;i<O;i++){const d=t[i];if(d!==0){if(a=r[r.length-1],t[a]<d){e[i]=a,r.push(i);continue}for(l=0,y=r.length-1;l<y;)g=l+y>>1,t[r[g]]<d?l=g+1:y=g;d<t[r[l]]&&(l>0&&(e[i]=r[l-1]),r[l]=i)}}for(l=r.length,y=r[l-1];l-- >0;)r[l]=y,y=e[y];return r}const gw=t=>t.__isTeleport,ln=Symbol.for("v-fgt"),fl=Symbol.for("v-txt"),xa=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),ca=[];let Kr=null;function bw(t=!1){ca.push(Kr=t?null:[])}function Nw(){ca.pop(),Kr=ca[ca.length-1]||null}let Oa=1;function Oh(t){Oa+=t}function vw(t){return t.dynamicChildren=Oa>0?Kr||Fs:null,Nw(),Oa>0&&Kr&&Kr.push(t),t}function _w(t,e,r,i,a,l){return vw(Ct(t,e,r,i,a,l,!0))}function xw(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const hl="__vInternal",dp=({key:t})=>t??null,Bu=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Dt(t)||Gt(t)||Te(t)?{i:mn,r:t,k:e,f:!!r}:t:null);function Ct(t,e=null,r=null,i=0,a=null,l=t===ln?0:1,y=!1,g=!1){const O={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&dp(e),ref:e&&Bu(e),scopeId:Zd,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:mn};return g?(Pf(O,r),l&128&&t.normalize(O)):r&&(O.shapeFlag|=Dt(r)?8:16),Oa>0&&!y&&Kr&&(O.patchFlag>0||l&6)&&O.patchFlag!==32&&Kr.push(O),O}const cs=Ow;function Ow(t,e=null,r=null,i=0,a=null,l=!1){if((!t||t===Zy)&&(t=xa),xw(t)){const g=wo(t,e,!0);return r&&Pf(g,r),Oa>0&&!l&&Kr&&(g.shapeFlag&6?Kr[Kr.indexOf(t)]=g:Kr.push(g)),g.patchFlag|=-2,g}if(Rw(t)&&(t=t.__vccOpts),e){e=qw(e);let{class:g,style:O}=e;g&&!Dt(g)&&(e.class=Of(g)),yt(O)&&($d(O)&&!Ce(O)&&(O=Qt({},O)),e.style=xf(O))}const y=Dt(t)?1:Ly(t)?128:gw(t)?64:yt(t)?4:Te(t)?2:0;return Ct(t,e,r,i,a,y,l,!0)}function qw(t){return t?$d(t)||hl in t?Qt({},t):t:null}function wo(t,e,r=!1){const{props:i,ref:a,patchFlag:l,children:y}=t,g=e?Ew(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&dp(g),ref:e&&e.ref?r&&a?Ce(a)?a.concat(Bu(e)):[a,Bu(e)]:Bu(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ln?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wo(t.ssContent),ssFallback:t.ssFallback&&wo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function qa(t=" ",e=0){return cs(fl,null,t,e)}function fn(t){return t==null||typeof t=="boolean"?cs(xa):Ce(t)?cs(ln,null,t.slice()):typeof t=="object"?Xn(t):cs(fl,null,String(t))}function Xn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wo(t)}function Pf(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ce(e))r=16;else if(typeof e=="object")if(i&65){const a=e.default;a&&(a._c&&(a._d=!1),Pf(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(hl in e)?e._ctx=mn:a===3&&mn&&(mn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:mn},r=32):(e=String(e),i&64?(r=16,e=[qa(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ew(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const a in i)if(a==="class")e.class!==i.class&&(e.class=Of([e.class,i.class]));else if(a==="style")e.style=xf([e.style,i.style]);else if(nl(a)){const l=e[a],y=i[a];y&&l!==y&&!(Ce(l)&&l.includes(y))&&(e[a]=l?[].concat(l,y):y)}else a!==""&&(e[a]=i[a])}return e}function nn(t,e,r,i=null){Gr(t,e,7,[r,i])}const Cw=op();let Iw=0;function Sw(t,e,r){const i=t.type,a=(e?e.appContext:t.appContext)||Cw,l={uid:Iw++,vnode:t,type:i,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:up(i,a),emitsOptions:Xd(i,a),emit:null,emitted:null,propsDefaults:at,inheritAttrs:i.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=ky.bind(null,l),t.ce&&t.ce(l),l}let Ht=null,Lf,Cs,qh="__VUE_INSTANCE_SETTERS__";(Cs=Dl()[qh])||(Cs=Dl()[qh]=[]),Cs.push(t=>Ht=t),Lf=t=>{Cs.length>1?Cs.forEach(e=>e(t)):Cs[0](t)};const go=t=>{Lf(t),t.scope.on()},ls=()=>{Ht&&Ht.scope.off(),Lf(null)};function pp(t){return t.vnode.shapeFlag&4}let Ea=!1;function Tw(t,e=!1){Ea=e;const{props:r,children:i}=t.vnode,a=pp(t);cw(t,r,a,e),hw(t,i);const l=a?kw(t,e):void 0;return Ea=!1,l}function kw(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=Qd(new Proxy(t.ctx,ew));const{setup:i}=r;if(i){const a=t.setupContext=i.length>1?Ww(t):null;go(t),Oo();const l=di(i,t,0,[t.props,a]);if(qo(),ls(),qd(l)){if(l.then(ls,ls),e)return l.then(y=>{Eh(t,y,e)}).catch(y=>{ul(y,t,0)});t.asyncDep=l}else Eh(t,l,e)}else mp(t,e)}function Eh(t,e,r){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:yt(e)&&(t.setupState=Kd(e)),mp(t,r)}let Ch;function mp(t,e,r){const i=t.type;if(!t.render){if(!e&&Ch&&!i.render){const a=i.template||Rf(t).template;if(a){const{isCustomElement:l,compilerOptions:y}=t.appContext.config,{delimiters:g,compilerOptions:O}=i,d=Qt(Qt({isCustomElement:l,delimiters:g},y),O);i.render=Ch(a,d)}}t.render=i.render||Hr}{go(t),Oo();try{tw(t)}finally{qo(),ls()}}}function Aw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return yr(t,"get","$attrs"),e[r]}}))}function Ww(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Aw(t)},slots:t.slots,emit:t.emit,expose:e}}function Mf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Kd(Qd(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ua)return ua[r](t)},has(e,r){return r in e||r in ua}}))}function Rw(t){return Te(t)&&"__vccOpts"in t}const Dw=(t,e)=>Oy(t,e,Ea),Pw=Symbol.for("v-scx"),Lw=()=>Mu(Pw),Mw="3.3.7",Bw="http://www.w3.org/2000/svg",Ui=typeof document<"u"?document:null,Ih=Ui&&Ui.createElement("template"),Fw={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const a=e?Ui.createElementNS(Bw,t):Ui.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:t=>Ui.createTextNode(t),createComment:t=>Ui.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ui.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,a,l){const y=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{Ih.innerHTML=i?`<svg>${t}</svg>`:t;const g=Ih.content;if(i){const O=g.firstChild;for(;O.firstChild;)g.appendChild(O.firstChild);g.removeChild(O)}e.insertBefore(g,r)}return[y?y.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Uw=Symbol("_vtc");function $w(t,e,r){const i=t[Uw];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Qw=Symbol("_vod");function jw(t,e,r){const i=t.style,a=Dt(r);if(r&&!a){if(e&&!Dt(e))for(const l in e)r[l]==null&&zl(i,l,"");for(const l in r)zl(i,l,r[l])}else{const l=i.display;a?e!==r&&(i.cssText=r):e&&t.removeAttribute("style"),Qw in t&&(i.display=l)}}const Sh=/\s*!important$/;function zl(t,e,r){if(Ce(r))r.forEach(i=>zl(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Vw(t,e);Sh.test(r)?t.setProperty(xo(i),r.replace(Sh,""),"important"):t[i]=r}}const Th=["Webkit","Moz","ms"],Sl={};function Vw(t,e){const r=Sl[e];if(r)return r;let i=mo(e);if(i!=="filter"&&i in t)return Sl[e]=i;i=Id(i);for(let a=0;a<Th.length;a++){const l=Th[a]+i;if(l in t)return Sl[e]=l}return e}const kh="http://www.w3.org/1999/xlink";function zw(t,e,r,i,a){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,r);else{const l=Km(e);r==null||l&&!Sd(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function Kw(t,e,r,i,a,l,y){if(e==="innerHTML"||e==="textContent"){i&&y(i,a,l),t[e]=r??"";return}const g=t.tagName;if(e==="value"&&g!=="PROGRESS"&&!g.includes("-")){t._value=r;const d=g==="OPTION"?t.getAttribute("value"):t.value,T=r??"";d!==T&&(t.value=T),r==null&&t.removeAttribute(e);return}let O=!1;if(r===""||r==null){const d=typeof t[e];d==="boolean"?r=Sd(r):r==null&&d==="string"?(r="",O=!0):d==="number"&&(r=0,O=!0)}try{t[e]=r}catch{}O&&t.removeAttribute(e)}function Jw(t,e,r,i){t.addEventListener(e,r,i)}function Hw(t,e,r,i){t.removeEventListener(e,r,i)}const Ah=Symbol("_vei");function Gw(t,e,r,i,a=null){const l=t[Ah]||(t[Ah]={}),y=l[e];if(i&&y)y.value=i;else{const[g,O]=Yw(e);if(i){const d=l[e]=eg(i,a);Jw(t,g,d,O)}else y&&(Hw(t,g,y,O),l[e]=void 0)}}const Wh=/(?:Once|Passive|Capture)$/;function Yw(t){let e;if(Wh.test(t)){e={};let i;for(;i=t.match(Wh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xo(t.slice(2)),e]}let Tl=0;const Xw=Promise.resolve(),Zw=()=>Tl||(Xw.then(()=>Tl=0),Tl=Date.now());function eg(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Gr(tg(i,r.value),e,5,[i])};return r.value=t,r.attached=Zw(),r}function tg(t,e){if(Ce(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>a=>!a._stopped&&i&&i(a))}else return e}const Rh=/^on[a-z]/,rg=(t,e,r,i,a=!1,l,y,g,O)=>{e==="class"?$w(t,i,a):e==="style"?jw(t,r,i):nl(e)?Nf(e)||Gw(t,e,r,i,y):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ng(t,e,i,a))?Kw(t,e,i,l,y,g,O):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),zw(t,e,i,a))};function ng(t,e,r,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&Rh.test(e)&&Te(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Rh.test(e)&&Dt(r)?!1:e in t}const ig=Qt({patchProp:rg},Fw);let Dh;function sg(){return Dh||(Dh=pw(ig))}const og=(...t)=>{const e=sg().createApp(...t),{mount:r}=e;return e.mount=i=>{const a=ag(i);if(!a)return;const l=e._component;!Te(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const y=r(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),y},e};function ag(t){return Dt(t)?document.querySelector(t):t}function fs(t){return typeof t>"u"||t===void 0}function wn(t){return typeof t=="string"}function yp(t){return typeof t=="number"}function Zu(t){return typeof t=="boolean"}function Bf(t){return t===null}function ug(t){return t instanceof Date}function cg(t){return typeof t=="bigint"}function qr(t){return typeof t=="function"}function pn(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function yi(t){return Array.isArray(t)}function bo(t){return t}const Nt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),dt=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Gn=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:dt.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),wp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:dt.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),lg=["preserve rows","delete rows","drop"],Mr=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),wi=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:dt.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:dt.create(t),identifier:dt.create(e)})}}),Fu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:wi.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Kl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:dt.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Jl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),Ni=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),pi=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:wi.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:wi.createWithSchema(t,e)})}});function kr(t){return pn(t)&&qr(t.toOperationNode)}function fg(t){return pn(t)&&"expressionType"in t&&kr(t)}function hg(t){return pn(t)&&"expression"in t&&wn(t.alias)&&kr(t)}const vn=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),gi=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),Eo=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),kl=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return p({...t,on:e==="And"?gi.create(t.on,r):Eo.create(t.on,r)})}}),la=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return p({kind:"JoinNode",joinType:t,table:e,on:kl.create(r)})},cloneWithOn(t,e){return p({...t,on:t.on?kl.cloneWithOperation(t.on,"And",e):kl.create(e)})}}),Ca=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),dg=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],pg=["+","-","*","/","%","^","&","|","#","<<",">>"],gp=["->","->>"],mg=[...dg,...pg,"&&","||"],yg=["exists","not exists"],wg=["not","-",...yg],gg=[...mg,...gp,...wg,"between","between symmetric"],ps=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Ph(t){return wn(t)&&gp.includes(t)}const vt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:dt.create(t)})}}),Ff=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),dl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Ff.create()})}});var js;class bg{constructor(e){P(this,js,void 0);$(this,js,e)}get dynamicReference(){return s(this,js)}get refType(){}toOperationNode(){return xp(s(this,js))}}js=new WeakMap;function bp(t){return pn(t)&&kr(t)&&wn(t.dynamicReference)}const Hl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),tr=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return tr.create([t],[])},createWithChild(t){return tr.create(["",""],[t])},createWithChildren(t){return tr.create(new Array(t.length+1).fill(""),t)}});function Np(t){return t==="asc"||t==="desc"}function pl(t){if(t.length===2)return[Al(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>Al(r)):[Al(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function Al(t,e){const r=Ng(t);if(Hl.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Hl.create(r,vp(e))}function Ng(t){if(nu(t))return Io(t);if(bp(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!Np(r))throw new Error(`Invalid order by direction: ${r}`);return Hl.create(An(e),vp(r))}return An(t)}function vp(t){if(t)return t==="asc"||t==="desc"?tr.createWithSql(t):t.toOperationNode()}const Gl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),_p=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Yl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function xp(t){return wn(t)?An(t):t.toOperationNode()}function Ia(t){return yi(t)?t.map(e=>Jr(e)):[Jr(t)]}function Jr(t){return nu(t)?Io(t):xp(t)}function vg(t,e){const r=An(t);if(Ph(e))return Gl.create(r,_p.create(ps.create(e)));const i=e.slice(0,-1);if(Ph(i))return Gl.create(r,Yl.create(ps.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function An(t){const e=".";if(!t.includes(e))return dl.create(vt.create(t));const r=t.split(e).map(Uf);if(r.length===3)return xg(r);if(r.length===2)return Og(r);throw new Error(`invalid column reference ${t}`)}function _g(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Uf);return Ni.create(An(r),dt.create(i))}else return An(t)}function Op(t){return vt.create(t)}function Lh(t){const e=" ";if(t.includes(e)){const[r,i]=t.split(e).map(Uf);if(!Np(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return pl([r,i])[0]}else return Op(t)}function xg(t){const[e,r,i]=t;return dl.create(vt.create(i),pi.createWithSchema(e,r))}function Og(t){const[e,r]=t;return dl.create(vt.create(r),pi.create(e))}function Uf(t){return t.trim()}const qp=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),$f=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),gn=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function Ep(t){return yi(t)?qg(t):rr(t)}function rr(t){return nu(t)?Io(t):gn.create(t)}function Qf(t){return yp(t)||Zu(t)||Bf(t)}function jf(t){if(!Qf(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return gn.createImmediate(t)}function qg(t){return t.some(nu)?$f.create(t.map(e=>rr(e))):qp.create(t)}const No=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Yt(t){if(t.length===3)return fa(t[0],t[1],t[2]);if(t.length===1)return rr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function fa(t,e,r){return Eg(e)&&Cp(r)?Ca.create(Jr(t),Zl(e),gn.createImmediate(r)):Ca.create(Jr(t),Zl(e),Ep(r))}function Wn(t,e,r){return Ca.create(Jr(t),Zl(e),Jr(r))}function Mh(t,e){return Xl(Object.entries(t).filter(([,r])=>!fs(r)).map(([r,i])=>fa(r,Cp(i)?"is":"=",i)),e)}function Xl(t,e){const r=e==="and"?gi.create:Eo.create;if(t.length===0)return gn.createImmediate(e==="and");let i=Bh(t[0]);for(let a=1;a<t.length;++a)i=r(i,Bh(t[a]));return t.length>1?No.create(i):i}function Eg(t){return t==="is"||t==="is not"}function Cp(t){return Bf(t)||Zu(t)}function Zl(t){if(wn(t)&&gg.includes(t))return ps.create(t);if(kr(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Bh(t){return kr(t)?t.toOperationNode():t}const vo=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Fh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),ef=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Fh.cloneWithItems(t.partitionBy,e):Fh.create(e)})}}),ec=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),Uh=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),$h=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return p({...t,having:e==="And"?gi.create(t.having,r):Eo.create(t.having,r)})}}),Pe=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?Uh.cloneWithItems(t.groupBy,e):Uh.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?$h.cloneWithOperation(t.having,"And",e):$h.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Me(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Fr;const pa=class pa{constructor(e){P(this,Fr,void 0);$(this,Fr,p(e))}on(...e){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,Yt(e))})}onRef(e,r,i){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,Wn(e,r,i))})}onTrue(){return new pa({...s(this,Fr),joinNode:la.cloneWithOn(s(this,Fr).joinNode,tr.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return s(this,Fr).joinNode}};Fr=new WeakMap;let tc=pa;Me(tc,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Cg=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function Ig(t){return Ia(t).map(Cg.create)}var zi;const Sc=class Sc{constructor(e){P(this,zi,void 0);$(this,zi,p(e))}orderBy(e,r){return new Sc({overNode:ef.cloneWithOrderByItems(s(this,zi).overNode,pl([e,r]))})}partitionBy(e){return new Sc({overNode:ef.cloneWithPartitionByItems(s(this,zi).overNode,Ig(e))})}$call(e){return e(this)}toOperationNode(){return s(this,zi).overNode}};zi=new WeakMap;let rc=Sc;Me(rc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const ha=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Ff.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:dl.createSelectAll(t)})}});function ms(t){return qr(t)?ms(t(Co())):yi(t)?t.map(e=>Qh(e)):[Qh(t)]}function Qh(t){return wn(t)?ha.create(_g(t)):bp(t)?ha.create(t.toOperationNode()):ha.create(Up(t))}function tu(t){return t?Array.isArray(t)?t.map(jh):[jh(t)]:[ha.createSelectAll()]}function jh(t){if(wn(t))return ha.createSelectAllFromTable(mr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Sg=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),Tg=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function kg(t){const e=qr(t)?t(Co()):t,r=yi(e)?e:p([e]);return Ag(r)}function Ag(t){const e=Wg(t);return[p([...e.keys()].map(vt.create)),Sg.create(t.map(r=>Rg(r,e)))]}function Wg(t){const e=new Map;for(const r of t){const i=Object.keys(r);for(const a of i)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Rg(t,e){const r=Object.keys(t),i=Array.from({length:e.size});let a=!1;for(const y of r){const g=e.get(y);if(fs(g))continue;const O=t[y];(fs(O)||nu(O))&&(a=!0),i[g]=O}if(r.length<e.size||a){const y=Tg.create();return $f.create(i.map(g=>fs(g)?y:rr(g)))}return qp.create(i)}const hn=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?ec.cloneWithFroms(t.from,e):ec.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),Vh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),da=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:ec.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?vo.cloneWithItems(t.orderBy,e):vo.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?Vh.cloneWithTables(t.using,e):Vh.create(e)})}}),dr=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return p({...t,where:e==="And"?gi.create(t.where,r):Eo.create(t.where,r)})}}),zh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),Dg=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),Re=p({is(t){return Pe.is(t)||hn.is(t)||nc.is(t)||da.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?dr.cloneWithOperation(t.where,"And",e):dr.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?zh.cloneWithSelections(t.returning,e):zh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,r){return p({...t,explain:Dg.create(e,r?.toOperationNode())})}}),Pg=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function Vf(t){const e=qr(t)?t(Co()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Pg.create(vt.create(r),rr(i)))}const Lg=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class Mg{constructor(e,r){be(this,"insertId");be(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class ml extends Error{constructor(r){super("no result");be(this,"node");this.node=r}}function yl(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Or=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?dr.cloneWithOperation(t.indexWhere,"And",e):dr.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?dr.cloneWithOperation(t.indexWhere,"Or",e):dr.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?dr.cloneWithOperation(t.updateWhere,"And",e):dr.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?dr.cloneWithOperation(t.updateWhere,"Or",e):dr.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var rt;const On=class On{constructor(e){P(this,rt,void 0);$(this,rt,p(e))}column(e){const r=vt.create(e);return new On({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{columns:s(this,rt).onConflictNode.columns?p([...s(this,rt).onConflictNode.columns,r]):p([r])})})}columns(e){const r=e.map(vt.create);return new On({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{columns:s(this,rt).onConflictNode.columns?p([...s(this,rt).onConflictNode.columns,...r]):p(r)})})}constraint(e){return new On({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{constraint:dt.create(e)})})}expression(e){return new On({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new On({...s(this,rt),onConflictNode:Or.cloneWithIndexWhere(s(this,rt).onConflictNode,Yt(e))})}whereRef(e,r,i){return new On({...s(this,rt),onConflictNode:Or.cloneWithIndexWhere(s(this,rt).onConflictNode,Wn(e,r,i))})}clearWhere(){return new On({...s(this,rt),onConflictNode:Or.cloneWithoutIndexWhere(s(this,rt).onConflictNode)})}doNothing(){return new Ip({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new sc({...s(this,rt),onConflictNode:Or.cloneWith(s(this,rt).onConflictNode,{updates:Vf(e)})})}$call(e){return e(this)}};rt=new WeakMap;let ic=On;Me(ic,"don't await OnConflictBuilder instances.");var Da;class Ip{constructor(e){P(this,Da,void 0);$(this,Da,p(e))}toOperationNode(){return s(this,Da).onConflictNode}}Da=new WeakMap;Me(Ip,"don't await OnConflictDoNothingBuilder instances.");var Ur;const ma=class ma{constructor(e){P(this,Ur,void 0);$(this,Ur,p(e))}where(...e){return new ma({...s(this,Ur),onConflictNode:Or.cloneWithUpdateWhere(s(this,Ur).onConflictNode,Yt(e))})}whereRef(e,r,i){return new ma({...s(this,Ur),onConflictNode:Or.cloneWithUpdateWhere(s(this,Ur).onConflictNode,Wn(e,r,i))})}clearWhere(){return new ma({...s(this,Ur),onConflictNode:Or.cloneWithoutUpdateWhere(s(this,Ur).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return s(this,Ur).onConflictNode}};Ur=new WeakMap;let sc=ma;Me(sc,"don't await OnConflictUpdateBuilder instances.");var ke;const zt=class zt{constructor(e){P(this,ke,void 0);$(this,ke,p(e))}values(e){const[r,i]=kg(e);return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{columns:r,values:i})})}columns(e){return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{columns:p(e.map(vt.create))})})}expression(e){return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{values:Io(e)})})}ignore(){return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{ignore:!0})})}onConflict(e){return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{onConflict:e(new ic({onConflictNode:Or.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new zt({...s(this,ke),queryNode:hn.cloneWith(s(this,ke).queryNode,{onDuplicateKey:Lg.create(Vf(e))})})}returning(e){return new zt({...s(this,ke),queryNode:Re.cloneWithReturning(s(this,ke).queryNode,ms(e))})}returningAll(){return new zt({...s(this,ke),queryNode:Re.cloneWithReturning(s(this,ke).queryNode,tu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new zt({...s(this,ke)})}$castTo(){return new zt(s(this,ke))}$narrowType(){return new zt(s(this,ke))}$assertType(){return new zt(s(this,ke))}withPlugin(e){return new zt({...s(this,ke),executor:s(this,ke).executor.withPlugin(e)})}toOperationNode(){return s(this,ke).executor.transformQuery(s(this,ke).queryNode,s(this,ke).queryId)}compile(){return s(this,ke).executor.compileQuery(this.toOperationNode(),s(this,ke).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,ke).executor.executeQuery(e,s(this,ke).queryId);return s(this,ke).executor.adapter.supportsReturning&&r.returning?i.rows:[new Mg(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,ke).executor.stream(r,e,s(this,ke).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new zt({...s(this,ke),queryNode:Re.cloneWithExplain(s(this,ke).queryNode,e,r)}).execute()}};ke=new WeakMap;let Sa=zt;Me(Sa,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Bg{constructor(e){be(this,"numDeletedRows");this.numDeletedRows=e}}const Sp=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:gn.create(t)})}});var ve;const qt=class qt{constructor(e){P(this,ve,void 0);$(this,ve,p(e))}where(...e){return new qt({...s(this,ve),queryNode:Re.cloneWithWhere(s(this,ve).queryNode,Yt(e))})}whereRef(e,r,i){return new qt({...s(this,ve),queryNode:Re.cloneWithWhere(s(this,ve).queryNode,Wn(e,r,i))})}clearWhere(){return new qt({...s(this,ve),queryNode:Re.cloneWithoutWhere(s(this,ve).queryNode)})}using(e){return new qt({...s(this,ve),queryNode:da.cloneWithUsing(s(this,ve).queryNode,ka(e))})}innerJoin(...e){return new qt({...s(this,ve),queryNode:Re.cloneWithJoin(s(this,ve).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new qt({...s(this,ve),queryNode:Re.cloneWithJoin(s(this,ve).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new qt({...s(this,ve),queryNode:Re.cloneWithJoin(s(this,ve).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new qt({...s(this,ve),queryNode:Re.cloneWithJoin(s(this,ve).queryNode,pr("FullJoin",e))})}returning(e){return new qt({...s(this,ve),queryNode:Re.cloneWithReturning(s(this,ve).queryNode,ms(e))})}returningAll(e){return new qt({...s(this,ve),queryNode:Re.cloneWithReturning(s(this,ve).queryNode,tu(e))})}orderBy(e,r){return new qt({...s(this,ve),queryNode:da.cloneWithOrderByItems(s(this,ve).queryNode,pl([e,r]))})}limit(e){return new qt({...s(this,ve),queryNode:da.cloneWithLimit(s(this,ve).queryNode,Sp.create(e))})}$call(e){return e(this)}$if(e,r){return e?r(this):new qt({...s(this,ve)})}$castTo(){return new qt(s(this,ve))}$narrowType(){return new qt(s(this,ve))}$assertType(){return new qt(s(this,ve))}withPlugin(e){return new qt({...s(this,ve),executor:s(this,ve).executor.withPlugin(e)})}toOperationNode(){return s(this,ve).executor.transformQuery(s(this,ve).queryNode,s(this,ve).queryId)}compile(){return s(this,ve).executor.compileQuery(this.toOperationNode(),s(this,ve).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,ve).executor.executeQuery(e,s(this,ve).queryId);return s(this,ve).executor.adapter.supportsReturning&&r.returning?i.rows:[new Bg(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,ve).executor.stream(r,e,s(this,ve).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new qt({...s(this,ve),queryNode:Re.cloneWithExplain(s(this,ve).queryNode,e,r)}).execute()}};ve=new WeakMap;let oc=qt;Me(oc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Fg{constructor(e,r){be(this,"numUpdatedRows");be(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var qe;const St=class St{constructor(e){P(this,qe,void 0);$(this,qe,p(e))}where(...e){return new St({...s(this,qe),queryNode:Re.cloneWithWhere(s(this,qe).queryNode,Yt(e))})}whereRef(e,r,i){return new St({...s(this,qe),queryNode:Re.cloneWithWhere(s(this,qe).queryNode,Wn(e,r,i))})}clearWhere(){return new St({...s(this,qe),queryNode:Re.cloneWithoutWhere(s(this,qe).queryNode)})}from(e){return new St({...s(this,qe),queryNode:nc.cloneWithFromItems(s(this,qe).queryNode,ka(e))})}innerJoin(...e){return new St({...s(this,qe),queryNode:Re.cloneWithJoin(s(this,qe).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new St({...s(this,qe),queryNode:Re.cloneWithJoin(s(this,qe).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new St({...s(this,qe),queryNode:Re.cloneWithJoin(s(this,qe).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new St({...s(this,qe),queryNode:Re.cloneWithJoin(s(this,qe).queryNode,pr("FullJoin",e))})}set(e){return new St({...s(this,qe),queryNode:nc.cloneWithUpdates(s(this,qe).queryNode,Vf(e))})}returning(e){return new St({...s(this,qe),queryNode:Re.cloneWithReturning(s(this,qe).queryNode,ms(e))})}returningAll(){return new St({...s(this,qe),queryNode:Re.cloneWithReturning(s(this,qe).queryNode,tu())})}$call(e){return e(this)}$if(e,r){return e?r(this):new St({...s(this,qe)})}$castTo(){return new St(s(this,qe))}$narrowType(){return new St(s(this,qe))}$assertType(){return new St(s(this,qe))}withPlugin(e){return new St({...s(this,qe),executor:s(this,qe).executor.withPlugin(e)})}toOperationNode(){return s(this,qe).executor.transformQuery(s(this,qe).queryNode,s(this,qe).queryId)}compile(){return s(this,qe).executor.compileQuery(this.toOperationNode(),s(this,qe).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,qe).executor.executeQuery(e,s(this,qe).queryId);return s(this,qe).executor.adapter.supportsReturning&&r.returning?i.rows:[new Fg(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0),i.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,qe).executor.stream(r,e,s(this,qe).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new St({...s(this,qe),queryNode:Re.cloneWithExplain(s(this,qe).queryNode,e,r)}).execute()}};qe=new WeakMap;let ac=St;Me(ac,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Kh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:pi.create(t),columns:e?p(e.map(vt.create)):void 0})}}),uc=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var qn;const Tc=class Tc{constructor(e){P(this,qn,void 0);$(this,qn,p(e))}materialized(){return new Tc({...s(this,qn),node:uc.cloneWith(s(this,qn).node,{materialized:!0})})}notMaterialized(){return new Tc({...s(this,qn),node:uc.cloneWith(s(this,qn).node,{materialized:!1})})}toOperationNode(){return s(this,qn).node}};qn=new WeakMap;let cc=Tc;Me(cc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Jh(t,e){const r=e(Gg()).toOperationNode();return qr(t)?t(Ug(r)).toOperationNode():uc.create(Tp(t),r)}function Ug(t){return e=>new cc({node:uc.create(Tp(e),t)})}function Tp(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(a=>a.trim());return Kh.create(r,i)}else return Kh.create(t)}const Au=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Hh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function $g(t){let e="";for(let r=0;r<t;++r)e+=Qg();return e}function Qg(){return Hh[~~(Math.random()*Hh.length)]}function Je(){return new jg}var Vs;class jg{constructor(){P(this,Vs,void 0)}get queryId(){return s(this,Vs)===void 0&&$(this,Vs,$g(8)),s(this,Vs)}}Vs=new WeakMap;var kc;class zf{constructor(){be(this,"nodeStack",[]);P(this,kc,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),p(r)}transformNodeImpl(e){return s(this,kc)[e.kind](e)}transformNodeList(e){return e&&p(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}kc=new WeakMap;const Vg=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var zs,Ki,Ji,Ac,kp,Wc,Ap,Rc,Wp,Hi,aa,Pa,tf,Dc,Rp;class zg extends zf{constructor(r){super();P(this,Ac);P(this,Wc);P(this,Rc);P(this,Hi);P(this,Pa);P(this,Dc);P(this,zs,void 0);P(this,Ki,new Set);P(this,Ji,new Set);$(this,zs,r)}transformNodeImpl(r){if(!_e(this,Ac,kp).call(this,r))return super.transformNodeImpl(r);const i=_e(this,Rc,Wp).call(this,r);for(const y of i)s(this,Ji).add(y);const a=_e(this,Wc,Ap).call(this,r);for(const y of a)s(this,Ki).add(y);const l=super.transformNodeImpl(r);for(const y of a)s(this,Ki).delete(y);for(const y of i)s(this,Ji).delete(y);return l}transformSchemableIdentifier(r){const i=super.transformSchemableIdentifier(r);return i.schema||!s(this,Ki).has(r.identifier.name)?i:{...i,schema:dt.create(s(this,zs))}}transformReferences(r){const i=super.transformReferences(r);return i.table.table.schema?i:{...i,table:pi.createWithSchema(s(this,zs),i.table.table.identifier.name)}}}zs=new WeakMap,Ki=new WeakMap,Ji=new WeakMap,Ac=new WeakSet,kp=function(r){return r.kind in Vg},Wc=new WeakSet,Ap=function(r){const i=new Set;if("name"in r&&r.name&&wi.is(r.name)&&_e(this,Pa,tf).call(this,r.name,i),"from"in r&&r.from)for(const a of r.from.froms)_e(this,Hi,aa).call(this,a,i);if("into"in r&&r.into&&_e(this,Hi,aa).call(this,r.into,i),"table"in r&&r.table&&_e(this,Hi,aa).call(this,r.table,i),"joins"in r&&r.joins)for(const a of r.joins)_e(this,Hi,aa).call(this,a.table,i);return i},Rc=new WeakSet,Wp=function(r){const i=new Set;return"with"in r&&r.with&&_e(this,Dc,Rp).call(this,r.with,i),i},Hi=new WeakSet,aa=function(r,i){const a=pi.is(r)?r:Ni.is(r)&&pi.is(r.node)?r.node:null;a&&_e(this,Pa,tf).call(this,a.table,i)},Pa=new WeakSet,tf=function(r,i){const a=r.identifier.name;!s(this,Ki).has(a)&&!s(this,Ji).has(a)&&i.add(a)},Dc=new WeakSet,Rp=function(r,i){for(const a of r.expressions){const l=a.name.table.table.identifier.name;s(this,Ji).has(l)||i.add(l)}};var La;class ru{constructor(e){P(this,La,void 0);$(this,La,new zg(e))}transformQuery(e){return s(this,La).transformNode(e.node)}async transformResult(e){return e.result}}La=new WeakMap;var Ke;const Qi=class Qi{constructor(e){P(this,Ke,void 0);$(this,Ke,p(e))}selectFrom(e){return hc({queryId:Je(),executor:s(this,Ke).executor,queryNode:Pe.createFrom(ka(e),s(this,Ke).withNode)})}selectNoFrom(e){return hc({queryId:Je(),executor:s(this,Ke).executor,queryNode:Pe.cloneWithSelections(Pe.create(s(this,Ke).withNode),ms(e))})}insertInto(e){return new Sa({queryId:Je(),executor:s(this,Ke).executor,queryNode:hn.create(mr(e),s(this,Ke).withNode)})}replaceInto(e){return new Sa({queryId:Je(),executor:s(this,Ke).executor,queryNode:hn.create(mr(e),s(this,Ke).withNode,!0)})}deleteFrom(e){return new oc({queryId:Je(),executor:s(this,Ke).executor,queryNode:da.create(ka(e),s(this,Ke).withNode)})}updateTable(e){return new ac({queryId:Je(),executor:s(this,Ke).executor,queryNode:nc.create(Aa(e),s(this,Ke).withNode)})}with(e,r){const i=Jh(e,r);return new Qi({...s(this,Ke),withNode:s(this,Ke).withNode?Au.cloneWithExpression(s(this,Ke).withNode,i):Au.create(i)})}withRecursive(e,r){const i=Jh(e,r);return new Qi({...s(this,Ke),withNode:s(this,Ke).withNode?Au.cloneWithExpression(s(this,Ke).withNode,i):Au.create(i,{recursive:!0})})}withPlugin(e){return new Qi({...s(this,Ke),executor:s(this,Ke).executor.withPlugin(e)})}withoutPlugins(){return new Qi({...s(this,Ke),executor:s(this,Ke).executor.withoutPlugins()})}withSchema(e){return new Qi({...s(this,Ke),executor:s(this,Ke).executor.withPluginAtFront(new ru(e))})}};Ke=new WeakMap;let lc=Qi;var Ma,Ks,Js;class Gh{constructor(){P(this,Ma,void 0);P(this,Ks,void 0);P(this,Js,void 0);be(this,"resolve",e=>{s(this,Ks)&&s(this,Ks).call(this,e)});be(this,"reject",e=>{s(this,Js)&&s(this,Js).call(this,e)});$(this,Ma,new Promise((e,r)=>{$(this,Js,r),$(this,Ks,e)}))}get promise(){return s(this,Ma)}}Ma=new WeakMap,Ks=new WeakMap,Js=new WeakMap;const Yh=new Set;function Kg(t){Yh.has(t)||(Yh.add(t),console.log(t))}const Jg=p([]);var Gi,Ba,rf;class Dp{constructor(e=Jg){P(this,Ba);P(this,Gi,void 0);$(this,Gi,e)}get plugins(){return s(this,Gi)}transformQuery(e,r){for(const i of s(this,Gi)){const a=i.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{const a=await i.executeQuery(e),l=await _e(this,Ba,rf).call(this,a,r);return Hg(a,l),l})}async*stream(e,r,i){const a=new Gh,l=new Gh;this.provideConnection(async g=>(a.resolve(g),await l.promise)).catch(g=>a.reject(g));const y=await a.promise;try{for await(const g of y.streamQuery(e,r))yield await _e(this,Ba,rf).call(this,g,i)}finally{l.resolve()}}}Gi=new WeakMap,Ba=new WeakSet,rf=async function(e,r){for(const i of s(this,Gi))e=await i.transformResult({result:e,queryId:r});return e};function Hg(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Kg("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Rs extends Dp{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Rs([...this.plugins,e])}withPlugins(e){return new Rs([...this.plugins,...e])}withPluginAtFront(e){return new Rs([e,...this.plugins])}withoutPlugins(){return new Rs([])}}const Kf=new Rs;function Gg(){return new lc({executor:Kf})}function Yg(t,e){return new tc({joinNode:la.create(t,Aa(e))})}function Xg(){return new rc({overNode:ef.create()})}function pr(t,e){if(e.length===3)return eb(t,e[0],e[1],e[2]);if(e.length===2)return Zg(t,e[0],e[1]);throw new Error("not implemented")}function Zg(t,e,r){return r(Yg(t,e)).toOperationNode()}function eb(t,e,r,i){return la.createWithOn(t,Aa(e),Wn(r,"=",i))}const tb=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:gn.create(t)})}}),rb=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function nb(t){return t=qr(t)?t(Co()):t,Ia(t).map(rb.create)}const Pp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return p({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Is(t,e,r){return qr(e)&&(e=e(Gf())),yi(e)||(e=[e]),e.map(i=>Pp.create(t,Io(i),r))}var ri;const th=class th{constructor(e){P(this,ri,void 0);$(this,ri,e)}get expressionType(){}as(e){return new Jf(this,e)}or(...e){return new nf(Eo.create(s(this,ri),Yt(e)))}and(...e){return new sf(gi.create(s(this,ri),Yt(e)))}$castTo(){return new th(s(this,ri))}toOperationNode(){return s(this,ri)}};ri=new WeakMap;let st=th;var Hs,ni;class Jf{constructor(e,r){P(this,Hs,void 0);P(this,ni,void 0);$(this,Hs,e),$(this,ni,r)}get expression(){return s(this,Hs)}get alias(){return s(this,ni)}toOperationNode(){return Ni.create(s(this,Hs).toOperationNode(),kr(s(this,ni))?s(this,ni).toOperationNode():dt.create(s(this,ni)))}}Hs=new WeakMap,ni=new WeakMap;var Yi;const Pc=class Pc{constructor(e){P(this,Yi,void 0);$(this,Yi,e)}get expressionType(){}as(e){return new Jf(this,e)}or(...e){return new Pc(Eo.create(s(this,Yi),Yt(e)))}$castTo(){return new Pc(s(this,Yi))}toOperationNode(){return No.create(s(this,Yi))}};Yi=new WeakMap;let nf=Pc;var Xi;const Lc=class Lc{constructor(e){P(this,Xi,void 0);$(this,Xi,e)}get expressionType(){}as(e){return new Jf(this,e)}and(...e){return new Lc(gi.create(s(this,Xi),Yt(e)))}$castTo(){return new Lc(s(this,Xi))}toOperationNode(){return No.create(s(this,Xi))}};Xi=new WeakMap;let sf=Lc;var Y;const xe=class xe{constructor(e){P(this,Y,void 0);$(this,Y,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithWhere(s(this,Y).queryNode,Yt(e))})}whereRef(e,r,i){return new xe({...s(this,Y),queryNode:Re.cloneWithWhere(s(this,Y).queryNode,Wn(e,r,i))})}having(...e){return new xe({...s(this,Y),queryNode:Pe.cloneWithHaving(s(this,Y).queryNode,Yt(e))})}havingRef(e,r,i){return new xe({...s(this,Y),queryNode:Pe.cloneWithHaving(s(this,Y).queryNode,Wn(e,r,i))})}select(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSelections(s(this,Y).queryNode,ms(e))})}distinctOn(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithDistinctOn(s(this,Y).queryNode,Ia(e))})}modifyFront(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithFrontModifier(s(this,Y).queryNode,vn.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.createWithExpression(e.toOperationNode()))})}distinct(){return new xe({...s(this,Y),queryNode:Pe.cloneWithFrontModifier(s(this,Y).queryNode,vn.create("Distinct"))})}forUpdate(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("ForUpdate"))})}forShare(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("ForShare"))})}forKeyShare(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("ForKeyShare"))})}forNoKeyUpdate(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("ForNoKeyUpdate"))})}skipLocked(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("SkipLocked"))})}noWait(){return new xe({...s(this,Y),queryNode:Pe.cloneWithEndModifier(s(this,Y).queryNode,vn.create("NoWait"))})}selectAll(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSelections(s(this,Y).queryNode,tu(e))})}innerJoin(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("InnerJoin",e))})}leftJoin(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("LeftJoin",e))})}rightJoin(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("RightJoin",e))})}fullJoin(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("FullJoin",e))})}innerJoinLateral(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("LateralInnerJoin",e))})}leftJoinLateral(...e){return new xe({...s(this,Y),queryNode:Re.cloneWithJoin(s(this,Y).queryNode,pr("LateralLeftJoin",e))})}orderBy(...e){return new xe({...s(this,Y),queryNode:Pe.cloneWithOrderByItems(s(this,Y).queryNode,pl(e))})}groupBy(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithGroupByItems(s(this,Y).queryNode,nb(e))})}limit(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithLimit(s(this,Y).queryNode,Sp.create(e))})}offset(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithOffset(s(this,Y).queryNode,tb.create(e))})}union(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("union",e,!1))})}unionAll(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("union",e,!0))})}intersect(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("intersect",e,!1))})}intersectAll(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("intersect",e,!0))})}except(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("except",e,!1))})}exceptAll(e){return new xe({...s(this,Y),queryNode:Pe.cloneWithSetOperations(s(this,Y).queryNode,Is("except",e,!0))})}as(e){return new Lp(this,e)}clearSelect(){return new xe({...s(this,Y),queryNode:Pe.cloneWithoutSelections(s(this,Y).queryNode)})}clearWhere(){return new xe({...s(this,Y),queryNode:Re.cloneWithoutWhere(s(this,Y).queryNode)})}clearLimit(){return new xe({...s(this,Y),queryNode:Pe.cloneWithoutLimit(s(this,Y).queryNode)})}clearOffset(){return new xe({...s(this,Y),queryNode:Pe.cloneWithoutOffset(s(this,Y).queryNode)})}clearOrderBy(){return new xe({...s(this,Y),queryNode:Pe.cloneWithoutOrderBy(s(this,Y).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new xe({...s(this,Y)})}$castTo(){return new xe(s(this,Y))}$narrowType(){return new xe(s(this,Y))}$assertType(){return new xe(s(this,Y))}$asTuple(){return new st(this.toOperationNode())}withPlugin(e){return new xe({...s(this,Y),executor:s(this,Y).executor.withPlugin(e)})}toOperationNode(){return s(this,Y).executor.transformQuery(s(this,Y).queryNode,s(this,Y).queryId)}compile(){return s(this,Y).executor.compileQuery(this.toOperationNode(),s(this,Y).queryId)}async execute(){const e=this.compile();return(await s(this,Y).executor.executeQuery(e,s(this,Y).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=ml){const r=await this.executeTakeFirst();if(r===void 0)throw yl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,Y).executor.stream(r,e,s(this,Y).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new xe({...s(this,Y),queryNode:Re.cloneWithExplain(s(this,Y).queryNode,e,r)}).execute()}};Y=new WeakMap;let fc=xe;Me(fc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function hc(t){return new fc(t)}var Gs,Ys;class Lp{constructor(e,r){P(this,Gs,void 0);P(this,Ys,void 0);$(this,Gs,e),$(this,Ys,r)}get expression(){return s(this,Gs)}get alias(){return s(this,Ys)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Ni.create(s(this,Gs).toOperationNode(),dt.create(s(this,Ys)))}}Gs=new WeakMap,Ys=new WeakMap;Me(Lp,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ds=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?dr.cloneWithOperation(t.filter,"And",e):dr.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?dr.cloneWithOperation(t.filter,"Or",e):dr.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),ib=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var Nr;const Ls=class Ls{constructor(e){P(this,Nr,void 0);$(this,Nr,p(e))}get expressionType(){}as(e){return new sb(this,e)}distinct(){return new Ls({...s(this,Nr),aggregateFunctionNode:Ds.cloneWithDistinct(s(this,Nr).aggregateFunctionNode)})}filterWhere(...e){return new Ls({...s(this,Nr),aggregateFunctionNode:Ds.cloneWithFilter(s(this,Nr).aggregateFunctionNode,Yt(e))})}filterWhereRef(e,r,i){return new Ls({...s(this,Nr),aggregateFunctionNode:Ds.cloneWithFilter(s(this,Nr).aggregateFunctionNode,Wn(e,r,i))})}over(e){const r=Xg();return new Ls({...s(this,Nr),aggregateFunctionNode:Ds.cloneWithOver(s(this,Nr).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return s(this,Nr).aggregateFunctionNode}};Nr=new WeakMap;let Ta=Ls;Me(Ta,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Xs,Zs;class sb{constructor(e,r){P(this,Xs,void 0);P(this,Zs,void 0);$(this,Xs,e),$(this,Zs,r)}get expression(){return s(this,Xs)}get alias(){return s(this,Zs)}toOperationNode(){return Ni.create(s(this,Xs).toOperationNode(),dt.create(s(this,Zs)))}}Xs=new WeakMap,Zs=new WeakMap;function Mp(){const t=(r,i)=>new st(ib.create(r,Ia(i))),e=(r,i)=>new Ta({aggregateFunctionNode:Ds.create(r,i?Ia(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...i){return t("coalesce",[r,...i])},count(r){return e("count",[r])},countAll(r){return new Ta({aggregateFunctionNode:Ds.create("count",tu(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])}})}const ob=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function ab(t,e){return ob.create(ps.create(t),Jr(e))}const Hf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),yn=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Hf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var eo;class Bp{constructor(e){P(this,eo,void 0);$(this,eo,p(e))}when(...e){return new Fp({...s(this,eo),node:yn.cloneWithWhen(s(this,eo).node,Hf.create(Yt(e)))})}}eo=new WeakMap;var to;class Fp{constructor(e){P(this,to,void 0);$(this,to,p(e))}then(e){return new ub({...s(this,to),node:yn.cloneWithThen(s(this,to).node,Qf(e)?jf(e):rr(e))})}}to=new WeakMap;var an;class ub{constructor(e){P(this,an,void 0);$(this,an,p(e))}when(...e){return new Fp({...s(this,an),node:yn.cloneWithWhen(s(this,an).node,Hf.create(Yt(e)))})}else(e){return new cb({...s(this,an),node:yn.cloneWith(s(this,an).node,{else:Qf(e)?jf(e):rr(e)})})}end(){return new st(yn.cloneWith(s(this,an).node,{isStatement:!1}))}endCase(){return new st(yn.cloneWith(s(this,an).node,{isStatement:!0}))}}an=new WeakMap;var ro;class cb{constructor(e){P(this,ro,void 0);$(this,ro,p(e))}end(){return new st(yn.cloneWith(s(this,ro).node,{isStatement:!1}))}endCase(){return new st(yn.cloneWith(s(this,ro).node,{isStatement:!0}))}}ro=new WeakMap;const lb=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var ii,Fa,af;class of{constructor(e){P(this,Fa);P(this,ii,void 0);$(this,ii,e)}at(e){return _e(this,Fa,af).call(this,"ArrayLocation",e)}key(e){return _e(this,Fa,af).call(this,"Member",e)}}ii=new WeakMap,Fa=new WeakSet,af=function(e,r){return new fb(Gl.cloneWithTraversal(s(this,ii),Yl.is(s(this,ii).traversal)?Yl.cloneWithLeg(s(this,ii).traversal,lb.create(e,r)):_p.cloneWithValue(s(this,ii).traversal,gn.createImmediate(r))))};var no;class fb extends of{constructor(r){super(r);P(this,no,void 0);$(this,no,r)}get expressionType(){}as(r){return new hb(this,r)}$castTo(){return new of(s(this,no))}toOperationNode(){return s(this,no)}}no=new WeakMap;var io,si;class hb{constructor(e,r){P(this,io,void 0);P(this,si,void 0);$(this,io,e),$(this,si,r)}get expression(){return s(this,io)}get alias(){return s(this,si)}toOperationNode(){return Ni.create(s(this,io).toOperationNode(),kr(s(this,si))?s(this,si).toOperationNode():dt.create(s(this,si)))}}io=new WeakMap,si=new WeakMap;const Xh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Gf(t=Kf){function e(a,l,y){return new st(fa(a,l,y))}function r(a,l){return new st(ab(a,l))}const i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return hc({queryId:Je(),executor:t,queryNode:Pe.createFrom(ka(a))})},selectNoFrom(a){return hc({queryId:Je(),executor:t,queryNode:Pe.cloneWithSelections(Pe.create(),ms(a))})},case(a){return new Bp({node:yn.create(fs(a)?void 0:Jr(a))})},ref(a,l){return fs(l)?new st(An(a)):new of(vg(a,l))},val(a){return new st(Ep(a))},refTuple(...a){return new st(Xh.create(a.map(Jr)))},tuple(...a){return new st(Xh.create(a.map(rr)))},lit(a){return new st(jf(a))},cmpr(a,l,y){return new st(fa(a,l,y))},bxp(a,l,y){return new st(fa(a,l,y))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,y){return new st(Ca.create(Jr(a),ps.create("between"),gi.create(rr(l),rr(y))))},betweenSymmetric(a,l,y){return new st(Ca.create(Jr(a),ps.create("between symmetric"),gi.create(rr(l),rr(y))))},and(a){return yi(a)?new st(Xl(a,"and")):new st(Mh(a,"and"))},or(a){return yi(a)?new st(Xl(a,"or")):new st(Mh(a,"or"))},parens(...a){const l=Yt(a);return No.is(l)?new st(l):new st(No.create(l))},withSchema(a){return Gf(t.withPluginAtFront(new ru(a)))}});return i.fn=Mp(),i.eb=i,i}function Co(t){return Gf()}function Io(t){if(kr(t))return t.toOperationNode();if(qr(t))return t(Co()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Up(t){if(kr(t))return t.toOperationNode();if(qr(t))return t(Co()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function nu(t){return fg(t)||hg(t)||qr(t)}function ka(t){return yi(t)?t.map(e=>Aa(e)):[Aa(t)]}function Aa(t){return wn(t)?db(t):Up(t)}function db(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map($p);return Ni.create(mr(r),dt.create(i))}else return mr(t)}function mr(t){const e=".";if(t.includes(e)){const[r,i]=t.split(e).map($p);return pi.createWithSchema(r,i)}else return pi.create(t)}function $p(t){return t.trim()}const Qp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),gt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:vt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),jp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:vt.create(t)})}}),Vp=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:vt.create(t),renameTo:vt.create(e)})}}),Yf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?dt.create(e):void 0})}}),pb=["no action","restrict","cascade","set null","set default"],Uu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function zp(t){return kr(t)?t.toOperationNode():gn.createImmediate(t)}const Wu=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),mb=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function dc(t){if(pb.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ye;const At=class At{constructor(e){P(this,Ye,void 0);$(this,Ye,e)}autoIncrement(){return new At(gt.cloneWith(s(this,Ye),{autoIncrement:!0}))}primaryKey(){return new At(gt.cloneWith(s(this,Ye),{primaryKey:!0}))}references(e){const r=An(e);if(!r.table||Ff.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new At(gt.cloneWith(s(this,Ye),{references:Uu.create(r.table,[r.column])}))}onDelete(e){if(!s(this,Ye).references)throw new Error("on delete constraint can only be added for foreign keys");return new At(gt.cloneWith(s(this,Ye),{references:Uu.cloneWithOnDelete(s(this,Ye).references,dc(e))}))}onUpdate(e){if(!s(this,Ye).references)throw new Error("on update constraint can only be added for foreign keys");return new At(gt.cloneWith(s(this,Ye),{references:Uu.cloneWithOnUpdate(s(this,Ye).references,dc(e))}))}unique(){return new At(gt.cloneWith(s(this,Ye),{unique:!0}))}notNull(){return new At(gt.cloneWith(s(this,Ye),{notNull:!0}))}unsigned(){return new At(gt.cloneWith(s(this,Ye),{unsigned:!0}))}defaultTo(e){return new At(gt.cloneWith(s(this,Ye),{defaultTo:mb.create(zp(e))}))}check(e){return new At(gt.cloneWith(s(this,Ye),{check:Yf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new At(gt.cloneWith(s(this,Ye),{generated:Wu.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new At(gt.cloneWith(s(this,Ye),{generated:Wu.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new At(gt.cloneWith(s(this,Ye),{generated:Wu.create({identity:!0,byDefault:!0})}))}stored(){if(!s(this,Ye).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new At(gt.cloneWith(s(this,Ye),{generated:Wu.cloneWith(s(this,Ye).generated,{stored:!0})}))}modifyFront(e){return new At(gt.cloneWithFrontModifier(s(this,Ye),e.toOperationNode()))}modifyEnd(e){return new At(gt.cloneWithEndModifier(s(this,Ye),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return s(this,Ye)}};Ye=new WeakMap;let bi=At;Me(bi,"don't await ColumnDefinitionBuilder instances directly.");const Kp=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),yb=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function _o(t){return kr(t)?t.toOperationNode():yb.create(t)}const pc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Uu.create(e,r),name:i?dt.create(i):void 0})},cloneWith(t,e){return p({...t,...e})}});var Zi;const Mc=class Mc{constructor(e){P(this,Zi,void 0);$(this,Zi,e)}onDelete(e){return new Mc(pc.cloneWith(s(this,Zi),{onDelete:dc(e)}))}onUpdate(e){return new Mc(pc.cloneWith(s(this,Zi),{onUpdate:dc(e)}))}$call(e){return e(this)}toOperationNode(){return s(this,Zi)}};Zi=new WeakMap;let Wa=Mc;Me(Wa,"don't await ForeignKeyConstraintBuilder instances directly.");const $u=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),Jp=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(vt.create)),name:e?dt.create(e):void 0})}}),Qu=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:dt.create(t)})},cloneWith(t,e){return p({...t,...e})}}),na=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return p({kind:"AlterColumnNode",column:vt.create(t),[e]:r})}});var En;class Xf{constructor(e){P(this,En,void 0);$(this,En,e)}setDataType(e){return new ia(na.create(s(this,En),"dataType",_o(e)))}setDefault(e){return new ia(na.create(s(this,En),"setDefault",zp(e)))}dropDefault(){return new ia(na.create(s(this,En),"dropDefault",!0))}setNotNull(){return new ia(na.create(s(this,En),"setNotNull",!0))}dropNotNull(){return new ia(na.create(s(this,En),"dropNotNull",!0))}$call(e){return e(this)}}En=new WeakMap;var Ua;class ia{constructor(e){P(this,Ua,void 0);$(this,Ua,e)}toOperationNode(){return s(this,Ua)}}Ua=new WeakMap;var $r;class Ts{constructor(e){P(this,$r,void 0);$(this,$r,p(e))}toOperationNode(){return s(this,$r).executor.transformQuery(s(this,$r).node,s(this,$r).queryId)}compile(){return s(this,$r).executor.compileQuery(this.toOperationNode(),s(this,$r).queryId)}async execute(){await s(this,$r).executor.executeQuery(this.compile(),s(this,$r).queryId)}}$r=new WeakMap;Me(Ts,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Kt;const Bc=class Bc{constructor(e){P(this,Kt,void 0);$(this,Kt,p(e))}onDelete(e){return new Bc({...s(this,Kt),constraintBuilder:s(this,Kt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Bc({...s(this,Kt),constraintBuilder:s(this,Kt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return s(this,Kt).executor.transformQuery(Nt.cloneWithTableProps(s(this,Kt).node,{addConstraint:$u.create(s(this,Kt).constraintBuilder.toOperationNode())}),s(this,Kt).queryId)}compile(){return s(this,Kt).executor.compileQuery(this.toOperationNode(),s(this,Kt).queryId)}async execute(){await s(this,Kt).executor.executeQuery(this.compile(),s(this,Kt).queryId)}};Kt=new WeakMap;let mc=Bc;Me(mc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Et;const ya=class ya{constructor(e){P(this,Et,void 0);$(this,Et,p(e))}ifExists(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{ifExists:!0})})})}cascade(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ya({...s(this,Et),node:Nt.cloneWithTableProps(s(this,Et).node,{dropConstraint:Qu.cloneWith(s(this,Et).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return s(this,Et).executor.transformQuery(s(this,Et).node,s(this,Et).queryId)}compile(){return s(this,Et).executor.compileQuery(this.toOperationNode(),s(this,Et).queryId)}async execute(){await s(this,Et).executor.executeQuery(this.compile(),s(this,Et).queryId)}};Et=new WeakMap;let yc=ya;Me(yc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Hp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(vt.create)),name:e?dt.create(e):void 0})}});var Xe;class Gp{constructor(e){P(this,Xe,void 0);$(this,Xe,p(e))}renameTo(e){return new Ts({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{renameTo:mr(e)})})}setSchema(e){return new Ts({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{setSchema:dt.create(e)})})}alterColumn(e,r){const i=r(new Xf(e));return new ti({...s(this,Xe),node:Nt.cloneWithColumnAlteration(s(this,Xe).node,i.toOperationNode())})}dropColumn(e){return new ti({...s(this,Xe),node:Nt.cloneWithColumnAlteration(s(this,Xe).node,jp.create(e))})}renameColumn(e,r){return new ti({...s(this,Xe),node:Nt.cloneWithColumnAlteration(s(this,Xe).node,Vp.create(e,r))})}addColumn(e,r,i=bo){const a=i(new bi(gt.create(e,_o(r))));return new ti({...s(this,Xe),node:Nt.cloneWithColumnAlteration(s(this,Xe).node,Qp.create(a.toOperationNode()))})}modifyColumn(e,r,i=bo){const a=i(new bi(gt.create(e,_o(r))));return new ti({...s(this,Xe),node:Nt.cloneWithColumnAlteration(s(this,Xe).node,Kp.create(a.toOperationNode()))})}addUniqueConstraint(e,r){return new Ts({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{addConstraint:$u.create(Jp.create(r,e))})})}addCheckConstraint(e,r){return new Ts({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{addConstraint:$u.create(Yf.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,a){return new mc({...s(this,Xe),constraintBuilder:new Wa(pc.create(r.map(vt.create),mr(i),a.map(vt.create),e))})}addPrimaryKeyConstraint(e,r){return new Ts({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{addConstraint:$u.create(Hp.create(r,e))})})}dropConstraint(e){return new yc({...s(this,Xe),node:Nt.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Qu.create(e)})})}$call(e){return e(this)}}Xe=new WeakMap;var wt;const ji=class ji{constructor(e){P(this,wt,void 0);$(this,wt,p(e))}alterColumn(e,r){const i=r(new Xf(e));return new ji({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,i.toOperationNode())})}dropColumn(e){return new ji({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,jp.create(e))})}renameColumn(e,r){return new ji({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,Vp.create(e,r))})}addColumn(e,r,i=bo){const a=i(new bi(gt.create(e,_o(r))));return new ji({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,Qp.create(a.toOperationNode()))})}modifyColumn(e,r,i=bo){const a=i(new bi(gt.create(e,_o(r))));return new ji({...s(this,wt),node:Nt.cloneWithColumnAlteration(s(this,wt).node,Kp.create(a.toOperationNode()))})}toOperationNode(){return s(this,wt).executor.transformQuery(s(this,wt).node,s(this,wt).queryId)}compile(){return s(this,wt).executor.compileQuery(this.toOperationNode(),s(this,wt).queryId)}async execute(){await s(this,wt).executor.executeQuery(this.compile(),s(this,wt).queryId)}};wt=new WeakMap;let ti=ji;Me(Gp,"don't await AlterTableBuilder instances");Me(Xf,"don't await AlterColumnBuilder instances");Me(ti,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Yp extends zf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var Ze;const sn=class sn{constructor(e){P(this,Ze,void 0);$(this,Ze,p(e))}ifNotExists(){return new sn({...s(this,Ze),node:Gn.cloneWith(s(this,Ze).node,{ifNotExists:!0})})}unique(){return new sn({...s(this,Ze),node:Gn.cloneWith(s(this,Ze).node,{unique:!0})})}on(e){return new sn({...s(this,Ze),node:Gn.cloneWith(s(this,Ze).node,{table:mr(e)})})}column(e){return new sn({...s(this,Ze),node:Gn.cloneWithColumns(s(this,Ze).node,[Lh(e)])})}columns(e){return new sn({...s(this,Ze),node:Gn.cloneWithColumns(s(this,Ze).node,e.map(Lh))})}expression(e){return new sn({...s(this,Ze),node:Gn.cloneWithColumns(s(this,Ze).node,[e.toOperationNode()])})}using(e){return new sn({...s(this,Ze),node:Gn.cloneWith(s(this,Ze).node,{using:tr.createWithSql(e)})})}where(...e){const r=new Yp;return new sn({...s(this,Ze),node:Re.cloneWithWhere(s(this,Ze).node,r.transformNode(Yt(e)))})}$call(e){return e(this)}toOperationNode(){return s(this,Ze).executor.transformQuery(s(this,Ze).node,s(this,Ze).queryId)}compile(){return s(this,Ze).executor.compileQuery(this.toOperationNode(),s(this,Ze).queryId)}async execute(){await s(this,Ze).executor.executeQuery(this.compile(),s(this,Ze).queryId)}};Ze=new WeakMap;let wc=sn;Me(wc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var vr;const rh=class rh{constructor(e){P(this,vr,void 0);$(this,vr,p(e))}ifNotExists(){return new rh({...s(this,vr),node:wp.cloneWith(s(this,vr).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,vr).executor.transformQuery(s(this,vr).node,s(this,vr).queryId)}compile(){return s(this,vr).executor.compileQuery(this.toOperationNode(),s(this,vr).queryId)}async execute(){await s(this,vr).executor.executeQuery(this.compile(),s(this,vr).queryId)}};vr=new WeakMap;let gc=rh;Me(gc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function wb(t){if(lg.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Ue;const Tr=class Tr{constructor(e){P(this,Ue,void 0);$(this,Ue,p(e))}temporary(){return new Tr({...s(this,Ue),node:Mr.cloneWith(s(this,Ue).node,{temporary:!0})})}onCommit(e){return new Tr({...s(this,Ue),node:Mr.cloneWith(s(this,Ue).node,{onCommit:wb(e)})})}ifNotExists(){return new Tr({...s(this,Ue),node:Mr.cloneWith(s(this,Ue).node,{ifNotExists:!0})})}addColumn(e,r,i=bo){const a=i(new bi(gt.create(e,_o(r))));return new Tr({...s(this,Ue),node:Mr.cloneWithColumn(s(this,Ue).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Tr({...s(this,Ue),node:Mr.cloneWithConstraint(s(this,Ue).node,Hp.create(r,e))})}addUniqueConstraint(e,r){return new Tr({...s(this,Ue),node:Mr.cloneWithConstraint(s(this,Ue).node,Jp.create(r,e))})}addCheckConstraint(e,r){return new Tr({...s(this,Ue),node:Mr.cloneWithConstraint(s(this,Ue).node,Yf.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,a,l=bo){const y=l(new Wa(pc.create(r.map(vt.create),mr(i),a.map(vt.create),e)));return new Tr({...s(this,Ue),node:Mr.cloneWithConstraint(s(this,Ue).node,y.toOperationNode())})}modifyFront(e){return new Tr({...s(this,Ue),node:Mr.cloneWithFrontModifier(s(this,Ue).node,e.toOperationNode())})}modifyEnd(e){return new Tr({...s(this,Ue),node:Mr.cloneWithEndModifier(s(this,Ue).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return s(this,Ue).executor.transformQuery(s(this,Ue).node,s(this,Ue).queryId)}compile(){return s(this,Ue).executor.compileQuery(this.toOperationNode(),s(this,Ue).queryId)}async execute(){await s(this,Ue).executor.executeQuery(this.compile(),s(this,Ue).queryId)}};Ue=new WeakMap;let bc=Tr;Me(bc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Mt;const wa=class wa{constructor(e){P(this,Mt,void 0);$(this,Mt,p(e))}on(e){return new wa({...s(this,Mt),node:Fu.cloneWith(s(this,Mt).node,{table:mr(e)})})}ifExists(){return new wa({...s(this,Mt),node:Fu.cloneWith(s(this,Mt).node,{ifExists:!0})})}cascade(){return new wa({...s(this,Mt),node:Fu.cloneWith(s(this,Mt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Mt).executor.transformQuery(s(this,Mt).node,s(this,Mt).queryId)}compile(){return s(this,Mt).executor.compileQuery(this.toOperationNode(),s(this,Mt).queryId)}async execute(){await s(this,Mt).executor.executeQuery(this.compile(),s(this,Mt).queryId)}};Mt=new WeakMap;let Nc=wa;Me(Nc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Zt;const Fc=class Fc{constructor(e){P(this,Zt,void 0);$(this,Zt,p(e))}ifExists(){return new Fc({...s(this,Zt),node:Kl.cloneWith(s(this,Zt).node,{ifExists:!0})})}cascade(){return new Fc({...s(this,Zt),node:Kl.cloneWith(s(this,Zt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Zt).executor.transformQuery(s(this,Zt).node,s(this,Zt).queryId)}compile(){return s(this,Zt).executor.compileQuery(this.toOperationNode(),s(this,Zt).queryId)}async execute(){await s(this,Zt).executor.executeQuery(this.compile(),s(this,Zt).queryId)}};Zt=new WeakMap;let vc=Fc;Me(vc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var er;const Uc=class Uc{constructor(e){P(this,er,void 0);$(this,er,p(e))}ifExists(){return new Uc({...s(this,er),node:Jl.cloneWith(s(this,er).node,{ifExists:!0})})}cascade(){return new Uc({...s(this,er),node:Jl.cloneWith(s(this,er).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,er).executor.transformQuery(s(this,er).node,s(this,er).queryId)}compile(){return s(this,er).executor.compileQuery(this.toOperationNode(),s(this,er).queryId)}async execute(){await s(this,er).executor.executeQuery(this.compile(),s(this,er).queryId)}};er=new WeakMap;let _c=Uc;Me(_c,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Zn=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:wi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var $c;class gb{constructor(){P(this,$c,new Yp)}transformQuery(e){return s(this,$c).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}$c=new WeakMap;var lt;const ei=class ei{constructor(e){P(this,lt,void 0);$(this,lt,p(e))}temporary(){return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{temporary:!0})})}materialized(){return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{materialized:!0})})}ifNotExists(){return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{ifNotExists:!0})})}orReplace(){return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{orReplace:!0})})}columns(e){return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{columns:e.map(Op)})})}as(e){const r=e.withPlugin(new gb).toOperationNode();return new ei({...s(this,lt),node:Zn.cloneWith(s(this,lt).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return s(this,lt).executor.transformQuery(s(this,lt).node,s(this,lt).queryId)}compile(){return s(this,lt).executor.compileQuery(this.toOperationNode(),s(this,lt).queryId)}async execute(){await s(this,lt).executor.executeQuery(this.compile(),s(this,lt).queryId)}};lt=new WeakMap;let xc=ei;Me(xc,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const ju=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:wi.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Bt;const ga=class ga{constructor(e){P(this,Bt,void 0);$(this,Bt,p(e))}materialized(){return new ga({...s(this,Bt),node:ju.cloneWith(s(this,Bt).node,{materialized:!0})})}ifExists(){return new ga({...s(this,Bt),node:ju.cloneWith(s(this,Bt).node,{ifExists:!0})})}cascade(){return new ga({...s(this,Bt),node:ju.cloneWith(s(this,Bt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Bt).executor.transformQuery(s(this,Bt).node,s(this,Bt).queryId)}compile(){return s(this,Bt).executor.compileQuery(this.toOperationNode(),s(this,Bt).queryId)}async execute(){await s(this,Bt).executor.executeQuery(this.compile(),s(this,Bt).queryId)}};Bt=new WeakMap;let Oc=ga;Me(Oc,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Xp=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:$f.create(e.map(r=>gn.createImmediate(r)))})}});var _r;const nh=class nh{constructor(e){P(this,_r,void 0);$(this,_r,p(e))}toOperationNode(){return s(this,_r).executor.transformQuery(s(this,_r).node,s(this,_r).queryId)}asEnum(e){return new nh({...s(this,_r),node:Xp.cloneWithEnum(s(this,_r).node,e)})}$call(e){return e(this)}compile(){return s(this,_r).executor.compileQuery(this.toOperationNode(),s(this,_r).queryId)}async execute(){await s(this,_r).executor.executeQuery(this.compile(),s(this,_r).queryId)}};_r=new WeakMap;let qc=nh;Me(qc,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Zp=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var xr;const ih=class ih{constructor(e){P(this,xr,void 0);$(this,xr,p(e))}ifExists(){return new ih({...s(this,xr),node:Zp.cloneWith(s(this,xr).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,xr).executor.transformQuery(s(this,xr).node,s(this,xr).queryId)}compile(){return s(this,xr).executor.compileQuery(this.toOperationNode(),s(this,xr).queryId)}async execute(){await s(this,xr).executor.executeQuery(this.compile(),s(this,xr).queryId)}};xr=new WeakMap;let Ec=ih;Me(Ec,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Zh(t){const e=".";if(t.includes(e)){const r=t.split(e).map(bb);if(r.length===2)return wi.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return wi.create(t)}function bb(t){return t.trim()}var Wt;const ba=class ba{constructor(e){P(this,Wt,void 0);$(this,Wt,e)}createTable(e){return new bc({queryId:Je(),executor:s(this,Wt),node:Mr.create(mr(e))})}dropTable(e){return new _c({queryId:Je(),executor:s(this,Wt),node:Jl.create(mr(e))})}createIndex(e){return new wc({queryId:Je(),executor:s(this,Wt),node:Gn.create(e)})}dropIndex(e){return new Nc({queryId:Je(),executor:s(this,Wt),node:Fu.create(e)})}createSchema(e){return new gc({queryId:Je(),executor:s(this,Wt),node:wp.create(e)})}dropSchema(e){return new vc({queryId:Je(),executor:s(this,Wt),node:Kl.create(e)})}alterTable(e){return new Gp({queryId:Je(),executor:s(this,Wt),node:Nt.create(mr(e))})}createView(e){return new xc({queryId:Je(),executor:s(this,Wt),node:Zn.create(e)})}dropView(e){return new Oc({queryId:Je(),executor:s(this,Wt),node:ju.create(e)})}createType(e){return new qc({queryId:Je(),executor:s(this,Wt),node:Xp.create(Zh(e))})}dropType(e){return new Ec({queryId:Je(),executor:s(this,Wt),node:Zp.create(Zh(e))})}withPlugin(e){return new ba(s(this,Wt).withPlugin(e))}withoutPlugins(){return new ba(s(this,Wt).withoutPlugins())}withSchema(e){return new ba(s(this,Wt).withPluginAtFront(new ru(e)))}};Wt=new WeakMap;let uf=ba;class Nb{ref(e){return new bg(e)}}var so;class vb{constructor(e){P(this,so,void 0);$(this,so,e)}async provideConnection(e){const r=await s(this,so).acquireConnection();try{return await e(r)}finally{await s(this,so).releaseConnection(r)}}}so=new WeakMap;var un,cn,Cn;const Vi=class Vi extends Dp{constructor(r,i,a,l=[]){super(l);P(this,un,void 0);P(this,cn,void 0);P(this,Cn,void 0);$(this,un,r),$(this,cn,i),$(this,Cn,a)}get adapter(){return s(this,cn)}compileQuery(r){return s(this,un).compileQuery(r)}provideConnection(r){return s(this,Cn).provideConnection(r)}withPlugins(r){return new Vi(s(this,un),s(this,cn),s(this,Cn),[...this.plugins,...r])}withPlugin(r){return new Vi(s(this,un),s(this,cn),s(this,Cn),[...this.plugins,r])}withPluginAtFront(r){return new Vi(s(this,un),s(this,cn),s(this,Cn),[r,...this.plugins])}withConnectionProvider(r){return new Vi(s(this,un),s(this,cn),r,[...this.plugins])}withoutPlugins(){return new Vi(s(this,un),s(this,cn),s(this,Cn),[])}};un=new WeakMap,cn=new WeakMap,Cn=new WeakMap;let cf=Vi;function ed(){return typeof performance<"u"&&qr(performance.now)?performance.now():Date.now()}var Qr,oi,In,oo,Sn,$a,Qc,em,jc,tm,Vc,rm,zc,nm,Qa,lf;class _b{constructor(e,r){P(this,Qc);P(this,jc);P(this,Vc);P(this,zc);P(this,Qa);P(this,Qr,void 0);P(this,oi,void 0);P(this,In,void 0);P(this,oo,void 0);P(this,Sn,void 0);P(this,$a,new WeakSet);$(this,oo,!1),$(this,Qr,e),$(this,oi,r)}async init(){if(s(this,Sn))throw new Error("driver has already been destroyed");s(this,In)||$(this,In,s(this,Qr).init().then(()=>{$(this,oo,!0)}).catch(e=>($(this,In,void 0),Promise.reject(e)))),await s(this,In)}async acquireConnection(){if(s(this,Sn))throw new Error("driver has already been destroyed");s(this,oo)||await this.init();const e=await s(this,Qr).acquireConnection();return s(this,$a).has(e)||(_e(this,Qc,em).call(this)&&_e(this,jc,tm).call(this,e),s(this,$a).add(e)),e}async releaseConnection(e){await s(this,Qr).releaseConnection(e)}beginTransaction(e,r){return s(this,Qr).beginTransaction(e,r)}commitTransaction(e){return s(this,Qr).commitTransaction(e)}rollbackTransaction(e){return s(this,Qr).rollbackTransaction(e)}async destroy(){s(this,In)&&(await s(this,In),s(this,Sn)||$(this,Sn,s(this,Qr).destroy().catch(e=>($(this,Sn,void 0),Promise.reject(e)))),await s(this,Sn))}}Qr=new WeakMap,oi=new WeakMap,In=new WeakMap,oo=new WeakMap,Sn=new WeakMap,$a=new WeakMap,Qc=new WeakSet,em=function(){return s(this,oi).isLevelEnabled("query")||s(this,oi).isLevelEnabled("error")},jc=new WeakSet,tm=function(e){const r=e.executeQuery;e.executeQuery=async i=>{const a=ed();try{return await r.call(e,i)}catch(l){throw await _e(this,Vc,rm).call(this,l,i,a),l}finally{await _e(this,zc,nm).call(this,i,a)}}},Vc=new WeakSet,rm=async function(e,r,i){await s(this,oi).error(()=>({level:"error",error:e,query:r,queryDurationMillis:_e(this,Qa,lf).call(this,i)}))},zc=new WeakSet,nm=async function(e,r){await s(this,oi).query(()=>({level:"query",query:e,queryDurationMillis:_e(this,Qa,lf).call(this,r)}))},Qa=new WeakSet,lf=function(e){return ed()-e};var ja,ai,Kc,sm;class im{constructor(e){P(this,Kc);P(this,ja,void 0);P(this,ai,void 0);$(this,ja,e)}async provideConnection(e){for(;s(this,ai);)await s(this,ai);const r=_e(this,Kc,sm).call(this,e);return $(this,ai,r.then(()=>{$(this,ai,void 0)}).catch(()=>{$(this,ai,void 0)})),r}}ja=new WeakMap,ai=new WeakMap,Kc=new WeakSet,sm=async function(e){return await e(s(this,ja))};const xb=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var ui,es;class Ob{constructor(e){P(this,ui,void 0);P(this,es,void 0);qr(e)?($(this,es,e),$(this,ui,p({query:!0,error:!0}))):($(this,es,qb),$(this,ui,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return s(this,ui)[e]}async query(e){s(this,ui).query&&await s(this,es).call(this,e())}async error(e){s(this,ui).error&&await s(this,es).call(this,e())}}ui=new WeakMap,es=new WeakMap;function qb(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function Eb(t){return pn(t)&&qr(t.compile)}var Ft;const Ms=class Ms extends lc{constructor(r){let i,a;if(Cb(r))i={executor:r.executor},a={...r};else{const l=r.dialect,y=l.createDriver(),g=l.createQueryCompiler(),O=l.createAdapter(),d=new Ob(r.log??[]),T=new _b(y,d),D=new vb(T),ee=new cf(g,O,D,r.plugins??[]);i={executor:ee},a={config:r,executor:ee,dialect:l,driver:T}}super(i);P(this,Ft,void 0);$(this,Ft,p(a))}get schema(){return new uf(s(this,Ft).executor)}get dynamic(){return new Nb}get introspection(){return s(this,Ft).dialect.createIntrospector(this.withoutPlugins())}case(r){return new Bp({node:yn.create(fs(r)?void 0:Io(r))})}get fn(){return Mp()}transaction(){return new Cc({...s(this,Ft)})}connection(){return new om({...s(this,Ft)})}withPlugin(r){return new Ms({...s(this,Ft),executor:s(this,Ft).executor.withPlugin(r)})}withoutPlugins(){return new Ms({...s(this,Ft),executor:s(this,Ft).executor.withoutPlugins()})}withSchema(r){return new Ms({...s(this,Ft),executor:s(this,Ft).executor.withPluginAtFront(new ru(r))})}withTables(){return new Ms({...s(this,Ft)})}async destroy(){await s(this,Ft).driver.destroy()}get isTransaction(){return!1}getExecutor(){return s(this,Ft).executor}executeQuery(r,i=Je()){const a=Eb(r)?r.compile():r;return this.getExecutor().executeQuery(a,i)}};Ft=new WeakMap;let Ra=Ms;var jr;const Bs=class Bs extends Ra{constructor(r){super(r);P(this,jr,void 0);$(this,jr,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new Bs({...s(this,jr),executor:s(this,jr).executor.withPlugin(r)})}withoutPlugins(){return new Bs({...s(this,jr),executor:s(this,jr).executor.withoutPlugins()})}withSchema(r){return new Bs({...s(this,jr),executor:s(this,jr).executor.withPluginAtFront(new ru(r))})}withTables(){return new Bs({...s(this,jr)})}};jr=new WeakMap;let ff=Bs;function Cb(t){return pn(t)&&pn(t.config)&&pn(t.driver)&&pn(t.executor)&&pn(t.dialect)}var ts;class om{constructor(e){P(this,ts,void 0);$(this,ts,p(e))}async execute(e){return s(this,ts).executor.provideConnection(async r=>{const i=s(this,ts).executor.withConnectionProvider(new im(r)),a=new Ra({...s(this,ts),executor:i});return await e(a)})}}ts=new WeakMap;Me(om,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Vr;const sh=class sh{constructor(e){P(this,Vr,void 0);$(this,Vr,p(e))}setIsolationLevel(e){return new sh({...s(this,Vr),isolationLevel:e})}async execute(e){const{isolationLevel:r,...i}=s(this,Vr),a={isolationLevel:r};return Ib(a),s(this,Vr).executor.provideConnection(async l=>{const y=s(this,Vr).executor.withConnectionProvider(new im(l)),g=new ff({...i,executor:y});try{await s(this,Vr).driver.beginTransaction(l,a);const O=await e(g);return await s(this,Vr).driver.commitTransaction(l),O}catch(O){throw await s(this,Vr).driver.rollbackTransaction(l),O}})}};Vr=new WeakMap;let Cc=sh;Me(Cc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Ib(t){if(t.isolationLevel&&!xb.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var hr,ao,Vu,Va,hf,za,df;const Jc=class Jc{constructor(e){P(this,ao);P(this,Va);P(this,za);P(this,hr,void 0);$(this,hr,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new am(this,e)}$castTo(){return new Jc({...s(this,hr)})}withPlugin(e){return new Jc({...s(this,hr),plugins:s(this,hr).plugins!==void 0?p([...s(this,hr).plugins,e]):p([e])})}toOperationNode(){return _e(this,Va,hf).call(this,_e(this,ao,Vu).call(this))}compile(e){return _e(this,za,df).call(this,_e(this,ao,Vu).call(this,e))}async execute(e){const r=_e(this,ao,Vu).call(this,e);return r.executeQuery(_e(this,za,df).call(this,r),s(this,hr).queryId)}};hr=new WeakMap,ao=new WeakSet,Vu=function(e){const r=e!==void 0?e.getExecutor():Kf;return s(this,hr).plugins!==void 0?r.withPlugins(s(this,hr).plugins):r},Va=new WeakSet,hf=function(e){return e.transformQuery(s(this,hr).rawNode,s(this,hr).queryId)},za=new WeakSet,df=function(e){return e.compileQuery(_e(this,Va,hf).call(this,e),s(this,hr).queryId)};let Ic=Jc;function Hn(t){return new Ic(t)}Me(Ic,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var rs,ci;class am{constructor(e,r){P(this,rs,void 0);P(this,ci,void 0);$(this,rs,e),$(this,ci,r)}get expression(){return s(this,rs)}get alias(){return s(this,ci)}get rawBuilder(){return s(this,rs)}toOperationNode(){return Ni.create(s(this,rs).toOperationNode(),kr(s(this,ci))?s(this,ci).toOperationNode():dt.create(s(this,ci)))}}rs=new WeakMap,ci=new WeakMap;Me(am,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const ht=Object.assign((t,...e)=>Hn({queryId:Je(),rawNode:tr.create(t,e?.map(rr)??[])}),{ref(t){return Hn({queryId:Je(),rawNode:tr.createWithChild(An(t))})},val(t){return Hn({queryId:Je(),rawNode:tr.createWithChild(rr(t))})},value(t){return this.val(t)},table(t){return Hn({queryId:Je(),rawNode:tr.createWithChild(mr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",Hn({queryId:Je(),rawNode:tr.create(e,t.map(dt.create))})},lit(t){return Hn({queryId:Je(),rawNode:tr.createWithChild(gn.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return Hn({queryId:Je(),rawNode:tr.createWithSql(t)})},join(t,e=ht`, `){const r=new Array(2*t.length-1),i=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=rr(t[a]),a!==t.length-1&&(r[2*a+1]=i);return Hn({queryId:Je(),rawNode:tr.createWithChildren(r)})}});var Hc;class Sb{constructor(){be(this,"nodeStack",[]);P(this,Hc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));be(this,"visitNode",e=>{this.nodeStack.push(e),s(this,Hc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Hc=new WeakMap;var uo,ns;class Tb extends Sb{constructor(){super(...arguments);P(this,uo,"");P(this,ns,[])}get numParameters(){return s(this,ns).length}compileQuery(r){return $(this,uo,""),$(this,ns,[]),this.visitNode(r),p({query:r,sql:this.getSql(),parameters:[...s(this,ns)]})}getSql(){return s(this,uo)}visitSelectQuery(r){const i=this.parentNode!==void 0&&!No.is(this.parentNode)&&!hn.is(this.parentNode)&&!Zn.is(this.parentNode)&&!Pp.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),i&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,i=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(i)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const i=this.nodeStack.find(Re.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const i=this.nodeStack.find(Re.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!wn(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:i}=r;for(let a=0;a<i.length;++a)this.appendValue(i[a]),a!==i.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(Ab[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:i,parameters:a}=r;for(let l=0;l<i.length;++l)this.append(i[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const i=this.nodeStack.find(Re.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Zu(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileList(r.columnAlterations)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(kb[r.modifier])}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return ps.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const i of r.pathLegs)this.visitNode(i);this.append("'")}visitJSONPathLeg(r){const i=r.type==="ArrayLocation";this.append(i?"[":"."),this.append(String(r.value)),i&&this.append("]")}visitJSONOperatorChain(r){for(let i=0,a=r.values.length;i<a;i++)i===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[i])}append(r){$(this,uo,s(this,uo)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const i=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const y of r)l+=y,y===i?l+=i:y===a&&(l+=a);return l}addParameter(r){s(this,ns).push(r)}appendImmediateValue(r){if(wn(r))this.append(`'${r}'`);else if(yp(r)||Zu(r))this.append(r.toString());else if(Bf(r))this.append("null");else if(ug(r))this.appendImmediateValue(r.toISOString());else if(cg(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((i,a)=>i.modifier&&a.modifier?td[i.modifier]-td[a.modifier]:1),p(r)}}uo=new WeakMap,ns=new WeakMap;const kb=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),td=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Ab=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),hs=p({raw(t,e=[]){return p({sql:t,query:tr.createWithSql(t),parameters:p(e)})}}),Wb=/"/g;class um extends Tb{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(Wb,'""')}visitDefaultInsertValue(e){this.append("null")}}const cm="kysely_migration",lm="kysely_migration_lock";p({__noMigrations__:!0});var co,Gc,hm;class fm{constructor(e){P(this,Gc);P(this,co,void 0);$(this,co,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=s(this,co).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",cm).where("name","!=",lm));const i=await r.execute();return Promise.all(i.map(({name:a})=>_e(this,Gc,hm).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}co=new WeakMap,Gc=new WeakSet,hm=async function(e){const r=s(this,co),i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=i.sql?.split(/[\(\),]/)?.find(y=>y.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(ht`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:l.map(y=>({name:y.name,dataType:y.type,isNullable:!y.notnull,isAutoIncrementing:y.name===a,hasDefaultValue:y.dflt_value!=null}))}};class dm{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var pm=class{createQueryCompiler(){return new um}createAdapter(){return new dm}createIntrospector(t){return new fm(t)}},Ka,yd,mm=(yd=class{constructor(){P(this,Ka,new Rb);be(this,"connection")}async acquireConnection(){return await s(this,Ka).lock(),this.connection}async beginTransaction(t){await t.executeQuery(hs.raw("begin"))}async commitTransaction(t){await t.executeQuery(hs.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(hs.raw("rollback"))}async releaseConnection(){s(this,Ka).unlock()}},Ka=new WeakMap,yd),Rb=class{constructor(){be(this,"promise");be(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},ym=class{streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const i=await this.query(r,t);return e.kind==="SelectQueryNode"||i.length?{rows:i}:{rows:i,...await this.info()}}};function Db(t,e,r){let i,a=0,l=null;function y(){i&&clearTimeout(i),a=0,l=null}function g(){a>=r?(t(l),y()):(i&&clearTimeout(i),i=setTimeout(()=>{t(l),y(),i=void 0},e))}return O=>{a++,l=O,i===void 0&&a===0?(t(O),a++):g()}}var Pb=class extends mm{constructor(e){super();be(this,"config");be(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Lb(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},Lb=class extends ym{constructor(e,r,i=!1,a=2e3,l=1e3){super();be(this,"db");be(this,"onWrite");be(this,"trxCount",0);this.db=e,this.onWrite=r?i?Db(r,a,l):r:void 0}async query(e,r){const i=this.db.prepare(e);i.bind(r);const a=[];for(;i.step();)a.push(i.getAsObject());return i.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},Mb=class extends pm{constructor(e){super();be(this,"config");this.config=e}createDriver(){return new Pb(this.config)}},Bb=class extends mm{constructor(e){super();be(this,"config");be(this,"db");this.config=e}async init(){this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new Fb(this.db),await this.config.onCreateConnection?.(this.connection)}async destroy(){await this.db?.sqlite.close(this.db.db)}},Fb=class extends ym{constructor(e){super();be(this,"sqlite");be(this,"db");this.db=e.db,this.sqlite=e.sqlite}async query(e,r){const i=[],a=this.sqlite.str_new(this.db,e),l=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(a));if(l){const y=l.stmt;try{r?.length&&this.sqlite.bind_collection(y,r);const g=this.sqlite.column_names(y);for(;await this.sqlite.step(y)===100;){const O=this.sqlite.row(y);i.push(Object.fromEntries(g.map((d,T)=>[d,O[T]])))}}finally{await this.sqlite.finalize(y)}}return i}async info(){return{insertId:await new Promise(e=>this.sqlite.exec(this.db,"SELECT last_insert_rowid()",([r])=>e(BigInt(r)))),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ja,wd,Ub=(wd=class extends pm{constructor(e){super();P(this,Ja,void 0);$(this,Ja,e)}createDriver(){return new Bb(s(this,Ja))}},Ja=new WeakMap,wd);function $b(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),r}var wm={exports:{}};const jb={},Vb=Object.freeze(Object.defineProperty({__proto__:null,default:jb},Symbol.toStringTag,{value:"Module"})),Ru=Qb(Vb);(function(t,e){var r=void 0,i=function(a){return r||(r=new Promise(function(l,y){var g=typeof a<"u"?a:{},O=g.onAbort;g.onAbort=function(o){y(new Error(o)),O&&O(o)},g.postRun=g.postRun||[],g.postRun.push(function(){l(g)}),t=void 0;var d;d||(d=typeof g<"u"?g:{}),d.onRuntimeInitialized=function(){function o(I,K){switch(typeof K){case"boolean":Ou(I,K?1:0);break;case"number":_u(I,K);break;case"string":xu(I,K,-1,-1);break;case"object":if(K===null)Zo(I);else if(K.length!=null){var fe=Os(K);ea(I,fe,K.length,-1),Wi(fe)}else Pi(I,"Wrong API use : tried to return a value of an unknown type ("+K+").",-1);break;default:Zo(I)}}function c(I,K){for(var fe=[],n=0;n<I;n+=1){var u=V(K+4*n,"i32"),f=gu(u);if(f===1||f===2)u=vu(u);else if(f===3)u=bu(u);else if(f===4){f=u,u=Xo(f),f=Nu(f);for(var m=new Uint8Array(u),N=0;N<u;N+=1)m[N]=me[f+N];u=m}else u=null;fe.push(u)}return fe}function h(I,K){this.La=I,this.db=K,this.Ja=1,this.fb=[]}function w(I,K){if(this.db=K,K=Pt(I)+1,this.Ya=Ai(K),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");gr(I,Ie,this.Ya,K),this.eb=this.Ya,this.Ua=this.ib=null}function q(I){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),I!=null){var K=this.filename,fe="/",n=K;if(fe&&(fe=typeof fe=="string"?fe:Ln(fe),n=K?ce(fe+"/"+K):fe),K=Si(!0,!0),n=Mn(n,(K!==void 0?K:438)&4095|32768,0),I){if(typeof I=="string"){fe=Array(I.length);for(var u=0,f=I.length;u<f;++u)fe[u]=I.charCodeAt(u);I=fe}Oi(n,K|146),fe=Cr(n,577),Ei(fe,I,0,I.length,0),qi(fe),Oi(n,K)}}this.handleError(Ne(this.filename,L)),this.db=V(L,"i32"),qu(this.db),this.Za={},this.Na={}}var L=Pr(4),B=d.cwrap,Ne=B("sqlite3_open","number",["string","number"]),Le=B("sqlite3_close_v2","number",["number"]),We=B("sqlite3_exec","number",["number","string","number","number","number"]),ot=B("sqlite3_changes","number",["number"]),ur=B("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ho=B("sqlite3_sql","string",["number"]),Go=B("sqlite3_normalized_sql","string",["number"]),Di=B("sqlite3_prepare_v2","number",["number","number","number","number","number"]),wl=B("sqlite3_bind_text","number",["number","number","number","number","number"]),Lr=B("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ir=B("sqlite3_bind_double","number",["number","number","number"]),lu=B("sqlite3_bind_int","number",["number","number","number"]),qs=B("sqlite3_bind_parameter_index","number",["number","string"]),fu=B("sqlite3_step","number",["number"]),hu=B("sqlite3_errmsg","string",["number"]),gl=B("sqlite3_column_count","number",["number"]),Yo=B("sqlite3_data_count","number",["number"]),bl=B("sqlite3_column_double","number",["number","number"]),du=B("sqlite3_column_text","string",["number","number"]),Nl=B("sqlite3_column_blob","number",["number","number"]),pu=B("sqlite3_column_bytes","number",["number","number"]),mu=B("sqlite3_column_type","number",["number","number"]),yu=B("sqlite3_column_name","string",["number","number"]),Sr=B("sqlite3_reset","number",["number"]),wu=B("sqlite3_clear_bindings","number",["number"]),vl=B("sqlite3_finalize","number",["number"]),ie=B("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),gu=B("sqlite3_value_type","number",["number"]),Xo=B("sqlite3_value_bytes","number",["number"]),bu=B("sqlite3_value_text","string",["number"]),Nu=B("sqlite3_value_blob","number",["number"]),vu=B("sqlite3_value_double","number",["number"]),_u=B("sqlite3_result_double","",["number","number"]),Zo=B("sqlite3_result_null","",["number"]),xu=B("sqlite3_result_text","",["number","string","number","number"]),ea=B("sqlite3_result_blob","",["number","number","number","number"]),Ou=B("sqlite3_result_int","",["number","number"]),Pi=B("sqlite3_result_error","",["number","string","number"]),ta=B("sqlite3_aggregate_context","number",["number","number"]),qu=B("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(I){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(I)?this.xb(I):I!=null&&typeof I=="object"?this.yb(I):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var I=fu(this.La);switch(I){case 100:return!0;case 101:return!1;default:throw this.db.handleError(I)}},h.prototype.sb=function(I){return I==null&&(I=this.Ja,this.Ja+=1),bl(this.La,I)},h.prototype.Cb=function(I){if(I==null&&(I=this.Ja,this.Ja+=1),I=du(this.La,I),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(I)},h.prototype.Db=function(I){return I==null&&(I=this.Ja,this.Ja+=1),du(this.La,I)},h.prototype.getBlob=function(I){I==null&&(I=this.Ja,this.Ja+=1);var K=pu(this.La,I);I=Nl(this.La,I);for(var fe=new Uint8Array(K),n=0;n<K;n+=1)fe[n]=me[I+n];return fe},h.prototype.get=function(I,K){K=K||{},I!=null&&this.bind(I)&&this.step(),I=[];for(var fe=Yo(this.La),n=0;n<fe;n+=1)switch(mu(this.La,n)){case 1:var u=K.useBigInt?this.Cb(n):this.sb(n);I.push(u);break;case 2:I.push(this.sb(n));break;case 3:I.push(this.Db(n));break;case 4:I.push(this.getBlob(n));break;default:I.push(null)}return I},h.prototype.getColumnNames=function(){for(var I=[],K=gl(this.La),fe=0;fe<K;fe+=1)I.push(yu(this.La,fe));return I},h.prototype.getAsObject=function(I,K){I=this.get(I,K),K=this.getColumnNames();for(var fe={},n=0;n<K.length;n+=1)fe[K[n]]=I[n];return fe},h.prototype.getSQL=function(){return Ho(this.La)},h.prototype.getNormalizedSQL=function(){return Go(this.La)},h.prototype.run=function(I){return I!=null&&this.bind(I),this.step(),this.reset()},h.prototype.nb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1),I=tt(I);var fe=Os(I);this.fb.push(fe),this.db.handleError(wl(this.La,K,fe,I.length-1,0))},h.prototype.wb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1);var fe=Os(I);this.fb.push(fe),this.db.handleError(Lr(this.La,K,fe,I.length,0))},h.prototype.mb=function(I,K){K==null&&(K=this.Ja,this.Ja+=1),this.db.handleError((I===(I|0)?lu:Ir)(this.La,K,I))},h.prototype.zb=function(I){I==null&&(I=this.Ja,this.Ja+=1),Lr(this.La,I,0,0,0)},h.prototype.ob=function(I,K){switch(K==null&&(K=this.Ja,this.Ja+=1),typeof I){case"string":this.nb(I,K);return;case"number":this.mb(I,K);return;case"bigint":this.nb(I.toString(),K);return;case"boolean":this.mb(I+0,K);return;case"object":if(I===null){this.zb(K);return}if(I.length!=null){this.wb(I,K);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+I+")."},h.prototype.yb=function(I){var K=this;return Object.keys(I).forEach(function(fe){var n=qs(K.La,fe);n!==0&&K.ob(I[fe],n)}),!0},h.prototype.xb=function(I){for(var K=0;K<I.length;K+=1)this.ob(I[K],K+1);return!0},h.prototype.reset=function(){return this.freemem(),wu(this.La)===0&&Sr(this.La)===0},h.prototype.freemem=function(){for(var I;(I=this.fb.pop())!==void 0;)Wi(I)},h.prototype.free=function(){this.freemem();var I=vl(this.La)===0;return delete this.db.Za[this.La],this.La=0,I},w.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var I=Vn(),K=Pr(4);ue(L),ue(K);try{this.db.handleError(Di(this.db.db,this.eb,-1,L,K)),this.eb=V(K,"i32");var fe=V(L,"i32");return fe===0?(this.gb(),{done:!0}):(this.Ua=new h(fe,this.db),this.db.Za[fe]=this.Ua,{value:this.Ua,done:!1})}catch(n){throw this.ib=et(this.eb),this.gb(),n}finally{zn(I)}},w.prototype.gb=function(){Wi(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:et(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(w.prototype[Symbol.iterator]=function(){return this}),q.prototype.run=function(I,K){if(!this.db)throw"Database closed";if(K){I=this.prepare(I,K);try{I.step()}finally{I.free()}}else this.handleError(We(this.db,I,0,0,L));return this},q.prototype.exec=function(I,K,fe){if(!this.db)throw"Database closed";var n=Vn(),u=null;try{var f=Pt(I)+1,m=Pr(f);gr(I,me,m,f);var N=m,A=Pr(4);for(I=[];V(N,"i8")!==0;){ue(L),ue(A),this.handleError(Di(this.db,N,-1,L,A));var k=V(L,"i32");if(N=V(A,"i32"),k!==0){for(f=null,u=new h(k,this),K!=null&&u.bind(K);u.step();)f===null&&(f={columns:u.getColumnNames(),values:[]},I.push(f)),f.values.push(u.get(null,fe));u.free()}}return I}catch(J){throw u&&u.free(),J}finally{zn(n)}},q.prototype.each=function(I,K,fe,n,u){typeof K=="function"&&(n=fe,fe=K,K=void 0),I=this.prepare(I,K);try{for(;I.step();)fe(I.getAsObject(null,u))}finally{I.free()}if(typeof n=="function")return n()},q.prototype.prepare=function(I,K){if(ue(L),this.handleError(ur(this.db,I,-1,L,0)),I=V(L,"i32"),I===0)throw"Nothing to prepare";var fe=new h(I,this);return K!=null&&fe.bind(K),this.Za[I]=fe},q.prototype.iterateStatements=function(I){return new w(I,this)},q.prototype.export=function(){Object.values(this.Za).forEach(function(K){K.free()}),Object.values(this.Na).forEach(jn),this.Na={},this.handleError(Le(this.db));var I=Nn(this.filename);return this.handleError(Ne(this.filename,L)),this.db=V(L,"i32"),I},q.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(jn),this.Na={},this.handleError(Le(this.db)),Lo("/"+this.filename),this.db=null)},q.prototype.handleError=function(I){if(I===0)return null;throw I=hu(this.db),Error(I)},q.prototype.getRowsModified=function(){return ot(this.db)},q.prototype.create_function=function(I,K){Object.prototype.hasOwnProperty.call(this.Na,I)&&(jn(this.Na[I]),delete this.Na[I]);var fe=xs(function(n,u,f){u=c(u,f);try{var m=K.apply(null,u)}catch(N){Pi(n,N,-1);return}o(n,m)},"viii");return this.Na[I]=fe,this.handleError(ie(this.db,I,K.length,1,0,fe,0,0,0)),this},q.prototype.create_aggregate=function(I,K){var fe=K.init||function(){return null},n=K.finalize||function(A){return A},u=K.step;if(!u)throw"An aggregate function must have a step function in "+I;var f={};Object.hasOwnProperty.call(this.Na,I)&&(jn(this.Na[I]),delete this.Na[I]),K=I+"__finalize",Object.hasOwnProperty.call(this.Na,K)&&(jn(this.Na[K]),delete this.Na[K]);var m=xs(function(A,k,J){var W=ta(A,1);Object.hasOwnProperty.call(f,W)||(f[W]=fe()),k=c(k,J),k=[f[W]].concat(k);try{f[W]=u.apply(null,k)}catch(M){delete f[W],Pi(A,M,-1)}},"viii"),N=xs(function(A){var k=ta(A,1);try{var J=n(f[k])}catch(W){delete f[k],Pi(A,W,-1);return}o(A,J),delete f[k]},"vi");return this.Na[I]=m,this.Na[K]=N,this.handleError(ie(this.db,I,u.length-1,1,0,0,m,N,0)),this},d.Database=q};var T=Object.assign({},d),D="./this.program",ee=typeof window=="object",G=typeof importScripts=="function",le=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",_,v,C,S,X,re;le?(b=G?Ru.dirname(b)+"/":__dirname+"/",re=()=>{X||(S=Ru,X=Ru)},_=function(o,c){return re(),o=X.normalize(o),S.readFileSync(o,c?void 0:"utf8")},C=o=>(o=_(o,!0),o.buffer||(o=new Uint8Array(o)),o),v=(o,c,h)=>{re(),o=X.normalize(o),S.readFile(o,function(w,q){w?h(w):c(q.buffer)})},1<process.argv.length&&(D=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=function(){return"[Emscripten Module object]"}):(ee||G)&&(G?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.send(null),c.responseText},G&&(C=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),v=(o,c,h)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?c(w.response):h()},w.onerror=h,w.send(null)});var he=d.print||console.log.bind(console),nt=d.printErr||console.warn.bind(console);Object.assign(d,T),T=null,d.thisProgram&&(D=d.thisProgram);var It;d.wasmBinary&&(It=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var nr,wr=!1,Ar=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Er(o,c,h){var w=c+h;for(h=c;o[h]&&!(h>=w);)++h;if(16<h-c&&o.buffer&&Ar)return Ar.decode(o.subarray(c,h));for(w="";c<h;){var q=o[c++];if(q&128){var L=o[c++]&63;if((q&224)==192)w+=String.fromCharCode((q&31)<<6|L);else{var B=o[c++]&63;q=(q&240)==224?(q&15)<<12|L<<6|B:(q&7)<<18|L<<12|B<<6|o[c++]&63,65536>q?w+=String.fromCharCode(q):(q-=65536,w+=String.fromCharCode(55296|q>>10,56320|q&1023))}}else w+=String.fromCharCode(q)}return w}function et(o,c){return o?Er(Ie,o,c):""}function gr(o,c,h,w){if(!(0<w))return 0;var q=h;w=h+w-1;for(var L=0;L<o.length;++L){var B=o.charCodeAt(L);if(55296<=B&&57343>=B){var Ne=o.charCodeAt(++L);B=65536+((B&1023)<<10)|Ne&1023}if(127>=B){if(h>=w)break;c[h++]=B}else{if(2047>=B){if(h+1>=w)break;c[h++]=192|B>>6}else{if(65535>=B){if(h+2>=w)break;c[h++]=224|B>>12}else{if(h+3>=w)break;c[h++]=240|B>>18,c[h++]=128|B>>12&63}c[h++]=128|B>>6&63}c[h++]=128|B&63}}return c[h]=0,h-q}function Pt(o){for(var c=0,h=0;h<o.length;++h){var w=o.charCodeAt(h);127>=w?c++:2047>=w?c+=2:55296<=w&&57343>=w?(c+=4,++h):c+=3}return c}var it,me,Ie,_t,we,Fe,jt,bn;function ys(){var o=nr.buffer;it=o,d.HEAP8=me=new Int8Array(o),d.HEAP16=_t=new Int16Array(o),d.HEAP32=we=new Int32Array(o),d.HEAPU8=Ie=new Uint8Array(o),d.HEAPU16=new Uint16Array(o),d.HEAPU32=Fe=new Uint32Array(o),d.HEAPF32=jt=new Float32Array(o),d.HEAPF64=bn=new Float64Array(o)}var de,Ae=[],Yr=[],Xr=[];function He(){var o=d.preRun.shift();Ae.unshift(o)}var ir=0,xt=null;function x(o){throw d.onAbort&&d.onAbort(o),o="Aborted("+o+")",nt(o),wr=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}function E(){return R.startsWith("data:application/octet-stream;base64,")}var R;if(R="sql-wasm.wasm",!E()){var Q=R;R=d.locateFile?d.locateFile(Q,b):b+Q}function H(){var o=R;try{if(o==R&&It)return new Uint8Array(It);if(C)return C(o);throw"both async and sync fetching of the wasm failed"}catch(c){x(c)}}function te(){if(!It&&(ee||G)){if(typeof fetch=="function"&&!R.startsWith("file://"))return fetch(R,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+R+"'";return o.arrayBuffer()}).catch(function(){return H()});if(v)return new Promise(function(o,c){v(R,function(h){o(new Uint8Array(h))},c)})}return Promise.resolve().then(function(){return H()})}var U,j;function ne(o){for(;0<o.length;)o.shift()(d)}function V(o,c="i8"){switch(c.endsWith("*")&&(c="*"),c){case"i1":return me[o>>0];case"i8":return me[o>>0];case"i16":return _t[o>>1];case"i32":return we[o>>2];case"i64":return we[o>>2];case"float":return jt[o>>2];case"double":return bn[o>>3];case"*":return Fe[o>>2];default:x("invalid type for getValue: "+c)}return null}function ue(o){var c="i32";switch(c.endsWith("*")&&(c="*"),c){case"i1":me[o>>0]=0;break;case"i8":me[o>>0]=0;break;case"i16":_t[o>>1]=0;break;case"i32":we[o>>2]=0;break;case"i64":j=[0,(U=0,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[o>>2]=j[0],we[o+4>>2]=j[1];break;case"float":jt[o>>2]=0;break;case"double":bn[o>>3]=0;break;case"*":Fe[o>>2]=0;break;default:x("invalid type for setValue: "+c)}}var ae=(o,c)=>{for(var h=0,w=o.length-1;0<=w;w--){var q=o[w];q==="."?o.splice(w,1):q===".."?(o.splice(w,1),h++):h&&(o.splice(w,1),h--)}if(c)for(;h;h--)o.unshift("..");return o},ce=o=>{var c=o.charAt(0)==="/",h=o.substr(-1)==="/";return(o=ae(o.split("/").filter(w=>!!w),!c).join("/"))||c||(o="."),o&&h&&(o+="/"),(c?"/":"")+o},ge=o=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=c[0],c=c[1],!o&&!c?".":(c&&(c=c.substr(0,c.length-1)),o+c)},Ee=o=>{if(o==="/")return"/";o=ce(o),o=o.replace(/\/$/,"");var c=o.lastIndexOf("/");return c===-1?o:o.substr(c+1)};function Qe(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var o=new Uint8Array(1);return()=>(crypto.getRandomValues(o),o[0])}if(le)try{var c=Ru;return()=>c.randomBytes(1)[0]}catch{}return()=>x("randomDevice")}function De(){for(var o="",c=!1,h=arguments.length-1;-1<=h&&!c;h--){if(c=0<=h?arguments[h]:"/",typeof c!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!c)return"";o=c+"/"+o,c=c.charAt(0)==="/"}return o=ae(o.split("/").filter(w=>!!w),!c).join("/"),(c?"/":"")+o||"."}function tt(o,c){var h=Array(Pt(o)+1);return o=gr(o,h,0,h.length),c&&(h.length=o),h}var ye=[];function Wr(o,c){ye[o]={input:[],output:[],Xa:c},or(o,Dn)}var Dn={open:function(o){var c=ye[o.node.rdev];if(!c)throw new F(43);o.tty=c,o.seekable=!1},close:function(o){o.tty.Xa.fsync(o.tty)},fsync:function(o){o.tty.Xa.fsync(o.tty)},read:function(o,c,h,w){if(!o.tty||!o.tty.Xa.tb)throw new F(60);for(var q=0,L=0;L<w;L++){try{var B=o.tty.Xa.tb(o.tty)}catch{throw new F(29)}if(B===void 0&&q===0)throw new F(6);if(B==null)break;q++,c[h+L]=B}return q&&(o.node.timestamp=Date.now()),q},write:function(o,c,h,w){if(!o.tty||!o.tty.Xa.jb)throw new F(60);try{for(var q=0;q<w;q++)o.tty.Xa.jb(o.tty,c[h+q])}catch{throw new F(29)}return w&&(o.node.timestamp=Date.now()),q}},Zr={tb:function(o){if(!o.input.length){var c=null;if(le){var h=Buffer.alloc(256),w=0;try{w=S.readSync(process.stdin.fd,h,0,256,-1)}catch(q){if(q.toString().includes("EOF"))w=0;else throw q}0<w?c=h.slice(0,w).toString("utf-8"):c=null}else typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`));if(!c)return null;o.input=tt(c,!0)}return o.input.shift()},jb:function(o,c){c===null||c===10?(he(Er(o.output,0)),o.output=[]):c!=0&&o.output.push(c)},fsync:function(o){o.output&&0<o.output.length&&(he(Er(o.output,0)),o.output=[])}},en={jb:function(o,c){c===null||c===10?(nt(Er(o.output,0)),o.output=[]):c!=0&&o.output.push(c)},fsync:function(o){o.output&&0<o.output.length&&(nt(Er(o.output,0)),o.output=[])}},pe={Qa:null,Ra:function(){return pe.createNode(null,"/",16895,0)},createNode:function(o,c,h,w){if((h&61440)===24576||(h&61440)===4096)throw new F(63);return pe.Qa||(pe.Qa={dir:{node:{Pa:pe.Ga.Pa,Oa:pe.Ga.Oa,lookup:pe.Ga.lookup,ab:pe.Ga.ab,rename:pe.Ga.rename,unlink:pe.Ga.unlink,rmdir:pe.Ga.rmdir,readdir:pe.Ga.readdir,symlink:pe.Ga.symlink},stream:{Ta:pe.Ha.Ta}},file:{node:{Pa:pe.Ga.Pa,Oa:pe.Ga.Oa},stream:{Ta:pe.Ha.Ta,read:pe.Ha.read,write:pe.Ha.write,lb:pe.Ha.lb,bb:pe.Ha.bb,cb:pe.Ha.cb}},link:{node:{Pa:pe.Ga.Pa,Oa:pe.Ga.Oa,readlink:pe.Ga.readlink},stream:{}},pb:{node:{Pa:pe.Ga.Pa,Oa:pe.Ga.Oa},stream:Do}}),h=ko(o,c,h,w),(h.mode&61440)===16384?(h.Ga=pe.Qa.dir.node,h.Ha=pe.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=pe.Qa.file.node,h.Ha=pe.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=pe.Qa.link.node,h.Ha=pe.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=pe.Qa.pb.node,h.Ha=pe.Qa.pb.stream),h.timestamp=Date.now(),o&&(o.Ia[c]=h,o.timestamp=h.timestamp),h},Jb:function(o){return o.Ia?o.Ia.subarray?o.Ia.subarray(0,o.Ma):new Uint8Array(o.Ia):new Uint8Array(0)},qb:function(o,c){var h=o.Ia?o.Ia.length:0;h>=c||(c=Math.max(c,h*(1048576>h?2:1.125)>>>0),h!=0&&(c=Math.max(c,256)),h=o.Ia,o.Ia=new Uint8Array(c),0<o.Ma&&o.Ia.set(h.subarray(0,o.Ma),0))},Gb:function(o,c){if(o.Ma!=c)if(c==0)o.Ia=null,o.Ma=0;else{var h=o.Ia;o.Ia=new Uint8Array(c),h&&o.Ia.set(h.subarray(0,Math.min(c,o.Ma))),o.Ma=c}},Ga:{Pa:function(o){var c={};return c.dev=(o.mode&61440)===8192?o.id:1,c.ino=o.id,c.mode=o.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=o.rdev,(o.mode&61440)===16384?c.size=4096:(o.mode&61440)===32768?c.size=o.Ma:(o.mode&61440)===40960?c.size=o.link.length:c.size=0,c.atime=new Date(o.timestamp),c.mtime=new Date(o.timestamp),c.ctime=new Date(o.timestamp),c.Ab=4096,c.blocks=Math.ceil(c.size/c.Ab),c},Oa:function(o,c){c.mode!==void 0&&(o.mode=c.mode),c.timestamp!==void 0&&(o.timestamp=c.timestamp),c.size!==void 0&&pe.Gb(o,c.size)},lookup:function(){throw ws[44]},ab:function(o,c,h,w){return pe.createNode(o,c,h,w)},rename:function(o,c,h){if((o.mode&61440)===16384){try{var w=sr(c,h)}catch{}if(w)for(var q in w.Ia)throw new F(55)}delete o.parent.Ia[o.name],o.parent.timestamp=Date.now(),o.name=h,c.Ia[h]=o,c.timestamp=o.parent.timestamp,o.parent=c},unlink:function(o,c){delete o.Ia[c],o.timestamp=Date.now()},rmdir:function(o,c){var h=sr(o,c),w;for(w in h.Ia)throw new F(55);delete o.Ia[c],o.timestamp=Date.now()},readdir:function(o){var c=[".",".."],h;for(h in o.Ia)o.Ia.hasOwnProperty(h)&&c.push(h);return c},symlink:function(o,c,h){return o=pe.createNode(o,c,41471,0),o.link=h,o},readlink:function(o){if((o.mode&61440)!==40960)throw new F(28);return o.link}},Ha:{read:function(o,c,h,w,q){var L=o.node.Ia;if(q>=o.node.Ma)return 0;if(o=Math.min(o.node.Ma-q,w),8<o&&L.subarray)c.set(L.subarray(q,q+o),h);else for(w=0;w<o;w++)c[h+w]=L[q+w];return o},write:function(o,c,h,w,q,L){if(c.buffer===me.buffer&&(L=!1),!w)return 0;if(o=o.node,o.timestamp=Date.now(),c.subarray&&(!o.Ia||o.Ia.subarray)){if(L)return o.Ia=c.subarray(h,h+w),o.Ma=w;if(o.Ma===0&&q===0)return o.Ia=c.slice(h,h+w),o.Ma=w;if(q+w<=o.Ma)return o.Ia.set(c.subarray(h,h+w),q),w}if(pe.qb(o,q+w),o.Ia.subarray&&c.subarray)o.Ia.set(c.subarray(h,h+w),q);else for(L=0;L<w;L++)o.Ia[q+L]=c[h+L];return o.Ma=Math.max(o.Ma,q+w),w},Ta:function(o,c,h){if(h===1?c+=o.position:h===2&&(o.node.mode&61440)===32768&&(c+=o.node.Ma),0>c)throw new F(28);return c},lb:function(o,c,h){pe.qb(o.node,c+h),o.node.Ma=Math.max(o.node.Ma,c+h)},bb:function(o,c,h,w,q){if((o.node.mode&61440)!==32768)throw new F(43);if(o=o.node.Ia,q&2||o.buffer!==it){if((0<h||h+c<o.length)&&(o.subarray?o=o.subarray(h,h+c):o=Array.prototype.slice.call(o,h,h+c)),h=!0,c=65536*Math.ceil(c/65536),(q=Ko(65536,c))?(Ie.fill(0,q,q+c),c=q):c=0,!c)throw new F(48);me.set(o,c)}else h=!1,c=o.byteOffset;return{Fb:c,vb:h}},cb:function(o,c,h,w,q){if((o.node.mode&61440)!==32768)throw new F(43);return q&2||pe.Ha.write(o,c,0,w,h,!1),0}}},ut=null,Pn={},Z=[],So=1,ct=null,vi=!0,F=null,ws={},pt=(o,c={})=>{if(o=De("/",o),!o)return{path:"",node:null};if(c=Object.assign({rb:!0,kb:0},c),8<c.kb)throw new F(32);o=ae(o.split("/").filter(B=>!!B),!1);for(var h=ut,w="/",q=0;q<o.length;q++){var L=q===o.length-1;if(L&&c.parent)break;if(h=sr(h,o[q]),w=ce(w+"/"+o[q]),h.Va&&(!L||L&&c.rb)&&(h=h.Va.root),!L||c.Sa){for(L=0;(h.mode&61440)===40960;)if(h=Mo(w),w=De(ge(w),h),h=pt(w,{kb:c.kb+1}).node,40<L++)throw new F(32)}}return{path:w,node:h}},Ln=o=>{for(var c;;){if(o===o.parent)return o=o.Ra.ub,c?o[o.length-1]!=="/"?o+"/"+c:o+c:o;c=c?o.name+"/"+c:o.name,o=o.parent}},Vt=(o,c)=>{for(var h=0,w=0;w<c.length;w++)h=(h<<5)-h+c.charCodeAt(w)|0;return(o+h>>>0)%ct.length},To=o=>{var c=Vt(o.parent.id,o.name);if(ct[c]===o)ct[c]=o.Wa;else for(c=ct[c];c;){if(c.Wa===o){c.Wa=o.Wa;break}c=c.Wa}},sr=(o,c)=>{var h;if(h=(h=mt(o,"x"))?h:o.Ga.lookup?0:2)throw new F(h,o);for(h=ct[Vt(o.id,c)];h;h=h.Wa){var w=h.name;if(h.parent.id===o.id&&w===c)return h}return o.Ga.lookup(o,c)},ko=(o,c,h,w)=>(o=new Vo(o,c,h,w),c=Vt(o.parent.id,o.name),o.Wa=ct[c],ct[c]=o),iu={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},su=o=>{var c=["r","w","rw"][o&3];return o&512&&(c+="w"),c},mt=(o,c)=>{if(vi)return 0;if(!c.includes("r")||o.mode&292){if(c.includes("w")&&!(o.mode&146)||c.includes("x")&&!(o.mode&73))return 2}else return 2;return 0},Ao=(o,c)=>{try{return sr(o,c),20}catch{}return mt(o,"wx")},ou=(o,c,h)=>{try{var w=sr(o,c)}catch(q){return q.Ka}if(o=mt(o,"wx"))return o;if(h){if((w.mode&61440)!==16384)return 54;if(w===w.parent||Ln(w)==="/")return 10}else if((w.mode&61440)===16384)return 31;return 0},Wo=(o=0)=>{for(;4096>=o;o++)if(!Z[o])return o;throw new F(33)},Ro=(o,c)=>(Un||(Un=function(){this.$a={}},Un.prototype={},Object.defineProperties(Un.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},flags:{get:function(){return this.$a.flags},set:function(h){this.$a.flags=h}},position:{get:function(){return this.$a.position},set:function(h){this.$a.position=h}}})),o=Object.assign(new Un,o),c=Wo(c),o.fd=c,Z[c]=o),Do={open:o=>{o.Ha=Pn[o.node.rdev].Ha,o.Ha.open&&o.Ha.open(o)},Ta:()=>{throw new F(70)}},or=(o,c)=>{Pn[o]={Ha:c}},_i=(o,c)=>{var h=c==="/",w=!c;if(h&&ut)throw new F(10);if(!h&&!w){var q=pt(c,{rb:!1});if(c=q.path,q=q.node,q.Va)throw new F(10);if((q.mode&61440)!==16384)throw new F(54)}c={type:o,Kb:{},ub:c,Eb:[]},o=o.Ra(c),o.Ra=c,c.root=o,h?ut=o:q&&(q.Va=c,q.Ra&&q.Ra.Eb.push(c))},Mn=(o,c,h)=>{var w=pt(o,{parent:!0}).node;if(o=Ee(o),!o||o==="."||o==="..")throw new F(28);var q=Ao(w,o);if(q)throw new F(q);if(!w.Ga.ab)throw new F(63);return w.Ga.ab(w,o,c,h)},br=(o,c)=>Mn(o,(c!==void 0?c:511)&1023|16384,0),xi=(o,c,h)=>{typeof h>"u"&&(h=c,c=438),Mn(o,c|8192,h)},Bn=(o,c)=>{if(!De(o))throw new F(44);var h=pt(c,{parent:!0}).node;if(!h)throw new F(44);c=Ee(c);var w=Ao(h,c);if(w)throw new F(w);if(!h.Ga.symlink)throw new F(63);h.Ga.symlink(h,c,o)},Po=o=>{var c=pt(o,{parent:!0}).node;o=Ee(o);var h=sr(c,o),w=ou(c,o,!0);if(w)throw new F(w);if(!c.Ga.rmdir)throw new F(63);if(h.Va)throw new F(10);c.Ga.rmdir(c,o),To(h)},Lo=o=>{var c=pt(o,{parent:!0}).node;if(!c)throw new F(44);o=Ee(o);var h=sr(c,o),w=ou(c,o,!1);if(w)throw new F(w);if(!c.Ga.unlink)throw new F(63);if(h.Va)throw new F(10);c.Ga.unlink(c,o),To(h)},Mo=o=>{if(o=pt(o).node,!o)throw new F(44);if(!o.Ga.readlink)throw new F(28);return De(Ln(o.parent),o.Ga.readlink(o))},tn=(o,c)=>{if(o=pt(o,{Sa:!c}).node,!o)throw new F(44);if(!o.Ga.Pa)throw new F(63);return o.Ga.Pa(o)},Bo=o=>tn(o,!0),Oi=(o,c)=>{if(o=typeof o=="string"?pt(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new F(63);o.Ga.Oa(o,{mode:c&4095|o.mode&-4096,timestamp:Date.now()})},Fo=(o,c)=>{if(0>c)throw new F(28);if(o=typeof o=="string"?pt(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new F(63);if((o.mode&61440)===16384)throw new F(31);if((o.mode&61440)!==32768)throw new F(28);var h=mt(o,"w");if(h)throw new F(h);o.Ga.Oa(o,{size:c,timestamp:Date.now()})},Cr=(o,c,h)=>{if(o==="")throw new F(44);if(typeof c=="string"){var w=iu[c];if(typeof w>"u")throw Error("Unknown file open mode: "+c);c=w}if(h=c&64?(typeof h>"u"?438:h)&4095|32768:0,typeof o=="object")var q=o;else{o=ce(o);try{q=pt(o,{Sa:!(c&131072)}).node}catch{}}if(w=!1,c&64)if(q){if(c&128)throw new F(20)}else q=Mn(o,h,0),w=!0;if(!q)throw new F(44);if((q.mode&61440)===8192&&(c&=-513),c&65536&&(q.mode&61440)!==16384)throw new F(54);if(!w&&(h=q?(q.mode&61440)===40960?32:(q.mode&61440)===16384&&(su(c)!=="r"||c&512)?31:mt(q,su(c)):44))throw new F(h);return c&512&&!w&&Fo(q,0),c&=-131713,q=Ro({node:q,path:Ln(q),flags:c,seekable:!0,position:0,Ha:q.Ha,Ib:[],error:!1}),q.Ha.open&&q.Ha.open(q),!d.logReadFiles||c&1||($n||($n={}),o in $n||($n[o]=1)),q},qi=o=>{if(o.fd===null)throw new F(8);o.hb&&(o.hb=null);try{o.Ha.close&&o.Ha.close(o)}catch(c){throw c}finally{Z[o.fd]=null}o.fd=null},ze=(o,c,h)=>{if(o.fd===null)throw new F(8);if(!o.seekable||!o.Ha.Ta)throw new F(70);if(h!=0&&h!=1&&h!=2)throw new F(28);o.position=o.Ha.Ta(o,c,h),o.Ib=[]},Fn=(o,c,h,w,q)=>{if(0>w||0>q)throw new F(28);if(o.fd===null)throw new F(8);if((o.flags&2097155)===1)throw new F(8);if((o.node.mode&61440)===16384)throw new F(31);if(!o.Ha.read)throw new F(28);var L=typeof q<"u";if(!L)q=o.position;else if(!o.seekable)throw new F(70);return c=o.Ha.read(o,c,h,w,q),L||(o.position+=c),c},Ei=(o,c,h,w,q)=>{if(0>w||0>q)throw new F(28);if(o.fd===null)throw new F(8);if(!(o.flags&2097155))throw new F(8);if((o.node.mode&61440)===16384)throw new F(31);if(!o.Ha.write)throw new F(28);o.seekable&&o.flags&1024&&ze(o,0,2);var L=typeof q<"u";if(!L)q=o.position;else if(!o.seekable)throw new F(70);return c=o.Ha.write(o,c,h,w,q,void 0),L||(o.position+=c),c},Nn=o=>{var c,h=Cr(o,h||0);o=tn(o).size;var w=new Uint8Array(o);return Fn(h,w,0,o,0),c=w,qi(h),c},Ci=()=>{F||(F=function(o,c){this.node=c,this.Hb=function(h){this.Ka=h},this.Hb(o),this.message="FS error"},F.prototype=Error(),F.prototype.constructor=F,[44].forEach(o=>{ws[o]=new F(o),ws[o].stack="<generic error, no stack>"}))},Ii,Si=(o,c)=>{var h=0;return o&&(h|=365),c&&(h|=146),h},Rr=(o,c,h)=>{o=ce("/dev/"+o);var w=Si(!!c,!!h);Uo||(Uo=64);var q=Uo++<<8|0;or(q,{open:L=>{L.seekable=!1},close:()=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(L,B,Ne,Le)=>{for(var We=0,ot=0;ot<Le;ot++){try{var ur=c()}catch{throw new F(29)}if(ur===void 0&&We===0)throw new F(6);if(ur==null)break;We++,B[Ne+ot]=ur}return We&&(L.node.timestamp=Date.now()),We},write:(L,B,Ne,Le)=>{for(var We=0;We<Le;We++)try{h(B[Ne+We])}catch{throw new F(29)}return Le&&(L.node.timestamp=Date.now()),We}}),xi(o,w,q)},Uo,Ge={},Un,$n;function rn(o,c,h){if(c.charAt(0)==="/")return c;if(o=o===-100?"/":ar(o).path,c.length==0){if(!h)throw new F(44);return o}return ce(o+"/"+c)}function Qn(o,c,h){try{var w=o(c)}catch(q){if(q&&q.node&&ce(c)!==ce(Ln(q.node)))return-54;throw q}return we[h>>2]=w.dev,we[h+8>>2]=w.ino,we[h+12>>2]=w.mode,Fe[h+16>>2]=w.nlink,we[h+20>>2]=w.uid,we[h+24>>2]=w.gid,we[h+28>>2]=w.rdev,j=[w.size>>>0,(U=w.size,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[h+40>>2]=j[0],we[h+44>>2]=j[1],we[h+48>>2]=4096,we[h+52>>2]=w.blocks,j=[Math.floor(w.atime.getTime()/1e3)>>>0,(U=Math.floor(w.atime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[h+56>>2]=j[0],we[h+60>>2]=j[1],Fe[h+64>>2]=0,j=[Math.floor(w.mtime.getTime()/1e3)>>>0,(U=Math.floor(w.mtime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[h+72>>2]=j[0],we[h+76>>2]=j[1],Fe[h+80>>2]=0,j=[Math.floor(w.ctime.getTime()/1e3)>>>0,(U=Math.floor(w.ctime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[h+88>>2]=j[0],we[h+92>>2]=j[1],Fe[h+96>>2]=0,j=[w.ino>>>0,(U=w.ino,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[h+104>>2]=j[0],we[h+108>>2]=j[1],0}var Ti=void 0;function ki(){return Ti+=4,we[Ti-4>>2]}function ar(o){if(o=Z[o],!o)throw new F(8);return o}function gs(o){return Fe[o>>2]+4294967296*we[o+4>>2]}function $o(o){var c=Pt(o)+1,h=Ai(c);return h&&gr(o,me,h,c),h}function au(o,c,h){function w(Le){return(Le=Le.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Le[1]:"GMT"}var q=new Date().getFullYear(),L=new Date(q,0,1),B=new Date(q,6,1);q=L.getTimezoneOffset();var Ne=B.getTimezoneOffset();we[o>>2]=60*Math.max(q,Ne),we[c>>2]=+(q!=Ne),o=w(L),c=w(B),o=$o(o),c=$o(c),Ne<q?(Fe[h>>2]=o,Fe[h+4>>2]=c):(Fe[h>>2]=c,Fe[h+4>>2]=o)}function bs(o,c,h){bs.Bb||(bs.Bb=!0,au(o,c,h))}var Qo;Qo=le?()=>{var o=process.hrtime();return 1e3*o[0]+o[1]/1e6}:()=>performance.now();var Ns={};function jo(){if(!vs){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"},c;for(c in Ns)Ns[c]===void 0?delete o[c]:o[c]=Ns[c];var h=[];for(c in o)h.push(c+"="+o[c]);vs=h}return vs}var vs,Dr=void 0,_s=[];function xs(o,c){if(!Dr){Dr=new WeakMap;var h=de.length;if(Dr)for(var w=0;w<0+h;w++){var q=de.get(w);q&&Dr.set(q,w)}}if(Dr.has(o))return Dr.get(o);if(_s.length)h=_s.pop();else{try{de.grow(1)}catch(Ne){throw Ne instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ne}h=de.length-1}try{de.set(h,o)}catch(Ne){if(!(Ne instanceof TypeError))throw Ne;if(typeof WebAssembly.Function=="function"){w=WebAssembly.Function,q={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var L={parameters:[],results:c[0]=="v"?[]:[q[c[0]]]},B=1;B<c.length;++B)L.parameters.push(q[c[B]]);c=new w(L,o)}else{for(w=[1,96],q=c.slice(0,1),c=c.slice(1),L={i:127,p:127,j:126,f:125,d:124},B=c.length,128>B?w.push(B):w.push(B%128|128,B>>7),B=0;B<c.length;++B)w.push(L[c[B]]);q=="v"?w.push(0):w.push(1,L[q]),c=[0,97,115,109,1,0,0,0,1],q=w.length,128>q?c.push(q):c.push(q%128|128,q>>7),c.push.apply(c,w),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:o}}).exports.f}de.set(h,c)}return Dr.set(o,h),h}function jn(o){Dr.delete(de.get(o)),_s.push(o)}function Os(o){var c=Ai(o.length);return o.subarray||o.slice||(o=new Uint8Array(o)),Ie.set(o,c),c}function uu(o,c,h,w){var q={string:We=>{var ot=0;if(We!=null&&We!==0){var ur=(We.length<<2)+1;ot=Pr(ur),gr(We,Ie,ot,ur)}return ot},array:We=>{var ot=Pr(We.length);return me.set(We,ot),ot}};o=d["_"+o];var L=[],B=0;if(w)for(var Ne=0;Ne<w.length;Ne++){var Le=q[h[Ne]];Le?(B===0&&(B=Vn()),L[Ne]=Le(w[Ne])):L[Ne]=w[Ne]}return h=o.apply(null,L),h=function(We){return B!==0&&zn(B),c==="string"?et(We):c==="boolean"?!!We:We}(h)}function Vo(o,c,h,w){o||(o=this),this.parent=o,this.Ra=o.Ra,this.Va=null,this.id=So++,this.name=c,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(Vo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(o){o?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(o){o?this.mode|=146:this.mode&=-147}}}),Ci(),ct=Array(4096),_i(pe,"/"),br("/tmp"),br("/home"),br("/home/web_user"),(()=>{br("/dev"),or(259,{read:()=>0,write:(c,h,w,q)=>q}),xi("/dev/null",259),Wr(1280,Zr),Wr(1536,en),xi("/dev/tty",1280),xi("/dev/tty1",1536);var o=Qe();Rr("random",o),Rr("urandom",o),br("/dev/shm"),br("/dev/shm/tmp")})(),(()=>{br("/proc");var o=br("/proc/self");br("/proc/self/fd"),_i({Ra:()=>{var c=ko(o,"fd",16895,73);return c.Ga={lookup:(h,w)=>{var q=Z[+w];if(!q)throw new F(8);return h={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>q.path}},h.parent=h}},c}},"/proc/self/fd")})();var cu={a:function(o,c,h,w){x("Assertion failed: "+et(o)+", at: "+[c?et(c):"unknown filename",h,w?et(w):"unknown function"])},h:function(o,c){try{return o=et(o),Oi(o,c),0}catch(h){if(typeof Ge>"u"||!(h instanceof F))throw h;return-h.Ka}},H:function(o,c,h){try{if(c=et(c),c=rn(o,c),h&-8)return-28;var w=pt(c,{Sa:!0}).node;return w?(o="",h&4&&(o+="r"),h&2&&(o+="w"),h&1&&(o+="x"),o&&mt(w,o)?-2:0):-44}catch(q){if(typeof Ge>"u"||!(q instanceof F))throw q;return-q.Ka}},i:function(o,c){try{var h=Z[o];if(!h)throw new F(8);return Oi(h.node,c),0}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return-w.Ka}},g:function(o){try{var c=Z[o];if(!c)throw new F(8);var h=c.node,w=typeof h=="string"?pt(h,{Sa:!0}).node:h;if(!w.Ga.Oa)throw new F(63);return w.Ga.Oa(w,{timestamp:Date.now()}),0}catch(q){if(typeof Ge>"u"||!(q instanceof F))throw q;return-q.Ka}},b:function(o,c,h){Ti=h;try{var w=ar(o);switch(c){case 0:var q=ki();return 0>q?-28:Ro(w,q).fd;case 1:case 2:return 0;case 3:return w.flags;case 4:return q=ki(),w.flags|=q,0;case 5:return q=ki(),_t[q+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return we[zo()>>2]=28,-1;default:return-28}}catch(L){if(typeof Ge>"u"||!(L instanceof F))throw L;return-L.Ka}},G:function(o,c){try{var h=ar(o);return Qn(tn,h.path,c)}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return-w.Ka}},l:function(o,c,h){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return-61;var w=Z[o];if(!w)throw new F(8);if(!(w.flags&2097155))throw new F(28);return Fo(w.node,c),0}catch(q){if(typeof Ge>"u"||!(q instanceof F))throw q;return-q.Ka}},B:function(o,c){try{if(c===0)return-28;var h=Pt("/")+1;return c<h?-68:(gr("/",Ie,o,c),h)}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return-w.Ka}},E:function(o,c){try{return o=et(o),Qn(Bo,o,c)}catch(h){if(typeof Ge>"u"||!(h instanceof F))throw h;return-h.Ka}},y:function(o,c,h){try{return c=et(c),c=rn(o,c),c=ce(c),c[c.length-1]==="/"&&(c=c.substr(0,c.length-1)),br(c,h),0}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return-w.Ka}},D:function(o,c,h,w){try{c=et(c);var q=w&256;return c=rn(o,c,w&4096),Qn(q?Bo:tn,c,h)}catch(L){if(typeof Ge>"u"||!(L instanceof F))throw L;return-L.Ka}},v:function(o,c,h,w){Ti=w;try{c=et(c),c=rn(o,c);var q=w?ki():0;return Cr(c,h,q).fd}catch(L){if(typeof Ge>"u"||!(L instanceof F))throw L;return-L.Ka}},t:function(o,c,h,w){try{if(c=et(c),c=rn(o,c),0>=w)return-28;var q=Mo(c),L=Math.min(w,Pt(q)),B=me[h+L];return gr(q,Ie,h,w+1),me[h+L]=B,L}catch(Ne){if(typeof Ge>"u"||!(Ne instanceof F))throw Ne;return-Ne.Ka}},s:function(o){try{return o=et(o),Po(o),0}catch(c){if(typeof Ge>"u"||!(c instanceof F))throw c;return-c.Ka}},F:function(o,c){try{return o=et(o),Qn(tn,o,c)}catch(h){if(typeof Ge>"u"||!(h instanceof F))throw h;return-h.Ka}},p:function(o,c,h){try{return c=et(c),c=rn(o,c),h===0?Lo(c):h===512?Po(c):x("Invalid flags passed to unlinkat"),0}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return-w.Ka}},o:function(o,c,h){try{if(c=et(c),c=rn(o,c,!0),h){var w=gs(h),q=we[h+8>>2];L=1e3*w+q/1e6,h+=16,w=gs(h),q=we[h+8>>2],B=1e3*w+q/1e6}else var L=Date.now(),B=L;o=L;var Ne=pt(c,{Sa:!0}).node;return Ne.Ga.Oa(Ne,{timestamp:Math.max(o,B)}),0}catch(Le){if(typeof Ge>"u"||!(Le instanceof F))throw Le;return-Le.Ka}},e:function(){return Date.now()},j:function(o,c){o=new Date(1e3*gs(o)),we[c>>2]=o.getSeconds(),we[c+4>>2]=o.getMinutes(),we[c+8>>2]=o.getHours(),we[c+12>>2]=o.getDate(),we[c+16>>2]=o.getMonth(),we[c+20>>2]=o.getFullYear()-1900,we[c+24>>2]=o.getDay();var h=new Date(o.getFullYear(),0,1);we[c+28>>2]=(o.getTime()-h.getTime())/864e5|0,we[c+36>>2]=-(60*o.getTimezoneOffset());var w=new Date(o.getFullYear(),6,1).getTimezoneOffset();h=h.getTimezoneOffset(),we[c+32>>2]=(w!=h&&o.getTimezoneOffset()==Math.min(h,w))|0},w:function(o,c,h,w,q,L){try{var B=ar(w);if(c&2&&!(h&2)&&(B.flags&2097155)!==2)throw new F(2);if((B.flags&2097155)===1)throw new F(2);if(!B.Ha.bb)throw new F(43);var Ne=B.Ha.bb(B,o,q,c,h),Le=Ne.Fb;return we[L>>2]=Ne.vb,Le}catch(We){if(typeof Ge>"u"||!(We instanceof F))throw We;return-We.Ka}},x:function(o,c,h,w,q,L){try{var B=ar(q);if(h&2){var Ne=Ie.slice(o,o+c);B&&B.Ha.cb&&B.Ha.cb(B,Ne,L,c,w)}}catch(Le){if(typeof Ge>"u"||!(Le instanceof F))throw Le;return-Le.Ka}},n:bs,q:function(){return 2147483648},d:Qo,c:function(o){var c=Ie.length;if(o>>>=0,2147483648<o)return!1;for(var h=1;4>=h;h*=2){var w=c*(1+.2/h);w=Math.min(w,o+100663296);var q=Math;w=Math.max(o,w),q=q.min.call(q,2147483648,w+(65536-w%65536)%65536);e:{try{nr.grow(q-it.byteLength+65535>>>16),ys();var L=1;break e}catch{}L=void 0}if(L)return!0}return!1},z:function(o,c){var h=0;return jo().forEach(function(w,q){var L=c+h;for(q=Fe[o+4*q>>2]=L,L=0;L<w.length;++L)me[q++>>0]=w.charCodeAt(L);me[q>>0]=0,h+=w.length+1}),0},A:function(o,c){var h=jo();Fe[o>>2]=h.length;var w=0;return h.forEach(function(q){w+=q.length+1}),Fe[c>>2]=w,0},f:function(o){try{var c=ar(o);return qi(c),0}catch(h){if(typeof Ge>"u"||!(h instanceof F))throw h;return h.Ka}},m:function(o,c){try{var h=ar(o);return me[c>>0]=h.tty?2:(h.mode&61440)===16384?3:(h.mode&61440)===40960?7:4,0}catch(w){if(typeof Ge>"u"||!(w instanceof F))throw w;return w.Ka}},u:function(o,c,h,w){try{e:{var q=ar(o);o=c;for(var L=c=0;L<h;L++){var B=Fe[o>>2],Ne=Fe[o+4>>2];o+=8;var Le=Fn(q,me,B,Ne);if(0>Le){var We=-1;break e}if(c+=Le,Le<Ne)break}We=c}return Fe[w>>2]=We,0}catch(ot){if(typeof Ge>"u"||!(ot instanceof F))throw ot;return ot.Ka}},k:function(o,c,h,w,q){try{if(c=h+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*h:NaN,isNaN(c))return 61;var L=ar(o);return ze(L,c,w),j=[L.position>>>0,(U=L.position,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],we[q>>2]=j[0],we[q+4>>2]=j[1],L.hb&&c===0&&w===0&&(L.hb=null),0}catch(B){if(typeof Ge>"u"||!(B instanceof F))throw B;return B.Ka}},C:function(o){try{var c=ar(o);return c.Ha&&c.Ha.fsync?c.Ha.fsync(c):0}catch(h){if(typeof Ge>"u"||!(h instanceof F))throw h;return h.Ka}},r:function(o,c,h,w){try{e:{var q=ar(o);o=c;for(var L=c=0;L<h;L++){var B=Fe[o>>2],Ne=Fe[o+4>>2];o+=8;var Le=Ei(q,me,B,Ne);if(0>Le){var We=-1;break e}c+=Le}We=c}return Fe[w>>2]=We,0}catch(ot){if(typeof Ge>"u"||!(ot instanceof F))throw ot;return ot.Ka}}};(function(){function o(q){d.asm=q.exports,nr=d.asm.I,ys(),de=d.asm.Aa,Yr.unshift(d.asm.J),ir--,d.monitorRunDependencies&&d.monitorRunDependencies(ir),ir==0&&xt&&(q=xt,xt=null,q())}function c(q){o(q.instance)}function h(q){return te().then(function(L){return WebAssembly.instantiate(L,w)}).then(function(L){return L}).then(q,function(L){nt("failed to asynchronously prepare wasm: "+L),x(L)})}var w={a:cu};if(ir++,d.monitorRunDependencies&&d.monitorRunDependencies(ir),d.instantiateWasm)try{return d.instantiateWasm(w,o)}catch(q){return nt("Module.instantiateWasm callback failed with error: "+q),!1}return function(){return It||typeof WebAssembly.instantiateStreaming!="function"||E()||R.startsWith("file://")||le||typeof fetch!="function"?h(c):fetch(R,{credentials:"same-origin"}).then(function(q){return WebAssembly.instantiateStreaming(q,w).then(c,function(L){return nt("wasm streaming compile failed: "+L),nt("falling back to ArrayBuffer instantiation"),h(c)})})}(),{}})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.J).apply(null,arguments)},d._sqlite3_free=function(){return(d._sqlite3_free=d.asm.K).apply(null,arguments)},d._sqlite3_value_double=function(){return(d._sqlite3_value_double=d.asm.L).apply(null,arguments)},d._sqlite3_value_text=function(){return(d._sqlite3_value_text=d.asm.M).apply(null,arguments)};var zo=d.___errno_location=function(){return(zo=d.___errno_location=d.asm.N).apply(null,arguments)};d._sqlite3_prepare_v2=function(){return(d._sqlite3_prepare_v2=d.asm.O).apply(null,arguments)},d._sqlite3_step=function(){return(d._sqlite3_step=d.asm.P).apply(null,arguments)},d._sqlite3_finalize=function(){return(d._sqlite3_finalize=d.asm.Q).apply(null,arguments)},d._sqlite3_reset=function(){return(d._sqlite3_reset=d.asm.R).apply(null,arguments)},d._sqlite3_value_int=function(){return(d._sqlite3_value_int=d.asm.S).apply(null,arguments)},d._sqlite3_clear_bindings=function(){return(d._sqlite3_clear_bindings=d.asm.T).apply(null,arguments)},d._sqlite3_value_blob=function(){return(d._sqlite3_value_blob=d.asm.U).apply(null,arguments)},d._sqlite3_value_bytes=function(){return(d._sqlite3_value_bytes=d.asm.V).apply(null,arguments)},d._sqlite3_value_type=function(){return(d._sqlite3_value_type=d.asm.W).apply(null,arguments)},d._sqlite3_result_blob=function(){return(d._sqlite3_result_blob=d.asm.X).apply(null,arguments)},d._sqlite3_result_double=function(){return(d._sqlite3_result_double=d.asm.Y).apply(null,arguments)},d._sqlite3_result_error=function(){return(d._sqlite3_result_error=d.asm.Z).apply(null,arguments)},d._sqlite3_result_int=function(){return(d._sqlite3_result_int=d.asm._).apply(null,arguments)},d._sqlite3_result_int64=function(){return(d._sqlite3_result_int64=d.asm.$).apply(null,arguments)},d._sqlite3_result_null=function(){return(d._sqlite3_result_null=d.asm.aa).apply(null,arguments)},d._sqlite3_result_text=function(){return(d._sqlite3_result_text=d.asm.ba).apply(null,arguments)},d._sqlite3_sql=function(){return(d._sqlite3_sql=d.asm.ca).apply(null,arguments)},d._sqlite3_aggregate_context=function(){return(d._sqlite3_aggregate_context=d.asm.da).apply(null,arguments)},d._sqlite3_column_count=function(){return(d._sqlite3_column_count=d.asm.ea).apply(null,arguments)},d._sqlite3_data_count=function(){return(d._sqlite3_data_count=d.asm.fa).apply(null,arguments)},d._sqlite3_column_blob=function(){return(d._sqlite3_column_blob=d.asm.ga).apply(null,arguments)},d._sqlite3_column_bytes=function(){return(d._sqlite3_column_bytes=d.asm.ha).apply(null,arguments)},d._sqlite3_column_double=function(){return(d._sqlite3_column_double=d.asm.ia).apply(null,arguments)},d._sqlite3_column_text=function(){return(d._sqlite3_column_text=d.asm.ja).apply(null,arguments)},d._sqlite3_column_type=function(){return(d._sqlite3_column_type=d.asm.ka).apply(null,arguments)},d._sqlite3_column_name=function(){return(d._sqlite3_column_name=d.asm.la).apply(null,arguments)},d._sqlite3_bind_blob=function(){return(d._sqlite3_bind_blob=d.asm.ma).apply(null,arguments)},d._sqlite3_bind_double=function(){return(d._sqlite3_bind_double=d.asm.na).apply(null,arguments)},d._sqlite3_bind_int=function(){return(d._sqlite3_bind_int=d.asm.oa).apply(null,arguments)},d._sqlite3_bind_text=function(){return(d._sqlite3_bind_text=d.asm.pa).apply(null,arguments)},d._sqlite3_bind_parameter_index=function(){return(d._sqlite3_bind_parameter_index=d.asm.qa).apply(null,arguments)},d._sqlite3_normalized_sql=function(){return(d._sqlite3_normalized_sql=d.asm.ra).apply(null,arguments)},d._sqlite3_errmsg=function(){return(d._sqlite3_errmsg=d.asm.sa).apply(null,arguments)},d._sqlite3_exec=function(){return(d._sqlite3_exec=d.asm.ta).apply(null,arguments)},d._sqlite3_changes=function(){return(d._sqlite3_changes=d.asm.ua).apply(null,arguments)},d._sqlite3_close_v2=function(){return(d._sqlite3_close_v2=d.asm.va).apply(null,arguments)},d._sqlite3_create_function_v2=function(){return(d._sqlite3_create_function_v2=d.asm.wa).apply(null,arguments)},d._sqlite3_open=function(){return(d._sqlite3_open=d.asm.xa).apply(null,arguments)};var Ai=d._malloc=function(){return(Ai=d._malloc=d.asm.ya).apply(null,arguments)},Wi=d._free=function(){return(Wi=d._free=d.asm.za).apply(null,arguments)};d._RegisterExtensionFunctions=function(){return(d._RegisterExtensionFunctions=d.asm.Ba).apply(null,arguments)};var Ko=d._emscripten_builtin_memalign=function(){return(Ko=d._emscripten_builtin_memalign=d.asm.Ca).apply(null,arguments)},Vn=d.stackSave=function(){return(Vn=d.stackSave=d.asm.Da).apply(null,arguments)},zn=d.stackRestore=function(){return(zn=d.stackRestore=d.asm.Ea).apply(null,arguments)},Pr=d.stackAlloc=function(){return(Pr=d.stackAlloc=d.asm.Fa).apply(null,arguments)};d.UTF8ToString=et,d.stackAlloc=Pr,d.stackSave=Vn,d.stackRestore=zn,d.cwrap=function(o,c,h,w){h=h||[];var q=h.every(L=>L==="number"||L==="boolean");return c!=="string"&&q&&!w?d["_"+o]:function(){return uu(o,c,h,arguments)}};var Ri;xt=function o(){Ri||Jo(),Ri||(xt=o)};function Jo(){function o(){if(!Ri&&(Ri=!0,d.calledRun=!0,!wr)){if(d.noFSInit||Ii||(Ii=!0,Ci(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?Rr("stdin",d.stdin):Bn("/dev/tty","/dev/stdin"),d.stdout?Rr("stdout",null,d.stdout):Bn("/dev/tty","/dev/stdout"),d.stderr?Rr("stderr",null,d.stderr):Bn("/dev/tty1","/dev/stderr"),Cr("/dev/stdin",0),Cr("/dev/stdout",1),Cr("/dev/stderr",1)),vi=!1,ne(Yr),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var c=d.postRun.shift();Xr.unshift(c)}ne(Xr)}}if(!(0<ir)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)He();ne(Ae),0<ir||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),o()},1)):o())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Jo(),g}),r)};t.exports=i,t.exports.default=i})(wm);var zb=wm.exports;const Kb=$b(zb),Jb=""+new URL("sql-wasm-18fc45ef.wasm",import.meta.url).href,Hb="sqlitevfs",Ps=new Map,Gb=2048,Yb=65536;class Xb{constructor(e){be(this,"_data");be(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const i=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(i),i.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,i=Math.min(Yb,Math.max(Gb,this._data.length)),a=new Uint8Array(this._data.length+Math.max(i,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const Zb=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Zf=new Promise((t,e)=>{const r=Zb.open(Hb,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function eN(t){const e=await Zf,r=await new Promise((i,a)=>{const y=e.transaction("files","readonly").objectStore("files").get(t);y.onsuccess=()=>i(y.result),y.onerror=()=>a(y.error)});if(r&&!Ps.has(t)){const i=new Xb(r.data);return Ps.set(t,i),i}else return Ps.has(t)?Ps.get(t):null}async function tN(t,e){const r=await Zf;await new Promise((i,a)=>{const y=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});y.onsuccess=()=>i(!0),y.onerror=()=>a(y.error)})}async function rd(t){const e=await Zf;await new Promise((r,i)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>i(l.error)})}async function rN(t,e){if(await tN(t,e),Ps.has(t)){const r=Ps.get(t);r.truncate(0),r.write(0,e)}}var nN=class extends zf{constructor(e){super();be(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:i,...a}=r,l=this.serializer(i);return i===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},gm=t=>{if(bm(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},nd=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,iN=t=>{if(bm(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(nd.test(t))return new Date(t);try{return JSON.parse(t,(e,r)=>typeof r=="string"&&nd.exec(r)?new Date(r):r)}catch{return t}}};function bm(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var sN=class{constructor(t={}){be(this,"transformer");be(this,"deserializer");be(this,"only");be(this,"ctx");const{deserializer:e=iN,selectOrRawOnly:r,serializer:i=gm}=t;this.transformer=new nN(i),this.deserializer=e,this.only=r,r&&(this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.only&&["SelectQueryNode","RawNode"].includes(t.kind)&&this.ctx?.add(e),this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){const r={...t,rows:t.rows.map(i=>Object.fromEntries(Object.entries(i).map(([a,l])=>[a,this.deserializer(l)])))};return this.only&&this.ctx?.delete(e),r}};function id(t){const{logger:e,merge:r,queryNode:i}=t;return a=>{const{level:l,queryDurationMillis:y,query:{parameters:g,sql:O,query:d}}=a,T=l==="error"?a.error:void 0;let D=O.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&g.forEach(G=>{D=D.replace("?",typeof G=="string"?G:JSON.stringify(G))});const ee={sql:D,params:g,duration:y,error:T};i&&(ee.queryNode=d),e(ee)}}async function oN(t){const{rows:e}=await ht`PRAGMA integrity_check`.execute(t);if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function sd(t,e){if(e)return await ht`PRAGMA user_version = ${ht.raw(`${e}`)}`.execute(t),e;const{rows:r}=await ht`PRAGMA user_version`.execute(t);if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function aN(t){return`__pre_${t}`}function uN(t,e=r=>r){return{setParam:r=>{let i;return(a,l)=>{if(!i){const{parameters:y,sql:g,query:O}=r({qb:t,param:aN}).compile();i={sql:g,query:l?.(O)||{kind:O.kind},parameters:y}}return{...i,parameters:i.parameters.map(y=>typeof y=="string"&&y.startsWith("__pre_")?e(a[y.slice(6)]):y)}}}}}async function cN(t,e){const r=e||`sp_${Date.now()%1e8}`;return await ht`savepoint ${ht.raw(r)}`.execute(t),{release:async()=>{await ht`release savepoint ${ht.raw(r)}`.execute(t)},rollback:async()=>{await ht`rollback to savepoint ${ht.raw(r)}`.execute(t)}}}var lN=class extends Error{constructor(){super("db file maybe broken")}};function fN(t){return t.toOperationNode().kind==="SelectQueryNode"}var hN=class{constructor(t){be(this,"kysely");be(this,"trxCount",0);be(this,"trx");be(this,"logger");be(this,"serializer",gm);const{dialect:e,logger:r,onQuery:i,plugins:a=[],serializerPluginOptions:l}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new sN(l));let y;i===!0?y=id({logger:this.logger?.debug||console.log,merge:!0}):i&&(y=id(i)),this.kysely=new Ra({dialect:e,log:y,plugins:a})}async syncSchema(t,e){try{if(e&&!await oN(this.kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new lN};await t(this.kysely,this.logger)}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}return this.logger?.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e){if(!this.trx)try{return await this.kysely.transaction().execute(async i=>(this.trx=i,this.logger?.debug("run in transaction"),await t(i)))}catch(i){return this.logError(i,e)}finally{this.trx=void 0}this.trxCount++;const r=await cN(this.trx,`sp_${this.trxCount}`);this.logger?.debug(`run in savepoint: sp_${this.trxCount}`);try{const i=await t(this.trx);return await r.release(),this.trxCount--,i}catch(i){return await r.rollback(),this.trxCount--,this.logError(i,e)}}async execute(t){return await t(this.getDB()).execute()}async executeTakeFirst(t){let e=t(this.getDB());return fN(e)&&(e=e.limit(1)),await e.executeTakeFirstOrThrow()}precompile(t){return this.logger?.debug?.("precompile"),uN(t(this.kysely),this.serializer)}async executeCompiled(t){return await this.getDB().executeQuery(t)}async executeCompiledTakeList(t){return(await this.executeCompiled(t)).rows}async raw(t,e){return typeof t=="string"?await this.getDB().executeQuery(hs.raw(t,e)):await t.execute(this.getDB())}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},Nm="__TIME_TRIGGER__";function dN(t,e){const{create:r,update:i}=e?.timeTrigger||{},a={type:"date",defaultTo:Nm};return r===!0?t.createAt=a:r&&(t[r]=a),i===!0?t.updateAt={...a,notNull:0}:i&&(t[i]={...a,notNull:0}),{columns:t,...e}}function vm(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function pf(t){return Array.isArray(t)?t:[t]}function pN(t){return typeof t=="function"}async function Du(t,e){await t.schema.dropTable(e).execute()}async function od(t,e,r){const{index:i,...a}=r;await t.transaction().execute(async l=>{const y=await mf(l,e,a);await xm(l,e,y),await _m(l,e,i)})}async function _m(t,e,r){for(const i of r||[]){const a=pf(i);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function mf(t,e,{columns:r,primary:i,timeTrigger:a,unique:l},y=!1){const g=a?{triggerKey:"rowid",update:void 0}:void 0;let O=!1,d=t.schema.createTable(e);y&&(d=d.temporary());for(const[T,D]of Object.entries(r)){let ee="text";const{type:G,notNull:le,defaultTo:b}=D,_=vm(G);ee=_.dataType,d=d.addColumn(T,ee,v=>_.isIncrements?(O=!0,g&&(g.triggerKey=T),v.autoIncrement().primaryKey()):b===Nm?(g&&le===0&&(g.update=T),v.defaultTo(ht`CURRENT_TIMESTAMP`)):(le===!0&&(v=v.notNull()),b!==void 0&&(v=v.defaultTo(pN(b)?b(ht):b)),v))}if(!O&&i){const T=pf(i);d=d.addPrimaryKeyConstraint(`pk#${T.join("#")}`,T)}for(const T of l||[]){const D=pf(T);d=d.addUniqueConstraint(`un#${D.join("#")}`,D)}return await d.ifNotExists().execute(),g}async function xm(t,e,r){if(!r||!r.update)return;const{triggerKey:i,update:a}=r,l=`tgr_${e}_${a}`;await ht`create trigger if not exists ${ht.ref(l)}
after update
on ${ht.table(e)}
begin
  update ${ht.table(e)}
  set ${ht.ref(a)} = CURRENT_TIMESTAMP
  where ${ht.ref(i)} = NEW.${ht.ref(i)};
end`.execute(t)}function mN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,i,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:i,primary:void 0,unique:[]},y=a.matchAll(r);for(const g of y){const[,O,d,T]=g;if(O.startsWith("pk#")){const[,...D]=O.split("#");l.primary=D}else if(O.startsWith("un#")){const[,...D]=O.split("#");l.unique.push(D)}else l.columns[O]={type:d,notNull:!!T}}return l}async function yN(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",cm).where("name","!=",lm).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(y=>l("name","not like",`${y}%`))))).select(["name","sql","type"]).$castTo().execute(),i={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:y}of r)l&&(y==="table"?i.existTables[a]=mN(l):y==="index"?i.indexList.push(a):i.triggerList.push(a));return i}async function wN(t,e,r={},i){const{reserveOldData:a,truncateIfExists:l=[],log:y,version:{current:g,skipSyncWhenSame:O}={},excludeTablePrefix:d}=r;if(g){if(O&&g===await sd(t))return;await sd(t,g)}const T=_=>y&&i?.debug(_),{existTables:D,indexList:ee,triggerList:G}=await yN(t,d);T("====== sync tables start ======");const le=new Set(Array.isArray(l)?l:l?Object.keys(D):[]);for(const _ of ee)await t.schema.dropIndex(_).ifExists().execute();for(const _ of G)await ht`drop trigger if exists ${ht.ref(_)}`.execute(t);for(const[_,v]of Object.entries(D))_ in e?(T(`diff table: ${_}`),await b(_,v,e[_])):(T(`remove table: ${_}`),await Du(t,_));for(const[_,v]of Object.entries(e))_ in D||(T(`create table: ${_}`),await od(t,_,v));T("======= sync tables end =======");async function b(_,v,C){if(le.has(_)){await t.transaction().execute(async he=>{await Du(he,_),await od(he,_,C),T("clear and sync structure")});return}const{index:S,...X}=C,re=gN(v.columns,C.columns);if(re.length===Object.keys(v.columns).length){T("same table structure, skip");return}T("different table structure, update"),await t.transaction().execute(async he=>{const nt=`_temp_${_}`;await mf(he,nt,v,!0),await he.insertInto(nt).expression(nr=>nr.selectFrom(_).selectAll()).execute(),await Du(he,_);const It=await mf(he,_,X);re.length&&await he.insertInto(_).columns(re).expression(nr=>nr.selectFrom(nt).select(re)).execute(),await _m(he,_,S),await xm(he,_,It),!a&&await Du(he,nt)}).then(()=>T(`restore columns: ${re}`)).catch(he=>i?.error(`fail to sync ${_}`,he))}}function gN(t,e){const r=[];for(const[i,a]of Object.entries(e))if(i in t){const{type:l,notNull:y=!1}=t[i];vm(a.type).dataType===l&&(a.notNull||!1)===y&&r.push(i)}return r}function bN(t,e={}){const{log:r}=e;return async(i,a)=>{await wN(i,t,e,r?a:void 0)}}const NN={test:dN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function eh(t){const e=new hN({dialect:t}),r=await e.syncSchema(bN(NN));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let i=0;i<10;i++)await e.transaction(async()=>{await e.transaction(async()=>{if(i>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(i=>i.selectFrom("test").selectAll())}const vN=new Mb({async database(){const t=await Kb({locateFile:()=>Jb});return new t.Database(await eN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),rN("sqljs",t)},isThrottle:!0}});function _N(){const t=by();function e(){eh(vN).then(r=>{t.value=r})}return{result:t,run:e}}function xN(){return new Worker(""+new URL("sqljsWorker-d018b4bc.js",import.meta.url).href,{type:"module"})}function ON(){return new Worker(""+new URL("officialWasmWorker-1f759375.js",import.meta.url).href,{type:"module"})}var Ve=0,qN=5,bt=10,Om=12,qm=14,Bi=21,Wl=25,EN=27,yf=100,CN=101,IN=3850,SN=522,TN=1,kN=2,Em=4,AN=8,ks=0,$i=1,zu=2,WN=3,Ku=4,RN=512,DN=1024,PN=2048,LN=16384,ad=1,ud=2,cd=3,ld=4,fd=5,hd=0x7fffffffffffffffn,dd=-0x8000000000000000n,_n=class extends Error{constructor(t,e){super(t),this.code=e}},Ss=!0;function MN(t){const e={},r=t._getSqliteFree(),i=t._malloc(8),a=[i,i+4];function l(b){if(typeof b!="string")return 0;const _=t.lengthBytesUTF8(b),v=t._sqlite3_malloc(_+1);return t.stringToUTF8(b,v,_+1),v}function y(b,_){return BigInt(_)<<32n|BigInt(b)&0xffffffffn}const g=function(){const b=BigInt(Number.MAX_SAFE_INTEGER)>>32n,_=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(v,C){return C>b||C<_?y(v,C):C*4294967296+(v&2147483647)-(v&2147483648)}}(),O=new Set;function d(b){if(!O.has(b))throw new _n("not a database",Bi)}const T=new Map;function D(b){if(!T.has(b))throw new _n("not a statement",Bi)}e.bind_collection=function(b,_){D(b);const v=Array.isArray(_),C=e.bind_parameter_count(b);for(let S=1;S<=C;++S){const X=v?S-1:e.bind_parameter_name(b,S),re=_[X];re!==void 0&&e.bind(b,S,re)}return Ve},e.bind=function(b,_,v){switch(D(b),typeof v){case"number":return v===(v|0)?e.bind_int(b,_,v):e.bind_double(b,_,v);case"string":return e.bind_text(b,_,v);default:return v instanceof Uint8Array||Array.isArray(v)?e.bind_blob(b,_,v):v===null?e.bind_null(b,_):typeof v=="bigint"?e.bind_int64(b,_,v):v===void 0?EN:(console.warn("unknown binding converted to null",v),e.bind_null(b,_))}},e.bind_blob=function(){const b="sqlite3_bind_blob",_=t.cwrap(b,...Oe("nnnnn:n"));return function(v,C,S){D(v);const X=S.byteLength??S.length,re=t._sqlite3_malloc(X);t.HEAPU8.subarray(re).set(S);const he=_(v,C,re,X,r);return le(b,he,T.get(v))}}(),e.bind_parameter_count=function(){const b="sqlite3_bind_parameter_count",_=t.cwrap(b,...Oe("n:n"));return function(v){return D(v),_(v)}}(),e.bind_double=function(){const b="sqlite3_bind_double",_=t.cwrap(b,...Oe("nnn:n"));return function(v,C,S){D(v);const X=_(v,C,S);return le(b,X,T.get(v))}}(),e.bind_int=function(){const b="sqlite3_bind_int",_=t.cwrap(b,...Oe("nnn:n"));return function(v,C,S){if(D(v),S>2147483647||S<-2147483648)return Wl;const X=_(v,C,S);return le(b,X,T.get(v))}}(),e.bind_int64=function(){const b="sqlite3_bind_int64",_=t.cwrap(b,...Oe("nnnn:n"));return function(v,C,S){if(D(v),S>hd||S<dd)return Wl;const X=S&0xffffffffn,re=S>>32n,he=_(v,C,Number(X),Number(re));return le(b,he,T.get(v))}}(),e.bind_null=function(){const b="sqlite3_bind_null",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){D(v);const S=_(v,C);return le(b,S,T.get(v))}}(),e.bind_parameter_name=function(){const b="sqlite3_bind_parameter_name",_=t.cwrap(b,...Oe("n:s"));return function(v,C){return D(v),_(v,C)}}(),e.bind_text=function(){const b="sqlite3_bind_text",_=t.cwrap(b,...Oe("nnnnn:n"));return function(v,C,S){D(v);const X=l(S),re=_(v,C,X,-1,r);return le(b,re,T.get(v))}}(),e.changes=function(){const b="sqlite3_changes",_=t.cwrap(b,...Oe("n:n"));return function(v){return d(v),_(v)}}(),e.close=function(){const b="sqlite3_close",_=t.cwrap(b,...Oe("n:n"),{async:Ss});return async function(v){d(v);const C=await _(v);return O.delete(v),le(b,C,v)}}(),e.column=function(b,_){D(b);const v=e.column_type(b,_);switch(v){case ld:return e.column_blob(b,_);case ud:return e.column_double(b,_);case ad:const C=e.column_int(b,_),S=t.getTempRet0();return g(C,S);case fd:return null;case cd:return e.column_text(b,_);default:throw new _n("unknown type",v)}},e.column_blob=function(){const b="sqlite3_column_blob",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){D(v);const S=e.column_bytes(v,C),X=_(v,C);return t.HEAPU8.subarray(X,X+S)}}(),e.column_bytes=function(){const b="sqlite3_column_bytes",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){return D(v),_(v,C)}}(),e.column_count=function(){const b="sqlite3_column_count",_=t.cwrap(b,...Oe("n:n"));return function(v){return D(v),_(v)}}(),e.column_double=function(){const b="sqlite3_column_double",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){return D(v),_(v,C)}}(),e.column_int=function(){const b="sqlite3_column_int64",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){return D(v),_(v,C)}}(),e.column_int64=function(){const b="sqlite3_column_int64",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){D(v);const S=_(v,C),X=t.getTempRet0();return y(S,X)}}(),e.column_name=function(){const b="sqlite3_column_name",_=t.cwrap(b,...Oe("nn:s"));return function(v,C){return D(v),_(v,C)}}(),e.column_names=function(b){const _=[],v=e.column_count(b);for(let C=0;C<v;++C)_.push(e.column_name(b,C));return _},e.column_text=function(){const b="sqlite3_column_text",_=t.cwrap(b,...Oe("nn:s"));return function(v,C){return D(v),_(v,C)}}(),e.column_type=function(){const b="sqlite3_column_type",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){return D(v),_(v,C)}}(),e.create_function=function(b,_,v,C,S,X,re,he){if(d(b),X&&!re&&!he){const nt=t.createFunction(b,_,v,C,S,X);return le("sqlite3_create_function",nt,b)}if(!X&&re&&he){const nt=t.createAggregate(b,_,v,C,S,re,he);return le("sqlite3_create_function",nt,b)}throw new _n("invalid function combination",Bi)},e.create_module=function(b,_,v,C){d(b);const S=t.createModule(b,_,v,C);return le("sqlite3_create_module",S,b)},e.data_count=function(){const b="sqlite3_data_count",_=t.cwrap(b,...Oe("n:n"));return function(v){return D(v),_(v)}}(),e.declare_vtab=function(){const b="sqlite3_declare_vtab",_=t.cwrap(b,...Oe("ns:n"));return function(v,C){const S=_(v,C);return le("sqlite3_declare_vtab",S)}}(),e.exec=async function(b,_,v){for await(const C of e.statements(b,_)){let S;for(;await e.step(C)===yf;)if(v){S=S??e.column_names(C);const X=e.row(C);await v(X,S)}}return Ve},e.finalize=function(){const b="sqlite3_finalize",_=t.cwrap(b,...Oe("n:n"),{async:Ss});return async function(v){if(!T.has(v))return Bi;const C=await _(v);return T.get(v),T.delete(v),C}}(),e.get_autocommit=function(){const b="sqlite3_get_autocommit",_=t.cwrap(b,...Oe("n:n"));return function(v){return _(v)}}(),e.libversion=function(){const b="sqlite3_libversion",_=t.cwrap(b,...Oe(":s"));return function(){return _()}}(),e.libversion_number=function(){const b="sqlite3_libversion_number",_=t.cwrap(b,...Oe(":n"));return function(){return _()}}(),e.limit=function(){const b="sqlite3_limit",_=t.cwrap(b,...Oe("nnn:n"));return function(v,C,S){return _(v,C,S)}}(),e.open_v2=function(){const b="sqlite3_open_v2",_=t.cwrap(b,...Oe("snnn:n"),{async:Ss});return async function(v,C,S){C=C||Em|kN,S=l(S);const X=await _(v,a[0],C,S),re=t.getValue(a[0],"*");return O.add(re),t._sqlite3_free(S),t.ccall("RegisterExtensionFunctions","void",["number"],[re]),le(b,X),re}}(),e.prepare_v2=function(){const b="sqlite3_prepare_v2",_=t.cwrap(b,...Oe("nnnnn:n"),{async:Ss});return async function(v,C){const S=await _(v,C,-1,a[0],a[1]);le(b,S,v);const X=t.getValue(a[0],"*");return X?(T.set(X,v),{stmt:X,sql:t.getValue(a[1],"*")}):null}}(),e.progress_handler=function(b,_,v,C){d(b),t.progressHandler(b,_,v,C)},e.reset=function(){const b="sqlite3_reset",_=t.cwrap(b,...Oe("n:n"),{async:Ss});return async function(v){D(v);const C=await _(v);return le(b,C,T.get(v))}}(),e.result=function(b,_){switch(typeof _){case"number":_===(_|0)?e.result_int(b,_):e.result_double(b,_);break;case"string":e.result_text(b,_);break;default:if(_ instanceof Uint8Array||Array.isArray(_))e.result_blob(b,_);else if(_===null)e.result_null(b);else{if(typeof _=="bigint")return e.result_int64(b,_);console.warn("unknown result converted to null",_),e.result_null(b)}break}},e.result_blob=function(){const b="sqlite3_result_blob",_=t.cwrap(b,...Oe("nnnn:n"));return function(v,C){const S=C.byteLength??C.length,X=t._sqlite3_malloc(S);t.HEAPU8.subarray(X).set(C),_(v,X,S,r)}}(),e.result_double=function(){const b="sqlite3_result_double",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){_(v,C)}}(),e.result_int=function(){const b="sqlite3_result_int",_=t.cwrap(b,...Oe("nn:n"));return function(v,C){_(v,C)}}(),e.result_int64=function(){const b="sqlite3_result_int64",_=t.cwrap(b,...Oe("nnn:n"));return function(v,C){if(C>hd||C<dd)return Wl;const S=C&0xffffffffn,X=C>>32n;_(v,Number(S),Number(X))}}(),e.result_null=function(){const b="sqlite3_result_null",_=t.cwrap(b,...Oe("n:n"));return function(v){_(v)}}(),e.result_text=function(){const b="sqlite3_result_text",_=t.cwrap(b,...Oe("nnnn:n"));return function(v,C){const S=l(C);_(v,S,-1,r)}}(),e.row=function(b){const _=[],v=e.data_count(b);for(let C=0;C<v;++C){const S=e.column(b,C);_.push(S?.buffer===t.HEAPU8.buffer?S.slice():S)}return _},e.set_authorizer=function(b,_,v){d(b);const C=t.setAuthorizer(b,_,v);return le("sqlite3_set_authorizer",C,b)},e.sql=function(){const b="sqlite3_sql",_=t.cwrap(b,...Oe("n:s"));return function(v){return D(v),_(v)}}(),e.statements=function(b,_){return async function*(){const v=e.str_new(b,_);let C={stmt:null,sql:e.str_value(v)};try{for(;C=await e.prepare_v2(b,C.sql);)yield C.stmt,e.finalize(C.stmt),C.stmt=null}finally{C?.stmt&&e.finalize(C.stmt),e.str_finish(v)}}()},e.step=function(){const b="sqlite3_step",_=t.cwrap(b,...Oe("n:n"),{async:Ss});return async function(v){D(v);const C=await _(v);return le(b,C,T.get(v),[yf,CN])}}();let ee=0;const G=new Map;e.str_new=function(b,_=""){const v=t.lengthBytesUTF8(_),C=ee++&4294967295,S={offset:t._sqlite3_malloc(v+1),bytes:v};return G.set(C,S),t.stringToUTF8(_,S.offset,S.bytes+1),C},e.str_appendall=function(b,_){if(!G.has(b))throw new _n("not a string",Bi);const v=G.get(b),C=t.lengthBytesUTF8(_),S=v.bytes+C,X=t._sqlite3_malloc(S+1);t.HEAPU8.subarray(X,X+S+1).set(t.HEAPU8.subarray(v.offset,v.offset+v.bytes)),t.stringToUTF8(_,X+v.bytes,C+1),t._sqlite3_free(v.offset),v.offset=X,v.bytes=S,G.set(b,v)},e.str_finish=function(b){if(!G.has(b))throw new _n("not a string",Bi);const _=G.get(b);G.delete(b),t._sqlite3_free(_.offset)},e.str_value=function(b){if(!G.has(b))throw new _n("not a string",Bi);return G.get(b).offset},e.user_data=function(b){return t.getFunctionUserData(b)},e.value=function(b){const _=e.value_type(b);switch(_){case ld:return e.value_blob(b);case ud:return e.value_double(b);case ad:const v=e.value_int(b),C=t.getTempRet0();return g(v,C);case fd:return null;case cd:return e.value_text(b);default:throw new _n("unknown type",_)}},e.value_blob=function(){const b="sqlite3_value_blob",_=t.cwrap(b,...Oe("n:n"));return function(v){const C=e.value_bytes(v),S=_(v);return t.HEAPU8.subarray(S,S+C)}}(),e.value_bytes=function(){const b="sqlite3_value_bytes",_=t.cwrap(b,...Oe("n:n"));return function(v){return _(v)}}(),e.value_double=function(){const b="sqlite3_value_double",_=t.cwrap(b,...Oe("n:n"));return function(v){return _(v)}}(),e.value_int=function(){const b="sqlite3_value_int64",_=t.cwrap(b,...Oe("n:n"));return function(v){return _(v)}}(),e.value_int64=function(){const b="sqlite3_value_int64",_=t.cwrap(b,...Oe("n:n"));return function(v){const C=_(v),S=t.getTempRet0();return y(C,S)}}(),e.value_text=function(){const b="sqlite3_value_text",_=t.cwrap(b,...Oe("n:s"));return function(v){return _(v)}}(),e.value_type=function(){const b="sqlite3_value_type",_=t.cwrap(b,...Oe("n:n"));return function(v){return _(v)}}(),e.vfs_register=function(b,_){const v=t.registerVFS(b,_);return le("sqlite3_vfs_register",v)};function le(b,_,v=null,C=[Ve]){if(C.includes(_))return _;const S=v?t.ccall("sqlite3_errmsg","string",["number"],[v]):b;throw new _n(S,_)}return e}function Oe(t){const e=[],r=t.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const i=[];for(let a of r[1])switch(a){case"n":i.push("number");break;case"s":i.push("string");break}return e.push(i),e}async function BN(t){const{fileName:e,sqlite:r}=await t,i=await r.open_v2(e);return{db:i,sqlite:r,async close(){await r.close(i)},changes(){return r.changes(i)},async lastInsertRowId(){return await new Promise(a=>r.exec(i,"SELECT last_insert_rowid()",([l])=>a(l)))},async run(a,l){const y=r.str_new(i,a),g=await r.prepare_v2(i,r.str_value(y));if(!g)return[];const O=g.stmt;try{l?.length&&r.bind_collection(O,l);const d=[],T=r.column_names(O);for(;await r.step(O)===yf;){const D=r.row(O);d.push(Object.fromEntries(T.map((ee,G)=>[ee,D[G]])))}return d}finally{await r.finalize(O)}}}}function FN(){return new URL(""+new URL("wa-sqlite-async-715b3d85.wasm",import.meta.url).href,self.location).href}var UN=class{constructor(){be(this,"mxPathName",64)}xClose(t){return bt}xRead(t,e,r){return bt}xWrite(t,e,r){return bt}xTruncate(t,e){return bt}xSync(t,e){return Ve}xFileSize(t,e){return bt}xLock(t,e){return Ve}xUnlock(t,e){return Ve}xCheckReservedLock(t,e){return e.setInt32(0,0,!0),Ve}xFileControl(t,e,r){return Om}xSectorSize(t){return 512}xDeviceCharacteristics(t){return 0}xOpen(t,e,r,i){return qm}xDelete(t,e){return bt}xAccess(t,e,r){return bt}handleAsync(t){return t()}},$N=(()=>{var t=import.meta.url;return function(e={}){var r=e,i,a;r.ready=new Promise((n,u)=>{i=n,a=u});var l=Object.assign({},r),y="./this.program",g=(n,u)=>{throw u},O=typeof window=="object",d=typeof importScripts=="function",T="",D;(O||d)&&(d?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),t&&(T=t),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",d&&(D=n=>{var u=new XMLHttpRequest;return u.open("GET",n,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var ee=r.print||console.log.bind(console),G=r.printErr||console.error.bind(console);Object.assign(r,l),l=null,r.thisProgram&&(y=r.thisProgram),r.quit&&(g=r.quit);var le;r.wasmBinary&&(le=r.wasmBinary),typeof WebAssembly!="object"&&me("no native wasm support detected");var b,_=!1,v,C,S,X,re,he,nt,It;function nr(){var n=b.buffer;r.HEAP8=C=new Int8Array(n),r.HEAP16=X=new Int16Array(n),r.HEAPU8=S=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAP32=re=new Int32Array(n),r.HEAPU32=he=new Uint32Array(n),r.HEAPF32=nt=new Float32Array(n),r.HEAPF64=It=new Float64Array(n)}var wr=[],Ar=[],Er=[],et=[];function gr(){var n=r.preRun.shift();wr.unshift(n)}var Pt=0,it=null;function me(n){throw r.onAbort&&r.onAbort(n),n="Aborted("+n+")",G(n),_=!0,v=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),a(n),n}var Ie=n=>n.startsWith("data:application/octet-stream;base64,"),_t;if(r.locateFile){if(_t="wa-sqlite-async.wasm",!Ie(_t)){var we=_t;_t=r.locateFile?r.locateFile(we,T):T+we}}else _t=new URL(""+new URL("wa-sqlite-async-715b3d85.wasm",import.meta.url).href,self.location).href;function Fe(n){if(n==_t&&le)return new Uint8Array(le);if(D)return D(n);throw"both async and sync fetching of the wasm failed"}function jt(n){return le||!O&&!d||typeof fetch!="function"?Promise.resolve().then(()=>Fe(n)):fetch(n,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+n+"'";return u.arrayBuffer()}).catch(()=>Fe(n))}function bn(n,u,f){return jt(n).then(m=>WebAssembly.instantiate(m,u)).then(m=>m).then(f,m=>{G(`failed to asynchronously prepare wasm: ${m}`),me(m)})}function ys(n,u){var f=_t;return le||typeof WebAssembly.instantiateStreaming!="function"||Ie(f)||typeof fetch!="function"?bn(f,n,u):fetch(f,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,n).then(u,function(N){return G(`wasm streaming compile failed: ${N}`),G("falling back to ArrayBuffer instantiation"),bn(f,n,u)}))}var de,Ae;function Yr(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Xr=n=>{for(;0<n.length;)n.shift()(r)};function He(n,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return C[n>>0];case"i8":return C[n>>0];case"i16":return X[n>>1];case"i32":return re[n>>2];case"i64":me("to do getValue(i64) use WASM_BIGINT");case"float":return nt[n>>2];case"double":return It[n>>3];case"*":return he[n>>2];default:me(`invalid type for getValue: ${u}`)}}var ir=r.noExitRuntime||!0;function xt(n,u,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":C[n>>0]=u;break;case"i8":C[n>>0]=u;break;case"i16":X[n>>1]=u;break;case"i32":re[n>>2]=u;break;case"i64":me("to do setValue(i64) use WASM_BIGINT");case"float":nt[n>>2]=u;break;case"double":It[n>>3]=u;break;case"*":he[n>>2]=u;break;default:me(`invalid type for setValue: ${f}`)}}var x=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,E=(n,u,f)=>{var m=u+f;for(f=u;n[f]&&!(f>=m);)++f;if(16<f-u&&n.buffer&&x)return x.decode(n.subarray(u,f));for(m="";u<f;){var N=n[u++];if(N&128){var A=n[u++]&63;if((N&224)==192)m+=String.fromCharCode((N&31)<<6|A);else{var k=n[u++]&63;N=(N&240)==224?(N&15)<<12|A<<6|k:(N&7)<<18|A<<12|k<<6|n[u++]&63,65536>N?m+=String.fromCharCode(N):(N-=65536,m+=String.fromCharCode(55296|N>>10,56320|N&1023))}}else m+=String.fromCharCode(N)}return m},R=(n,u)=>{for(var f=0,m=n.length-1;0<=m;m--){var N=n[m];N==="."?n.splice(m,1):N===".."?(n.splice(m,1),f++):f&&(n.splice(m,1),f--)}if(u)for(;f;f--)n.unshift("..");return n},Q=n=>{var u=n.charAt(0)==="/",f=n.substr(-1)==="/";return(n=R(n.split("/").filter(m=>!!m),!u).join("/"))||u||(n="."),n&&f&&(n+="/"),(u?"/":"")+n},H=n=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=u[0],u=u[1],!n&&!u?".":(u&&(u=u.substr(0,u.length-1)),n+u)},te=n=>{if(n==="/")return"/";n=Q(n),n=n.replace(/\/$/,"");var u=n.lastIndexOf("/");return u===-1?n:n.substr(u+1)},U=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>crypto.getRandomValues(n);me("initRandomDevice")},j=n=>(j=U())(n);function ne(){for(var n="",u=!1,f=arguments.length-1;-1<=f&&!u;f--){if(u=0<=f?arguments[f]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";n=u+"/"+n,u=u.charAt(0)==="/"}return n=R(n.split("/").filter(m=>!!m),!u).join("/"),(u?"/":"")+n||"."}var V=[],ue=n=>{for(var u=0,f=0;f<n.length;++f){var m=n.charCodeAt(f);127>=m?u++:2047>=m?u+=2:55296<=m&&57343>=m?(u+=4,++f):u+=3}return u},ae=(n,u,f,m)=>{if(!(0<m))return 0;var N=f;m=f+m-1;for(var A=0;A<n.length;++A){var k=n.charCodeAt(A);if(55296<=k&&57343>=k){var J=n.charCodeAt(++A);k=65536+((k&1023)<<10)|J&1023}if(127>=k){if(f>=m)break;u[f++]=k}else{if(2047>=k){if(f+1>=m)break;u[f++]=192|k>>6}else{if(65535>=k){if(f+2>=m)break;u[f++]=224|k>>12}else{if(f+3>=m)break;u[f++]=240|k>>18,u[f++]=128|k>>12&63}u[f++]=128|k>>6&63}u[f++]=128|k&63}}return u[f]=0,f-N},ce=[];function ge(n,u){ce[n]={input:[],Rb:[],bc:u},Wo(n,Ee)}var Ee={open(n){var u=ce[n.node.ec];if(!u)throw new Z(43);n.Sb=u,n.seekable=!1},close(n){n.Sb.bc.ic(n.Sb)},ic(n){n.Sb.bc.ic(n.Sb)},read(n,u,f,m){if(!n.Sb||!n.Sb.bc.xc)throw new Z(60);for(var N=0,A=0;A<m;A++){try{var k=n.Sb.bc.xc(n.Sb)}catch{throw new Z(29)}if(k===void 0&&N===0)throw new Z(6);if(k==null)break;N++,u[f+A]=k}return N&&(n.node.timestamp=Date.now()),N},write(n,u,f,m){if(!n.Sb||!n.Sb.bc.rc)throw new Z(60);try{for(var N=0;N<m;N++)n.Sb.bc.rc(n.Sb,u[f+N])}catch{throw new Z(29)}return m&&(n.node.timestamp=Date.now()),N}},Qe={xc(){e:{if(!V.length){var n=null;if(typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`)),!n){var u=null;break e}u=Array(ue(n)+1),n=ae(n,u,0,u.length),u.length=n,V=u}u=V.shift()}return u},rc(n,u){u===null||u===10?(ee(E(n.Rb,0)),n.Rb=[]):u!=0&&n.Rb.push(u)},ic(n){n.Rb&&0<n.Rb.length&&(ee(E(n.Rb,0)),n.Rb=[])},Yc(){return{Uc:25856,Wc:5,Tc:191,Vc:35387,Sc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Zc(){return 0},$c(){return[24,80]}},De={rc(n,u){u===null||u===10?(G(E(n.Rb,0)),n.Rb=[]):u!=0&&n.Rb.push(u)},ic(n){n.Rb&&0<n.Rb.length&&(G(E(n.Rb,0)),n.Rb=[])}};function tt(n,u){var f=n.Nb?n.Nb.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),f!=0&&(u=Math.max(u,256)),f=n.Nb,n.Nb=new Uint8Array(u),0<n.Pb&&n.Nb.set(f.subarray(0,n.Pb),0))}var ye={Vb:null,Ub(){return ye.createNode(null,"/",16895,0)},createNode(n,u,f,m){if((f&61440)===24576||(f&61440)===4096)throw new Z(63);return ye.Vb||(ye.Vb={dir:{node:{Tb:ye.Cb.Tb,Qb:ye.Cb.Qb,cc:ye.Cb.cc,jc:ye.Cb.jc,Bc:ye.Cb.Bc,oc:ye.Cb.oc,mc:ye.Cb.mc,Ac:ye.Cb.Ac,nc:ye.Cb.nc},stream:{Zb:ye.Mb.Zb}},file:{node:{Tb:ye.Cb.Tb,Qb:ye.Cb.Qb},stream:{Zb:ye.Mb.Zb,read:ye.Mb.read,write:ye.Mb.write,uc:ye.Mb.uc,kc:ye.Mb.kc,lc:ye.Mb.lc}},link:{node:{Tb:ye.Cb.Tb,Qb:ye.Cb.Qb,fc:ye.Cb.fc},stream:{}},vc:{node:{Tb:ye.Cb.Tb,Qb:ye.Cb.Qb},stream:ou}}),f=Ln(n,u,f,m),Vt(f.mode)?(f.Cb=ye.Vb.dir.node,f.Mb=ye.Vb.dir.stream,f.Nb={}):(f.mode&61440)===32768?(f.Cb=ye.Vb.file.node,f.Mb=ye.Vb.file.stream,f.Pb=0,f.Nb=null):(f.mode&61440)===40960?(f.Cb=ye.Vb.link.node,f.Mb=ye.Vb.link.stream):(f.mode&61440)===8192&&(f.Cb=ye.Vb.vc.node,f.Mb=ye.Vb.vc.stream),f.timestamp=Date.now(),n&&(n.Nb[u]=f,n.timestamp=f.timestamp),f},Xc(n){return n.Nb?n.Nb.subarray?n.Nb.subarray(0,n.Pb):new Uint8Array(n.Nb):new Uint8Array(0)},Cb:{Tb(n){var u={};return u.Hc=(n.mode&61440)===8192?n.id:1,u.yc=n.id,u.mode=n.mode,u.Nc=1,u.uid=0,u.Kc=0,u.ec=n.ec,Vt(n.mode)?u.size=4096:(n.mode&61440)===32768?u.size=n.Pb:(n.mode&61440)===40960?u.size=n.link.length:u.size=0,u.Dc=new Date(n.timestamp),u.Mc=new Date(n.timestamp),u.Gc=new Date(n.timestamp),u.Ec=4096,u.Fc=Math.ceil(u.size/u.Ec),u},Qb(n,u){if(u.mode!==void 0&&(n.mode=u.mode),u.timestamp!==void 0&&(n.timestamp=u.timestamp),u.size!==void 0&&(u=u.size,n.Pb!=u))if(u==0)n.Nb=null,n.Pb=0;else{var f=n.Nb;n.Nb=new Uint8Array(u),f&&n.Nb.set(f.subarray(0,Math.min(u,n.Pb))),n.Pb=u}},cc(){throw So[44]},jc(n,u,f,m){return ye.createNode(n,u,f,m)},Bc(n,u,f){if(Vt(n.mode)){try{var m=pt(u,f)}catch{}if(m)for(var N in m.Nb)throw new Z(55)}delete n.parent.Nb[n.name],n.parent.timestamp=Date.now(),n.name=f,u.Nb[f]=n,u.timestamp=n.parent.timestamp,n.parent=u},oc(n,u){delete n.Nb[u],n.timestamp=Date.now()},mc(n,u){var f=pt(n,u),m;for(m in f.Nb)throw new Z(55);delete n.Nb[u],n.timestamp=Date.now()},Ac(n){var u=[".",".."],f;for(f in n.Nb)n.Nb.hasOwnProperty(f)&&u.push(f);return u},nc(n,u,f){return n=ye.createNode(n,u,41471,0),n.link=f,n},fc(n){if((n.mode&61440)!==40960)throw new Z(28);return n.link}},Mb:{read(n,u,f,m,N){var A=n.node.Nb;if(N>=n.node.Pb)return 0;if(n=Math.min(n.node.Pb-N,m),8<n&&A.subarray)u.set(A.subarray(N,N+n),f);else for(m=0;m<n;m++)u[f+m]=A[N+m];return n},write(n,u,f,m,N,A){if(u.buffer===C.buffer&&(A=!1),!m)return 0;if(n=n.node,n.timestamp=Date.now(),u.subarray&&(!n.Nb||n.Nb.subarray)){if(A)return n.Nb=u.subarray(f,f+m),n.Pb=m;if(n.Pb===0&&N===0)return n.Nb=u.slice(f,f+m),n.Pb=m;if(N+m<=n.Pb)return n.Nb.set(u.subarray(f,f+m),N),m}if(tt(n,N+m),n.Nb.subarray&&u.subarray)n.Nb.set(u.subarray(f,f+m),N);else for(A=0;A<m;A++)n.Nb[N+A]=u[f+A];return n.Pb=Math.max(n.Pb,N+m),m},Zb(n,u,f){if(f===1?u+=n.position:f===2&&(n.node.mode&61440)===32768&&(u+=n.node.Pb),0>u)throw new Z(28);return u},uc(n,u,f){tt(n.node,u+f),n.node.Pb=Math.max(n.node.Pb,u+f)},kc(n,u,f,m,N){if((n.node.mode&61440)!==32768)throw new Z(43);if(n=n.node.Nb,N&2||n.buffer!==C.buffer){if((0<f||f+u<n.length)&&(n.subarray?n=n.subarray(f,f+u):n=Array.prototype.slice.call(n,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(N=vu(65536,u))?(S.fill(0,N,N+u),u=N):u=0,!u)throw new Z(48);C.set(n,u)}else f=!1,u=n.byteOffset;return{Oc:u,Cc:f}},lc(n,u,f,m){return ye.Mb.write(n,u,0,m,f,!1),0}}},Wr=(n,u)=>{var f=0;return n&&(f|=365),u&&(f|=146),f},Dn=null,Zr={},en=[],pe=1,ut=null,Pn=!0,Z=null,So={};function ct(n,u={}){if(n=ne(n),!n)return{path:"",node:null};if(u=Object.assign({wc:!0,sc:0},u),8<u.sc)throw new Z(32);n=n.split("/").filter(k=>!!k);for(var f=Dn,m="/",N=0;N<n.length;N++){var A=N===n.length-1;if(A&&u.parent)break;if(f=pt(f,n[N]),m=Q(m+"/"+n[N]),f.$b&&(!A||A&&u.wc)&&(f=f.$b.root),!A||u.Yb){for(A=0;(f.mode&61440)===40960;)if(f=xi(m),m=ne(H(m),f),f=ct(m,{sc:u.sc+1}).node,40<A++)throw new Z(32)}}return{path:m,node:f}}function vi(n){for(var u;;){if(n===n.parent)return n=n.Ub.zc,u?n[n.length-1]!=="/"?`${n}/${u}`:n+u:n;u=u?`${n.name}/${u}`:n.name,n=n.parent}}function F(n,u){for(var f=0,m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m)|0;return(n+f>>>0)%ut.length}function ws(n){var u=F(n.parent.id,n.name);if(ut[u]===n)ut[u]=n.ac;else for(u=ut[u];u;){if(u.ac===n){u.ac=n.ac;break}u=u.ac}}function pt(n,u){var f;if(f=(f=sr(n,"x"))?f:n.Cb.cc?0:2)throw new Z(f,n);for(f=ut[F(n.id,u)];f;f=f.ac){var m=f.name;if(f.parent.id===n.id&&m===u)return f}return n.Cb.cc(n,u)}function Ln(n,u,f,m){return n=new wu(n,u,f,m),u=F(n.parent.id,n.name),n.ac=ut[u],ut[u]=n}function Vt(n){return(n&61440)===16384}function To(n){var u=["r","w","rw"][n&3];return n&512&&(u+="w"),u}function sr(n,u){if(Pn)return 0;if(!u.includes("r")||n.mode&292){if(u.includes("w")&&!(n.mode&146)||u.includes("x")&&!(n.mode&73))return 2}else return 2;return 0}function ko(n,u){try{return pt(n,u),20}catch{}return sr(n,"wx")}function iu(n,u,f){try{var m=pt(n,u)}catch(N){return N.Ob}if(n=sr(n,"wx"))return n;if(f){if(!Vt(m.mode))return 54;if(m===m.parent||vi(m)==="/")return 10}else if(Vt(m.mode))return 31;return 0}function su(){for(var n=0;4096>=n;n++)if(!en[n])return n;throw new Z(33)}function mt(n){if(n=en[n],!n)throw new Z(8);return n}function Ao(n,u=-1){return Fn||(Fn=function(){this.hc={}},Fn.prototype={},Object.defineProperties(Fn.prototype,{object:{get(){return this.node},set(f){this.node=f}},flags:{get(){return this.hc.flags},set(f){this.hc.flags=f}},position:{get(){return this.hc.position},set(f){this.hc.position=f}}})),n=Object.assign(new Fn,n),u==-1&&(u=su()),n.Wb=u,en[u]=n}var ou={open(n){n.Mb=Zr[n.node.ec].Mb,n.Mb.open&&n.Mb.open(n)},Zb(){throw new Z(70)}};function Wo(n,u){Zr[n]={Mb:u}}function Ro(n,u){var f=u==="/",m=!u;if(f&&Dn)throw new Z(10);if(!f&&!m){var N=ct(u,{wc:!1});if(u=N.path,N=N.node,N.$b)throw new Z(10);if(!Vt(N.mode))throw new Z(54)}u={type:n,bd:{},zc:u,Lc:[]},n=n.Ub(u),n.Ub=u,u.root=n,f?Dn=n:N&&(N.$b=u,N.Ub&&N.Ub.Lc.push(u))}function Do(n,u,f){var m=ct(n,{parent:!0}).node;if(n=te(n),!n||n==="."||n==="..")throw new Z(28);var N=ko(m,n);if(N)throw new Z(N);if(!m.Cb.jc)throw new Z(63);return m.Cb.jc(m,n,u,f)}function or(n,u){return Do(n,(u!==void 0?u:511)&1023|16384,0)}function _i(n,u,f){typeof f>"u"&&(f=u,u=438),Do(n,u|8192,f)}function Mn(n,u){if(!ne(n))throw new Z(44);var f=ct(u,{parent:!0}).node;if(!f)throw new Z(44);u=te(u);var m=ko(f,u);if(m)throw new Z(m);if(!f.Cb.nc)throw new Z(63);f.Cb.nc(f,u,n)}function br(n){var u=ct(n,{parent:!0}).node;n=te(n);var f=pt(u,n),m=iu(u,n,!0);if(m)throw new Z(m);if(!u.Cb.mc)throw new Z(63);if(f.$b)throw new Z(10);u.Cb.mc(u,n),ws(f)}function xi(n){if(n=ct(n).node,!n)throw new Z(44);if(!n.Cb.fc)throw new Z(28);return ne(vi(n.parent),n.Cb.fc(n))}function Bn(n,u){if(n=ct(n,{Yb:!u}).node,!n)throw new Z(44);if(!n.Cb.Tb)throw new Z(63);return n.Cb.Tb(n)}function Po(n){return Bn(n,!0)}function Lo(n,u){if(n=typeof n=="string"?ct(n,{Yb:!0}).node:n,!n.Cb.Qb)throw new Z(63);n.Cb.Qb(n,{mode:u&4095|n.mode&-4096,timestamp:Date.now()})}function Mo(n,u){if(0>u)throw new Z(28);if(n=typeof n=="string"?ct(n,{Yb:!0}).node:n,!n.Cb.Qb)throw new Z(63);if(Vt(n.mode))throw new Z(31);if((n.mode&61440)!==32768)throw new Z(28);var f=sr(n,"w");if(f)throw new Z(f);n.Cb.Qb(n,{size:u,timestamp:Date.now()})}function tn(n,u,f){if(n==="")throw new Z(44);if(typeof u=="string"){var m={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof m>"u")throw Error(`Unknown file open mode: ${u}`);u=m}if(f=u&64?(typeof f>"u"?438:f)&4095|32768:0,typeof n=="object")var N=n;else{n=Q(n);try{N=ct(n,{Yb:!(u&131072)}).node}catch{}}if(m=!1,u&64)if(N){if(u&128)throw new Z(20)}else N=Do(n,f,0),m=!0;if(!N)throw new Z(44);if((N.mode&61440)===8192&&(u&=-513),u&65536&&!Vt(N.mode))throw new Z(54);if(!m&&(f=N?(N.mode&61440)===40960?32:Vt(N.mode)&&(To(u)!=="r"||u&512)?31:sr(N,To(u)):44))throw new Z(f);return u&512&&!m&&Mo(N,0),u&=-131713,N=Ao({node:N,path:vi(N),flags:u,seekable:!0,position:0,Mb:N.Mb,Rc:[],error:!1}),N.Mb.open&&N.Mb.open(N),!r.logReadFiles||u&1||(Ei||(Ei={}),n in Ei||(Ei[n]=1)),N}function Bo(n,u,f){if(n.Wb===null)throw new Z(8);if(!n.seekable||!n.Mb.Zb)throw new Z(70);if(f!=0&&f!=1&&f!=2)throw new Z(28);n.position=n.Mb.Zb(n,u,f),n.Rc=[]}function Oi(){Z||(Z=function(n,u){this.name="ErrnoError",this.node=u,this.Pc=function(f){this.Ob=f},this.Pc(n),this.message="FS error"},Z.prototype=Error(),Z.prototype.constructor=Z,[44].forEach(n=>{So[n]=new Z(n),So[n].stack="<generic error, no stack>"}))}var Fo;function Cr(n,u,f){n=Q("/dev/"+n);var m=Wr(!!u,!!f);qi||(qi=64);var N=qi++<<8|0;Wo(N,{open(A){A.seekable=!1},close(){f&&f.buffer&&f.buffer.length&&f(10)},read(A,k,J,W){for(var M=0,oe=0;oe<W;oe++){try{var z=u()}catch{throw new Z(29)}if(z===void 0&&M===0)throw new Z(6);if(z==null)break;M++,k[J+oe]=z}return M&&(A.node.timestamp=Date.now()),M},write(A,k,J,W){for(var M=0;M<W;M++)try{f(k[J+M])}catch{throw new Z(29)}return W&&(A.node.timestamp=Date.now()),M}}),_i(n,m,N)}var qi,ze={},Fn,Ei;function Nn(n,u,f){if(u.charAt(0)==="/")return u;if(n=n===-100?"/":mt(n).path,u.length==0){if(!f)throw new Z(44);return n}return Q(n+"/"+u)}function Ci(n,u,f){try{var m=n(u)}catch(A){if(A&&A.node&&Q(u)!==Q(vi(A.node)))return-54;throw A}re[f>>2]=m.Hc,re[f+4>>2]=m.mode,he[f+8>>2]=m.Nc,re[f+12>>2]=m.uid,re[f+16>>2]=m.Kc,re[f+20>>2]=m.ec,Ae=[m.size>>>0,(de=m.size,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[f+24>>2]=Ae[0],re[f+28>>2]=Ae[1],re[f+32>>2]=4096,re[f+36>>2]=m.Fc,n=m.Dc.getTime(),u=m.Mc.getTime();var N=m.Gc.getTime();return Ae=[Math.floor(n/1e3)>>>0,(de=Math.floor(n/1e3),1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[f+40>>2]=Ae[0],re[f+44>>2]=Ae[1],he[f+48>>2]=n%1e3*1e3,Ae=[Math.floor(u/1e3)>>>0,(de=Math.floor(u/1e3),1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[f+56>>2]=Ae[0],re[f+60>>2]=Ae[1],he[f+64>>2]=u%1e3*1e3,Ae=[Math.floor(N/1e3)>>>0,(de=Math.floor(N/1e3),1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[f+72>>2]=Ae[0],re[f+76>>2]=Ae[1],he[f+80>>2]=N%1e3*1e3,Ae=[m.yc>>>0,(de=m.yc,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[f+88>>2]=Ae[0],re[f+92>>2]=Ae[1],0}var Ii=void 0;function Si(){var n=re[+Ii>>2];return Ii+=4,n}var Rr=(n,u)=>u+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*u:NaN,Uo=[0,31,60,91,121,152,182,213,244,274,305,335],Ge=[0,31,59,90,120,151,181,212,243,273,304,334],Un=n=>{var u=ue(n)+1,f=Xo(u);return f&&ae(n,S,f,u),f},$n={},rn=()=>{if(!Qn){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},u;for(u in $n)$n[u]===void 0?delete n[u]:n[u]=$n[u];var f=[];for(u in n)f.push(`${u}=${n[u]}`);Qn=f}return Qn},Qn;function Ti(){}function ki(){}function ar(){}function gs(){}function $o(){}function au(){}function bs(){}function Qo(){}function Ns(){}function jo(){}function vs(){}function Dr(){}function _s(){}function xs(){}function jn(){}function Os(){}function uu(){}function Vo(){}function cu(){}function zo(){}function Ai(){}function Wi(){}function Ko(){}function Vn(){}function zn(){}function Pr(){}function Ri(){}function Jo(){}function o(){}function c(){}function h(){}function w(){}function q(){}function L(){}function B(){}function Ne(){}function Le(){}function We(){}function ot(){}var ur=0,Ho=n=>{v=n,ir||0<ur||(r.onExit&&r.onExit(n),_=!0),g(n,new Yr(n))},Go=n=>{n instanceof Yr||n=="unwind"||g(1,n)},Di=n=>{try{n()}catch(u){me(u)}};function wl(){var n=ie,u={},f;for(f in n)(function(m){var N=n[m];u[m]=typeof N=="function"?function(){qs.push(m);try{return N.apply(null,arguments)}finally{_||(qs.pop()===m||me(),Ir&&Lr===1&&qs.length===0&&(Lr=0,Di(Pi),typeof Fibers<"u"&&Fibers.cd()))}}:N})(f);return u}var Lr=0,Ir=null,lu=0,qs=[],fu={},hu={},gl=0,Yo=null,bl=[];function du(){return new Promise((n,u)=>{Yo={resolve:n,reject:u}})}function Nl(){var n=Xo(16396),u=n+12;he[n>>2]=u,he[n+4>>2]=u+16384,u=qs[0];var f=fu[u];return f===void 0&&(f=gl++,fu[u]=f,hu[f]=u),re[n+8>>2]=f,n}function pu(n){if(!_){if(Lr===0){var u=!1,f=!1;n((m=0)=>{if(!_&&(lu=m,u=!0,f)){Lr=2,Di(()=>ta(Ir)),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.resume(),m=!1;try{var N=(0,ie[hu[re[Ir+8>>2]]])()}catch(J){N=J,m=!0}var A=!1;if(!Ir){var k=Yo;k&&(Yo=null,(m?k.reject:k.resolve)(N),A=!0)}if(m&&!A)throw N}}),f=!0,u||(Lr=1,Ir=Nl(),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.pause(),Di(()=>Ou(Ir)))}else Lr===2?(Lr=0,Di(qu),bu(Ir),Ir=null,bl.forEach(m=>{if(!_)try{if(m(),!(ir||0<ur))try{v=m=v,Ho(m)}catch(N){Go(N)}}catch(N){Go(N)}})):me(`invalid state: ${Lr}`);return lu}}function mu(n){return pu(u=>{n().then(u)})}var yu={},Sr=(n,u,f,m,N)=>{function A(z){return--ur,W!==0&&xu(W),u==="string"?z?E(S,z):"":u==="boolean"?!!z:z}var k={string:z=>{var se=0;if(z!=null&&z!==0){se=ue(z)+1;var Se=ea(se);ae(z,S,Se,se),se=Se}return se},array:z=>{var se=ea(z.length);return C.set(z,se),se}};n=r["_"+n];var J=[],W=0;if(m)for(var M=0;M<m.length;M++){var oe=k[f[M]];oe?(W===0&&(W=Zo()),J[M]=oe(m[M])):J[M]=m[M]}return f=Ir,m=n.apply(null,J),N=N&&N.async,ur+=1,Ir!=f?du().then(A):(m=A(m),N?Promise.resolve(m):m)};function wu(n,u,f,m){n||(n=this),this.parent=n,this.Ub=n.Ub,this.$b=null,this.id=pe++,this.name=u,this.mode=f,this.Cb={},this.Mb={},this.ec=m}Object.defineProperties(wu.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),Oi(),ut=Array(4096),Ro(ye,"/"),or("/tmp"),or("/home"),or("/home/web_user"),function(){or("/dev"),Wo(259,{read:()=>0,write:(m,N,A,k)=>k}),_i("/dev/null",259),ge(1280,Qe),ge(1536,De),_i("/dev/tty",1280),_i("/dev/tty1",1536);var n=new Uint8Array(1024),u=0,f=()=>(u===0&&(u=j(n).byteLength),n[--u]);Cr("random",f),Cr("urandom",f),or("/dev/shm"),or("/dev/shm/tmp")}(),function(){or("/proc");var n=or("/proc/self");or("/proc/self/fd"),Ro({Ub(){var u=Ln(n,"fd",16895,73);return u.Cb={cc(f,m){var N=mt(+m);return f={parent:null,Ub:{zc:"fake"},Cb:{fc:()=>N.path}},f.parent=f}},u}},"/proc/self/fd")}(),function(){const n=new Map;r.setAuthorizer=function(u,f,m){return f?n.set(u,{f,tc:m}):n.delete(u),Sr("set_authorizer","number",["number"],[u])},Ti=function(u,f,m,N,A,k){if(n.has(u)){const{f:J,tc:W}=n.get(u);return J(W,f,m?m?E(S,m):"":null,N?N?E(S,N):"":null,A?A?E(S,A):"":null,k?k?E(S,k):"":null)}return 0}}(),function(){const n=new Map,u=new Map;r.createFunction=function(f,m,N,A,k,J){const W=n.size;return n.set(W,{f:J,Xb:k}),Sr("create_function","number","number string number number number number".split(" "),[f,m,N,A,W,0])},r.createAggregate=function(f,m,N,A,k,J,W){const M=n.size;return n.set(M,{step:J,Ic:W,Xb:k}),Sr("create_function","number","number string number number number number".split(" "),[f,m,N,A,M,1])},r.getFunctionUserData=function(f){return u.get(f)},ar=function(f,m,N,A){f=n.get(f),u.set(m,f.Xb),f.f(m,new Uint32Array(S.buffer,A,N)),u.delete(m)},$o=function(f,m,N,A){f=n.get(f),u.set(m,f.Xb),f.step(m,new Uint32Array(S.buffer,A,N)),u.delete(m)},ki=function(f,m){f=n.get(f),u.set(m,f.Xb),f.Ic(m),u.delete(m)}}(),function(){const n=new Map;r.progressHandler=function(u,f,m,N){return m?n.set(u,{f:m,tc:N}):n.delete(u),Sr("progress_handler",null,["number","number"],[u,f])},gs=function(u){if(n.has(u)){const{f,tc:m}=n.get(u);return f(m)}return 0}}(),function(){function n(W,M){const oe=`get${W}`,z=`set${W}`;return new Proxy(new DataView(S.buffer,M,W==="Int32"?4:8),{get(se,Se){if(Se===oe)return function(je,kt){if(!kt)throw Error("must be little endian");return se[Se](je,kt)};if(Se===z)return function(je,kt,Ot){if(!Ot)throw Error("must be little endian");return se[Se](je,kt,Ot)};if(typeof Se=="string"&&Se.match(/^(get)|(set)/))throw Error("invalid type");return se[Se]}})}const u=typeof yu=="object",f=new Map,m=new Map,N=new Map,A=u?new Set:null,k=u?new Set:null,J=new Map;Wi=function(W,M,oe,z){J.set(W?E(S,W):"",{size:M,dc:Array.from(new Uint32Array(S.buffer,z,oe))})},r.createModule=function(W,M,oe,z){u&&(oe.handleAsync=mu);const se=f.size;return f.set(se,{module:oe,Xb:z}),z=0,oe.xCreate&&(z|=1),oe.xConnect&&(z|=2),oe.xBestIndex&&(z|=4),oe.xDisconnect&&(z|=8),oe.xDestroy&&(z|=16),oe.xOpen&&(z|=32),oe.xClose&&(z|=64),oe.xFilter&&(z|=128),oe.xNext&&(z|=256),oe.xEof&&(z|=512),oe.xColumn&&(z|=1024),oe.xRowid&&(z|=2048),oe.xUpdate&&(z|=4096),oe.xBegin&&(z|=8192),oe.xSync&&(z|=16384),oe.xCommit&&(z|=32768),oe.xRollback&&(z|=65536),oe.xFindFunction&&(z|=131072),oe.xRename&&(z|=262144),Sr("create_module","number",["number","string","number","number"],[W,M,se,z])},Dr=function(W,M,oe,z,se,Se){if(M=f.get(M),m.set(se,M),u){A.delete(se);for(const je of A)m.delete(je)}return z=Array.from(new Uint32Array(S.buffer,z,oe)).map(je=>je?E(S,je):""),M.module.xCreate(W,M.Xb,z,se,n("Int32",Se))},vs=function(W,M,oe,z,se,Se){if(M=f.get(M),m.set(se,M),u){A.delete(se);for(const je of A)m.delete(je)}return z=Array.from(new Uint32Array(S.buffer,z,oe)).map(je=>je?E(S,je):""),M.module.xConnect(W,M.Xb,z,se,n("Int32",Se))},bs=function(W,M){var oe=m.get(W),z=J.get("sqlite3_index_info").dc;const se={};se.nConstraint=He(M+z[0],"i32"),se.aConstraint=[];for(var Se=He(M+z[1],"*"),je=J.get("sqlite3_index_constraint").size,kt=0;kt<se.nConstraint;++kt){var Ot=se.aConstraint,cr=Ot.push,Lt=Se+kt*je,Es=J.get("sqlite3_index_constraint").dc,Kn={};Kn.iColumn=He(Lt+Es[0],"i32"),Kn.op=He(Lt+Es[1],"i8"),Kn.usable=!!He(Lt+Es[2],"i8"),cr.call(Ot,Kn)}for(se.nOrderBy=He(M+z[2],"i32"),se.aOrderBy=[],Se=He(M+z[3],"*"),je=J.get("sqlite3_index_orderby").size,kt=0;kt<se.nOrderBy;++kt)Ot=se.aOrderBy,cr=Ot.push,Lt=Se+kt*je,Es=J.get("sqlite3_index_orderby").dc,Kn={},Kn.iColumn=He(Lt+Es[0],"i32"),Kn.desc=!!He(Lt+Es[1],"i8"),cr.call(Ot,Kn);for(se.aConstraintUsage=[],Se=0;Se<se.nConstraint;++Se)se.aConstraintUsage.push({argvIndex:0,omit:!1});for(se.idxNum=He(M+z[5],"i32"),se.idxStr=null,se.orderByConsumed=!!He(M+z[8],"i8"),se.estimatedCost=He(M+z[9],"double"),se.estimatedRows=He(M+z[10],"i32"),se.idxFlags=He(M+z[11],"i32"),se.colUsed=He(M+z[12],"i32"),W=oe.module.xBestIndex(W,se),oe=J.get("sqlite3_index_info").dc,z=He(M+oe[4],"*"),Se=J.get("sqlite3_index_constraint_usage").size,cr=0;cr<se.nConstraint;++cr)je=z+cr*Se,Ot=se.aConstraintUsage[cr],Lt=J.get("sqlite3_index_constraint_usage").dc,xt(je+Lt[0],Ot.argvIndex,"i32"),xt(je+Lt[1],Ot.omit?1:0,"i8");return xt(M+oe[5],se.idxNum,"i32"),typeof se.idxStr=="string"&&(z=ue(se.idxStr),Se=Sr("sqlite3_malloc","number",["number"],[z+1]),ae(se.idxStr,S,Se,z+1),xt(M+oe[6],Se,"*"),xt(M+oe[7],1,"i32")),xt(M+oe[8],se.orderByConsumed,"i32"),xt(M+oe[9],se.estimatedCost,"double"),xt(M+oe[10],se.estimatedRows,"i32"),xt(M+oe[11],se.idxFlags,"i32"),W},xs=function(W){const M=m.get(W);return u?A.add(W):m.delete(W),M.module.xDisconnect(W)},_s=function(W){const M=m.get(W);return u?A.add(W):m.delete(W),M.module.xDestroy(W)},Vo=function(W,M){const oe=m.get(W);if(N.set(M,oe),u){k.delete(M);for(const z of k)N.delete(z)}return oe.module.xOpen(W,M)},Qo=function(W){const M=N.get(W);return u?k.add(W):N.delete(W),M.module.xClose(W)},jn=function(W){return N.get(W).module.xEof(W)?1:0},Os=function(W,M,oe,z,se){const Se=N.get(W);return oe=oe?oe?E(S,oe):"":null,se=new Uint32Array(S.buffer,se,z),Se.module.xFilter(W,M,oe,se)},uu=function(W){return N.get(W).module.xNext(W)},Ns=function(W,M,oe){return N.get(W).module.xColumn(W,M,oe)},Ai=function(W,M){return N.get(W).module.xRowid(W,n("BigInt64",M))},Vn=function(W,M,oe,z){const se=m.get(W);return oe=new Uint32Array(S.buffer,oe,M),se.module.xUpdate(W,oe,n("BigInt64",z))},au=function(W){return m.get(W).module.xBegin(W)},Ko=function(W){return m.get(W).module.xSync(W)},jo=function(W){return m.get(W).module.xCommit(W)},zo=function(W){return m.get(W).module.xRollback(W)},cu=function(W,M){const oe=m.get(W);return M=M?E(S,M):"",oe.module.xRename(W,M)}}(),function(){function n(k,J){const W=`get${k}`,M=`set${k}`;return new Proxy(new DataView(S.buffer,J,k==="Int32"?4:8),{get(oe,z){if(z===W)return function(se,Se){if(!Se)throw Error("must be little endian");return oe[z](se,Se)};if(z===M)return function(se,Se,je){if(!je)throw Error("must be little endian");return oe[z](se,Se,je)};if(typeof z=="string"&&z.match(/^(get)|(set)/))throw Error("invalid type");return oe[z]}})}function u(k){return k>>=2,he[k]+he[k+1]*2**32}const f=typeof yu=="object",m=new Map,N=new Map;r.registerVFS=function(k,J){if(Sr("sqlite3_vfs_find","number",["string"],[k.name]))throw Error(`VFS '${k.name}' already registered`);f&&(k.handleAsync=mu);var W=k.ad??64;const M=r._malloc(4);return J=Sr("register_vfs","number",["string","number","number","number"],[k.name,W,J?1:0,M]),J||(W=He(M,"*"),m.set(W,k)),r._free(M),J};const A=f?new Set:null;Ri=function(k){const J=N.get(k);return f?A.add(k):N.delete(k),J.xClose(k)},L=function(k,J,W,M){return N.get(k).xRead(k,S.subarray(J,J+W),u(M))},ot=function(k,J,W,M){return N.get(k).xWrite(k,S.subarray(J,J+W),u(M))},Le=function(k,J){return N.get(k).xTruncate(k,u(J))},Ne=function(k,J){return N.get(k).xSync(k,J)},h=function(k,J){const W=N.get(k);return J=n("BigInt64",J),W.xFileSize(k,J)},w=function(k,J){return N.get(k).xLock(k,J)},We=function(k,J){return N.get(k).xUnlock(k,J)},Pr=function(k,J){const W=N.get(k);return J=n("Int32",J),W.xCheckReservedLock(k,J)},c=function(k,J,W){const M=N.get(k);return W=new DataView(S.buffer,W),M.xFileControl(k,J,W)},B=function(k){return N.get(k).xSectorSize(k)},o=function(k){return N.get(k).xDeviceCharacteristics(k)},q=function(k,J,W,M,oe){if(k=m.get(k),N.set(W,k),f){A.delete(W);for(var z of A)N.delete(z)}if(z=null,M&64){z=1;const se=[];for(;z;){const Se=S[J++];if(Se)se.push(Se);else switch(S[J]||(z=null),z){case 1:se.push(63),z=2;break;case 2:se.push(61),z=3;break;case 3:se.push(38),z=2}}z=new TextDecoder().decode(new Uint8Array(se))}else J&&(z=J?E(S,J):"");return oe=n("Int32",oe),k.xOpen(z,W,M,oe)},Jo=function(k,J,W){return m.get(k).xDelete(J?E(S,J):"",W)},zn=function(k,J,W,M){return k=m.get(k),M=n("Int32",M),k.xAccess(J?E(S,J):"",W,M)}}();var vl={a:(n,u,f,m)=>{me(`Assertion failed: ${n?E(S,n):""}, at: `+[u?u?E(S,u):"":"unknown filename",f,m?m?E(S,m):"":"unknown function"])},K:function(n,u){try{return n=n?E(S,n):"",Lo(n,u),0}catch(f){if(typeof ze>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},M:function(n,u,f){try{if(u=u?E(S,u):"",u=Nn(n,u),f&-8)return-28;var m=ct(u,{Yb:!0}).node;return m?(n="",f&4&&(n+="r"),f&2&&(n+="w"),f&1&&(n+="x"),n&&sr(m,n)?-2:0):-44}catch(N){if(typeof ze>"u"||N.name!=="ErrnoError")throw N;return-N.Ob}},L:function(n,u){try{var f=mt(n);return Lo(f.node,u),0}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},J:function(n){try{var u=mt(n).node,f=typeof u=="string"?ct(u,{Yb:!0}).node:u;if(!f.Cb.Qb)throw new Z(63);return f.Cb.Qb(f,{timestamp:Date.now()}),0}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},b:function(n,u,f){Ii=f;try{var m=mt(n);switch(u){case 0:var N=Si();if(0>N)return-28;for(;en[N];)N++;return Ao(m,N).Wb;case 1:case 2:return 0;case 3:return m.flags;case 4:return N=Si(),m.flags|=N,0;case 5:return N=Si(),X[N+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return re[gu()>>2]=28,-1;default:return-28}}catch(A){if(typeof ze>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},I:function(n,u){try{var f=mt(n);return Ci(Bn,f.path,u)}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},n:function(n,u,f){u=Rr(u,f);try{if(isNaN(u))return 61;var m=mt(n);if(!(m.flags&2097155))throw new Z(28);return Mo(m.node,u),0}catch(N){if(typeof ze>"u"||N.name!=="ErrnoError")throw N;return-N.Ob}},C:function(n,u){try{if(u===0)return-28;var f=ue("/")+1;return u<f?-68:(ae("/",S,n,u),f)}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},F:function(n,u){try{return n=n?E(S,n):"",Ci(Po,n,u)}catch(f){if(typeof ze>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},z:function(n,u,f){try{return u=u?E(S,u):"",u=Nn(n,u),u=Q(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),or(u,f),0}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},E:function(n,u,f,m){try{u=u?E(S,u):"";var N=m&256;return u=Nn(n,u,m&4096),Ci(N?Po:Bn,u,f)}catch(A){if(typeof ze>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},y:function(n,u,f,m){Ii=m;try{u=u?E(S,u):"",u=Nn(n,u);var N=m?Si():0;return tn(u,f,N).Wb}catch(A){if(typeof ze>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},w:function(n,u,f,m){try{if(u=u?E(S,u):"",u=Nn(n,u),0>=m)return-28;var N=xi(u),A=Math.min(m,ue(N)),k=C[f+A];return ae(N,S,f,m+1),C[f+A]=k,A}catch(J){if(typeof ze>"u"||J.name!=="ErrnoError")throw J;return-J.Ob}},u:function(n){try{return n=n?E(S,n):"",br(n),0}catch(u){if(typeof ze>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(n,u){try{return n=n?E(S,n):"",Ci(Bn,n,u)}catch(f){if(typeof ze>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},r:function(n,u,f){try{if(u=u?E(S,u):"",u=Nn(n,u),f===0){n=u;var m=ct(n,{parent:!0}).node;if(!m)throw new Z(44);var N=te(n),A=pt(m,N),k=iu(m,N,!1);if(k)throw new Z(k);if(!m.Cb.oc)throw new Z(63);if(A.$b)throw new Z(10);m.Cb.oc(m,N),ws(A)}else f===512?br(u):me("Invalid flags passed to unlinkat");return 0}catch(J){if(typeof ze>"u"||J.name!=="ErrnoError")throw J;return-J.Ob}},q:function(n,u,f){try{if(u=u?E(S,u):"",u=Nn(n,u,!0),f){var m=he[f>>2]+4294967296*re[f+4>>2],N=re[f+8>>2];A=1e3*m+N/1e6,f+=16,m=he[f>>2]+4294967296*re[f+4>>2],N=re[f+8>>2],k=1e3*m+N/1e6}else var A=Date.now(),k=A;n=A;var J=ct(u,{Yb:!0}).node;return J.Cb.Qb(J,{timestamp:Math.max(n,k)}),0}catch(W){if(typeof ze>"u"||W.name!=="ErrnoError")throw W;return-W.Ob}},l:function(n,u,f){n=new Date(1e3*Rr(n,u)),re[f>>2]=n.getSeconds(),re[f+4>>2]=n.getMinutes(),re[f+8>>2]=n.getHours(),re[f+12>>2]=n.getDate(),re[f+16>>2]=n.getMonth(),re[f+20>>2]=n.getFullYear()-1900,re[f+24>>2]=n.getDay(),u=n.getFullYear(),re[f+28>>2]=(u%4!==0||u%100===0&&u%400!==0?Ge:Uo)[n.getMonth()]+n.getDate()-1|0,re[f+36>>2]=-(60*n.getTimezoneOffset()),u=new Date(n.getFullYear(),6,1).getTimezoneOffset();var m=new Date(n.getFullYear(),0,1).getTimezoneOffset();re[f+32>>2]=(u!=m&&n.getTimezoneOffset()==Math.min(m,u))|0},i:function(n,u,f,m,N,A,k,J){N=Rr(N,A);try{if(isNaN(N))return 61;var W=mt(m);if(u&2&&!(f&2)&&(W.flags&2097155)!==2)throw new Z(2);if((W.flags&2097155)===1)throw new Z(2);if(!W.Mb.kc)throw new Z(43);var M=W.Mb.kc(W,n,N,u,f),oe=M.Oc;return re[k>>2]=M.Cc,he[J>>2]=oe,0}catch(z){if(typeof ze>"u"||z.name!=="ErrnoError")throw z;return-z.Ob}},j:function(n,u,f,m,N,A,k){A=Rr(A,k);try{if(isNaN(A))return 61;var J=mt(N);if(f&2){if((J.node.mode&61440)!==32768)throw new Z(43);m&2||J.Mb.lc&&J.Mb.lc(J,S.slice(n,n+u),A,u,m)}}catch(W){if(typeof ze>"u"||W.name!=="ErrnoError")throw W;return-W.Ob}},s:(n,u,f)=>{function m(W){return(W=W.toTimeString().match(/\(([A-Za-z ]+)\)$/))?W[1]:"GMT"}var N=new Date().getFullYear(),A=new Date(N,0,1),k=new Date(N,6,1);N=A.getTimezoneOffset();var J=k.getTimezoneOffset();he[n>>2]=60*Math.max(N,J),re[u>>2]=+(N!=J),n=m(A),u=m(k),n=Un(n),u=Un(u),J<N?(he[f>>2]=n,he[f+4>>2]=u):(he[f>>2]=u,he[f+4>>2]=n)},e:()=>Date.now(),d:()=>performance.now(),o:n=>{var u=S.length;if(n>>>=0,2147483648<n)return!1;for(var f=1;4>=f;f*=2){var m=u*(1+.2/f);m=Math.min(m,n+100663296);var N=Math;m=Math.max(n,m);e:{N=(N.min.call(N,2147483648,m+(65536-m%65536)%65536)-b.buffer.byteLength+65535)/65536;try{b.grow(N),nr();var A=1;break e}catch{}A=void 0}if(A)return!0}return!1},A:(n,u)=>{var f=0;return rn().forEach((m,N)=>{var A=u+f;for(N=he[n+4*N>>2]=A,A=0;A<m.length;++A)C[N++>>0]=m.charCodeAt(A);C[N>>0]=0,f+=m.length+1}),0},B:(n,u)=>{var f=rn();he[n>>2]=f.length;var m=0;return f.forEach(N=>m+=N.length+1),he[u>>2]=m,0},f:function(n){try{var u=mt(n);if(u.Wb===null)throw new Z(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(f){throw f}finally{en[u.Wb]=null}return u.Wb=null,0}catch(f){if(typeof ze>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},p:function(n,u){try{var f=mt(n);return C[u>>0]=f.Sb?2:Vt(f.mode)?3:(f.mode&61440)===40960?7:4,X[u+2>>1]=0,Ae=[0,(de=0,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[u+8>>2]=Ae[0],re[u+12>>2]=Ae[1],Ae=[0,(de=0,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[u+16>>2]=Ae[0],re[u+20>>2]=Ae[1],0}catch(m){if(typeof ze>"u"||m.name!=="ErrnoError")throw m;return m.Ob}},x:function(n,u,f,m){try{e:{var N=mt(n);n=u;for(var A,k=u=0;k<f;k++){var J=he[n>>2],W=he[n+4>>2];n+=8;var M=N,oe=J,z=W,se=A,Se=C;if(0>z||0>se)throw new Z(28);if(M.Wb===null)throw new Z(8);if((M.flags&2097155)===1)throw new Z(8);if(Vt(M.node.mode))throw new Z(31);if(!M.Mb.read)throw new Z(28);var je=typeof se<"u";if(!je)se=M.position;else if(!M.seekable)throw new Z(70);var kt=M.Mb.read(M,Se,oe,z,se);je||(M.position+=kt);var Ot=kt;if(0>Ot){var cr=-1;break e}if(u+=Ot,Ot<W)break;typeof A<"u"&&(A+=Ot)}cr=u}return he[m>>2]=cr,0}catch(Lt){if(typeof ze>"u"||Lt.name!=="ErrnoError")throw Lt;return Lt.Ob}},m:function(n,u,f,m,N){u=Rr(u,f);try{if(isNaN(u))return 61;var A=mt(n);return Bo(A,u,m),Ae=[A.position>>>0,(de=A.position,1<=+Math.abs(de)?0<de?+Math.floor(de/4294967296)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],re[N>>2]=Ae[0],re[N+4>>2]=Ae[1],A.pc&&u===0&&m===0&&(A.pc=null),0}catch(k){if(typeof ze>"u"||k.name!=="ErrnoError")throw k;return k.Ob}},D:function(n){try{var u=mt(n);return pu(f=>{var m=u.node.Ub;m.type.Qc?m.type.Qc(m,!1,N=>{f(N?29:0)}):f(0)})}catch(f){if(typeof ze>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},t:function(n,u,f,m){try{e:{var N=mt(n);n=u;for(var A,k=u=0;k<f;k++){var J=he[n>>2],W=he[n+4>>2];n+=8;var M=N,oe=J,z=W,se=A,Se=C;if(0>z||0>se)throw new Z(28);if(M.Wb===null)throw new Z(8);if(!(M.flags&2097155))throw new Z(8);if(Vt(M.node.mode))throw new Z(31);if(!M.Mb.write)throw new Z(28);M.seekable&&M.flags&1024&&Bo(M,0,2);var je=typeof se<"u";if(!je)se=M.position;else if(!M.seekable)throw new Z(70);var kt=M.Mb.write(M,Se,oe,z,se,void 0);je||(M.position+=kt);var Ot=kt;if(0>Ot){var cr=-1;break e}u+=Ot,typeof A<"u"&&(A+=Ot)}cr=u}return he[m>>2]=cr,0}catch(Lt){if(typeof ze>"u"||Lt.name!=="ErrnoError")throw Lt;return Lt.Ob}},ra:Ti,N:ki,ga:ar,ca:gs,Y:$o,la:au,G:bs,h:Qo,oa:Ns,ja:jo,ea:vs,fa:Dr,k:_s,v:xs,pa:jn,g:Os,qa:uu,da:Vo,ha:cu,ia:zo,na:Ai,c:Wi,ka:Ko,ma:Vn,aa:zn,V:Pr,$:Ri,ba:Jo,S:o,U:c,Z:h,X:w,R:q,Q:L,T:B,_:Ne,O:Le,W:We,P:ot},ie=function(){function n(f){return ie=f.exports,ie=wl(),b=ie.sa,nr(),Ar.unshift(ie.ta),Pt--,r.monitorRunDependencies&&r.monitorRunDependencies(Pt),Pt==0&&it&&(f=it,it=null,f()),ie}var u={a:vl};if(Pt++,r.monitorRunDependencies&&r.monitorRunDependencies(Pt),r.instantiateWasm)try{return r.instantiateWasm(u,n)}catch(f){G(`Module.instantiateWasm callback failed with error: ${f}`),a(f)}return ys(u,function(f){n(f.instance)}).catch(a),{}}();r._sqlite3_vfs_find=n=>(r._sqlite3_vfs_find=ie.ua)(n),r._sqlite3_malloc=n=>(r._sqlite3_malloc=ie.va)(n),r._sqlite3_free=n=>(r._sqlite3_free=ie.wa)(n),r._sqlite3_prepare_v2=(n,u,f,m,N)=>(r._sqlite3_prepare_v2=ie.xa)(n,u,f,m,N),r._sqlite3_step=n=>(r._sqlite3_step=ie.ya)(n),r._sqlite3_column_int64=(n,u)=>(r._sqlite3_column_int64=ie.za)(n,u),r._sqlite3_column_int=(n,u)=>(r._sqlite3_column_int=ie.Aa)(n,u),r._sqlite3_finalize=n=>(r._sqlite3_finalize=ie.Ba)(n),r._sqlite3_reset=n=>(r._sqlite3_reset=ie.Ca)(n),r._sqlite3_clear_bindings=n=>(r._sqlite3_clear_bindings=ie.Da)(n),r._sqlite3_value_blob=n=>(r._sqlite3_value_blob=ie.Ea)(n),r._sqlite3_value_text=n=>(r._sqlite3_value_text=ie.Fa)(n),r._sqlite3_value_bytes=n=>(r._sqlite3_value_bytes=ie.Ga)(n),r._sqlite3_value_double=n=>(r._sqlite3_value_double=ie.Ha)(n),r._sqlite3_value_int=n=>(r._sqlite3_value_int=ie.Ia)(n),r._sqlite3_value_int64=n=>(r._sqlite3_value_int64=ie.Ja)(n),r._sqlite3_value_type=n=>(r._sqlite3_value_type=ie.Ka)(n),r._sqlite3_result_blob=(n,u,f,m)=>(r._sqlite3_result_blob=ie.La)(n,u,f,m),r._sqlite3_result_double=(n,u)=>(r._sqlite3_result_double=ie.Ma)(n,u),r._sqlite3_result_error=(n,u,f)=>(r._sqlite3_result_error=ie.Na)(n,u,f),r._sqlite3_result_int=(n,u)=>(r._sqlite3_result_int=ie.Oa)(n,u),r._sqlite3_result_int64=(n,u,f)=>(r._sqlite3_result_int64=ie.Pa)(n,u,f),r._sqlite3_result_null=n=>(r._sqlite3_result_null=ie.Qa)(n),r._sqlite3_result_text=(n,u,f,m)=>(r._sqlite3_result_text=ie.Ra)(n,u,f,m),r._sqlite3_column_count=n=>(r._sqlite3_column_count=ie.Sa)(n),r._sqlite3_data_count=n=>(r._sqlite3_data_count=ie.Ta)(n),r._sqlite3_column_blob=(n,u)=>(r._sqlite3_column_blob=ie.Ua)(n,u),r._sqlite3_column_bytes=(n,u)=>(r._sqlite3_column_bytes=ie.Va)(n,u),r._sqlite3_column_double=(n,u)=>(r._sqlite3_column_double=ie.Wa)(n,u),r._sqlite3_column_text=(n,u)=>(r._sqlite3_column_text=ie.Xa)(n,u),r._sqlite3_column_type=(n,u)=>(r._sqlite3_column_type=ie.Ya)(n,u),r._sqlite3_column_name=(n,u)=>(r._sqlite3_column_name=ie.Za)(n,u),r._sqlite3_bind_blob=(n,u,f,m,N)=>(r._sqlite3_bind_blob=ie._a)(n,u,f,m,N),r._sqlite3_bind_double=(n,u,f)=>(r._sqlite3_bind_double=ie.$a)(n,u,f),r._sqlite3_bind_int=(n,u,f)=>(r._sqlite3_bind_int=ie.ab)(n,u,f),r._sqlite3_bind_int64=(n,u,f,m)=>(r._sqlite3_bind_int64=ie.bb)(n,u,f,m),r._sqlite3_bind_null=(n,u)=>(r._sqlite3_bind_null=ie.cb)(n,u),r._sqlite3_bind_text=(n,u,f,m,N)=>(r._sqlite3_bind_text=ie.db)(n,u,f,m,N),r._sqlite3_bind_parameter_count=n=>(r._sqlite3_bind_parameter_count=ie.eb)(n),r._sqlite3_bind_parameter_name=(n,u)=>(r._sqlite3_bind_parameter_name=ie.fb)(n,u),r._sqlite3_sql=n=>(r._sqlite3_sql=ie.gb)(n),r._sqlite3_exec=(n,u,f,m,N)=>(r._sqlite3_exec=ie.hb)(n,u,f,m,N),r._sqlite3_errmsg=n=>(r._sqlite3_errmsg=ie.ib)(n),r._sqlite3_declare_vtab=(n,u)=>(r._sqlite3_declare_vtab=ie.jb)(n,u),r._sqlite3_libversion=()=>(r._sqlite3_libversion=ie.kb)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=ie.lb)(),r._sqlite3_changes=n=>(r._sqlite3_changes=ie.mb)(n),r._sqlite3_close=n=>(r._sqlite3_close=ie.nb)(n),r._sqlite3_limit=(n,u,f)=>(r._sqlite3_limit=ie.ob)(n,u,f),r._sqlite3_open_v2=(n,u,f,m)=>(r._sqlite3_open_v2=ie.pb)(n,u,f,m),r._sqlite3_get_autocommit=n=>(r._sqlite3_get_autocommit=ie.qb)(n);var gu=()=>(gu=ie.rb)(),Xo=r._malloc=n=>(Xo=r._malloc=ie.sb)(n),bu=r._free=n=>(bu=r._free=ie.tb)(n);r._RegisterExtensionFunctions=n=>(r._RegisterExtensionFunctions=ie.ub)(n),r._set_authorizer=n=>(r._set_authorizer=ie.vb)(n),r._create_function=(n,u,f,m,N,A)=>(r._create_function=ie.wb)(n,u,f,m,N,A),r._create_module=(n,u,f,m)=>(r._create_module=ie.xb)(n,u,f,m),r._progress_handler=(n,u)=>(r._progress_handler=ie.yb)(n,u),r._register_vfs=(n,u,f,m)=>(r._register_vfs=ie.zb)(n,u,f,m),r._getSqliteFree=()=>(r._getSqliteFree=ie.Ab)();var Nu=r._main=(n,u)=>(Nu=r._main=ie.Bb)(n,u),vu=(n,u)=>(vu=ie.Db)(n,u),_u=()=>(_u=ie.Eb)(),Zo=()=>(Zo=ie.Fb)(),xu=n=>(xu=ie.Gb)(n),ea=n=>(ea=ie.Hb)(n),Ou=n=>(Ou=ie.Ib)(n),Pi=()=>(Pi=ie.Jb)(),ta=n=>(ta=ie.Kb)(n),qu=()=>(qu=ie.Lb)();r.getTempRet0=_u,r.ccall=Sr,r.cwrap=(n,u,f,m)=>{var N=!f||f.every(A=>A==="number"||A==="boolean");return u!=="string"&&N&&!m?r["_"+n]:function(){return Sr(n,u,f,arguments,m)}},r.setValue=xt,r.getValue=He,r.UTF8ToString=(n,u)=>n?E(S,n,u):"",r.stringToUTF8=(n,u,f)=>ae(n,S,u,f),r.lengthBytesUTF8=ue;var I;it=function n(){I||K(),I||(it=n)};function K(){function n(){if(!I&&(I=!0,r.calledRun=!0,!_)){if(r.noFSInit||Fo||(Fo=!0,Oi(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?Cr("stdin",r.stdin):Mn("/dev/tty","/dev/stdin"),r.stdout?Cr("stdout",null,r.stdout):Mn("/dev/tty","/dev/stdout"),r.stderr?Cr("stderr",null,r.stderr):Mn("/dev/tty1","/dev/stderr"),tn("/dev/stdin",0),tn("/dev/stdout",1),tn("/dev/stderr",1)),Pn=!1,Xr(Ar),Xr(Er),i(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),fe){var u=Nu;try{var f=u(0,0);v=f,Ho(f)}catch(m){Go(m)}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)u=r.postRun.shift(),et.unshift(u);Xr(et)}}if(!(0<Pt)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)gr();Xr(wr),0<Pt||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),n()},1)):n())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var fe=!0;return r.noInitialRun&&(fe=!1),K(),e.ready}})(),QN=$N,jN=ks|$i|zu|WN|Ku,Ut,lo,Ha,Ga,wf,Yc,Cm,Xc,Im,gd,VN=(gd=class{constructor(){P(this,Ga);P(this,Yc);P(this,Xc);P(this,Ut,ks);be(this,"timeoutMillis",0);P(this,lo,new Map);P(this,Ha,Promise.resolve(0))}get state(){return s(this,Ut)}async lock(t){return _e(this,Ga,wf).call(this,_e(this,Yc,Cm),t)}async unlock(t){return _e(this,Ga,wf).call(this,_e(this,Xc,Im),t)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(t,e){return new Promise(async(r,i)=>{try{await navigator.locks.request(t,e,a=>{if(r(a),a)return new Promise(l=>s(this,lo).set(t,l))})}catch(a){i(a)}})}_releaseWebLock(t){s(this,lo).get(t)?.(),s(this,lo).delete(t)}async _pollWebLock(t){return(await navigator.locks.query()).held.find(({name:r})=>r===t)?.mode}_getTimeoutSignal(){if(this.timeoutMillis){const t=new AbortController;return setTimeout(()=>t.abort(),this.timeoutMillis),t.signal}}},Ut=new WeakMap,lo=new WeakMap,Ha=new WeakMap,Ga=new WeakSet,wf=async function(t,e){const r=e&jN;try{const i=()=>t.call(this,r);return await $(this,Ha,s(this,Ha).then(i,i)),$(this,Ut,r),Ve}catch(i){return i.name==="AbortError"?qN:(console.error(i),IN)}},Yc=new WeakSet,Cm=async function(t){if(t===s(this,Ut))return Ve;switch(s(this,Ut)){case ks:switch(t){case $i:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}case $i:switch(t){case zu:return this._SHAREDtoRESERVED();case Ku:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}case zu:switch(t){case Ku:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}},Xc=new WeakSet,Im=async function(t){if(t===s(this,Ut))return Ve;switch(s(this,Ut)){case Ku:switch(t){case $i:return this._EXCLUSIVEtoSHARED();case ks:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}case zu:switch(t){case $i:return this._RESERVEDtoSHARED();case ks:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}case $i:switch(t){case ks:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}default:throw new Error(`unexpected transition ${s(this,Ut)} -> ${t}`)}},gd),zN=class extends VN{constructor(t){super(),this._lockName=t+"-outer",this._reservedName=t+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},KN=5e3,JN=0,Rl=new WeakMap;function on(...t){}var fo,ho,Ya,Rt,Xa,po,is,Zc,Sm,bd,HN=(bd=class{constructor(t,e={durability:"default"}){P(this,Zc);P(this,fo,void 0);P(this,ho,void 0);P(this,Ya,void 0);P(this,Rt,null);P(this,Xa,0);P(this,po,Promise.resolve());P(this,is,Promise.resolve());$(this,ho,Promise.resolve(t).then(r=>$(this,fo,r))),$(this,Ya,e)}async close(){const t=s(this,fo)??await s(this,ho);await s(this,po),await this.sync(),t.close()}async run(t,e){const r=s(this,po).then(()=>_e(this,Zc,Sm).call(this,t,e));return $(this,po,r.catch(()=>{})),r}async sync(){await s(this,is),$(this,is,Promise.resolve())}},fo=new WeakMap,ho=new WeakMap,Ya=new WeakMap,Rt=new WeakMap,Xa=new WeakMap,po=new WeakMap,is=new WeakMap,Zc=new WeakSet,Sm=async function(t,e){const r=s(this,fo)??await s(this,ho);if(t==="readwrite"&&s(this,Rt)?.mode==="readonly")$(this,Rt,null);else if(performance.now()-s(this,Xa)>KN){try{s(this,Rt)?.commit()}catch(i){if(i.name!=="InvalidStateError")throw i}await new Promise(i=>setTimeout(i)),$(this,Rt,null)}for(let i=0;i<2;++i){if(!s(this,Rt)){$(this,Rt,r.transaction(r.objectStoreNames,t,s(this,Ya)));const a=$(this,Xa,performance.now());$(this,is,s(this,is).then(()=>new Promise((l,y)=>{s(this,Rt).addEventListener("complete",g=>{l(),s(this,Rt)===g.target&&$(this,Rt,null),on(`transaction ${Rl.get(g.target)} complete`)}),s(this,Rt).addEventListener("abort",g=>{console.warn("tx abort",(performance.now()-a)/1e3);const O=g.target.error;y(O),s(this,Rt)===g.target&&$(this,Rt,null),on(`transaction ${Rl.get(g.target)} aborted`,O)})}))),Rl.set(s(this,Rt),JN++)}try{const a=Object.fromEntries(Array.from(r.objectStoreNames,l=>[l,new GN(s(this,Rt).objectStore(l))]));return await e(a)}catch(a){if($(this,Rt,null),i)throw a}}},bd);function Yn(t){return new Promise((e,r)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>r(t.error))})}var Tt,Nd,GN=(Nd=class{constructor(t){P(this,Tt,void 0);$(this,Tt,t)}get(t){on(`get ${s(this,Tt).name}`,t);const e=s(this,Tt).get(t);return Yn(e)}getAll(t,e){on(`getAll ${s(this,Tt).name}`,t,e);const r=s(this,Tt).getAll(t,e);return Yn(r)}getKey(t){on(`getKey ${s(this,Tt).name}`,t);const e=s(this,Tt).getKey(t);return Yn(e)}getAllKeys(t,e){on(`getAllKeys ${s(this,Tt).name}`,t,e);const r=s(this,Tt).getAllKeys(t,e);return Yn(r)}put(t,e){on(`put ${s(this,Tt).name}`,t,e);const r=s(this,Tt).put(t,e);return Yn(r)}delete(t){on(`delete ${s(this,Tt).name}`,t);const e=s(this,Tt).delete(t);return Yn(e)}clear(){on(`clear ${s(this,Tt).name}`);const t=s(this,Tt).clear();return Yn(t)}index(t){return new YN(s(this,Tt).index(t))}},Tt=new WeakMap,Nd),ss,vd,YN=(vd=class{constructor(t){P(this,ss,void 0);$(this,ss,t)}getAllKeys(t,e){on(`IDBIndex.getAllKeys ${s(this,ss).objectStore.name}<${s(this,ss).name}>`,t,e);const r=s(this,ss).getAllKeys(t,e);return Yn(r)}},ss=new WeakMap,vd),XN=512,pd=3e3,md={durability:"default",purge:"deferred",purgeAtLeast:16};function lr(...t){}var li,$t,ft,os,as,Tn,Za,gf,el,Tm,tl,km,fi,As,rl,Am,_d,ZN=(_d=class extends UN{constructor(e="wa-sqlite",r=md){super();P(this,Za);P(this,el);P(this,tl);P(this,fi);P(this,rl);P(this,li,void 0);P(this,$t,new Map);P(this,ft,void 0);P(this,os,new Set);P(this,as,performance.now());P(this,Tn,new Set);this.name=e,$(this,li,Object.assign({},md,r)),$(this,ft,new HN(ev(e),{durability:s(this,li).durability}))}async close(){for(const e of s(this,$t).keys())await this.xClose(e);await s(this,ft)?.close(),$(this,ft,null)}xOpen(e,r,i,a){return this.handleAsync(async()=>{e===null&&(e=`null_${r}`),lr(`xOpen ${e} 0x${r.toString(16)} 0x${i.toString(16)}`);try{const l=new URL(e,"http://localhost/"),y={path:l.pathname,flags:i,block0:null,isMetadataChanged:!0,locks:new zN(l.pathname)};return s(this,$t).set(r,y),await s(this,ft).run("readwrite",async({blocks:g})=>{if(y.block0=await g.get(_e(this,fi,As).call(this,y,0)),!y.block0)if(i&Em)y.block0={path:y.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},g.put(y.block0);else throw new Error(`file not found: ${y.path}`)}),a.setInt32(0,i&TN,!0),Ve}catch(l){return console.error(l),qm}})}xClose(e){return this.handleAsync(async()=>{try{const r=s(this,$t).get(e);return r&&(lr(`xClose ${r.path}`),s(this,$t).delete(e),r.flags&AN&&s(this,ft).run("readwrite",({blocks:i})=>{i.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),Ve}catch(r){return console.error(r),bt}})}xRead(e,r,i){return this.handleAsync(async()=>{const a=s(this,$t).get(e);lr(`xRead ${a.path} ${r.byteLength} ${i}`);try{return await s(this,ft).run("readonly",async({blocks:y})=>{let g=0;for(;g<r.byteLength;){const O=i+g,d=O<a.block0.data.byteLength?a.block0:await y.get(_e(this,fi,As).call(this,a,-O));if(!d||d.data.byteLength-d.offset<=O)return r.fill(0,g),SN;const T=r.subarray(g),D=O+d.offset,ee=Math.min(Math.max(d.data.byteLength-D,0),T.byteLength);T.set(d.data.subarray(D,D+ee)),g+=ee}return Ve})}catch(l){return console.error(l),bt}})}xWrite(e,r,i){const a=s(this,Tn).has(e);if(a||performance.now()-s(this,as)>pd){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&s(this,Tn).add(e),await new Promise(g=>setTimeout(g));const y=_e(this,Za,gf).call(this,e,r,i);return $(this,as,performance.now()),y});return a&&s(this,Tn).delete(e),l}return _e(this,Za,gf).call(this,e,r,i)}xTruncate(e,r){const i=s(this,$t).get(e);lr(`xTruncate ${i.path} ${r}`);try{Object.assign(i.block0,{fileSize:r,data:i.block0.data.slice(0,r)});const a=Object.assign({},i.block0);return s(this,ft).run("readwrite",({blocks:l})=>{l.delete(_e(this,fi,As).call(this,i,-1/0,-r)),l.put(a)}),Ve}catch(a){return console.error(a),bt}}xSync(e,r){const i=s(this,Tn).has(e);if(i||s(this,li).durability!=="relaxed"||performance.now()-s(this,as)>pd){const l=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&s(this,Tn).add(e);const y=await _e(this,el,Tm).call(this,e,r);return $(this,as,performance.now()),y});return i&&s(this,Tn).delete(e),l}const a=s(this,$t).get(e);return lr(`xSync ${a.path} ${r}`),Ve}xFileSize(e,r){const i=s(this,$t).get(e);return lr(`xFileSize ${i.path}`),r.setBigInt64(0,BigInt(i.block0.fileSize),!0),Ve}xLock(e,r){return this.handleAsync(async()=>{const i=s(this,$t).get(e);lr(`xLock ${i.path} ${r}`);try{const a=await i.locks.lock(r);return a===Ve&&i.locks.state===$i&&(i.block0=await s(this,ft).run("readonly",({blocks:l})=>l.get(_e(this,fi,As).call(this,i,0)))),a}catch(a){return console.error(a),bt}})}xUnlock(e,r){return this.handleAsync(async()=>{const i=s(this,$t).get(e);lr(`xUnlock ${i.path} ${r}`);try{return i.locks.unlock(r)}catch(a){return console.error(a),bt}})}xCheckReservedLock(e,r){return this.handleAsync(async()=>{const i=s(this,$t).get(e);lr(`xCheckReservedLock ${i.path}`);const a=await i.locks.isSomewhereReserved();return r.setInt32(0,a?1:0,!0),Ve})}xSectorSize(e){return XN}xDeviceCharacteristics(e){return LN|RN|DN|PN}xFileControl(e,r,i){const a=s(this,$t).get(e);switch(lr(`xFileControl ${a.path} ${r}`),r){case 11:return a.overwrite=!0,Ve;case 21:if(a.overwrite)try{return this.handleAsync(async()=>(await _e(this,rl,Am).call(this,a),Ve))}catch(l){return console.error(l),bt}if(a.isMetadataChanged)try{s(this,ft).run("readwrite",async({blocks:l})=>{await l.put(a.block0)})}catch(l){return console.error(l),bt}return Ve;case 22:return a.overwrite=!1,Ve;case 31:return this.handleAsync(async()=>{try{return a.block0.version--,a.changedPages=new Set,s(this,ft).run("readwrite",async({blocks:l})=>{const y=await l.index("version").getAllKeys(IDBKeyRange.bound([a.path],[a.path,a.block0.version]));for(const g of y)l.delete(g)}),Ve}catch(l){return console.error(l),bt}});case 32:try{const l=Object.assign({},a.block0);l.data=l.data.slice();const y=a.changedPages;return a.changedPages=null,a.isMetadataChanged=!1,s(this,ft).run("readwrite",async({blocks:g})=>{g.put(l);const O=await g.get([a.path,"purge",0])??{path:a.path,offset:"purge",version:0,data:new Map,count:0};O.count+=y.size;for(const d of y)O.data.set(d,l.version);g.put(O),_e(this,tl,km).call(this,a.path,O.count)}),Ve}catch(l){return console.error(l),bt}case 33:return this.handleAsync(async()=>{try{return a.changedPages=null,a.isMetadataChanged=!1,a.block0=await s(this,ft).run("readonly",({blocks:l})=>l.get([a.path,0,a.block0.version+1])),Ve}catch(l){return console.error(l),bt}});default:return Om}}xAccess(e,r,i){return this.handleAsync(async()=>{try{const a=new URL(e,"file://localhost/").pathname;lr(`xAccess ${a} ${r}`);const l=await s(this,ft).run("readonly",({blocks:y})=>y.getKey(_e(this,fi,As).call(this,{path:a},0)));return i.setInt32(0,l?1:0,!0),Ve}catch(a){return console.error(a),bt}})}xDelete(e,r){return this.handleAsync(async()=>{const i=new URL(e,"file://localhost/").pathname;try{return s(this,ft).run("readwrite",({blocks:a})=>a.delete(IDBKeyRange.bound([i],[i,[]]))),r&&await s(this,ft).sync(),Ve}catch(a){return console.error(a),bt}})}async purge(e){const r=Date.now();await s(this,ft).run("readwrite",async({blocks:i})=>{const a=await i.get([e,"purge",0]);if(a){for(const[l,y]of a.data)i.delete(IDBKeyRange.bound([e,l,y],[e,l,1/0],!0,!1));await i.delete([e,"purge",0])}lr(`purge ${e} ${a?.data.size??0} pages in ${Date.now()-r} ms`)})}},li=new WeakMap,$t=new WeakMap,ft=new WeakMap,os=new WeakMap,as=new WeakMap,Tn=new WeakMap,Za=new WeakSet,gf=function(e,r,i){const a=s(this,$t).get(e);lr(`xWrite ${a.path} ${r.byteLength} ${i}`);try{const l=a.block0.fileSize;a.block0.fileSize<i+r.byteLength&&(a.block0.fileSize=i+r.byteLength,a.isMetadataChanged=!0);const y=i===0?a.block0:{path:a.path,offset:-i,version:a.block0.version,data:null};return y.data=r.slice(),a.changedPages?(l===a.block0.fileSize&&a.changedPages.add(-i),i!==0&&s(this,ft).run("readwrite",({blocks:g})=>g.put(y))):s(this,ft).run("readwrite",({blocks:g})=>g.put(y)),a.isMetadataChanged=i===0?!1:a.isMetadataChanged,Ve}catch(l){return console.error(l),bt}},el=new WeakSet,Tm=async function(e,r){const i=s(this,$t).get(e);lr(`xSync ${i.path} ${r}`);try{await s(this,ft).sync()}catch(a){return console.error(a),bt}return Ve},tl=new WeakSet,km=function(e,r){s(this,li).purge==="manual"||s(this,os).has(e)||r<s(this,li).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(e),s(this,os).delete(e)}):setTimeout(()=>{this.purge(e),s(this,os).delete(e)}),s(this,os).add(e))},fi=new WeakSet,As=function(e,r,i=0){const a=!r||-r<e.block0.data.length?-1/0:e.block0.version;return IDBKeyRange.bound([e.path,r,a],[e.path,i,1/0])},rl=new WeakSet,Am=async function(e){const r=e.block0.data.length;if(r<18)return;const i=new DataView(e.block0.data.buffer,e.block0.data.byteOffset);let a=i.getUint16(16);if(a===1&&(a=65536),a===r)return;const l=Math.max(r,a),y=l/r,g=l/a,d=i.getUint32(28)*a,T=e.block0.version;await s(this,ft).run("readwrite",async({blocks:D})=>{const ee=await D.index("version").getAllKeys(IDBKeyRange.bound([e.path,T+1],[e.path,1/0]));for(const G of ee)D.delete(G);D.delete([e.path,"purge",0]);for(let G=0;G<d;G+=l){const le=await D.getAll(IDBKeyRange.lowerBound([e.path,-(G+l),1/0]),y);for(const b of le)D.delete([b.path,b.offset,b.version]);if(g===1){const b=new Uint8Array(a);for(const v of le)b.set(v.data,-(G+v.offset));const _={path:e.path,offset:-G,version:T,data:b};_.offset===0&&(_.fileSize=d,e.block0=_),D.put(_)}else{const b=le[0];for(let _=0;_<g;++_){const v=-(G+_*a);if(-v>=d)break;const C={path:b.path,offset:v,version:T,data:b.data.subarray(_*a,(_+1)*a)};C.offset===0&&(C.fileSize=d,e.block0=C),D.put(C)}}}})},_d);function ev(t){return new Promise((e,r)=>{const i=globalThis.indexedDB.open(t,5);i.addEventListener("upgradeneeded",function(){i.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),i.addEventListener("success",()=>{e(i.result)}),i.addEventListener("error",()=>{r(i.error)})})}async function tv(t,e={}){const{url:r,durability:i="relaxed",...a}=e,l=await QN(r?{locateFile:()=>r}:void 0),y=MN(l);return y.vfs_register(new ZN(t,{durability:i,...a})),{fileName:t,sqlite:y}}const rv=new Ub({async database(){return await BN(tv("test idb",{url:FN()}))}});function nv(){console.log("start wa-sqlite test"),eh(rv).then(t=>{t?.forEach(e=>console.log("[wa-sqlite]",e))})}var iv=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let i;e?r?(i=t.get(e))&&i.splice(i.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(i=>i(...r))},once(e,r){let i=(...a)=>{r(...a),this.off(e,i)};this.on(e,i)}}),sv=class{constructor(t){be(this,"config");be(this,"worker");be(this,"connection");be(this,"connectionMutex",new ov);be(this,"mitt");this.config=t}async init(){this.worker=this.config.worker??new Worker(new URL(""+new URL("worker-e317a68d.js",import.meta.url).href,self.location),{type:"module"}),this.mitt=iv(),this.worker.onmessage=({data:{type:t,...e}})=>{this.mitt?.emit(t,e)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:this.config.url,preferOPFS:this.config.preferOPFS}),await new Promise((t,e)=>{this.mitt?.once("init",({err:r})=>{r?e(r):t()})}),this.connection=new av(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(hs.raw("begin"))}async commitTransaction(t){await t.executeQuery(hs.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(hs.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},ov=class{constructor(){be(this,"promise");be(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},av=class{constructor(t,e){be(this,"worker");be(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:i}=t,a=i.kind==="SelectQueryNode";return this.worker.postMessage({type:"run",isSelect:a,sql:r,parameters:e}),new Promise((l,y)=>{!this.mitt&&y("kysely instance has been destroyed"),this.mitt.once("run",({data:g,err:O})=>{!O&&g?l(g):y(O)})})}},eu,xd,uv=(xd=class{constructor(t){P(this,eu,void 0);$(this,eu,t)}createDriver(){return new sv(s(this,eu))}createQueryCompiler(){return new um}createAdapter(){return new dm}createIntrospector(t){return new fm(t)}},eu=new WeakMap,xd);const cv=new uv({fileName:"wa-sqlite-worker-test",preferOPFS:!0});function lv(){console.log("start wa-sqlite-worker test"),eh(cv).then(t=>{t?.forEach(e=>console.log("[wa-sqlite-worker]",e))})}const fv=Ct("h1",null,[qa(" test "),Ct("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),qa(" WASM dialect ")],-1),hv=Ct("br",null,null,-1),dv=Ct("h3",null,"see worker result in console",-1),pv=Ct("h3",null,[qa(" you can explore "),Ct("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),qa(" file using "),Ct("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),mv=Ct("br",null,null,-1),yv={class:"buttons"},wv=Ct("br",null,null,-1),gv=Ct("div",null," result run in main thread: ",-1),bv=Fy({__name:"App",setup(t){const e=new xN,{result:r,run:i}=_N(),a=new ON;function l(){i()}function y(){e.postMessage("")}function g(){a.postMessage("")}function O(){nv()}function d(){lv()}async function T(){try{(await window.indexedDB.databases()).forEach(G=>window.indexedDB.deleteDatabase(G.name))}catch{}}async function D(){await rd("sqljs"),await rd("sqljsWorker"),await T();const ee=await navigator.storage?.getDirectory();try{await ee.removeEntry("test.db")}catch{}try{await ee.removeEntry("test.db-journal")}catch{}try{await ee.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}console.log("clear all")}return(ee,G)=>(bw(),_w(ln,null,[fv,hv,dv,pv,mv,Ct("div",yv,[Ct("button",{onClick:G[0]||(G[0]=le=>l())}," test sqljs in main thread "),Ct("button",{onClick:G[1]||(G[1]=le=>y())}," test sqljs in Worker "),Ct("button",{onClick:G[2]||(G[2]=le=>g())}," test officialWasm in Worker "),Ct("button",{onClick:G[3]||(G[3]=le=>O())}," test wa-sqlite in main thread "),Ct("button",{onClick:G[4]||(G[4]=le=>d())}," test wa-sqlite in Worker "),Ct("button",{onClick:G[5]||(G[5]=le=>D())}," clear ")]),wv,gv,Ct("pre",null,""+Jm(zd(r))+`
  `,1)],64))}});og(bv).mount("#root");
