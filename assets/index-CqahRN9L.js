var Kp=Object.defineProperty;var Hp=(t,e,r)=>e in t?Kp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ee=(t,e,r)=>(Hp(t,typeof e!="symbol"?e+"":e,r),r),Pu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var n=(t,e,r)=>(Pu(t,e,"read from private field"),r?r.call(t):e.get(t)),O=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},k=(t,e,r,s)=>(Pu(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);var ue=(t,e,r)=>(Pu(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Il(t,e){const r=new Set(t.split(","));return e?s=>r.has(s.toLowerCase()):s=>r.has(s)}const Ue={},Wn=[],Xt=()=>{},Gp=()=>!1,du=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),El=t=>t.startsWith("onUpdate:"),yt=Object.assign,kl=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},zp=Object.prototype.hasOwnProperty,we=(t,e)=>zp.call(t,e),re=Array.isArray,_n=t=>fu(t)==="[object Map]",ad=t=>fu(t)==="[object Set]",le=t=>typeof t=="function",ct=t=>typeof t=="string",ss=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",ud=t=>(Je(t)||le(t))&&le(t.then)&&le(t.catch),ld=Object.prototype.toString,fu=t=>ld.call(t),Yp=t=>fu(t).slice(8,-1),cd=t=>fu(t)==="[object Object]",Sl=t=>ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ws=Il(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pu=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Xp=/-(\w)/g,Zn=pu(t=>t.replace(Xp,(e,r)=>r?r.toUpperCase():"")),Zp=/\B([A-Z])/g,os=pu(t=>t.replace(Zp,"-$1").toLowerCase()),hd=pu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bu=pu(t=>t?`on${hd(t)}`:""),Oi=(t,e)=>!Object.is(t,e),Fu=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},oa=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},em=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Zc;const dd=()=>Zc||(Zc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Al(t){if(re(t)){const e={};for(let r=0;r<t.length;r++){const s=t[r],a=ct(s)?nm(s):Al(s);if(a)for(const l in a)e[l]=a[l]}return e}else if(ct(t)||Je(t))return t}const tm=/;(?![^(]*\))/g,rm=/:([^]+)/,im=/\/\*[^]*?\*\//g;function nm(t){const e={};return t.replace(im,"").split(tm).forEach(r=>{if(r){const s=r.split(rm);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Rl(t){let e="";if(ct(t))e=t;else if(re(t))for(let r=0;r<t.length;r++){const s=Rl(t[r]);s&&(e+=s+" ")}else if(Je(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const sm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",om=Il(sm);function fd(t){return!!t||t===""}const am=t=>ct(t)?t:t==null?"":re(t)||Je(t)&&(t.toString===ld||!le(t.toString))?JSON.stringify(t,pd,2):String(t),pd=(t,e)=>e&&e.__v_isRef?pd(t,e.value):_n(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[s,a],l)=>(r[Uu(s,l)+" =>"]=a,r),{})}:ad(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Uu(r))}:ss(e)?Uu(e):Je(e)&&!re(e)&&!cd(e)?String(e):e,Uu=(t,e="")=>{var r;return ss(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ir;class um{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ir,!e&&ir&&(this.index=(ir.scopes||(ir.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=ir;try{return ir=this,e()}finally{ir=r}}}on(){ir=this}off(){ir=this.parent}stop(e){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function lm(t,e=ir){e&&e.active&&e.effects.push(t)}function cm(){return ir}let sn;class Ml{constructor(e,r,s,a){this.fn=e,this.trigger=r,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,lm(this,a)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ln();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(hm(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),cn()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ni,r=sn;try{return Ni=!0,sn=this,this._runnings++,eh(this),this.fn()}finally{th(this),this._runnings--,sn=r,Ni=e}}stop(){var e;this.active&&(eh(this),th(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function hm(t){return t.value}function eh(t){t._trackId++,t._depsLength=0}function th(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)md(t.deps[e],t);t.deps.length=t._depsLength}}function md(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let Ni=!0,Zu=0;const yd=[];function ln(){yd.push(Ni),Ni=!1}function cn(){const t=yd.pop();Ni=t===void 0?!0:t}function Dl(){Zu++}function Ll(){for(Zu--;!Zu&&el.length;)el.shift()()}function wd(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&md(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const el=[];function Nd(t,e,r){Dl();for(const s of t.keys()){let a;s._dirtyLevel<e&&(a??(a=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(a??(a=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&el.push(s.scheduler)))}Ll()}const gd=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},tl=new WeakMap,on=Symbol(""),rl=Symbol("");function Mt(t,e,r){if(Ni&&sn){let s=tl.get(t);s||tl.set(t,s=new Map);let a=s.get(r);a||s.set(r,a=gd(()=>s.delete(r))),wd(sn,a)}}function jr(t,e,r,s,a,l){const h=tl.get(t);if(!h)return;let m=[];if(e==="clear")m=[...h.values()];else if(r==="length"&&re(t)){const N=Number(s);h.forEach((f,v)=>{(v==="length"||!ss(v)&&v>=N)&&m.push(f)})}else switch(r!==void 0&&m.push(h.get(r)),e){case"add":re(t)?Sl(r)&&m.push(h.get("length")):(m.push(h.get(on)),_n(t)&&m.push(h.get(rl)));break;case"delete":re(t)||(m.push(h.get(on)),_n(t)&&m.push(h.get(rl)));break;case"set":_n(t)&&m.push(h.get(on));break}Dl();for(const N of m)N&&Nd(N,4);Ll()}const dm=Il("__proto__,__v_isRef,__isVue"),bd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ss)),rh=fm();function fm(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const s=xe(this);for(let l=0,h=this.length;l<h;l++)Mt(s,"get",l+"");const a=s[e](...r);return a===-1||a===!1?s[e](...r.map(xe)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){ln(),Dl();const s=xe(this)[e].apply(this,r);return Ll(),cn(),s}}),t}function pm(t){const e=xe(this);return Mt(e,"has",t),e.hasOwnProperty(t)}class vd{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,s){const a=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return s===(a?l?_m:qd:l?Cd:Od).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const h=re(e);if(!a){if(h&&we(rh,r))return Reflect.get(rh,r,s);if(r==="hasOwnProperty")return pm}const m=Reflect.get(e,r,s);return(ss(r)?bd.has(r):dm(r))||(a||Mt(e,"get",r),l)?m:Dt(m)?h&&Sl(r)?m:m.value:Je(m)?a?Wd(m):Fl(m):m}}class xd extends vd{constructor(e=!1){super(!1,e)}set(e,r,s,a){let l=e[r];if(!this._isShallow){const N=es(l);if(!aa(s)&&!es(s)&&(l=xe(l),s=xe(s)),!re(e)&&Dt(l)&&!Dt(s))return N?!1:(l.value=s,!0)}const h=re(e)&&Sl(r)?Number(r)<e.length:we(e,r),m=Reflect.set(e,r,s,a);return e===xe(a)&&(h?Oi(s,l)&&jr(e,"set",r,s):jr(e,"add",r,s)),m}deleteProperty(e,r){const s=we(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&s&&jr(e,"delete",r,void 0),a}has(e,r){const s=Reflect.has(e,r);return(!ss(r)||!bd.has(r))&&Mt(e,"has",r),s}ownKeys(e){return Mt(e,"iterate",re(e)?"length":on),Reflect.ownKeys(e)}}class mm extends vd{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const ym=new xd,wm=new mm,Nm=new xd(!0),Pl=t=>t,mu=t=>Reflect.getPrototypeOf(t);function Fo(t,e,r=!1,s=!1){t=t.__v_raw;const a=xe(t),l=xe(e);r||(Oi(e,l)&&Mt(a,"get",e),Mt(a,"get",l));const{has:h}=mu(a),m=s?Pl:r?$l:Qs;if(h.call(a,e))return m(t.get(e));if(h.call(a,l))return m(t.get(l));t!==a&&t.get(e)}function Uo(t,e=!1){const r=this.__v_raw,s=xe(r),a=xe(t);return e||(Oi(t,a)&&Mt(s,"has",t),Mt(s,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function $o(t,e=!1){return t=t.__v_raw,!e&&Mt(xe(t),"iterate",on),Reflect.get(t,"size",t)}function ih(t){t=xe(t);const e=xe(this);return mu(e).has.call(e,t)||(e.add(t),jr(e,"add",t,t)),this}function nh(t,e){e=xe(e);const r=xe(this),{has:s,get:a}=mu(r);let l=s.call(r,t);l||(t=xe(t),l=s.call(r,t));const h=a.call(r,t);return r.set(t,e),l?Oi(e,h)&&jr(r,"set",t,e):jr(r,"add",t,e),this}function sh(t){const e=xe(this),{has:r,get:s}=mu(e);let a=r.call(e,t);a||(t=xe(t),a=r.call(e,t)),s&&s.call(e,t);const l=e.delete(t);return a&&jr(e,"delete",t,void 0),l}function oh(){const t=xe(this),e=t.size!==0,r=t.clear();return e&&jr(t,"clear",void 0,void 0),r}function Qo(t,e){return function(s,a){const l=this,h=l.__v_raw,m=xe(h),N=e?Pl:t?$l:Qs;return!t&&Mt(m,"iterate",on),h.forEach((f,v)=>s.call(a,N(f),N(v),l))}}function jo(t,e,r){return function(...s){const a=this.__v_raw,l=xe(a),h=_n(l),m=t==="entries"||t===Symbol.iterator&&h,N=t==="keys"&&h,f=a[t](...s),v=r?Pl:e?$l:Qs;return!e&&Mt(l,"iterate",N?rl:on),{next(){const{value:_,done:R}=f.next();return R?{value:_,done:R}:{value:m?[v(_[0]),v(_[1])]:v(_),done:R}},[Symbol.iterator](){return this}}}}function ei(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function gm(){const t={get(l){return Fo(this,l)},get size(){return $o(this)},has:Uo,add:ih,set:nh,delete:sh,clear:oh,forEach:Qo(!1,!1)},e={get(l){return Fo(this,l,!1,!0)},get size(){return $o(this)},has:Uo,add:ih,set:nh,delete:sh,clear:oh,forEach:Qo(!1,!0)},r={get(l){return Fo(this,l,!0)},get size(){return $o(this,!0)},has(l){return Uo.call(this,l,!0)},add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear"),forEach:Qo(!0,!1)},s={get(l){return Fo(this,l,!0,!0)},get size(){return $o(this,!0)},has(l){return Uo.call(this,l,!0)},add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear"),forEach:Qo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=jo(l,!1,!1),r[l]=jo(l,!0,!1),e[l]=jo(l,!1,!0),s[l]=jo(l,!0,!0)}),[t,r,e,s]}const[bm,vm,xm,Om]=gm();function Bl(t,e){const r=e?t?Om:xm:t?vm:bm;return(s,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?s:Reflect.get(we(r,a)&&a in s?r:s,a,l)}const Cm={get:Bl(!1,!1)},qm={get:Bl(!1,!0)},Wm={get:Bl(!0,!1)},Od=new WeakMap,Cd=new WeakMap,qd=new WeakMap,_m=new WeakMap;function Tm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Im(t){return t.__v_skip||!Object.isExtensible(t)?0:Tm(Yp(t))}function Fl(t){return es(t)?t:Ul(t,!1,ym,Cm,Od)}function Em(t){return Ul(t,!1,Nm,qm,Cd)}function Wd(t){return Ul(t,!0,wm,Wm,qd)}function Ul(t,e,r,s,a){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const h=Im(t);if(h===0)return t;const m=new Proxy(t,h===2?s:r);return a.set(t,m),m}function Tn(t){return es(t)?Tn(t.__v_raw):!!(t&&t.__v_isReactive)}function es(t){return!!(t&&t.__v_isReadonly)}function aa(t){return!!(t&&t.__v_isShallow)}function _d(t){return Tn(t)||es(t)}function xe(t){const e=t&&t.__v_raw;return e?xe(e):t}function Td(t){return Object.isExtensible(t)&&oa(t,"__v_skip",!0),t}const Qs=t=>Je(t)?Fl(t):t,$l=t=>Je(t)?Wd(t):t;class Id{constructor(e,r,s,a){this.getter=e,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ml(()=>e(this._value),()=>Go(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=s}get value(){const e=xe(this);return(!e._cacheable||e.effect.dirty)&&Oi(e._value,e._value=e.effect.run())&&Go(e,4),Ed(e),e.effect._dirtyLevel>=2&&Go(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function km(t,e,r=!1){let s,a;const l=le(t);return l?(s=t,a=Xt):(s=t.get,a=t.set),new Id(s,a,l||!a,r)}function Ed(t){var e;Ni&&sn&&(t=xe(t),wd(sn,(e=t.dep)!=null?e:t.dep=gd(()=>t.dep=void 0,t instanceof Id?t:void 0)))}function Go(t,e=4,r){t=xe(t);const s=t.dep;s&&Nd(s,e)}function Dt(t){return!!(t&&t.__v_isRef===!0)}function Sm(t){return Am(t,!1)}function Am(t,e){return Dt(t)?t:new Rm(t,e)}class Rm{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:xe(e),this._value=r?e:Qs(e)}get value(){return Ed(this),this._value}set value(e){const r=this.__v_isShallow||aa(e)||es(e);e=r?e:xe(e),Oi(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Qs(e),Go(this,4))}}function kd(t){return Dt(t)?t.value:t}const Mm={get:(t,e,r)=>kd(Reflect.get(t,e,r)),set:(t,e,r,s)=>{const a=t[e];return Dt(a)&&!Dt(r)?(a.value=r,!0):Reflect.set(t,e,r,s)}};function Sd(t){return Tn(t)?t:new Proxy(t,Mm)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,e,r,s){try{return s?t(...s):t()}catch(a){yu(a,e,r)}}function fr(t,e,r,s){if(le(t)){const l=gi(t,e,r,s);return l&&ud(l)&&l.catch(h=>{yu(h,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(fr(t[l],e,r,s));return a}function yu(t,e,r,s=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const h=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const f=l.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](t,h,m)===!1)return}l=l.parent}const N=e.appContext.config.errorHandler;if(N){gi(N,null,10,[t,h,m]);return}}Dm(t,r,a,s)}function Dm(t,e,r,s=!0){console.error(t)}let js=!1,il=!1;const gt=[];let Cr=0;const In=[];let ri=null,Bi=0;const Ad=Promise.resolve();let Ql=null;function Lm(t){const e=Ql||Ad;return t?e.then(this?t.bind(this):t):e}function Pm(t){let e=Cr+1,r=gt.length;for(;e<r;){const s=e+r>>>1,a=gt[s],l=Vs(a);l<t||l===t&&a.pre?e=s+1:r=s}return e}function jl(t){(!gt.length||!gt.includes(t,js&&t.allowRecurse?Cr+1:Cr))&&(t.id==null?gt.push(t):gt.splice(Pm(t.id),0,t),Rd())}function Rd(){!js&&!il&&(il=!0,Ql=Ad.then(Dd))}function Bm(t){const e=gt.indexOf(t);e>Cr&&gt.splice(e,1)}function Fm(t){re(t)?In.push(...t):(!ri||!ri.includes(t,t.allowRecurse?Bi+1:Bi))&&In.push(t),Rd()}function ah(t,e,r=js?Cr+1:0){for(;r<gt.length;r++){const s=gt[r];if(s&&s.pre){if(t&&s.id!==t.uid)continue;gt.splice(r,1),r--,s()}}}function Md(t){if(In.length){const e=[...new Set(In)].sort((r,s)=>Vs(r)-Vs(s));if(In.length=0,ri){ri.push(...e);return}for(ri=e,Bi=0;Bi<ri.length;Bi++)ri[Bi]();ri=null,Bi=0}}const Vs=t=>t.id==null?1/0:t.id,Um=(t,e)=>{const r=Vs(t)-Vs(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function Dd(t){il=!1,js=!0,gt.sort(Um);try{for(Cr=0;Cr<gt.length;Cr++){const e=gt[Cr];e&&e.active!==!1&&gi(e,null,14)}}finally{Cr=0,gt.length=0,Md(),js=!1,Ql=null,(gt.length||In.length)&&Dd()}}function $m(t,e,...r){if(t.isUnmounted)return;const s=t.vnode.props||Ue;let a=r;const l=e.startsWith("update:"),h=l&&e.slice(7);if(h&&h in s){const v=`${h==="modelValue"?"model":h}Modifiers`,{number:_,trim:R}=s[v]||Ue;R&&(a=r.map(B=>ct(B)?B.trim():B)),_&&(a=r.map(em))}let m,N=s[m=Bu(e)]||s[m=Bu(Zn(e))];!N&&l&&(N=s[m=Bu(os(e))]),N&&fr(N,t,6,a);const f=s[m+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[m])return;t.emitted[m]=!0,fr(f,t,6,a)}}function Ld(t,e,r=!1){const s=e.emitsCache,a=s.get(t);if(a!==void 0)return a;const l=t.emits;let h={},m=!1;if(!le(t)){const N=f=>{const v=Ld(f,e,!0);v&&(m=!0,yt(h,v))};!r&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!l&&!m?(Je(t)&&s.set(t,null),null):(re(l)?l.forEach(N=>h[N]=null):yt(h,l),Je(t)&&s.set(t,h),h)}function wu(t,e){return!t||!du(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,os(e))||we(t,e))}let Wr=null,Pd=null;function ua(t){const e=Wr;return Wr=t,Pd=t&&t.type.__scopeId||null,e}function Qm(t,e=Wr,r){if(!e||t._n)return t;const s=(...a)=>{s._d&&wh(-1);const l=ua(e);let h;try{h=t(...a)}finally{ua(l),s._d&&wh(1)}return h};return s._n=!0,s._c=!0,s._d=!0,s}function $u(t){const{type:e,vnode:r,proxy:s,withProxy:a,props:l,propsOptions:[h],slots:m,attrs:N,emit:f,render:v,renderCache:_,data:R,setupState:B,ctx:pe,inheritAttrs:Q}=t;let Se,J;const ie=ua(t);try{if(r.shapeFlag&4){const Ce=a||s,ht=Ce;Se=Or(v.call(ht,Ce,_,l,B,R,pe)),J=N}else{const Ce=e;Se=Or(Ce.length>1?Ce(l,{attrs:N,slots:m,emit:f}):Ce(l,null)),J=e.props?N:jm(N)}}catch(Ce){Is.length=0,yu(Ce,t,1),Se=an(Js)}let de=Se;if(J&&Q!==!1){const Ce=Object.keys(J),{shapeFlag:ht}=de;Ce.length&&ht&7&&(h&&Ce.some(El)&&(J=Vm(J,h)),de=ts(de,J))}return r.dirs&&(de=ts(de),de.dirs=de.dirs?de.dirs.concat(r.dirs):r.dirs),r.transition&&(de.transition=r.transition),Se=de,ua(ie),Se}const jm=t=>{let e;for(const r in t)(r==="class"||r==="style"||du(r))&&((e||(e={}))[r]=t[r]);return e},Vm=(t,e)=>{const r={};for(const s in t)(!El(s)||!(s.slice(9)in e))&&(r[s]=t[s]);return r};function Jm(t,e,r){const{props:s,children:a,component:l}=t,{props:h,children:m,patchFlag:N}=e,f=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&N>=0){if(N&1024)return!0;if(N&16)return s?uh(s,h,f):!!h;if(N&8){const v=e.dynamicProps;for(let _=0;_<v.length;_++){const R=v[_];if(h[R]!==s[R]&&!wu(f,R))return!0}}}else return(a||m)&&(!m||!m.$stable)?!0:s===h?!1:s?h?uh(s,h,f):!0:!!h;return!1}function uh(t,e,r){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let a=0;a<s.length;a++){const l=s[a];if(e[l]!==t[l]&&!wu(r,l))return!0}return!1}function Km({vnode:t,parent:e},r){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=r,e=e.parent;else break}}const Hm=Symbol.for("v-ndc"),Gm=t=>t.__isSuspense;function zm(t,e){e&&e.pendingBranch?re(t)?e.effects.push(...t):e.effects.push(t):Fm(t)}const Ym=Symbol.for("v-scx"),Xm=()=>Yo(Ym),Vo={};function Qu(t,e,r){return Bd(t,e,r)}function Bd(t,e,{immediate:r,deep:s,flush:a,once:l,onTrack:h,onTrigger:m}=Ue){if(e&&l){const ne=e;e=(...Ke)=>{ne(...Ke),ht()}}const N=Tt,f=ne=>s===!0?ne:vn(ne,s===!1?1:void 0);let v,_=!1,R=!1;if(Dt(t)?(v=()=>t.value,_=aa(t)):Tn(t)?(v=()=>f(t),_=!0):re(t)?(R=!0,_=t.some(ne=>Tn(ne)||aa(ne)),v=()=>t.map(ne=>{if(Dt(ne))return ne.value;if(Tn(ne))return f(ne);if(le(ne))return gi(ne,N,2)})):le(t)?e?v=()=>gi(t,N,2):v=()=>(B&&B(),fr(t,N,3,[pe])):v=Xt,e&&s){const ne=v;v=()=>vn(ne())}let B,pe=ne=>{B=de.onStop=()=>{gi(ne,N,4),B=de.onStop=void 0}},Q;if(vu)if(pe=Xt,e?r&&fr(e,N,3,[v(),R?[]:void 0,pe]):v(),a==="sync"){const ne=Xm();Q=ne.__watcherHandles||(ne.__watcherHandles=[])}else return Xt;let Se=R?new Array(t.length).fill(Vo):Vo;const J=()=>{if(!(!de.active||!de.dirty))if(e){const ne=de.run();(s||_||(R?ne.some((Ke,tt)=>Oi(Ke,Se[tt])):Oi(ne,Se)))&&(B&&B(),fr(e,N,3,[ne,Se===Vo?void 0:R&&Se[0]===Vo?[]:Se,pe]),Se=ne)}else de.run()};J.allowRecurse=!!e;let ie;a==="sync"?ie=J:a==="post"?ie=()=>St(J,N&&N.suspense):(J.pre=!0,N&&(J.id=N.uid),ie=()=>jl(J));const de=new Ml(v,Xt,ie),Ce=cm(),ht=()=>{de.stop(),Ce&&kl(Ce.effects,de)};return e?r?J():Se=de.run():a==="post"?St(de.run.bind(de),N&&N.suspense):de.run(),Q&&Q.push(ht),ht}function Zm(t,e,r){const s=this.proxy,a=ct(t)?t.includes(".")?Fd(s,t):()=>s[t]:t.bind(s,s);let l;le(e)?l=e:(l=e.handler,r=e);const h=No(this),m=Bd(a,l.bind(s),r);return h(),m}function Fd(t,e){const r=e.split(".");return()=>{let s=t;for(let a=0;a<r.length&&s;a++)s=s[r[a]];return s}}function vn(t,e,r=0,s){if(!Je(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(s=s||new Set,s.has(t))return t;if(s.add(t),Dt(t))vn(t.value,e,r,s);else if(re(t))for(let a=0;a<t.length;a++)vn(t[a],e,r,s);else if(ad(t)||_n(t))t.forEach(a=>{vn(a,e,r,s)});else if(cd(t))for(const a in t)vn(t[a],e,r,s);return t}function Mi(t,e,r,s){const a=t.dirs,l=e&&e.dirs;for(let h=0;h<a.length;h++){const m=a[h];l&&(m.oldValue=l[h].value);let N=m.dir[s];N&&(ln(),fr(N,r,8,[t.el,m,t,e]),cn())}}/*! #__NO_SIDE_EFFECTS__ */function ey(t,e){return le(t)?yt({name:t.name},e,{setup:t}):t}const zo=t=>!!t.type.__asyncLoader,Ud=t=>t.type.__isKeepAlive;function ty(t,e){$d(t,"a",e)}function ry(t,e){$d(t,"da",e)}function $d(t,e,r=Tt){const s=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Nu(e,s,r),r){let a=r.parent;for(;a&&a.parent;)Ud(a.parent.vnode)&&iy(s,e,r,a),a=a.parent}}function iy(t,e,r,s){const a=Nu(e,t,s,!0);Qd(()=>{kl(s[e],a)},r)}function Nu(t,e,r=Tt,s=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...h)=>{if(r.isUnmounted)return;ln();const m=No(r),N=fr(e,r,t,h);return m(),cn(),N});return s?a.unshift(l):a.push(l),l}}const Hr=t=>(e,r=Tt)=>(!vu||t==="sp")&&Nu(t,(...s)=>e(...s),r),ny=Hr("bm"),sy=Hr("m"),oy=Hr("bu"),ay=Hr("u"),uy=Hr("bum"),Qd=Hr("um"),ly=Hr("sp"),cy=Hr("rtg"),hy=Hr("rtc");function dy(t,e=Tt){Nu("ec",t,e)}const nl=t=>t?ef(t)?Hl(t)||t.proxy:nl(t.parent):null,_s=yt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nl(t.parent),$root:t=>nl(t.root),$emit:t=>t.emit,$options:t=>Vl(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,jl(t.update)}),$nextTick:t=>t.n||(t.n=Lm.bind(t.proxy)),$watch:t=>Zm.bind(t)}),ju=(t,e)=>t!==Ue&&!t.__isScriptSetup&&we(t,e),fy={get({_:t},e){const{ctx:r,setupState:s,data:a,props:l,accessCache:h,type:m,appContext:N}=t;let f;if(e[0]!=="$"){const B=h[e];if(B!==void 0)switch(B){case 1:return s[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(ju(s,e))return h[e]=1,s[e];if(a!==Ue&&we(a,e))return h[e]=2,a[e];if((f=t.propsOptions[0])&&we(f,e))return h[e]=3,l[e];if(r!==Ue&&we(r,e))return h[e]=4,r[e];sl&&(h[e]=0)}}const v=_s[e];let _,R;if(v)return e==="$attrs"&&Mt(t,"get",e),v(t);if((_=m.__cssModules)&&(_=_[e]))return _;if(r!==Ue&&we(r,e))return h[e]=4,r[e];if(R=N.config.globalProperties,we(R,e))return R[e]},set({_:t},e,r){const{data:s,setupState:a,ctx:l}=t;return ju(a,e)?(a[e]=r,!0):s!==Ue&&we(s,e)?(s[e]=r,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:s,appContext:a,propsOptions:l}},h){let m;return!!r[h]||t!==Ue&&we(t,h)||ju(e,h)||(m=l[0])&&we(m,h)||we(s,h)||we(_s,h)||we(a.config.globalProperties,h)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:we(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function lh(t){return re(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let sl=!0;function py(t){const e=Vl(t),r=t.proxy,s=t.ctx;sl=!1,e.beforeCreate&&ch(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:h,watch:m,provide:N,inject:f,created:v,beforeMount:_,mounted:R,beforeUpdate:B,updated:pe,activated:Q,deactivated:Se,beforeDestroy:J,beforeUnmount:ie,destroyed:de,unmounted:Ce,render:ht,renderTracked:ne,renderTriggered:Ke,errorCaptured:tt,serverPrefetch:Gr,expose:Te,inheritAttrs:Ne,components:pr,directives:H,filters:Ie}=e;if(f&&my(f,s,null),h)for(const Ae in h){const qe=h[Ae];le(qe)&&(s[Ae]=qe.bind(r))}if(a){const Ae=a.call(r,r);Je(Ae)&&(t.data=Fl(Ae))}if(sl=!0,l)for(const Ae in l){const qe=l[Ae],mr=le(qe)?qe.bind(r,r):le(qe.get)?qe.get.bind(r,r):Xt,Ii=!le(qe)&&le(qe.set)?qe.set.bind(r):Xt,kr=Hy({get:mr,set:Ii});Object.defineProperty(s,Ae,{enumerable:!0,configurable:!0,get:()=>kr.value,set:at=>kr.value=at})}if(m)for(const Ae in m)jd(m[Ae],s,r,Ae);if(N){const Ae=le(N)?N.call(r):N;Reflect.ownKeys(Ae).forEach(qe=>{vy(qe,Ae[qe])})}v&&ch(v,t,"c");function rt(Ae,qe){re(qe)?qe.forEach(mr=>Ae(mr.bind(r))):qe&&Ae(qe.bind(r))}if(rt(ny,_),rt(sy,R),rt(oy,B),rt(ay,pe),rt(ty,Q),rt(ry,Se),rt(dy,tt),rt(hy,ne),rt(cy,Ke),rt(uy,ie),rt(Qd,Ce),rt(ly,Gr),re(Te))if(Te.length){const Ae=t.exposed||(t.exposed={});Te.forEach(qe=>{Object.defineProperty(Ae,qe,{get:()=>r[qe],set:mr=>r[qe]=mr})})}else t.exposed||(t.exposed={});ht&&t.render===Xt&&(t.render=ht),Ne!=null&&(t.inheritAttrs=Ne),pr&&(t.components=pr),H&&(t.directives=H)}function my(t,e,r=Xt){re(t)&&(t=ol(t));for(const s in t){const a=t[s];let l;Je(a)?"default"in a?l=Yo(a.from||s,a.default,!0):l=Yo(a.from||s):l=Yo(a),Dt(l)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:h=>l.value=h}):e[s]=l}}function ch(t,e,r){fr(re(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,r)}function jd(t,e,r,s){const a=s.includes(".")?Fd(r,s):()=>r[s];if(ct(t)){const l=e[t];le(l)&&Qu(a,l)}else if(le(t))Qu(a,t.bind(r));else if(Je(t))if(re(t))t.forEach(l=>jd(l,e,r,s));else{const l=le(t.handler)?t.handler.bind(r):e[t.handler];le(l)&&Qu(a,l,t)}}function Vl(t){const e=t.type,{mixins:r,extends:s}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:h}}=t.appContext,m=l.get(e);let N;return m?N=m:!a.length&&!r&&!s?N=e:(N={},a.length&&a.forEach(f=>la(N,f,h,!0)),la(N,e,h)),Je(e)&&l.set(e,N),N}function la(t,e,r,s=!1){const{mixins:a,extends:l}=e;l&&la(t,l,r,!0),a&&a.forEach(h=>la(t,h,r,!0));for(const h in e)if(!(s&&h==="expose")){const m=yy[h]||r&&r[h];t[h]=m?m(t[h],e[h]):e[h]}return t}const yy={data:hh,props:dh,emits:dh,methods:qs,computed:qs,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:qs,directives:qs,watch:Ny,provide:hh,inject:wy};function hh(t,e){return e?t?function(){return yt(le(t)?t.call(this,this):t,le(e)?e.call(this,this):e)}:e:t}function wy(t,e){return qs(ol(t),ol(e))}function ol(t){if(re(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function qs(t,e){return t?yt(Object.create(null),t,e):e}function dh(t,e){return t?re(t)&&re(e)?[...new Set([...t,...e])]:yt(Object.create(null),lh(t),lh(e??{})):e}function Ny(t,e){if(!t)return e;if(!e)return t;const r=yt(Object.create(null),t);for(const s in e)r[s]=xt(t[s],e[s]);return r}function Vd(){return{app:null,config:{isNativeTag:Gp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gy=0;function by(t,e){return function(s,a=null){le(s)||(s=yt({},s)),a!=null&&!Je(a)&&(a=null);const l=Vd(),h=new WeakSet;let m=!1;const N=l.app={_uid:gy++,_component:s,_props:a,_container:null,_context:l,_instance:null,version:Gy,get config(){return l.config},set config(f){},use(f,...v){return h.has(f)||(f&&le(f.install)?(h.add(f),f.install(N,...v)):le(f)&&(h.add(f),f(N,...v))),N},mixin(f){return l.mixins.includes(f)||l.mixins.push(f),N},component(f,v){return v?(l.components[f]=v,N):l.components[f]},directive(f,v){return v?(l.directives[f]=v,N):l.directives[f]},mount(f,v,_){if(!m){const R=an(s,a);return R.appContext=l,_===!0?_="svg":_===!1&&(_=void 0),v&&e?e(R,f):t(R,f,_),m=!0,N._container=f,f.__vue_app__=N,Hl(R.component)||R.component.proxy}},unmount(){m&&(t(null,N._container),delete N._container.__vue_app__)},provide(f,v){return l.provides[f]=v,N},runWithContext(f){const v=Ts;Ts=N;try{return f()}finally{Ts=v}}};return N}}let Ts=null;function vy(t,e){if(Tt){let r=Tt.provides;const s=Tt.parent&&Tt.parent.provides;s===r&&(r=Tt.provides=Object.create(s)),r[t]=e}}function Yo(t,e,r=!1){const s=Tt||Wr;if(s||Ts){const a=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ts._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&le(e)?e.call(s&&s.proxy):e}}function xy(t,e,r,s=!1){const a={},l={};oa(l,bu,1),t.propsDefaults=Object.create(null),Jd(t,e,a,l);for(const h in t.propsOptions[0])h in a||(a[h]=void 0);r?t.props=s?a:Em(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function Oy(t,e,r,s){const{props:a,attrs:l,vnode:{patchFlag:h}}=t,m=xe(a),[N]=t.propsOptions;let f=!1;if((s||h>0)&&!(h&16)){if(h&8){const v=t.vnode.dynamicProps;for(let _=0;_<v.length;_++){let R=v[_];if(wu(t.emitsOptions,R))continue;const B=e[R];if(N)if(we(l,R))B!==l[R]&&(l[R]=B,f=!0);else{const pe=Zn(R);a[pe]=al(N,m,pe,B,t,!1)}else B!==l[R]&&(l[R]=B,f=!0)}}}else{Jd(t,e,a,l)&&(f=!0);let v;for(const _ in m)(!e||!we(e,_)&&((v=os(_))===_||!we(e,v)))&&(N?r&&(r[_]!==void 0||r[v]!==void 0)&&(a[_]=al(N,m,_,void 0,t,!0)):delete a[_]);if(l!==m)for(const _ in l)(!e||!we(e,_))&&(delete l[_],f=!0)}f&&jr(t,"set","$attrs")}function Jd(t,e,r,s){const[a,l]=t.propsOptions;let h=!1,m;if(e)for(let N in e){if(Ws(N))continue;const f=e[N];let v;a&&we(a,v=Zn(N))?!l||!l.includes(v)?r[v]=f:(m||(m={}))[v]=f:wu(t.emitsOptions,N)||(!(N in s)||f!==s[N])&&(s[N]=f,h=!0)}if(l){const N=xe(r),f=m||Ue;for(let v=0;v<l.length;v++){const _=l[v];r[_]=al(a,N,_,f[_],t,!we(f,_))}}return h}function al(t,e,r,s,a,l){const h=t[r];if(h!=null){const m=we(h,"default");if(m&&s===void 0){const N=h.default;if(h.type!==Function&&!h.skipFactory&&le(N)){const{propsDefaults:f}=a;if(r in f)s=f[r];else{const v=No(a);s=f[r]=N.call(null,e),v()}}else s=N}h[0]&&(l&&!m?s=!1:h[1]&&(s===""||s===os(r))&&(s=!0))}return s}function Kd(t,e,r=!1){const s=e.propsCache,a=s.get(t);if(a)return a;const l=t.props,h={},m=[];let N=!1;if(!le(t)){const v=_=>{N=!0;const[R,B]=Kd(_,e,!0);yt(h,R),B&&m.push(...B)};!r&&e.mixins.length&&e.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}if(!l&&!N)return Je(t)&&s.set(t,Wn),Wn;if(re(l))for(let v=0;v<l.length;v++){const _=Zn(l[v]);fh(_)&&(h[_]=Ue)}else if(l)for(const v in l){const _=Zn(v);if(fh(_)){const R=l[v],B=h[_]=re(R)||le(R)?{type:R}:yt({},R);if(B){const pe=yh(Boolean,B.type),Q=yh(String,B.type);B[0]=pe>-1,B[1]=Q<0||pe<Q,(pe>-1||we(B,"default"))&&m.push(_)}}}const f=[h,m];return Je(t)&&s.set(t,f),f}function fh(t){return t[0]!=="$"&&!Ws(t)}function ph(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function mh(t,e){return ph(t)===ph(e)}function yh(t,e){return re(e)?e.findIndex(r=>mh(r,t)):le(e)&&mh(e,t)?0:-1}const Hd=t=>t[0]==="_"||t==="$stable",Jl=t=>re(t)?t.map(Or):[Or(t)],Cy=(t,e,r)=>{if(e._n)return e;const s=Qm((...a)=>Jl(e(...a)),r);return s._c=!1,s},Gd=(t,e,r)=>{const s=t._ctx;for(const a in t){if(Hd(a))continue;const l=t[a];if(le(l))e[a]=Cy(a,l,s);else if(l!=null){const h=Jl(l);e[a]=()=>h}}},zd=(t,e)=>{const r=Jl(e);t.slots.default=()=>r},qy=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=xe(e),oa(e,"_",r)):Gd(e,t.slots={})}else t.slots={},e&&zd(t,e);oa(t.slots,bu,1)},Wy=(t,e,r)=>{const{vnode:s,slots:a}=t;let l=!0,h=Ue;if(s.shapeFlag&32){const m=e._;m?r&&m===1?l=!1:(yt(a,e),!r&&m===1&&delete a._):(l=!e.$stable,Gd(e,a)),h=e}else e&&(zd(t,e),h={default:1});if(l)for(const m in a)!Hd(m)&&h[m]==null&&delete a[m]};function ul(t,e,r,s,a=!1){if(re(t)){t.forEach((R,B)=>ul(R,e&&(re(e)?e[B]:e),r,s,a));return}if(zo(s)&&!a)return;const l=s.shapeFlag&4?Hl(s.component)||s.component.proxy:s.el,h=a?null:l,{i:m,r:N}=t,f=e&&e.r,v=m.refs===Ue?m.refs={}:m.refs,_=m.setupState;if(f!=null&&f!==N&&(ct(f)?(v[f]=null,we(_,f)&&(_[f]=null)):Dt(f)&&(f.value=null)),le(N))gi(N,m,12,[h,v]);else{const R=ct(N),B=Dt(N);if(R||B){const pe=()=>{if(t.f){const Q=R?we(_,N)?_[N]:v[N]:N.value;a?re(Q)&&kl(Q,l):re(Q)?Q.includes(l)||Q.push(l):R?(v[N]=[l],we(_,N)&&(_[N]=v[N])):(N.value=[l],t.k&&(v[t.k]=N.value))}else R?(v[N]=h,we(_,N)&&(_[N]=h)):B&&(N.value=h,t.k&&(v[t.k]=h))};h?(pe.id=-1,St(pe,r)):pe()}}}const St=zm;function _y(t){return Ty(t)}function Ty(t,e){const r=dd();r.__VUE__=!0;const{insert:s,remove:a,patchProp:l,createElement:h,createText:m,createComment:N,setText:f,setElementText:v,parentNode:_,nextSibling:R,setScopeId:B=Xt,insertStaticContent:pe}=t,Q=(p,w,x,q=null,W=null,M=null,S=void 0,A=null,L=!!w.dynamicChildren)=>{if(p===w)return;p&&!xs(p,w)&&(q=er(p),at(p,W,M,!0),p=null),w.patchFlag===-2&&(L=!1,w.dynamicChildren=null);const{type:T,ref:P,shapeFlag:U}=w;switch(T){case gu:Se(p,w,x,q);break;case Js:J(p,w,x,q);break;case Ju:p==null&&ie(w,x,q,S);break;case xr:pr(p,w,x,q,W,M,S,A,L);break;default:U&1?ht(p,w,x,q,W,M,S,A,L):U&6?H(p,w,x,q,W,M,S,A,L):(U&64||U&128)&&T.process(p,w,x,q,W,M,S,A,L,Yr)}P!=null&&W&&ul(P,p&&p.ref,M,w||p,!w)},Se=(p,w,x,q)=>{if(p==null)s(w.el=m(w.children),x,q);else{const W=w.el=p.el;w.children!==p.children&&f(W,w.children)}},J=(p,w,x,q)=>{p==null?s(w.el=N(w.children||""),x,q):w.el=p.el},ie=(p,w,x,q)=>{[p.el,p.anchor]=pe(p.children,w,x,q,p.el,p.anchor)},de=({el:p,anchor:w},x,q)=>{let W;for(;p&&p!==w;)W=R(p),s(p,x,q),p=W;s(w,x,q)},Ce=({el:p,anchor:w})=>{let x;for(;p&&p!==w;)x=R(p),a(p),p=x;a(w)},ht=(p,w,x,q,W,M,S,A,L)=>{w.type==="svg"?S="svg":w.type==="math"&&(S="mathml"),p==null?ne(w,x,q,W,M,S,A,L):Gr(p,w,W,M,S,A,L)},ne=(p,w,x,q,W,M,S,A)=>{let L,T;const{props:P,shapeFlag:U,transition:$,dirs:G}=p;if(L=p.el=h(p.type,M,P&&P.is,P),U&8?v(L,p.children):U&16&&tt(p.children,L,null,q,W,Vu(p,M),S,A),G&&Mi(p,null,q,"created"),Ke(L,p,p.scopeId,S,q),P){for(const ge in P)ge!=="value"&&!Ws(ge)&&l(L,ge,null,P[ge],M,p.children,q,W,It);"value"in P&&l(L,"value",null,P.value,M),(T=P.onVnodeBeforeMount)&&wr(T,q,p)}G&&Mi(p,null,q,"beforeMount");const se=Iy(W,$);se&&$.beforeEnter(L),s(L,w,x),((T=P&&P.onVnodeMounted)||se||G)&&St(()=>{T&&wr(T,q,p),se&&$.enter(L),G&&Mi(p,null,q,"mounted")},W)},Ke=(p,w,x,q,W)=>{if(x&&B(p,x),q)for(let M=0;M<q.length;M++)B(p,q[M]);if(W){let M=W.subTree;if(w===M){const S=W.vnode;Ke(p,S,S.scopeId,S.slotScopeIds,W.parent)}}},tt=(p,w,x,q,W,M,S,A,L=0)=>{for(let T=L;T<p.length;T++){const P=p[T]=A?ii(p[T]):Or(p[T]);Q(null,P,w,x,q,W,M,S,A)}},Gr=(p,w,x,q,W,M,S)=>{const A=w.el=p.el;let{patchFlag:L,dynamicChildren:T,dirs:P}=w;L|=p.patchFlag&16;const U=p.props||Ue,$=w.props||Ue;let G;if(x&&Di(x,!1),(G=$.onVnodeBeforeUpdate)&&wr(G,x,w,p),P&&Mi(w,p,x,"beforeUpdate"),x&&Di(x,!0),T?Te(p.dynamicChildren,T,A,x,q,Vu(w,W),M):S||qe(p,w,A,null,x,q,Vu(w,W),M,!1),L>0){if(L&16)Ne(A,w,U,$,x,q,W);else if(L&2&&U.class!==$.class&&l(A,"class",null,$.class,W),L&4&&l(A,"style",U.style,$.style,W),L&8){const se=w.dynamicProps;for(let ge=0;ge<se.length;ge++){const be=se[ge],Pe=U[be],Et=$[be];(Et!==Pe||be==="value")&&l(A,be,Pe,Et,W,p.children,x,q,It)}}L&1&&p.children!==w.children&&v(A,w.children)}else!S&&T==null&&Ne(A,w,U,$,x,q,W);((G=$.onVnodeUpdated)||P)&&St(()=>{G&&wr(G,x,w,p),P&&Mi(w,p,x,"updated")},q)},Te=(p,w,x,q,W,M,S)=>{for(let A=0;A<w.length;A++){const L=p[A],T=w[A],P=L.el&&(L.type===xr||!xs(L,T)||L.shapeFlag&70)?_(L.el):x;Q(L,T,P,null,q,W,M,S,!0)}},Ne=(p,w,x,q,W,M,S)=>{if(x!==q){if(x!==Ue)for(const A in x)!Ws(A)&&!(A in q)&&l(p,A,x[A],null,S,w.children,W,M,It);for(const A in q){if(Ws(A))continue;const L=q[A],T=x[A];L!==T&&A!=="value"&&l(p,A,T,L,S,w.children,W,M,It)}"value"in q&&l(p,"value",x.value,q.value,S)}},pr=(p,w,x,q,W,M,S,A,L)=>{const T=w.el=p?p.el:m(""),P=w.anchor=p?p.anchor:m("");let{patchFlag:U,dynamicChildren:$,slotScopeIds:G}=w;G&&(A=A?A.concat(G):G),p==null?(s(T,x,q),s(P,x,q),tt(w.children||[],x,P,W,M,S,A,L)):U>0&&U&64&&$&&p.dynamicChildren?(Te(p.dynamicChildren,$,x,W,M,S,A),(w.key!=null||W&&w===W.subTree)&&Yd(p,w,!0)):qe(p,w,x,P,W,M,S,A,L)},H=(p,w,x,q,W,M,S,A,L)=>{w.slotScopeIds=A,p==null?w.shapeFlag&512?W.ctx.activate(w,x,q,S,L):Ie(w,x,q,W,M,S,L):dn(p,w,L)},Ie=(p,w,x,q,W,M,S)=>{const A=p.component=$y(p,q,W);if(Ud(p)&&(A.ctx.renderer=Yr),Qy(A),A.asyncDep){if(W&&W.registerDep(A,rt),!p.el){const L=A.subTree=an(Js);J(null,L,w,x)}}else rt(A,p,w,x,W,M,S)},dn=(p,w,x)=>{const q=w.component=p.component;if(Jm(p,w,x))if(q.asyncDep&&!q.asyncResolved){Ae(q,w,x);return}else q.next=w,Bm(q.update),q.effect.dirty=!0,q.update();else w.el=p.el,q.vnode=w},rt=(p,w,x,q,W,M,S)=>{const A=()=>{if(p.isMounted){let{next:P,bu:U,u:$,parent:G,vnode:se}=p;{const Sr=Xd(p);if(Sr){P&&(P.el=se.el,Ae(p,P,S)),Sr.asyncDep.then(()=>{p.isUnmounted||A()});return}}let ge=P,be;Di(p,!1),P?(P.el=se.el,Ae(p,P,S)):P=se,U&&Fu(U),(be=P.props&&P.props.onVnodeBeforeUpdate)&&wr(be,G,P,se),Di(p,!0);const Pe=$u(p),Et=p.subTree;p.subTree=Pe,Q(Et,Pe,_(Et.el),er(Et),p,W,M),P.el=Pe.el,ge===null&&Km(p,Pe.el),$&&St($,W),(be=P.props&&P.props.onVnodeUpdated)&&St(()=>wr(be,G,P,se),W)}else{let P;const{el:U,props:$}=w,{bm:G,m:se,parent:ge}=p,be=zo(w);if(Di(p,!1),G&&Fu(G),!be&&(P=$&&$.onVnodeBeforeMount)&&wr(P,ge,w),Di(p,!0),U&&ds){const Pe=()=>{p.subTree=$u(p),ds(U,p.subTree,p,W,null)};be?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Pe()):Pe()}else{const Pe=p.subTree=$u(p);Q(null,Pe,x,q,p,W,M),w.el=Pe.el}if(se&&St(se,W),!be&&(P=$&&$.onVnodeMounted)){const Pe=w;St(()=>wr(P,ge,Pe),W)}(w.shapeFlag&256||ge&&zo(ge.vnode)&&ge.vnode.shapeFlag&256)&&p.a&&St(p.a,W),p.isMounted=!0,w=x=q=null}},L=p.effect=new Ml(A,Xt,()=>jl(T),p.scope),T=p.update=()=>{L.dirty&&L.run()};T.id=p.uid,Di(p,!0),T()},Ae=(p,w,x)=>{w.component=p;const q=p.vnode.props;p.vnode=w,p.next=null,Oy(p,w.props,q,x),Wy(p,w.children,x),ln(),ah(p),cn()},qe=(p,w,x,q,W,M,S,A,L=!1)=>{const T=p&&p.children,P=p?p.shapeFlag:0,U=w.children,{patchFlag:$,shapeFlag:G}=w;if($>0){if($&128){Ii(T,U,x,q,W,M,S,A,L);return}else if($&256){mr(T,U,x,q,W,M,S,A,L);return}}G&8?(P&16&&It(T,W,M),U!==T&&v(x,U)):P&16?G&16?Ii(T,U,x,q,W,M,S,A,L):It(T,W,M,!0):(P&8&&v(x,""),G&16&&tt(U,x,q,W,M,S,A,L))},mr=(p,w,x,q,W,M,S,A,L)=>{p=p||Wn,w=w||Wn;const T=p.length,P=w.length,U=Math.min(T,P);let $;for($=0;$<U;$++){const G=w[$]=L?ii(w[$]):Or(w[$]);Q(p[$],G,x,null,W,M,S,A,L)}T>P?It(p,W,M,!0,!1,U):tt(w,x,q,W,M,S,A,L,U)},Ii=(p,w,x,q,W,M,S,A,L)=>{let T=0;const P=w.length;let U=p.length-1,$=P-1;for(;T<=U&&T<=$;){const G=p[T],se=w[T]=L?ii(w[T]):Or(w[T]);if(xs(G,se))Q(G,se,x,null,W,M,S,A,L);else break;T++}for(;T<=U&&T<=$;){const G=p[U],se=w[$]=L?ii(w[$]):Or(w[$]);if(xs(G,se))Q(G,se,x,null,W,M,S,A,L);else break;U--,$--}if(T>U){if(T<=$){const G=$+1,se=G<P?w[G].el:q;for(;T<=$;)Q(null,w[T]=L?ii(w[T]):Or(w[T]),x,se,W,M,S,A,L),T++}}else if(T>$)for(;T<=U;)at(p[T],W,M,!0),T++;else{const G=T,se=T,ge=new Map;for(T=se;T<=$;T++){const bt=w[T]=L?ii(w[T]):Or(w[T]);bt.key!=null&&ge.set(bt.key,T)}let be,Pe=0;const Et=$-se+1;let Sr=!1,fs=0;const Ei=new Array(Et);for(T=0;T<Et;T++)Ei[T]=0;for(T=G;T<=U;T++){const bt=p[T];if(Pe>=Et){at(bt,W,M,!0);continue}let Pt;if(bt.key!=null)Pt=ge.get(bt.key);else for(be=se;be<=$;be++)if(Ei[be-se]===0&&xs(bt,w[be])){Pt=be;break}Pt===void 0?at(bt,W,M,!0):(Ei[Pt-se]=T+1,Pt>=fs?fs=Pt:Sr=!0,Q(bt,w[Pt],x,null,W,M,S,A,L),Pe++)}const Wo=Sr?Ey(Ei):Wn;for(be=Wo.length-1,T=Et-1;T>=0;T--){const bt=se+T,Pt=w[bt],oe=bt+1<P?w[bt+1].el:q;Ei[T]===0?Q(null,Pt,x,oe,W,M,S,A,L):Sr&&(be<0||T!==Wo[be]?kr(Pt,x,oe,2):be--)}}},kr=(p,w,x,q,W=null)=>{const{el:M,type:S,transition:A,children:L,shapeFlag:T}=p;if(T&6){kr(p.component.subTree,w,x,q);return}if(T&128){p.suspense.move(w,x,q);return}if(T&64){S.move(p,w,x,Yr);return}if(S===xr){s(M,w,x);for(let U=0;U<L.length;U++)kr(L[U],w,x,q);s(p.anchor,w,x);return}if(S===Ju){de(p,w,x);return}if(q!==2&&T&1&&A)if(q===0)A.beforeEnter(M),s(M,w,x),St(()=>A.enter(M),W);else{const{leave:U,delayLeave:$,afterLeave:G}=A,se=()=>s(M,w,x),ge=()=>{U(M,()=>{se(),G&&G()})};$?$(M,se,ge):ge()}else s(M,w,x)},at=(p,w,x,q=!1,W=!1)=>{const{type:M,props:S,ref:A,children:L,dynamicChildren:T,shapeFlag:P,patchFlag:U,dirs:$}=p;if(A!=null&&ul(A,null,x,p,!0),P&256){w.ctx.deactivate(p);return}const G=P&1&&$,se=!zo(p);let ge;if(se&&(ge=S&&S.onVnodeBeforeUnmount)&&wr(ge,w,p),P&6)qo(p.component,x,q);else{if(P&128){p.suspense.unmount(x,q);return}G&&Mi(p,null,w,"beforeUnmount"),P&64?p.type.remove(p,w,x,W,Yr,q):T&&(M!==xr||U>0&&U&64)?It(T,w,x,!1,!0):(M===xr&&U&384||!W&&P&16)&&It(L,w,x),q&&zr(p)}(se&&(ge=S&&S.onVnodeUnmounted)||G)&&St(()=>{ge&&wr(ge,w,p),G&&Mi(p,null,w,"unmounted")},x)},zr=p=>{const{type:w,el:x,anchor:q,transition:W}=p;if(w===xr){Zt(x,q);return}if(w===Ju){Ce(p);return}const M=()=>{a(x),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(p.shapeFlag&1&&W&&!W.persisted){const{leave:S,delayLeave:A}=W,L=()=>S(x,M);A?A(p.el,M,L):L()}else M()},Zt=(p,w)=>{let x;for(;p!==w;)x=R(p),a(p),p=x;a(w)},qo=(p,w,x)=>{const{bum:q,scope:W,update:M,subTree:S,um:A}=p;q&&Fu(q),W.stop(),M&&(M.active=!1,at(S,p,w,x)),A&&St(A,w),St(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},It=(p,w,x,q=!1,W=!1,M=0)=>{for(let S=M;S<p.length;S++)at(p[S],w,x,q,W)},er=p=>p.shapeFlag&6?er(p.component.subTree):p.shapeFlag&128?p.suspense.next():R(p.anchor||p.el);let fn=!1;const hs=(p,w,x)=>{p==null?w._vnode&&at(w._vnode,null,null,!0):Q(w._vnode||null,p,w,null,null,null,x),fn||(fn=!0,ah(),Md(),fn=!1),w._vnode=p},Yr={p:Q,um:at,m:kr,r:zr,mt:Ie,mc:tt,pc:qe,pbc:Te,n:er,o:t};let pn,ds;return e&&([pn,ds]=e(Yr)),{render:hs,hydrate:pn,createApp:by(hs,pn)}}function Vu({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Di({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Iy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Yd(t,e,r=!1){const s=t.children,a=e.children;if(re(s)&&re(a))for(let l=0;l<s.length;l++){const h=s[l];let m=a[l];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=a[l]=ii(a[l]),m.el=h.el),r||Yd(h,m)),m.type===gu&&(m.el=h.el)}}function Ey(t){const e=t.slice(),r=[0];let s,a,l,h,m;const N=t.length;for(s=0;s<N;s++){const f=t[s];if(f!==0){if(a=r[r.length-1],t[a]<f){e[s]=a,r.push(s);continue}for(l=0,h=r.length-1;l<h;)m=l+h>>1,t[r[m]]<f?l=m+1:h=m;f<t[r[l]]&&(l>0&&(e[s]=r[l-1]),r[l]=s)}}for(l=r.length,h=r[l-1];l-- >0;)r[l]=h,h=e[h];return r}function Xd(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Xd(e)}const ky=t=>t.__isTeleport,xr=Symbol.for("v-fgt"),gu=Symbol.for("v-txt"),Js=Symbol.for("v-cmt"),Ju=Symbol.for("v-stc"),Is=[];let dr=null;function Sy(t=!1){Is.push(dr=t?null:[])}function Ay(){Is.pop(),dr=Is[Is.length-1]||null}let Ks=1;function wh(t){Ks+=t}function Ry(t){return t.dynamicChildren=Ks>0?dr||Wn:null,Ay(),Ks>0&&dr&&dr.push(t),t}function My(t,e,r,s,a,l){return Ry(st(t,e,r,s,a,l,!0))}function Dy(t){return t?t.__v_isVNode===!0:!1}function xs(t,e){return t.type===e.type&&t.key===e.key}const bu="__vInternal",Zd=({key:t})=>t??null,Xo=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ct(t)||Dt(t)||le(t)?{i:Wr,r:t,k:e,f:!!r}:t:null);function st(t,e=null,r=null,s=0,a=null,l=t===xr?0:1,h=!1,m=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Zd(e),ref:e&&Xo(e),scopeId:Pd,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Wr};return m?(Kl(N,r),l&128&&t.normalize(N)):r&&(N.shapeFlag|=ct(r)?8:16),Ks>0&&!h&&dr&&(N.patchFlag>0||l&6)&&N.patchFlag!==32&&dr.push(N),N}const an=Ly;function Ly(t,e=null,r=null,s=0,a=null,l=!1){if((!t||t===Hm)&&(t=Js),Dy(t)){const m=ts(t,e,!0);return r&&Kl(m,r),Ks>0&&!l&&dr&&(m.shapeFlag&6?dr[dr.indexOf(t)]=m:dr.push(m)),m.patchFlag|=-2,m}if(Ky(t)&&(t=t.__vccOpts),e){e=Py(e);let{class:m,style:N}=e;m&&!ct(m)&&(e.class=Rl(m)),Je(N)&&(_d(N)&&!re(N)&&(N=yt({},N)),e.style=Al(N))}const h=ct(t)?1:Gm(t)?128:ky(t)?64:Je(t)?4:le(t)?2:0;return st(t,e,r,s,a,h,l,!0)}function Py(t){return t?_d(t)||bu in t?yt({},t):t:null}function ts(t,e,r=!1){const{props:s,ref:a,patchFlag:l,children:h}=t,m=e?By(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&Zd(m),ref:e&&e.ref?r&&a?re(a)?a.concat(Xo(e)):[a,Xo(e)]:Xo(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ts(t.ssContent),ssFallback:t.ssFallback&&ts(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Hs(t=" ",e=0){return an(gu,null,t,e)}function Or(t){return t==null||typeof t=="boolean"?an(Js):re(t)?an(xr,null,t.slice()):typeof t=="object"?ii(t):an(gu,null,String(t))}function ii(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ts(t)}function Kl(t,e){let r=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(re(e))r=16;else if(typeof e=="object")if(s&65){const a=e.default;a&&(a._c&&(a._d=!1),Kl(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(bu in e)?e._ctx=Wr:a===3&&Wr&&(Wr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else le(e)?(e={default:e,_ctx:Wr},r=32):(e=String(e),s&64?(r=16,e=[Hs(e)]):r=8);t.children=e,t.shapeFlag|=r}function By(...t){const e={};for(let r=0;r<t.length;r++){const s=t[r];for(const a in s)if(a==="class")e.class!==s.class&&(e.class=Rl([e.class,s.class]));else if(a==="style")e.style=Al([e.style,s.style]);else if(du(a)){const l=e[a],h=s[a];h&&l!==h&&!(re(l)&&l.includes(h))&&(e[a]=l?[].concat(l,h):h)}else a!==""&&(e[a]=s[a])}return e}function wr(t,e,r,s=null){fr(t,e,7,[r,s])}const Fy=Vd();let Uy=0;function $y(t,e,r){const s=t.type,a=(e?e.appContext:t.appContext)||Fy,l={uid:Uy++,vnode:t,type:s,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new um(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kd(s,a),emitsOptions:Ld(s,a),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=$m.bind(null,l),t.ce&&t.ce(l),l}let Tt=null,ca,ll;{const t=dd(),e=(r,s)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(s),l=>{a.length>1?a.forEach(h=>h(l)):a[0](l)}};ca=e("__VUE_INSTANCE_SETTERS__",r=>Tt=r),ll=e("__VUE_SSR_SETTERS__",r=>vu=r)}const No=t=>{const e=Tt;return ca(t),t.scope.on(),()=>{t.scope.off(),ca(e)}},Nh=()=>{Tt&&Tt.scope.off(),ca(null)};function ef(t){return t.vnode.shapeFlag&4}let vu=!1;function Qy(t,e=!1){e&&ll(e);const{props:r,children:s}=t.vnode,a=ef(t);xy(t,r,a,e),qy(t,s);const l=a?jy(t,e):void 0;return e&&ll(!1),l}function jy(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=Td(new Proxy(t.ctx,fy));const{setup:s}=r;if(s){const a=t.setupContext=s.length>1?Jy(t):null,l=No(t);ln();const h=gi(s,t,0,[t.props,a]);if(cn(),l(),ud(h)){if(h.then(Nh,Nh),e)return h.then(m=>{gh(t,m,e)}).catch(m=>{yu(m,t,0)});t.asyncDep=h}else gh(t,h,e)}else tf(t,e)}function gh(t,e,r){le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=Sd(e)),tf(t,r)}let bh;function tf(t,e,r){const s=t.type;if(!t.render){if(!e&&bh&&!s.render){const a=s.template||Vl(t).template;if(a){const{isCustomElement:l,compilerOptions:h}=t.appContext.config,{delimiters:m,compilerOptions:N}=s,f=yt(yt({isCustomElement:l,delimiters:m},h),N);s.render=bh(a,f)}}t.render=s.render||Xt}{const a=No(t);ln();try{py(t)}finally{cn(),a()}}}function Vy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return Mt(t,"get","$attrs"),e[r]}}))}function Jy(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Vy(t)},slots:t.slots,emit:t.emit,expose:e}}function Hl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Sd(Td(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in _s)return _s[r](t)},has(e,r){return r in e||r in _s}}))}function Ky(t){return le(t)&&"__vccOpts"in t}const Hy=(t,e)=>km(t,e,vu),Gy="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const zy="http://www.w3.org/2000/svg",Yy="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,vh=ni&&ni.createElement("template"),Xy={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,s)=>{const a=e==="svg"?ni.createElementNS(zy,t):e==="mathml"?ni.createElementNS(Yy,t):ni.createElement(t,r?{is:r}:void 0);return t==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:t=>ni.createTextNode(t),createComment:t=>ni.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ni.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,s,a,l){const h=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{vh.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const m=vh.content;if(s==="svg"||s==="mathml"){const N=m.firstChild;for(;N.firstChild;)m.appendChild(N.firstChild);m.removeChild(N)}e.insertBefore(m,r)}return[h?h.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Zy=Symbol("_vtc");function ew(t,e,r){const s=t[Zy];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const xh=Symbol("_vod"),tw=Symbol("_vsh"),rw=Symbol(""),iw=/(^|;)\s*display\s*:/;function nw(t,e,r){const s=t.style,a=ct(r);let l=!1;if(r&&!a){if(e)if(ct(e))for(const h of e.split(";")){const m=h.slice(0,h.indexOf(":")).trim();r[m]==null&&Zo(s,m,"")}else for(const h in e)r[h]==null&&Zo(s,h,"");for(const h in r)h==="display"&&(l=!0),Zo(s,h,r[h])}else if(a){if(e!==r){const h=s[rw];h&&(r+=";"+h),s.cssText=r,l=iw.test(r)}}else e&&t.removeAttribute("style");xh in t&&(t[xh]=l?s.display:"",t[tw]&&(s.display="none"))}const Oh=/\s*!important$/;function Zo(t,e,r){if(re(r))r.forEach(s=>Zo(t,e,s));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const s=sw(t,e);Oh.test(r)?t.setProperty(os(s),r.replace(Oh,""),"important"):t[s]=r}}const Ch=["Webkit","Moz","ms"],Ku={};function sw(t,e){const r=Ku[e];if(r)return r;let s=Zn(e);if(s!=="filter"&&s in t)return Ku[e]=s;s=hd(s);for(let a=0;a<Ch.length;a++){const l=Ch[a]+s;if(l in t)return Ku[e]=l}return e}const qh="http://www.w3.org/1999/xlink";function ow(t,e,r,s,a){if(s&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(qh,e.slice(6,e.length)):t.setAttributeNS(qh,e,r);else{const l=om(e);r==null||l&&!fd(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function aw(t,e,r,s,a,l,h){if(e==="innerHTML"||e==="textContent"){s&&h(s,a,l),t[e]=r??"";return}const m=t.tagName;if(e==="value"&&m!=="PROGRESS"&&!m.includes("-")){const f=m==="OPTION"?t.getAttribute("value")||"":t.value,v=r??"";(f!==v||!("_value"in t))&&(t.value=v),r==null&&t.removeAttribute(e),t._value=r;return}let N=!1;if(r===""||r==null){const f=typeof t[e];f==="boolean"?r=fd(r):r==null&&f==="string"?(r="",N=!0):f==="number"&&(r=0,N=!0)}try{t[e]=r}catch{}N&&t.removeAttribute(e)}function uw(t,e,r,s){t.addEventListener(e,r,s)}function lw(t,e,r,s){t.removeEventListener(e,r,s)}const Wh=Symbol("_vei");function cw(t,e,r,s,a=null){const l=t[Wh]||(t[Wh]={}),h=l[e];if(s&&h)h.value=s;else{const[m,N]=hw(e);if(s){const f=l[e]=pw(s,a);uw(t,m,f,N)}else h&&(lw(t,m,h,N),l[e]=void 0)}}const _h=/(?:Once|Passive|Capture)$/;function hw(t){let e;if(_h.test(t)){e={};let s;for(;s=t.match(_h);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let Hu=0;const dw=Promise.resolve(),fw=()=>Hu||(dw.then(()=>Hu=0),Hu=Date.now());function pw(t,e){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;fr(mw(s,r.value),e,5,[s])};return r.value=t,r.attached=fw(),r}function mw(t,e){if(re(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(s=>a=>!a._stopped&&s&&s(a))}else return e}const Th=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,yw=(t,e,r,s,a,l,h,m,N)=>{const f=a==="svg";e==="class"?ew(t,s,f):e==="style"?nw(t,r,s):du(e)?El(e)||cw(t,e,r,s,h):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ww(t,e,s,f))?aw(t,e,s,l,h,m,N):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),ow(t,e,s,f))};function ww(t,e,r,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Th(e)&&le(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Th(e)&&ct(r)?!1:e in t}const Nw=yt({patchProp:yw},Xy);let Ih;function gw(){return Ih||(Ih=_y(Nw))}const bw=(...t)=>{const e=gw().createApp(...t),{mount:r}=e;return e.mount=s=>{const a=xw(s);if(!a)return;const l=e._component;!le(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const h=r(a,!1,vw(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),h},e};function vw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xw(t){return ct(t)?document.querySelector(t):t}function bi(t){return typeof t>"u"||t===void 0}function Ht(t){return typeof t=="string"}function xu(t){return typeof t=="number"}function ha(t){return typeof t=="boolean"}function Gl(t){return t===null}function Ow(t){return t instanceof Date}function zl(t){return typeof t=="bigint"}function Gt(t){return typeof t=="function"}function qr(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function Jo(t){return Jr(t)?t:[t]}function Jr(t){return Array.isArray(t)}function vi(t){return t}const Ee=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),$e=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}}),Mr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:$e.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}}),rf=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:$e.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Cw=["preserve rows","delete rows","drop"],Ft=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}}),Ci=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:$e.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:$e.create(t),identifier:$e.create(e)})}}),Es=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:Ci.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),cl=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:$e.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),hl=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}}),Ti=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}}),xi=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:Ci.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:Ci.createWithSchema(t,e)})}});function Lt(t){return qr(t)&&Gt(t.toOperationNode)}function qw(t){return qr(t)&&"expressionType"in t&&Lt(t)}function Ww(t){return qr(t)&&"expression"in t&&Ht(t.alias)&&Lt(t)}const Rr=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}}),qi=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}}),as=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}}),Gu=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?qi.create(t.on,r):as.create(t.on,r)})}}),ks=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Gu.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Gu.cloneWithOperation(t.on,"And",e):Gu.create(e)})}}),rs=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),_w=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],Tw=["+","-","*","/","%","^","&","|","#","<<",">>"],nf=["->","->>"],Iw=[..._w,...Tw,"&&","||"],Ew=["exists","not exists"],kw=["not","-",...Ew],Sw=[...Iw,...nf,...kw,"between","between symmetric"],Wi=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function Eh(t){return Ht(t)&&nf.includes(t)}const ze=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:$e.create(t)})}}),Yl=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}}),Ou=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Yl.create()})}});var Sn;class Aw{constructor(e){O(this,Sn,void 0);k(this,Sn,e)}get dynamicReference(){return n(this,Sn)}get refType(){}toOperationNode(){return lf(n(this,Sn))}}Sn=new WeakMap;function sf(t){return qr(t)&&Lt(t)&&Ht(t.dynamicReference)}const dl=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}}),mt=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return mt.create([t],[])},createWithChild(t){return mt.create(["",""],[t])},createWithChildren(t){return mt.create(new Array(t.length+1).fill(""),t)}});function of(t){return t==="asc"||t==="desc"}function Cu(t){if(t.length===2)return[zu(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>zu(r)):[zu(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function zu(t,e){const r=Rw(t);if(dl.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return dl.create(r,af(e))}function Rw(t){if(Co(t))return hn(t);if(sf(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!of(r))throw new Error(`Invalid order by direction: ${r}`);return dl.create(Kr(e),af(r))}return Kr(t)}function af(t){if(t)return t==="asc"||t==="desc"?mt.createWithSql(t):t.toOperationNode()}const da=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}}),uf=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}}),Ss=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function lf(t){return Ht(t)?Kr(t):t.toOperationNode()}function Gs(t){return Jr(t)?t.map(e=>Kt(e)):[Kt(t)]}function Kt(t){return Co(t)?hn(t):lf(t)}function Mw(t,e){const r=Kr(t);if(Eh(e))return da.create(r,uf.create(Wi.create(e)));const s=e.slice(0,-1);if(Eh(s))return da.create(r,Ss.create(Wi.create(s)));throw new Error(`Invalid JSON operator: ${e}`)}function Kr(t){const e=".";if(!t.includes(e))return Ou.create(ze.create(t));const r=t.split(e).map(Xl);if(r.length===3)return Lw(r);if(r.length===2)return Pw(r);throw new Error(`invalid column reference ${t}`)}function Dw(t){const e=" as ";if(t.includes(e)){const[r,s]=t.split(e).map(Xl);return Ti.create(Kr(r),$e.create(s))}else return Kr(t)}function cf(t){return ze.create(t)}function fa(t){const e=" ";if(t.includes(e)){const[r,s]=t.split(e).map(Xl);if(!of(s))throw new Error(`invalid order direction "${s}" next to "${r}"`);return Cu([r,s])[0]}else return cf(t)}function Lw(t){const[e,r,s]=t;return Ou.create(ze.create(s),xi.createWithSchema(e,r))}function Pw(t){const[e,r]=t;return Ou.create(ze.create(r),xi.create(e))}function Xl(t){return t.trim()}const hf=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}}),Zl=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}}),Ir=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Bw(t){return Jr(t)?Fw(t):et(t)}function et(t){return Co(t)?hn(t):Ir.create(t)}function ec(t){return xu(t)||ha(t)||Gl(t)}function tc(t){if(!ec(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Ir.createImmediate(t)}function Fw(t){return t.some(Co)?Zl.create(t.map(e=>et(e))):hf.create(t)}const is=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function wt(t){if(t.length===3)return rc(t[0],t[1],t[2]);if(t.length===1)return et(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function rc(t,e,r){return Uw(e)&&df(r)?rs.create(Kt(t),fl(e),Ir.createImmediate(r)):rs.create(Kt(t),fl(e),Bw(r))}function Er(t,e,r){return rs.create(Kt(t),fl(e),Kt(r))}function kh(t,e){return pa(Object.entries(t).filter(([,r])=>!bi(r)).map(([r,s])=>rc(r,df(s)?"is":"=",s)),e)}function pa(t,e,r=!0){const s=e==="and"?qi.create:as.create;if(t.length===0)return rs.create(Ir.createImmediate(1),Wi.create("="),Ir.createImmediate(e==="and"?1:0));let a=Sh(t[0]);for(let l=1;l<t.length;++l)a=s(a,Sh(t[l]));return t.length>1&&r?is.create(a):a}function Uw(t){return t==="is"||t==="is not"}function df(t){return Gl(t)||ha(t)}function fl(t){if(Ht(t)&&Sw.includes(t))return Wi.create(t);if(Lt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Sh(t){return Lt(t)?t.toOperationNode():t}const ns=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Ah=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),pl=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?ns.cloneWithItems(t.orderBy,e):ns.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?Ah.cloneWithItems(t.partitionBy,e):Ah.create(e)})}}),ma=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}}),Rh=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Mh=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?qi.create(t.having,r):as.create(t.having,r)})}}),fe=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:ma.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?ns.cloneWithItems(t.orderBy,e):ns.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?Rh.cloneWithItems(t.groupBy,e):Rh.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithFetch(t,e){return c({...t,fetch:e})},cloneWithHaving(t,e){return c({...t,having:t.having?Mh.cloneWithOperation(t.having,"And",e):Mh.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});function ce(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var sr;const Ds=class Ds{constructor(e){O(this,sr,void 0);k(this,sr,c(e))}on(...e){return new Ds({...n(this,sr),joinNode:ks.cloneWithOn(n(this,sr).joinNode,wt(e))})}onRef(e,r,s){return new Ds({...n(this,sr),joinNode:ks.cloneWithOn(n(this,sr).joinNode,Er(e,r,s))})}onTrue(){return new Ds({...n(this,sr),joinNode:ks.cloneWithOn(n(this,sr).joinNode,mt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return n(this,sr).joinNode}};sr=new WeakMap;let ya=Ds;ce(ya,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const $w=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function Qw(t){return Gs(t).map($w.create)}var Ji;const Qa=class Qa{constructor(e){O(this,Ji,void 0);k(this,Ji,c(e))}orderBy(e,r){return new Qa({overNode:pl.cloneWithOrderByItems(n(this,Ji).overNode,Cu([e,r]))})}partitionBy(e){return new Qa({overNode:pl.cloneWithPartitionByItems(n(this,Ji).overNode,Qw(e))})}$call(e){return e(this)}toOperationNode(){return n(this,Ji).overNode}};Ji=new WeakMap;let wa=Qa;ce(wa,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const As=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Yl.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:Ou.createSelectAll(t)})}});function us(t){return Gt(t)?us(t(cs())):Jr(t)?t.map(e=>Dh(e)):[Dh(t)]}function Dh(t){return Ht(t)?As.create(Dw(t)):sf(t)?As.create(t.toOperationNode()):As.create(Tf(t))}function go(t){return t?Array.isArray(t)?t.map(Lh):[Lh(t)]:[As.createSelectAll()]}function Lh(t){if(Ht(t))return As.createSelectAllFromTable(Ge(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const jw=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}}),Vw=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function ff(t){const e=Gt(t)?t(cs()):t,r=Jr(e)?e:c([e]);return Jw(r)}function Jw(t){const e=Kw(t);return[c([...e.keys()].map(ze.create)),jw.create(t.map(r=>Hw(r,e)))]}function Kw(t){const e=new Map;for(const r of t){const s=Object.keys(r);for(const a of s)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Hw(t,e){const r=Object.keys(t),s=Array.from({length:e.size});let a=!1;for(const h of r){const m=e.get(h);if(bi(m))continue;const N=t[h];(bi(N)||Co(N))&&(a=!0),s[m]=N}if(r.length<e.size||a){const h=Vw.create();return Zl.create(s.map(m=>bi(m)?h:et(m)))}return hf.create(s)}const Jt=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return c({kind:"InsertQueryNode"})},cloneWith(t,e){return c({...t,...e})}}),En=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return c({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return c({...t,from:t.from?ma.cloneWithFroms(t.from,e):ma.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})},cloneWithLimit(t,e){return c({...t,limit:e})}}),Ph=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}}),Fi=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:ma.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?ns.cloneWithItems(t.orderBy,e):ns.create(e)})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?Ph.cloneWithTables(t.using,e):Ph.create(e)})}}),At=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?qi.create(t.where,r):as.create(t.where,r)})}}),Bh=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}}),Gw=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}}),bo=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}}),Rt=c({is(t){return t.kind==="MergeQueryNode"},create(t,e){return c({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return c({...t,using:e})},cloneWithWhen(t,e){return c({...t,whens:t.whens?c([...t.whens,e]):c([e])})},cloneWithThen(t,e){return c({...t,whens:t.whens?c([...t.whens.slice(0,-1),bo.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),X=c({is(t){return fe.is(t)||Jt.is(t)||En.is(t)||Fi.is(t)||Rt.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?At.cloneWithOperation(t.where,"And",e):At.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?Bh.cloneWithSelections(t.returning,e):Bh.create(e)})},cloneWithoutReturning(t){return c({...t,returning:void 0})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Gw.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return c({...t,top:e})}}),pf=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function zw(...t){return t.length===2?[pf.create(Kt(t[0]),et(t[1]))]:ic(t[0])}function ic(t){const e=Gt(t)?t(cs()):t;return Object.entries(e).filter(([r,s])=>s!==void 0).map(([r,s])=>pf.create(ze.create(r),et(s)))}const Yw=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});class Xw{constructor(e,r){ee(this,"insertId");ee(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class vo extends Error{constructor(r){super("no result");ee(this,"node");this.node=r}}function xo(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Vt=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?At.cloneWithOperation(t.indexWhere,"And",e):At.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?At.cloneWithOperation(t.indexWhere,"Or",e):At.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?At.cloneWithOperation(t.updateWhere,"And",e):At.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?At.cloneWithOperation(t.updateWhere,"Or",e):At.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var Me;const Dr=class Dr{constructor(e){O(this,Me,void 0);k(this,Me,c(e))}column(e){const r=ze.create(e);return new Dr({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{columns:n(this,Me).onConflictNode.columns?c([...n(this,Me).onConflictNode.columns,r]):c([r])})})}columns(e){const r=e.map(ze.create);return new Dr({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{columns:n(this,Me).onConflictNode.columns?c([...n(this,Me).onConflictNode.columns,...r]):c(r)})})}constraint(e){return new Dr({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{constraint:$e.create(e)})})}expression(e){return new Dr({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Dr({...n(this,Me),onConflictNode:Vt.cloneWithIndexWhere(n(this,Me).onConflictNode,wt(e))})}whereRef(e,r,s){return new Dr({...n(this,Me),onConflictNode:Vt.cloneWithIndexWhere(n(this,Me).onConflictNode,Er(e,r,s))})}clearWhere(){return new Dr({...n(this,Me),onConflictNode:Vt.cloneWithoutIndexWhere(n(this,Me).onConflictNode)})}doNothing(){return new mf({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ga({...n(this,Me),onConflictNode:Vt.cloneWith(n(this,Me).onConflictNode,{updates:ic(e)})})}$call(e){return e(this)}};Me=new WeakMap;let Na=Dr;ce(Na,"don't await OnConflictBuilder instances.");var io;class mf{constructor(e){O(this,io,void 0);k(this,io,c(e))}toOperationNode(){return n(this,io).onConflictNode}}io=new WeakMap;ce(mf,"don't await OnConflictDoNothingBuilder instances.");var or;const Ls=class Ls{constructor(e){O(this,or,void 0);k(this,or,c(e))}where(...e){return new Ls({...n(this,or),onConflictNode:Vt.cloneWithUpdateWhere(n(this,or).onConflictNode,wt(e))})}whereRef(e,r,s){return new Ls({...n(this,or),onConflictNode:Vt.cloneWithUpdateWhere(n(this,or).onConflictNode,Er(e,r,s))})}clearWhere(){return new Ls({...n(this,or),onConflictNode:Vt.cloneWithoutUpdateWhere(n(this,or).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return n(this,or).onConflictNode}};or=new WeakMap;let ga=Ls;ce(ga,"don't await OnConflictUpdateBuilder instances.");const Zw=c({is(t){return t.kind==="TopNode"},create(t,e){return c({kind:"TopNode",expression:t,modifiers:e})}});function ls(t,e){if(!xu(t)&&!zl(t))throw new Error(`Invalid top expression: ${t}`);if(!bi(e)&&!eN(e))throw new Error(`Invalid top modifiers: ${e}`);return Zw.create(t,e)}function eN(t){return t==="percent"||t==="with ties"||t==="percent with ties"}var te;const it=class it{constructor(e){O(this,te,void 0);k(this,te,c(e))}values(e){const[r,s]=ff(e);return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{columns:r,values:s})})}columns(e){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{columns:c(e.map(ze.create))})})}expression(e){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{values:hn(e)})})}defaultValues(){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{defaultValues:!0})})}ignore(){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{ignore:!0})})}top(e,r){return new it({...n(this,te),queryNode:X.cloneWithTop(n(this,te).queryNode,ls(e,r))})}onConflict(e){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{onConflict:e(new Na({onConflictNode:Vt.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new it({...n(this,te),queryNode:Jt.cloneWith(n(this,te).queryNode,{onDuplicateKey:Yw.create(ic(e))})})}returning(e){return new it({...n(this,te),queryNode:X.cloneWithReturning(n(this,te).queryNode,us(e))})}returningAll(){return new it({...n(this,te),queryNode:X.cloneWithReturning(n(this,te).queryNode,go())})}clearReturning(){return new it({...n(this,te),queryNode:X.cloneWithoutReturning(n(this,te).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new it({...n(this,te)})}$castTo(){return new it(n(this,te))}$narrowType(){return new it(n(this,te))}$assertType(){return new it(n(this,te))}withPlugin(e){return new it({...n(this,te),executor:n(this,te).executor.withPlugin(e)})}toOperationNode(){return n(this,te).executor.transformQuery(n(this,te).queryNode,n(this,te).queryId)}compile(){return n(this,te).executor.compileQuery(this.toOperationNode(),n(this,te).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,te).executor.executeQuery(e,n(this,te).queryId);return n(this,te).executor.adapter.supportsReturning&&r.returning?s.rows:[new Xw(s.insertId,s.numAffectedRows??s.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vo){const r=await this.executeTakeFirst();if(r===void 0)throw xo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,te).executor.stream(r,e,n(this,te).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new it({...n(this,te),queryNode:X.cloneWithExplain(n(this,te).queryNode,e,r)}).execute()}};te=new WeakMap;let zs=it;ce(zs,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class tN{constructor(e){ee(this,"numDeletedRows");this.numDeletedRows=e}}const nc=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var V;const Fe=class Fe{constructor(e){O(this,V,void 0);k(this,V,c(e))}where(...e){return new Fe({...n(this,V),queryNode:X.cloneWithWhere(n(this,V).queryNode,wt(e))})}whereRef(e,r,s){return new Fe({...n(this,V),queryNode:X.cloneWithWhere(n(this,V).queryNode,Er(e,r,s))})}clearWhere(){return new Fe({...n(this,V),queryNode:X.cloneWithoutWhere(n(this,V).queryNode)})}top(e,r){return new Fe({...n(this,V),queryNode:X.cloneWithTop(n(this,V).queryNode,ls(e,r))})}using(e){return new Fe({...n(this,V),queryNode:Fi.cloneWithUsing(n(this,V).queryNode,Xs(e))})}innerJoin(...e){return new Fe({...n(this,V),queryNode:X.cloneWithJoin(n(this,V).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new Fe({...n(this,V),queryNode:X.cloneWithJoin(n(this,V).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new Fe({...n(this,V),queryNode:X.cloneWithJoin(n(this,V).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new Fe({...n(this,V),queryNode:X.cloneWithJoin(n(this,V).queryNode,_t("FullJoin",e))})}returning(e){return new Fe({...n(this,V),queryNode:X.cloneWithReturning(n(this,V).queryNode,us(e))})}returningAll(e){return new Fe({...n(this,V),queryNode:X.cloneWithReturning(n(this,V).queryNode,go(e))})}clearReturning(){return new Fe({...n(this,V),queryNode:X.cloneWithoutReturning(n(this,V).queryNode)})}clearLimit(){return new Fe({...n(this,V),queryNode:Fi.cloneWithoutLimit(n(this,V).queryNode)})}clearOrderBy(){return new Fe({...n(this,V),queryNode:Fi.cloneWithoutOrderBy(n(this,V).queryNode)})}orderBy(e,r){return new Fe({...n(this,V),queryNode:Fi.cloneWithOrderByItems(n(this,V).queryNode,Cu([e,r]))})}limit(e){return new Fe({...n(this,V),queryNode:Fi.cloneWithLimit(n(this,V).queryNode,nc.create(et(e)))})}$call(e){return e(this)}$if(e,r){return e?r(this):new Fe({...n(this,V)})}$castTo(){return new Fe(n(this,V))}$narrowType(){return new Fe(n(this,V))}$assertType(){return new Fe(n(this,V))}withPlugin(e){return new Fe({...n(this,V),executor:n(this,V).executor.withPlugin(e)})}toOperationNode(){return n(this,V).executor.transformQuery(n(this,V).queryNode,n(this,V).queryId)}compile(){return n(this,V).executor.compileQuery(this.toOperationNode(),n(this,V).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,V).executor.executeQuery(e,n(this,V).queryId);return n(this,V).executor.adapter.supportsReturning&&r.returning?s.rows:[new tN(s.numAffectedRows??s.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vo){const r=await this.executeTakeFirst();if(r===void 0)throw xo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,V).executor.stream(r,e,n(this,V).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new Fe({...n(this,V),queryNode:X.cloneWithExplain(n(this,V).queryNode,e,r)}).execute()}};V=new WeakMap;let ba=Fe;ce(ba,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class rN{constructor(e,r){ee(this,"numUpdatedRows");ee(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var K;const Ve=class Ve{constructor(e){O(this,K,void 0);k(this,K,c(e))}where(...e){return new Ve({...n(this,K),queryNode:X.cloneWithWhere(n(this,K).queryNode,wt(e))})}whereRef(e,r,s){return new Ve({...n(this,K),queryNode:X.cloneWithWhere(n(this,K).queryNode,Er(e,r,s))})}clearWhere(){return new Ve({...n(this,K),queryNode:X.cloneWithoutWhere(n(this,K).queryNode)})}top(e,r){return new Ve({...n(this,K),queryNode:X.cloneWithTop(n(this,K).queryNode,ls(e,r))})}from(e){return new Ve({...n(this,K),queryNode:En.cloneWithFromItems(n(this,K).queryNode,Xs(e))})}innerJoin(...e){return new Ve({...n(this,K),queryNode:X.cloneWithJoin(n(this,K).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new Ve({...n(this,K),queryNode:X.cloneWithJoin(n(this,K).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new Ve({...n(this,K),queryNode:X.cloneWithJoin(n(this,K).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new Ve({...n(this,K),queryNode:X.cloneWithJoin(n(this,K).queryNode,_t("FullJoin",e))})}limit(e){return new Ve({...n(this,K),queryNode:En.cloneWithLimit(n(this,K).queryNode,nc.create(et(e)))})}set(...e){return new Ve({...n(this,K),queryNode:En.cloneWithUpdates(n(this,K).queryNode,zw(...e))})}returning(e){return new Ve({...n(this,K),queryNode:X.cloneWithReturning(n(this,K).queryNode,us(e))})}returningAll(){return new Ve({...n(this,K),queryNode:X.cloneWithReturning(n(this,K).queryNode,go())})}clearReturning(){return new Ve({...n(this,K),queryNode:X.cloneWithoutReturning(n(this,K).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new Ve({...n(this,K)})}$castTo(){return new Ve(n(this,K))}$narrowType(){return new Ve(n(this,K))}$assertType(){return new Ve(n(this,K))}withPlugin(e){return new Ve({...n(this,K),executor:n(this,K).executor.withPlugin(e)})}toOperationNode(){return n(this,K).executor.transformQuery(n(this,K).queryNode,n(this,K).queryId)}compile(){return n(this,K).executor.compileQuery(this.toOperationNode(),n(this,K).queryId)}async execute(){const e=this.compile(),r=e.query,s=await n(this,K).executor.executeQuery(e,n(this,K).queryId);return n(this,K).executor.adapter.supportsReturning&&r.returning?s.rows:[new rN(s.numAffectedRows??s.numUpdatedOrDeletedRows??BigInt(0),s.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vo){const r=await this.executeTakeFirst();if(r===void 0)throw xo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,K).executor.stream(r,e,n(this,K).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new Ve({...n(this,K),queryNode:X.cloneWithExplain(n(this,K).queryNode,e,r)}).execute()}};K=new WeakMap;let Ys=Ve;ce(Ys,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Fh=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:xi.create(t),columns:e?c(e.map(ze.create)):void 0})}}),va=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var Lr;const ja=class ja{constructor(e){O(this,Lr,void 0);k(this,Lr,c(e))}materialized(){return new ja({...n(this,Lr),node:va.cloneWith(n(this,Lr).node,{materialized:!0})})}notMaterialized(){return new ja({...n(this,Lr),node:va.cloneWith(n(this,Lr).node,{materialized:!1})})}toOperationNode(){return n(this,Lr).node}};Lr=new WeakMap;let xa=ja;ce(xa,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Uh(t,e){const r=e(pN()).toOperationNode();return Gt(t)?t(iN(r)).toOperationNode():va.create(yf(t),r)}function iN(t){return e=>new xa({node:va.create(yf(e),t)})}function yf(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],s=e[1].split(",").map(a=>a.trim());return Fh.create(r,s)}else return Fh.create(t)}const Ko=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}}),$h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function nN(t){let e="";for(let r=0;r<t;++r)e+=sN();return e}function sN(){return $h[~~(Math.random()*$h.length)]}function ke(){return new oN}var An;class oN{constructor(){O(this,An,void 0)}get queryId(){return n(this,An)===void 0&&k(this,An,nN(8)),n(this,An)}}An=new WeakMap;var Va;class sc{constructor(){ee(this,"nodeStack",[]);O(this,Va,c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return n(this,Va)[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Va=new WeakMap;const aN=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});var Rn,Ki,Hi,Ja,wf,Ka,Nf,Ha,gf,li,gn,no,ml,Ga,bf;class uN extends sc{constructor(r){super();O(this,Ja);O(this,Ka);O(this,Ha);O(this,li);O(this,no);O(this,Ga);O(this,Rn,void 0);O(this,Ki,new Set);O(this,Hi,new Set);k(this,Rn,r)}transformNodeImpl(r){if(!ue(this,Ja,wf).call(this,r))return super.transformNodeImpl(r);const s=ue(this,Ha,gf).call(this,r);for(const h of s)n(this,Hi).add(h);const a=ue(this,Ka,Nf).call(this,r);for(const h of a)n(this,Ki).add(h);const l=super.transformNodeImpl(r);for(const h of a)n(this,Ki).delete(h);for(const h of s)n(this,Hi).delete(h);return l}transformSchemableIdentifier(r){const s=super.transformSchemableIdentifier(r);return s.schema||!n(this,Ki).has(r.identifier.name)?s:{...s,schema:$e.create(n(this,Rn))}}transformReferences(r){const s=super.transformReferences(r);return s.table.table.schema?s:{...s,table:xi.createWithSchema(n(this,Rn),s.table.table.identifier.name)}}}Rn=new WeakMap,Ki=new WeakMap,Hi=new WeakMap,Ja=new WeakSet,wf=function(r){return r.kind in aN},Ka=new WeakSet,Nf=function(r){const s=new Set;if("name"in r&&r.name&&Ci.is(r.name)&&ue(this,no,ml).call(this,r.name,s),"from"in r&&r.from)for(const a of r.from.froms)ue(this,li,gn).call(this,a,s);if("into"in r&&r.into&&ue(this,li,gn).call(this,r.into,s),"table"in r&&r.table&&ue(this,li,gn).call(this,r.table,s),"joins"in r&&r.joins)for(const a of r.joins)ue(this,li,gn).call(this,a.table,s);return"using"in r&&r.using&&ue(this,li,gn).call(this,r.using,s),s},Ha=new WeakSet,gf=function(r){const s=new Set;return"with"in r&&r.with&&ue(this,Ga,bf).call(this,r.with,s),s},li=new WeakSet,gn=function(r,s){const a=xi.is(r)?r:Ti.is(r)&&xi.is(r.node)?r.node:null;a&&ue(this,no,ml).call(this,a.table,s)},no=new WeakSet,ml=function(r,s){const a=r.identifier.name;!n(this,Ki).has(a)&&!n(this,Hi).has(a)&&s.add(a)},Ga=new WeakSet,bf=function(r,s){for(const a of r.expressions){const l=a.name.table.table.identifier.name;n(this,Hi).has(l)||s.add(l)}};var so;class Oo{constructor(e){O(this,so,void 0);k(this,so,new uN(e))}transformQuery(e){return n(this,so).transformNode(e.node)}async transformResult(e){return e.result}}so=new WeakMap;const lN=c({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return c({kind:"MatchedNode",not:t,bySource:e})}});function Qh(t,e,r){return bo.create(pa([lN.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?Er(e[0],e[1],e[2]):wt(e)]:[]],"and",!1))}function Rs(t){return Ht(t)?mt.create([t],[]):Lt(t)?t.toOperationNode():t}var oo,Mn,Dn;class jh{constructor(){O(this,oo,void 0);O(this,Mn,void 0);O(this,Dn,void 0);ee(this,"resolve",e=>{n(this,Mn)&&n(this,Mn).call(this,e)});ee(this,"reject",e=>{n(this,Dn)&&n(this,Dn).call(this,e)});k(this,oo,new Promise((e,r)=>{k(this,Dn,r),k(this,Mn,e)}))}get promise(){return n(this,oo)}}oo=new WeakMap,Mn=new WeakMap,Dn=new WeakMap;const Vh=new Set;function cN(t){Vh.has(t)||(Vh.add(t),console.log(t))}const hN=c([]);var Gi,ao,yl;class vf{constructor(e=hN){O(this,ao);O(this,Gi,void 0);k(this,Gi,e)}get plugins(){return n(this,Gi)}transformQuery(e,r){for(const s of n(this,Gi)){const a=s.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async s=>{const a=await s.executeQuery(e),l=await ue(this,ao,yl).call(this,a,r);return dN(a,l),l})}async*stream(e,r,s){const a=new jh,l=new jh;this.provideConnection(async m=>(a.resolve(m),await l.promise)).catch(m=>a.reject(m));const h=await a.promise;try{for await(const m of h.streamQuery(e,r))yield await ue(this,ao,yl).call(this,m,s)}finally{l.resolve()}}}Gi=new WeakMap,ao=new WeakSet,yl=async function(e,r){for(const s of n(this,Gi))e=await s.transformResult({result:e,queryId:r});return e};function dN(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||cN("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class xn extends vf{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new xn([...this.plugins,e])}withPlugins(e){return new xn([...this.plugins,...e])}withPluginAtFront(e){return new xn([e,...this.plugins])}withoutPlugins(){return new xn([])}}const qu=new xn;class fN{constructor(e){ee(this,"numChangedRows");this.numChangedRows=e}}var ci;const dc=class dc{constructor(e){O(this,ci,void 0);k(this,ci,c(e))}top(e,r){return new dc({...n(this,ci),queryNode:X.cloneWithTop(n(this,ci).queryNode,ls(e,r))})}using(...e){return new Vr({...n(this,ci),queryNode:Rt.cloneWithUsing(n(this,ci).queryNode,_t("Using",e))})}};ci=new WeakMap;let Oa=dc;ce(Oa,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var nt,Ln,ea,Pr,Li;const za=class za{constructor(e){O(this,Ln);O(this,Pr);O(this,nt,void 0);k(this,nt,c(e))}top(e,r){return new za({...n(this,nt),queryNode:X.cloneWithTop(n(this,nt).queryNode,ls(e,r))})}whenMatched(){return ue(this,Ln,ea).call(this,[])}whenMatchedAnd(...e){return ue(this,Ln,ea).call(this,e)}whenMatchedAndRef(e,r,s){return ue(this,Ln,ea).call(this,[e,r,s],!0)}whenNotMatched(){return ue(this,Pr,Li).call(this,[])}whenNotMatchedAnd(...e){return ue(this,Pr,Li).call(this,e)}whenNotMatchedAndRef(e,r,s){return ue(this,Pr,Li).call(this,[e,r,s],!0)}whenNotMatchedBySource(){return ue(this,Pr,Li).call(this,[],!1,!0)}whenNotMatchedBySourceAnd(...e){return ue(this,Pr,Li).call(this,e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,s){return ue(this,Pr,Li).call(this,[e,r,s],!0,!0)}$call(e){return e(this)}$if(e,r){return e?r(this):new za({...n(this,nt)})}toOperationNode(){return n(this,nt).executor.transformQuery(n(this,nt).queryNode,n(this,nt).queryId)}compile(){return n(this,nt).executor.compileQuery(n(this,nt).queryNode,n(this,nt).queryId)}async execute(){const e=this.compile(),r=await n(this,nt).executor.executeQuery(e,n(this,nt).queryId);return[new fN(r.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vo){const r=await this.executeTakeFirst();if(r===void 0)throw xo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}};nt=new WeakMap,Ln=new WeakSet,ea=function(e,r){return new wl({...n(this,nt),queryNode:Rt.cloneWithWhen(n(this,nt).queryNode,Qh({isMatched:!0},e,r))})},Pr=new WeakSet,Li=function(e,r=!1,s=!1){const a={...n(this,nt),queryNode:Rt.cloneWithWhen(n(this,nt).queryNode,Qh({isMatched:!1,bySource:s},e,r))},l=s?wl:xf;return new l(a)};let Vr=za;ce(Vr,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");var ar;class wl{constructor(e){O(this,ar,void 0);k(this,ar,c(e))}thenDelete(){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,Rs("delete"))})}thenDoNothing(){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,Rs("do nothing"))})}thenUpdate(e){return new Vr({...n(this,ar),queryNode:Rt.cloneWithThen(n(this,ar).queryNode,Rs(e(new Ys({queryId:n(this,ar).queryId,executor:qu,queryNode:En.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}}ar=new WeakMap;ce(wl,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var hi;class xf{constructor(e){O(this,hi,void 0);k(this,hi,c(e))}thenDoNothing(){return new Vr({...n(this,hi),queryNode:Rt.cloneWithThen(n(this,hi).queryNode,Rs("do nothing"))})}thenInsertValues(e){const[r,s]=ff(e);return new Vr({...n(this,hi),queryNode:Rt.cloneWithThen(n(this,hi).queryNode,Rs(Jt.cloneWith(Jt.createWithoutInto(),{columns:r,values:s})))})}}hi=new WeakMap;ce(xf,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var Oe;const Ui=class Ui{constructor(e){O(this,Oe,void 0);k(this,Oe,c(e))}selectFrom(e){return bl({queryId:ke(),executor:n(this,Oe).executor,queryNode:fe.createFrom(Xs(e),n(this,Oe).withNode)})}selectNoFrom(e){return bl({queryId:ke(),executor:n(this,Oe).executor,queryNode:fe.cloneWithSelections(fe.create(n(this,Oe).withNode),us(e))})}insertInto(e){return new zs({queryId:ke(),executor:n(this,Oe).executor,queryNode:Jt.create(Ge(e),n(this,Oe).withNode)})}replaceInto(e){return new zs({queryId:ke(),executor:n(this,Oe).executor,queryNode:Jt.create(Ge(e),n(this,Oe).withNode,!0)})}deleteFrom(e){return new ba({queryId:ke(),executor:n(this,Oe).executor,queryNode:Fi.create(Xs(e),n(this,Oe).withNode)})}updateTable(e){return new Ys({queryId:ke(),executor:n(this,Oe).executor,queryNode:En.create(Zs(e),n(this,Oe).withNode)})}mergeInto(e){return new Oa({queryId:ke(),executor:n(this,Oe).executor,queryNode:Rt.create(If(e),n(this,Oe).withNode)})}with(e,r){const s=Uh(e,r);return new Ui({...n(this,Oe),withNode:n(this,Oe).withNode?Ko.cloneWithExpression(n(this,Oe).withNode,s):Ko.create(s)})}withRecursive(e,r){const s=Uh(e,r);return new Ui({...n(this,Oe),withNode:n(this,Oe).withNode?Ko.cloneWithExpression(n(this,Oe).withNode,s):Ko.create(s,{recursive:!0})})}withPlugin(e){return new Ui({...n(this,Oe),executor:n(this,Oe).executor.withPlugin(e)})}withoutPlugins(){return new Ui({...n(this,Oe),executor:n(this,Oe).executor.withoutPlugins()})}withSchema(e){return new Ui({...n(this,Oe),executor:n(this,Oe).executor.withPluginAtFront(new Oo(e))})}};Oe=new WeakMap;let Ca=Ui;function pN(){return new Ca({executor:qu})}function mN(t,e){return new ya({joinNode:ks.create(t,Zs(e))})}function yN(){return new wa({overNode:pl.create()})}function _t(t,e){if(e.length===3)return NN(t,e[0],e[1],e[2]);if(e.length===2)return wN(t,e[0],e[1]);throw new Error("not implemented")}function wN(t,e,r){return r(mN(t,e)).toOperationNode()}function NN(t,e,r,s){return ks.createWithOn(t,Zs(e),Er(r,"=",s))}const gN=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}}),bN=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function vN(t){return t=Gt(t)?t(cs()):t,Gs(t).map(bN.create)}const Of=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Nn(t,e,r){return Gt(e)&&(e=e(ac())),Jr(e)||(e=[e]),e.map(s=>Of.create(t,hn(s),r))}var Br;const Ya=class Ya{constructor(e){O(this,Br,void 0);k(this,Br,e)}get expressionType(){}as(e){return new oc(this,e)}or(...e){return new Nl(as.create(n(this,Br),wt(e)))}and(...e){return new gl(qi.create(n(this,Br),wt(e)))}$castTo(){return new Ya(n(this,Br))}$notNull(){return new Ya(n(this,Br))}toOperationNode(){return n(this,Br)}};Br=new WeakMap;let Le=Ya;var Pn,di;class oc{constructor(e,r){O(this,Pn,void 0);O(this,di,void 0);k(this,Pn,e),k(this,di,r)}get expression(){return n(this,Pn)}get alias(){return n(this,di)}toOperationNode(){return Ti.create(n(this,Pn).toOperationNode(),Lt(n(this,di))?n(this,di).toOperationNode():$e.create(n(this,di)))}}Pn=new WeakMap,di=new WeakMap;var zi;const Xa=class Xa{constructor(e){O(this,zi,void 0);k(this,zi,e)}get expressionType(){}as(e){return new oc(this,e)}or(...e){return new Xa(as.create(n(this,zi),wt(e)))}$castTo(){return new Xa(n(this,zi))}toOperationNode(){return is.create(n(this,zi))}};zi=new WeakMap;let Nl=Xa;var Yi;const Za=class Za{constructor(e){O(this,Yi,void 0);k(this,Yi,e)}get expressionType(){}as(e){return new oc(this,e)}and(...e){return new Za(qi.create(n(this,Yi),wt(e)))}$castTo(){return new Za(n(this,Yi))}toOperationNode(){return is.create(n(this,Yi))}};Yi=new WeakMap;let gl=Za;const xN={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:Ir.create(t),modifier:e}}};function ON(t,e){if(!xu(t)&&!zl(t))throw new Error(`Invalid fetch row count: ${t}`);if(!CN(e))throw new Error(`Invalid fetch modifier: ${e}`);return xN.create(t,e)}function CN(t){return t==="only"||t==="with ties"}var E;const Y=class Y{constructor(e){O(this,E,void 0);k(this,E,c(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new Y({...n(this,E),queryNode:X.cloneWithWhere(n(this,E).queryNode,wt(e))})}whereRef(e,r,s){return new Y({...n(this,E),queryNode:X.cloneWithWhere(n(this,E).queryNode,Er(e,r,s))})}having(...e){return new Y({...n(this,E),queryNode:fe.cloneWithHaving(n(this,E).queryNode,wt(e))})}havingRef(e,r,s){return new Y({...n(this,E),queryNode:fe.cloneWithHaving(n(this,E).queryNode,Er(e,r,s))})}select(e){return new Y({...n(this,E),queryNode:fe.cloneWithSelections(n(this,E).queryNode,us(e))})}distinctOn(e){return new Y({...n(this,E),queryNode:fe.cloneWithDistinctOn(n(this,E).queryNode,Gs(e))})}modifyFront(e){return new Y({...n(this,E),queryNode:fe.cloneWithFrontModifier(n(this,E).queryNode,Rr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.createWithExpression(e.toOperationNode()))})}distinct(){return new Y({...n(this,E),queryNode:fe.cloneWithFrontModifier(n(this,E).queryNode,Rr.create("Distinct"))})}forUpdate(e){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForUpdate",e?Jo(e).map(Ge):void 0))})}forShare(e){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForShare",e?Jo(e).map(Ge):void 0))})}forKeyShare(e){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForKeyShare",e?Jo(e).map(Ge):void 0))})}forNoKeyUpdate(e){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("ForNoKeyUpdate",e?Jo(e).map(Ge):void 0))})}skipLocked(){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("SkipLocked"))})}noWait(){return new Y({...n(this,E),queryNode:fe.cloneWithEndModifier(n(this,E).queryNode,Rr.create("NoWait"))})}selectAll(e){return new Y({...n(this,E),queryNode:fe.cloneWithSelections(n(this,E).queryNode,go(e))})}innerJoin(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("InnerJoin",e))})}leftJoin(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("LeftJoin",e))})}rightJoin(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("RightJoin",e))})}fullJoin(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("FullJoin",e))})}innerJoinLateral(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("LateralInnerJoin",e))})}leftJoinLateral(...e){return new Y({...n(this,E),queryNode:X.cloneWithJoin(n(this,E).queryNode,_t("LateralLeftJoin",e))})}orderBy(...e){return new Y({...n(this,E),queryNode:fe.cloneWithOrderByItems(n(this,E).queryNode,Cu(e))})}groupBy(e){return new Y({...n(this,E),queryNode:fe.cloneWithGroupByItems(n(this,E).queryNode,vN(e))})}limit(e){return new Y({...n(this,E),queryNode:fe.cloneWithLimit(n(this,E).queryNode,nc.create(et(e)))})}offset(e){return new Y({...n(this,E),queryNode:fe.cloneWithOffset(n(this,E).queryNode,gN.create(et(e)))})}fetch(e,r="only"){return new Y({...n(this,E),queryNode:fe.cloneWithFetch(n(this,E).queryNode,ON(e,r))})}top(e,r){return new Y({...n(this,E),queryNode:X.cloneWithTop(n(this,E).queryNode,ls(e,r))})}union(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("union",e,!1))})}unionAll(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("union",e,!0))})}intersect(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("intersect",e,!1))})}intersectAll(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("intersect",e,!0))})}except(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("except",e,!1))})}exceptAll(e){return new Y({...n(this,E),queryNode:fe.cloneWithSetOperations(n(this,E).queryNode,Nn("except",e,!0))})}as(e){return new Cf(this,e)}clearSelect(){return new Y({...n(this,E),queryNode:fe.cloneWithoutSelections(n(this,E).queryNode)})}clearWhere(){return new Y({...n(this,E),queryNode:X.cloneWithoutWhere(n(this,E).queryNode)})}clearLimit(){return new Y({...n(this,E),queryNode:fe.cloneWithoutLimit(n(this,E).queryNode)})}clearOffset(){return new Y({...n(this,E),queryNode:fe.cloneWithoutOffset(n(this,E).queryNode)})}clearOrderBy(){return new Y({...n(this,E),queryNode:fe.cloneWithoutOrderBy(n(this,E).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new Y({...n(this,E)})}$castTo(){return new Y(n(this,E))}$narrowType(){return new Y(n(this,E))}$assertType(){return new Y(n(this,E))}$asTuple(){return new Le(this.toOperationNode())}withPlugin(e){return new Y({...n(this,E),executor:n(this,E).executor.withPlugin(e)})}toOperationNode(){return n(this,E).executor.transformQuery(n(this,E).queryNode,n(this,E).queryId)}compile(){return n(this,E).executor.compileQuery(this.toOperationNode(),n(this,E).queryId)}async execute(){const e=this.compile();return(await n(this,E).executor.executeQuery(e,n(this,E).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vo){const r=await this.executeTakeFirst();if(r===void 0)throw xo(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),s=n(this,E).executor.stream(r,e,n(this,E).queryId);for await(const a of s)yield*a.rows}async explain(e,r){return await new Y({...n(this,E),queryNode:X.cloneWithExplain(n(this,E).queryNode,e,r)}).execute()}};E=new WeakMap;let qa=Y;ce(qa,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function bl(t){return new qa(t)}var Bn,Fn;class Cf{constructor(e,r){O(this,Bn,void 0);O(this,Fn,void 0);k(this,Bn,e),k(this,Fn,r)}get expression(){return n(this,Bn)}get alias(){return n(this,Fn)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Ti.create(n(this,Bn).toOperationNode(),$e.create(n(this,Fn)))}}Bn=new WeakMap,Fn=new WeakMap;ce(Cf,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Vi=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?At.cloneWithOperation(t.filter,"And",e):At.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?At.cloneWithOperation(t.filter,"Or",e):At.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}}),Jh=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var Ot;const oi=class oi{constructor(e){O(this,Ot,void 0);k(this,Ot,c(e))}get expressionType(){}as(e){return new qN(this,e)}distinct(){return new oi({...n(this,Ot),aggregateFunctionNode:Vi.cloneWithDistinct(n(this,Ot).aggregateFunctionNode)})}filterWhere(...e){return new oi({...n(this,Ot),aggregateFunctionNode:Vi.cloneWithFilter(n(this,Ot).aggregateFunctionNode,wt(e))})}filterWhereRef(e,r,s){return new oi({...n(this,Ot),aggregateFunctionNode:Vi.cloneWithFilter(n(this,Ot).aggregateFunctionNode,Er(e,r,s))})}over(e){const r=yN();return new oi({...n(this,Ot),aggregateFunctionNode:Vi.cloneWithOver(n(this,Ot).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new oi(n(this,Ot))}$notNull(){return new oi(n(this,Ot))}toOperationNode(){return n(this,Ot).aggregateFunctionNode}};Ot=new WeakMap;let kn=oi;ce(kn,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Un,$n;class qN{constructor(e,r){O(this,Un,void 0);O(this,$n,void 0);k(this,Un,e),k(this,$n,r)}get expression(){return n(this,Un)}get alias(){return n(this,$n)}toOperationNode(){return Ti.create(n(this,Un).toOperationNode(),$e.create(n(this,$n)))}}Un=new WeakMap,$n=new WeakMap;function qf(){const t=(r,s)=>new Le(Jh.create(r,Gs(s??[]))),e=(r,s)=>new kn({aggregateFunctionNode:Vi.create(r,s?Gs(s):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new kn({aggregateFunctionNode:Vi.create("count",go(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new kn({aggregateFunctionNode:Vi.create("json_agg",[Ht(r)?Ge(r):r.toOperationNode()])})},toJson(r){return new Le(Jh.create("to_json",[Ht(r)?Ge(r):r.toOperationNode()]))}})}const WN=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function _N(t,e){return WN.create(Wi.create(t),Kt(e))}const _r=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),bo.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var Qn;class Wf{constructor(e){O(this,Qn,void 0);k(this,Qn,c(e))}when(...e){return new _f({...n(this,Qn),node:_r.cloneWithWhen(n(this,Qn).node,bo.create(wt(e)))})}}Qn=new WeakMap;var jn;class _f{constructor(e){O(this,jn,void 0);k(this,jn,c(e))}then(e){return new TN({...n(this,jn),node:_r.cloneWithThen(n(this,jn).node,ec(e)?tc(e):et(e))})}}jn=new WeakMap;var Nr;class TN{constructor(e){O(this,Nr,void 0);k(this,Nr,c(e))}when(...e){return new _f({...n(this,Nr),node:_r.cloneWithWhen(n(this,Nr).node,bo.create(wt(e)))})}else(e){return new IN({...n(this,Nr),node:_r.cloneWith(n(this,Nr).node,{else:ec(e)?tc(e):et(e)})})}end(){return new Le(_r.cloneWith(n(this,Nr).node,{isStatement:!1}))}endCase(){return new Le(_r.cloneWith(n(this,Nr).node,{isStatement:!0}))}}Nr=new WeakMap;var Vn;class IN{constructor(e){O(this,Vn,void 0);k(this,Vn,c(e))}end(){return new Le(_r.cloneWith(n(this,Vn).node,{isStatement:!1}))}endCase(){return new Le(_r.cloneWith(n(this,Vn).node,{isStatement:!0}))}}Vn=new WeakMap;const Kh=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var gr,uo,vl;class Ms{constructor(e){O(this,uo);O(this,gr,void 0);k(this,gr,e)}at(e){return ue(this,uo,vl).call(this,"ArrayLocation",e)}key(e){return ue(this,uo,vl).call(this,"Member",e)}}gr=new WeakMap,uo=new WeakSet,vl=function(e,r){return da.is(n(this,gr))?new Hh(da.cloneWithTraversal(n(this,gr),Ss.is(n(this,gr).traversal)?Ss.cloneWithLeg(n(this,gr).traversal,Kh.create(e,r)):uf.cloneWithValue(n(this,gr).traversal,Ir.createImmediate(r)))):new Hh(Ss.cloneWithLeg(n(this,gr),Kh.create(e,r)))};var Xi;class Hh extends Ms{constructor(r){super(r);O(this,Xi,void 0);k(this,Xi,r)}get expressionType(){}as(r){return new EN(this,r)}$castTo(){return new Ms(n(this,Xi))}$notNull(){return new Ms(n(this,Xi))}toOperationNode(){return n(this,Xi)}}Xi=new WeakMap;var Jn,fi;class EN{constructor(e,r){O(this,Jn,void 0);O(this,fi,void 0);k(this,Jn,e),k(this,fi,r)}get expression(){return n(this,Jn)}get alias(){return n(this,fi)}toOperationNode(){return Ti.create(n(this,Jn).toOperationNode(),Lt(n(this,fi))?n(this,fi).toOperationNode():$e.create(n(this,fi)))}}Jn=new WeakMap,fi=new WeakMap;const Gh=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}}),kN=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob"],SN=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timez\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/],AN=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function RN(t){return!!(kN.includes(t)||SN.some(e=>e.test(t)))}function un(t){if(Lt(t))return t.toOperationNode();if(RN(t))return AN.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const MN=c({is(t){return t.kind==="CastNode"},create(t,e){return c({kind:"CastNode",expression:t,dataType:e})}});function ac(t=qu){function e(a,l,h){return new Le(rc(a,l,h))}function r(a,l){return new Le(_N(a,l))}const s=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return bl({queryId:ke(),executor:t,queryNode:fe.createFrom(Xs(a))})},case(a){return new Wf({node:_r.create(bi(a)?void 0:Kt(a))})},ref(a,l){return bi(l)?new Le(Kr(a)):new Ms(Mw(a,l))},jsonPath(){return new Ms(Ss.create())},table(a){return new Le(Ge(a))},val(a){return new Le(et(a))},refTuple(...a){return new Le(Gh.create(a.map(Kt)))},tuple(...a){return new Le(Gh.create(a.map(et)))},lit(a){return new Le(tc(a))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,h){return new Le(rs.create(Kt(a),Wi.create("between"),qi.create(et(l),et(h))))},betweenSymmetric(a,l,h){return new Le(rs.create(Kt(a),Wi.create("between symmetric"),qi.create(et(l),et(h))))},and(a){return Jr(a)?new Le(pa(a,"and")):new Le(kh(a,"and"))},or(a){return Jr(a)?new Le(pa(a,"or")):new Le(kh(a,"or"))},parens(...a){const l=wt(a);return is.is(l)?new Le(l):new Le(is.create(l))},cast(a,l){return new Le(MN.create(Kt(a),un(l)))},withSchema(a){return ac(t.withPluginAtFront(new Oo(a)))}});return s.fn=qf(),s.eb=s,s}function cs(t){return ac()}function hn(t){if(Lt(t))return t.toOperationNode();if(Gt(t))return t(cs()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Tf(t){if(Lt(t))return t.toOperationNode();if(Gt(t))return t(cs()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function Co(t){return qw(t)||Ww(t)||Gt(t)}function Xs(t){return Jr(t)?t.map(e=>Zs(e)):[Zs(t)]}function Zs(t){return Ht(t)?If(t):Tf(t)}function If(t){const e=" as ";if(t.includes(e)){const[r,s]=t.split(e).map(Ef);return Ti.create(Ge(r),$e.create(s))}else return Ge(t)}function Ge(t){const e=".";if(t.includes(e)){const[r,s]=t.split(e).map(Ef);return xi.createWithSchema(r,s)}else return xi.create(t)}function Ef(t){return t.trim()}const kf=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}}),je=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:ze.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}}),Sf=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:ze.create(t)})}}),Af=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:ze.create(t),renameTo:ze.create(e)})}}),uc=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?$e.create(e):void 0})}}),DN=["no action","restrict","cascade","set null","set default"],ta=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function Rf(t){return Lt(t)?t.toOperationNode():Ir.createImmediate(t)}const Ho=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}}),LN=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function Wa(t){if(DN.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var We;const Xe=class Xe{constructor(e){O(this,We,void 0);k(this,We,e)}autoIncrement(){return new Xe(je.cloneWith(n(this,We),{autoIncrement:!0}))}identity(){return new Xe(je.cloneWith(n(this,We),{identity:!0}))}primaryKey(){return new Xe(je.cloneWith(n(this,We),{primaryKey:!0}))}references(e){const r=Kr(e);if(!r.table||Yl.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Xe(je.cloneWith(n(this,We),{references:ta.create(r.table,[r.column])}))}onDelete(e){if(!n(this,We).references)throw new Error("on delete constraint can only be added for foreign keys");return new Xe(je.cloneWith(n(this,We),{references:ta.cloneWithOnDelete(n(this,We).references,Wa(e))}))}onUpdate(e){if(!n(this,We).references)throw new Error("on update constraint can only be added for foreign keys");return new Xe(je.cloneWith(n(this,We),{references:ta.cloneWithOnUpdate(n(this,We).references,Wa(e))}))}unique(){return new Xe(je.cloneWith(n(this,We),{unique:!0}))}notNull(){return new Xe(je.cloneWith(n(this,We),{notNull:!0}))}unsigned(){return new Xe(je.cloneWith(n(this,We),{unsigned:!0}))}defaultTo(e){return new Xe(je.cloneWith(n(this,We),{defaultTo:LN.create(Rf(e))}))}check(e){return new Xe(je.cloneWith(n(this,We),{check:uc.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Xe(je.cloneWith(n(this,We),{generated:Ho.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Xe(je.cloneWith(n(this,We),{generated:Ho.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Xe(je.cloneWith(n(this,We),{generated:Ho.create({identity:!0,byDefault:!0})}))}stored(){if(!n(this,We).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Xe(je.cloneWith(n(this,We),{generated:Ho.cloneWith(n(this,We).generated,{stored:!0})}))}modifyFront(e){return new Xe(je.cloneWithFrontModifier(n(this,We),e.toOperationNode()))}nullsNotDistinct(){return new Xe(je.cloneWith(n(this,We),{nullsNotDistinct:!0}))}modifyEnd(e){return new Xe(je.cloneWithEndModifier(n(this,We),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return n(this,We)}};We=new WeakMap;let _i=Xe;ce(_i,"don't await ColumnDefinitionBuilder instances directly.");const Mf=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}}),_a=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,s){return c({kind:"ForeignKeyConstraintNode",columns:t,references:ta.create(e,r),name:s?$e.create(s):void 0})},cloneWith(t,e){return c({...t,...e})}});var Zi;const eu=class eu{constructor(e){O(this,Zi,void 0);k(this,Zi,e)}onDelete(e){return new eu(_a.cloneWith(n(this,Zi),{onDelete:Wa(e)}))}onUpdate(e){return new eu(_a.cloneWith(n(this,Zi),{onUpdate:Wa(e)}))}$call(e){return e(this)}toOperationNode(){return n(this,Zi)}};Zi=new WeakMap;let eo=eu;ce(eo,"don't await ForeignKeyConstraintBuilder instances directly.");const ra=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}}),lc=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(ze.create)),name:e?$e.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}}),ia=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:$e.create(t)})},cloneWith(t,e){return c({...t,...e})}}),Os=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:ze.create(t),[e]:r})}});var Fr;class cc{constructor(e){O(this,Fr,void 0);k(this,Fr,e)}setDataType(e){return new Cs(Os.create(n(this,Fr),"dataType",un(e)))}setDefault(e){return new Cs(Os.create(n(this,Fr),"setDefault",Rf(e)))}dropDefault(){return new Cs(Os.create(n(this,Fr),"dropDefault",!0))}setNotNull(){return new Cs(Os.create(n(this,Fr),"setNotNull",!0))}dropNotNull(){return new Cs(Os.create(n(this,Fr),"dropNotNull",!0))}$call(e){return e(this)}}Fr=new WeakMap;var lo;class Cs{constructor(e){O(this,lo,void 0);k(this,lo,e)}toOperationNode(){return n(this,lo)}}lo=new WeakMap;var ur;class Pi{constructor(e){O(this,ur,void 0);k(this,ur,c(e))}toOperationNode(){return n(this,ur).executor.transformQuery(n(this,ur).node,n(this,ur).queryId)}compile(){return n(this,ur).executor.compileQuery(this.toOperationNode(),n(this,ur).queryId)}async execute(){await n(this,ur).executor.executeQuery(this.compile(),n(this,ur).queryId)}}ur=new WeakMap;ce(Pi,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Nt;const tu=class tu{constructor(e){O(this,Nt,void 0);k(this,Nt,c(e))}onDelete(e){return new tu({...n(this,Nt),constraintBuilder:n(this,Nt).constraintBuilder.onDelete(e)})}onUpdate(e){return new tu({...n(this,Nt),constraintBuilder:n(this,Nt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return n(this,Nt).executor.transformQuery(Ee.cloneWithTableProps(n(this,Nt).node,{addConstraint:ra.create(n(this,Nt).constraintBuilder.toOperationNode())}),n(this,Nt).queryId)}compile(){return n(this,Nt).executor.compileQuery(this.toOperationNode(),n(this,Nt).queryId)}async execute(){await n(this,Nt).executor.executeQuery(this.compile(),n(this,Nt).queryId)}};Nt=new WeakMap;let Ta=tu;ce(Ta,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ze;const Ps=class Ps{constructor(e){O(this,Ze,void 0);k(this,Ze,c(e))}ifExists(){return new Ps({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ia.cloneWith(n(this,Ze).node.dropConstraint,{ifExists:!0})})})}cascade(){return new Ps({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ia.cloneWith(n(this,Ze).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Ps({...n(this,Ze),node:Ee.cloneWithTableProps(n(this,Ze).node,{dropConstraint:ia.cloneWith(n(this,Ze).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return n(this,Ze).executor.transformQuery(n(this,Ze).node,n(this,Ze).queryId)}compile(){return n(this,Ze).executor.compileQuery(this.toOperationNode(),n(this,Ze).queryId)}async execute(){await n(this,Ze).executor.executeQuery(this.compile(),n(this,Ze).queryId)}};Ze=new WeakMap;let Ia=Ps;ce(Ia,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const Df=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(ze.create)),name:e?$e.create(e):void 0})}}),bn=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:$e.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var De;const $i=class $i{constructor(e){O(this,De,void 0);k(this,De,c(e))}unique(){return new $i({...n(this,De),node:Ee.cloneWithTableProps(n(this,De).node,{addIndex:bn.cloneWith(n(this,De).node.addIndex,{unique:!0})})})}column(e){return new $i({...n(this,De),node:Ee.cloneWithTableProps(n(this,De).node,{addIndex:bn.cloneWithColumns(n(this,De).node.addIndex,[fa(e)])})})}columns(e){return new $i({...n(this,De),node:Ee.cloneWithTableProps(n(this,De).node,{addIndex:bn.cloneWithColumns(n(this,De).node.addIndex,e.map(fa))})})}expression(e){return new $i({...n(this,De),node:Ee.cloneWithTableProps(n(this,De).node,{addIndex:bn.cloneWithColumns(n(this,De).node.addIndex,[e.toOperationNode()])})})}using(e){return new $i({...n(this,De),node:Ee.cloneWithTableProps(n(this,De).node,{addIndex:bn.cloneWith(n(this,De).node.addIndex,{using:mt.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return n(this,De).executor.transformQuery(n(this,De).node,n(this,De).queryId)}compile(){return n(this,De).executor.compileQuery(this.toOperationNode(),n(this,De).queryId)}async execute(){await n(this,De).executor.executeQuery(this.compile(),n(this,De).queryId)}};De=new WeakMap;let Ea=$i;ce(Ea,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");var Kn;const fc=class fc{constructor(e){O(this,Kn,void 0);k(this,Kn,e)}toOperationNode(){return n(this,Kn)}nullsNotDistinct(){return new fc(lc.cloneWith(n(this,Kn),{nullsNotDistinct:!0}))}};Kn=new WeakMap;let to=fc;ce(to,"don't await UniqueConstraintNodeBuilder instances directly.");var ve;class Lf{constructor(e){O(this,ve,void 0);k(this,ve,c(e))}renameTo(e){return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{renameTo:Ge(e)})})}setSchema(e){return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{setSchema:$e.create(e)})})}alterColumn(e,r){const s=r(new cc(e));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,s.toOperationNode())})}dropColumn(e){return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Sf.create(e))})}renameColumn(e,r){return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Af.create(e,r))})}addColumn(e,r,s=vi){const a=s(new _i(je.create(e,un(r))));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,kf.create(a.toOperationNode()))})}modifyColumn(e,r,s=vi){const a=s(new _i(je.create(e,un(r))));return new ui({...n(this,ve),node:Ee.cloneWithColumnAlteration(n(this,ve).node,Mf.create(a.toOperationNode()))})}addUniqueConstraint(e,r,s=vi){const a=s(new to(lc.create(r,e)));return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ra.create(a.toOperationNode())})})}addCheckConstraint(e,r){return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ra.create(uc.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,s,a){return new Ta({...n(this,ve),constraintBuilder:new eo(_a.create(r.map(ze.create),Ge(s),a.map(ze.create),e))})}addPrimaryKeyConstraint(e,r){return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addConstraint:ra.create(Df.create(r,e))})})}dropConstraint(e){return new Ia({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{dropConstraint:ia.create(e)})})}addIndex(e){return new Ea({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{addIndex:bn.create(e)})})}dropIndex(e){return new Pi({...n(this,ve),node:Ee.cloneWithTableProps(n(this,ve).node,{dropIndex:Es.create(e)})})}$call(e){return e(this)}}ve=new WeakMap;var He;const Qi=class Qi{constructor(e){O(this,He,void 0);k(this,He,c(e))}alterColumn(e,r){const s=r(new cc(e));return new Qi({...n(this,He),node:Ee.cloneWithColumnAlteration(n(this,He).node,s.toOperationNode())})}dropColumn(e){return new Qi({...n(this,He),node:Ee.cloneWithColumnAlteration(n(this,He).node,Sf.create(e))})}renameColumn(e,r){return new Qi({...n(this,He),node:Ee.cloneWithColumnAlteration(n(this,He).node,Af.create(e,r))})}addColumn(e,r,s=vi){const a=s(new _i(je.create(e,un(r))));return new Qi({...n(this,He),node:Ee.cloneWithColumnAlteration(n(this,He).node,kf.create(a.toOperationNode()))})}modifyColumn(e,r,s=vi){const a=s(new _i(je.create(e,un(r))));return new Qi({...n(this,He),node:Ee.cloneWithColumnAlteration(n(this,He).node,Mf.create(a.toOperationNode()))})}toOperationNode(){return n(this,He).executor.transformQuery(n(this,He).node,n(this,He).queryId)}compile(){return n(this,He).executor.compileQuery(this.toOperationNode(),n(this,He).queryId)}async execute(){await n(this,He).executor.executeQuery(this.compile(),n(this,He).queryId)}};He=new WeakMap;let ui=Qi;ce(Lf,"don't await AlterTableBuilder instances");ce(cc,"don't await AlterColumnBuilder instances");ce(ui,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Pf extends sc{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var _e;const nr=class nr{constructor(e){O(this,_e,void 0);k(this,_e,c(e))}ifNotExists(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{ifNotExists:!0})})}unique(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{unique:!0})})}nullsNotDistinct(){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{nullsNotDistinct:!0})})}on(e){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{table:Ge(e)})})}column(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,[fa(e)])})}columns(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,e.map(fa))})}expression(e){return new nr({...n(this,_e),node:Mr.cloneWithColumns(n(this,_e).node,[e.toOperationNode()])})}using(e){return new nr({...n(this,_e),node:Mr.cloneWith(n(this,_e).node,{using:mt.createWithSql(e)})})}where(...e){const r=new Pf;return new nr({...n(this,_e),node:X.cloneWithWhere(n(this,_e).node,r.transformNode(wt(e)))})}$call(e){return e(this)}toOperationNode(){return n(this,_e).executor.transformQuery(n(this,_e).node,n(this,_e).queryId)}compile(){return n(this,_e).executor.compileQuery(this.toOperationNode(),n(this,_e).queryId)}async execute(){await n(this,_e).executor.executeQuery(this.compile(),n(this,_e).queryId)}};_e=new WeakMap;let ka=nr;ce(ka,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var $t;const pc=class pc{constructor(e){O(this,$t,void 0);k(this,$t,c(e))}ifNotExists(){return new pc({...n(this,$t),node:rf.cloneWith(n(this,$t).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,$t).executor.transformQuery(n(this,$t).node,n(this,$t).queryId)}compile(){return n(this,$t).executor.compileQuery(this.toOperationNode(),n(this,$t).queryId)}async execute(){await n(this,$t).executor.executeQuery(this.compile(),n(this,$t).queryId)}};$t=new WeakMap;let Sa=pc;ce(Sa,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function PN(t){if(Cw.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var ye;const Ut=class Ut{constructor(e){O(this,ye,void 0);k(this,ye,c(e))}temporary(){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{temporary:!0})})}onCommit(e){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{onCommit:PN(e)})})}ifNotExists(){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{ifNotExists:!0})})}addColumn(e,r,s=vi){const a=s(new _i(je.create(e,un(r))));return new Ut({...n(this,ye),node:Ft.cloneWithColumn(n(this,ye).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,Df.create(r,e))})}addUniqueConstraint(e,r,s=vi){const a=s(new to(lc.create(r,e)));return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,a.toOperationNode())})}addCheckConstraint(e,r){return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,uc.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,s,a,l=vi){const h=l(new eo(_a.create(r.map(ze.create),Ge(s),a.map(ze.create),e)));return new Ut({...n(this,ye),node:Ft.cloneWithConstraint(n(this,ye).node,h.toOperationNode())})}modifyFront(e){return new Ut({...n(this,ye),node:Ft.cloneWithFrontModifier(n(this,ye).node,e.toOperationNode())})}modifyEnd(e){return new Ut({...n(this,ye),node:Ft.cloneWithEndModifier(n(this,ye).node,e.toOperationNode())})}as(e){return new Ut({...n(this,ye),node:Ft.cloneWith(n(this,ye).node,{selectQuery:hn(e)})})}$call(e){return e(this)}toOperationNode(){return n(this,ye).executor.transformQuery(n(this,ye).node,n(this,ye).queryId)}compile(){return n(this,ye).executor.compileQuery(this.toOperationNode(),n(this,ye).queryId)}async execute(){await n(this,ye).executor.executeQuery(this.compile(),n(this,ye).queryId)}};ye=new WeakMap;let Aa=Ut;ce(Aa,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var dt;const Bs=class Bs{constructor(e){O(this,dt,void 0);k(this,dt,c(e))}on(e){return new Bs({...n(this,dt),node:Es.cloneWith(n(this,dt).node,{table:Ge(e)})})}ifExists(){return new Bs({...n(this,dt),node:Es.cloneWith(n(this,dt).node,{ifExists:!0})})}cascade(){return new Bs({...n(this,dt),node:Es.cloneWith(n(this,dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,dt).executor.transformQuery(n(this,dt).node,n(this,dt).queryId)}compile(){return n(this,dt).executor.compileQuery(this.toOperationNode(),n(this,dt).queryId)}async execute(){await n(this,dt).executor.executeQuery(this.compile(),n(this,dt).queryId)}};dt=new WeakMap;let Ra=Bs;ce(Ra,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ct;const ru=class ru{constructor(e){O(this,Ct,void 0);k(this,Ct,c(e))}ifExists(){return new ru({...n(this,Ct),node:cl.cloneWith(n(this,Ct).node,{ifExists:!0})})}cascade(){return new ru({...n(this,Ct),node:cl.cloneWith(n(this,Ct).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,Ct).executor.transformQuery(n(this,Ct).node,n(this,Ct).queryId)}compile(){return n(this,Ct).executor.compileQuery(this.toOperationNode(),n(this,Ct).queryId)}async execute(){await n(this,Ct).executor.executeQuery(this.compile(),n(this,Ct).queryId)}};Ct=new WeakMap;let Ma=ru;ce(Ma,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var qt;const iu=class iu{constructor(e){O(this,qt,void 0);k(this,qt,c(e))}ifExists(){return new iu({...n(this,qt),node:hl.cloneWith(n(this,qt).node,{ifExists:!0})})}cascade(){return new iu({...n(this,qt),node:hl.cloneWith(n(this,qt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,qt).executor.transformQuery(n(this,qt).node,n(this,qt).queryId)}compile(){return n(this,qt).executor.compileQuery(this.toOperationNode(),n(this,qt).queryId)}async execute(){await n(this,qt).executor.executeQuery(this.compile(),n(this,qt).queryId)}};qt=new WeakMap;let Da=iu;ce(Da,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const si=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:Ci.create(t)})},cloneWith(t,e){return c({...t,...e})}});var nu;class BN{constructor(){O(this,nu,new Pf)}transformQuery(e){return n(this,nu).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}nu=new WeakMap;var Qe;const ai=class ai{constructor(e){O(this,Qe,void 0);k(this,Qe,c(e))}temporary(){return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{temporary:!0})})}materialized(){return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{materialized:!0})})}ifNotExists(){return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{ifNotExists:!0})})}orReplace(){return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{orReplace:!0})})}columns(e){return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{columns:e.map(cf)})})}as(e){const r=e.withPlugin(new BN).toOperationNode();return new ai({...n(this,Qe),node:si.cloneWith(n(this,Qe).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return n(this,Qe).executor.transformQuery(n(this,Qe).node,n(this,Qe).queryId)}compile(){return n(this,Qe).executor.compileQuery(this.toOperationNode(),n(this,Qe).queryId)}async execute(){await n(this,Qe).executor.executeQuery(this.compile(),n(this,Qe).queryId)}};Qe=new WeakMap;let La=ai;ce(La,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const na=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:Ci.create(t)})},cloneWith(t,e){return c({...t,...e})}});var ft;const Fs=class Fs{constructor(e){O(this,ft,void 0);k(this,ft,c(e))}materialized(){return new Fs({...n(this,ft),node:na.cloneWith(n(this,ft).node,{materialized:!0})})}ifExists(){return new Fs({...n(this,ft),node:na.cloneWith(n(this,ft).node,{ifExists:!0})})}cascade(){return new Fs({...n(this,ft),node:na.cloneWith(n(this,ft).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,ft).executor.transformQuery(n(this,ft).node,n(this,ft).queryId)}compile(){return n(this,ft).executor.compileQuery(this.toOperationNode(),n(this,ft).queryId)}async execute(){await n(this,ft).executor.executeQuery(this.compile(),n(this,ft).queryId)}};ft=new WeakMap;let Pa=Fs;ce(Pa,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Bf=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Zl.create(e.map(r=>Ir.createImmediate(r)))})}});var Qt;const mc=class mc{constructor(e){O(this,Qt,void 0);k(this,Qt,c(e))}toOperationNode(){return n(this,Qt).executor.transformQuery(n(this,Qt).node,n(this,Qt).queryId)}asEnum(e){return new mc({...n(this,Qt),node:Bf.cloneWithEnum(n(this,Qt).node,e)})}$call(e){return e(this)}compile(){return n(this,Qt).executor.compileQuery(this.toOperationNode(),n(this,Qt).queryId)}async execute(){await n(this,Qt).executor.executeQuery(this.compile(),n(this,Qt).queryId)}};Qt=new WeakMap;let Ba=mc;ce(Ba,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Ff=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var jt;const yc=class yc{constructor(e){O(this,jt,void 0);k(this,jt,c(e))}ifExists(){return new yc({...n(this,jt),node:Ff.cloneWith(n(this,jt).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return n(this,jt).executor.transformQuery(n(this,jt).node,n(this,jt).queryId)}compile(){return n(this,jt).executor.compileQuery(this.toOperationNode(),n(this,jt).queryId)}async execute(){await n(this,jt).executor.executeQuery(this.compile(),n(this,jt).queryId)}};jt=new WeakMap;let Fa=yc;ce(Fa,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function zh(t){const e=".";if(t.includes(e)){const r=t.split(e).map(FN);if(r.length===2)return Ci.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Ci.create(t)}function FN(t){return t.trim()}var lt;const Us=class Us{constructor(e){O(this,lt,void 0);k(this,lt,e)}createTable(e){return new Aa({queryId:ke(),executor:n(this,lt),node:Ft.create(Ge(e))})}dropTable(e){return new Da({queryId:ke(),executor:n(this,lt),node:hl.create(Ge(e))})}createIndex(e){return new ka({queryId:ke(),executor:n(this,lt),node:Mr.create(e)})}dropIndex(e){return new Ra({queryId:ke(),executor:n(this,lt),node:Es.create(e)})}createSchema(e){return new Sa({queryId:ke(),executor:n(this,lt),node:rf.create(e)})}dropSchema(e){return new Ma({queryId:ke(),executor:n(this,lt),node:cl.create(e)})}alterTable(e){return new Lf({queryId:ke(),executor:n(this,lt),node:Ee.create(Ge(e))})}createView(e){return new La({queryId:ke(),executor:n(this,lt),node:si.create(e)})}dropView(e){return new Pa({queryId:ke(),executor:n(this,lt),node:na.create(e)})}createType(e){return new Ba({queryId:ke(),executor:n(this,lt),node:Bf.create(zh(e))})}dropType(e){return new Fa({queryId:ke(),executor:n(this,lt),node:Ff.create(zh(e))})}withPlugin(e){return new Us(n(this,lt).withPlugin(e))}withoutPlugins(){return new Us(n(this,lt).withoutPlugins())}withSchema(e){return new Us(n(this,lt).withPluginAtFront(new Oo(e)))}};lt=new WeakMap;let xl=Us;class UN{ref(e){return new Aw(e)}}var Hn;class $N{constructor(e){O(this,Hn,void 0);k(this,Hn,e)}async provideConnection(e){const r=await n(this,Hn).acquireConnection();try{return await e(r)}finally{await n(this,Hn).releaseConnection(r)}}}Hn=new WeakMap;var br,vr,Ur;const ji=class ji extends vf{constructor(r,s,a,l=[]){super(l);O(this,br,void 0);O(this,vr,void 0);O(this,Ur,void 0);k(this,br,r),k(this,vr,s),k(this,Ur,a)}get adapter(){return n(this,vr)}compileQuery(r){return n(this,br).compileQuery(r)}provideConnection(r){return n(this,Ur).provideConnection(r)}withPlugins(r){return new ji(n(this,br),n(this,vr),n(this,Ur),[...this.plugins,...r])}withPlugin(r){return new ji(n(this,br),n(this,vr),n(this,Ur),[...this.plugins,r])}withPluginAtFront(r){return new ji(n(this,br),n(this,vr),n(this,Ur),[r,...this.plugins])}withConnectionProvider(r){return new ji(n(this,br),n(this,vr),r,[...this.plugins])}withoutPlugins(){return new ji(n(this,br),n(this,vr),n(this,Ur),[])}};br=new WeakMap,vr=new WeakMap,Ur=new WeakMap;let Ol=ji;function Yh(){return typeof performance<"u"&&Gt(performance.now)?performance.now():Date.now()}var lr,pi,$r,Gn,Qr,co,su,Uf,ou,$f,au,Qf,uu,jf,ho,Cl;class QN{constructor(e,r){O(this,su);O(this,ou);O(this,au);O(this,uu);O(this,ho);O(this,lr,void 0);O(this,pi,void 0);O(this,$r,void 0);O(this,Gn,void 0);O(this,Qr,void 0);O(this,co,new WeakSet);k(this,Gn,!1),k(this,lr,e),k(this,pi,r)}async init(){if(n(this,Qr))throw new Error("driver has already been destroyed");n(this,$r)||k(this,$r,n(this,lr).init().then(()=>{k(this,Gn,!0)}).catch(e=>(k(this,$r,void 0),Promise.reject(e)))),await n(this,$r)}async acquireConnection(){if(n(this,Qr))throw new Error("driver has already been destroyed");n(this,Gn)||await this.init();const e=await n(this,lr).acquireConnection();return n(this,co).has(e)||(ue(this,su,Uf).call(this)&&ue(this,ou,$f).call(this,e),n(this,co).add(e)),e}async releaseConnection(e){await n(this,lr).releaseConnection(e)}beginTransaction(e,r){return n(this,lr).beginTransaction(e,r)}commitTransaction(e){return n(this,lr).commitTransaction(e)}rollbackTransaction(e){return n(this,lr).rollbackTransaction(e)}async destroy(){n(this,$r)&&(await n(this,$r),n(this,Qr)||k(this,Qr,n(this,lr).destroy().catch(e=>(k(this,Qr,void 0),Promise.reject(e)))),await n(this,Qr))}}lr=new WeakMap,pi=new WeakMap,$r=new WeakMap,Gn=new WeakMap,Qr=new WeakMap,co=new WeakMap,su=new WeakSet,Uf=function(){return n(this,pi).isLevelEnabled("query")||n(this,pi).isLevelEnabled("error")},ou=new WeakSet,$f=function(e){const r=e.executeQuery;e.executeQuery=async s=>{let a;const l=Yh();try{return await r.call(e,s)}catch(h){throw a=h,await ue(this,au,Qf).call(this,h,s,l),h}finally{a||await ue(this,uu,jf).call(this,s,l)}}},au=new WeakSet,Qf=async function(e,r,s){await n(this,pi).error(()=>({level:"error",error:e,query:r,queryDurationMillis:ue(this,ho,Cl).call(this,s)}))},uu=new WeakSet,jf=async function(e,r){await n(this,pi).query(()=>({level:"query",query:e,queryDurationMillis:ue(this,ho,Cl).call(this,r)}))},ho=new WeakSet,Cl=function(e){return Yh()-e};const jN=()=>{};var fo,mi,lu,Jf;class Vf{constructor(e){O(this,lu);O(this,fo,void 0);O(this,mi,void 0);k(this,fo,e)}async provideConnection(e){for(;n(this,mi);)await n(this,mi).catch(jN);return k(this,mi,ue(this,lu,Jf).call(this,e).finally(()=>{k(this,mi,void 0)})),n(this,mi)}}fo=new WeakMap,mi=new WeakMap,lu=new WeakSet,Jf=async function(e){return await e(n(this,fo))};const VN=["read uncommitted","read committed","repeatable read","serializable","snapshot"];c(["query","error"]);var yi,en;class JN{constructor(e){O(this,yi,void 0);O(this,en,void 0);Gt(e)?(k(this,en,e),k(this,yi,c({query:!0,error:!0}))):(k(this,en,KN),k(this,yi,c({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return n(this,yi)[e]}async query(e){n(this,yi).query&&await n(this,en).call(this,e())}async error(e){n(this,yi).error&&await n(this,en).call(this,e())}}yi=new WeakMap,en=new WeakMap;function KN(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function HN(t){return qr(t)&&Gt(t.compile)}var pt;const Cn=class Cn extends Ca{constructor(r){let s,a;if(GN(r))s={executor:r.executor},a={...r};else{const l=r.dialect,h=l.createDriver(),m=l.createQueryCompiler(),N=l.createAdapter(),f=new JN(r.log??[]),v=new QN(h,f),_=new $N(v),R=new Ol(m,N,_,r.plugins??[]);s={executor:R},a={config:r,executor:R,dialect:l,driver:v}}super(s);O(this,pt,void 0);k(this,pt,c(a))}get schema(){return new xl(n(this,pt).executor)}get dynamic(){return new UN}get introspection(){return n(this,pt).dialect.createIntrospector(this.withoutPlugins())}case(r){return new Wf({node:_r.create(bi(r)?void 0:hn(r))})}get fn(){return qf()}transaction(){return new Ua({...n(this,pt)})}connection(){return new Kf({...n(this,pt)})}withPlugin(r){return new Cn({...n(this,pt),executor:n(this,pt).executor.withPlugin(r)})}withoutPlugins(){return new Cn({...n(this,pt),executor:n(this,pt).executor.withoutPlugins()})}withSchema(r){return new Cn({...n(this,pt),executor:n(this,pt).executor.withPluginAtFront(new Oo(r))})}withTables(){return new Cn({...n(this,pt)})}async destroy(){await n(this,pt).driver.destroy()}get isTransaction(){return!1}getExecutor(){return n(this,pt).executor}executeQuery(r,s=ke()){const a=HN(r)?r.compile():r;return this.getExecutor().executeQuery(a,s)}};pt=new WeakMap;let ro=Cn;var cr;const qn=class qn extends ro{constructor(r){super(r);O(this,cr,void 0);k(this,cr,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new qn({...n(this,cr),executor:n(this,cr).executor.withPlugin(r)})}withoutPlugins(){return new qn({...n(this,cr),executor:n(this,cr).executor.withoutPlugins()})}withSchema(r){return new qn({...n(this,cr),executor:n(this,cr).executor.withPluginAtFront(new Oo(r))})}withTables(){return new qn({...n(this,cr)})}};cr=new WeakMap;let ql=qn;function GN(t){return qr(t)&&qr(t.config)&&qr(t.driver)&&qr(t.executor)&&qr(t.dialect)}var tn;class Kf{constructor(e){O(this,tn,void 0);k(this,tn,c(e))}async execute(e){return n(this,tn).executor.provideConnection(async r=>{const s=n(this,tn).executor.withConnectionProvider(new Vf(r)),a=new ro({...n(this,tn),executor:s});return await e(a)})}}tn=new WeakMap;ce(Kf,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var hr;const wc=class wc{constructor(e){O(this,hr,void 0);k(this,hr,c(e))}setIsolationLevel(e){return new wc({...n(this,hr),isolationLevel:e})}async execute(e){const{isolationLevel:r,...s}=n(this,hr),a={isolationLevel:r};return zN(a),n(this,hr).executor.provideConnection(async l=>{const h=n(this,hr).executor.withConnectionProvider(new Vf(l)),m=new ql({...s,executor:h});try{await n(this,hr).driver.beginTransaction(l,a);const N=await e(m);return await n(this,hr).driver.commitTransaction(l),N}catch(N){throw await n(this,hr).driver.rollbackTransaction(l),N}})}};hr=new WeakMap;let Ua=wc;ce(Ua,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function zN(t){if(t.isolationLevel&&!VN.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var Wt,zn,sa,po,Wl,mo,_l;const $s=class $s{constructor(e){O(this,zn);O(this,po);O(this,mo);O(this,Wt,void 0);k(this,Wt,c(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new Hf(this,e)}$castTo(){return new $s({...n(this,Wt)})}$notNull(){return new $s(n(this,Wt))}withPlugin(e){return new $s({...n(this,Wt),plugins:n(this,Wt).plugins!==void 0?c([...n(this,Wt).plugins,e]):c([e])})}toOperationNode(){return ue(this,po,Wl).call(this,ue(this,zn,sa).call(this))}compile(e){return ue(this,mo,_l).call(this,ue(this,zn,sa).call(this,e))}async execute(e){const r=ue(this,zn,sa).call(this,e);return r.executeQuery(ue(this,mo,_l).call(this,r),n(this,Wt).queryId)}};Wt=new WeakMap,zn=new WeakSet,sa=function(e){const r=e!==void 0?e.getExecutor():qu;return n(this,Wt).plugins!==void 0?r.withPlugins(n(this,Wt).plugins):r},po=new WeakSet,Wl=function(e){return e.transformQuery(n(this,Wt).rawNode,n(this,Wt).queryId)},mo=new WeakSet,_l=function(e){return e.compileQuery(ue(this,po,Wl).call(this,e),n(this,Wt).queryId)};let $a=$s;function ti(t){return new $a(t)}ce($a,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var rn,wi;class Hf{constructor(e,r){O(this,rn,void 0);O(this,wi,void 0);k(this,rn,e),k(this,wi,r)}get expression(){return n(this,rn)}get alias(){return n(this,wi)}get rawBuilder(){return n(this,rn)}toOperationNode(){return Ti.create(n(this,rn).toOperationNode(),Lt(n(this,wi))?n(this,wi).toOperationNode():$e.create(n(this,wi)))}}rn=new WeakMap,wi=new WeakMap;ce(Hf,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const ot=Object.assign((t,...e)=>ti({queryId:ke(),rawNode:mt.create(t,e?.map(Xh)??[])}),{ref(t){return ti({queryId:ke(),rawNode:mt.createWithChild(Kr(t))})},val(t){return ti({queryId:ke(),rawNode:mt.createWithChild(et(t))})},value(t){return this.val(t)},table(t){return ti({queryId:ke(),rawNode:mt.createWithChild(Ge(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",ti({queryId:ke(),rawNode:mt.create(e,t.map($e.create))})},lit(t){return ti({queryId:ke(),rawNode:mt.createWithChild(Ir.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return ti({queryId:ke(),rawNode:mt.createWithSql(t)})},join(t,e=ot`, `){const r=new Array(2*t.length-1),s=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=Xh(t[a]),a!==t.length-1&&(r[2*a+1]=s);return ti({queryId:ke(),rawNode:mt.createWithChildren(r)})}});function Xh(t){return Lt(t)?t.toOperationNode():et(t)}var cu;class YN{constructor(){ee(this,"nodeStack",[]);O(this,cu,c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this)}));ee(this,"visitNode",e=>{this.nodeStack.push(e),n(this,cu)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}cu=new WeakMap;var Yn,nn;class XN extends YN{constructor(){super(...arguments);O(this,Yn,"");O(this,nn,[])}get numParameters(){return n(this,nn).length}compileQuery(r){return k(this,Yn,""),k(this,nn,[]),this.visitNode(r),c({query:r,sql:this.getSql(),parameters:[...n(this,nn)]})}getSql(){return n(this,Yn)}visitSelectQuery(r){const s=this.parentNode!==void 0&&!is.is(this.parentNode)&&!Jt.is(this.parentNode)&&!Ft.is(this.parentNode)&&!si.is(this.parentNode)&&!Of.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),s&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.top&&(this.append(" "),this.visitNode(r.top)),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.fetch&&(this.append(" "),this.visitNode(r.fetch)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),s&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,s=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(s)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const s=this.nodeStack.find(X.is),a=s!==r;!a&&r.explain&&(this.visitNode(r.explain),this.append(" ")),a&&!Rt.is(s)&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),r.top&&(this.append(" "),this.visitNode(r.top)),r.into&&(this.append(" into "),this.visitNode(r.into)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.defaultValues&&(this.append(" "),this.append("default values")),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),a&&!Rt.is(s)&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const s=this.nodeStack.find(X.is)!==r;!s&&r.explain&&(this.visitNode(r.explain),this.append(" ")),s&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),r.top&&(this.visitNode(r.top),this.append(" ")),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),s&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!Ht(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:s}=r;for(let a=0;a<s.length;++a)this.appendValue(s[a]),a!==s.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(eg[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:s,parameters:a}=r;for(let l=0;l<s.length;++l)this.append(s[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),r.selectQuery?(this.append(" as "),this.visitNode(r.selectQuery)):(this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," ")))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.identity&&this.append(" identity"),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const s=this.nodeStack.find(X.is),a=s!==r;!a&&r.explain&&(this.visitNode(r.explain),this.append(" ")),a&&!Rt.is(s)&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),r.top&&(this.visitNode(r.top),this.append(" ")),r.table&&(this.visitNode(r.table),this.append(" ")),this.append("set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),a&&!Rt.is(s)&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),ha(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileColumnAlterations(r.columnAlterations),r.addIndex&&this.visitNode(r.addIndex),r.dropIndex&&this.visitNode(r.dropIndex)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(ZN[r.modifier]),r.of&&(this.append(" of "),this.compileList(r.of,", "))}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return Wi.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const s of r.pathLegs)this.visitNode(s);this.append("'")}visitJSONPathLeg(r){const s=r.type==="ArrayLocation";this.append(s?"[":"."),this.append(String(r.value)),s&&this.append("]")}visitJSONOperatorChain(r){for(let s=0,a=r.values.length;s<a;s++)s===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[s])}visitMergeQuery(r){r.with&&(this.visitNode(r.with),this.append(" ")),this.append("merge "),r.top&&(this.visitNode(r.top),this.append(" ")),this.append("into "),this.visitNode(r.into),r.using&&(this.append(" "),this.visitNode(r.using)),r.whens&&(this.append(" "),this.compileList(r.whens))}visitMatched(r){r.not&&this.append("not "),this.append("matched"),r.bySource&&this.append(" by source")}visitAddIndex(r){this.append("add "),r.unique&&this.append("unique "),this.append("index "),this.visitNode(r.name),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.using&&(this.append(" using "),this.visitNode(r.using))}visitCast(r){this.append("cast("),this.visitNode(r.expression),this.append(" as "),this.visitNode(r.dataType),this.append(")")}visitFetch(r){this.append("fetch next "),this.visitNode(r.rowCount),this.append(` rows ${r.modifier}`)}visitTop(r){this.append(`top(${r.expression})`),r.modifiers&&this.append(` ${r.modifiers}`)}append(r){k(this,Yn,n(this,Yn)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const s=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const h of r)l+=h,h===s?l+=s:h===a&&(l+=a);return l}addParameter(r){n(this,nn).push(r)}appendImmediateValue(r){if(Ht(r))this.append(`'${r}'`);else if(xu(r)||ha(r))this.append(r.toString());else if(Gl(r))this.append("null");else if(Ow(r))this.appendImmediateValue(r.toISOString());else if(zl(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((s,a)=>s.modifier&&a.modifier?Zh[s.modifier]-Zh[a.modifier]:1),c(r)}compileColumnAlterations(r){this.compileList(r)}announcesNewColumnDataType(){return!0}}Yn=new WeakMap,nn=new WeakMap;const ZN=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Zh=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),eg=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"}),Tr=c({raw(t,e=[]){return c({sql:t,query:mt.createWithSql(t),parameters:c(e)})}});class tg{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}const rg=/"/g;class Gf extends XN{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(rg,'""')}visitDefaultInsertValue(e){this.append("null")}}const zf="kysely_migration",Yf="kysely_migration_lock";c({__noMigrations__:!0});var Xn,hu,Zf;class Xf{constructor(e){O(this,hu);O(this,Xn,void 0);k(this,Xn,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=n(this,Xn).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",zf).where("name","!=",Yf));const s=await r.execute();return Promise.all(s.map(({name:a})=>ue(this,hu,Zf).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}Xn=new WeakMap,hu=new WeakSet,Zf=async function(e){const r=n(this,Xn),s=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=s.sql?.split(/[\(\),]/)?.find(h=>h.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(ot`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:s.type==="view",columns:l.map(h=>({name:h.name,dataType:h.type,isNullable:!h.notnull,isAutoIncrementing:h.name===a,hasDefaultValue:h.dflt_value!=null,comment:void 0}))}};class ep extends tg{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var ig=class{createQueryCompiler(){return new Gf}createAdapter(){return new ep}createIntrospector(t){return new Xf(t)}},yo,sd,ng=(sd=class{constructor(){O(this,yo,new sg);ee(this,"connection")}async acquireConnection(){return await n(this,yo).lock(),this.connection}async beginTransaction(t){await t.executeQuery(Tr.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tr.raw("rollback"))}async releaseConnection(){n(this,yo).unlock()}},yo=new WeakMap,sd),sg=class{constructor(){ee(this,"promise");ee(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},og=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const s=await this.query(r,t);return fe.is(e)||s.length?{rows:s}:{rows:s,...await this.info()}}};function ag(t,e,r){let s,a=0,l=null;function h(){s&&clearTimeout(s),a=0,l=null}function m(){a>=r?(t(l),h()):(s&&clearTimeout(s),s=setTimeout(()=>{t(l),h(),s=void 0},e))}return N=>{a++,l=N,s===void 0&&a===0?(t(N),a++):m()}}var ug=class extends ng{constructor(e){super();ee(this,"config");ee(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new lg(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},lg=class extends og{constructor(e,r,s=!1,a=2e3,l=1e3){super();ee(this,"db");ee(this,"onWrite");ee(this,"trxCount",0);this.db=e,this.onWrite=r?s?ag(r,a,l):r:void 0}async query(e,r){const s=this.db.prepare(e);s.bind(r);const a=[];for(;s.step();)a.push(s.getAsObject());return s.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},cg=class extends ig{constructor(e){super();ee(this,"config");this.config=e}createDriver(){return new ug(this.config)}};function hg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var tp={exports:{}};const fg={},pg=Object.freeze(Object.defineProperty({__proto__:null,default:fg},Symbol.toStringTag,{value:"Module"})),Yu=dg(pg);(function(t,e){var r=void 0,s=function(a){return r||(r=new Promise(function(l,h){var m=typeof a<"u"?a:{},N=m.onAbort;m.onAbort=function(i){h(new Error(i)),N&&N(i)},m.postRun=m.postRun||[],m.postRun.push(function(){l(m)}),t=void 0;var f;f||(f=typeof m<"u"?m:{}),f.onRuntimeInitialized=function(){function i(g,I){switch(typeof I){case"boolean":Vp(g,I?1:0);break;case"number":$p(g,I);break;case"string":Qp(g,I,-1,-1);break;case"object":if(I===null)zc(g);else if(I.length!=null){var F=Ro(I,Ao);jp(g,F,I.length,-1),Lo(F)}else Bo(g,"Wrong API use : tried to return a value of an unknown type ("+I+").",-1);break;default:zc(g)}}function o(g,I){for(var F=[],Z=0;Z<g;Z+=1){var he=q(I+4*Z,"i32"),Re=Lp(he);if(Re===1||Re===2)he=Up(he);else if(Re===3)he=Bp(he);else if(Re===4){Re=he,he=Pp(Re),Re=Fp(Re);for(var tr=new Uint8Array(he),Yt=0;Yt<he;Yt+=1)tr[Yt]=Te[Re+Yt];he=tr}else he=null;F.push(he)}return F}function u(g,I){this.La=g,this.db=I,this.Ja=1,this.fb=[]}function d(g,I){if(this.db=I,I=be(g)+1,this.Ya=Do(I),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Pe(g,Ne,this.Ya,I),this.eb=this.Ya,this.Ua=this.ib=null}function y(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var I=this.filename,F="/",Z=I;if(F&&(F=typeof F=="string"?F:ms(F),Z=I?T(F+"/"+I):F),I=Nc(!0,!0),Z=_o(Z,(I!==void 0?I:438)&4095|32768,0),g){if(typeof g=="string"){F=Array(g.length);for(var he=0,Re=g.length;he<Re;++he)F[he]=g.charCodeAt(he);g=F}Io(Z,I|146),F=yn(Z,577),Mc(F,g,0,g.length,0),ku(F),Io(Z,I)}}this.handleError(z(this.filename,b)),this.db=q(b,"i32"),Xc(this.db),this.Za={},this.Na={}}var b=Zr(4),C=f.cwrap,z=C("sqlite3_open","number",["string","number"]),me=C("sqlite3_close_v2","number",["number"]),ae=C("sqlite3_exec","number",["number","string","number","number","number"]),Ye=C("sqlite3_changes","number",["number"]),ut=C("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Vc=C("sqlite3_sql","string",["number"]),bp=C("sqlite3_normalized_sql","string",["number"]),Jc=C("sqlite3_prepare_v2","number",["number","number","number","number","number"]),vp=C("sqlite3_bind_text","number",["number","number","number","number","number"]),Kc=C("sqlite3_bind_blob","number",["number","number","number","number","number"]),xp=C("sqlite3_bind_double","number",["number","number","number"]),Op=C("sqlite3_bind_int","number",["number","number","number"]),Cp=C("sqlite3_bind_parameter_index","number",["number","string"]),qp=C("sqlite3_step","number",["number"]),Wp=C("sqlite3_errmsg","string",["number"]),_p=C("sqlite3_column_count","number",["number"]),Tp=C("sqlite3_data_count","number",["number"]),Ip=C("sqlite3_column_double","number",["number","number"]),Hc=C("sqlite3_column_text","string",["number","number"]),Ep=C("sqlite3_column_blob","number",["number","number"]),kp=C("sqlite3_column_bytes","number",["number","number"]),Sp=C("sqlite3_column_type","number",["number","number"]),Ap=C("sqlite3_column_name","string",["number","number"]),Rp=C("sqlite3_reset","number",["number"]),Mp=C("sqlite3_clear_bindings","number",["number"]),Dp=C("sqlite3_finalize","number",["number"]),Gc=C("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Lp=C("sqlite3_value_type","number",["number"]),Pp=C("sqlite3_value_bytes","number",["number"]),Bp=C("sqlite3_value_text","string",["number"]),Fp=C("sqlite3_value_blob","number",["number"]),Up=C("sqlite3_value_double","number",["number"]),$p=C("sqlite3_result_double","",["number","number"]),zc=C("sqlite3_result_null","",["number"]),Qp=C("sqlite3_result_text","",["number","string","number","number"]),jp=C("sqlite3_result_blob","",["number","number","number","number"]),Vp=C("sqlite3_result_int","",["number","number"]),Bo=C("sqlite3_result_error","",["number","string","number"]),Yc=C("sqlite3_aggregate_context","number",["number","number"]),Xc=C("RegisterExtensionFunctions","number",["number"]);u.prototype.bind=function(g){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(g)?this.wb(g):g!=null&&typeof g=="object"?this.xb(g):!0},u.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var g=qp(this.La);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},u.prototype.rb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),Ip(this.La,g)},u.prototype.Ab=function(g){if(g==null&&(g=this.Ja,this.Ja+=1),g=Hc(this.La,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},u.prototype.Bb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),Hc(this.La,g)},u.prototype.getBlob=function(g){g==null&&(g=this.Ja,this.Ja+=1);var I=kp(this.La,g);g=Ep(this.La,g);for(var F=new Uint8Array(I),Z=0;Z<I;Z+=1)F[Z]=Te[g+Z];return F},u.prototype.get=function(g,I){I=I||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var F=Tp(this.La),Z=0;Z<F;Z+=1)switch(Sp(this.La,Z)){case 1:var he=I.useBigInt?this.Ab(Z):this.rb(Z);g.push(he);break;case 2:g.push(this.rb(Z));break;case 3:g.push(this.Bb(Z));break;case 4:g.push(this.getBlob(Z));break;default:g.push(null)}return g},u.prototype.getColumnNames=function(){for(var g=[],I=_p(this.La),F=0;F<I;F+=1)g.push(Ap(this.La,F));return g},u.prototype.getAsObject=function(g,I){g=this.get(g,I),I=this.getColumnNames();for(var F={},Z=0;Z<I.length;Z+=1)F[I[Z]]=g[Z];return F},u.prototype.getSQL=function(){return Vc(this.La)},u.prototype.getNormalizedSQL=function(){return bp(this.La)},u.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},u.prototype.nb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),g=Et(g);var F=Ro(g,Ao);this.fb.push(F),this.db.handleError(vp(this.La,I,F,g.length-1,0))},u.prototype.vb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1);var F=Ro(g,Ao);this.fb.push(F),this.db.handleError(Kc(this.La,I,F,g.length,0))},u.prototype.mb=function(g,I){I==null&&(I=this.Ja,this.Ja+=1),this.db.handleError((g===(g|0)?Op:xp)(this.La,I,g))},u.prototype.yb=function(g){g==null&&(g=this.Ja,this.Ja+=1),Kc(this.La,g,0,0,0)},u.prototype.ob=function(g,I){switch(I==null&&(I=this.Ja,this.Ja+=1),typeof g){case"string":this.nb(g,I);return;case"number":this.mb(g,I);return;case"bigint":this.nb(g.toString(),I);return;case"boolean":this.mb(g+0,I);return;case"object":if(g===null){this.yb(I);return}if(g.length!=null){this.vb(g,I);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},u.prototype.xb=function(g){var I=this;return Object.keys(g).forEach(function(F){var Z=Cp(I.La,F);Z!==0&&I.ob(g[F],Z)}),!0},u.prototype.wb=function(g){for(var I=0;I<g.length;I+=1)this.ob(g[I],I+1);return!0},u.prototype.reset=function(){return this.freemem(),Mp(this.La)===0&&Rp(this.La)===0},u.prototype.freemem=function(){for(var g;(g=this.fb.pop())!==void 0;)Lo(g)},u.prototype.free=function(){this.freemem();var g=Dp(this.La)===0;return delete this.db.Za[this.La],this.La=0,g},d.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var g=bs(),I=Zr(4);W(b),W(I);try{this.db.handleError(Jc(this.db.db,this.eb,-1,b,I)),this.eb=q(I,"i32");var F=q(b,"i32");return F===0?(this.gb(),{done:!0}):(this.Ua=new u(F,this.db),this.db.Za[F]=this.Ua,{value:this.Ua,done:!1})}catch(Z){throw this.ib=A(this.eb),this.gb(),Z}finally{vs(g)}},d.prototype.gb=function(){Lo(this.Ya),this.Ya=null},d.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),y.prototype.run=function(g,I){if(!this.db)throw"Database closed";if(I){g=this.prepare(g,I);try{g.step()}finally{g.free()}}else this.handleError(ae(this.db,g,0,0,b));return this},y.prototype.exec=function(g,I,F){if(!this.db)throw"Database closed";var Z=bs(),he=null;try{var Re=Mu(g),tr=Zr(4);for(g=[];q(Re,"i8")!==0;){W(b),W(tr),this.handleError(Jc(this.db,Re,-1,b,tr));var Yt=q(b,"i32");if(Re=q(tr,"i32"),Yt!==0){var Bt=null;for(he=new u(Yt,this),I!=null&&he.bind(I);he.step();)Bt===null&&(Bt={columns:he.getColumnNames(),values:[]},g.push(Bt)),Bt.values.push(he.get(null,F));he.free()}}return g}catch(rr){throw he&&he.free(),rr}finally{vs(Z)}},y.prototype.each=function(g,I,F,Z,he){typeof I=="function"&&(Z=F,F=I,I=void 0),g=this.prepare(g,I);try{for(;g.step();)F(g.getAsObject(null,he))}finally{g.free()}if(typeof Z=="function")return Z()},y.prototype.prepare=function(g,I){if(W(b),this.handleError(ut(this.db,g,-1,b,0)),g=q(b,"i32"),g===0)throw"Nothing to prepare";var F=new u(g,this);return I!=null&&F.bind(I),this.Za[g]=F},y.prototype.iterateStatements=function(g){return new d(g,this)},y.prototype.export=function(){Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(wn),this.Na={},this.handleError(me(this.db));var g=mp(this.filename);return this.handleError(z(this.filename,b)),this.db=q(b,"i32"),Xc(this.db),g},y.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(g){g.free()}),Object.values(this.Na).forEach(wn),this.Na={},this.handleError(me(this.db)),Ic("/"+this.filename),this.db=null)},y.prototype.handleError=function(g){if(g===0)return null;throw g=Wp(this.db),Error(g)},y.prototype.getRowsModified=function(){return Ye(this.db)},y.prototype.create_function=function(g,I){Object.prototype.hasOwnProperty.call(this.Na,g)&&(wn(this.Na[g]),delete this.Na[g]);var F=Mo(function(Z,he,Re){he=o(he,Re);try{var tr=I.apply(null,he)}catch(Yt){Bo(Z,Yt,-1);return}i(Z,tr)},"viii");return this.Na[g]=F,this.handleError(Gc(this.db,g,I.length,1,0,F,0,0,0)),this},y.prototype.create_aggregate=function(g,I){var F=I.init||function(){return null},Z=I.finalize||function(Bt){return Bt},he=I.step;if(!he)throw"An aggregate function must have a step function in "+g;var Re={};Object.hasOwnProperty.call(this.Na,g)&&(wn(this.Na[g]),delete this.Na[g]),I=g+"__finalize",Object.hasOwnProperty.call(this.Na,I)&&(wn(this.Na[I]),delete this.Na[I]);var tr=Mo(function(Bt,rr,Lu){var Ri=Yc(Bt,1);Object.hasOwnProperty.call(Re,Ri)||(Re[Ri]=F()),rr=o(rr,Lu),rr=[Re[Ri]].concat(rr);try{Re[Ri]=he.apply(null,rr)}catch(Jp){delete Re[Ri],Bo(Bt,Jp,-1)}},"viii"),Yt=Mo(function(Bt){var rr=Yc(Bt,1);try{var Lu=Z(Re[rr])}catch(Ri){delete Re[rr],Bo(Bt,Ri,-1);return}i(Bt,Lu),delete Re[rr]},"vi");return this.Na[g]=tr,this.Na[I]=Yt,this.handleError(Gc(this.db,g,he.length-1,1,0,0,tr,Yt,0)),this},f.Database=y};var v=Object.assign({},f),_="./this.program",R=typeof window=="object",B=typeof importScripts=="function",pe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Q="",Se,J,ie;if(pe){var de=Yu,Ce=Yu;Q=B?Ce.dirname(Q)+"/":__dirname+"/",Se=(i,o)=>(i=It(i)?new URL(i):Ce.normalize(i),de.readFileSync(i,o?void 0:"utf8")),ie=i=>(i=Se(i,!0),i.buffer||(i=new Uint8Array(i)),i),J=(i,o,u,d=!0)=>{i=It(i)?new URL(i):Ce.normalize(i),de.readFile(i,d?void 0:"utf8",(y,b)=>{y?u(y):o(d?b.buffer:b)})},!f.thisProgram&&1<process.argv.length&&(_=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=f,f.inspect=()=>"[Emscripten Module object]"}else(R||B)&&(B?Q=self.location.href:typeof document<"u"&&document.currentScript&&(Q=document.currentScript.src),Q=Q.indexOf("blob:")!==0?Q.substr(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Se=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.send(null),o.responseText},B&&(ie=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),J=(i,o,u)=>{var d=new XMLHttpRequest;d.open("GET",i,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?o(d.response):u()},d.onerror=u,d.send(null)});var ht=f.print||console.log.bind(console),ne=f.printErr||console.error.bind(console);Object.assign(f,v),v=null,f.thisProgram&&(_=f.thisProgram);var Ke;f.wasmBinary&&(Ke=f.wasmBinary),typeof WebAssembly!="object"&&Zt("no native wasm support detected");var tt,Gr=!1,Te,Ne,pr,H,Ie,dn,rt;function Ae(){var i=tt.buffer;f.HEAP8=Te=new Int8Array(i),f.HEAP16=pr=new Int16Array(i),f.HEAPU8=Ne=new Uint8Array(i),f.HEAPU16=new Uint16Array(i),f.HEAP32=H=new Int32Array(i),f.HEAPU32=Ie=new Uint32Array(i),f.HEAPF32=dn=new Float32Array(i),f.HEAPF64=rt=new Float64Array(i)}var qe=[],mr=[],Ii=[];function kr(){var i=f.preRun.shift();qe.unshift(i)}var at=0,zr=null;function Zt(i){throw f.onAbort?.(i),i="Aborted("+i+")",ne(i),Gr=!0,new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info.")}var qo=i=>i.startsWith("data:application/octet-stream;base64,"),It=i=>i.startsWith("file://"),er;if(er="sql-wasm.wasm",!qo(er)){var fn=er;er=f.locateFile?f.locateFile(fn,Q):Q+fn}function hs(i){if(i==er&&Ke)return new Uint8Array(Ke);if(ie)return ie(i);throw"both async and sync fetching of the wasm failed"}function Yr(i){if(!Ke&&(R||B)){if(typeof fetch=="function"&&!It(i))return fetch(i,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+i+"'";return o.arrayBuffer()}).catch(()=>hs(i));if(J)return new Promise((o,u)=>{J(i,d=>o(new Uint8Array(d)),u)})}return Promise.resolve().then(()=>hs(i))}function pn(i,o,u){return Yr(i).then(d=>WebAssembly.instantiate(d,o)).then(d=>d).then(u,d=>{ne(`failed to asynchronously prepare wasm: ${d}`),Zt(d)})}function ds(i,o){var u=er;Ke||typeof WebAssembly.instantiateStreaming!="function"||qo(u)||It(u)||pe||typeof fetch!="function"?pn(u,i,o):fetch(u,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,i).then(o,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),pn(u,i,o)}))}var p,w,x=i=>{for(;0<i.length;)i.shift()(f)};function q(i,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return Te[i>>0];case"i8":return Te[i>>0];case"i16":return pr[i>>1];case"i32":return H[i>>2];case"i64":Zt("to do getValue(i64) use WASM_BIGINT");case"float":return dn[i>>2];case"double":return rt[i>>3];case"*":return Ie[i>>2];default:Zt(`invalid type for getValue: ${o}`)}}function W(i){var o="i32";switch(o.endsWith("*")&&(o="*"),o){case"i1":Te[i>>0]=0;break;case"i8":Te[i>>0]=0;break;case"i16":pr[i>>1]=0;break;case"i32":H[i>>2]=0;break;case"i64":Zt("to do setValue(i64) use WASM_BIGINT");case"float":dn[i>>2]=0;break;case"double":rt[i>>3]=0;break;case"*":Ie[i>>2]=0;break;default:Zt(`invalid type for setValue: ${o}`)}}var M=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,S=(i,o,u)=>{var d=o+u;for(u=o;i[u]&&!(u>=d);)++u;if(16<u-o&&i.buffer&&M)return M.decode(i.subarray(o,u));for(d="";o<u;){var y=i[o++];if(y&128){var b=i[o++]&63;if((y&224)==192)d+=String.fromCharCode((y&31)<<6|b);else{var C=i[o++]&63;y=(y&240)==224?(y&15)<<12|b<<6|C:(y&7)<<18|b<<12|C<<6|i[o++]&63,65536>y?d+=String.fromCharCode(y):(y-=65536,d+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else d+=String.fromCharCode(y)}return d},A=(i,o)=>i?S(Ne,i,o):"",L=(i,o)=>{for(var u=0,d=i.length-1;0<=d;d--){var y=i[d];y==="."?i.splice(d,1):y===".."?(i.splice(d,1),u++):u&&(i.splice(d,1),u--)}if(o)for(;u;u--)i.unshift("..");return i},T=i=>{var o=i.charAt(0)==="/",u=i.substr(-1)==="/";return(i=L(i.split("/").filter(d=>!!d),!o).join("/"))||o||(i="."),i&&u&&(i+="/"),(o?"/":"")+i},P=i=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(i).slice(1);return i=o[0],o=o[1],!i&&!o?".":(o&&(o=o.substr(0,o.length-1)),i+o)},U=i=>{if(i==="/")return"/";i=T(i),i=i.replace(/\/$/,"");var o=i.lastIndexOf("/");return o===-1?i:i.substr(o+1)},$=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(pe)try{var i=Yu;if(i.randomFillSync)return u=>i.randomFillSync(u);var o=i.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}Zt("initRandomDevice")},G=i=>(G=$())(i);function se(){for(var i="",o=!1,u=arguments.length-1;-1<=u&&!o;u--){if(o=0<=u?arguments[u]:"/",typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";i=o+"/"+i,o=o.charAt(0)==="/"}return i=L(i.split("/").filter(d=>!!d),!o).join("/"),(o?"/":"")+i||"."}var ge=[],be=i=>{for(var o=0,u=0;u<i.length;++u){var d=i.charCodeAt(u);127>=d?o++:2047>=d?o+=2:55296<=d&&57343>=d?(o+=4,++u):o+=3}return o},Pe=(i,o,u,d)=>{if(!(0<d))return 0;var y=u;d=u+d-1;for(var b=0;b<i.length;++b){var C=i.charCodeAt(b);if(55296<=C&&57343>=C){var z=i.charCodeAt(++b);C=65536+((C&1023)<<10)|z&1023}if(127>=C){if(u>=d)break;o[u++]=C}else{if(2047>=C){if(u+1>=d)break;o[u++]=192|C>>6}else{if(65535>=C){if(u+2>=d)break;o[u++]=224|C>>12}else{if(u+3>=d)break;o[u++]=240|C>>18,o[u++]=128|C>>12&63}o[u++]=128|C>>6&63}o[u++]=128|C&63}}return o[u]=0,u-y};function Et(i,o){var u=Array(be(i)+1);return i=Pe(i,u,0,u.length),o&&(u.length=i),u}var Sr=[];function fs(i,o){Sr[i]={input:[],output:[],Xa:o},Iu(i,Ei)}var Ei={open(i){var o=Sr[i.node.rdev];if(!o)throw new D(43);i.tty=o,i.seekable=!1},close(i){i.tty.Xa.fsync(i.tty)},fsync(i){i.tty.Xa.fsync(i.tty)},read(i,o,u,d){if(!i.tty||!i.tty.Xa.sb)throw new D(60);for(var y=0,b=0;b<d;b++){try{var C=i.tty.Xa.sb(i.tty)}catch{throw new D(29)}if(C===void 0&&y===0)throw new D(6);if(C==null)break;y++,o[u+b]=C}return y&&(i.node.timestamp=Date.now()),y},write(i,o,u,d){if(!i.tty||!i.tty.Xa.jb)throw new D(60);try{for(var y=0;y<d;y++)i.tty.Xa.jb(i.tty,o[u+y])}catch{throw new D(29)}return d&&(i.node.timestamp=Date.now()),y}},Wo={sb(){e:{if(!ge.length){var i=null;if(pe){var o=Buffer.alloc(256),u=0,d=process.stdin.fd;try{u=de.readSync(d,o)}catch(y){if(y.toString().includes("EOF"))u=0;else throw y}0<u?i=o.slice(0,u).toString("utf-8"):i=null}else typeof window<"u"&&typeof window.prompt=="function"?(i=window.prompt("Input: "),i!==null&&(i+=`
`)):typeof readline=="function"&&(i=readline(),i!==null&&(i+=`
`));if(!i){i=null;break e}ge=Et(i,!0)}i=ge.shift()}return i},jb(i,o){o===null||o===10?(ht(S(i.output,0)),i.output=[]):o!=0&&i.output.push(o)},fsync(i){i.output&&0<i.output.length&&(ht(S(i.output,0)),i.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},bt={jb(i,o){o===null||o===10?(ne(S(i.output,0)),i.output=[]):o!=0&&i.output.push(o)},fsync(i){i.output&&0<i.output.length&&(ne(S(i.output,0)),i.output=[])}};function Pt(i,o){var u=i.Ia?i.Ia.length:0;u>=o||(o=Math.max(o,u*(1048576>u?2:1.125)>>>0),u!=0&&(o=Math.max(o,256)),u=i.Ia,i.Ia=new Uint8Array(o),0<i.Ma&&i.Ia.set(u.subarray(0,i.Ma),0))}var oe={Qa:null,Ra(){return oe.createNode(null,"/",16895,0)},createNode(i,o,u,d){if((u&61440)===24576||(u&61440)===4096)throw new D(63);return oe.Qa||(oe.Qa={dir:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa,lookup:oe.Ga.lookup,ab:oe.Ga.ab,rename:oe.Ga.rename,unlink:oe.Ga.unlink,rmdir:oe.Ga.rmdir,readdir:oe.Ga.readdir,symlink:oe.Ga.symlink},stream:{Ta:oe.Ha.Ta}},file:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa},stream:{Ta:oe.Ha.Ta,read:oe.Ha.read,write:oe.Ha.write,lb:oe.Ha.lb,bb:oe.Ha.bb,cb:oe.Ha.cb}},link:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa,readlink:oe.Ga.readlink},stream:{}},pb:{node:{Pa:oe.Ga.Pa,Oa:oe.Ga.Oa},stream:pp}}),u=xc(i,o,u,d),zt(u.mode)?(u.Ga=oe.Qa.dir.node,u.Ha=oe.Qa.dir.stream,u.Ia={}):(u.mode&61440)===32768?(u.Ga=oe.Qa.file.node,u.Ha=oe.Qa.file.stream,u.Ma=0,u.Ia=null):(u.mode&61440)===40960?(u.Ga=oe.Qa.link.node,u.Ha=oe.Qa.link.stream):(u.mode&61440)===8192&&(u.Ga=oe.Qa.pb.node,u.Ha=oe.Qa.pb.stream),u.timestamp=Date.now(),i&&(i.Ia[o]=u,i.timestamp=u.timestamp),u},Lb(i){return i.Ia?i.Ia.subarray?i.Ia.subarray(0,i.Ma):new Uint8Array(i.Ia):new Uint8Array(0)},Ga:{Pa(i){var o={};return o.dev=(i.mode&61440)===8192?i.id:1,o.ino=i.id,o.mode=i.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=i.rdev,zt(i.mode)?o.size=4096:(i.mode&61440)===32768?o.size=i.Ma:(i.mode&61440)===40960?o.size=i.link.length:o.size=0,o.atime=new Date(i.timestamp),o.mtime=new Date(i.timestamp),o.ctime=new Date(i.timestamp),o.zb=4096,o.blocks=Math.ceil(o.size/o.zb),o},Oa(i,o){if(o.mode!==void 0&&(i.mode=o.mode),o.timestamp!==void 0&&(i.timestamp=o.timestamp),o.size!==void 0&&(o=o.size,i.Ma!=o))if(o==0)i.Ia=null,i.Ma=0;else{var u=i.Ia;i.Ia=new Uint8Array(o),u&&i.Ia.set(u.subarray(0,Math.min(o,i.Ma))),i.Ma=o}},lookup(){throw _u[44]},ab(i,o,u,d){return oe.createNode(i,o,u,d)},rename(i,o,u){if(zt(i.mode)){try{var d=ki(o,u)}catch{}if(d)for(var y in d.Ia)throw new D(55)}delete i.parent.Ia[i.name],i.parent.timestamp=Date.now(),i.name=u,o.Ia[u]=i,o.timestamp=i.parent.timestamp,i.parent=o},unlink(i,o){delete i.Ia[o],i.timestamp=Date.now()},rmdir(i,o){var u=ki(i,o),d;for(d in u.Ia)throw new D(55);delete i.Ia[o],i.timestamp=Date.now()},readdir(i){var o=[".",".."],u;for(u of Object.keys(i.Ia))o.push(u);return o},symlink(i,o,u){return i=oe.createNode(i,o,41471,0),i.link=u,i},readlink(i){if((i.mode&61440)!==40960)throw new D(28);return i.link}},Ha:{read(i,o,u,d,y){var b=i.node.Ia;if(y>=i.node.Ma)return 0;if(i=Math.min(i.node.Ma-y,d),8<i&&b.subarray)o.set(b.subarray(y,y+i),u);else for(d=0;d<i;d++)o[u+d]=b[y+d];return i},write(i,o,u,d,y,b){if(o.buffer===Te.buffer&&(b=!1),!d)return 0;if(i=i.node,i.timestamp=Date.now(),o.subarray&&(!i.Ia||i.Ia.subarray)){if(b)return i.Ia=o.subarray(u,u+d),i.Ma=d;if(i.Ma===0&&y===0)return i.Ia=o.slice(u,u+d),i.Ma=d;if(y+d<=i.Ma)return i.Ia.set(o.subarray(u,u+d),y),d}if(Pt(i,y+d),i.Ia.subarray&&o.subarray)i.Ia.set(o.subarray(u,u+d),y);else for(b=0;b<d;b++)i.Ia[y+b]=o[u+b];return i.Ma=Math.max(i.Ma,y+d),d},Ta(i,o,u){if(u===1?o+=i.position:u===2&&(i.node.mode&61440)===32768&&(o+=i.node.Ma),0>o)throw new D(28);return o},lb(i,o,u){Pt(i.node,o+u),i.node.Ma=Math.max(i.node.Ma,o+u)},bb(i,o,u,d,y){if((i.node.mode&61440)!==32768)throw new D(43);if(i=i.node.Ia,y&2||i.buffer!==Te.buffer){if((0<u||u+o<i.length)&&(i.subarray?i=i.subarray(u,u+o):i=Array.prototype.slice.call(i,u,u+o)),u=!0,o=65536*Math.ceil(o/65536),(y=Qc(65536,o))?(Ne.fill(0,y,y+o),o=y):o=0,!o)throw new D(48);Te.set(i,o)}else u=!1,o=i.byteOffset;return{Db:o,ub:u}},cb(i,o,u,d){return oe.Ha.write(i,o,0,d,u,!1),0}}},Nc=(i,o)=>{var u=0;return i&&(u|=365),o&&(u|=146),u},Wu=null,gc={},ps=[],dp=1,Xr=null,bc=!0,D=null,_u={};function kt(i,o={}){if(i=se(i),!i)return{path:"",node:null};if(o=Object.assign({qb:!0,kb:0},o),8<o.kb)throw new D(32);i=i.split("/").filter(C=>!!C);for(var u=Wu,d="/",y=0;y<i.length;y++){var b=y===i.length-1;if(b&&o.parent)break;if(u=ki(u,i[y]),d=T(d+"/"+i[y]),u.Va&&(!b||b&&o.qb)&&(u=u.Va.root),!b||o.Sa){for(b=0;(u.mode&61440)===40960;)if(u=Ec(d),d=se(P(d),u),u=kt(d,{kb:o.kb+1}).node,40<b++)throw new D(32)}}return{path:d,node:u}}function ms(i){for(var o;;){if(i===i.parent)return i=i.Ra.tb,o?i[i.length-1]!=="/"?`${i}/${o}`:i+o:i;o=o?`${i.name}/${o}`:i.name,i=i.parent}}function Tu(i,o){for(var u=0,d=0;d<o.length;d++)u=(u<<5)-u+o.charCodeAt(d)|0;return(i+u>>>0)%Xr.length}function vc(i){var o=Tu(i.parent.id,i.name);if(Xr[o]===i)Xr[o]=i.Wa;else for(o=Xr[o];o;){if(o.Wa===i){o.Wa=i.Wa;break}o=o.Wa}}function ki(i,o){var u;if(u=(u=mn(i,"x"))?u:i.Ga.lookup?0:2)throw new D(u,i);for(u=Xr[Tu(i.id,o)];u;u=u.Wa){var d=u.name;if(u.parent.id===i.id&&d===o)return u}return i.Ga.lookup(i,o)}function xc(i,o,u,d){return i=new Uc(i,o,u,d),o=Tu(i.parent.id,i.name),i.Wa=Xr[o],Xr[o]=i}function zt(i){return(i&61440)===16384}function Oc(i){var o=["r","w","rw"][i&3];return i&512&&(o+="w"),o}function mn(i,o){if(bc)return 0;if(!o.includes("r")||i.mode&292){if(o.includes("w")&&!(i.mode&146)||o.includes("x")&&!(i.mode&73))return 2}else return 2;return 0}function Cc(i,o){try{return ki(i,o),20}catch{}return mn(i,"wx")}function qc(i,o,u){try{var d=ki(i,o)}catch(y){return y.Ka}if(i=mn(i,"wx"))return i;if(u){if(!zt(d.mode))return 54;if(d===d.parent||ms(d)==="/")return 10}else if(zt(d.mode))return 31;return 0}function fp(){for(var i=0;4096>=i;i++)if(!ps[i])return i;throw new D(33)}function vt(i){if(i=ps[i],!i)throw new D(8);return i}function Wc(i,o=-1){return Ns||(Ns=function(){this.$a={}},Ns.prototype={},Object.defineProperties(Ns.prototype,{object:{get(){return this.node},set(u){this.node=u}},flags:{get(){return this.$a.flags},set(u){this.$a.flags=u}},position:{get(){return this.$a.position},set(u){this.$a.position=u}}})),i=Object.assign(new Ns,i),o==-1&&(o=fp()),i.fd=o,ps[o]=i}var pp={open(i){i.Ha=gc[i.node.rdev].Ha,i.Ha.open?.(i)},Ta(){throw new D(70)}};function Iu(i,o){gc[i]={Ha:o}}function _c(i,o){var u=o==="/",d=!o;if(u&&Wu)throw new D(10);if(!u&&!d){var y=kt(o,{qb:!1});if(o=y.path,y=y.node,y.Va)throw new D(10);if(!zt(y.mode))throw new D(54)}o={type:i,Pb:{},tb:o,Cb:[]},i=i.Ra(o),i.Ra=o,o.root=i,u?Wu=i:y&&(y.Va=o,y.Ra&&y.Ra.Cb.push(o))}function _o(i,o,u){var d=kt(i,{parent:!0}).node;if(i=U(i),!i||i==="."||i==="..")throw new D(28);var y=Cc(d,i);if(y)throw new D(y);if(!d.Ga.ab)throw new D(63);return d.Ga.ab(d,i,o,u)}function yr(i,o){return _o(i,(o!==void 0?o:511)&1023|16384,0)}function To(i,o,u){typeof u>"u"&&(u=o,o=438),_o(i,o|8192,u)}function Eu(i,o){if(!se(i))throw new D(44);var u=kt(o,{parent:!0}).node;if(!u)throw new D(44);o=U(o);var d=Cc(u,o);if(d)throw new D(d);if(!u.Ga.symlink)throw new D(63);u.Ga.symlink(u,o,i)}function Tc(i){var o=kt(i,{parent:!0}).node;i=U(i);var u=ki(o,i),d=qc(o,i,!0);if(d)throw new D(d);if(!o.Ga.rmdir)throw new D(63);if(u.Va)throw new D(10);o.Ga.rmdir(o,i),vc(u)}function Ic(i){var o=kt(i,{parent:!0}).node;if(!o)throw new D(44);i=U(i);var u=ki(o,i),d=qc(o,i,!1);if(d)throw new D(d);if(!o.Ga.unlink)throw new D(63);if(u.Va)throw new D(10);o.Ga.unlink(o,i),vc(u)}function Ec(i){if(i=kt(i).node,!i)throw new D(44);if(!i.Ga.readlink)throw new D(28);return se(ms(i.parent),i.Ga.readlink(i))}function ys(i,o){if(i=kt(i,{Sa:!o}).node,!i)throw new D(44);if(!i.Ga.Pa)throw new D(63);return i.Ga.Pa(i)}function kc(i){return ys(i,!0)}function Io(i,o){if(i=typeof i=="string"?kt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new D(63);i.Ga.Oa(i,{mode:o&4095|i.mode&-4096,timestamp:Date.now()})}function Sc(i,o){if(0>o)throw new D(28);if(i=typeof i=="string"?kt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new D(63);if(zt(i.mode))throw new D(31);if((i.mode&61440)!==32768)throw new D(28);var u=mn(i,"w");if(u)throw new D(u);i.Ga.Oa(i,{size:o,timestamp:Date.now()})}function yn(i,o,u){if(i==="")throw new D(44);if(typeof o=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[o];if(typeof d>"u")throw Error(`Unknown file open mode: ${o}`);o=d}if(u=o&64?(typeof u>"u"?438:u)&4095|32768:0,typeof i=="object")var y=i;else{i=T(i);try{y=kt(i,{Sa:!(o&131072)}).node}catch{}}if(d=!1,o&64)if(y){if(o&128)throw new D(20)}else y=_o(i,u,0),d=!0;if(!y)throw new D(44);if((y.mode&61440)===8192&&(o&=-513),o&65536&&!zt(y.mode))throw new D(54);if(!d&&(u=y?(y.mode&61440)===40960?32:zt(y.mode)&&(Oc(o)!=="r"||o&512)?31:mn(y,Oc(o)):44))throw new D(u);return o&512&&!d&&Sc(y,0),o&=-131713,y=Wc({node:y,path:ms(y),flags:o,seekable:!0,position:0,Ha:y.Ha,Fb:[],error:!1}),y.Ha.open&&y.Ha.open(y),!f.logReadFiles||o&1||(Su||(Su={}),i in Su||(Su[i]=1)),y}function ku(i){if(i.fd===null)throw new D(8);i.hb&&(i.hb=null);try{i.Ha.close&&i.Ha.close(i)}catch(o){throw o}finally{ps[i.fd]=null}i.fd=null}function Ac(i,o,u){if(i.fd===null)throw new D(8);if(!i.seekable||!i.Ha.Ta)throw new D(70);if(u!=0&&u!=1&&u!=2)throw new D(28);i.position=i.Ha.Ta(i,o,u),i.Fb=[]}function Rc(i,o,u,d,y){if(0>d||0>y)throw new D(28);if(i.fd===null)throw new D(8);if((i.flags&2097155)===1)throw new D(8);if(zt(i.node.mode))throw new D(31);if(!i.Ha.read)throw new D(28);var b=typeof y<"u";if(!b)y=i.position;else if(!i.seekable)throw new D(70);return o=i.Ha.read(i,o,u,d,y),b||(i.position+=o),o}function Mc(i,o,u,d,y){if(0>d||0>y)throw new D(28);if(i.fd===null)throw new D(8);if(!(i.flags&2097155))throw new D(8);if(zt(i.node.mode))throw new D(31);if(!i.Ha.write)throw new D(28);i.seekable&&i.flags&1024&&Ac(i,0,2);var b=typeof y<"u";if(!b)y=i.position;else if(!i.seekable)throw new D(70);return o=i.Ha.write(i,o,u,d,y,void 0),b||(i.position+=o),o}function mp(i){var o,u=yn(i,u||0);i=ys(i).size;var d=new Uint8Array(i);return Rc(u,d,0,i,0),o=d,ku(u),o}function Dc(){D||(D=function(i,o){this.name="ErrnoError",this.node=o,this.Eb=function(u){this.Ka=u},this.Eb(i),this.message="FS error"},D.prototype=Error(),D.prototype.constructor=D,[44].forEach(i=>{_u[i]=new D(i),_u[i].stack="<generic error, no stack>"}))}var Lc;function ws(i,o,u){i=T("/dev/"+i);var d=Nc(!!o,!!u);Pc||(Pc=64);var y=Pc++<<8|0;Iu(y,{open(b){b.seekable=!1},close(){u?.buffer?.length&&u(10)},read(b,C,z,me){for(var ae=0,Ye=0;Ye<me;Ye++){try{var ut=o()}catch{throw new D(29)}if(ut===void 0&&ae===0)throw new D(6);if(ut==null)break;ae++,C[z+Ye]=ut}return ae&&(b.node.timestamp=Date.now()),ae},write(b,C,z,me){for(var ae=0;ae<me;ae++)try{u(C[z+ae])}catch{throw new D(29)}return me&&(b.node.timestamp=Date.now()),ae}}),To(i,d,y)}var Pc,Be={},Ns,Su;function Si(i,o,u){if(o.charAt(0)==="/")return o;if(i=i===-100?"/":vt(i).path,o.length==0){if(!u)throw new D(44);return i}return T(i+"/"+o)}function Eo(i,o,u){try{var d=i(o)}catch(b){if(b&&b.node&&T(o)!==T(ms(b.node)))return-54;throw b}H[u>>2]=d.dev,H[u+4>>2]=d.mode,Ie[u+8>>2]=d.nlink,H[u+12>>2]=d.uid,H[u+16>>2]=d.gid,H[u+20>>2]=d.rdev,w=[d.size>>>0,(p=d.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[u+24>>2]=w[0],H[u+28>>2]=w[1],H[u+32>>2]=4096,H[u+36>>2]=d.blocks,i=d.atime.getTime(),o=d.mtime.getTime();var y=d.ctime.getTime();return w=[Math.floor(i/1e3)>>>0,(p=Math.floor(i/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[u+40>>2]=w[0],H[u+44>>2]=w[1],Ie[u+48>>2]=i%1e3*1e3,w=[Math.floor(o/1e3)>>>0,(p=Math.floor(o/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[u+56>>2]=w[0],H[u+60>>2]=w[1],Ie[u+64>>2]=o%1e3*1e3,w=[Math.floor(y/1e3)>>>0,(p=Math.floor(y/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[u+72>>2]=w[0],H[u+76>>2]=w[1],Ie[u+80>>2]=y%1e3*1e3,w=[d.ino>>>0,(p=d.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[u+88>>2]=w[0],H[u+92>>2]=w[1],0}var ko=void 0;function So(){var i=H[+ko>>2];return ko+=4,i}var gs=(i,o)=>o+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*o:NaN,yp=[0,31,60,91,121,152,182,213,244,274,305,335],wp=[0,31,59,90,120,151,181,212,243,273,304,334],Bc=i=>{var o=be(i)+1,u=Do(o);return u&&Pe(i,Ne,u,o),u},Au={},Fc=()=>{if(!Ru){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"},o;for(o in Au)Au[o]===void 0?delete i[o]:i[o]=Au[o];var u=[];for(o in i)u.push(`${o}=${i[o]}`);Ru=u}return Ru},Ru,Mu=i=>{var o=be(i)+1,u=Zr(o);return Pe(i,Ne,u,o),u},Np=(i,o,u,d)=>{var y={string:ae=>{var Ye=0;return ae!=null&&ae!==0&&(Ye=Mu(ae)),Ye},array:ae=>{var Ye=Zr(ae.length);return Te.set(ae,Ye),Ye}};i=f["_"+i];var b=[],C=0;if(d)for(var z=0;z<d.length;z++){var me=y[u[z]];me?(C===0&&(C=bs()),b[z]=me(d[z])):b[z]=d[z]}return u=i.apply(null,b),u=function(ae){return C!==0&&vs(C),o==="string"?ae?S(Ne,ae):"":o==="boolean"?!!ae:ae}(u)},Ao=0,Ro=(i,o)=>(o=o==1?Zr(i.length):Do(i.length),i.subarray||i.slice||(i=new Uint8Array(i)),Ne.set(i,o),o),Ai,Du=[],Ar,wn=i=>{Ai.delete(Ar.get(i)),Ar.set(i,null),Du.push(i)},Mo=(i,o)=>{if(!Ai){Ai=new WeakMap;var u=Ar.length;if(Ai)for(var d=0;d<0+u;d++){var y=Ar.get(d);y&&Ai.set(y,d)}}if(u=Ai.get(i)||0)return u;if(Du.length)u=Du.pop();else{try{Ar.grow(1)}catch(z){throw z instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":z}u=Ar.length-1}try{Ar.set(u,i)}catch(z){if(!(z instanceof TypeError))throw z;if(typeof WebAssembly.Function=="function"){d=WebAssembly.Function,y={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:o[0]=="v"?[]:[y[o[0]]]},C=1;C<o.length;++C)b.parameters.push(y[o[C]]);o=new d(b,i)}else{for(d=[1],y=o.slice(0,1),o=o.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96),C=o.length,128>C?d.push(C):d.push(C%128|128,C>>7),C=0;C<o.length;++C)d.push(b[o[C]]);y=="v"?d.push(0):d.push(1,b[y]),o=[0,97,115,109,1,0,0,0,1],y=d.length,128>y?o.push(y):o.push(y%128|128,y>>7),o.push.apply(o,d),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:i}}).exports.f}Ar.set(u,o)}return Ai.set(i,u),u};function Uc(i,o,u,d){i||(i=this),this.parent=i,this.Ra=i.Ra,this.Va=null,this.id=dp++,this.name=o,this.mode=u,this.Ga={},this.Ha={},this.rdev=d}Object.defineProperties(Uc.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(i){i?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(i){i?this.mode|=146:this.mode&=-147}}}),Dc(),Xr=Array(4096),_c(oe,"/"),yr("/tmp"),yr("/home"),yr("/home/web_user"),function(){yr("/dev"),Iu(259,{read:()=>0,write:(d,y,b,C)=>C}),To("/dev/null",259),fs(1280,Wo),fs(1536,bt),To("/dev/tty",1280),To("/dev/tty1",1536);var i=new Uint8Array(1024),o=0,u=()=>(o===0&&(o=G(i).byteLength),i[--o]);ws("random",u),ws("urandom",u),yr("/dev/shm"),yr("/dev/shm/tmp")}(),function(){yr("/proc");var i=yr("/proc/self");yr("/proc/self/fd"),_c({Ra(){var o=xc(i,"fd",16895,73);return o.Ga={lookup(u,d){var y=vt(+d);return u={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>y.path}},u.parent=u}},o}},"/proc/self/fd")}();var gp={a:(i,o,u,d)=>{Zt(`Assertion failed: ${i?S(Ne,i):""}, at: `+[o?o?S(Ne,o):"":"unknown filename",u,d?d?S(Ne,d):"":"unknown function"])},h:function(i,o){try{return i=i?S(Ne,i):"",Io(i,o),0}catch(u){if(typeof Be>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},H:function(i,o,u){try{if(o=o?S(Ne,o):"",o=Si(i,o),u&-8)return-28;var d=kt(o,{Sa:!0}).node;return d?(i="",u&4&&(i+="r"),u&2&&(i+="w"),u&1&&(i+="x"),i&&mn(d,i)?-2:0):-44}catch(y){if(typeof Be>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},i:function(i,o){try{var u=vt(i);return Io(u.node,o),0}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},g:function(i){try{var o=vt(i).node,u=typeof o=="string"?kt(o,{Sa:!0}).node:o;if(!u.Ga.Oa)throw new D(63);return u.Ga.Oa(u,{timestamp:Date.now()}),0}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},b:function(i,o,u){ko=u;try{var d=vt(i);switch(o){case 0:var y=So();if(0>y)return-28;for(;ps[y];)y++;return Wc(d,y).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return y=So(),d.flags|=y,0;case 5:return y=So(),pr[y+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return H[$c()>>2]=28,-1;default:return-28}}catch(b){if(typeof Be>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},f:function(i,o){try{var u=vt(i);return Eo(ys,u.path,o)}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},n:function(i,o,u){o=gs(o,u);try{if(isNaN(o))return 61;var d=vt(i);if(!(d.flags&2097155))throw new D(28);return Sc(d.node,o),0}catch(y){if(typeof Be>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},C:function(i,o){try{if(o===0)return-28;var u=be("/")+1;return o<u?-68:(Pe("/",Ne,i,o),u)}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},F:function(i,o){try{return i=i?S(Ne,i):"",Eo(kc,i,o)}catch(u){if(typeof Be>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},z:function(i,o,u){try{return o=o?S(Ne,o):"",o=Si(i,o),o=T(o),o[o.length-1]==="/"&&(o=o.substr(0,o.length-1)),yr(o,u),0}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},E:function(i,o,u,d){try{o=o?S(Ne,o):"";var y=d&256;return o=Si(i,o,d&4096),Eo(y?kc:ys,o,u)}catch(b){if(typeof Be>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},y:function(i,o,u,d){ko=d;try{o=o?S(Ne,o):"",o=Si(i,o);var y=d?So():0;return yn(o,u,y).fd}catch(b){if(typeof Be>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},w:function(i,o,u,d){try{if(o=o?S(Ne,o):"",o=Si(i,o),0>=d)return-28;var y=Ec(o),b=Math.min(d,be(y)),C=Te[u+b];return Pe(y,Ne,u,d+1),Te[u+b]=C,b}catch(z){if(typeof Be>"u"||z.name!=="ErrnoError")throw z;return-z.Ka}},v:function(i){try{return i=i?S(Ne,i):"",Tc(i),0}catch(o){if(typeof Be>"u"||o.name!=="ErrnoError")throw o;return-o.Ka}},G:function(i,o){try{return i=i?S(Ne,i):"",Eo(ys,i,o)}catch(u){if(typeof Be>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},r:function(i,o,u){try{return o=o?S(Ne,o):"",o=Si(i,o),u===0?Ic(o):u===512?Tc(o):Zt("Invalid flags passed to unlinkat"),0}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},q:function(i,o,u){try{if(o=o?S(Ne,o):"",o=Si(i,o,!0),u){var d=Ie[u>>2]+4294967296*H[u+4>>2],y=H[u+8>>2];b=1e3*d+y/1e6,u+=16,d=Ie[u>>2]+4294967296*H[u+4>>2],y=H[u+8>>2],C=1e3*d+y/1e6}else var b=Date.now(),C=b;i=b;var z=kt(o,{Sa:!0}).node;return z.Ga.Oa(z,{timestamp:Math.max(i,C)}),0}catch(me){if(typeof Be>"u"||me.name!=="ErrnoError")throw me;return-me.Ka}},l:function(i,o,u){i=new Date(1e3*gs(i,o)),H[u>>2]=i.getSeconds(),H[u+4>>2]=i.getMinutes(),H[u+8>>2]=i.getHours(),H[u+12>>2]=i.getDate(),H[u+16>>2]=i.getMonth(),H[u+20>>2]=i.getFullYear()-1900,H[u+24>>2]=i.getDay(),o=i.getFullYear(),H[u+28>>2]=(o%4!==0||o%100===0&&o%400!==0?wp:yp)[i.getMonth()]+i.getDate()-1|0,H[u+36>>2]=-(60*i.getTimezoneOffset()),o=new Date(i.getFullYear(),6,1).getTimezoneOffset();var d=new Date(i.getFullYear(),0,1).getTimezoneOffset();H[u+32>>2]=(o!=d&&i.getTimezoneOffset()==Math.min(d,o))|0},j:function(i,o,u,d,y,b,C,z){y=gs(y,b);try{if(isNaN(y))return 61;var me=vt(d);if(o&2&&!(u&2)&&(me.flags&2097155)!==2)throw new D(2);if((me.flags&2097155)===1)throw new D(2);if(!me.Ha.bb)throw new D(43);var ae=me.Ha.bb(me,i,y,o,u),Ye=ae.Db;return H[C>>2]=ae.ub,Ie[z>>2]=Ye,0}catch(ut){if(typeof Be>"u"||ut.name!=="ErrnoError")throw ut;return-ut.Ka}},k:function(i,o,u,d,y,b,C){b=gs(b,C);try{if(isNaN(b))return 61;var z=vt(y);if(u&2){if((z.node.mode&61440)!==32768)throw new D(43);if(!(d&2)){var me=Ne.slice(i,i+o);z.Ha.cb&&z.Ha.cb(z,me,b,o,d)}}}catch(ae){if(typeof Be>"u"||ae.name!=="ErrnoError")throw ae;return-ae.Ka}},s:(i,o,u)=>{function d(me){return(me=me.toTimeString().match(/\(([A-Za-z ]+)\)$/))?me[1]:"GMT"}var y=new Date().getFullYear(),b=new Date(y,0,1),C=new Date(y,6,1);y=b.getTimezoneOffset();var z=C.getTimezoneOffset();Ie[i>>2]=60*Math.max(y,z),H[o>>2]=+(y!=z),i=d(b),o=d(C),i=Bc(i),o=Bc(o),z<y?(Ie[u>>2]=i,Ie[u+4>>2]=o):(Ie[u>>2]=o,Ie[u+4>>2]=i)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:i=>{var o=Ne.length;if(i>>>=0,2147483648<i)return!1;for(var u=1;4>=u;u*=2){var d=o*(1+.2/u);d=Math.min(d,i+100663296);var y=Math;d=Math.max(i,d);e:{y=(y.min.call(y,2147483648,d+(65536-d%65536)%65536)-tt.buffer.byteLength+65535)/65536;try{tt.grow(y),Ae();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(i,o)=>{var u=0;return Fc().forEach((d,y)=>{var b=o+u;for(y=Ie[i+4*y>>2]=b,b=0;b<d.length;++b)Te[y++>>0]=d.charCodeAt(b);Te[y>>0]=0,u+=d.length+1}),0},B:(i,o)=>{var u=Fc();Ie[i>>2]=u.length;var d=0;return u.forEach(y=>d+=y.length+1),Ie[o>>2]=d,0},e:function(i){try{var o=vt(i);return ku(o),0}catch(u){if(typeof Be>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},p:function(i,o){try{var u=vt(i);return Te[o>>0]=u.tty?2:zt(u.mode)?3:(u.mode&61440)===40960?7:4,pr[o+2>>1]=0,w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[o+8>>2]=w[0],H[o+12>>2]=w[1],w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[o+16>>2]=w[0],H[o+20>>2]=w[1],0}catch(d){if(typeof Be>"u"||d.name!=="ErrnoError")throw d;return d.Ka}},x:function(i,o,u,d){try{e:{var y=vt(i);i=o;for(var b,C=o=0;C<u;C++){var z=Ie[i>>2],me=Ie[i+4>>2];i+=8;var ae=Rc(y,Te,z,me,b);if(0>ae){var Ye=-1;break e}if(o+=ae,ae<me)break;typeof b<"u"&&(b+=ae)}Ye=o}return Ie[d>>2]=Ye,0}catch(ut){if(typeof Be>"u"||ut.name!=="ErrnoError")throw ut;return ut.Ka}},m:function(i,o,u,d,y){o=gs(o,u);try{if(isNaN(o))return 61;var b=vt(i);return Ac(b,o,d),w=[b.position>>>0,(p=b.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],H[y>>2]=w[0],H[y+4>>2]=w[1],b.hb&&o===0&&d===0&&(b.hb=null),0}catch(C){if(typeof Be>"u"||C.name!=="ErrnoError")throw C;return C.Ka}},D:function(i){try{var o=vt(i);return o.Ha?.fsync?o.Ha.fsync(o):0}catch(u){if(typeof Be>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},u:function(i,o,u,d){try{e:{var y=vt(i);i=o;for(var b,C=o=0;C<u;C++){var z=Ie[i>>2],me=Ie[i+4>>2];i+=8;var ae=Mc(y,Te,z,me,b);if(0>ae){var Ye=-1;break e}o+=ae,typeof b<"u"&&(b+=ae)}Ye=o}return Ie[d>>2]=Ye,0}catch(ut){if(typeof Be>"u"||ut.name!=="ErrnoError")throw ut;return ut.Ka}}},j=function(){function i(u){return j=u.exports,tt=j.I,Ae(),Ar=j.Aa,mr.unshift(j.J),at--,f.monitorRunDependencies?.(at),at==0&&zr&&(u=zr,zr=null,u()),j}var o={a:gp};if(at++,f.monitorRunDependencies?.(at),f.instantiateWasm)try{return f.instantiateWasm(o,i)}catch(u){return ne(`Module.instantiateWasm callback failed with error: ${u}`),!1}return ds(o,function(u){i(u.instance)}),{}}();f._sqlite3_free=i=>(f._sqlite3_free=j.K)(i),f._sqlite3_value_text=i=>(f._sqlite3_value_text=j.L)(i);var $c=()=>($c=j.M)();f._sqlite3_prepare_v2=(i,o,u,d,y)=>(f._sqlite3_prepare_v2=j.N)(i,o,u,d,y),f._sqlite3_step=i=>(f._sqlite3_step=j.O)(i),f._sqlite3_finalize=i=>(f._sqlite3_finalize=j.P)(i),f._sqlite3_reset=i=>(f._sqlite3_reset=j.Q)(i),f._sqlite3_clear_bindings=i=>(f._sqlite3_clear_bindings=j.R)(i),f._sqlite3_value_blob=i=>(f._sqlite3_value_blob=j.S)(i),f._sqlite3_value_bytes=i=>(f._sqlite3_value_bytes=j.T)(i),f._sqlite3_value_double=i=>(f._sqlite3_value_double=j.U)(i),f._sqlite3_value_int=i=>(f._sqlite3_value_int=j.V)(i),f._sqlite3_value_type=i=>(f._sqlite3_value_type=j.W)(i),f._sqlite3_result_blob=(i,o,u,d)=>(f._sqlite3_result_blob=j.X)(i,o,u,d),f._sqlite3_result_double=(i,o)=>(f._sqlite3_result_double=j.Y)(i,o),f._sqlite3_result_error=(i,o,u)=>(f._sqlite3_result_error=j.Z)(i,o,u),f._sqlite3_result_int=(i,o)=>(f._sqlite3_result_int=j._)(i,o),f._sqlite3_result_int64=(i,o,u)=>(f._sqlite3_result_int64=j.$)(i,o,u),f._sqlite3_result_null=i=>(f._sqlite3_result_null=j.aa)(i),f._sqlite3_result_text=(i,o,u,d)=>(f._sqlite3_result_text=j.ba)(i,o,u,d),f._sqlite3_aggregate_context=(i,o)=>(f._sqlite3_aggregate_context=j.ca)(i,o),f._sqlite3_column_count=i=>(f._sqlite3_column_count=j.da)(i),f._sqlite3_data_count=i=>(f._sqlite3_data_count=j.ea)(i),f._sqlite3_column_blob=(i,o)=>(f._sqlite3_column_blob=j.fa)(i,o),f._sqlite3_column_bytes=(i,o)=>(f._sqlite3_column_bytes=j.ga)(i,o),f._sqlite3_column_double=(i,o)=>(f._sqlite3_column_double=j.ha)(i,o),f._sqlite3_column_text=(i,o)=>(f._sqlite3_column_text=j.ia)(i,o),f._sqlite3_column_type=(i,o)=>(f._sqlite3_column_type=j.ja)(i,o),f._sqlite3_column_name=(i,o)=>(f._sqlite3_column_name=j.ka)(i,o),f._sqlite3_bind_blob=(i,o,u,d,y)=>(f._sqlite3_bind_blob=j.la)(i,o,u,d,y),f._sqlite3_bind_double=(i,o,u)=>(f._sqlite3_bind_double=j.ma)(i,o,u),f._sqlite3_bind_int=(i,o,u)=>(f._sqlite3_bind_int=j.na)(i,o,u),f._sqlite3_bind_text=(i,o,u,d,y)=>(f._sqlite3_bind_text=j.oa)(i,o,u,d,y),f._sqlite3_bind_parameter_index=(i,o)=>(f._sqlite3_bind_parameter_index=j.pa)(i,o),f._sqlite3_sql=i=>(f._sqlite3_sql=j.qa)(i),f._sqlite3_normalized_sql=i=>(f._sqlite3_normalized_sql=j.ra)(i),f._sqlite3_errmsg=i=>(f._sqlite3_errmsg=j.sa)(i),f._sqlite3_exec=(i,o,u,d,y)=>(f._sqlite3_exec=j.ta)(i,o,u,d,y),f._sqlite3_changes=i=>(f._sqlite3_changes=j.ua)(i),f._sqlite3_close_v2=i=>(f._sqlite3_close_v2=j.va)(i),f._sqlite3_create_function_v2=(i,o,u,d,y,b,C,z,me)=>(f._sqlite3_create_function_v2=j.wa)(i,o,u,d,y,b,C,z,me),f._sqlite3_open=(i,o)=>(f._sqlite3_open=j.xa)(i,o);var Do=f._malloc=i=>(Do=f._malloc=j.ya)(i),Lo=f._free=i=>(Lo=f._free=j.za)(i);f._RegisterExtensionFunctions=i=>(f._RegisterExtensionFunctions=j.Ba)(i);var Qc=(i,o)=>(Qc=j.Ca)(i,o),bs=()=>(bs=j.Da)(),vs=i=>(vs=j.Ea)(i),Zr=i=>(Zr=j.Fa)(i);f.stackAlloc=Zr,f.stackSave=bs,f.stackRestore=vs,f.cwrap=(i,o,u,d)=>{var y=!u||u.every(b=>b==="number"||b==="boolean");return o!=="string"&&y&&!d?f["_"+i]:function(){return Np(i,o,u,arguments)}},f.addFunction=Mo,f.removeFunction=wn,f.UTF8ToString=A,f.ALLOC_NORMAL=Ao,f.allocate=Ro,f.allocateUTF8OnStack=Mu;var Po;zr=function i(){Po||jc(),Po||(zr=i)};function jc(){function i(){if(!Po&&(Po=!0,f.calledRun=!0,!Gr)){if(f.noFSInit||Lc||(Lc=!0,Dc(),f.stdin=f.stdin,f.stdout=f.stdout,f.stderr=f.stderr,f.stdin?ws("stdin",f.stdin):Eu("/dev/tty","/dev/stdin"),f.stdout?ws("stdout",null,f.stdout):Eu("/dev/tty","/dev/stdout"),f.stderr?ws("stderr",null,f.stderr):Eu("/dev/tty1","/dev/stderr"),yn("/dev/stdin",0),yn("/dev/stdout",1),yn("/dev/stderr",1)),bc=!1,x(mr),f.onRuntimeInitialized&&f.onRuntimeInitialized(),f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var o=f.postRun.shift();Ii.unshift(o)}x(Ii)}}if(!(0<at)){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)kr();x(qe),0<at||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),i()},1)):i())}}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return jc(),m}),r)};t.exports=s,t.exports.default=s})(tp);var mg=tp.exports;const yg=hg(mg),wg=""+new URL("sql-wasm-785JABKZ.wasm",import.meta.url).href,Ng="sqlitevfs",On=new Map,gg=2048,bg=65536;class vg{constructor(e){ee(this,"_data");ee(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const s=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(s),s.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,s=Math.min(bg,Math.max(gg,this._data.length)),a=new Uint8Array(this._data.length+Math.max(s,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const xg=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,hc=new Promise((t,e)=>{const r=xg.open(Ng,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function Og(t){const e=await hc,r=await new Promise((s,a)=>{const h=e.transaction("files","readonly").objectStore("files").get(t);h.onsuccess=()=>s(h.result),h.onerror=()=>a(h.error)});if(r&&!On.has(t)){const s=new vg(r.data);return On.set(t,s),s}else return On.has(t)?On.get(t):null}async function Cg(t,e){const r=await hc;await new Promise((s,a)=>{const h=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});h.onsuccess=()=>s(!0),h.onerror=()=>a(h.error)})}async function ed(t){const e=await hc;await new Promise((r,s)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>s(l.error)})}async function qg(t,e){if(await Cg(t,e),On.has(t)){const r=On.get(t);r.truncate(0),r.write(0,e)}}var Wg=class extends sc{constructor(e){super();ee(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:s,...a}=r,l=this.serializer(s);return s===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},rp=t=>{if(ip(t)||typeof t=="string")return t;if(typeof t=="boolean")return""+t;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},_g=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,Tg=t=>{if(ip(t))return t;if(typeof t=="string"){if(t==="true")return!0;if(t==="false")return!1;if(_g.test(t))return new Date(t);if(t[0]==="{"&&t[t.length-1]==="}"||t[0]==="["&&t[t.length-1]==="]")try{return JSON.parse(t)}catch{}return t}};function ip(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var Ig=class{constructor(t={}){ee(this,"transformer");ee(this,"deserializer");ee(this,"skipNodeSet");ee(this,"ctx");const{deserializer:e=Tg,serializer:r=rp,skipNodeKind:s=[]}=t;this.transformer=new Wg(r),this.deserializer=e,s.length&&(this.skipNodeSet=new Set(s),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:this.parseRows(t.rows)}}parseRows(t){const e=[];for(const r of t){const s={};for(const[a,l]of Object.entries(r))s[a]=this.deserializer(l);e.push(s)}return e}};function td(t){const{logger:e,merge:r,logQueryNode:s}=t;return a=>{const{level:l,queryDurationMillis:h,query:{parameters:m,sql:N,query:f}}=a,v="__Q__",_=l==="error"?a.error:void 0;let R=N.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&m.forEach(pe=>{let Q=pe;pe instanceof Date&&(Q=pe.toLocaleString()),typeof Q=="string"&&(Q=`'${Q}'`.replace(/\?/g,v)),R=R.replace(/\?/,Q)});const B={sql:R.replace(new RegExp(v,"g"),"?"),params:m,duration:h,error:_};s&&(B.queryNode=f),e(B)}}async function Eg(t){const{rows:e}=await t.executeQuery(Tr.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function rd(t,e){if(e)return await t.executeQuery(Tr.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(Tr.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function kg(t){return`__pre_${t}`}function Sg(t){return typeof t=="string"&&t.startsWith("__pre_")?t.slice(6):void 0}async function Ag(t,e){const r=e||`sp_${Date.now()%1e8}`;return await ot`savepoint ${ot.raw(r)}`.execute(t),{release:async()=>{await ot`release savepoint ${ot.raw(r)}`.execute(t)},rollback:async()=>{await ot`rollback to savepoint ${ot.raw(r)}`.execute(t)}}}async function Rg(t,e,r){const{release:s,rollback:a}=await Ag(t,r);try{const l=await e(t);return await s(),l}catch(l){throw await a(),l}}function Mg(t){return{selectFrom:e=>t().selectFrom(e),insertInto:e=>t().insertInto(e),updateTable:e=>t().updateTable(e),deleteFrom:e=>t().deleteFrom(e)}}var Dg=class extends Error{constructor(){super("db file maybe broken")}};function Lg(t){return t.toOperationNode().kind==="SelectQueryNode"}var Pg=class{constructor(t){ee(this,"_kysely");ee(this,"trxCount",0);ee(this,"trx");ee(this,"logger");ee(this,"executor");ee(this,"serializer",rp);const{dialect:e,logger:r,onQuery:s,plugins:a=[],serializerPluginOptions:l,executorFn:h=Mg}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new Ig(l));let m;s===!0?m=td({logger:this.logger?.debug||console.log,merge:!0}):s&&(m=td(s)),this._kysely=new ro({dialect:e,log:m,plugins:a}),this.executor=h(()=>this.kysely)}get kysely(){return this.trx||this._kysely}async syncDB(t,e){try{if(e&&!await Eg(this._kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new Dg};const r=await t(this._kysely,this.logger);return this.logger?.info("table updated"),r}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await Rg(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trxCount--)):await this._kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.onCommit?.(r),r)).catch(async r=>{await e.onRollback?.(r),this.logError(r,e.errorMsg)}).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.executor).execute():await this.kysely.executeQuery(t)}async executeTakeFirst(t){let e=t(this.executor);return Lg(e)&&(e=e.limit(1)),await e.executeTakeFirst()}precompile(t=e=>({kind:e.kind})){return this.logger?.debug?.("precompile"),{build:e=>{let r;const s=()=>r=null;return{[Symbol.dispose]:s,dispose:s,compile:a=>{if(!r){const{parameters:l,sql:h,query:m}=e(this.executor,kg).compile();r={sql:h,query:t(m),parameters:l}}return{...r,parameters:r.parameters.map(l=>{const h=Sg(l);return h?this.serializer(a[h]):l})}}}}}}async raw(t,e){return typeof t=="string"?await this.kysely.executeQuery(Tr.raw(t,e)):await t.execute(this.kysely)}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this._kysely.destroy(),this.trx=void 0}},np="__TIME_TRIGGER__";function Bg(t,e){const{create:r,update:s}=e?.timeTrigger||{},a={type:"date",defaultTo:np};r===!0?t.createAt=a:r&&(t[r]=a),s===!0?t.updateAt={...a,notNull:!0}:s&&(t[s]={...a,notNull:!0});const l=e?.softDelete,h={type:"int",defaultTo:0};return l===!0?t.isDeleted=h:l&&(t[l]=h),{columns:t,...e}}function sp(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function Tl(t){return Array.isArray(t)?t:[t]}function Fg(t){return typeof t=="function"}async function Xu(t,e){await t.schema.dropTable(e).execute()}async function id(t,e,r){const{index:s,...a}=r,l=await ap(t,e,a);await up(t,e,l),await op(t,e,s)}async function op(t,e,r){for(const s of r||[]){const a=Tl(s);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function ap(t,e,{columns:r,primary:s,timeTrigger:a,unique:l},h=!1){const m=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,f=t.schema.createTable(e);h&&(f=f.temporary());for(const[v,_]of Object.entries(r)){let R="text";const{type:B,notNull:pe,defaultTo:Q}=_,Se=sp(B);R=Se.dataType,f=f.addColumn(v,R,J=>Se.isIncrements?(N=!0,m&&(m.triggerKey=v),J.autoIncrement().primaryKey()):Q===np?(m&&pe&&(m.update=v),J.defaultTo(ot`CURRENT_TIMESTAMP`)):(pe===!0&&(J=J.notNull()),Q!==void 0&&(J=J.defaultTo(Fg(Q)?Q(ot):Q)),J))}if(!N&&s){const v=Tl(s);f=f.addPrimaryKeyConstraint(`pk#${v.join("#")}`,v)}for(const v of l||[]){const _=Tl(v);f=f.addUniqueConstraint(`un#${_.join("#")}`,_)}return await f.ifNotExists().execute(),m}async function up(t,e,r){if(!r||!r.update)return;const{triggerKey:s,update:a}=r,l=`tgr_${e}_${a}`;await ot`create trigger if not exists ${ot.ref(l)}
after update
on ${ot.table(e)}
begin
  update ${ot.table(e)}
  set ${ot.ref(a)} = CURRENT_TIMESTAMP
  where ${ot.ref(s)} = NEW.${ot.ref(s)};
end`.execute(t)}async function Ug(t,e,r){await t.schema.alterTable(e).renameTo(r).execute()}function $g(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,s,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:s,primary:void 0,unique:[]},h=a.matchAll(r);for(const m of h){const[,N,f,v]=m;if(N.startsWith("pk#")){const[,..._]=N.split("#");l.primary=_}else if(N.startsWith("un#")){const[,..._]=N.split("#");l.unique.push(_)}else l.columns[N]={type:f,notNull:!!v}}return l}async function Qg(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",zf).where("name","!=",Yf).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(h=>l("name","not like",`${h}%`))))).select(["name","sql","type"]).$castTo().execute(),s={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:h}of r)l&&(h==="table"?s.existTables[a]=$g(l):h==="index"?s.indexList.push(a):s.triggerList.push(a));return s}async function jg(t,e,r={},s){const{truncateIfExists:a=[],log:l,version:{current:h,skipSyncWhenSame:m}={},excludeTablePrefix:N,onSyncSuccess:f,onSyncFail:v}=r;if(h){if(m&&h===await rd(t))return{ready:!0};await rd(t,h)}const _=J=>l&&s?.debug(J),{existTables:R,indexList:B,triggerList:pe}=await Qg(t,N);_("====== update tables start ======");const Q=new Set(Array.isArray(a)?a:a?Object.keys(R):[]);return await t.transaction().execute(async J=>{for(const ie of B)await J.schema.dropIndex(ie).ifExists().execute();for(const ie of pe)await ot`drop trigger if exists ${ot.ref(ie)}`.execute(J);for(const[ie,de]of Object.entries(R))if(!(ie in e))_(`remove table: ${ie}`),await Xu(J,ie);else{_(`diff table: ${ie}`);try{await Se(J,ie,de,e[ie])}catch(Ce){throw s?.error(`fail to sync ${ie}`,Ce),Ce}}for(const[ie,de]of Object.entries(e))ie in R||(_(`create table: ${ie}`),await id(J,ie,de))}).then(()=>(f?.(t),_("======= update tables success ======="),{ready:!0})).catch(J=>(v?.(J),_("======= update tables fail ======="),{ready:!1,error:J}));async function Se(J,ie,de,Ce){if(Q.has(ie)){await Xu(J,ie),await id(J,ie,Ce),_("clear and sync structure");return}const{index:ht,...ne}=Ce,Ke=Vg(de.columns,Ce.columns);if(Ke.length===Object.keys(de.columns).length){_("same table structure, skip");return}_("different table structure, update");const tt=`_temp_${ie}`,Gr=await ap(J,tt,ne);Ke.length&&await J.insertInto(tt).columns(Ke).expression(Te=>Te.selectFrom(ie).select(Ke)).execute(),await Xu(J,ie),await Ug(J,tt,ie),await op(J,ie,ht),await up(J,ie,Gr),_(`restore columns: ${Ke}`)}}function Vg(t,e){const r=[];for(const[s,a]of Object.entries(e))s in t&&sp(a.type).dataType===t[s].type&&(a.notNull||!1)===(t[s].notNull||!1)&&r.push(s);return r}function Jg(t,e={}){const{log:r}=e;return(s,a)=>jg(s,t,e,r?a:void 0)}const Kg={test:Bg({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function lp(t){const e=new Pg({dialect:t}),r=await e.syncDB(Jg(Kg));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let s=0;s<10;s++)await e.transaction(async()=>{await e.transaction(async()=>{if(s>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(s=>s.selectFrom("test").selectAll()).then(async s=>(await e.destroy(),console.log(s),s))}const Hg=new cg({async database(){const t=await yg({locateFile:()=>wg});return new t.Database(await Og("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),qg("sqljs",t)},isThrottle:!0}});function Gg(){const t=Sm();function e(){lp(Hg).then(r=>{t.value=r})}return{result:t,run:e}}function zg(t){return new Worker(""+new URL("sqljsWorker-B0ZVg4QI.js",import.meta.url).href,{type:"module",name:t?.name})}function Yg(t){return new Worker(""+new URL("officialWasmWorker-CFRlwQ8l.js",import.meta.url).href,{type:"module",name:t?.name})}var Xg=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let s;e?r?(s=t.get(e))&&s.splice(s.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(s=>s(...r))},once(e,r){let s=(...a)=>{r(...a),this.off(e,s)};this.on(e,s)}});function Zg(){return"locks"in navigator}async function cp(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),s=await new Promise((a,l)=>{r.onmessage=({data:h})=>{a(h)},r.onerror=h=>{h.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),s}catch{return!1}}function hp(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function nd(t,e){return typeof t=="function"?t(e):t}function eb(t){return t?new Worker(new URL(""+new URL("worker-Di1Eo8-K.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-Di0OJL7-.js",import.meta.url).href,import.meta.url))}function tb(t){return t?new URL(""+new URL("wa-sqlite-async-CE83rzeA.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-DBHS7kZ3.wasm",import.meta.url).href,import.meta.url).href}var rb=class{constructor(t){ee(this,"config");ee(this,"worker");ee(this,"connection");ee(this,"connectionMutex",new ib);ee(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await cp():!1;this.mitt=Xg(),this.worker=nd(this.config.worker||eb,t||hp()),this.worker.onmessage=({data:[e,...r]})=>{this.mitt?.emit(e,...r)},this.worker.postMessage([0,this.config.fileName,nd(this.config.url||tb,!t),t]),await new Promise((e,r)=>{this.mitt?.once(0,(s,a)=>{a?r(a):e()})}),this.connection=new nb(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(Tr.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage([2]),new Promise((t,e)=>{this.mitt?.once(2,(r,s)=>{s?e(s):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},ib=class{constructor(){ee(this,"promise");ee(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},nb=class{constructor(t,e){ee(this,"worker");ee(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:s}=t,a=fe.is(s);return this.worker.postMessage([1,a,r,e]),new Promise((l,h)=>{!this.mitt&&h(new Error("kysely instance has been destroyed")),this.mitt.once(1,(m,N)=>{!N&&m?l(m):h(N)})})}},wo,od,sb=(od=class{constructor(t){O(this,wo,void 0);k(this,wo,t)}createDriver(){return new rb(n(this,wo))}createQueryCompiler(){return new Gf}createAdapter(){return new ep}createIntrospector(t){return new Xf(t)}},wo=new WeakMap,od);const ob=new sb({fileName:"wa-sqlite-worker-test"});async function ab(){console.log("start wa-sqlite-worker test"),lp(ob).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=hp(),r=Zg(),s=await cp();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",s)})}const ub=st("h1",null,[Hs(" test "),st("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Hs(" WASM dialect ")],-1),lb=st("br",null,null,-1),cb=st("h3",null,"see worker result in console",-1),hb=st("h3",null,[Hs(" you can explore "),st("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Hs(" file using "),st("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),db=st("br",null,null,-1),fb={class:"buttons"},pb=st("br",null,null,-1),mb=st("div",null," result run in main thread: ",-1),yb=ey({__name:"App",setup(t){const e=new zg,{result:r,run:s}=Gg(),a=new Yg;function l(){s()}function h(){e.postMessage("")}function m(){a.postMessage("")}function N(){ab()}async function f(){try{(await window.indexedDB.databases()).forEach(R=>window.indexedDB.deleteDatabase(R.name))}catch{}}async function v(){console.clear(),await ed("sqljs"),await ed("sqljsWorker"),await f();const _=await navigator.storage?.getDirectory();try{await _.removeEntry("test.db")}catch{}try{await _.removeEntry("test.db-journal")}catch{}try{await _.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(_,R)=>(Sy(),My(xr,null,[ub,lb,cb,hb,db,st("div",fb,[st("button",{onClick:R[0]||(R[0]=B=>l())}," test sqljs in main thread "),st("button",{onClick:R[1]||(R[1]=B=>h())}," test sqljs in Worker "),st("button",{onClick:R[2]||(R[2]=B=>m())}," test officialWasm in Worker "),st("button",{onClick:R[3]||(R[3]=B=>N())}," test wa-sqlite in Worker (Better Compability) "),st("button",{onClick:R[4]||(R[4]=B=>v())}," clear ")]),pb,mb,st("pre",null,""+am(kd(r))+`
  `,1)],64))}});bw(yb).mount("#root");
