var _p=Object.defineProperty;var Wp=(t,e,r)=>e in t?_p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ee=(t,e,r)=>(Wp(t,typeof e!="symbol"?e+"":e,r),r),gu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(gu(t,e,"read from private field"),r?r.call(t):e.get(t)),q=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},S=(t,e,r,i)=>(gu(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var xe=(t,e,r)=>(gu(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function hl(t,e){const r=new Set(t.split(","));return e?i=>r.has(i.toLowerCase()):i=>r.has(i)}const Fe={},yi=[],Kt=()=>{},Ip=()=>!1,Ka=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fl=t=>t.startsWith("onUpdate:"),pt=Object.assign,pl=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Ep=Object.prototype.hasOwnProperty,pe=(t,e)=>Ep.call(t,e),te=Array.isArray,wi=t=>Ha(t)==="[object Map]",Ud=t=>Ha(t)==="[object Set]",oe=t=>typeof t=="function",ut=t=>typeof t=="string",Gi=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",$d=t=>(Ve(t)||oe(t))&&oe(t.then)&&oe(t.catch),Qd=Object.prototype.toString,Ha=t=>Qd.call(t),Tp=t=>Ha(t).slice(8,-1),jd=t=>Ha(t)==="[object Object]",ml=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ao=hl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ga=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},kp=/-(\w)/g,Ui=Ga(t=>t.replace(kp,(e,r)=>r?r.toUpperCase():"")),Sp=/\B([A-Z])/g,zi=Ga(t=>t.replace(Sp,"-$1").toLowerCase()),Vd=Ga(t=>t.charAt(0).toUpperCase()+t.slice(1)),bu=Ga(t=>t?`on${Vd(t)}`:""),mn=(t,e)=>!Object.is(t,e),vu=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},$o=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Ap=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Dc;const Jd=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yl(t){if(te(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],a=ut(i)?Lp(i):yl(i);if(a)for(const l in a)e[l]=a[l]}return e}else if(ut(t)||Ve(t))return t}const Rp=/;(?![^(]*\))/g,Dp=/:([^]+)/,Pp=/\/\*[^]*?\*\//g;function Lp(t){const e={};return t.replace(Pp,"").split(Rp).forEach(r=>{if(r){const i=r.split(Dp);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function wl(t){let e="";if(ut(t))e=t;else if(te(t))for(let r=0;r<t.length;r++){const i=wl(t[r]);i&&(e+=i+" ")}else if(Ve(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Mp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bp=hl(Mp);function Kd(t){return!!t||t===""}const Fp=t=>ut(t)?t:t==null?"":te(t)||Ve(t)&&(t.toString===Qd||!oe(t.toString))?JSON.stringify(t,Hd,2):String(t),Hd=(t,e)=>e&&e.__v_isRef?Hd(t,e.value):wi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,a],l)=>(r[xu(i,l)+" =>"]=a,r),{})}:Ud(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>xu(r))}:Gi(e)?xu(e):Ve(e)&&!te(e)&&!jd(e)?String(e):e,xu=(t,e="")=>{var r;return Gi(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};let er;class Up{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=er,!e&&er&&(this.index=(er.scopes||(er.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=er;try{return er=this,e()}finally{er=r}}}on(){er=this}off(){er=this.parent}stop(e){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function $p(t,e=er){e&&e.active&&e.effects.push(t)}function Qp(){return er}let Gn;class Nl{constructor(e,r,i,a){this.fn=e,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,$p(this,a)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,ei();for(const e of this.deps)if(e.computed&&(jp(e.computed),this._dirtyLevel>=2))break;ti(),this._queryings--}return this._dirtyLevel>=2}set dirty(e){this._dirtyLevel=e?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=dn,r=Gn;try{return dn=!0,Gn=this,this._runnings++,Pc(this),this.fn()}finally{Lc(this),this._runnings--,Gn=r,dn=e}}stop(){var e;this.active&&(Pc(this),Lc(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function jp(t){return t.value}function Pc(t){t._trackId++,t._depsLength=0}function Lc(t){if(t.deps&&t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Gd(t.deps[e],t);t.deps.length=t._depsLength}}function Gd(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let dn=!0,Au=0;const zd=[];function ei(){zd.push(dn),dn=!1}function ti(){const t=zd.pop();dn=t===void 0?!0:t}function gl(){Au++}function bl(){for(Au--;!Au&&Ru.length;)Ru.shift()()}function Yd(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&Gd(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ru=[];function Xd(t,e,r){gl();for(const i of t.keys())if(!(!i.allowRecurse&&i._runnings)&&i._dirtyLevel<e&&(!i._runnings||e!==2)){const a=i._dirtyLevel;i._dirtyLevel=e,a===0&&(!i._queryings||e!==2)&&(i.trigger(),i.scheduler&&Ru.push(i.scheduler))}bl()}const Zd=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},Du=new WeakMap,zn=Symbol(""),Pu=Symbol("");function At(t,e,r){if(dn&&Gn){let i=Du.get(t);i||Du.set(t,i=new Map);let a=i.get(r);a||i.set(r,a=Zd(()=>i.delete(r))),Yd(Gn,a)}}function Mr(t,e,r,i,a,l){const f=Du.get(t);if(!f)return;let y=[];if(e==="clear")y=[...f.values()];else if(r==="length"&&te(t)){const N=Number(i);f.forEach((d,x)=>{(x==="length"||!Gi(x)&&x>=N)&&y.push(d)})}else switch(r!==void 0&&y.push(f.get(r)),e){case"add":te(t)?ml(r)&&y.push(f.get("length")):(y.push(f.get(zn)),wi(t)&&y.push(f.get(Pu)));break;case"delete":te(t)||(y.push(f.get(zn)),wi(t)&&y.push(f.get(Pu)));break;case"set":wi(t)&&y.push(f.get(zn));break}gl();for(const N of y)N&&Xd(N,3);bl()}const Vp=hl("__proto__,__v_isRef,__isVue"),eh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gi)),Mc=Jp();function Jp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=be(this);for(let l=0,f=this.length;l<f;l++)At(i,"get",l+"");const a=i[e](...r);return a===-1||a===!1?i[e](...r.map(be)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){ei(),gl();const i=be(this)[e].apply(this,r);return bl(),ti(),i}}),t}function Kp(t){const e=be(this);return At(e,"has",t),e.hasOwnProperty(t)}class th{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,i){const a=this._isReadonly,l=this._shallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(a?l?om:sh:l?ih:nh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const f=te(e);if(!a){if(f&&pe(Mc,r))return Reflect.get(Mc,r,i);if(r==="hasOwnProperty")return Kp}const y=Reflect.get(e,r,i);return(Gi(r)?eh.has(r):Vp(r))||(a||At(e,"get",r),l)?y:Rt(y)?f&&ml(r)?y:y.value:Ve(y)?a?oh(y):Ol(y):y}}class rh extends th{constructor(e=!1){super(!1,e)}set(e,r,i,a){let l=e[r];if(!this._shallow){const N=$i(l);if(!Qo(i)&&!$i(i)&&(l=be(l),i=be(i)),!te(e)&&Rt(l)&&!Rt(i))return N?!1:(l.value=i,!0)}const f=te(e)&&ml(r)?Number(r)<e.length:pe(e,r),y=Reflect.set(e,r,i,a);return e===be(a)&&(f?mn(i,l)&&Mr(e,"set",r,i):Mr(e,"add",r,i)),y}deleteProperty(e,r){const i=pe(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&i&&Mr(e,"delete",r,void 0),a}has(e,r){const i=Reflect.has(e,r);return(!Gi(r)||!eh.has(r))&&At(e,"has",r),i}ownKeys(e){return At(e,"iterate",te(e)?"length":zn),Reflect.ownKeys(e)}}class Hp extends th{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Gp=new rh,zp=new Hp,Yp=new rh(!0),vl=t=>t,za=t=>Reflect.getPrototypeOf(t);function Oo(t,e,r=!1,i=!1){t=t.__v_raw;const a=be(t),l=be(e);r||(mn(e,l)&&At(a,"get",e),At(a,"get",l));const{has:f}=za(a),y=i?vl:r?ql:ks;if(f.call(a,e))return y(t.get(e));if(f.call(a,l))return y(t.get(l));t!==a&&t.get(e)}function Co(t,e=!1){const r=this.__v_raw,i=be(r),a=be(t);return e||(mn(t,a)&&At(i,"has",t),At(i,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function qo(t,e=!1){return t=t.__v_raw,!e&&At(be(t),"iterate",zn),Reflect.get(t,"size",t)}function Bc(t){t=be(t);const e=be(this);return za(e).has.call(e,t)||(e.add(t),Mr(e,"add",t,t)),this}function Fc(t,e){e=be(e);const r=be(this),{has:i,get:a}=za(r);let l=i.call(r,t);l||(t=be(t),l=i.call(r,t));const f=a.call(r,t);return r.set(t,e),l?mn(e,f)&&Mr(r,"set",t,e):Mr(r,"add",t,e),this}function Uc(t){const e=be(this),{has:r,get:i}=za(e);let a=r.call(e,t);a||(t=be(t),a=r.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return a&&Mr(e,"delete",t,void 0),l}function $c(){const t=be(this),e=t.size!==0,r=t.clear();return e&&Mr(t,"clear",void 0,void 0),r}function _o(t,e){return function(i,a){const l=this,f=l.__v_raw,y=be(f),N=e?vl:t?ql:ks;return!t&&At(y,"iterate",zn),f.forEach((d,x)=>i.call(a,N(d),N(x),l))}}function Wo(t,e,r){return function(...i){const a=this.__v_raw,l=be(a),f=wi(l),y=t==="entries"||t===Symbol.iterator&&f,N=t==="keys"&&f,d=a[t](...i),x=r?vl:e?ql:ks;return!e&&At(l,"iterate",N?Pu:zn),{next(){const{value:_,done:R}=d.next();return R?{value:_,done:R}:{value:y?[x(_[0]),x(_[1])]:x(_),done:R}},[Symbol.iterator](){return this}}}}function Gr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Xp(){const t={get(l){return Oo(this,l)},get size(){return qo(this)},has:Co,add:Bc,set:Fc,delete:Uc,clear:$c,forEach:_o(!1,!1)},e={get(l){return Oo(this,l,!1,!0)},get size(){return qo(this)},has:Co,add:Bc,set:Fc,delete:Uc,clear:$c,forEach:_o(!1,!0)},r={get(l){return Oo(this,l,!0)},get size(){return qo(this,!0)},has(l){return Co.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:_o(!0,!1)},i={get(l){return Oo(this,l,!0,!0)},get size(){return qo(this,!0)},has(l){return Co.call(this,l,!0)},add:Gr("add"),set:Gr("set"),delete:Gr("delete"),clear:Gr("clear"),forEach:_o(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Wo(l,!1,!1),r[l]=Wo(l,!0,!1),e[l]=Wo(l,!1,!0),i[l]=Wo(l,!0,!0)}),[t,r,e,i]}const[Zp,em,tm,rm]=Xp();function xl(t,e){const r=e?t?rm:tm:t?em:Zp;return(i,a,l)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?i:Reflect.get(pe(r,a)&&a in i?r:i,a,l)}const nm={get:xl(!1,!1)},im={get:xl(!1,!0)},sm={get:xl(!0,!1)},nh=new WeakMap,ih=new WeakMap,sh=new WeakMap,om=new WeakMap;function am(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function um(t){return t.__v_skip||!Object.isExtensible(t)?0:am(Tp(t))}function Ol(t){return $i(t)?t:Cl(t,!1,Gp,nm,nh)}function lm(t){return Cl(t,!1,Yp,im,ih)}function oh(t){return Cl(t,!0,zp,sm,sh)}function Cl(t,e,r,i,a){if(!Ve(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=a.get(t);if(l)return l;const f=um(t);if(f===0)return t;const y=new Proxy(t,f===2?i:r);return a.set(t,y),y}function Ni(t){return $i(t)?Ni(t.__v_raw):!!(t&&t.__v_isReactive)}function $i(t){return!!(t&&t.__v_isReadonly)}function Qo(t){return!!(t&&t.__v_isShallow)}function ah(t){return Ni(t)||$i(t)}function be(t){const e=t&&t.__v_raw;return e?be(e):t}function uh(t){return $o(t,"__v_skip",!0),t}const ks=t=>Ve(t)?Ol(t):t,ql=t=>Ve(t)?oh(t):t;class lh{constructor(e,r,i,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Nl(()=>e(this._value),()=>Lu(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=i}get value(){const e=be(this);return ch(e),(!e._cacheable||e.effect.dirty)&&mn(e._value,e._value=e.effect.run())&&Lu(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function cm(t,e,r=!1){let i,a;const l=oe(t);return l?(i=t,a=Kt):(i=t.get,a=t.set),new lh(i,a,l||!a,r)}function ch(t){dn&&Gn&&(t=be(t),Yd(Gn,t.dep||(t.dep=Zd(()=>t.dep=void 0,t instanceof lh?t:void 0))))}function Lu(t,e=3,r){t=be(t);const i=t.dep;i&&Xd(i,e)}function Rt(t){return!!(t&&t.__v_isRef===!0)}function dm(t){return hm(t,!1)}function hm(t,e){return Rt(t)?t:new fm(t,e)}class fm{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:be(e),this._value=r?e:ks(e)}get value(){return ch(this),this._value}set value(e){const r=this.__v_isShallow||Qo(e)||$i(e);e=r?e:be(e),mn(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:ks(e),Lu(this,3))}}function dh(t){return Rt(t)?t.value:t}const pm={get:(t,e,r)=>dh(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const a=t[e];return Rt(a)&&!Rt(r)?(a.value=r,!0):Reflect.set(t,e,r,i)}};function hh(t){return Ni(t)?t:new Proxy(t,pm)}function hn(t,e,r,i){let a;try{a=i?t(...i):t()}catch(l){Ya(l,e,r)}return a}function cr(t,e,r,i){if(oe(t)){const l=hn(t,e,r,i);return l&&$d(l)&&l.catch(f=>{Ya(f,e,r)}),l}const a=[];for(let l=0;l<t.length;l++)a.push(cr(t[l],e,r,i));return a}function Ya(t,e,r,i=!0){const a=e?e.vnode:null;if(e){let l=e.parent;const f=e.proxy,y=`https://vuejs.org/errors/#runtime-${r}`;for(;l;){const d=l.ec;if(d){for(let x=0;x<d.length;x++)if(d[x](t,f,y)===!1)return}l=l.parent}const N=e.appContext.config.errorHandler;if(N){hn(N,null,10,[t,f,y]);return}}mm(t,r,a,i)}function mm(t,e,r,i=!0){console.error(t)}let Ss=!1,Mu=!1;const wt=[];let vr=0;const gi=[];let Yr=null,Tn=0;const fh=Promise.resolve();let _l=null;function ym(t){const e=_l||fh;return t?e.then(this?t.bind(this):t):e}function wm(t){let e=vr+1,r=wt.length;for(;e<r;){const i=e+r>>>1,a=wt[i],l=As(a);l<t||l===t&&a.pre?e=i+1:r=i}return e}function Wl(t){(!wt.length||!wt.includes(t,Ss&&t.allowRecurse?vr+1:vr))&&(t.id==null?wt.push(t):wt.splice(wm(t.id),0,t),ph())}function ph(){!Ss&&!Mu&&(Mu=!0,_l=fh.then(yh))}function Nm(t){const e=wt.indexOf(t);e>vr&&wt.splice(e,1)}function gm(t){te(t)?gi.push(...t):(!Yr||!Yr.includes(t,t.allowRecurse?Tn+1:Tn))&&gi.push(t),ph()}function Qc(t,e,r=Ss?vr+1:0){for(;r<wt.length;r++){const i=wt[r];if(i&&i.pre){if(t&&i.id!==t.uid)continue;wt.splice(r,1),r--,i()}}}function mh(t){if(gi.length){const e=[...new Set(gi)].sort((r,i)=>As(r)-As(i));if(gi.length=0,Yr){Yr.push(...e);return}for(Yr=e,Tn=0;Tn<Yr.length;Tn++)Yr[Tn]();Yr=null,Tn=0}}const As=t=>t.id==null?1/0:t.id,bm=(t,e)=>{const r=As(t)-As(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function yh(t){Mu=!1,Ss=!0,wt.sort(bm);try{for(vr=0;vr<wt.length;vr++){const e=wt[vr];e&&e.active!==!1&&hn(e,null,14)}}finally{vr=0,wt.length=0,mh(),Ss=!1,_l=null,(wt.length||gi.length)&&yh()}}function vm(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||Fe;let a=r;const l=e.startsWith("update:"),f=l&&e.slice(7);if(f&&f in i){const x=`${f==="modelValue"?"model":f}Modifiers`,{number:_,trim:R}=i[x]||Fe;R&&(a=r.map(F=>ut(F)?F.trim():F)),_&&(a=r.map(Ap))}let y,N=i[y=bu(e)]||i[y=bu(Ui(e))];!N&&l&&(N=i[y=bu(zi(e))]),N&&cr(N,t,6,a);const d=i[y+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,cr(d,t,6,a)}}function wh(t,e,r=!1){const i=e.emitsCache,a=i.get(t);if(a!==void 0)return a;const l=t.emits;let f={},y=!1;if(!oe(t)){const N=d=>{const x=wh(d,e,!0);x&&(y=!0,pt(f,x))};!r&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!l&&!y?(Ve(t)&&i.set(t,null),null):(te(l)?l.forEach(N=>f[N]=null):pt(f,l),Ve(t)&&i.set(t,f),f)}function Xa(t,e){return!t||!Ka(e)?!1:(e=e.slice(2).replace(/Once$/,""),pe(t,e[0].toLowerCase()+e.slice(1))||pe(t,zi(e))||pe(t,e))}let Or=null,Nh=null;function jo(t){const e=Or;return Or=t,Nh=t&&t.type.__scopeId||null,e}function xm(t,e=Or,r){if(!e||t._n)return t;const i=(...a)=>{i._d&&Zc(-1);const l=jo(e);let f;try{f=t(...a)}finally{jo(l),i._d&&Zc(1)}return f};return i._n=!0,i._c=!0,i._d=!0,i}function Ou(t){const{type:e,vnode:r,proxy:i,withProxy:a,props:l,propsOptions:[f],slots:y,attrs:N,emit:d,render:x,renderCache:_,data:R,setupState:F,ctx:we,inheritAttrs:J}=t;let Te,B;const $e=jo(t);try{if(r.shapeFlag&4){const Be=a||i,lt=Be;Te=br(x.call(lt,Be,_,l,F,R,we)),B=N}else{const Be=e;Te=br(Be.length>1?Be(l,{attrs:N,slots:y,emit:d}):Be(l,null)),B=e.props?N:Om(N)}}catch(Be){ws.length=0,Ya(Be,t,1),Te=Yn(Rs)}let de=Te;if(B&&J!==!1){const Be=Object.keys(B),{shapeFlag:lt}=de;Be.length&&lt&7&&(f&&Be.some(fl)&&(B=Cm(B,f)),de=Qi(de,B))}return r.dirs&&(de=Qi(de),de.dirs=de.dirs?de.dirs.concat(r.dirs):r.dirs),r.transition&&(de.transition=r.transition),Te=de,jo($e),Te}const Om=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ka(r))&&((e||(e={}))[r]=t[r]);return e},Cm=(t,e)=>{const r={};for(const i in t)(!fl(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function qm(t,e,r){const{props:i,children:a,component:l}=t,{props:f,children:y,patchFlag:N}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&N>=0){if(N&1024)return!0;if(N&16)return i?jc(i,f,d):!!f;if(N&8){const x=e.dynamicProps;for(let _=0;_<x.length;_++){const R=x[_];if(f[R]!==i[R]&&!Xa(d,R))return!0}}}else return(a||y)&&(!y||!y.$stable)?!0:i===f?!1:i?f?jc(i,f,d):!0:!!f;return!1}function jc(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let a=0;a<i.length;a++){const l=i[a];if(e[l]!==t[l]&&!Xa(r,l))return!0}return!1}function _m({vnode:t,parent:e},r){if(r)for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const Wm=Symbol.for("v-ndc"),Im=t=>t.__isSuspense;function Em(t,e){e&&e.pendingBranch?te(t)?e.effects.push(...t):e.effects.push(t):gm(t)}const Tm=Symbol.for("v-scx"),km=()=>Do(Tm),Io={};function Cu(t,e,r){return gh(t,e,r)}function gh(t,e,{immediate:r,deep:i,flush:a,once:l,onTrack:f,onTrigger:y}=Fe){if(e&&l){const z=e;e=(...Oe)=>{z(...Oe),lt()}}const N=_t,d=z=>i===!0?z:di(z,i===!1?1:void 0);let x,_=!1,R=!1;if(Rt(t)?(x=()=>t.value,_=Qo(t)):Ni(t)?(x=()=>d(t),_=!0):te(t)?(R=!0,_=t.some(z=>Ni(z)||Qo(z)),x=()=>t.map(z=>{if(Rt(z))return z.value;if(Ni(z))return d(z);if(oe(z))return hn(z,N,2)})):oe(t)?e?x=()=>hn(t,N,2):x=()=>(F&&F(),cr(t,N,3,[we])):x=Kt,e&&i){const z=x;x=()=>di(z())}let F,we=z=>{F=de.onStop=()=>{hn(z,N,4),F=de.onStop=void 0}},J;if(ru)if(we=Kt,e?r&&cr(e,N,3,[x(),R?[]:void 0,we]):x(),a==="sync"){const z=km();J=z.__watcherHandles||(z.__watcherHandles=[])}else return Kt;let Te=R?new Array(t.length).fill(Io):Io;const B=()=>{if(!(!de.active||!de.dirty))if(e){const z=de.run();(i||_||(R?z.some((Oe,Ge)=>mn(Oe,Te[Ge])):mn(z,Te)))&&(F&&F(),cr(e,N,3,[z,Te===Io?void 0:R&&Te[0]===Io?[]:Te,we]),Te=z)}else de.run()};B.allowRecurse=!!e;let $e;a==="sync"?$e=B:a==="post"?$e=()=>Tt(B,N&&N.suspense):(B.pre=!0,N&&(B.id=N.uid),$e=()=>Wl(B));const de=new Nl(x,Kt,$e),Be=Qp(),lt=()=>{de.stop(),Be&&pl(Be.effects,de)};return e?r?B():Te=de.run():a==="post"?Tt(de.run.bind(de),N&&N.suspense):de.run(),J&&J.push(lt),lt}function Sm(t,e,r){const i=this.proxy,a=ut(t)?t.includes(".")?bh(i,t):()=>i[t]:t.bind(i,i);let l;oe(e)?l=e:(l=e.handler,r=e);const f=_t;ji(this);const y=gh(a,l.bind(i),r);return f?ji(f):Xn(),y}function bh(t,e){const r=e.split(".");return()=>{let i=t;for(let a=0;a<r.length&&i;a++)i=i[r[a]];return i}}function di(t,e,r=0,i){if(!Ve(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(i=i||new Set,i.has(t))return t;if(i.add(t),Rt(t))di(t.value,e,r,i);else if(te(t))for(let a=0;a<t.length;a++)di(t[a],e,r,i);else if(Ud(t)||wi(t))t.forEach(a=>{di(a,e,r,i)});else if(jd(t))for(const a in t)di(t[a],e,r,i);return t}function Wn(t,e,r,i){const a=t.dirs,l=e&&e.dirs;for(let f=0;f<a.length;f++){const y=a[f];l&&(y.oldValue=l[f].value);let N=y.dir[i];N&&(ei(),cr(N,r,8,[t.el,y,t,e]),ti())}}/*! #__NO_SIDE_EFFECTS__ */function Am(t,e){return oe(t)?pt({name:t.name},e,{setup:t}):t}const Ro=t=>!!t.type.__asyncLoader,vh=t=>t.type.__isKeepAlive;function Rm(t,e){xh(t,"a",e)}function Dm(t,e){xh(t,"da",e)}function xh(t,e,r=_t){const i=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Za(e,i,r),r){let a=r.parent;for(;a&&a.parent;)vh(a.parent.vnode)&&Pm(i,e,r,a),a=a.parent}}function Pm(t,e,r,i){const a=Za(e,t,i,!0);Oh(()=>{pl(i[e],a)},r)}function Za(t,e,r=_t,i=!1){if(r){const a=r[t]||(r[t]=[]),l=e.__weh||(e.__weh=(...f)=>{if(r.isUnmounted)return;ei(),ji(r);const y=cr(e,r,t,f);return Xn(),ti(),y});return i?a.unshift(l):a.push(l),l}}const Qr=t=>(e,r=_t)=>(!ru||t==="sp")&&Za(t,(...i)=>e(...i),r),Lm=Qr("bm"),Mm=Qr("m"),Bm=Qr("bu"),Fm=Qr("u"),Um=Qr("bum"),Oh=Qr("um"),$m=Qr("sp"),Qm=Qr("rtg"),jm=Qr("rtc");function Vm(t,e=_t){Za("ec",t,e)}const Bu=t=>t?Rh(t)?Sl(t)||t.proxy:Bu(t.parent):null,ys=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bu(t.parent),$root:t=>Bu(t.root),$emit:t=>t.emit,$options:t=>Il(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Wl(t.update)}),$nextTick:t=>t.n||(t.n=ym.bind(t.proxy)),$watch:t=>Sm.bind(t)}),qu=(t,e)=>t!==Fe&&!t.__isScriptSetup&&pe(t,e),Jm={get({_:t},e){const{ctx:r,setupState:i,data:a,props:l,accessCache:f,type:y,appContext:N}=t;let d;if(e[0]!=="$"){const F=f[e];if(F!==void 0)switch(F){case 1:return i[e];case 2:return a[e];case 4:return r[e];case 3:return l[e]}else{if(qu(i,e))return f[e]=1,i[e];if(a!==Fe&&pe(a,e))return f[e]=2,a[e];if((d=t.propsOptions[0])&&pe(d,e))return f[e]=3,l[e];if(r!==Fe&&pe(r,e))return f[e]=4,r[e];Fu&&(f[e]=0)}}const x=ys[e];let _,R;if(x)return e==="$attrs"&&At(t,"get",e),x(t);if((_=y.__cssModules)&&(_=_[e]))return _;if(r!==Fe&&pe(r,e))return f[e]=4,r[e];if(R=N.config.globalProperties,pe(R,e))return R[e]},set({_:t},e,r){const{data:i,setupState:a,ctx:l}=t;return qu(a,e)?(a[e]=r,!0):i!==Fe&&pe(i,e)?(i[e]=r,!0):pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:a,propsOptions:l}},f){let y;return!!r[f]||t!==Fe&&pe(t,f)||qu(e,f)||(y=l[0])&&pe(y,f)||pe(i,f)||pe(ys,f)||pe(a.config.globalProperties,f)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:pe(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function Vc(t){return te(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Fu=!0;function Km(t){const e=Il(t),r=t.proxy,i=t.ctx;Fu=!1,e.beforeCreate&&Jc(e.beforeCreate,t,"bc");const{data:a,computed:l,methods:f,watch:y,provide:N,inject:d,created:x,beforeMount:_,mounted:R,beforeUpdate:F,updated:we,activated:J,deactivated:Te,beforeDestroy:B,beforeUnmount:$e,destroyed:de,unmounted:Be,render:lt,renderTracked:z,renderTriggered:Oe,errorCaptured:Ge,serverPrefetch:jr,expose:ve,inheritAttrs:me,components:dr,directives:V,filters:_e}=e;if(d&&Hm(d,i,null),f)for(const Se in f){const Ce=f[Se];oe(Ce)&&(i[Se]=Ce.bind(r))}if(a){const Se=a.call(r,r);Ve(Se)&&(t.data=Ol(Se))}if(Fu=!0,l)for(const Se in l){const Ce=l[Se],hr=oe(Ce)?Ce.bind(r,r):oe(Ce.get)?Ce.get.bind(r,r):Kt,vn=!oe(Ce)&&oe(Ce.set)?Ce.set.bind(r):Kt,_r=Wy({get:hr,set:vn});Object.defineProperty(i,Se,{enumerable:!0,configurable:!0,get:()=>_r.value,set:st=>_r.value=st})}if(y)for(const Se in y)Ch(y[Se],i,r,Se);if(N){const Se=oe(N)?N.call(r):N;Reflect.ownKeys(Se).forEach(Ce=>{ey(Ce,Se[Ce])})}x&&Jc(x,t,"c");function Ze(Se,Ce){te(Ce)?Ce.forEach(hr=>Se(hr.bind(r))):Ce&&Se(Ce.bind(r))}if(Ze(Lm,_),Ze(Mm,R),Ze(Bm,F),Ze(Fm,we),Ze(Rm,J),Ze(Dm,Te),Ze(Vm,Ge),Ze(jm,z),Ze(Qm,Oe),Ze(Um,$e),Ze(Oh,Be),Ze($m,jr),te(ve))if(ve.length){const Se=t.exposed||(t.exposed={});ve.forEach(Ce=>{Object.defineProperty(Se,Ce,{get:()=>r[Ce],set:hr=>r[Ce]=hr})})}else t.exposed||(t.exposed={});lt&&t.render===Kt&&(t.render=lt),me!=null&&(t.inheritAttrs=me),dr&&(t.components=dr),V&&(t.directives=V)}function Hm(t,e,r=Kt){te(t)&&(t=Uu(t));for(const i in t){const a=t[i];let l;Ve(a)?"default"in a?l=Do(a.from||i,a.default,!0):l=Do(a.from||i):l=Do(a),Rt(l)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:f=>l.value=f}):e[i]=l}}function Jc(t,e,r){cr(te(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function Ch(t,e,r,i){const a=i.includes(".")?bh(r,i):()=>r[i];if(ut(t)){const l=e[t];oe(l)&&Cu(a,l)}else if(oe(t))Cu(a,t.bind(r));else if(Ve(t))if(te(t))t.forEach(l=>Ch(l,e,r,i));else{const l=oe(t.handler)?t.handler.bind(r):e[t.handler];oe(l)&&Cu(a,l,t)}}function Il(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:a,optionsCache:l,config:{optionMergeStrategies:f}}=t.appContext,y=l.get(e);let N;return y?N=y:!a.length&&!r&&!i?N=e:(N={},a.length&&a.forEach(d=>Vo(N,d,f,!0)),Vo(N,e,f)),Ve(e)&&l.set(e,N),N}function Vo(t,e,r,i=!1){const{mixins:a,extends:l}=e;l&&Vo(t,l,r,!0),a&&a.forEach(f=>Vo(t,f,r,!0));for(const f in e)if(!(i&&f==="expose")){const y=Gm[f]||r&&r[f];t[f]=y?y(t[f],e[f]):e[f]}return t}const Gm={data:Kc,props:Hc,emits:Hc,methods:ps,computed:ps,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:ps,directives:ps,watch:Ym,provide:Kc,inject:zm};function Kc(t,e){return e?t?function(){return pt(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function zm(t,e){return ps(Uu(t),Uu(e))}function Uu(t){if(te(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function ps(t,e){return t?pt(Object.create(null),t,e):e}function Hc(t,e){return t?te(t)&&te(e)?[...new Set([...t,...e])]:pt(Object.create(null),Vc(t),Vc(e??{})):e}function Ym(t,e){if(!t)return e;if(!e)return t;const r=pt(Object.create(null),t);for(const i in e)r[i]=vt(t[i],e[i]);return r}function qh(){return{app:null,config:{isNativeTag:Ip,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xm=0;function Zm(t,e){return function(i,a=null){oe(i)||(i=pt({},i)),a!=null&&!Ve(a)&&(a=null);const l=qh(),f=new WeakSet;let y=!1;const N=l.app={_uid:Xm++,_component:i,_props:a,_container:null,_context:l,_instance:null,version:Iy,get config(){return l.config},set config(d){},use(d,...x){return f.has(d)||(d&&oe(d.install)?(f.add(d),d.install(N,...x)):oe(d)&&(f.add(d),d(N,...x))),N},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),N},component(d,x){return x?(l.components[d]=x,N):l.components[d]},directive(d,x){return x?(l.directives[d]=x,N):l.directives[d]},mount(d,x,_){if(!y){const R=Yn(i,a);return R.appContext=l,_===!0?_="svg":_===!1&&(_=void 0),x&&e?e(R,d):t(R,d,_),y=!0,N._container=d,d.__vue_app__=N,Sl(R.component)||R.component.proxy}},unmount(){y&&(t(null,N._container),delete N._container.__vue_app__)},provide(d,x){return l.provides[d]=x,N},runWithContext(d){Jo=N;try{return d()}finally{Jo=null}}};return N}}let Jo=null;function ey(t,e){if(_t){let r=_t.provides;const i=_t.parent&&_t.parent.provides;i===r&&(r=_t.provides=Object.create(i)),r[t]=e}}function Do(t,e,r=!1){const i=_t||Or;if(i||Jo){const a=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Jo._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&oe(e)?e.call(i&&i.proxy):e}}function ty(t,e,r,i=!1){const a={},l={};$o(l,tu,1),t.propsDefaults=Object.create(null),_h(t,e,a,l);for(const f in t.propsOptions[0])f in a||(a[f]=void 0);r?t.props=i?a:lm(a):t.type.props?t.props=a:t.props=l,t.attrs=l}function ry(t,e,r,i){const{props:a,attrs:l,vnode:{patchFlag:f}}=t,y=be(a),[N]=t.propsOptions;let d=!1;if((i||f>0)&&!(f&16)){if(f&8){const x=t.vnode.dynamicProps;for(let _=0;_<x.length;_++){let R=x[_];if(Xa(t.emitsOptions,R))continue;const F=e[R];if(N)if(pe(l,R))F!==l[R]&&(l[R]=F,d=!0);else{const we=Ui(R);a[we]=$u(N,y,we,F,t,!1)}else F!==l[R]&&(l[R]=F,d=!0)}}}else{_h(t,e,a,l)&&(d=!0);let x;for(const _ in y)(!e||!pe(e,_)&&((x=zi(_))===_||!pe(e,x)))&&(N?r&&(r[_]!==void 0||r[x]!==void 0)&&(a[_]=$u(N,y,_,void 0,t,!0)):delete a[_]);if(l!==y)for(const _ in l)(!e||!pe(e,_))&&(delete l[_],d=!0)}d&&Mr(t,"set","$attrs")}function _h(t,e,r,i){const[a,l]=t.propsOptions;let f=!1,y;if(e)for(let N in e){if(Ao(N))continue;const d=e[N];let x;a&&pe(a,x=Ui(N))?!l||!l.includes(x)?r[x]=d:(y||(y={}))[x]=d:Xa(t.emitsOptions,N)||(!(N in i)||d!==i[N])&&(i[N]=d,f=!0)}if(l){const N=be(r),d=y||Fe;for(let x=0;x<l.length;x++){const _=l[x];r[_]=$u(a,N,_,d[_],t,!pe(d,_))}}return f}function $u(t,e,r,i,a,l){const f=t[r];if(f!=null){const y=pe(f,"default");if(y&&i===void 0){const N=f.default;if(f.type!==Function&&!f.skipFactory&&oe(N)){const{propsDefaults:d}=a;r in d?i=d[r]:(ji(a),i=d[r]=N.call(null,e),Xn())}else i=N}f[0]&&(l&&!y?i=!1:f[1]&&(i===""||i===zi(r))&&(i=!0))}return i}function Wh(t,e,r=!1){const i=e.propsCache,a=i.get(t);if(a)return a;const l=t.props,f={},y=[];let N=!1;if(!oe(t)){const x=_=>{N=!0;const[R,F]=Wh(_,e,!0);pt(f,R),F&&y.push(...F)};!r&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}if(!l&&!N)return Ve(t)&&i.set(t,yi),yi;if(te(l))for(let x=0;x<l.length;x++){const _=Ui(l[x]);Gc(_)&&(f[_]=Fe)}else if(l)for(const x in l){const _=Ui(x);if(Gc(_)){const R=l[x],F=f[_]=te(R)||oe(R)?{type:R}:pt({},R);if(F){const we=Xc(Boolean,F.type),J=Xc(String,F.type);F[0]=we>-1,F[1]=J<0||we<J,(we>-1||pe(F,"default"))&&y.push(_)}}}const d=[f,y];return Ve(t)&&i.set(t,d),d}function Gc(t){return t[0]!=="$"}function zc(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Yc(t,e){return zc(t)===zc(e)}function Xc(t,e){return te(e)?e.findIndex(r=>Yc(r,t)):oe(e)&&Yc(e,t)?0:-1}const Ih=t=>t[0]==="_"||t==="$stable",El=t=>te(t)?t.map(br):[br(t)],ny=(t,e,r)=>{if(e._n)return e;const i=xm((...a)=>El(e(...a)),r);return i._c=!1,i},Eh=(t,e,r)=>{const i=t._ctx;for(const a in t){if(Ih(a))continue;const l=t[a];if(oe(l))e[a]=ny(a,l,i);else if(l!=null){const f=El(l);e[a]=()=>f}}},Th=(t,e)=>{const r=El(e);t.slots.default=()=>r},iy=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=be(e),$o(e,"_",r)):Eh(e,t.slots={})}else t.slots={},e&&Th(t,e);$o(t.slots,tu,1)},sy=(t,e,r)=>{const{vnode:i,slots:a}=t;let l=!0,f=Fe;if(i.shapeFlag&32){const y=e._;y?r&&y===1?l=!1:(pt(a,e),!r&&y===1&&delete a._):(l=!e.$stable,Eh(e,a)),f=e}else e&&(Th(t,e),f={default:1});if(l)for(const y in a)!Ih(y)&&f[y]==null&&delete a[y]};function Qu(t,e,r,i,a=!1){if(te(t)){t.forEach((R,F)=>Qu(R,e&&(te(e)?e[F]:e),r,i,a));return}if(Ro(i)&&!a)return;const l=i.shapeFlag&4?Sl(i.component)||i.component.proxy:i.el,f=a?null:l,{i:y,r:N}=t,d=e&&e.r,x=y.refs===Fe?y.refs={}:y.refs,_=y.setupState;if(d!=null&&d!==N&&(ut(d)?(x[d]=null,pe(_,d)&&(_[d]=null)):Rt(d)&&(d.value=null)),oe(N))hn(N,y,12,[f,x]);else{const R=ut(N),F=Rt(N);if(R||F){const we=()=>{if(t.f){const J=R?pe(_,N)?_[N]:x[N]:N.value;a?te(J)&&pl(J,l):te(J)?J.includes(l)||J.push(l):R?(x[N]=[l],pe(_,N)&&(_[N]=x[N])):(N.value=[l],t.k&&(x[t.k]=N.value))}else R?(x[N]=f,pe(_,N)&&(_[N]=f)):F&&(N.value=f,t.k&&(x[t.k]=f))};f?(we.id=-1,Tt(we,r)):we()}}}const Tt=Em;function oy(t){return ay(t)}function ay(t,e){const r=Jd();r.__VUE__=!0;const{insert:i,remove:a,patchProp:l,createElement:f,createText:y,createComment:N,setText:d,setElementText:x,parentNode:_,nextSibling:R,setScopeId:F=Kt,insertStaticContent:we}=t,J=(p,w,v,C=null,W=null,D=null,k=void 0,A=null,L=!!w.dynamicChildren)=>{if(p===w)return;p&&!ds(p,w)&&(C=Yt(p),st(p,W,D,!0),p=null),w.patchFlag===-2&&(L=!1,w.dynamicChildren=null);const{type:I,ref:M,shapeFlag:$}=w;switch(I){case eu:Te(p,w,v,C);break;case Rs:B(p,w,v,C);break;case Wu:p==null&&$e(w,v,C,k);break;case gr:dr(p,w,v,C,W,D,k,A,L);break;default:$&1?lt(p,w,v,C,W,D,k,A,L):$&6?V(p,w,v,C,W,D,k,A,L):($&64||$&128)&&I.process(p,w,v,C,W,D,k,A,L,Jr)}M!=null&&W&&Qu(M,p&&p.ref,D,w||p,!w)},Te=(p,w,v,C)=>{if(p==null)i(w.el=y(w.children),v,C);else{const W=w.el=p.el;w.children!==p.children&&d(W,w.children)}},B=(p,w,v,C)=>{p==null?i(w.el=N(w.children||""),v,C):w.el=p.el},$e=(p,w,v,C)=>{[p.el,p.anchor]=we(p.children,w,v,C,p.el,p.anchor)},de=({el:p,anchor:w},v,C)=>{let W;for(;p&&p!==w;)W=R(p),i(p,v,C),p=W;i(w,v,C)},Be=({el:p,anchor:w})=>{let v;for(;p&&p!==w;)v=R(p),a(p),p=v;a(w)},lt=(p,w,v,C,W,D,k,A,L)=>{w.type==="svg"?k="svg":w.type==="math"&&(k="mathml"),p==null?z(w,v,C,W,D,k,A,L):jr(p,w,W,D,k,A,L)},z=(p,w,v,C,W,D,k,A)=>{let L,I;const{props:M,shapeFlag:$,transition:Q,dirs:K}=p;if(L=p.el=f(p.type,D,M&&M.is,M),$&8?x(L,p.children):$&16&&Ge(p.children,L,null,C,W,_u(p,D),k,A),K&&Wn(p,null,C,"created"),Oe(L,p,p.scopeId,k,C),M){for(const ye in M)ye!=="value"&&!Ao(ye)&&l(L,ye,null,M[ye],D,p.children,C,W,Wt);"value"in M&&l(L,"value",null,M.value,D),(I=M.onVnodeBeforeMount)&&pr(I,C,p)}K&&Wn(p,null,C,"beforeMount");const re=uy(W,Q);re&&Q.beforeEnter(L),i(L,w,v),((I=M&&M.onVnodeMounted)||re||K)&&Tt(()=>{I&&pr(I,C,p),re&&Q.enter(L),K&&Wn(p,null,C,"mounted")},W)},Oe=(p,w,v,C,W)=>{if(v&&F(p,v),C)for(let D=0;D<C.length;D++)F(p,C[D]);if(W){let D=W.subTree;if(w===D){const k=W.vnode;Oe(p,k,k.scopeId,k.slotScopeIds,W.parent)}}},Ge=(p,w,v,C,W,D,k,A,L=0)=>{for(let I=L;I<p.length;I++){const M=p[I]=A?Xr(p[I]):br(p[I]);J(null,M,w,v,C,W,D,k,A)}},jr=(p,w,v,C,W,D,k)=>{const A=w.el=p.el;let{patchFlag:L,dynamicChildren:I,dirs:M}=w;L|=p.patchFlag&16;const $=p.props||Fe,Q=w.props||Fe;let K;if(v&&In(v,!1),(K=Q.onVnodeBeforeUpdate)&&pr(K,v,w,p),M&&Wn(w,p,v,"beforeUpdate"),v&&In(v,!0),I?ve(p.dynamicChildren,I,A,v,C,_u(w,W),D):k||Ce(p,w,A,null,v,C,_u(w,W),D,!1),L>0){if(L&16)me(A,w,$,Q,v,C,W);else if(L&2&&$.class!==Q.class&&l(A,"class",null,Q.class,W),L&4&&l(A,"style",$.style,Q.style,W),L&8){const re=w.dynamicProps;for(let ye=0;ye<re.length;ye++){const Ne=re[ye],Pe=$[Ne],It=Q[Ne];(It!==Pe||Ne==="value")&&l(A,Ne,Pe,It,W,p.children,v,C,Wt)}}L&1&&p.children!==w.children&&x(A,w.children)}else!k&&I==null&&me(A,w,$,Q,v,C,W);((K=Q.onVnodeUpdated)||M)&&Tt(()=>{K&&pr(K,v,w,p),M&&Wn(w,p,v,"updated")},C)},ve=(p,w,v,C,W,D,k)=>{for(let A=0;A<w.length;A++){const L=p[A],I=w[A],M=L.el&&(L.type===gr||!ds(L,I)||L.shapeFlag&70)?_(L.el):v;J(L,I,M,null,C,W,D,k,!0)}},me=(p,w,v,C,W,D,k)=>{if(v!==C){if(v!==Fe)for(const A in v)!Ao(A)&&!(A in C)&&l(p,A,v[A],null,k,w.children,W,D,Wt);for(const A in C){if(Ao(A))continue;const L=C[A],I=v[A];L!==I&&A!=="value"&&l(p,A,I,L,k,w.children,W,D,Wt)}"value"in C&&l(p,"value",v.value,C.value,k)}},dr=(p,w,v,C,W,D,k,A,L)=>{const I=w.el=p?p.el:y(""),M=w.anchor=p?p.anchor:y("");let{patchFlag:$,dynamicChildren:Q,slotScopeIds:K}=w;K&&(A=A?A.concat(K):K),p==null?(i(I,v,C),i(M,v,C),Ge(w.children||[],v,M,W,D,k,A,L)):$>0&&$&64&&Q&&p.dynamicChildren?(ve(p.dynamicChildren,Q,v,W,D,k,A),(w.key!=null||W&&w===W.subTree)&&kh(p,w,!0)):Ce(p,w,v,M,W,D,k,A,L)},V=(p,w,v,C,W,D,k,A,L)=>{w.slotScopeIds=A,p==null?w.shapeFlag&512?W.ctx.activate(w,v,C,k,L):_e(w,v,C,W,D,k,L):ni(p,w,L)},_e=(p,w,v,C,W,D,k)=>{const A=p.component=vy(p,C,W);if(vh(p)&&(A.ctx.renderer=Jr),xy(A),A.asyncDep){if(W&&W.registerDep(A,Ze),!p.el){const L=A.subTree=Yn(Rs);B(null,L,w,v)}}else Ze(A,p,w,v,W,D,k)},ni=(p,w,v)=>{const C=w.component=p.component;if(qm(p,w,v))if(C.asyncDep&&!C.asyncResolved){Se(C,w,v);return}else C.next=w,Nm(C.update),C.effect.dirty=!0,C.update();else w.el=p.el,C.vnode=w},Ze=(p,w,v,C,W,D,k)=>{const A=()=>{if(p.isMounted){let{next:M,bu:$,u:Q,parent:K,vnode:re}=p;{const Wr=Sh(p);if(Wr){M&&(M.el=re.el,Se(p,M,k)),Wr.asyncDep.then(()=>{p.isUnmounted||A()});return}}let ye=M,Ne;In(p,!1),M?(M.el=re.el,Se(p,M,k)):M=re,$&&vu($),(Ne=M.props&&M.props.onVnodeBeforeUpdate)&&pr(Ne,K,M,re),In(p,!0);const Pe=Ou(p),It=p.subTree;p.subTree=Pe,J(It,Pe,_(It.el),Yt(It),p,W,D),M.el=Pe.el,ye===null&&_m(p,Pe.el),Q&&Tt(Q,W),(Ne=M.props&&M.props.onVnodeUpdated)&&Tt(()=>pr(Ne,K,M,re),W)}else{let M;const{el:$,props:Q}=w,{bm:K,m:re,parent:ye}=p,Ne=Ro(w);if(In(p,!1),K&&vu(K),!Ne&&(M=Q&&Q.onVnodeBeforeMount)&&pr(M,ye,w),In(p,!0),$&&ts){const Pe=()=>{p.subTree=Ou(p),ts($,p.subTree,p,W,null)};Ne?w.type.__asyncLoader().then(()=>!p.isUnmounted&&Pe()):Pe()}else{const Pe=p.subTree=Ou(p);J(null,Pe,v,C,p,W,D),w.el=Pe.el}if(re&&Tt(re,W),!Ne&&(M=Q&&Q.onVnodeMounted)){const Pe=w;Tt(()=>pr(M,ye,Pe),W)}(w.shapeFlag&256||ye&&Ro(ye.vnode)&&ye.vnode.shapeFlag&256)&&p.a&&Tt(p.a,W),p.isMounted=!0,w=v=C=null}},L=p.effect=new Nl(A,Kt,()=>Wl(I),p.scope),I=p.update=()=>{L.dirty&&L.run()};I.id=p.uid,In(p,!0),I()},Se=(p,w,v)=>{w.component=p;const C=p.vnode.props;p.vnode=w,p.next=null,ry(p,w.props,C,v),sy(p,w.children,v),ei(),Qc(p),ti()},Ce=(p,w,v,C,W,D,k,A,L=!1)=>{const I=p&&p.children,M=p?p.shapeFlag:0,$=w.children,{patchFlag:Q,shapeFlag:K}=w;if(Q>0){if(Q&128){vn(I,$,v,C,W,D,k,A,L);return}else if(Q&256){hr(I,$,v,C,W,D,k,A,L);return}}K&8?(M&16&&Wt(I,W,D),$!==I&&x(v,$)):M&16?K&16?vn(I,$,v,C,W,D,k,A,L):Wt(I,W,D,!0):(M&8&&x(v,""),K&16&&Ge($,v,C,W,D,k,A,L))},hr=(p,w,v,C,W,D,k,A,L)=>{p=p||yi,w=w||yi;const I=p.length,M=w.length,$=Math.min(I,M);let Q;for(Q=0;Q<$;Q++){const K=w[Q]=L?Xr(w[Q]):br(w[Q]);J(p[Q],K,v,null,W,D,k,A,L)}I>M?Wt(p,W,D,!0,!1,$):Ge(w,v,C,W,D,k,A,L,$)},vn=(p,w,v,C,W,D,k,A,L)=>{let I=0;const M=w.length;let $=p.length-1,Q=M-1;for(;I<=$&&I<=Q;){const K=p[I],re=w[I]=L?Xr(w[I]):br(w[I]);if(ds(K,re))J(K,re,v,null,W,D,k,A,L);else break;I++}for(;I<=$&&I<=Q;){const K=p[$],re=w[Q]=L?Xr(w[Q]):br(w[Q]);if(ds(K,re))J(K,re,v,null,W,D,k,A,L);else break;$--,Q--}if(I>$){if(I<=Q){const K=Q+1,re=K<M?w[K].el:C;for(;I<=Q;)J(null,w[I]=L?Xr(w[I]):br(w[I]),v,re,W,D,k,A,L),I++}}else if(I>Q)for(;I<=$;)st(p[I],W,D,!0),I++;else{const K=I,re=I,ye=new Map;for(I=re;I<=Q;I++){const gt=w[I]=L?Xr(w[I]):br(w[I]);gt.key!=null&&ye.set(gt.key,I)}let Ne,Pe=0;const It=Q-re+1;let Wr=!1,rs=0;const xn=new Array(It);for(I=0;I<It;I++)xn[I]=0;for(I=K;I<=$;I++){const gt=p[I];if(Pe>=It){st(gt,W,D,!0);continue}let Dt;if(gt.key!=null)Dt=ye.get(gt.key);else for(Ne=re;Ne<=Q;Ne++)if(xn[Ne-re]===0&&ds(gt,w[Ne])){Dt=Ne;break}Dt===void 0?st(gt,W,D,!0):(xn[Dt-re]=I+1,Dt>=rs?rs=Dt:Wr=!0,J(gt,w[Dt],v,null,W,D,k,A,L),Pe++)}const uo=Wr?ly(xn):yi;for(Ne=uo.length-1,I=It-1;I>=0;I--){const gt=re+I,Dt=w[gt],ne=gt+1<M?w[gt+1].el:C;xn[I]===0?J(null,Dt,v,ne,W,D,k,A,L):Wr&&(Ne<0||I!==uo[Ne]?_r(Dt,v,ne,2):Ne--)}}},_r=(p,w,v,C,W=null)=>{const{el:D,type:k,transition:A,children:L,shapeFlag:I}=p;if(I&6){_r(p.component.subTree,w,v,C);return}if(I&128){p.suspense.move(w,v,C);return}if(I&64){k.move(p,w,v,Jr);return}if(k===gr){i(D,w,v);for(let $=0;$<L.length;$++)_r(L[$],w,v,C);i(p.anchor,w,v);return}if(k===Wu){de(p,w,v);return}if(C!==2&&I&1&&A)if(C===0)A.beforeEnter(D),i(D,w,v),Tt(()=>A.enter(D),W);else{const{leave:$,delayLeave:Q,afterLeave:K}=A,re=()=>i(D,w,v),ye=()=>{$(D,()=>{re(),K&&K()})};Q?Q(D,re,ye):ye()}else i(D,w,v)},st=(p,w,v,C=!1,W=!1)=>{const{type:D,props:k,ref:A,children:L,dynamicChildren:I,shapeFlag:M,patchFlag:$,dirs:Q}=p;if(A!=null&&Qu(A,null,v,p,!0),M&256){w.ctx.deactivate(p);return}const K=M&1&&Q,re=!Ro(p);let ye;if(re&&(ye=k&&k.onVnodeBeforeUnmount)&&pr(ye,w,p),M&6)ao(p.component,v,C);else{if(M&128){p.suspense.unmount(v,C);return}K&&Wn(p,null,w,"beforeUnmount"),M&64?p.type.remove(p,w,v,W,Jr,C):I&&(D!==gr||$>0&&$&64)?Wt(I,w,v,!1,!0):(D===gr&&$&384||!W&&M&16)&&Wt(L,w,v),C&&Vr(p)}(re&&(ye=k&&k.onVnodeUnmounted)||K)&&Tt(()=>{ye&&pr(ye,w,p),K&&Wn(p,null,w,"unmounted")},v)},Vr=p=>{const{type:w,el:v,anchor:C,transition:W}=p;if(w===gr){zt(v,C);return}if(w===Wu){Be(p);return}const D=()=>{a(v),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(p.shapeFlag&1&&W&&!W.persisted){const{leave:k,delayLeave:A}=W,L=()=>k(v,D);A?A(p.el,D,L):L()}else D()},zt=(p,w)=>{let v;for(;p!==w;)v=R(p),a(p),p=v;a(w)},ao=(p,w,v)=>{const{bum:C,scope:W,update:D,subTree:k,um:A}=p;C&&vu(C),W.stop(),D&&(D.active=!1,st(k,p,w,v)),A&&Tt(A,w),Tt(()=>{p.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Wt=(p,w,v,C=!1,W=!1,D=0)=>{for(let k=D;k<p.length;k++)st(p[k],w,v,C,W)},Yt=p=>p.shapeFlag&6?Yt(p.component.subTree):p.shapeFlag&128?p.suspense.next():R(p.anchor||p.el);let ii=!1;const es=(p,w,v)=>{p==null?w._vnode&&st(w._vnode,null,null,!0):J(w._vnode||null,p,w,null,null,null,v),ii||(ii=!0,Qc(),mh(),ii=!1),w._vnode=p},Jr={p:J,um:st,m:_r,r:Vr,mt:_e,mc:Ge,pc:Ce,pbc:ve,n:Yt,o:t};let si,ts;return e&&([si,ts]=e(Jr)),{render:es,hydrate:si,createApp:Zm(es,si)}}function _u({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function In({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function uy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function kh(t,e,r=!1){const i=t.children,a=e.children;if(te(i)&&te(a))for(let l=0;l<i.length;l++){const f=i[l];let y=a[l];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=a[l]=Xr(a[l]),y.el=f.el),r||kh(f,y)),y.type===eu&&(y.el=f.el)}}function ly(t){const e=t.slice(),r=[0];let i,a,l,f,y;const N=t.length;for(i=0;i<N;i++){const d=t[i];if(d!==0){if(a=r[r.length-1],t[a]<d){e[i]=a,r.push(i);continue}for(l=0,f=r.length-1;l<f;)y=l+f>>1,t[r[y]]<d?l=y+1:f=y;d<t[r[l]]&&(l>0&&(e[i]=r[l-1]),r[l]=i)}}for(l=r.length,f=r[l-1];l-- >0;)r[l]=f,f=e[f];return r}function Sh(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Sh(e)}const cy=t=>t.__isTeleport,gr=Symbol.for("v-fgt"),eu=Symbol.for("v-txt"),Rs=Symbol.for("v-cmt"),Wu=Symbol.for("v-stc"),ws=[];let lr=null;function dy(t=!1){ws.push(lr=t?null:[])}function hy(){ws.pop(),lr=ws[ws.length-1]||null}let Ds=1;function Zc(t){Ds+=t}function fy(t){return t.dynamicChildren=Ds>0?lr||yi:null,hy(),Ds>0&&lr&&lr.push(t),t}function py(t,e,r,i,a,l){return fy(rt(t,e,r,i,a,l,!0))}function my(t){return t?t.__v_isVNode===!0:!1}function ds(t,e){return t.type===e.type&&t.key===e.key}const tu="__vInternal",Ah=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ut(t)||Rt(t)||oe(t)?{i:Or,r:t,k:e,f:!!r}:t:null);function rt(t,e=null,r=null,i=0,a=null,l=t===gr?0:1,f=!1,y=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ah(e),ref:e&&Po(e),scopeId:Nh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Or};return y?(Tl(N,r),l&128&&t.normalize(N)):r&&(N.shapeFlag|=ut(r)?8:16),Ds>0&&!f&&lr&&(N.patchFlag>0||l&6)&&N.patchFlag!==32&&lr.push(N),N}const Yn=yy;function yy(t,e=null,r=null,i=0,a=null,l=!1){if((!t||t===Wm)&&(t=Rs),my(t)){const y=Qi(t,e,!0);return r&&Tl(y,r),Ds>0&&!l&&lr&&(y.shapeFlag&6?lr[lr.indexOf(t)]=y:lr.push(y)),y.patchFlag|=-2,y}if(_y(t)&&(t=t.__vccOpts),e){e=wy(e);let{class:y,style:N}=e;y&&!ut(y)&&(e.class=wl(y)),Ve(N)&&(ah(N)&&!te(N)&&(N=pt({},N)),e.style=yl(N))}const f=ut(t)?1:Im(t)?128:cy(t)?64:Ve(t)?4:oe(t)?2:0;return rt(t,e,r,i,a,f,l,!0)}function wy(t){return t?ah(t)||tu in t?pt({},t):t:null}function Qi(t,e,r=!1){const{props:i,ref:a,patchFlag:l,children:f}=t,y=e?Ny(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Ah(y),ref:e&&e.ref?r&&a?te(a)?a.concat(Po(e)):[a,Po(e)]:Po(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qi(t.ssContent),ssFallback:t.ssFallback&&Qi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ps(t=" ",e=0){return Yn(eu,null,t,e)}function br(t){return t==null||typeof t=="boolean"?Yn(Rs):te(t)?Yn(gr,null,t.slice()):typeof t=="object"?Xr(t):Yn(eu,null,String(t))}function Xr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qi(t)}function Tl(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(te(e))r=16;else if(typeof e=="object")if(i&65){const a=e.default;a&&(a._c&&(a._d=!1),Tl(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(tu in e)?e._ctx=Or:a===3&&Or&&(Or.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:Or},r=32):(e=String(e),i&64?(r=16,e=[Ps(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ny(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const a in i)if(a==="class")e.class!==i.class&&(e.class=wl([e.class,i.class]));else if(a==="style")e.style=yl([e.style,i.style]);else if(Ka(a)){const l=e[a],f=i[a];f&&l!==f&&!(te(l)&&l.includes(f))&&(e[a]=l?[].concat(l,f):f)}else a!==""&&(e[a]=i[a])}return e}function pr(t,e,r,i=null){cr(t,e,7,[r,i])}const gy=qh();let by=0;function vy(t,e,r){const i=t.type,a=(e?e.appContext:t.appContext)||gy,l={uid:by++,vnode:t,type:i,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wh(i,a),emitsOptions:wh(i,a),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:i.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=vm.bind(null,l),t.ce&&t.ce(l),l}let _t=null,kl,ju;{const t=Jd(),e=(r,i)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(i),l=>{a.length>1?a.forEach(f=>f(l)):a[0](l)}};kl=e("__VUE_INSTANCE_SETTERS__",r=>_t=r),ju=e("__VUE_SSR_SETTERS__",r=>ru=r)}const ji=t=>{kl(t),t.scope.on()},Xn=()=>{_t&&_t.scope.off(),kl(null)};function Rh(t){return t.vnode.shapeFlag&4}let ru=!1;function xy(t,e=!1){e&&ju(e);const{props:r,children:i}=t.vnode,a=Rh(t);ty(t,r,a,e),iy(t,i);const l=a?Oy(t,e):void 0;return e&&ju(!1),l}function Oy(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=uh(new Proxy(t.ctx,Jm));const{setup:i}=r;if(i){const a=t.setupContext=i.length>1?qy(t):null;ji(t),ei();const l=hn(i,t,0,[t.props,a]);if(ti(),Xn(),$d(l)){if(l.then(Xn,Xn),e)return l.then(f=>{ed(t,f,e)}).catch(f=>{Ya(f,t,0)});t.asyncDep=l}else ed(t,l,e)}else Dh(t,e)}function ed(t,e,r){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=hh(e)),Dh(t,r)}let td;function Dh(t,e,r){const i=t.type;if(!t.render){if(!e&&td&&!i.render){const a=i.template||Il(t).template;if(a){const{isCustomElement:l,compilerOptions:f}=t.appContext.config,{delimiters:y,compilerOptions:N}=i,d=pt(pt({isCustomElement:l,delimiters:y},f),N);i.render=td(a,d)}}t.render=i.render||Kt}{ji(t),ei();try{Km(t)}finally{ti(),Xn()}}}function Cy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return At(t,"get","$attrs"),e[r]}}))}function qy(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Cy(t)},slots:t.slots,emit:t.emit,expose:e}}function Sl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hh(uh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ys)return ys[r](t)},has(e,r){return r in e||r in ys}}))}function _y(t){return oe(t)&&"__vccOpts"in t}const Wy=(t,e)=>cm(t,e,ru),Iy="3.4.6",Ey="http://www.w3.org/2000/svg",Ty="http://www.w3.org/1998/Math/MathML",Zr=typeof document<"u"?document:null,rd=Zr&&Zr.createElement("template"),ky={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const a=e==="svg"?Zr.createElementNS(Ey,t):e==="mathml"?Zr.createElementNS(Ty,t):Zr.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:t=>Zr.createTextNode(t),createComment:t=>Zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,a,l){const f=r?r.previousSibling:e.lastChild;if(a&&(a===l||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{rd.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const y=rd.content;if(i==="svg"||i==="mathml"){const N=y.firstChild;for(;N.firstChild;)y.appendChild(N.firstChild);y.removeChild(N)}e.insertBefore(y,r)}return[f?f.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Sy=Symbol("_vtc");function Ay(t,e,r){const i=t[Sy];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Ry=Symbol("_vod"),Dy=Symbol("");function Py(t,e,r){const i=t.style,a=ut(r);if(r&&!a){if(e&&!ut(e))for(const l in e)r[l]==null&&Vu(i,l,"");for(const l in r)Vu(i,l,r[l])}else{const l=i.display;if(a){if(e!==r){const f=i[Dy];f&&(r+=";"+f),i.cssText=r}}else e&&t.removeAttribute("style");Ry in t&&(i.display=l)}}const nd=/\s*!important$/;function Vu(t,e,r){if(te(r))r.forEach(i=>Vu(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=Ly(t,e);nd.test(r)?t.setProperty(zi(i),r.replace(nd,""),"important"):t[i]=r}}const id=["Webkit","Moz","ms"],Iu={};function Ly(t,e){const r=Iu[e];if(r)return r;let i=Ui(e);if(i!=="filter"&&i in t)return Iu[e]=i;i=Vd(i);for(let a=0;a<id.length;a++){const l=id[a]+i;if(l in t)return Iu[e]=l}return e}const sd="http://www.w3.org/1999/xlink";function My(t,e,r,i,a){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(sd,e.slice(6,e.length)):t.setAttributeNS(sd,e,r);else{const l=Bp(e);r==null||l&&!Kd(r)?t.removeAttribute(e):t.setAttribute(e,l?"":r)}}function By(t,e,r,i,a,l,f){if(e==="innerHTML"||e==="textContent"){i&&f(i,a,l),t[e]=r??"";return}const y=t.tagName;if(e==="value"&&y!=="PROGRESS"&&!y.includes("-")){t._value=r;const d=y==="OPTION"?t.getAttribute("value"):t.value,x=r??"";d!==x&&(t.value=x),r==null&&t.removeAttribute(e);return}let N=!1;if(r===""||r==null){const d=typeof t[e];d==="boolean"?r=Kd(r):r==null&&d==="string"?(r="",N=!0):d==="number"&&(r=0,N=!0)}try{t[e]=r}catch{}N&&t.removeAttribute(e)}function Fy(t,e,r,i){t.addEventListener(e,r,i)}function Uy(t,e,r,i){t.removeEventListener(e,r,i)}const od=Symbol("_vei");function $y(t,e,r,i,a=null){const l=t[od]||(t[od]={}),f=l[e];if(i&&f)f.value=i;else{const[y,N]=Qy(e);if(i){const d=l[e]=Jy(i,a);Fy(t,y,d,N)}else f&&(Uy(t,y,f,N),l[e]=void 0)}}const ad=/(?:Once|Passive|Capture)$/;function Qy(t){let e;if(ad.test(t)){e={};let i;for(;i=t.match(ad);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zi(t.slice(2)),e]}let Eu=0;const jy=Promise.resolve(),Vy=()=>Eu||(jy.then(()=>Eu=0),Eu=Date.now());function Jy(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;cr(Ky(i,r.value),e,5,[i])};return r.value=t,r.attached=Vy(),r}function Ky(t,e){if(te(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>a=>!a._stopped&&i&&i(a))}else return e}const ud=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Hy=(t,e,r,i,a,l,f,y,N)=>{const d=a==="svg";e==="class"?Ay(t,i,d):e==="style"?Py(t,r,i):Ka(e)?fl(e)||$y(t,e,r,i,f):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gy(t,e,i,d))?By(t,e,i,l,f,y,N):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),My(t,e,i,d))};function Gy(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&ud(e)&&oe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return ud(e)&&ut(r)?!1:e in t}const zy=pt({patchProp:Hy},ky);let ld;function Yy(){return ld||(ld=oy(zy))}const Xy=(...t)=>{const e=Yy().createApp(...t),{mount:r}=e;return e.mount=i=>{const a=ew(i);if(!a)return;const l=e._component;!oe(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.innerHTML="";const f=r(a,!1,Zy(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),f},e};function Zy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ew(t){return ut(t)?document.querySelector(t):t}function Zn(t){return typeof t>"u"||t===void 0}function Gt(t){return typeof t=="string"}function Ph(t){return typeof t=="number"}function Ko(t){return typeof t=="boolean"}function Al(t){return t===null}function tw(t){return t instanceof Date}function rw(t){return typeof t=="bigint"}function Qt(t){return typeof t=="function"}function xr(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function Eo(t){return Br(t)?t:[t]}function Br(t){return Array.isArray(t)}function fn(t){return t}const Ee=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Ue=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}}),Tr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}}),Lh=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),nw=["preserve rows","delete rows","drop"],Lt=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}}),yn=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:Ue.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:Ue.create(t),identifier:Ue.create(e)})}}),Ns=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:yn.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ju=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:Ue.create(t),...e})},cloneWith(t,e){return c({...t,...e})}}),Ku=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}}),bn=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}}),pn=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:yn.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:yn.createWithSchema(t,e)})}});function jt(t){return xr(t)&&Qt(t.toOperationNode)}function iw(t){return xr(t)&&"expressionType"in t&&jt(t)}function sw(t){return xr(t)&&"expression"in t&&Gt(t.alias)&&jt(t)}const Er=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}}),wn=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}}),Yi=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}}),Tu=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?wn.create(t.on,r):Yi.create(t.on,r)})}}),gs=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Tu.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Tu.cloneWithOperation(t.on,"And",e):Tu.create(e)})}}),Vi=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}}),ow=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],aw=["+","-","*","/","%","^","&","|","#","<<",">>"],Mh=["->","->>"],uw=[...ow,...aw,"&&","||"],lw=["exists","not exists"],cw=["not","-",...lw],dw=[...uw,...Mh,...cw,"between","between symmetric"],Nn=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function cd(t){return Gt(t)&&Mh.includes(t)}const He=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:Ue.create(t)})}}),Rl=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}}),nu=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Rl.create()})}});var vi;class hw{constructor(e){q(this,vi,void 0);S(this,vi,e)}get dynamicReference(){return s(this,vi)}get refType(){}toOperationNode(){return Qh(s(this,vi))}}vi=new WeakMap;function Bh(t){return xr(t)&&jt(t)&&Gt(t.dynamicReference)}const Hu=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}}),yt=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return yt.create([t],[])},createWithChild(t){return yt.create(["",""],[t])},createWithChildren(t){return yt.create(new Array(t.length+1).fill(""),t)}});function Fh(t){return t==="asc"||t==="desc"}function iu(t){if(t.length===2)return[ku(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(r=>ku(r)):[ku(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function ku(t,e){const r=fw(t);if(Hu.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return Hu.create(r,Uh(e))}function fw(t){if(oo(t))return ri(t);if(Bh(t))return t.toOperationNode();const[e,r]=t.split(" ");if(r){if(!Fh(r))throw new Error(`Invalid order by direction: ${r}`);return Hu.create(Fr(e),Uh(r))}return Fr(t)}function Uh(t){if(t)return t==="asc"||t==="desc"?yt.createWithSql(t):t.toOperationNode()}const Ho=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}}),$h=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}}),bs=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function Qh(t){return Gt(t)?Fr(t):t.toOperationNode()}function Ls(t){return Br(t)?t.map(e=>Ht(e)):[Ht(t)]}function Ht(t){return oo(t)?ri(t):Qh(t)}function pw(t,e){const r=Fr(t);if(cd(e))return Ho.create(r,$h.create(Nn.create(e)));const i=e.slice(0,-1);if(cd(i))return Ho.create(r,bs.create(Nn.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Fr(t){const e=".";if(!t.includes(e))return nu.create(He.create(t));const r=t.split(e).map(Dl);if(r.length===3)return yw(r);if(r.length===2)return ww(r);throw new Error(`invalid column reference ${t}`)}function mw(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(Dl);return bn.create(Fr(r),Ue.create(i))}else return Fr(t)}function jh(t){return He.create(t)}function Go(t){const e=" ";if(t.includes(e)){const[r,i]=t.split(e).map(Dl);if(!Fh(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return iu([r,i])[0]}else return jh(t)}function yw(t){const[e,r,i]=t;return nu.create(He.create(i),pn.createWithSchema(e,r))}function ww(t){const[e,r]=t;return nu.create(He.create(r),pn.create(e))}function Dl(t){return t.trim()}const Vh=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}}),Pl=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}}),Ur=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Nw(t){return Br(t)?gw(t):it(t)}function it(t){return oo(t)?ri(t):Ur.create(t)}function Ll(t){return Ph(t)||Ko(t)||Al(t)}function Ml(t){if(!Ll(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Ur.createImmediate(t)}function gw(t){return t.some(oo)?Pl.create(t.map(e=>it(e))):Vh.create(t)}const Ji=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function Nt(t){if(t.length===3)return Bl(t[0],t[1],t[2]);if(t.length===1)return it(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Bl(t,e,r){return bw(e)&&Jh(r)?Vi.create(Ht(t),zu(e),Ur.createImmediate(r)):Vi.create(Ht(t),zu(e),Nw(r))}function $r(t,e,r){return Vi.create(Ht(t),zu(e),Ht(r))}function dd(t,e){return Gu(Object.entries(t).filter(([,r])=>!Zn(r)).map(([r,i])=>Bl(r,Jh(i)?"is":"=",i)),e)}function Gu(t,e){const r=e==="and"?wn.create:Yi.create;if(t.length===0)return Vi.create(Ur.createImmediate(1),Nn.create("="),Ur.createImmediate(e==="and"?1:0));let i=hd(t[0]);for(let a=1;a<t.length;++a)i=r(i,hd(t[a]));return t.length>1?Ji.create(i):i}function bw(t){return t==="is"||t==="is not"}function Jh(t){return Al(t)||Ko(t)}function zu(t){if(Gt(t)&&dw.includes(t))return Nn.create(t);if(jt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function hd(t){return jt(t)?t.toOperationNode():t}const Ki=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),fd=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),Yu=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Ki.cloneWithItems(t.orderBy,e):Ki.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?fd.cloneWithItems(t.partitionBy,e):fd.create(e)})}}),zo=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}}),pd=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}}),md=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?wn.create(t.having,r):Yi.create(t.having,r)})}}),ce=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:zo.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Ki.cloneWithItems(t.orderBy,e):Ki.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?pd.cloneWithItems(t.groupBy,e):pd.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithHaving(t,e){return c({...t,having:t.having?md.cloneWithOperation(t.having,"And",e):md.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});function le(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var rr;const Cs=class Cs{constructor(e){q(this,rr,void 0);S(this,rr,c(e))}on(...e){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,Nt(e))})}onRef(e,r,i){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,$r(e,r,i))})}onTrue(){return new Cs({...s(this,rr),joinNode:gs.cloneWithOn(s(this,rr).joinNode,yt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return s(this,rr).joinNode}};rr=new WeakMap;let Yo=Cs;le(Yo,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const vw=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function xw(t){return Ls(t).map(vw.create)}var Pn;const qa=class qa{constructor(e){q(this,Pn,void 0);S(this,Pn,c(e))}orderBy(e,r){return new qa({overNode:Yu.cloneWithOrderByItems(s(this,Pn).overNode,iu([e,r]))})}partitionBy(e){return new qa({overNode:Yu.cloneWithPartitionByItems(s(this,Pn).overNode,xw(e))})}$call(e){return e(this)}toOperationNode(){return s(this,Pn).overNode}};Pn=new WeakMap;let Xo=qa;le(Xo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const vs=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Rl.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:nu.createSelectAll(t)})}});function Xi(t){return Qt(t)?Xi(t(Zi())):Br(t)?t.map(e=>yd(e)):[yd(t)]}function yd(t){return Gt(t)?vs.create(mw(t)):Bh(t)?vs.create(t.toOperationNode()):vs.create(uf(t))}function io(t){return t?Array.isArray(t)?t.map(wd):[wd(t)]:[vs.createSelectAll()]}function wd(t){if(Gt(t))return vs.createSelectAllFromTable(Ke(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Ow=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}}),Cw=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function qw(t){const e=Qt(t)?t(Zi()):t,r=Br(e)?e:c([e]);return _w(r)}function _w(t){const e=Ww(t);return[c([...e.keys()].map(He.create)),Ow.create(t.map(r=>Iw(r,e)))]}function Ww(t){const e=new Map;for(const r of t){const i=Object.keys(r);for(const a of i)!e.has(a)&&r[a]!==void 0&&e.set(a,e.size)}return e}function Iw(t,e){const r=Object.keys(t),i=Array.from({length:e.size});let a=!1;for(const f of r){const y=e.get(f);if(Zn(y))continue;const N=t[f];(Zn(N)||oo(N))&&(a=!0),i[y]=N}if(r.length<e.size||a){const f=Cw.create();return Pl.create(i.map(y=>Zn(y)?f:it(y)))}return Vh.create(i)}const ur=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return c({...t,...e})}}),Zo=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return c({...t,from:t.from?zo.cloneWithFroms(t.from,e):zo.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})}}),Nd=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}}),xs=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:zo.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Ki.cloneWithItems(t.orderBy,e):Ki.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?Nd.cloneWithTables(t.using,e):Nd.create(e)})}}),kt=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?wn.create(t.where,r):Yi.create(t.where,r)})}}),gd=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}}),Ew=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}}),ue=c({is(t){return ce.is(t)||ur.is(t)||Zo.is(t)||xs.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?kt.cloneWithOperation(t.where,"And",e):kt.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?gd.cloneWithSelections(t.returning,e):gd.create(e)})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Ew.create(e,r?.toOperationNode())})}}),Kh=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function Tw(...t){return t.length===2?[Kh.create(Ht(t[0]),it(t[1]))]:Fl(t[0])}function Fl(t){const e=Qt(t)?t(Zi()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Kh.create(He.create(r),it(i)))}const kw=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});class Sw{constructor(e,r){ee(this,"insertId");ee(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=r}}class su extends Error{constructor(r){super("no result");ee(this,"node");this.node=r}}function ou(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const $t=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?kt.cloneWithOperation(t.indexWhere,"And",e):kt.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?kt.cloneWithOperation(t.indexWhere,"Or",e):kt.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?kt.cloneWithOperation(t.updateWhere,"And",e):kt.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?kt.cloneWithOperation(t.updateWhere,"Or",e):kt.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var Re;const kr=class kr{constructor(e){q(this,Re,void 0);S(this,Re,c(e))}column(e){const r=He.create(e);return new kr({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{columns:s(this,Re).onConflictNode.columns?c([...s(this,Re).onConflictNode.columns,r]):c([r])})})}columns(e){const r=e.map(He.create);return new kr({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{columns:s(this,Re).onConflictNode.columns?c([...s(this,Re).onConflictNode.columns,...r]):c(r)})})}constraint(e){return new kr({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{constraint:Ue.create(e)})})}expression(e){return new kr({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new kr({...s(this,Re),onConflictNode:$t.cloneWithIndexWhere(s(this,Re).onConflictNode,Nt(e))})}whereRef(e,r,i){return new kr({...s(this,Re),onConflictNode:$t.cloneWithIndexWhere(s(this,Re).onConflictNode,$r(e,r,i))})}clearWhere(){return new kr({...s(this,Re),onConflictNode:$t.cloneWithoutIndexWhere(s(this,Re).onConflictNode)})}doNothing(){return new Hh({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ta({...s(this,Re),onConflictNode:$t.cloneWith(s(this,Re).onConflictNode,{updates:Fl(e)})})}$call(e){return e(this)}};Re=new WeakMap;let ea=kr;le(ea,"don't await OnConflictBuilder instances.");var js;class Hh{constructor(e){q(this,js,void 0);S(this,js,c(e))}toOperationNode(){return s(this,js).onConflictNode}}js=new WeakMap;le(Hh,"don't await OnConflictDoNothingBuilder instances.");var nr;const qs=class qs{constructor(e){q(this,nr,void 0);S(this,nr,c(e))}where(...e){return new qs({...s(this,nr),onConflictNode:$t.cloneWithUpdateWhere(s(this,nr).onConflictNode,Nt(e))})}whereRef(e,r,i){return new qs({...s(this,nr),onConflictNode:$t.cloneWithUpdateWhere(s(this,nr).onConflictNode,$r(e,r,i))})}clearWhere(){return new qs({...s(this,nr),onConflictNode:$t.cloneWithoutUpdateWhere(s(this,nr).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return s(this,nr).onConflictNode}};nr=new WeakMap;let ta=qs;le(ta,"don't await OnConflictUpdateBuilder instances.");var se;const ct=class ct{constructor(e){q(this,se,void 0);S(this,se,c(e))}values(e){const[r,i]=qw(e);return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{columns:r,values:i})})}columns(e){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{columns:c(e.map(He.create))})})}expression(e){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{values:ri(e)})})}defaultValues(){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{defaultValues:!0})})}ignore(){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{ignore:!0})})}onConflict(e){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{onConflict:e(new ea({onConflictNode:$t.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ct({...s(this,se),queryNode:ur.cloneWith(s(this,se).queryNode,{onDuplicateKey:kw.create(Fl(e))})})}returning(e){return new ct({...s(this,se),queryNode:ue.cloneWithReturning(s(this,se).queryNode,Xi(e))})}returningAll(){return new ct({...s(this,se),queryNode:ue.cloneWithReturning(s(this,se).queryNode,io())})}$call(e){return e(this)}$if(e,r){return e?r(this):new ct({...s(this,se)})}$castTo(){return new ct(s(this,se))}$narrowType(){return new ct(s(this,se))}$assertType(){return new ct(s(this,se))}withPlugin(e){return new ct({...s(this,se),executor:s(this,se).executor.withPlugin(e)})}toOperationNode(){return s(this,se).executor.transformQuery(s(this,se).queryNode,s(this,se).queryId)}compile(){return s(this,se).executor.compileQuery(this.toOperationNode(),s(this,se).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,se).executor.executeQuery(e,s(this,se).queryId);return s(this,se).executor.adapter.supportsReturning&&r.returning?i.rows:[new Sw(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,se).executor.stream(r,e,s(this,se).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new ct({...s(this,se),queryNode:ue.cloneWithExplain(s(this,se).queryNode,e,r)}).execute()}};se=new WeakMap;let Ms=ct;le(Ms,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Aw{constructor(e){ee(this,"numDeletedRows");this.numDeletedRows=e}}const Gh=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var G;const Ye=class Ye{constructor(e){q(this,G,void 0);S(this,G,c(e))}where(...e){return new Ye({...s(this,G),queryNode:ue.cloneWithWhere(s(this,G).queryNode,Nt(e))})}whereRef(e,r,i){return new Ye({...s(this,G),queryNode:ue.cloneWithWhere(s(this,G).queryNode,$r(e,r,i))})}clearWhere(){return new Ye({...s(this,G),queryNode:ue.cloneWithoutWhere(s(this,G).queryNode)})}using(e){return new Ye({...s(this,G),queryNode:xs.cloneWithUsing(s(this,G).queryNode,Bs(e))})}innerJoin(...e){return new Ye({...s(this,G),queryNode:ue.cloneWithJoin(s(this,G).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new Ye({...s(this,G),queryNode:ue.cloneWithJoin(s(this,G).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new Ye({...s(this,G),queryNode:ue.cloneWithJoin(s(this,G).queryNode,St("RightJoin",e))})}fullJoin(...e){return new Ye({...s(this,G),queryNode:ue.cloneWithJoin(s(this,G).queryNode,St("FullJoin",e))})}returning(e){return new Ye({...s(this,G),queryNode:ue.cloneWithReturning(s(this,G).queryNode,Xi(e))})}returningAll(e){return new Ye({...s(this,G),queryNode:ue.cloneWithReturning(s(this,G).queryNode,io(e))})}orderBy(e,r){return new Ye({...s(this,G),queryNode:xs.cloneWithOrderByItems(s(this,G).queryNode,iu([e,r]))})}limit(e){return new Ye({...s(this,G),queryNode:xs.cloneWithLimit(s(this,G).queryNode,Gh.create(it(e)))})}$call(e){return e(this)}$if(e,r){return e?r(this):new Ye({...s(this,G)})}$castTo(){return new Ye(s(this,G))}$narrowType(){return new Ye(s(this,G))}$assertType(){return new Ye(s(this,G))}withPlugin(e){return new Ye({...s(this,G),executor:s(this,G).executor.withPlugin(e)})}toOperationNode(){return s(this,G).executor.transformQuery(s(this,G).queryNode,s(this,G).queryId)}compile(){return s(this,G).executor.compileQuery(this.toOperationNode(),s(this,G).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,G).executor.executeQuery(e,s(this,G).queryId);return s(this,G).executor.adapter.supportsReturning&&r.returning?i.rows:[new Aw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,G).executor.stream(r,e,s(this,G).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new Ye({...s(this,G),queryNode:ue.cloneWithExplain(s(this,G).queryNode,e,r)}).execute()}};G=new WeakMap;let ra=Ye;le(ra,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Rw{constructor(e,r){ee(this,"numUpdatedRows");ee(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=r}}var Z;const et=class et{constructor(e){q(this,Z,void 0);S(this,Z,c(e))}where(...e){return new et({...s(this,Z),queryNode:ue.cloneWithWhere(s(this,Z).queryNode,Nt(e))})}whereRef(e,r,i){return new et({...s(this,Z),queryNode:ue.cloneWithWhere(s(this,Z).queryNode,$r(e,r,i))})}clearWhere(){return new et({...s(this,Z),queryNode:ue.cloneWithoutWhere(s(this,Z).queryNode)})}from(e){return new et({...s(this,Z),queryNode:Zo.cloneWithFromItems(s(this,Z).queryNode,Bs(e))})}innerJoin(...e){return new et({...s(this,Z),queryNode:ue.cloneWithJoin(s(this,Z).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new et({...s(this,Z),queryNode:ue.cloneWithJoin(s(this,Z).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new et({...s(this,Z),queryNode:ue.cloneWithJoin(s(this,Z).queryNode,St("RightJoin",e))})}fullJoin(...e){return new et({...s(this,Z),queryNode:ue.cloneWithJoin(s(this,Z).queryNode,St("FullJoin",e))})}set(...e){return new et({...s(this,Z),queryNode:Zo.cloneWithUpdates(s(this,Z).queryNode,Tw(...e))})}returning(e){return new et({...s(this,Z),queryNode:ue.cloneWithReturning(s(this,Z).queryNode,Xi(e))})}returningAll(){return new et({...s(this,Z),queryNode:ue.cloneWithReturning(s(this,Z).queryNode,io())})}$call(e){return e(this)}$if(e,r){return e?r(this):new et({...s(this,Z)})}$castTo(){return new et(s(this,Z))}$narrowType(){return new et(s(this,Z))}$assertType(){return new et(s(this,Z))}withPlugin(e){return new et({...s(this,Z),executor:s(this,Z).executor.withPlugin(e)})}toOperationNode(){return s(this,Z).executor.transformQuery(s(this,Z).queryNode,s(this,Z).queryId)}compile(){return s(this,Z).executor.compileQuery(this.toOperationNode(),s(this,Z).queryId)}async execute(){const e=this.compile(),r=e.query,i=await s(this,Z).executor.executeQuery(e,s(this,Z).queryId);return s(this,Z).executor.adapter.supportsReturning&&r.returning?i.rows:[new Rw(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0),i.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,Z).executor.stream(r,e,s(this,Z).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new et({...s(this,Z),queryNode:ue.cloneWithExplain(s(this,Z).queryNode,e,r)}).execute()}};Z=new WeakMap;let na=et;le(na,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const bd=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:pn.create(t),columns:e?c(e.map(He.create)):void 0})}}),ia=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var Sr;const _a=class _a{constructor(e){q(this,Sr,void 0);S(this,Sr,c(e))}materialized(){return new _a({...s(this,Sr),node:ia.cloneWith(s(this,Sr).node,{materialized:!0})})}notMaterialized(){return new _a({...s(this,Sr),node:ia.cloneWith(s(this,Sr).node,{materialized:!1})})}toOperationNode(){return s(this,Sr).node}};Sr=new WeakMap;let sa=_a;le(sa,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function vd(t,e){const r=e(jw()).toOperationNode();return Qt(t)?t(Dw(r)).toOperationNode():ia.create(zh(t),r)}function Dw(t){return e=>new sa({node:ia.create(zh(e),t)})}function zh(t){if(t.includes("(")){const e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(a=>a.trim());return bd.create(r,i)}else return bd.create(t)}const To=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}}),xd=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Pw(t){let e="";for(let r=0;r<t;++r)e+=Lw();return e}function Lw(){return xd[~~(Math.random()*xd.length)]}function ke(){return new Mw}var xi;class Mw{constructor(){q(this,xi,void 0)}get queryId(){return s(this,xi)===void 0&&S(this,xi,Pw(8)),s(this,xi)}}xi=new WeakMap;var Wa;class Ul{constructor(){ee(this,"nodeStack",[]);q(this,Wa,c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),AddIndexNode:this.transformAddIndex.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return s(this,Wa)[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Wa=new WeakMap;const Bw=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Oi,Ln,Mn,Ia,Yh,Ea,Xh,Ta,Zh,Bn,ms,Vs,Xu,ka,ef;class Fw extends Ul{constructor(r){super();q(this,Ia);q(this,Ea);q(this,Ta);q(this,Bn);q(this,Vs);q(this,ka);q(this,Oi,void 0);q(this,Ln,new Set);q(this,Mn,new Set);S(this,Oi,r)}transformNodeImpl(r){if(!xe(this,Ia,Yh).call(this,r))return super.transformNodeImpl(r);const i=xe(this,Ta,Zh).call(this,r);for(const f of i)s(this,Mn).add(f);const a=xe(this,Ea,Xh).call(this,r);for(const f of a)s(this,Ln).add(f);const l=super.transformNodeImpl(r);for(const f of a)s(this,Ln).delete(f);for(const f of i)s(this,Mn).delete(f);return l}transformSchemableIdentifier(r){const i=super.transformSchemableIdentifier(r);return i.schema||!s(this,Ln).has(r.identifier.name)?i:{...i,schema:Ue.create(s(this,Oi))}}transformReferences(r){const i=super.transformReferences(r);return i.table.table.schema?i:{...i,table:pn.createWithSchema(s(this,Oi),i.table.table.identifier.name)}}}Oi=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Ia=new WeakSet,Yh=function(r){return r.kind in Bw},Ea=new WeakSet,Xh=function(r){const i=new Set;if("name"in r&&r.name&&yn.is(r.name)&&xe(this,Vs,Xu).call(this,r.name,i),"from"in r&&r.from)for(const a of r.from.froms)xe(this,Bn,ms).call(this,a,i);if("into"in r&&r.into&&xe(this,Bn,ms).call(this,r.into,i),"table"in r&&r.table&&xe(this,Bn,ms).call(this,r.table,i),"joins"in r&&r.joins)for(const a of r.joins)xe(this,Bn,ms).call(this,a.table,i);return i},Ta=new WeakSet,Zh=function(r){const i=new Set;return"with"in r&&r.with&&xe(this,ka,ef).call(this,r.with,i),i},Bn=new WeakSet,ms=function(r,i){const a=pn.is(r)?r:bn.is(r)&&pn.is(r.node)?r.node:null;a&&xe(this,Vs,Xu).call(this,a.table,i)},Vs=new WeakSet,Xu=function(r,i){const a=r.identifier.name;!s(this,Ln).has(a)&&!s(this,Mn).has(a)&&i.add(a)},ka=new WeakSet,ef=function(r,i){for(const a of r.expressions){const l=a.name.table.table.identifier.name;s(this,Mn).has(l)||i.add(l)}};var Js;class so{constructor(e){q(this,Js,void 0);S(this,Js,new Fw(e))}transformQuery(e){return s(this,Js).transformNode(e.node)}async transformResult(e){return e.result}}Js=new WeakMap;var We;const kn=class kn{constructor(e){q(this,We,void 0);S(this,We,c(e))}selectFrom(e){return rl({queryId:ke(),executor:s(this,We).executor,queryNode:ce.createFrom(Bs(e),s(this,We).withNode)})}selectNoFrom(e){return rl({queryId:ke(),executor:s(this,We).executor,queryNode:ce.cloneWithSelections(ce.create(s(this,We).withNode),Xi(e))})}insertInto(e){return new Ms({queryId:ke(),executor:s(this,We).executor,queryNode:ur.create(Ke(e),s(this,We).withNode)})}replaceInto(e){return new Ms({queryId:ke(),executor:s(this,We).executor,queryNode:ur.create(Ke(e),s(this,We).withNode,!0)})}deleteFrom(e){return new ra({queryId:ke(),executor:s(this,We).executor,queryNode:xs.create(Bs(e),s(this,We).withNode)})}updateTable(e){return new na({queryId:ke(),executor:s(this,We).executor,queryNode:Zo.create(Fs(e),s(this,We).withNode)})}with(e,r){const i=vd(e,r);return new kn({...s(this,We),withNode:s(this,We).withNode?To.cloneWithExpression(s(this,We).withNode,i):To.create(i)})}withRecursive(e,r){const i=vd(e,r);return new kn({...s(this,We),withNode:s(this,We).withNode?To.cloneWithExpression(s(this,We).withNode,i):To.create(i,{recursive:!0})})}withPlugin(e){return new kn({...s(this,We),executor:s(this,We).executor.withPlugin(e)})}withoutPlugins(){return new kn({...s(this,We),executor:s(this,We).executor.withoutPlugins()})}withSchema(e){return new kn({...s(this,We),executor:s(this,We).executor.withPluginAtFront(new so(e))})}};We=new WeakMap;let oa=kn;var Ks,Ci,qi;class Od{constructor(){q(this,Ks,void 0);q(this,Ci,void 0);q(this,qi,void 0);ee(this,"resolve",e=>{s(this,Ci)&&s(this,Ci).call(this,e)});ee(this,"reject",e=>{s(this,qi)&&s(this,qi).call(this,e)});S(this,Ks,new Promise((e,r)=>{S(this,qi,r),S(this,Ci,e)}))}get promise(){return s(this,Ks)}}Ks=new WeakMap,Ci=new WeakMap,qi=new WeakMap;const Cd=new Set;function Uw(t){Cd.has(t)||(Cd.add(t),console.log(t))}const $w=c([]);var Fn,Hs,Zu;class tf{constructor(e=$w){q(this,Hs);q(this,Fn,void 0);S(this,Fn,e)}get plugins(){return s(this,Fn)}transformQuery(e,r){for(const i of s(this,Fn)){const a=i.transformQuery({node:e,queryId:r});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{const a=await i.executeQuery(e),l=await xe(this,Hs,Zu).call(this,a,r);return Qw(a,l),l})}async*stream(e,r,i){const a=new Od,l=new Od;this.provideConnection(async y=>(a.resolve(y),await l.promise)).catch(y=>a.reject(y));const f=await a.promise;try{for await(const y of f.streamQuery(e,r))yield await xe(this,Hs,Zu).call(this,y,i)}finally{l.resolve()}}}Fn=new WeakMap,Hs=new WeakSet,Zu=async function(e,r){for(const i of s(this,Fn))e=await i.transformResult({result:e,queryId:r});return e};function Qw(t,e){const{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Uw("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class hi extends tf{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new hi([...this.plugins,e])}withPlugins(e){return new hi([...this.plugins,...e])}withPluginAtFront(e){return new hi([e,...this.plugins])}withoutPlugins(){return new hi([])}}const $l=new hi;function jw(){return new oa({executor:$l})}function Vw(t,e){return new Yo({joinNode:gs.create(t,Fs(e))})}function Jw(){return new Xo({overNode:Yu.create()})}function St(t,e){if(e.length===3)return Hw(t,e[0],e[1],e[2]);if(e.length===2)return Kw(t,e[0],e[1]);throw new Error("not implemented")}function Kw(t,e,r){return r(Vw(t,e)).toOperationNode()}function Hw(t,e,r,i){return gs.createWithOn(t,Fs(e),$r(r,"=",i))}const Gw=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}}),zw=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function Yw(t){return t=Qt(t)?t(Zi()):t,Ls(t).map(zw.create)}const rf=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function li(t,e,r){return Qt(e)&&(e=e(Vl())),Br(e)||(e=[e]),e.map(i=>rf.create(t,ri(i),r))}var Ar;const Sa=class Sa{constructor(e){q(this,Ar,void 0);S(this,Ar,e)}get expressionType(){}as(e){return new Ql(this,e)}or(...e){return new el(Yi.create(s(this,Ar),Nt(e)))}and(...e){return new tl(wn.create(s(this,Ar),Nt(e)))}$castTo(){return new Sa(s(this,Ar))}$notNull(){return new Sa(s(this,Ar))}toOperationNode(){return s(this,Ar)}};Ar=new WeakMap;let Me=Sa;var _i,sn;class Ql{constructor(e,r){q(this,_i,void 0);q(this,sn,void 0);S(this,_i,e),S(this,sn,r)}get expression(){return s(this,_i)}get alias(){return s(this,sn)}toOperationNode(){return bn.create(s(this,_i).toOperationNode(),jt(s(this,sn))?s(this,sn).toOperationNode():Ue.create(s(this,sn)))}}_i=new WeakMap,sn=new WeakMap;var Un;const Aa=class Aa{constructor(e){q(this,Un,void 0);S(this,Un,e)}get expressionType(){}as(e){return new Ql(this,e)}or(...e){return new Aa(Yi.create(s(this,Un),Nt(e)))}$castTo(){return new Aa(s(this,Un))}toOperationNode(){return Ji.create(s(this,Un))}};Un=new WeakMap;let el=Aa;var $n;const Ra=class Ra{constructor(e){q(this,$n,void 0);S(this,$n,e)}get expressionType(){}as(e){return new Ql(this,e)}and(...e){return new Ra(wn.create(s(this,$n),Nt(e)))}$castTo(){return new Ra(s(this,$n))}toOperationNode(){return Ji.create(s(this,$n))}};$n=new WeakMap;let tl=Ra;var T;const X=class X{constructor(e){q(this,T,void 0);S(this,T,c(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new X({...s(this,T),queryNode:ue.cloneWithWhere(s(this,T).queryNode,Nt(e))})}whereRef(e,r,i){return new X({...s(this,T),queryNode:ue.cloneWithWhere(s(this,T).queryNode,$r(e,r,i))})}having(...e){return new X({...s(this,T),queryNode:ce.cloneWithHaving(s(this,T).queryNode,Nt(e))})}havingRef(e,r,i){return new X({...s(this,T),queryNode:ce.cloneWithHaving(s(this,T).queryNode,$r(e,r,i))})}select(e){return new X({...s(this,T),queryNode:ce.cloneWithSelections(s(this,T).queryNode,Xi(e))})}distinctOn(e){return new X({...s(this,T),queryNode:ce.cloneWithDistinctOn(s(this,T).queryNode,Ls(e))})}modifyFront(e){return new X({...s(this,T),queryNode:ce.cloneWithFrontModifier(s(this,T).queryNode,Er.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.createWithExpression(e.toOperationNode()))})}distinct(){return new X({...s(this,T),queryNode:ce.cloneWithFrontModifier(s(this,T).queryNode,Er.create("Distinct"))})}forUpdate(e){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForUpdate",e?Eo(e).map(Ke):void 0))})}forShare(e){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForShare",e?Eo(e).map(Ke):void 0))})}forKeyShare(e){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForKeyShare",e?Eo(e).map(Ke):void 0))})}forNoKeyUpdate(e){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("ForNoKeyUpdate",e?Eo(e).map(Ke):void 0))})}skipLocked(){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("SkipLocked"))})}noWait(){return new X({...s(this,T),queryNode:ce.cloneWithEndModifier(s(this,T).queryNode,Er.create("NoWait"))})}selectAll(e){return new X({...s(this,T),queryNode:ce.cloneWithSelections(s(this,T).queryNode,io(e))})}innerJoin(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("InnerJoin",e))})}leftJoin(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("LeftJoin",e))})}rightJoin(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("RightJoin",e))})}fullJoin(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("FullJoin",e))})}innerJoinLateral(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("LateralInnerJoin",e))})}leftJoinLateral(...e){return new X({...s(this,T),queryNode:ue.cloneWithJoin(s(this,T).queryNode,St("LateralLeftJoin",e))})}orderBy(...e){return new X({...s(this,T),queryNode:ce.cloneWithOrderByItems(s(this,T).queryNode,iu(e))})}groupBy(e){return new X({...s(this,T),queryNode:ce.cloneWithGroupByItems(s(this,T).queryNode,Yw(e))})}limit(e){return new X({...s(this,T),queryNode:ce.cloneWithLimit(s(this,T).queryNode,Gh.create(it(e)))})}offset(e){return new X({...s(this,T),queryNode:ce.cloneWithOffset(s(this,T).queryNode,Gw.create(it(e)))})}union(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("union",e,!1))})}unionAll(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("union",e,!0))})}intersect(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("intersect",e,!1))})}intersectAll(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("intersect",e,!0))})}except(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("except",e,!1))})}exceptAll(e){return new X({...s(this,T),queryNode:ce.cloneWithSetOperations(s(this,T).queryNode,li("except",e,!0))})}as(e){return new nf(this,e)}clearSelect(){return new X({...s(this,T),queryNode:ce.cloneWithoutSelections(s(this,T).queryNode)})}clearWhere(){return new X({...s(this,T),queryNode:ue.cloneWithoutWhere(s(this,T).queryNode)})}clearLimit(){return new X({...s(this,T),queryNode:ce.cloneWithoutLimit(s(this,T).queryNode)})}clearOffset(){return new X({...s(this,T),queryNode:ce.cloneWithoutOffset(s(this,T).queryNode)})}clearOrderBy(){return new X({...s(this,T),queryNode:ce.cloneWithoutOrderBy(s(this,T).queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new X({...s(this,T)})}$castTo(){return new X(s(this,T))}$narrowType(){return new X(s(this,T))}$assertType(){return new X(s(this,T))}$asTuple(){return new Me(this.toOperationNode())}withPlugin(e){return new X({...s(this,T),executor:s(this,T).executor.withPlugin(e)})}toOperationNode(){return s(this,T).executor.transformQuery(s(this,T).queryNode,s(this,T).queryId)}compile(){return s(this,T).executor.compileQuery(this.toOperationNode(),s(this,T).queryId)}async execute(){const e=this.compile();return(await s(this,T).executor.executeQuery(e,s(this,T).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=su){const r=await this.executeTakeFirst();if(r===void 0)throw ou(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){const r=this.compile(),i=s(this,T).executor.stream(r,e,s(this,T).queryId);for await(const a of i)yield*a.rows}async explain(e,r){return await new X({...s(this,T),queryNode:ue.cloneWithExplain(s(this,T).queryNode,e,r)}).execute()}};T=new WeakMap;let aa=X;le(aa,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function rl(t){return new aa(t)}var Wi,Ii;class nf{constructor(e,r){q(this,Wi,void 0);q(this,Ii,void 0);S(this,Wi,e),S(this,Ii,r)}get expression(){return s(this,Wi)}get alias(){return s(this,Ii)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return bn.create(s(this,Wi).toOperationNode(),Ue.create(s(this,Ii)))}}Wi=new WeakMap,Ii=new WeakMap;le(nf,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Dn=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?kt.cloneWithOperation(t.filter,"And",e):kt.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?kt.cloneWithOperation(t.filter,"Or",e):kt.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}}),qd=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var xt;const tn=class tn{constructor(e){q(this,xt,void 0);S(this,xt,c(e))}get expressionType(){}as(e){return new Xw(this,e)}distinct(){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithDistinct(s(this,xt).aggregateFunctionNode)})}filterWhere(...e){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,Nt(e))})}filterWhereRef(e,r,i){return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithFilter(s(this,xt).aggregateFunctionNode,$r(e,r,i))})}over(e){const r=Jw();return new tn({...s(this,xt),aggregateFunctionNode:Dn.cloneWithOver(s(this,xt).aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new tn(s(this,xt))}$notNull(){return new tn(s(this,xt))}toOperationNode(){return s(this,xt).aggregateFunctionNode}};xt=new WeakMap;let bi=tn;le(bi,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Ei,Ti;class Xw{constructor(e,r){q(this,Ei,void 0);q(this,Ti,void 0);S(this,Ei,e),S(this,Ti,r)}get expression(){return s(this,Ei)}get alias(){return s(this,Ti)}toOperationNode(){return bn.create(s(this,Ei).toOperationNode(),Ue.create(s(this,Ti)))}}Ei=new WeakMap,Ti=new WeakMap;function sf(){const t=(r,i)=>new Me(qd.create(r,Ls(i??[]))),e=(r,i)=>new bi({aggregateFunctionNode:Dn.create(r,i?Ls(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new bi({aggregateFunctionNode:Dn.create("count",io(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new bi({aggregateFunctionNode:Dn.create("json_agg",[Gt(r)?Ke(r):r.toOperationNode()])})},toJson(r){return new Me(qd.create("to_json",[Gt(r)?Ke(r):r.toOperationNode()]))}})}const Zw=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function eN(t,e){return Zw.create(Nn.create(t),Ht(e))}const jl=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}}),Cr=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),jl.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var ki;class of{constructor(e){q(this,ki,void 0);S(this,ki,c(e))}when(...e){return new af({...s(this,ki),node:Cr.cloneWithWhen(s(this,ki).node,jl.create(Nt(e)))})}}ki=new WeakMap;var Si;class af{constructor(e){q(this,Si,void 0);S(this,Si,c(e))}then(e){return new tN({...s(this,Si),node:Cr.cloneWithThen(s(this,Si).node,Ll(e)?Ml(e):it(e))})}}Si=new WeakMap;var mr;class tN{constructor(e){q(this,mr,void 0);S(this,mr,c(e))}when(...e){return new af({...s(this,mr),node:Cr.cloneWithWhen(s(this,mr).node,jl.create(Nt(e)))})}else(e){return new rN({...s(this,mr),node:Cr.cloneWith(s(this,mr).node,{else:Ll(e)?Ml(e):it(e)})})}end(){return new Me(Cr.cloneWith(s(this,mr).node,{isStatement:!1}))}endCase(){return new Me(Cr.cloneWith(s(this,mr).node,{isStatement:!0}))}}mr=new WeakMap;var Ai;class rN{constructor(e){q(this,Ai,void 0);S(this,Ai,c(e))}end(){return new Me(Cr.cloneWith(s(this,Ai).node,{isStatement:!1}))}endCase(){return new Me(Cr.cloneWith(s(this,Ai).node,{isStatement:!0}))}}Ai=new WeakMap;const _d=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var yr,Gs,nl;class Os{constructor(e){q(this,Gs);q(this,yr,void 0);S(this,yr,e)}at(e){return xe(this,Gs,nl).call(this,"ArrayLocation",e)}key(e){return xe(this,Gs,nl).call(this,"Member",e)}}yr=new WeakMap,Gs=new WeakSet,nl=function(e,r){return Ho.is(s(this,yr))?new Wd(Ho.cloneWithTraversal(s(this,yr),bs.is(s(this,yr).traversal)?bs.cloneWithLeg(s(this,yr).traversal,_d.create(e,r)):$h.cloneWithValue(s(this,yr).traversal,Ur.createImmediate(r)))):new Wd(bs.cloneWithLeg(s(this,yr),_d.create(e,r)))};var Qn;class Wd extends Os{constructor(r){super(r);q(this,Qn,void 0);S(this,Qn,r)}get expressionType(){}as(r){return new nN(this,r)}$castTo(){return new Os(s(this,Qn))}$notNull(){return new Os(s(this,Qn))}toOperationNode(){return s(this,Qn)}}Qn=new WeakMap;var Ri,on;class nN{constructor(e,r){q(this,Ri,void 0);q(this,on,void 0);S(this,Ri,e),S(this,on,r)}get expression(){return s(this,Ri)}get alias(){return s(this,on)}toOperationNode(){return bn.create(s(this,Ri).toOperationNode(),jt(s(this,on))?s(this,on).toOperationNode():Ue.create(s(this,on)))}}Ri=new WeakMap,on=new WeakMap;const Id=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}});function Vl(t=$l){function e(a,l,f){return new Me(Bl(a,l,f))}function r(a,l){return new Me(eN(a,l))}const i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return rl({queryId:ke(),executor:t,queryNode:ce.createFrom(Bs(a))})},case(a){return new of({node:Cr.create(Zn(a)?void 0:Ht(a))})},ref(a,l){return Zn(l)?new Me(Fr(a)):new Os(pw(a,l))},jsonPath(){return new Os(bs.create())},table(a){return new Me(Ke(a))},val(a){return new Me(it(a))},refTuple(...a){return new Me(Id.create(a.map(Ht)))},tuple(...a){return new Me(Id.create(a.map(it)))},lit(a){return new Me(Ml(a))},unary:r,not(a){return r("not",a)},exists(a){return r("exists",a)},neg(a){return r("-",a)},between(a,l,f){return new Me(Vi.create(Ht(a),Nn.create("between"),wn.create(it(l),it(f))))},betweenSymmetric(a,l,f){return new Me(Vi.create(Ht(a),Nn.create("between symmetric"),wn.create(it(l),it(f))))},and(a){return Br(a)?new Me(Gu(a,"and")):new Me(dd(a,"and"))},or(a){return Br(a)?new Me(Gu(a,"or")):new Me(dd(a,"or"))},parens(...a){const l=Nt(a);return Ji.is(l)?new Me(l):new Me(Ji.create(l))},withSchema(a){return Vl(t.withPluginAtFront(new so(a)))}});return i.fn=sf(),i.eb=i,i}function Zi(t){return Vl()}function ri(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Zi()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function uf(t){if(jt(t))return t.toOperationNode();if(Qt(t))return t(Zi()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function oo(t){return iw(t)||sw(t)||Qt(t)}function Bs(t){return Br(t)?t.map(e=>Fs(e)):[Fs(t)]}function Fs(t){return Gt(t)?iN(t):uf(t)}function iN(t){const e=" as ";if(t.includes(e)){const[r,i]=t.split(e).map(lf);return bn.create(Ke(r),Ue.create(i))}else return Ke(t)}function Ke(t){const e=".";if(t.includes(e)){const[r,i]=t.split(e).map(lf);return pn.createWithSchema(r,i)}else return pn.create(t)}function lf(t){return t.trim()}const cf=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}}),je=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:He.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}}),df=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:He.create(t)})}}),hf=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:He.create(t),renameTo:He.create(e)})}}),Jl=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?Ue.create(e):void 0})}}),sN=["no action","restrict","cascade","set null","set default"],Lo=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function ff(t){return jt(t)?t.toOperationNode():Ur.createImmediate(t)}const ko=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}}),oN=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function ua(t){if(sN.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ie;const tt=class tt{constructor(e){q(this,Ie,void 0);S(this,Ie,e)}autoIncrement(){return new tt(je.cloneWith(s(this,Ie),{autoIncrement:!0}))}primaryKey(){return new tt(je.cloneWith(s(this,Ie),{primaryKey:!0}))}references(e){const r=Fr(e);if(!r.table||Rl.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new tt(je.cloneWith(s(this,Ie),{references:Lo.create(r.table,[r.column])}))}onDelete(e){if(!s(this,Ie).references)throw new Error("on delete constraint can only be added for foreign keys");return new tt(je.cloneWith(s(this,Ie),{references:Lo.cloneWithOnDelete(s(this,Ie).references,ua(e))}))}onUpdate(e){if(!s(this,Ie).references)throw new Error("on update constraint can only be added for foreign keys");return new tt(je.cloneWith(s(this,Ie),{references:Lo.cloneWithOnUpdate(s(this,Ie).references,ua(e))}))}unique(){return new tt(je.cloneWith(s(this,Ie),{unique:!0}))}notNull(){return new tt(je.cloneWith(s(this,Ie),{notNull:!0}))}unsigned(){return new tt(je.cloneWith(s(this,Ie),{unsigned:!0}))}defaultTo(e){return new tt(je.cloneWith(s(this,Ie),{defaultTo:oN.create(ff(e))}))}check(e){return new tt(je.cloneWith(s(this,Ie),{check:Jl.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new tt(je.cloneWith(s(this,Ie),{generated:ko.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new tt(je.cloneWith(s(this,Ie),{generated:ko.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new tt(je.cloneWith(s(this,Ie),{generated:ko.create({identity:!0,byDefault:!0})}))}stored(){if(!s(this,Ie).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new tt(je.cloneWith(s(this,Ie),{generated:ko.cloneWith(s(this,Ie).generated,{stored:!0})}))}modifyFront(e){return new tt(je.cloneWithFrontModifier(s(this,Ie),e.toOperationNode()))}nullsNotDistinct(){return new tt(je.cloneWith(s(this,Ie),{nullsNotDistinct:!0}))}modifyEnd(e){return new tt(je.cloneWithEndModifier(s(this,Ie),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return s(this,Ie)}};Ie=new WeakMap;let gn=tt;le(gn,"don't await ColumnDefinitionBuilder instances directly.");const pf=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}}),aN=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function Hi(t){return jt(t)?t.toOperationNode():aN.create(t)}const la=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Lo.create(e,r),name:i?Ue.create(i):void 0})},cloneWith(t,e){return c({...t,...e})}});var jn;const Da=class Da{constructor(e){q(this,jn,void 0);S(this,jn,e)}onDelete(e){return new Da(la.cloneWith(s(this,jn),{onDelete:ua(e)}))}onUpdate(e){return new Da(la.cloneWith(s(this,jn),{onUpdate:ua(e)}))}$call(e){return e(this)}toOperationNode(){return s(this,jn)}};jn=new WeakMap;let Us=Da;le(Us,"don't await ForeignKeyConstraintBuilder instances directly.");const Mo=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}}),Kl=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(He.create)),name:e?Ue.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}}),Bo=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})}}),hs=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:He.create(t),[e]:r})}});var Rr;class Hl{constructor(e){q(this,Rr,void 0);S(this,Rr,e)}setDataType(e){return new fs(hs.create(s(this,Rr),"dataType",Hi(e)))}setDefault(e){return new fs(hs.create(s(this,Rr),"setDefault",ff(e)))}dropDefault(){return new fs(hs.create(s(this,Rr),"dropDefault",!0))}setNotNull(){return new fs(hs.create(s(this,Rr),"setNotNull",!0))}dropNotNull(){return new fs(hs.create(s(this,Rr),"dropNotNull",!0))}$call(e){return e(this)}}Rr=new WeakMap;var zs;class fs{constructor(e){q(this,zs,void 0);S(this,zs,e)}toOperationNode(){return s(this,zs)}}zs=new WeakMap;var ir;class En{constructor(e){q(this,ir,void 0);S(this,ir,c(e))}toOperationNode(){return s(this,ir).executor.transformQuery(s(this,ir).node,s(this,ir).queryId)}compile(){return s(this,ir).executor.compileQuery(this.toOperationNode(),s(this,ir).queryId)}async execute(){await s(this,ir).executor.executeQuery(this.compile(),s(this,ir).queryId)}}ir=new WeakMap;le(En,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var mt;const Pa=class Pa{constructor(e){q(this,mt,void 0);S(this,mt,c(e))}onDelete(e){return new Pa({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Pa({...s(this,mt),constraintBuilder:s(this,mt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return s(this,mt).executor.transformQuery(Ee.cloneWithTableProps(s(this,mt).node,{addConstraint:Mo.create(s(this,mt).constraintBuilder.toOperationNode())}),s(this,mt).queryId)}compile(){return s(this,mt).executor.compileQuery(this.toOperationNode(),s(this,mt).queryId)}async execute(){await s(this,mt).executor.executeQuery(this.compile(),s(this,mt).queryId)}};mt=new WeakMap;let ca=Pa;le(ca,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Xe;const _s=class _s{constructor(e){q(this,Xe,void 0);S(this,Xe,c(e))}ifExists(){return new _s({...s(this,Xe),node:Ee.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{ifExists:!0})})})}cascade(){return new _s({...s(this,Xe),node:Ee.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new _s({...s(this,Xe),node:Ee.cloneWithTableProps(s(this,Xe).node,{dropConstraint:Bo.cloneWith(s(this,Xe).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return s(this,Xe).executor.transformQuery(s(this,Xe).node,s(this,Xe).queryId)}compile(){return s(this,Xe).executor.compileQuery(this.toOperationNode(),s(this,Xe).queryId)}async execute(){await s(this,Xe).executor.executeQuery(this.compile(),s(this,Xe).queryId)}};Xe=new WeakMap;let da=_s;le(da,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const mf=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(He.create)),name:e?Ue.create(e):void 0})}}),ci=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:Ue.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var De;const Sn=class Sn{constructor(e){q(this,De,void 0);S(this,De,c(e))}unique(){return new Sn({...s(this,De),node:Ee.cloneWithTableProps(s(this,De).node,{addIndex:ci.cloneWith(s(this,De).node.addIndex,{unique:!0})})})}column(e){return new Sn({...s(this,De),node:Ee.cloneWithTableProps(s(this,De).node,{addIndex:ci.cloneWithColumns(s(this,De).node.addIndex,[Go(e)])})})}columns(e){return new Sn({...s(this,De),node:Ee.cloneWithTableProps(s(this,De).node,{addIndex:ci.cloneWithColumns(s(this,De).node.addIndex,e.map(Go))})})}expression(e){return new Sn({...s(this,De),node:Ee.cloneWithTableProps(s(this,De).node,{addIndex:ci.cloneWithColumns(s(this,De).node.addIndex,[e.toOperationNode()])})})}using(e){return new Sn({...s(this,De),node:Ee.cloneWithTableProps(s(this,De).node,{addIndex:ci.cloneWith(s(this,De).node.addIndex,{using:yt.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return s(this,De).executor.transformQuery(s(this,De).node,s(this,De).queryId)}compile(){return s(this,De).executor.compileQuery(this.toOperationNode(),s(this,De).queryId)}async execute(){await s(this,De).executor.executeQuery(this.compile(),s(this,De).queryId)}};De=new WeakMap;let ha=Sn;le(ha,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");var Di;const zl=class zl{constructor(e){q(this,Di,void 0);S(this,Di,e)}toOperationNode(){return s(this,Di)}nullsNotDistinct(){return new zl(Kl.cloneWith(s(this,Di),{nullsNotDistinct:!0}))}};Di=new WeakMap;let $s=zl;le($s,"don't await UniqueConstraintNodeBuilder instances directly.");var ge;class yf{constructor(e){q(this,ge,void 0);S(this,ge,c(e))}renameTo(e){return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{renameTo:Ke(e)})})}setSchema(e){return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{setSchema:Ue.create(e)})})}alterColumn(e,r){const i=r(new Hl(e));return new nn({...s(this,ge),node:Ee.cloneWithColumnAlteration(s(this,ge).node,i.toOperationNode())})}dropColumn(e){return new nn({...s(this,ge),node:Ee.cloneWithColumnAlteration(s(this,ge).node,df.create(e))})}renameColumn(e,r){return new nn({...s(this,ge),node:Ee.cloneWithColumnAlteration(s(this,ge).node,hf.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Hi(r))));return new nn({...s(this,ge),node:Ee.cloneWithColumnAlteration(s(this,ge).node,cf.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(je.create(e,Hi(r))));return new nn({...s(this,ge),node:Ee.cloneWithColumnAlteration(s(this,ge).node,pf.create(a.toOperationNode()))})}addUniqueConstraint(e,r,i=fn){const a=i(new $s(Kl.create(r,e)));return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{addConstraint:Mo.create(a.toOperationNode())})})}addCheckConstraint(e,r){return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{addConstraint:Mo.create(Jl.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,a){return new ca({...s(this,ge),constraintBuilder:new Us(la.create(r.map(He.create),Ke(i),a.map(He.create),e))})}addPrimaryKeyConstraint(e,r){return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{addConstraint:Mo.create(mf.create(r,e))})})}dropConstraint(e){return new da({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{dropConstraint:Bo.create(e)})})}addIndex(e){return new ha({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{addIndex:ci.create(e)})})}dropIndex(e){return new En({...s(this,ge),node:Ee.cloneWithTableProps(s(this,ge).node,{dropIndex:Ns.create(e)})})}$call(e){return e(this)}}ge=new WeakMap;var Je;const An=class An{constructor(e){q(this,Je,void 0);S(this,Je,c(e))}alterColumn(e,r){const i=r(new Hl(e));return new An({...s(this,Je),node:Ee.cloneWithColumnAlteration(s(this,Je).node,i.toOperationNode())})}dropColumn(e){return new An({...s(this,Je),node:Ee.cloneWithColumnAlteration(s(this,Je).node,df.create(e))})}renameColumn(e,r){return new An({...s(this,Je),node:Ee.cloneWithColumnAlteration(s(this,Je).node,hf.create(e,r))})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Hi(r))));return new An({...s(this,Je),node:Ee.cloneWithColumnAlteration(s(this,Je).node,cf.create(a.toOperationNode()))})}modifyColumn(e,r,i=fn){const a=i(new gn(je.create(e,Hi(r))));return new An({...s(this,Je),node:Ee.cloneWithColumnAlteration(s(this,Je).node,pf.create(a.toOperationNode()))})}toOperationNode(){return s(this,Je).executor.transformQuery(s(this,Je).node,s(this,Je).queryId)}compile(){return s(this,Je).executor.compileQuery(this.toOperationNode(),s(this,Je).queryId)}async execute(){await s(this,Je).executor.executeQuery(this.compile(),s(this,Je).queryId)}};Je=new WeakMap;let nn=An;le(yf,"don't await AlterTableBuilder instances");le(Hl,"don't await AlterColumnBuilder instances");le(nn,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class wf extends Ul{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var qe;const tr=class tr{constructor(e){q(this,qe,void 0);S(this,qe,c(e))}ifNotExists(){return new tr({...s(this,qe),node:Tr.cloneWith(s(this,qe).node,{ifNotExists:!0})})}unique(){return new tr({...s(this,qe),node:Tr.cloneWith(s(this,qe).node,{unique:!0})})}nullsNotDistinct(){return new tr({...s(this,qe),node:Tr.cloneWith(s(this,qe).node,{nullsNotDistinct:!0})})}on(e){return new tr({...s(this,qe),node:Tr.cloneWith(s(this,qe).node,{table:Ke(e)})})}column(e){return new tr({...s(this,qe),node:Tr.cloneWithColumns(s(this,qe).node,[Go(e)])})}columns(e){return new tr({...s(this,qe),node:Tr.cloneWithColumns(s(this,qe).node,e.map(Go))})}expression(e){return new tr({...s(this,qe),node:Tr.cloneWithColumns(s(this,qe).node,[e.toOperationNode()])})}using(e){return new tr({...s(this,qe),node:Tr.cloneWith(s(this,qe).node,{using:yt.createWithSql(e)})})}where(...e){const r=new wf;return new tr({...s(this,qe),node:ue.cloneWithWhere(s(this,qe).node,r.transformNode(Nt(e)))})}$call(e){return e(this)}toOperationNode(){return s(this,qe).executor.transformQuery(s(this,qe).node,s(this,qe).queryId)}compile(){return s(this,qe).executor.compileQuery(this.toOperationNode(),s(this,qe).queryId)}async execute(){await s(this,qe).executor.executeQuery(this.compile(),s(this,qe).queryId)}};qe=new WeakMap;let fa=tr;le(fa,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Bt;const Yl=class Yl{constructor(e){q(this,Bt,void 0);S(this,Bt,c(e))}ifNotExists(){return new Yl({...s(this,Bt),node:Lh.cloneWith(s(this,Bt).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Bt).executor.transformQuery(s(this,Bt).node,s(this,Bt).queryId)}compile(){return s(this,Bt).executor.compileQuery(this.toOperationNode(),s(this,Bt).queryId)}async execute(){await s(this,Bt).executor.executeQuery(this.compile(),s(this,Bt).queryId)}};Bt=new WeakMap;let pa=Yl;le(pa,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function uN(t){if(nw.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var fe;const Mt=class Mt{constructor(e){q(this,fe,void 0);S(this,fe,c(e))}temporary(){return new Mt({...s(this,fe),node:Lt.cloneWith(s(this,fe).node,{temporary:!0})})}onCommit(e){return new Mt({...s(this,fe),node:Lt.cloneWith(s(this,fe).node,{onCommit:uN(e)})})}ifNotExists(){return new Mt({...s(this,fe),node:Lt.cloneWith(s(this,fe).node,{ifNotExists:!0})})}addColumn(e,r,i=fn){const a=i(new gn(je.create(e,Hi(r))));return new Mt({...s(this,fe),node:Lt.cloneWithColumn(s(this,fe).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Mt({...s(this,fe),node:Lt.cloneWithConstraint(s(this,fe).node,mf.create(r,e))})}addUniqueConstraint(e,r,i=fn){const a=i(new $s(Kl.create(r,e)));return new Mt({...s(this,fe),node:Lt.cloneWithConstraint(s(this,fe).node,a.toOperationNode())})}addCheckConstraint(e,r){return new Mt({...s(this,fe),node:Lt.cloneWithConstraint(s(this,fe).node,Jl.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,a,l=fn){const f=l(new Us(la.create(r.map(He.create),Ke(i),a.map(He.create),e)));return new Mt({...s(this,fe),node:Lt.cloneWithConstraint(s(this,fe).node,f.toOperationNode())})}modifyFront(e){return new Mt({...s(this,fe),node:Lt.cloneWithFrontModifier(s(this,fe).node,e.toOperationNode())})}modifyEnd(e){return new Mt({...s(this,fe),node:Lt.cloneWithEndModifier(s(this,fe).node,e.toOperationNode())})}as(e){return new Mt({...s(this,fe),node:Lt.cloneWith(s(this,fe).node,{selectQuery:ri(e)})})}$call(e){return e(this)}toOperationNode(){return s(this,fe).executor.transformQuery(s(this,fe).node,s(this,fe).queryId)}compile(){return s(this,fe).executor.compileQuery(this.toOperationNode(),s(this,fe).queryId)}async execute(){await s(this,fe).executor.executeQuery(this.compile(),s(this,fe).queryId)}};fe=new WeakMap;let ma=Mt;le(ma,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var dt;const Ws=class Ws{constructor(e){q(this,dt,void 0);S(this,dt,c(e))}on(e){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{table:Ke(e)})})}ifExists(){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{ifExists:!0})})}cascade(){return new Ws({...s(this,dt),node:Ns.cloneWith(s(this,dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,dt).executor.transformQuery(s(this,dt).node,s(this,dt).queryId)}compile(){return s(this,dt).executor.compileQuery(this.toOperationNode(),s(this,dt).queryId)}async execute(){await s(this,dt).executor.executeQuery(this.compile(),s(this,dt).queryId)}};dt=new WeakMap;let ya=Ws;le(ya,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ot;const La=class La{constructor(e){q(this,Ot,void 0);S(this,Ot,c(e))}ifExists(){return new La({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{ifExists:!0})})}cascade(){return new La({...s(this,Ot),node:Ju.cloneWith(s(this,Ot).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ot).executor.transformQuery(s(this,Ot).node,s(this,Ot).queryId)}compile(){return s(this,Ot).executor.compileQuery(this.toOperationNode(),s(this,Ot).queryId)}async execute(){await s(this,Ot).executor.executeQuery(this.compile(),s(this,Ot).queryId)}};Ot=new WeakMap;let wa=La;le(wa,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Ct;const Ma=class Ma{constructor(e){q(this,Ct,void 0);S(this,Ct,c(e))}ifExists(){return new Ma({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{ifExists:!0})})}cascade(){return new Ma({...s(this,Ct),node:Ku.cloneWith(s(this,Ct).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ct).executor.transformQuery(s(this,Ct).node,s(this,Ct).queryId)}compile(){return s(this,Ct).executor.compileQuery(this.toOperationNode(),s(this,Ct).queryId)}async execute(){await s(this,Ct).executor.executeQuery(this.compile(),s(this,Ct).queryId)}};Ct=new WeakMap;let Na=Ma;le(Na,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const en=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Ba;class lN{constructor(){q(this,Ba,new wf)}transformQuery(e){return s(this,Ba).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Ba=new WeakMap;var Qe;const rn=class rn{constructor(e){q(this,Qe,void 0);S(this,Qe,c(e))}temporary(){return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{temporary:!0})})}materialized(){return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{materialized:!0})})}ifNotExists(){return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{ifNotExists:!0})})}orReplace(){return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{orReplace:!0})})}columns(e){return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{columns:e.map(jh)})})}as(e){const r=e.withPlugin(new lN).toOperationNode();return new rn({...s(this,Qe),node:en.cloneWith(s(this,Qe).node,{as:r})})}$call(e){return e(this)}toOperationNode(){return s(this,Qe).executor.transformQuery(s(this,Qe).node,s(this,Qe).queryId)}compile(){return s(this,Qe).executor.compileQuery(this.toOperationNode(),s(this,Qe).queryId)}async execute(){await s(this,Qe).executor.executeQuery(this.compile(),s(this,Qe).queryId)}};Qe=new WeakMap;let ga=rn;le(ga,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Fo=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:yn.create(t)})},cloneWith(t,e){return c({...t,...e})}});var ht;const Is=class Is{constructor(e){q(this,ht,void 0);S(this,ht,c(e))}materialized(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{materialized:!0})})}ifExists(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{ifExists:!0})})}cascade(){return new Is({...s(this,ht),node:Fo.cloneWith(s(this,ht).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,ht).executor.transformQuery(s(this,ht).node,s(this,ht).queryId)}compile(){return s(this,ht).executor.compileQuery(this.toOperationNode(),s(this,ht).queryId)}async execute(){await s(this,ht).executor.executeQuery(this.compile(),s(this,ht).queryId)}};ht=new WeakMap;let ba=Is;le(ba,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Nf=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Pl.create(e.map(r=>Ur.createImmediate(r)))})}});var Ft;const Xl=class Xl{constructor(e){q(this,Ft,void 0);S(this,Ft,c(e))}toOperationNode(){return s(this,Ft).executor.transformQuery(s(this,Ft).node,s(this,Ft).queryId)}asEnum(e){return new Xl({...s(this,Ft),node:Nf.cloneWithEnum(s(this,Ft).node,e)})}$call(e){return e(this)}compile(){return s(this,Ft).executor.compileQuery(this.toOperationNode(),s(this,Ft).queryId)}async execute(){await s(this,Ft).executor.executeQuery(this.compile(),s(this,Ft).queryId)}};Ft=new WeakMap;let va=Xl;le(va,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const gf=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var Ut;const Zl=class Zl{constructor(e){q(this,Ut,void 0);S(this,Ut,c(e))}ifExists(){return new Zl({...s(this,Ut),node:gf.cloneWith(s(this,Ut).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return s(this,Ut).executor.transformQuery(s(this,Ut).node,s(this,Ut).queryId)}compile(){return s(this,Ut).executor.compileQuery(this.toOperationNode(),s(this,Ut).queryId)}async execute(){await s(this,Ut).executor.executeQuery(this.compile(),s(this,Ut).queryId)}};Ut=new WeakMap;let xa=Zl;le(xa,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Ed(t){const e=".";if(t.includes(e)){const r=t.split(e).map(cN);if(r.length===2)return yn.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return yn.create(t)}function cN(t){return t.trim()}var at;const Es=class Es{constructor(e){q(this,at,void 0);S(this,at,e)}createTable(e){return new ma({queryId:ke(),executor:s(this,at),node:Lt.create(Ke(e))})}dropTable(e){return new Na({queryId:ke(),executor:s(this,at),node:Ku.create(Ke(e))})}createIndex(e){return new fa({queryId:ke(),executor:s(this,at),node:Tr.create(e)})}dropIndex(e){return new ya({queryId:ke(),executor:s(this,at),node:Ns.create(e)})}createSchema(e){return new pa({queryId:ke(),executor:s(this,at),node:Lh.create(e)})}dropSchema(e){return new wa({queryId:ke(),executor:s(this,at),node:Ju.create(e)})}alterTable(e){return new yf({queryId:ke(),executor:s(this,at),node:Ee.create(Ke(e))})}createView(e){return new ga({queryId:ke(),executor:s(this,at),node:en.create(e)})}dropView(e){return new ba({queryId:ke(),executor:s(this,at),node:Fo.create(e)})}createType(e){return new va({queryId:ke(),executor:s(this,at),node:Nf.create(Ed(e))})}dropType(e){return new xa({queryId:ke(),executor:s(this,at),node:gf.create(Ed(e))})}withPlugin(e){return new Es(s(this,at).withPlugin(e))}withoutPlugins(){return new Es(s(this,at).withoutPlugins())}withSchema(e){return new Es(s(this,at).withPluginAtFront(new so(e)))}};at=new WeakMap;let il=Es;class dN{ref(e){return new hw(e)}}var Pi;class hN{constructor(e){q(this,Pi,void 0);S(this,Pi,e)}async provideConnection(e){const r=await s(this,Pi).acquireConnection();try{return await e(r)}finally{await s(this,Pi).releaseConnection(r)}}}Pi=new WeakMap;var wr,Nr,Dr;const Rn=class Rn extends tf{constructor(r,i,a,l=[]){super(l);q(this,wr,void 0);q(this,Nr,void 0);q(this,Dr,void 0);S(this,wr,r),S(this,Nr,i),S(this,Dr,a)}get adapter(){return s(this,Nr)}compileQuery(r){return s(this,wr).compileQuery(r)}provideConnection(r){return s(this,Dr).provideConnection(r)}withPlugins(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[...this.plugins,...r])}withPlugin(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[...this.plugins,r])}withPluginAtFront(r){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[r,...this.plugins])}withConnectionProvider(r){return new Rn(s(this,wr),s(this,Nr),r,[...this.plugins])}withoutPlugins(){return new Rn(s(this,wr),s(this,Nr),s(this,Dr),[])}};wr=new WeakMap,Nr=new WeakMap,Dr=new WeakMap;let sl=Rn;function Td(){return typeof performance<"u"&&Qt(performance.now)?performance.now():Date.now()}var sr,an,Pr,Li,Lr,Ys,Fa,bf,Ua,vf,$a,xf,Qa,Of,Xs,ol;class fN{constructor(e,r){q(this,Fa);q(this,Ua);q(this,$a);q(this,Qa);q(this,Xs);q(this,sr,void 0);q(this,an,void 0);q(this,Pr,void 0);q(this,Li,void 0);q(this,Lr,void 0);q(this,Ys,new WeakSet);S(this,Li,!1),S(this,sr,e),S(this,an,r)}async init(){if(s(this,Lr))throw new Error("driver has already been destroyed");s(this,Pr)||S(this,Pr,s(this,sr).init().then(()=>{S(this,Li,!0)}).catch(e=>(S(this,Pr,void 0),Promise.reject(e)))),await s(this,Pr)}async acquireConnection(){if(s(this,Lr))throw new Error("driver has already been destroyed");s(this,Li)||await this.init();const e=await s(this,sr).acquireConnection();return s(this,Ys).has(e)||(xe(this,Fa,bf).call(this)&&xe(this,Ua,vf).call(this,e),s(this,Ys).add(e)),e}async releaseConnection(e){await s(this,sr).releaseConnection(e)}beginTransaction(e,r){return s(this,sr).beginTransaction(e,r)}commitTransaction(e){return s(this,sr).commitTransaction(e)}rollbackTransaction(e){return s(this,sr).rollbackTransaction(e)}async destroy(){s(this,Pr)&&(await s(this,Pr),s(this,Lr)||S(this,Lr,s(this,sr).destroy().catch(e=>(S(this,Lr,void 0),Promise.reject(e)))),await s(this,Lr))}}sr=new WeakMap,an=new WeakMap,Pr=new WeakMap,Li=new WeakMap,Lr=new WeakMap,Ys=new WeakMap,Fa=new WeakSet,bf=function(){return s(this,an).isLevelEnabled("query")||s(this,an).isLevelEnabled("error")},Ua=new WeakSet,vf=function(e){const r=e.executeQuery;e.executeQuery=async i=>{let a;const l=Td();try{return await r.call(e,i)}catch(f){throw a=f,await xe(this,$a,xf).call(this,f,i,l),f}finally{a||await xe(this,Qa,Of).call(this,i,l)}}},$a=new WeakSet,xf=async function(e,r,i){await s(this,an).error(()=>({level:"error",error:e,query:r,queryDurationMillis:xe(this,Xs,ol).call(this,i)}))},Qa=new WeakSet,Of=async function(e,r){await s(this,an).query(()=>({level:"query",query:e,queryDurationMillis:xe(this,Xs,ol).call(this,r)}))},Xs=new WeakSet,ol=function(e){return Td()-e};const pN=()=>{};var Zs,un,ja,qf;class Cf{constructor(e){q(this,ja);q(this,Zs,void 0);q(this,un,void 0);S(this,Zs,e)}async provideConnection(e){for(;s(this,un);)await s(this,un).catch(pN);return S(this,un,xe(this,ja,qf).call(this,e).finally(()=>{S(this,un,void 0)})),s(this,un)}}Zs=new WeakMap,un=new WeakMap,ja=new WeakSet,qf=async function(e){return await e(s(this,Zs))};const mN=["read uncommitted","read committed","repeatable read","serializable","snapshot"];c(["query","error"]);var ln,Vn;class yN{constructor(e){q(this,ln,void 0);q(this,Vn,void 0);Qt(e)?(S(this,Vn,e),S(this,ln,c({query:!0,error:!0}))):(S(this,Vn,wN),S(this,ln,c({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return s(this,ln)[e]}async query(e){s(this,ln).query&&await s(this,Vn).call(this,e())}async error(e){s(this,ln).error&&await s(this,Vn).call(this,e())}}ln=new WeakMap,Vn=new WeakMap;function wN(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function NN(t){return xr(t)&&Qt(t.compile)}var ft;const pi=class pi extends oa{constructor(r){let i,a;if(gN(r))i={executor:r.executor},a={...r};else{const l=r.dialect,f=l.createDriver(),y=l.createQueryCompiler(),N=l.createAdapter(),d=new yN(r.log??[]),x=new fN(f,d),_=new hN(x),R=new sl(y,N,_,r.plugins??[]);i={executor:R},a={config:r,executor:R,dialect:l,driver:x}}super(i);q(this,ft,void 0);S(this,ft,c(a))}get schema(){return new il(s(this,ft).executor)}get dynamic(){return new dN}get introspection(){return s(this,ft).dialect.createIntrospector(this.withoutPlugins())}case(r){return new of({node:Cr.create(Zn(r)?void 0:ri(r))})}get fn(){return sf()}transaction(){return new Oa({...s(this,ft)})}connection(){return new _f({...s(this,ft)})}withPlugin(r){return new pi({...s(this,ft),executor:s(this,ft).executor.withPlugin(r)})}withoutPlugins(){return new pi({...s(this,ft),executor:s(this,ft).executor.withoutPlugins()})}withSchema(r){return new pi({...s(this,ft),executor:s(this,ft).executor.withPluginAtFront(new so(r))})}withTables(){return new pi({...s(this,ft)})}async destroy(){await s(this,ft).driver.destroy()}get isTransaction(){return!1}getExecutor(){return s(this,ft).executor}executeQuery(r,i=ke()){const a=NN(r)?r.compile():r;return this.getExecutor().executeQuery(a,i)}};ft=new WeakMap;let Qs=pi;var or;const mi=class mi extends Qs{constructor(r){super(r);q(this,or,void 0);S(this,or,r)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(r){return new mi({...s(this,or),executor:s(this,or).executor.withPlugin(r)})}withoutPlugins(){return new mi({...s(this,or),executor:s(this,or).executor.withoutPlugins()})}withSchema(r){return new mi({...s(this,or),executor:s(this,or).executor.withPluginAtFront(new so(r))})}withTables(){return new mi({...s(this,or)})}};or=new WeakMap;let al=mi;function gN(t){return xr(t)&&xr(t.config)&&xr(t.driver)&&xr(t.executor)&&xr(t.dialect)}var Jn;class _f{constructor(e){q(this,Jn,void 0);S(this,Jn,c(e))}async execute(e){return s(this,Jn).executor.provideConnection(async r=>{const i=s(this,Jn).executor.withConnectionProvider(new Cf(r)),a=new Qs({...s(this,Jn),executor:i});return await e(a)})}}Jn=new WeakMap;le(_f,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var ar;const ec=class ec{constructor(e){q(this,ar,void 0);S(this,ar,c(e))}setIsolationLevel(e){return new ec({...s(this,ar),isolationLevel:e})}async execute(e){const{isolationLevel:r,...i}=s(this,ar),a={isolationLevel:r};return bN(a),s(this,ar).executor.provideConnection(async l=>{const f=s(this,ar).executor.withConnectionProvider(new Cf(l)),y=new al({...i,executor:f});try{await s(this,ar).driver.beginTransaction(l,a);const N=await e(y);return await s(this,ar).driver.commitTransaction(l),N}catch(N){throw await s(this,ar).driver.rollbackTransaction(l),N}})}};ar=new WeakMap;let Oa=ec;le(Oa,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function bN(t){if(t.isolationLevel&&!mN.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var qt,Mi,Uo,eo,ul,to,ll;const Ts=class Ts{constructor(e){q(this,Mi);q(this,eo);q(this,to);q(this,qt,void 0);S(this,qt,c(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new Wf(this,e)}$castTo(){return new Ts({...s(this,qt)})}$notNull(){return new Ts(s(this,qt))}withPlugin(e){return new Ts({...s(this,qt),plugins:s(this,qt).plugins!==void 0?c([...s(this,qt).plugins,e]):c([e])})}toOperationNode(){return xe(this,eo,ul).call(this,xe(this,Mi,Uo).call(this))}compile(e){return xe(this,to,ll).call(this,xe(this,Mi,Uo).call(this,e))}async execute(e){const r=xe(this,Mi,Uo).call(this,e);return r.executeQuery(xe(this,to,ll).call(this,r),s(this,qt).queryId)}};qt=new WeakMap,Mi=new WeakSet,Uo=function(e){const r=e!==void 0?e.getExecutor():$l;return s(this,qt).plugins!==void 0?r.withPlugins(s(this,qt).plugins):r},eo=new WeakSet,ul=function(e){return e.transformQuery(s(this,qt).rawNode,s(this,qt).queryId)},to=new WeakSet,ll=function(e){return e.compileQuery(xe(this,eo,ul).call(this,e),s(this,qt).queryId)};let Ca=Ts;function zr(t){return new Ca(t)}le(Ca,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Kn,cn;class Wf{constructor(e,r){q(this,Kn,void 0);q(this,cn,void 0);S(this,Kn,e),S(this,cn,r)}get expression(){return s(this,Kn)}get alias(){return s(this,cn)}get rawBuilder(){return s(this,Kn)}toOperationNode(){return bn.create(s(this,Kn).toOperationNode(),jt(s(this,cn))?s(this,cn).toOperationNode():Ue.create(s(this,cn)))}}Kn=new WeakMap,cn=new WeakMap;le(Wf,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const nt=Object.assign((t,...e)=>zr({queryId:ke(),rawNode:yt.create(t,e?.map(kd)??[])}),{ref(t){return zr({queryId:ke(),rawNode:yt.createWithChild(Fr(t))})},val(t){return zr({queryId:ke(),rawNode:yt.createWithChild(it(t))})},value(t){return this.val(t)},table(t){return zr({queryId:ke(),rawNode:yt.createWithChild(Ke(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:ke(),rawNode:yt.create(e,t.map(Ue.create))})},lit(t){return zr({queryId:ke(),rawNode:yt.createWithChild(Ur.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:ke(),rawNode:yt.createWithSql(t)})},join(t,e=nt`, `){const r=new Array(2*t.length-1),i=e.toOperationNode();for(let a=0;a<t.length;++a)r[2*a]=kd(t[a]),a!==t.length-1&&(r[2*a+1]=i);return zr({queryId:ke(),rawNode:yt.createWithChildren(r)})}});function kd(t){return jt(t)?t.toOperationNode():it(t)}var Va;class vN{constructor(){ee(this,"nodeStack",[]);q(this,Va,c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),AddIndexNode:this.visitAddIndex.bind(this)}));ee(this,"visitNode",e=>{this.nodeStack.push(e),s(this,Va)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Va=new WeakMap;var Bi,Hn;class xN extends vN{constructor(){super(...arguments);q(this,Bi,"");q(this,Hn,[])}get numParameters(){return s(this,Hn).length}compileQuery(r){return S(this,Bi,""),S(this,Hn,[]),this.visitNode(r),c({query:r,sql:this.getSql(),parameters:[...s(this,Hn)]})}getSql(){return s(this,Bi)}visitSelectQuery(r){const i=this.parentNode!==void 0&&!Ji.is(this.parentNode)&&!ur.is(this.parentNode)&&!Lt.is(this.parentNode)&&!en.is(this.parentNode)&&!rf.is(this.parentNode);this.parentNode===void 0&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("select"),r.distinctOn&&(this.append(" "),this.compileDistinctOn(r.distinctOn)),r.frontModifiers?.length&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.selections&&(this.append(" "),this.compileList(r.selections)),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.groupBy&&(this.append(" "),this.visitNode(r.groupBy)),r.having&&(this.append(" "),this.visitNode(r.having)),r.setOperations&&(this.append(" "),this.compileList(r.setOperations," ")),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.offset&&(this.append(" "),this.visitNode(r.offset)),r.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...r.endModifiers])," ")),i&&this.append(")")}visitFrom(r){this.append("from "),this.compileList(r.froms)}visitSelection(r){this.visitNode(r.selection)}visitColumn(r){this.visitNode(r.column)}compileDistinctOn(r){this.append("distinct on ("),this.compileList(r),this.append(")")}compileList(r,i=", "){const a=r.length-1;for(let l=0;l<=a;l++)this.visitNode(r[l]),l<a&&this.append(i)}visitWhere(r){this.append("where "),this.visitNode(r.where)}visitHaving(r){this.append("having "),this.visitNode(r.having)}visitInsertQuery(r){const i=this.nodeStack.find(ue.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append(r.replace?"replace":"insert"),r.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(r.into),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.values&&(this.append(" "),this.visitNode(r.values)),r.defaultValues&&(this.append(" "),this.append("default values")),r.onConflict&&(this.append(" "),this.visitNode(r.onConflict)),r.onDuplicateKey&&(this.append(" "),this.visitNode(r.onDuplicateKey)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitValues(r){this.append("values "),this.compileList(r.values)}visitDeleteQuery(r){const i=this.nodeStack.find(ue.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("delete "),this.visitNode(r.from),r.using&&(this.append(" "),this.visitNode(r.using)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.orderBy&&(this.append(" "),this.visitNode(r.orderBy)),r.limit&&(this.append(" "),this.visitNode(r.limit)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitReturning(r){this.append("returning "),this.compileList(r.selections)}visitAlias(r){this.visitNode(r.node),this.append(" as "),this.visitNode(r.alias)}visitReference(r){r.table&&(this.visitNode(r.table),this.append(".")),this.visitNode(r.column)}visitSelectAll(r){this.append("*")}visitIdentifier(r){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(r),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(r){if(!Gt(r.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(r.name))}visitAnd(r){this.visitNode(r.left),this.append(" and "),this.visitNode(r.right)}visitOr(r){this.visitNode(r.left),this.append(" or "),this.visitNode(r.right)}visitValue(r){r.immediate?this.appendImmediateValue(r.value):this.appendValue(r.value)}visitValueList(r){this.append("("),this.compileList(r.values),this.append(")")}visitTuple(r){this.append("("),this.compileList(r.values),this.append(")")}visitPrimitiveValueList(r){this.append("(");const{values:i}=r;for(let a=0;a<i.length;++a)this.appendValue(i[a]),a!==i.length-1&&this.append(", ");this.append(")")}visitParens(r){this.append("("),this.visitNode(r.node),this.append(")")}visitJoin(r){this.append(CN[r.joinType]),this.append(" "),this.visitNode(r.table),r.on&&(this.append(" "),this.visitNode(r.on))}visitOn(r){this.append("on "),this.visitNode(r.on)}visitRaw(r){const{sqlFragments:i,parameters:a}=r;for(let l=0;l<i.length;++l)this.append(i[l]),a.length>l&&this.visitNode(a[l])}visitOperator(r){this.append(r.operator)}visitTable(r){this.visitNode(r.table)}visitSchemableIdentifier(r){r.schema&&(this.visitNode(r.schema),this.append(".")),this.visitNode(r.identifier)}visitCreateTable(r){this.append("create "),r.frontModifiers&&r.frontModifiers.length>0&&(this.compileList(r.frontModifiers," "),this.append(" ")),r.temporary&&this.append("temporary "),this.append("table "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.table),r.selectQuery?(this.append(" as "),this.visitNode(r.selectQuery)):(this.append(" ("),this.compileList([...r.columns,...r.constraints??[]]),this.append(")"),r.onCommit&&(this.append(" on commit "),this.append(r.onCommit)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," ")))}visitColumnDefinition(r){this.visitNode(r.column),this.append(" "),this.visitNode(r.dataType),r.unsigned&&this.append(" unsigned"),r.frontModifiers&&r.frontModifiers.length>0&&(this.append(" "),this.compileList(r.frontModifiers," ")),r.generated&&(this.append(" "),this.visitNode(r.generated)),r.defaultTo&&(this.append(" "),this.visitNode(r.defaultTo)),r.notNull&&this.append(" not null"),r.unique&&this.append(" unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.primaryKey&&this.append(" primary key"),r.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),r.references&&(this.append(" "),this.visitNode(r.references)),r.check&&(this.append(" "),this.visitNode(r.check)),r.endModifiers&&r.endModifiers.length>0&&(this.append(" "),this.compileList(r.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(r){this.append("references "),this.visitNode(r.table),this.append(" ("),this.compileList(r.columns),this.append(")"),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitDropTable(r){this.append("drop table "),r.ifExists&&this.append("if exists "),this.visitNode(r.table),r.cascade&&this.append(" cascade")}visitDataType(r){this.append(r.dataType)}visitOrderBy(r){this.append("order by "),this.compileList(r.items)}visitOrderByItem(r){this.visitNode(r.orderBy),r.direction&&(this.append(" "),this.visitNode(r.direction))}visitGroupBy(r){this.append("group by "),this.compileList(r.items)}visitGroupByItem(r){this.visitNode(r.groupBy)}visitUpdateQuery(r){const i=this.nodeStack.find(ue.is)!==r;!i&&r.explain&&(this.visitNode(r.explain),this.append(" ")),i&&this.append("("),r.with&&(this.visitNode(r.with),this.append(" ")),this.append("update "),this.visitNode(r.table),this.append(" set "),r.updates&&this.compileList(r.updates),r.from&&(this.append(" "),this.visitNode(r.from)),r.joins&&(this.append(" "),this.compileList(r.joins," ")),r.where&&(this.append(" "),this.visitNode(r.where)),r.returning&&(this.append(" "),this.visitNode(r.returning)),i&&this.append(")")}visitColumnUpdate(r){this.visitNode(r.column),this.append(" = "),this.visitNode(r.value)}visitLimit(r){this.append("limit "),this.visitNode(r.limit)}visitOffset(r){this.append("offset "),this.visitNode(r.offset)}visitOnConflict(r){this.append("on conflict"),r.columns?(this.append(" ("),this.compileList(r.columns),this.append(")")):r.constraint?(this.append(" on constraint "),this.visitNode(r.constraint)):r.indexExpression&&(this.append(" ("),this.visitNode(r.indexExpression),this.append(")")),r.indexWhere&&(this.append(" "),this.visitNode(r.indexWhere)),r.doNothing===!0?this.append(" do nothing"):r.updates&&(this.append(" do update set "),this.compileList(r.updates),r.updateWhere&&(this.append(" "),this.visitNode(r.updateWhere)))}visitOnDuplicateKey(r){this.append("on duplicate key update "),this.compileList(r.updates)}visitCreateIndex(r){this.append("create "),r.unique&&this.append("unique "),this.append("index "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.using&&(this.append(" using "),this.visitNode(r.using)),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.nullsNotDistinct&&this.append(" nulls not distinct"),r.where&&(this.append(" "),this.visitNode(r.where))}visitDropIndex(r){this.append("drop index "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.table&&(this.append(" on "),this.visitNode(r.table)),r.cascade&&this.append(" cascade")}visitCreateSchema(r){this.append("create schema "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.schema)}visitDropSchema(r){this.append("drop schema "),r.ifExists&&this.append("if exists "),this.visitNode(r.schema),r.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("primary key ("),this.compileList(r.columns),this.append(")")}visitUniqueConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("unique"),r.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(r.columns),this.append(")")}visitCheckConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("check ("),this.visitNode(r.expression),this.append(")")}visitForeignKeyConstraint(r){r.name&&(this.append("constraint "),this.visitNode(r.name),this.append(" ")),this.append("foreign key ("),this.compileList(r.columns),this.append(") "),this.visitNode(r.references),r.onDelete&&(this.append(" on delete "),this.append(r.onDelete)),r.onUpdate&&(this.append(" on update "),this.append(r.onUpdate))}visitList(r){this.compileList(r.items)}visitWith(r){this.append("with "),r.recursive&&this.append("recursive "),this.compileList(r.expressions)}visitCommonTableExpression(r){this.visitNode(r.name),this.append(" as "),Ko(r.materialized)&&(r.materialized||this.append("not "),this.append("materialized ")),this.visitNode(r.expression)}visitCommonTableExpressionName(r){this.visitNode(r.table),r.columns&&(this.append("("),this.compileList(r.columns),this.append(")"))}visitAlterTable(r){this.append("alter table "),this.visitNode(r.table),this.append(" "),r.renameTo&&(this.append("rename to "),this.visitNode(r.renameTo)),r.setSchema&&(this.append("set schema "),this.visitNode(r.setSchema)),r.addConstraint&&this.visitNode(r.addConstraint),r.dropConstraint&&this.visitNode(r.dropConstraint),r.columnAlterations&&this.compileColumnAlterations(r.columnAlterations),r.addIndex&&this.visitNode(r.addIndex),r.dropIndex&&this.visitNode(r.dropIndex)}visitAddColumn(r){this.append("add column "),this.visitNode(r.column)}visitRenameColumn(r){this.append("rename column "),this.visitNode(r.column),this.append(" to "),this.visitNode(r.renameTo)}visitDropColumn(r){this.append("drop column "),this.visitNode(r.column)}visitAlterColumn(r){this.append("alter column "),this.visitNode(r.column),this.append(" "),r.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(r.dataType),r.dataTypeExpression&&(this.append("using "),this.visitNode(r.dataTypeExpression))),r.setDefault&&(this.append("set default "),this.visitNode(r.setDefault)),r.dropDefault&&this.append("drop default"),r.setNotNull&&this.append("set not null"),r.dropNotNull&&this.append("drop not null")}visitModifyColumn(r){this.append("modify column "),this.visitNode(r.column)}visitAddConstraint(r){this.append("add "),this.visitNode(r.constraint)}visitDropConstraint(r){this.append("drop constraint "),r.ifExists&&this.append("if exists "),this.visitNode(r.constraintName),r.modifier==="cascade"?this.append(" cascade"):r.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(r){this.append(r.operator),this.append(" "),r.all&&this.append("all "),this.visitNode(r.expression)}visitCreateView(r){this.append("create "),r.orReplace&&this.append("or replace "),r.materialized&&this.append("materialized "),r.temporary&&this.append("temporary "),this.append("view "),r.ifNotExists&&this.append("if not exists "),this.visitNode(r.name),this.append(" "),r.columns&&(this.append("("),this.compileList(r.columns),this.append(") ")),r.as&&(this.append("as "),this.visitNode(r.as))}visitDropView(r){this.append("drop "),r.materialized&&this.append("materialized "),this.append("view "),r.ifExists&&this.append("if exists "),this.visitNode(r.name),r.cascade&&this.append(" cascade")}visitGenerated(r){this.append("generated "),r.always&&this.append("always "),r.byDefault&&this.append("by default "),this.append("as "),r.identity&&this.append("identity"),r.expression&&(this.append("("),this.visitNode(r.expression),this.append(")")),r.stored&&this.append(" stored")}visitDefaultValue(r){this.append("default "),this.visitNode(r.defaultValue)}visitSelectModifier(r){r.rawModifier?this.visitNode(r.rawModifier):this.append(ON[r.modifier]),r.of&&(this.append(" of "),this.compileList(r.of,", "))}visitCreateType(r){this.append("create type "),this.visitNode(r.name),r.enum&&(this.append(" as enum "),this.visitNode(r.enum))}visitDropType(r){this.append("drop type "),r.ifExists&&this.append("if exists "),this.visitNode(r.name)}visitExplain(r){this.append("explain"),(r.options||r.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),r.options&&(this.visitNode(r.options),r.format&&this.append(this.getExplainOptionsDelimiter())),r.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(r.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(r){this.append("default")}visitAggregateFunction(r){this.append(r.func),this.append("("),r.distinct&&this.append("distinct "),this.compileList(r.aggregated),this.append(")"),r.filter&&(this.append(" filter("),this.visitNode(r.filter),this.append(")")),r.over&&(this.append(" "),this.visitNode(r.over))}visitOver(r){this.append("over("),r.partitionBy&&(this.visitNode(r.partitionBy),r.orderBy&&this.append(" ")),r.orderBy&&this.visitNode(r.orderBy),this.append(")")}visitPartitionBy(r){this.append("partition by "),this.compileList(r.items)}visitPartitionByItem(r){this.visitNode(r.partitionBy)}visitBinaryOperation(r){this.visitNode(r.leftOperand),this.append(" "),this.visitNode(r.operator),this.append(" "),this.visitNode(r.rightOperand)}visitUnaryOperation(r){this.visitNode(r.operator),this.isMinusOperator(r.operator)||this.append(" "),this.visitNode(r.operand)}isMinusOperator(r){return Nn.is(r)&&r.operator==="-"}visitUsing(r){this.append("using "),this.compileList(r.tables)}visitFunction(r){this.append(r.func),this.append("("),this.compileList(r.arguments),this.append(")")}visitCase(r){this.append("case"),r.value&&(this.append(" "),this.visitNode(r.value)),r.when&&(this.append(" "),this.compileList(r.when," ")),r.else&&(this.append(" else "),this.visitNode(r.else)),this.append(" end"),r.isStatement&&this.append(" case")}visitWhen(r){this.append("when "),this.visitNode(r.condition),r.result&&(this.append(" then "),this.visitNode(r.result))}visitJSONReference(r){this.visitNode(r.reference),this.visitNode(r.traversal)}visitJSONPath(r){r.inOperator&&this.visitNode(r.inOperator),this.append("'$");for(const i of r.pathLegs)this.visitNode(i);this.append("'")}visitJSONPathLeg(r){const i=r.type==="ArrayLocation";this.append(i?"[":"."),this.append(String(r.value)),i&&this.append("]")}visitJSONOperatorChain(r){for(let i=0,a=r.values.length;i<a;i++)i===a-1?this.visitNode(r.operator):this.append("->"),this.visitNode(r.values[i])}visitAddIndex(r){this.append("add "),r.unique&&this.append("unique "),this.append("index "),this.visitNode(r.name),r.columns&&(this.append(" ("),this.compileList(r.columns),this.append(")")),r.using&&(this.append(" using "),this.visitNode(r.using))}append(r){S(this,Bi,s(this,Bi)+r)}appendValue(r){this.addParameter(r),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(r){const i=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let l="";for(const f of r)l+=f,f===i?l+=i:f===a&&(l+=a);return l}addParameter(r){s(this,Hn).push(r)}appendImmediateValue(r){if(Gt(r))this.append(`'${r}'`);else if(Ph(r)||Ko(r))this.append(r.toString());else if(Al(r))this.append("null");else if(tw(r))this.appendImmediateValue(r.toISOString());else if(rw(r))this.appendImmediateValue(r.toString());else throw new Error(`invalid immediate value ${r}`)}sortSelectModifiers(r){return r.sort((i,a)=>i.modifier&&a.modifier?Sd[i.modifier]-Sd[a.modifier]:1),c(r)}compileColumnAlterations(r){this.compileList(r)}announcesNewColumnDataType(){return!0}}Bi=new WeakMap,Hn=new WeakMap;const ON=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Sd=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),CN=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),qr=c({raw(t,e=[]){return c({sql:t,query:yt.createWithSql(t),parameters:c(e)})}});class qN{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}const _N=/"/g;class If extends xN{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(_N,'""')}visitDefaultInsertValue(e){this.append("null")}}const Ef="kysely_migration",Tf="kysely_migration_lock";c({__noMigrations__:!0});var Fi,Ja,Sf;class kf{constructor(e){q(this,Ja);q(this,Fi,void 0);S(this,Fi,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=s(this,Fi).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",Ef).where("name","!=",Tf));const i=await r.execute();return Promise.all(i.map(({name:a})=>xe(this,Ja,Sf).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}Fi=new WeakMap,Ja=new WeakSet,Sf=async function(e){const r=s(this,Fi),i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=i.sql?.split(/[\(\),]/)?.find(f=>f.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),l=await r.selectFrom(nt`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:l.map(f=>({name:f.name,dataType:f.type,isNullable:!f.notnull,isAutoIncrementing:f.name===a,hasDefaultValue:f.dflt_value!=null}))}};class Af extends qN{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}var WN=class{createQueryCompiler(){return new If}createAdapter(){return new Af}createIntrospector(t){return new kf(t)}},ro,Bd,IN=(Bd=class{constructor(){q(this,ro,new EN);ee(this,"connection")}async acquireConnection(){return await s(this,ro).lock(),this.connection}async beginTransaction(t){await t.executeQuery(qr.raw("begin"))}async commitTransaction(t){await t.executeQuery(qr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(qr.raw("rollback"))}async releaseConnection(){s(this,ro).unlock()}},ro=new WeakMap,Bd),EN=class{constructor(){ee(this,"promise");ee(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e?.()}},TN=class{streamQuery(){throw new Error("sqlite-wasm driver doesn't support streaming")}async executeQuery({parameters:t,query:e,sql:r}){const i=await this.query(r,t);return ce.is(e)||i.length?{rows:i}:{rows:i,...await this.info()}}};function kN(t,e,r){let i,a=0,l=null;function f(){i&&clearTimeout(i),a=0,l=null}function y(){a>=r?(t(l),f()):(i&&clearTimeout(i),i=setTimeout(()=>{t(l),f(),i=void 0},e))}return N=>{a++,l=N,i===void 0&&a===0?(t(N),a++):y()}}var SN=class extends IN{constructor(e){super();ee(this,"config");ee(this,"db");this.config=e}async init(){if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new AN(this.db,this.config.onWrite?.func,this.config.onWrite?.isThrottle,this.config.onWrite?.delay,this.config.onWrite?.maxCalls),await this.config.onCreateConnection?.(this.connection)}async beginTransaction(e){e.trxCount++,await super.beginTransaction(e)}async commitTransaction(e){e.trxCount--,await super.commitTransaction(e)}async rollbackTransaction(e){e.trxCount--,await super.rollbackTransaction(e)}async destroy(){this.db?.close()}},AN=class extends TN{constructor(e,r,i=!1,a=2e3,l=1e3){super();ee(this,"db");ee(this,"onWrite");ee(this,"trxCount",0);this.db=e,this.onWrite=r?i?kN(r,a,l):r:void 0}async query(e,r){const i=this.db.prepare(e);i.bind(r);const a=[];for(;i.step();)a.push(i.getAsObject());return i.free(),a}async info(){let e=0;const r=this.db.prepare("SELECT last_insert_rowid()");try{r.step(),e=r.get()[0]}finally{r.free()}return this.trxCount===0&&this.onWrite?.(this.db.export()),{insertId:BigInt(e),numAffectedRows:BigInt(this.db.getRowsModified())}}},RN=class extends WN{constructor(e){super();ee(this,"config");this.config=e}createDriver(){return new SN(this.config)}};function DN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PN(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),r}var Rf={exports:{}};const LN={},MN=Object.freeze(Object.defineProperty({__proto__:null,default:LN},Symbol.toStringTag,{value:"Module"})),Su=PN(MN);(function(t,e){var r=void 0,i=function(a){return r||(r=new Promise(function(l,f){var y=typeof a<"u"?a:{},N=y.onAbort;y.onAbort=function(n){f(new Error(n)),N&&N(n)},y.postRun=y.postRun||[],y.postRun.push(function(){l(y)}),t=void 0;var d;d||(d=typeof y<"u"?y:{}),d.onRuntimeInitialized=function(){function n(g,E){switch(typeof E){case"boolean":Op(g,E?1:0);break;case"number":bp(g,E);break;case"string":vp(g,E,-1,-1);break;case"object":if(E===null)Ac(g);else if(E.length!=null){var U=wo(E,yo);xp(g,U,E.length,-1),bo(U)}else xo(g,"Wrong API use : tried to return a value of an unknown type ("+E+").",-1);break;default:Ac(g)}}function o(g,E){for(var U=[],Y=0;Y<g;Y+=1){var ae=C(E+4*Y,"i32"),Ae=mp(ae);if(Ae===1||Ae===2)ae=gp(ae);else if(Ae===3)ae=wp(ae);else if(Ae===4){Ae=ae,ae=yp(Ae),Ae=Np(Ae);for(var Xt=new Uint8Array(ae),Jt=0;Jt<ae;Jt+=1)Xt[Jt]=ve[Ae+Jt];ae=Xt}else ae=null;U.push(ae)}return U}function u(g,E){this.La=g,this.db=E,this.Ja=1,this.fb=[]}function h(g,E){if(this.db=E,E=Ne(g)+1,this.Ya=go(E),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Pe(g,me,this.Ya,E),this.eb=this.Ya,this.Ua=this.ib=null}function m(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var E=this.filename,U="/",Y=E;if(U&&(U=typeof U=="string"?U:is(U),Y=E?I(U+"/"+E):U),E=tc(!0,!0),Y=lo(Y,(E!==void 0?E:438)&4095|32768,0),g){if(typeof g=="string"){U=Array(g.length);for(var ae=0,Ae=g.length;ae<Ae;++ae)U[ae]=g.charCodeAt(ae);g=U}ho(Y,E|146),U=ai(Y,577),Nc(U,g,0,g.length,0),hu(U),ho(Y,E)}}this.handleError(H(this.filename,b)),this.db=C(b,"i32"),Cp(this.db),this.Za={},this.Na={}}var b=Hr(4),O=d.cwrap,H=O("sqlite3_open","number",["string","number"]),he=O("sqlite3_close_v2","number",["number"]),ie=O("sqlite3_exec","number",["number","string","number","number","number"]),ze=O("sqlite3_changes","number",["number"]),ot=O("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ic=O("sqlite3_sql","string",["number"]),Xf=O("sqlite3_normalized_sql","string",["number"]),Ec=O("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zf=O("sqlite3_bind_text","number",["number","number","number","number","number"]),Tc=O("sqlite3_bind_blob","number",["number","number","number","number","number"]),ep=O("sqlite3_bind_double","number",["number","number","number"]),tp=O("sqlite3_bind_int","number",["number","number","number"]),rp=O("sqlite3_bind_parameter_index","number",["number","string"]),np=O("sqlite3_step","number",["number"]),ip=O("sqlite3_errmsg","string",["number"]),sp=O("sqlite3_column_count","number",["number"]),op=O("sqlite3_data_count","number",["number"]),ap=O("sqlite3_column_double","number",["number","number"]),kc=O("sqlite3_column_text","string",["number","number"]),up=O("sqlite3_column_blob","number",["number","number"]),lp=O("sqlite3_column_bytes","number",["number","number"]),cp=O("sqlite3_column_type","number",["number","number"]),dp=O("sqlite3_column_name","string",["number","number"]),hp=O("sqlite3_reset","number",["number"]),fp=O("sqlite3_clear_bindings","number",["number"]),pp=O("sqlite3_finalize","number",["number"]),Sc=O("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),mp=O("sqlite3_value_type","number",["number"]),yp=O("sqlite3_value_bytes","number",["number"]),wp=O("sqlite3_value_text","string",["number"]),Np=O("sqlite3_value_blob","number",["number"]),gp=O("sqlite3_value_double","number",["number"]),bp=O("sqlite3_result_double","",["number","number"]),Ac=O("sqlite3_result_null","",["number"]),vp=O("sqlite3_result_text","",["number","string","number","number"]),xp=O("sqlite3_result_blob","",["number","number","number","number"]),Op=O("sqlite3_result_int","",["number","number"]),xo=O("sqlite3_result_error","",["number","string","number"]),Rc=O("sqlite3_aggregate_context","number",["number","number"]),Cp=O("RegisterExtensionFunctions","number",["number"]);u.prototype.bind=function(g){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(g)?this.wb(g):g!=null&&typeof g=="object"?this.xb(g):!0},u.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var g=np(this.La);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},u.prototype.rb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),ap(this.La,g)},u.prototype.Ab=function(g){if(g==null&&(g=this.Ja,this.Ja+=1),g=kc(this.La,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},u.prototype.Bb=function(g){return g==null&&(g=this.Ja,this.Ja+=1),kc(this.La,g)},u.prototype.getBlob=function(g){g==null&&(g=this.Ja,this.Ja+=1);var E=lp(this.La,g);g=up(this.La,g);for(var U=new Uint8Array(E),Y=0;Y<E;Y+=1)U[Y]=ve[g+Y];return U},u.prototype.get=function(g,E){E=E||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var U=op(this.La),Y=0;Y<U;Y+=1)switch(cp(this.La,Y)){case 1:var ae=E.useBigInt?this.Ab(Y):this.rb(Y);g.push(ae);break;case 2:g.push(this.rb(Y));break;case 3:g.push(this.Bb(Y));break;case 4:g.push(this.getBlob(Y));break;default:g.push(null)}return g},u.prototype.getColumnNames=function(){for(var g=[],E=sp(this.La),U=0;U<E;U+=1)g.push(dp(this.La,U));return g},u.prototype.getAsObject=function(g,E){g=this.get(g,E),E=this.getColumnNames();for(var U={},Y=0;Y<E.length;Y+=1)U[E[Y]]=g[Y];return U},u.prototype.getSQL=function(){return Ic(this.La)},u.prototype.getNormalizedSQL=function(){return Xf(this.La)},u.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},u.prototype.nb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1),g=It(g);var U=wo(g,yo);this.fb.push(U),this.db.handleError(Zf(this.La,E,U,g.length-1,0))},u.prototype.vb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1);var U=wo(g,yo);this.fb.push(U),this.db.handleError(Tc(this.La,E,U,g.length,0))},u.prototype.mb=function(g,E){E==null&&(E=this.Ja,this.Ja+=1),this.db.handleError((g===(g|0)?tp:ep)(this.La,E,g))},u.prototype.yb=function(g){g==null&&(g=this.Ja,this.Ja+=1),Tc(this.La,g,0,0,0)},u.prototype.ob=function(g,E){switch(E==null&&(E=this.Ja,this.Ja+=1),typeof g){case"string":this.nb(g,E);return;case"number":this.mb(g,E);return;case"bigint":this.nb(g.toString(),E);return;case"boolean":this.mb(g+0,E);return;case"object":if(g===null){this.yb(E);return}if(g.length!=null){this.vb(g,E);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},u.prototype.xb=function(g){var E=this;return Object.keys(g).forEach(function(U){var Y=rp(E.La,U);Y!==0&&E.ob(g[U],Y)}),!0},u.prototype.wb=function(g){for(var E=0;E<g.length;E+=1)this.ob(g[E],E+1);return!0},u.prototype.reset=function(){return this.freemem(),fp(this.La)===0&&hp(this.La)===0},u.prototype.freemem=function(){for(var g;(g=this.fb.pop())!==void 0;)bo(g)},u.prototype.free=function(){this.freemem();var g=pp(this.La)===0;return delete this.db.Za[this.La],this.La=0,g},h.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var g=ls(),E=Hr(4);W(b),W(E);try{this.db.handleError(Ec(this.db.db,this.eb,-1,b,E)),this.eb=C(E,"i32");var U=C(b,"i32");return U===0?(this.gb(),{done:!0}):(this.Ua=new u(U,this.db),this.db.Za[U]=this.Ua,{value:this.Ua,done:!1})}catch(Y){throw this.ib=A(this.eb),this.gb(),Y}finally{cs(g)}},h.prototype.gb=function(){bo(this.Ya),this.Ya=null},h.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(h.prototype[Symbol.iterator]=function(){return this}),m.prototype.run=function(g,E){if(!this.db)throw"Database closed";if(E){g=this.prepare(g,E);try{g.step()}finally{g.free()}}else this.handleError(ie(this.db,g,0,0,b));return this},m.prototype.exec=function(g,E,U){if(!this.db)throw"Database closed";var Y=ls(),ae=null;try{var Ae=yu(g),Xt=Hr(4);for(g=[];C(Ae,"i8")!==0;){W(b),W(Xt),this.handleError(Ec(this.db,Ae,-1,b,Xt));var Jt=C(b,"i32");if(Ae=C(Xt,"i32"),Jt!==0){var Pt=null;for(ae=new u(Jt,this),E!=null&&ae.bind(E);ae.step();)Pt===null&&(Pt={columns:ae.getColumnNames(),values:[]},g.push(Pt)),Pt.values.push(ae.get(null,U));ae.free()}}return g}catch(Zt){throw ae&&ae.free(),Zt}finally{cs(Y)}},m.prototype.each=function(g,E,U,Y,ae){typeof E=="function"&&(Y=U,U=E,E=void 0),g=this.prepare(g,E);try{for(;g.step();)U(g.getAsObject(null,ae))}finally{g.free()}if(typeof Y=="function")return Y()},m.prototype.prepare=function(g,E){if(W(b),this.handleError(ot(this.db,g,-1,b,0)),g=C(b,"i32"),g===0)throw"Nothing to prepare";var U=new u(g,this);return E!=null&&U.bind(E),this.Za[g]=U},m.prototype.iterateStatements=function(g){return new h(g,this)},m.prototype.export=function(){Object.values(this.Za).forEach(function(E){E.free()}),Object.values(this.Na).forEach(ui),this.Na={},this.handleError(he(this.db));var g=Kf(this.filename);return this.handleError(H(this.filename,b)),this.db=C(b,"i32"),g},m.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(g){g.free()}),Object.values(this.Na).forEach(ui),this.Na={},this.handleError(he(this.db)),hc("/"+this.filename),this.db=null)},m.prototype.handleError=function(g){if(g===0)return null;throw g=ip(this.db),Error(g)},m.prototype.getRowsModified=function(){return ze(this.db)},m.prototype.create_function=function(g,E){Object.prototype.hasOwnProperty.call(this.Na,g)&&(ui(this.Na[g]),delete this.Na[g]);var U=No(function(Y,ae,Ae){ae=o(ae,Ae);try{var Xt=E.apply(null,ae)}catch(Jt){xo(Y,Jt,-1);return}n(Y,Xt)},"viii");return this.Na[g]=U,this.handleError(Sc(this.db,g,E.length,1,0,U,0,0,0)),this},m.prototype.create_aggregate=function(g,E){var U=E.init||function(){return null},Y=E.finalize||function(Pt){return Pt},ae=E.step;if(!ae)throw"An aggregate function must have a step function in "+g;var Ae={};Object.hasOwnProperty.call(this.Na,g)&&(ui(this.Na[g]),delete this.Na[g]),E=g+"__finalize",Object.hasOwnProperty.call(this.Na,E)&&(ui(this.Na[E]),delete this.Na[E]);var Xt=No(function(Pt,Zt,Nu){var _n=Rc(Pt,1);Object.hasOwnProperty.call(Ae,_n)||(Ae[_n]=U()),Zt=o(Zt,Nu),Zt=[Ae[_n]].concat(Zt);try{Ae[_n]=ae.apply(null,Zt)}catch(qp){delete Ae[_n],xo(Pt,qp,-1)}},"viii"),Jt=No(function(Pt){var Zt=Rc(Pt,1);try{var Nu=Y(Ae[Zt])}catch(_n){delete Ae[Zt],xo(Pt,_n,-1);return}n(Pt,Nu),delete Ae[Zt]},"vi");return this.Na[g]=Xt,this.Na[E]=Jt,this.handleError(Sc(this.db,g,ae.length-1,1,0,0,Xt,Jt,0)),this},d.Database=m};var x=Object.assign({},d),_="./this.program",R=typeof window=="object",F=typeof importScripts=="function",we=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",J="",Te,B,$e;if(we){var de=Su,Be=Su;J=F?Be.dirname(J)+"/":__dirname+"/",Te=(n,o)=>(n=Wt(n)?new URL(n):Be.normalize(n),de.readFileSync(n,o?void 0:"utf8")),$e=n=>(n=Te(n,!0),n.buffer||(n=new Uint8Array(n)),n),B=(n,o,u,h=!0)=>{n=Wt(n)?new URL(n):Be.normalize(n),de.readFile(n,h?void 0:"utf8",(m,b)=>{m?u(m):o(h?b.buffer:b)})},!d.thisProgram&&1<process.argv.length&&(_=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=()=>"[Emscripten Module object]"}else(R||F)&&(F?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),J=J.indexOf("blob:")!==0?J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Te=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},F&&($e=n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),B=(n,o,u)=>{var h=new XMLHttpRequest;h.open("GET",n,!0),h.responseType="arraybuffer",h.onload=()=>{h.status==200||h.status==0&&h.response?o(h.response):u()},h.onerror=u,h.send(null)});var lt=d.print||console.log.bind(console),z=d.printErr||console.error.bind(console);Object.assign(d,x),x=null,d.thisProgram&&(_=d.thisProgram);var Oe;d.wasmBinary&&(Oe=d.wasmBinary),typeof WebAssembly!="object"&&zt("no native wasm support detected");var Ge,jr=!1,ve,me,dr,V,_e,ni,Ze;function Se(){var n=Ge.buffer;d.HEAP8=ve=new Int8Array(n),d.HEAP16=dr=new Int16Array(n),d.HEAPU8=me=new Uint8Array(n),d.HEAPU16=new Uint16Array(n),d.HEAP32=V=new Int32Array(n),d.HEAPU32=_e=new Uint32Array(n),d.HEAPF32=ni=new Float32Array(n),d.HEAPF64=Ze=new Float64Array(n)}var Ce=[],hr=[],vn=[];function _r(){var n=d.preRun.shift();Ce.unshift(n)}var st=0,Vr=null;function zt(n){throw d.onAbort&&d.onAbort(n),n="Aborted("+n+")",z(n),jr=!0,new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info.")}var ao=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),Yt;if(Yt="sql-wasm.wasm",!ao(Yt)){var ii=Yt;Yt=d.locateFile?d.locateFile(ii,J):J+ii}function es(n){if(n==Yt&&Oe)return new Uint8Array(Oe);if($e)return $e(n);throw"both async and sync fetching of the wasm failed"}function Jr(n){if(!Oe&&(R||F)){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at '"+n+"'";return o.arrayBuffer()}).catch(()=>es(n));if(B)return new Promise((o,u)=>{B(n,h=>o(new Uint8Array(h)),u)})}return Promise.resolve().then(()=>es(n))}function si(n,o,u){return Jr(n).then(h=>WebAssembly.instantiate(h,o)).then(h=>h).then(u,h=>{z(`failed to asynchronously prepare wasm: ${h}`),zt(h)})}function ts(n,o){var u=Yt;Oe||typeof WebAssembly.instantiateStreaming!="function"||ao(u)||Wt(u)||we||typeof fetch!="function"?si(u,n,o):fetch(u,{credentials:"same-origin"}).then(h=>WebAssembly.instantiateStreaming(h,n).then(o,function(m){return z(`wasm streaming compile failed: ${m}`),z("falling back to ArrayBuffer instantiation"),si(u,n,o)}))}var p,w,v=n=>{for(;0<n.length;)n.shift()(d)};function C(n,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return ve[n>>0];case"i8":return ve[n>>0];case"i16":return dr[n>>1];case"i32":return V[n>>2];case"i64":zt("to do getValue(i64) use WASM_BIGINT");case"float":return ni[n>>2];case"double":return Ze[n>>3];case"*":return _e[n>>2];default:zt(`invalid type for getValue: ${o}`)}}function W(n){var o="i32";switch(o.endsWith("*")&&(o="*"),o){case"i1":ve[n>>0]=0;break;case"i8":ve[n>>0]=0;break;case"i16":dr[n>>1]=0;break;case"i32":V[n>>2]=0;break;case"i64":zt("to do setValue(i64) use WASM_BIGINT");case"float":ni[n>>2]=0;break;case"double":Ze[n>>3]=0;break;case"*":_e[n>>2]=0;break;default:zt(`invalid type for setValue: ${o}`)}}var D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,k=(n,o,u)=>{var h=o+u;for(u=o;n[u]&&!(u>=h);)++u;if(16<u-o&&n.buffer&&D)return D.decode(n.subarray(o,u));for(h="";o<u;){var m=n[o++];if(m&128){var b=n[o++]&63;if((m&224)==192)h+=String.fromCharCode((m&31)<<6|b);else{var O=n[o++]&63;m=(m&240)==224?(m&15)<<12|b<<6|O:(m&7)<<18|b<<12|O<<6|n[o++]&63,65536>m?h+=String.fromCharCode(m):(m-=65536,h+=String.fromCharCode(55296|m>>10,56320|m&1023))}}else h+=String.fromCharCode(m)}return h},A=(n,o)=>n?k(me,n,o):"",L=(n,o)=>{for(var u=0,h=n.length-1;0<=h;h--){var m=n[h];m==="."?n.splice(h,1):m===".."?(n.splice(h,1),u++):u&&(n.splice(h,1),u--)}if(o)for(;u;u--)n.unshift("..");return n},I=n=>{var o=n.charAt(0)==="/",u=n.substr(-1)==="/";return(n=L(n.split("/").filter(h=>!!h),!o).join("/"))||o||(n="."),n&&u&&(n+="/"),(o?"/":"")+n},M=n=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=o[0],o=o[1],!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},$=n=>{if(n==="/")return"/";n=I(n),n=n.replace(/\/$/,"");var o=n.lastIndexOf("/");return o===-1?n:n.substr(o+1)},Q=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(we)try{var n=Su;if(n.randomFillSync)return u=>n.randomFillSync(u);var o=n.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}zt("initRandomDevice")},K=n=>(K=Q())(n);function re(){for(var n="",o=!1,u=arguments.length-1;-1<=u&&!o;u--){if(o=0<=u?arguments[u]:"/",typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";n=o+"/"+n,o=o.charAt(0)==="/"}return n=L(n.split("/").filter(h=>!!h),!o).join("/"),(o?"/":"")+n||"."}var ye=[],Ne=n=>{for(var o=0,u=0;u<n.length;++u){var h=n.charCodeAt(u);127>=h?o++:2047>=h?o+=2:55296<=h&&57343>=h?(o+=4,++u):o+=3}return o},Pe=(n,o,u,h)=>{if(!(0<h))return 0;var m=u;h=u+h-1;for(var b=0;b<n.length;++b){var O=n.charCodeAt(b);if(55296<=O&&57343>=O){var H=n.charCodeAt(++b);O=65536+((O&1023)<<10)|H&1023}if(127>=O){if(u>=h)break;o[u++]=O}else{if(2047>=O){if(u+1>=h)break;o[u++]=192|O>>6}else{if(65535>=O){if(u+2>=h)break;o[u++]=224|O>>12}else{if(u+3>=h)break;o[u++]=240|O>>18,o[u++]=128|O>>12&63}o[u++]=128|O>>6&63}o[u++]=128|O&63}}return o[u]=0,u-m};function It(n,o){var u=Array(Ne(n)+1);return n=Pe(n,u,0,u.length),o&&(u.length=n),u}var Wr=[];function rs(n,o){Wr[n]={input:[],output:[],Xa:o},cu(n,xn)}var xn={open(n){var o=Wr[n.node.rdev];if(!o)throw new P(43);n.tty=o,n.seekable=!1},close(n){n.tty.Xa.fsync(n.tty)},fsync(n){n.tty.Xa.fsync(n.tty)},read(n,o,u,h){if(!n.tty||!n.tty.Xa.sb)throw new P(60);for(var m=0,b=0;b<h;b++){try{var O=n.tty.Xa.sb(n.tty)}catch{throw new P(29)}if(O===void 0&&m===0)throw new P(6);if(O==null)break;m++,o[u+b]=O}return m&&(n.node.timestamp=Date.now()),m},write(n,o,u,h){if(!n.tty||!n.tty.Xa.jb)throw new P(60);try{for(var m=0;m<h;m++)n.tty.Xa.jb(n.tty,o[u+m])}catch{throw new P(29)}return h&&(n.node.timestamp=Date.now()),m}},uo={sb(){e:{if(!ye.length){var n=null;if(we){var o=Buffer.alloc(256),u=0,h=process.stdin.fd;try{u=de.readSync(h,o)}catch(m){if(m.toString().includes("EOF"))u=0;else throw m}0<u?n=o.slice(0,u).toString("utf-8"):n=null}else typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`));if(!n){n=null;break e}ye=It(n,!0)}n=ye.shift()}return n},jb(n,o){o===null||o===10?(lt(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(lt(k(n.output,0)),n.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},gt={jb(n,o){o===null||o===10?(z(k(n.output,0)),n.output=[]):o!=0&&n.output.push(o)},fsync(n){n.output&&0<n.output.length&&(z(k(n.output,0)),n.output=[])}};function Dt(n,o){var u=n.Ia?n.Ia.length:0;u>=o||(o=Math.max(o,u*(1048576>u?2:1.125)>>>0),u!=0&&(o=Math.max(o,256)),u=n.Ia,n.Ia=new Uint8Array(o),0<n.Ma&&n.Ia.set(u.subarray(0,n.Ma),0))}var ne={Qa:null,Ra(){return ne.createNode(null,"/",16895,0)},createNode(n,o,u,h){if((u&61440)===24576||(u&61440)===4096)throw new P(63);return ne.Qa||(ne.Qa={dir:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa,lookup:ne.Ga.lookup,ab:ne.Ga.ab,rename:ne.Ga.rename,unlink:ne.Ga.unlink,rmdir:ne.Ga.rmdir,readdir:ne.Ga.readdir,symlink:ne.Ga.symlink},stream:{Ta:ne.Ha.Ta}},file:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa},stream:{Ta:ne.Ha.Ta,read:ne.Ha.read,write:ne.Ha.write,lb:ne.Ha.lb,bb:ne.Ha.bb,cb:ne.Ha.cb}},link:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa,readlink:ne.Ga.readlink},stream:{}},pb:{node:{Pa:ne.Ga.Pa,Oa:ne.Ga.Oa},stream:Jf}}),u=sc(n,o,u,h),Vt(u.mode)?(u.Ga=ne.Qa.dir.node,u.Ha=ne.Qa.dir.stream,u.Ia={}):(u.mode&61440)===32768?(u.Ga=ne.Qa.file.node,u.Ha=ne.Qa.file.stream,u.Ma=0,u.Ia=null):(u.mode&61440)===40960?(u.Ga=ne.Qa.link.node,u.Ha=ne.Qa.link.stream):(u.mode&61440)===8192&&(u.Ga=ne.Qa.pb.node,u.Ha=ne.Qa.pb.stream),u.timestamp=Date.now(),n&&(n.Ia[o]=u,n.timestamp=u.timestamp),u},Lb(n){return n.Ia?n.Ia.subarray?n.Ia.subarray(0,n.Ma):new Uint8Array(n.Ia):new Uint8Array(0)},Ga:{Pa(n){var o={};return o.dev=(n.mode&61440)===8192?n.id:1,o.ino=n.id,o.mode=n.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=n.rdev,Vt(n.mode)?o.size=4096:(n.mode&61440)===32768?o.size=n.Ma:(n.mode&61440)===40960?o.size=n.link.length:o.size=0,o.atime=new Date(n.timestamp),o.mtime=new Date(n.timestamp),o.ctime=new Date(n.timestamp),o.zb=4096,o.blocks=Math.ceil(o.size/o.zb),o},Oa(n,o){if(o.mode!==void 0&&(n.mode=o.mode),o.timestamp!==void 0&&(n.timestamp=o.timestamp),o.size!==void 0&&(o=o.size,n.Ma!=o))if(o==0)n.Ia=null,n.Ma=0;else{var u=n.Ia;n.Ia=new Uint8Array(o),u&&n.Ia.set(u.subarray(0,Math.min(o,n.Ma))),n.Ma=o}},lookup(){throw uu[44]},ab(n,o,u,h){return ne.createNode(n,o,u,h)},rename(n,o,u){if(Vt(n.mode)){try{var h=On(o,u)}catch{}if(h)for(var m in h.Ia)throw new P(55)}delete n.parent.Ia[n.name],n.parent.timestamp=Date.now(),n.name=u,o.Ia[u]=n,o.timestamp=n.parent.timestamp,n.parent=o},unlink(n,o){delete n.Ia[o],n.timestamp=Date.now()},rmdir(n,o){var u=On(n,o),h;for(h in u.Ia)throw new P(55);delete n.Ia[o],n.timestamp=Date.now()},readdir(n){var o=[".",".."],u;for(u in n.Ia)n.Ia.hasOwnProperty(u)&&o.push(u);return o},symlink(n,o,u){return n=ne.createNode(n,o,41471,0),n.link=u,n},readlink(n){if((n.mode&61440)!==40960)throw new P(28);return n.link}},Ha:{read(n,o,u,h,m){var b=n.node.Ia;if(m>=n.node.Ma)return 0;if(n=Math.min(n.node.Ma-m,h),8<n&&b.subarray)o.set(b.subarray(m,m+n),u);else for(h=0;h<n;h++)o[u+h]=b[m+h];return n},write(n,o,u,h,m,b){if(o.buffer===ve.buffer&&(b=!1),!h)return 0;if(n=n.node,n.timestamp=Date.now(),o.subarray&&(!n.Ia||n.Ia.subarray)){if(b)return n.Ia=o.subarray(u,u+h),n.Ma=h;if(n.Ma===0&&m===0)return n.Ia=o.slice(u,u+h),n.Ma=h;if(m+h<=n.Ma)return n.Ia.set(o.subarray(u,u+h),m),h}if(Dt(n,m+h),n.Ia.subarray&&o.subarray)n.Ia.set(o.subarray(u,u+h),m);else for(b=0;b<h;b++)n.Ia[m+b]=o[u+b];return n.Ma=Math.max(n.Ma,m+h),h},Ta(n,o,u){if(u===1?o+=n.position:u===2&&(n.node.mode&61440)===32768&&(o+=n.node.Ma),0>o)throw new P(28);return o},lb(n,o,u){Dt(n.node,o+u),n.node.Ma=Math.max(n.node.Ma,o+u)},bb(n,o,u,h,m){if((n.node.mode&61440)!==32768)throw new P(43);if(n=n.node.Ia,m&2||n.buffer!==ve.buffer){if((0<u||u+o<n.length)&&(n.subarray?n=n.subarray(u,u+o):n=Array.prototype.slice.call(n,u,u+o)),u=!0,o=65536*Math.ceil(o/65536),(m=_c(65536,o))?(me.fill(0,m,m+o),o=m):o=0,!o)throw new P(48);ve.set(n,o)}else u=!1,o=n.byteOffset;return{Db:o,ub:u}},cb(n,o,u,h){return ne.Ha.write(n,o,0,h,u,!1),0}}},tc=(n,o)=>{var u=0;return n&&(u|=365),o&&(u|=146),u},au=null,rc={},ns=[],jf=1,Kr=null,nc=!0,P=null,uu={};function Et(n,o={}){if(n=re(n),!n)return{path:"",node:null};if(o=Object.assign({qb:!0,kb:0},o),8<o.kb)throw new P(32);n=n.split("/").filter(O=>!!O);for(var u=au,h="/",m=0;m<n.length;m++){var b=m===n.length-1;if(b&&o.parent)break;if(u=On(u,n[m]),h=I(h+"/"+n[m]),u.Va&&(!b||b&&o.qb)&&(u=u.Va.root),!b||o.Sa){for(b=0;(u.mode&61440)===40960;)if(u=fc(h),h=re(M(h),u),u=Et(h,{kb:o.kb+1}).node,40<b++)throw new P(32)}}return{path:h,node:u}}function is(n){for(var o;;){if(n===n.parent)return n=n.Ra.tb,o?n[n.length-1]!=="/"?`${n}/${o}`:n+o:n;o=o?`${n.name}/${o}`:n.name,n=n.parent}}function lu(n,o){for(var u=0,h=0;h<o.length;h++)u=(u<<5)-u+o.charCodeAt(h)|0;return(n+u>>>0)%Kr.length}function ic(n){var o=lu(n.parent.id,n.name);if(Kr[o]===n)Kr[o]=n.Wa;else for(o=Kr[o];o;){if(o.Wa===n){o.Wa=n.Wa;break}o=o.Wa}}function On(n,o){var u;if(u=(u=oi(n,"x"))?u:n.Ga.lookup?0:2)throw new P(u,n);for(u=Kr[lu(n.id,o)];u;u=u.Wa){var h=u.name;if(u.parent.id===n.id&&h===o)return u}return n.Ga.lookup(n,o)}function sc(n,o,u,h){return n=new Cc(n,o,u,h),o=lu(n.parent.id,n.name),n.Wa=Kr[o],Kr[o]=n}function Vt(n){return(n&61440)===16384}function oc(n){var o=["r","w","rw"][n&3];return n&512&&(o+="w"),o}function oi(n,o){if(nc)return 0;if(!o.includes("r")||n.mode&292){if(o.includes("w")&&!(n.mode&146)||o.includes("x")&&!(n.mode&73))return 2}else return 2;return 0}function ac(n,o){try{return On(n,o),20}catch{}return oi(n,"wx")}function uc(n,o,u){try{var h=On(n,o)}catch(m){return m.Ka}if(n=oi(n,"wx"))return n;if(u){if(!Vt(h.mode))return 54;if(h===h.parent||is(h)==="/")return 10}else if(Vt(h.mode))return 31;return 0}function Vf(){for(var n=0;4096>=n;n++)if(!ns[n])return n;throw new P(33)}function bt(n){if(n=ns[n],!n)throw new P(8);return n}function lc(n,o=-1){return as||(as=function(){this.$a={}},as.prototype={},Object.defineProperties(as.prototype,{object:{get(){return this.node},set(u){this.node=u}},flags:{get(){return this.$a.flags},set(u){this.$a.flags=u}},position:{get(){return this.$a.position},set(u){this.$a.position=u}}})),n=Object.assign(new as,n),o==-1&&(o=Vf()),n.fd=o,ns[o]=n}var Jf={open(n){n.Ha=rc[n.node.rdev].Ha,n.Ha.open&&n.Ha.open(n)},Ta(){throw new P(70)}};function cu(n,o){rc[n]={Ha:o}}function cc(n,o){var u=o==="/",h=!o;if(u&&au)throw new P(10);if(!u&&!h){var m=Et(o,{qb:!1});if(o=m.path,m=m.node,m.Va)throw new P(10);if(!Vt(m.mode))throw new P(54)}o={type:n,Pb:{},tb:o,Cb:[]},n=n.Ra(o),n.Ra=o,o.root=n,u?au=n:m&&(m.Va=o,m.Ra&&m.Ra.Cb.push(o))}function lo(n,o,u){var h=Et(n,{parent:!0}).node;if(n=$(n),!n||n==="."||n==="..")throw new P(28);var m=ac(h,n);if(m)throw new P(m);if(!h.Ga.ab)throw new P(63);return h.Ga.ab(h,n,o,u)}function fr(n,o){return lo(n,(o!==void 0?o:511)&1023|16384,0)}function co(n,o,u){typeof u>"u"&&(u=o,o=438),lo(n,o|8192,u)}function du(n,o){if(!re(n))throw new P(44);var u=Et(o,{parent:!0}).node;if(!u)throw new P(44);o=$(o);var h=ac(u,o);if(h)throw new P(h);if(!u.Ga.symlink)throw new P(63);u.Ga.symlink(u,o,n)}function dc(n){var o=Et(n,{parent:!0}).node;n=$(n);var u=On(o,n),h=uc(o,n,!0);if(h)throw new P(h);if(!o.Ga.rmdir)throw new P(63);if(u.Va)throw new P(10);o.Ga.rmdir(o,n),ic(u)}function hc(n){var o=Et(n,{parent:!0}).node;if(!o)throw new P(44);n=$(n);var u=On(o,n),h=uc(o,n,!1);if(h)throw new P(h);if(!o.Ga.unlink)throw new P(63);if(u.Va)throw new P(10);o.Ga.unlink(o,n),ic(u)}function fc(n){if(n=Et(n).node,!n)throw new P(44);if(!n.Ga.readlink)throw new P(28);return re(is(n.parent),n.Ga.readlink(n))}function ss(n,o){if(n=Et(n,{Sa:!o}).node,!n)throw new P(44);if(!n.Ga.Pa)throw new P(63);return n.Ga.Pa(n)}function pc(n){return ss(n,!0)}function ho(n,o){if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);n.Ga.Oa(n,{mode:o&4095|n.mode&-4096,timestamp:Date.now()})}function mc(n,o){if(0>o)throw new P(28);if(n=typeof n=="string"?Et(n,{Sa:!0}).node:n,!n.Ga.Oa)throw new P(63);if(Vt(n.mode))throw new P(31);if((n.mode&61440)!==32768)throw new P(28);var u=oi(n,"w");if(u)throw new P(u);n.Ga.Oa(n,{size:o,timestamp:Date.now()})}function ai(n,o,u){if(n==="")throw new P(44);if(typeof o=="string"){var h={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[o];if(typeof h>"u")throw Error(`Unknown file open mode: ${o}`);o=h}if(u=o&64?(typeof u>"u"?438:u)&4095|32768:0,typeof n=="object")var m=n;else{n=I(n);try{m=Et(n,{Sa:!(o&131072)}).node}catch{}}if(h=!1,o&64)if(m){if(o&128)throw new P(20)}else m=lo(n,u,0),h=!0;if(!m)throw new P(44);if((m.mode&61440)===8192&&(o&=-513),o&65536&&!Vt(m.mode))throw new P(54);if(!h&&(u=m?(m.mode&61440)===40960?32:Vt(m.mode)&&(oc(o)!=="r"||o&512)?31:oi(m,oc(o)):44))throw new P(u);return o&512&&!h&&mc(m,0),o&=-131713,m=lc({node:m,path:is(m),flags:o,seekable:!0,position:0,Ha:m.Ha,Fb:[],error:!1}),m.Ha.open&&m.Ha.open(m),!d.logReadFiles||o&1||(fu||(fu={}),n in fu||(fu[n]=1)),m}function hu(n){if(n.fd===null)throw new P(8);n.hb&&(n.hb=null);try{n.Ha.close&&n.Ha.close(n)}catch(o){throw o}finally{ns[n.fd]=null}n.fd=null}function yc(n,o,u){if(n.fd===null)throw new P(8);if(!n.seekable||!n.Ha.Ta)throw new P(70);if(u!=0&&u!=1&&u!=2)throw new P(28);n.position=n.Ha.Ta(n,o,u),n.Fb=[]}function wc(n,o,u,h,m){if(0>h||0>m)throw new P(28);if(n.fd===null)throw new P(8);if((n.flags&2097155)===1)throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.read)throw new P(28);var b=typeof m<"u";if(!b)m=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.read(n,o,u,h,m),b||(n.position+=o),o}function Nc(n,o,u,h,m){if(0>h||0>m)throw new P(28);if(n.fd===null)throw new P(8);if(!(n.flags&2097155))throw new P(8);if(Vt(n.node.mode))throw new P(31);if(!n.Ha.write)throw new P(28);n.seekable&&n.flags&1024&&yc(n,0,2);var b=typeof m<"u";if(!b)m=n.position;else if(!n.seekable)throw new P(70);return o=n.Ha.write(n,o,u,h,m,void 0),b||(n.position+=o),o}function Kf(n){var o,u=ai(n,u||0);n=ss(n).size;var h=new Uint8Array(n);return wc(u,h,0,n,0),o=h,hu(u),o}function gc(){P||(P=function(n,o){this.name="ErrnoError",this.node=o,this.Eb=function(u){this.Ka=u},this.Eb(n),this.message="FS error"},P.prototype=Error(),P.prototype.constructor=P,[44].forEach(n=>{uu[n]=new P(n),uu[n].stack="<generic error, no stack>"}))}var bc;function os(n,o,u){n=I("/dev/"+n);var h=tc(!!o,!!u);vc||(vc=64);var m=vc++<<8|0;cu(m,{open(b){b.seekable=!1},close(){u&&u.buffer&&u.buffer.length&&u(10)},read(b,O,H,he){for(var ie=0,ze=0;ze<he;ze++){try{var ot=o()}catch{throw new P(29)}if(ot===void 0&&ie===0)throw new P(6);if(ot==null)break;ie++,O[H+ze]=ot}return ie&&(b.node.timestamp=Date.now()),ie},write(b,O,H,he){for(var ie=0;ie<he;ie++)try{u(O[H+ie])}catch{throw new P(29)}return he&&(b.node.timestamp=Date.now()),ie}}),co(n,h,m)}var vc,Le={},as,fu;function Cn(n,o,u){if(o.charAt(0)==="/")return o;if(n=n===-100?"/":bt(n).path,o.length==0){if(!u)throw new P(44);return n}return I(n+"/"+o)}function fo(n,o,u){try{var h=n(o)}catch(b){if(b&&b.node&&I(o)!==I(is(b.node)))return-54;throw b}V[u>>2]=h.dev,V[u+4>>2]=h.mode,_e[u+8>>2]=h.nlink,V[u+12>>2]=h.uid,V[u+16>>2]=h.gid,V[u+20>>2]=h.rdev,w=[h.size>>>0,(p=h.size,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+24>>2]=w[0],V[u+28>>2]=w[1],V[u+32>>2]=4096,V[u+36>>2]=h.blocks,n=h.atime.getTime(),o=h.mtime.getTime();var m=h.ctime.getTime();return w=[Math.floor(n/1e3)>>>0,(p=Math.floor(n/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+40>>2]=w[0],V[u+44>>2]=w[1],_e[u+48>>2]=n%1e3*1e3,w=[Math.floor(o/1e3)>>>0,(p=Math.floor(o/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+56>>2]=w[0],V[u+60>>2]=w[1],_e[u+64>>2]=o%1e3*1e3,w=[Math.floor(m/1e3)>>>0,(p=Math.floor(m/1e3),1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+72>>2]=w[0],V[u+76>>2]=w[1],_e[u+80>>2]=m%1e3*1e3,w=[h.ino>>>0,(p=h.ino,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[u+88>>2]=w[0],V[u+92>>2]=w[1],0}var po=void 0;function mo(){var n=V[+po>>2];return po+=4,n}var us=(n,o)=>o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN,Hf=[0,31,60,91,121,152,182,213,244,274,305,335],Gf=[0,31,59,90,120,151,181,212,243,273,304,334],xc=n=>{var o=Ne(n)+1,u=go(o);return u&&Pe(n,me,u,o),u},pu={},Oc=()=>{if(!mu){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"},o;for(o in pu)pu[o]===void 0?delete n[o]:n[o]=pu[o];var u=[];for(o in n)u.push(`${o}=${n[o]}`);mu=u}return mu},mu,yu=n=>{var o=Ne(n)+1,u=Hr(o);return Pe(n,me,u,o),u},zf=(n,o,u,h)=>{var m={string:ie=>{var ze=0;return ie!=null&&ie!==0&&(ze=yu(ie)),ze},array:ie=>{var ze=Hr(ie.length);return ve.set(ie,ze),ze}};n=d["_"+n];var b=[],O=0;if(h)for(var H=0;H<h.length;H++){var he=m[u[H]];he?(O===0&&(O=ls()),b[H]=he(h[H])):b[H]=h[H]}return u=n.apply(null,b),u=function(ie){return O!==0&&cs(O),o==="string"?ie?k(me,ie):"":o==="boolean"?!!ie:ie}(u)},yo=0,wo=(n,o)=>(o=o==1?Hr(n.length):go(n.length),n.subarray||n.slice||(n=new Uint8Array(n)),me.set(n,o),o),qn,wu=[],Ir,ui=n=>{qn.delete(Ir.get(n)),Ir.set(n,null),wu.push(n)},No=(n,o)=>{if(!qn){qn=new WeakMap;var u=Ir.length;if(qn)for(var h=0;h<0+u;h++){var m=Ir.get(h);m&&qn.set(m,h)}}if(u=qn.get(n)||0)return u;if(wu.length)u=wu.pop();else{try{Ir.grow(1)}catch(H){throw H instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":H}u=Ir.length-1}try{Ir.set(u,n)}catch(H){if(!(H instanceof TypeError))throw H;if(typeof WebAssembly.Function=="function"){h=WebAssembly.Function,m={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:o[0]=="v"?[]:[m[o[0]]]},O=1;O<o.length;++O)b.parameters.push(m[o[O]]);o=new h(b,n)}else{for(h=[1],m=o.slice(0,1),o=o.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},h.push(96),O=o.length,128>O?h.push(O):h.push(O%128|128,O>>7),O=0;O<o.length;++O)h.push(b[o[O]]);m=="v"?h.push(0):h.push(1,b[m]),o=[0,97,115,109,1,0,0,0,1],m=h.length,128>m?o.push(m):o.push(m%128|128,m>>7),o.push.apply(o,h),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),o=new WebAssembly.Module(new Uint8Array(o)),o=new WebAssembly.Instance(o,{e:{f:n}}).exports.f}Ir.set(u,o)}return qn.set(n,u),u};function Cc(n,o,u,h){n||(n=this),this.parent=n,this.Ra=n.Ra,this.Va=null,this.id=jf++,this.name=o,this.mode=u,this.Ga={},this.Ha={},this.rdev=h}Object.defineProperties(Cc.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),gc(),Kr=Array(4096),cc(ne,"/"),fr("/tmp"),fr("/home"),fr("/home/web_user"),function(){fr("/dev"),cu(259,{read:()=>0,write:(h,m,b,O)=>O}),co("/dev/null",259),rs(1280,uo),rs(1536,gt),co("/dev/tty",1280),co("/dev/tty1",1536);var n=new Uint8Array(1024),o=0,u=()=>(o===0&&(o=K(n).byteLength),n[--o]);os("random",u),os("urandom",u),fr("/dev/shm"),fr("/dev/shm/tmp")}(),function(){fr("/proc");var n=fr("/proc/self");fr("/proc/self/fd"),cc({Ra(){var o=sc(n,"fd",16895,73);return o.Ga={lookup(u,h){var m=bt(+h);return u={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>m.path}},u.parent=u}},o}},"/proc/self/fd")}();var Yf={a:(n,o,u,h)=>{zt(`Assertion failed: ${n?k(me,n):""}, at: `+[o?o?k(me,o):"":"unknown filename",u,h?h?k(me,h):"":"unknown function"])},h:function(n,o){try{return n=n?k(me,n):"",ho(n,o),0}catch(u){if(typeof Le>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},H:function(n,o,u){try{if(o=o?k(me,o):"",o=Cn(n,o),u&-8)return-28;var h=Et(o,{Sa:!0}).node;return h?(n="",u&4&&(n+="r"),u&2&&(n+="w"),u&1&&(n+="x"),n&&oi(h,n)?-2:0):-44}catch(m){if(typeof Le>"u"||m.name!=="ErrnoError")throw m;return-m.Ka}},i:function(n,o){try{var u=bt(n);return ho(u.node,o),0}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},g:function(n){try{var o=bt(n).node,u=typeof o=="string"?Et(o,{Sa:!0}).node:o;if(!u.Ga.Oa)throw new P(63);return u.Ga.Oa(u,{timestamp:Date.now()}),0}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},b:function(n,o,u){po=u;try{var h=bt(n);switch(o){case 0:var m=mo();if(0>m)return-28;for(;ns[m];)m++;return lc(h,m).fd;case 1:case 2:return 0;case 3:return h.flags;case 4:return m=mo(),h.flags|=m,0;case 5:return m=mo(),dr[m+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return V[qc()>>2]=28,-1;default:return-28}}catch(b){if(typeof Le>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},f:function(n,o){try{var u=bt(n);return fo(ss,u.path,o)}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},n:function(n,o,u){o=us(o,u);try{if(isNaN(o))return 61;var h=bt(n);if(!(h.flags&2097155))throw new P(28);return mc(h.node,o),0}catch(m){if(typeof Le>"u"||m.name!=="ErrnoError")throw m;return-m.Ka}},C:function(n,o){try{if(o===0)return-28;var u=Ne("/")+1;return o<u?-68:(Pe("/",me,n,o),u)}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},F:function(n,o){try{return n=n?k(me,n):"",fo(pc,n,o)}catch(u){if(typeof Le>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},z:function(n,o,u){try{return o=o?k(me,o):"",o=Cn(n,o),o=I(o),o[o.length-1]==="/"&&(o=o.substr(0,o.length-1)),fr(o,u),0}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},E:function(n,o,u,h){try{o=o?k(me,o):"";var m=h&256;return o=Cn(n,o,h&4096),fo(m?pc:ss,o,u)}catch(b){if(typeof Le>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},y:function(n,o,u,h){po=h;try{o=o?k(me,o):"",o=Cn(n,o);var m=h?mo():0;return ai(o,u,m).fd}catch(b){if(typeof Le>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},w:function(n,o,u,h){try{if(o=o?k(me,o):"",o=Cn(n,o),0>=h)return-28;var m=fc(o),b=Math.min(h,Ne(m)),O=ve[u+b];return Pe(m,me,u,h+1),ve[u+b]=O,b}catch(H){if(typeof Le>"u"||H.name!=="ErrnoError")throw H;return-H.Ka}},v:function(n){try{return n=n?k(me,n):"",dc(n),0}catch(o){if(typeof Le>"u"||o.name!=="ErrnoError")throw o;return-o.Ka}},G:function(n,o){try{return n=n?k(me,n):"",fo(ss,n,o)}catch(u){if(typeof Le>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},r:function(n,o,u){try{return o=o?k(me,o):"",o=Cn(n,o),u===0?hc(o):u===512?dc(o):zt("Invalid flags passed to unlinkat"),0}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return-h.Ka}},q:function(n,o,u){try{if(o=o?k(me,o):"",o=Cn(n,o,!0),u){var h=_e[u>>2]+4294967296*V[u+4>>2],m=V[u+8>>2];b=1e3*h+m/1e6,u+=16,h=_e[u>>2]+4294967296*V[u+4>>2],m=V[u+8>>2],O=1e3*h+m/1e6}else var b=Date.now(),O=b;n=b;var H=Et(o,{Sa:!0}).node;return H.Ga.Oa(H,{timestamp:Math.max(n,O)}),0}catch(he){if(typeof Le>"u"||he.name!=="ErrnoError")throw he;return-he.Ka}},l:function(n,o,u){n=new Date(1e3*us(n,o)),V[u>>2]=n.getSeconds(),V[u+4>>2]=n.getMinutes(),V[u+8>>2]=n.getHours(),V[u+12>>2]=n.getDate(),V[u+16>>2]=n.getMonth(),V[u+20>>2]=n.getFullYear()-1900,V[u+24>>2]=n.getDay(),o=n.getFullYear(),V[u+28>>2]=(o%4!==0||o%100===0&&o%400!==0?Gf:Hf)[n.getMonth()]+n.getDate()-1|0,V[u+36>>2]=-(60*n.getTimezoneOffset()),o=new Date(n.getFullYear(),6,1).getTimezoneOffset();var h=new Date(n.getFullYear(),0,1).getTimezoneOffset();V[u+32>>2]=(o!=h&&n.getTimezoneOffset()==Math.min(h,o))|0},j:function(n,o,u,h,m,b,O,H){m=us(m,b);try{if(isNaN(m))return 61;var he=bt(h);if(o&2&&!(u&2)&&(he.flags&2097155)!==2)throw new P(2);if((he.flags&2097155)===1)throw new P(2);if(!he.Ha.bb)throw new P(43);var ie=he.Ha.bb(he,n,m,o,u),ze=ie.Db;return V[O>>2]=ie.ub,_e[H>>2]=ze,0}catch(ot){if(typeof Le>"u"||ot.name!=="ErrnoError")throw ot;return-ot.Ka}},k:function(n,o,u,h,m,b,O){b=us(b,O);try{if(isNaN(b))return 61;var H=bt(m);if(u&2){if((H.node.mode&61440)!==32768)throw new P(43);if(!(h&2)){var he=me.slice(n,n+o);H.Ha.cb&&H.Ha.cb(H,he,b,o,h)}}}catch(ie){if(typeof Le>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Ka}},s:(n,o,u)=>{function h(he){return(he=he.toTimeString().match(/\(([A-Za-z ]+)\)$/))?he[1]:"GMT"}var m=new Date().getFullYear(),b=new Date(m,0,1),O=new Date(m,6,1);m=b.getTimezoneOffset();var H=O.getTimezoneOffset();_e[n>>2]=60*Math.max(m,H),V[o>>2]=+(m!=H),n=h(b),o=h(O),n=xc(n),o=xc(o),H<m?(_e[u>>2]=n,_e[u+4>>2]=o):(_e[u>>2]=o,_e[u+4>>2]=n)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:n=>{var o=me.length;if(n>>>=0,2147483648<n)return!1;for(var u=1;4>=u;u*=2){var h=o*(1+.2/u);h=Math.min(h,n+100663296);var m=Math;h=Math.max(n,h);e:{m=(m.min.call(m,2147483648,h+(65536-h%65536)%65536)-Ge.buffer.byteLength+65535)/65536;try{Ge.grow(m),Se();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(n,o)=>{var u=0;return Oc().forEach((h,m)=>{var b=o+u;for(m=_e[n+4*m>>2]=b,b=0;b<h.length;++b)ve[m++>>0]=h.charCodeAt(b);ve[m>>0]=0,u+=h.length+1}),0},B:(n,o)=>{var u=Oc();_e[n>>2]=u.length;var h=0;return u.forEach(m=>h+=m.length+1),_e[o>>2]=h,0},e:function(n){try{var o=bt(n);return hu(o),0}catch(u){if(typeof Le>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},p:function(n,o){try{var u=bt(n);return ve[o>>0]=u.tty?2:Vt(u.mode)?3:(u.mode&61440)===40960?7:4,dr[o+2>>1]=0,w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+8>>2]=w[0],V[o+12>>2]=w[1],w=[0,(p=0,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[o+16>>2]=w[0],V[o+20>>2]=w[1],0}catch(h){if(typeof Le>"u"||h.name!=="ErrnoError")throw h;return h.Ka}},x:function(n,o,u,h){try{e:{var m=bt(n);n=o;for(var b,O=o=0;O<u;O++){var H=_e[n>>2],he=_e[n+4>>2];n+=8;var ie=wc(m,ve,H,he,b);if(0>ie){var ze=-1;break e}if(o+=ie,ie<he)break;typeof b<"u"&&(b+=ie)}ze=o}return _e[h>>2]=ze,0}catch(ot){if(typeof Le>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}},m:function(n,o,u,h,m){o=us(o,u);try{if(isNaN(o))return 61;var b=bt(n);return yc(b,o,h),w=[b.position>>>0,(p=b.position,1<=+Math.abs(p)?0<p?+Math.floor(p/4294967296)>>>0:~~+Math.ceil((p-+(~~p>>>0))/4294967296)>>>0:0)],V[m>>2]=w[0],V[m+4>>2]=w[1],b.hb&&o===0&&h===0&&(b.hb=null),0}catch(O){if(typeof Le>"u"||O.name!=="ErrnoError")throw O;return O.Ka}},D:function(n){try{var o=bt(n);return o.Ha&&o.Ha.fsync?o.Ha.fsync(o):0}catch(u){if(typeof Le>"u"||u.name!=="ErrnoError")throw u;return u.Ka}},u:function(n,o,u,h){try{e:{var m=bt(n);n=o;for(var b,O=o=0;O<u;O++){var H=_e[n>>2],he=_e[n+4>>2];n+=8;var ie=Nc(m,ve,H,he,b);if(0>ie){var ze=-1;break e}o+=ie,typeof b<"u"&&(b+=ie)}ze=o}return _e[h>>2]=ze,0}catch(ot){if(typeof Le>"u"||ot.name!=="ErrnoError")throw ot;return ot.Ka}}},j=function(){function n(u){return j=u.exports,Ge=j.I,Se(),Ir=j.Aa,hr.unshift(j.J),st--,d.monitorRunDependencies&&d.monitorRunDependencies(st),st==0&&Vr&&(u=Vr,Vr=null,u()),j}var o={a:Yf};if(st++,d.monitorRunDependencies&&d.monitorRunDependencies(st),d.instantiateWasm)try{return d.instantiateWasm(o,n)}catch(u){return z(`Module.instantiateWasm callback failed with error: ${u}`),!1}return ts(o,function(u){n(u.instance)}),{}}();d._sqlite3_free=n=>(d._sqlite3_free=j.K)(n),d._sqlite3_value_text=n=>(d._sqlite3_value_text=j.L)(n);var qc=()=>(qc=j.M)();d._sqlite3_prepare_v2=(n,o,u,h,m)=>(d._sqlite3_prepare_v2=j.N)(n,o,u,h,m),d._sqlite3_step=n=>(d._sqlite3_step=j.O)(n),d._sqlite3_finalize=n=>(d._sqlite3_finalize=j.P)(n),d._sqlite3_reset=n=>(d._sqlite3_reset=j.Q)(n),d._sqlite3_clear_bindings=n=>(d._sqlite3_clear_bindings=j.R)(n),d._sqlite3_value_blob=n=>(d._sqlite3_value_blob=j.S)(n),d._sqlite3_value_bytes=n=>(d._sqlite3_value_bytes=j.T)(n),d._sqlite3_value_double=n=>(d._sqlite3_value_double=j.U)(n),d._sqlite3_value_int=n=>(d._sqlite3_value_int=j.V)(n),d._sqlite3_value_type=n=>(d._sqlite3_value_type=j.W)(n),d._sqlite3_result_blob=(n,o,u,h)=>(d._sqlite3_result_blob=j.X)(n,o,u,h),d._sqlite3_result_double=(n,o)=>(d._sqlite3_result_double=j.Y)(n,o),d._sqlite3_result_error=(n,o,u)=>(d._sqlite3_result_error=j.Z)(n,o,u),d._sqlite3_result_int=(n,o)=>(d._sqlite3_result_int=j._)(n,o),d._sqlite3_result_int64=(n,o,u)=>(d._sqlite3_result_int64=j.$)(n,o,u),d._sqlite3_result_null=n=>(d._sqlite3_result_null=j.aa)(n),d._sqlite3_result_text=(n,o,u,h)=>(d._sqlite3_result_text=j.ba)(n,o,u,h),d._sqlite3_aggregate_context=(n,o)=>(d._sqlite3_aggregate_context=j.ca)(n,o),d._sqlite3_column_count=n=>(d._sqlite3_column_count=j.da)(n),d._sqlite3_data_count=n=>(d._sqlite3_data_count=j.ea)(n),d._sqlite3_column_blob=(n,o)=>(d._sqlite3_column_blob=j.fa)(n,o),d._sqlite3_column_bytes=(n,o)=>(d._sqlite3_column_bytes=j.ga)(n,o),d._sqlite3_column_double=(n,o)=>(d._sqlite3_column_double=j.ha)(n,o),d._sqlite3_column_text=(n,o)=>(d._sqlite3_column_text=j.ia)(n,o),d._sqlite3_column_type=(n,o)=>(d._sqlite3_column_type=j.ja)(n,o),d._sqlite3_column_name=(n,o)=>(d._sqlite3_column_name=j.ka)(n,o),d._sqlite3_bind_blob=(n,o,u,h,m)=>(d._sqlite3_bind_blob=j.la)(n,o,u,h,m),d._sqlite3_bind_double=(n,o,u)=>(d._sqlite3_bind_double=j.ma)(n,o,u),d._sqlite3_bind_int=(n,o,u)=>(d._sqlite3_bind_int=j.na)(n,o,u),d._sqlite3_bind_text=(n,o,u,h,m)=>(d._sqlite3_bind_text=j.oa)(n,o,u,h,m),d._sqlite3_bind_parameter_index=(n,o)=>(d._sqlite3_bind_parameter_index=j.pa)(n,o),d._sqlite3_sql=n=>(d._sqlite3_sql=j.qa)(n),d._sqlite3_normalized_sql=n=>(d._sqlite3_normalized_sql=j.ra)(n),d._sqlite3_errmsg=n=>(d._sqlite3_errmsg=j.sa)(n),d._sqlite3_exec=(n,o,u,h,m)=>(d._sqlite3_exec=j.ta)(n,o,u,h,m),d._sqlite3_changes=n=>(d._sqlite3_changes=j.ua)(n),d._sqlite3_close_v2=n=>(d._sqlite3_close_v2=j.va)(n),d._sqlite3_create_function_v2=(n,o,u,h,m,b,O,H,he)=>(d._sqlite3_create_function_v2=j.wa)(n,o,u,h,m,b,O,H,he),d._sqlite3_open=(n,o)=>(d._sqlite3_open=j.xa)(n,o);var go=d._malloc=n=>(go=d._malloc=j.ya)(n),bo=d._free=n=>(bo=d._free=j.za)(n);d._RegisterExtensionFunctions=n=>(d._RegisterExtensionFunctions=j.Ba)(n);var _c=(n,o)=>(_c=j.Ca)(n,o),ls=()=>(ls=j.Da)(),cs=n=>(cs=j.Ea)(n),Hr=n=>(Hr=j.Fa)(n);d.stackAlloc=Hr,d.stackSave=ls,d.stackRestore=cs,d.cwrap=(n,o,u,h)=>{var m=!u||u.every(b=>b==="number"||b==="boolean");return o!=="string"&&m&&!h?d["_"+n]:function(){return zf(n,o,u,arguments)}},d.addFunction=No,d.removeFunction=ui,d.UTF8ToString=A,d.ALLOC_NORMAL=yo,d.allocate=wo,d.allocateUTF8OnStack=yu;var vo;Vr=function n(){vo||Wc(),vo||(Vr=n)};function Wc(){function n(){if(!vo&&(vo=!0,d.calledRun=!0,!jr)){if(d.noFSInit||bc||(bc=!0,gc(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?os("stdin",d.stdin):du("/dev/tty","/dev/stdin"),d.stdout?os("stdout",null,d.stdout):du("/dev/tty","/dev/stdout"),d.stderr?os("stderr",null,d.stderr):du("/dev/tty1","/dev/stderr"),ai("/dev/stdin",0),ai("/dev/stdout",1),ai("/dev/stderr",1)),nc=!1,v(hr),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var o=d.postRun.shift();vn.unshift(o)}v(vn)}}if(!(0<st)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)_r();v(Ce),0<st||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),n()},1)):n())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Wc(),y}),r)};t.exports=i,t.exports.default=i})(Rf);var BN=Rf.exports;const FN=DN(BN),UN=""+new URL("sql-wasm-Ko6OkY9T.wasm",import.meta.url).href,$N="sqlitevfs",fi=new Map,QN=2048,jN=65536;class VN{constructor(e){ee(this,"_data");ee(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,r){if(e>=this._size)return 0;const i=this._data.subarray(e,Math.min(this._size,e+r.length));return r.set(i),i.length}reserve(e){if(this._data.length>=e)return;const r=e-this._data.length,i=Math.min(jN,Math.max(QN,this._data.length)),a=new Uint8Array(this._data.length+Math.max(i,r));a.set(this._data),this._data=a}write(e,r){return this.reserve(e+r.length),this._data.set(r,e),this._size=Math.max(this._size,e+r.length),r.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const JN=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Gl=new Promise((t,e)=>{const r=JN.open($N,1);r.onupgradeneeded=()=>r.result.createObjectStore("files",{keyPath:"name"}),r.onsuccess=()=>t(r.result),r.onerror=()=>e(r.error)});async function KN(t){const e=await Gl,r=await new Promise((i,a)=>{const f=e.transaction("files","readonly").objectStore("files").get(t);f.onsuccess=()=>i(f.result),f.onerror=()=>a(f.error)});if(r&&!fi.has(t)){const i=new VN(r.data);return fi.set(t,i),i}else return fi.has(t)?fi.get(t):null}async function HN(t,e){const r=await Gl;await new Promise((i,a)=>{const f=r.transaction("files","readwrite").objectStore("files").put({name:t,data:e});f.onsuccess=()=>i(!0),f.onerror=()=>a(f.error)})}async function Ad(t){const e=await Gl;await new Promise((r,i)=>{const l=e.transaction("files","readwrite").objectStore("files").delete(t);l.onsuccess=()=>r(!0),l.onerror=()=>i(l.error)})}async function GN(t,e){if(await HN(t,e),fi.has(t)){const r=fi.get(t);r.truncate(0),r.write(0,e)}}var zN=class extends Ul{constructor(e){super();ee(this,"serializer");this.serializer=e}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:r}=e;if(r.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:i,...a}=r,l=this.serializer(i);return i===l?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:l}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},Df=t=>{if(Pf(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},Rd=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,YN=t=>{if(Pf(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(Rd.test(t))return new Date(t);try{return JSON.parse(t,(e,r)=>typeof r=="string"&&Rd.exec(r)?new Date(r):r)}catch{return t}}};function Pf(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var XN=class{constructor(t={}){ee(this,"transformer");ee(this,"deserializer");ee(this,"skipNodeSet");ee(this,"ctx");const{deserializer:e=YN,serializer:r=Df,skipNodeKind:i=[]}=t;this.transformer=new zN(r),this.deserializer=e,i.length&&(this.skipNodeSet=new Set(i),this.ctx=new WeakSet)}transformQuery({node:t,queryId:e}){return this.skipNodeSet?.has(t.kind)?(this.ctx?.add(e),t):this.transformer.transformNode(t)}async transformResult({result:t,queryId:e}){return this.ctx?.has(e)?t:{...t,rows:t.rows.map(r=>Object.fromEntries(Object.entries(r).map(([i,a])=>[i,this.deserializer(a)])))}}};function Dd(t){const{logger:e,merge:r,queryNode:i}=t;return a=>{const{level:l,queryDurationMillis:f,query:{parameters:y,sql:N,query:d}}=a,x=l==="error"?a.error:void 0;let _=N.replace(/\r?\n/g," ").replace(/\s+/g," ");r&&y.forEach(F=>{_=_.replace("?",typeof F=="string"?F:JSON.stringify(F))});const R={sql:_,params:y,duration:f,error:x};i&&(R.queryNode=d),e(R)}}async function ZN(t){const{rows:e}=await t.executeQuery(qr.raw("PRAGMA integrity_check"));if(!e.length)throw new Error("fail to check integrity");return e[0].integrity_check==="ok"}async function Pd(t,e){if(e)return await t.executeQuery(qr.raw(`PRAGMA user_version = ${e}`)),e;const{rows:r}=await t.executeQuery(qr.raw("PRAGMA user_version"));if(!r.length)throw new Error("fail to get DBVersion");return r[0].user_version}function eg(t){return`__pre_${t}`}function tg(t,e=r=>r){return{setParam:r=>{let i;return(a,l)=>{if(!i){const{parameters:f,sql:y,query:N}=r({qb:t,param:eg}).compile();i={sql:y,query:l?.(N)||{kind:N.kind},parameters:f}}return{...i,parameters:i.parameters.map(f=>typeof f=="string"&&f.startsWith("__pre_")?e(a[f.slice(6)]):f)}}}}}async function rg(t,e){const r=e||`sp_${Date.now()%1e8}`;return await nt`savepoint ${nt.raw(r)}`.execute(t),{release:async()=>{await nt`release savepoint ${nt.raw(r)}`.execute(t)},rollback:async()=>{await nt`rollback to savepoint ${nt.raw(r)}`.execute(t)}}}async function ng(t,e,r){const{release:i,rollback:a}=await rg(t,r);try{const l=await e(t);return await i(),l}catch(l){throw await a(),l}}var ig=class extends Error{constructor(){super("db file maybe broken")}};function sg(t){return t.toOperationNode().kind==="SelectQueryNode"}var og=class{constructor(t){ee(this,"kysely");ee(this,"trxCount",0);ee(this,"trx");ee(this,"logger");ee(this,"serializer",Df);const{dialect:e,logger:r,onQuery:i,plugins:a=[],serializerPluginOptions:l}=t;this.logger=r,l?.serializer&&(this.serializer=l.serializer),a.push(new XN(l));let f;i===!0?f=Dd({logger:this.logger?.debug||console.log,merge:!0}):i&&(f=Dd(i)),this.kysely=new Qs({dialect:e,log:f,plugins:a})}async updateTableSchema(t,e){try{if(e&&!await ZN(this.kysely))return this.logger?.error("integrity check fail"),{ready:!1,error:new ig};await t(this.kysely,this.logger)}catch(r){return this.logError(r,"sync table fail"),{ready:!1,error:r}}return this.logger?.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){e&&this.logger?.error(e,t instanceof Error?t:void 0)}async transaction(t,e={}){return this.trx?(this.trxCount++,this.logger?.debug(`run in savepoint: sp_${this.trxCount}`),await ng(this.trx,t,`sp_${this.trxCount}`).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trxCount--)):await this.kysely.transaction().execute(async r=>(this.trx=r,this.logger?.debug("run in transaction"),await t(r))).then(async r=>(await e.afterCommit?.(),r)).catch(r=>this.logError(r,e.errorMsg)).finally(()=>this.trx=void 0)}async execute(t){return typeof t=="function"?await t(this.getDB()).execute():await this.getDB().executeQuery(t)}async executeTakeFirst(t){let e=t(this.getDB());return sg(e)&&(e=e.limit(1)),await e.executeTakeFirstOrThrow()}precompile(t){return this.logger?.debug?.("precompile"),tg(t(this.kysely),this.serializer)}async raw(t,e){return typeof t=="string"?await this.getDB().executeQuery(qr.raw(t,e)):await t.execute(this.getDB())}async optimize(t){await this.raw(t?"vacuum":"pragma optimize")}async destroy(){this.logger?.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},Lf="__TIME_TRIGGER__";function ag(t,e){const{create:r,update:i}=e?.timeTrigger||{},a={type:"date",defaultTo:Lf};return r===!0?t.createAt=a:r&&(t[r]=a),i===!0?t.updateAt={...a,notNull:0}:i&&(t[i]={...a,notNull:0}),{columns:t,...e}}function Mf(t){let e="text",r=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":r=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:r}}function cl(t){return Array.isArray(t)?t:[t]}function ug(t){return typeof t=="function"}async function So(t,e){await t.schema.dropTable(e).execute()}async function Ld(t,e,r){const{index:i,...a}=r;await t.transaction().execute(async l=>{const f=await dl(l,e,a);await Ff(l,e,f),await Bf(l,e,i)})}async function Bf(t,e,r){for(const i of r||[]){const a=cl(i);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function dl(t,e,{columns:r,primary:i,timeTrigger:a,unique:l},f=!1){const y=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,d=t.schema.createTable(e);f&&(d=d.temporary());for(const[x,_]of Object.entries(r)){let R="text";const{type:F,notNull:we,defaultTo:J}=_,Te=Mf(F);R=Te.dataType,d=d.addColumn(x,R,B=>Te.isIncrements?(N=!0,y&&(y.triggerKey=x),B.autoIncrement().primaryKey()):J===Lf?(y&&we===0&&(y.update=x),B.defaultTo(nt`CURRENT_TIMESTAMP`)):(we===!0&&(B=B.notNull()),J!==void 0&&(B=B.defaultTo(ug(J)?J(nt):J)),B))}if(!N&&i){const x=cl(i);d=d.addPrimaryKeyConstraint(`pk#${x.join("#")}`,x)}for(const x of l||[]){const _=cl(x);d=d.addUniqueConstraint(`un#${_.join("#")}`,_)}return await d.ifNotExists().execute(),y}async function Ff(t,e,r){if(!r||!r.update)return;const{triggerKey:i,update:a}=r,l=`tgr_${e}_${a}`;await nt`create trigger if not exists ${nt.ref(l)}
after update
on ${nt.table(e)}
begin
  update ${nt.table(e)}
  set ${nt.ref(a)} = CURRENT_TIMESTAMP
  where ${nt.ref(i)} = NEW.${nt.ref(i)};
end`.execute(t)}function lg(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,r=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,i,a]=t.replace(/\r?\n/g,"").match(e),l={columns:{},name:i,primary:void 0,unique:[]},f=a.matchAll(r);for(const y of f){const[,N,d,x]=y;if(N.startsWith("pk#")){const[,..._]=N.split("#");l.primary=_}else if(N.startsWith("un#")){const[,..._]=N.split("#");l.unique.push(_)}else l.columns[N]={type:d,notNull:!!x}}return l}async function cg(t,e=[]){const r=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",Ef).where("name","!=",Tf).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(l=>l.and(e.map(f=>l("name","not like",`${f}%`))))).select(["name","sql","type"]).$castTo().execute(),i={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:l,type:f}of r)l&&(f==="table"?i.existTables[a]=lg(l):f==="index"?i.indexList.push(a):i.triggerList.push(a));return i}async function dg(t,e,r={},i){const{reserveOldData:a,truncateIfExists:l=[],log:f,version:{current:y,skipSyncWhenSame:N}={},excludeTablePrefix:d,afterUpdate:x}=r;if(y){if(N&&y===await Pd(t))return;await Pd(t,y)}const _=B=>f&&i?.debug(B),{existTables:R,indexList:F,triggerList:we}=await cg(t,d);_("====== update tables start ======");const J=new Set(Array.isArray(l)?l:l?Object.keys(R):[]);for(const B of F)await t.schema.dropIndex(B).ifExists().execute();for(const B of we)await nt`drop trigger if exists ${nt.ref(B)}`.execute(t);for(const[B,$e]of Object.entries(R))B in e?(_(`diff table: ${B}`),await Te(B,$e,e[B])):(_(`remove table: ${B}`),await So(t,B));for(const[B,$e]of Object.entries(e))B in R||(_(`create table: ${B}`),await Ld(t,B,$e));_("======= after update hook ======="),await x?.(t),_("======= update tables end =======");async function Te(B,$e,de){if(J.has(B)){await t.transaction().execute(async Oe=>{await So(Oe,B),await Ld(Oe,B,de),_("clear and sync structure")});return}const{index:Be,...lt}=de,z=hg($e.columns,de.columns);if(z.length===Object.keys($e.columns).length){_("same table structure, skip");return}_("different table structure, update"),await t.transaction().execute(async Oe=>{const Ge=`_temp_${B}`;await dl(Oe,Ge,$e,!0),await Oe.insertInto(Ge).expression(ve=>ve.selectFrom(B).selectAll()).execute(),await So(Oe,B);const jr=await dl(Oe,B,lt);z.length&&await Oe.insertInto(B).columns(z).expression(ve=>ve.selectFrom(Ge).select(z)).execute(),await Bf(Oe,B,Be),await Ff(Oe,B,jr),!a&&await So(Oe,Ge)}).then(()=>_(`restore columns: ${z}`)).catch(Oe=>i?.error(`fail to sync ${B}`,Oe))}}function hg(t,e){const r=[];for(const[i,a]of Object.entries(e))if(i in t){const{type:l,notNull:f=!1}=t[i];Mf(a.type).dataType===l&&(a.notNull||!1)===f&&r.push(i)}return r}function fg(t,e={}){const{log:r}=e;return async(i,a)=>{await dg(i,t,e,r?a:void 0)}}const pg={test:ag({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function Uf(t){const e=new og({dialect:t}),r=await e.updateTableSchema(fg(pg));if(!r.ready)throw r.error;console.log(await e.raw("PRAGMA table_info('test')"));for(let i=0;i<10;i++)await e.transaction(async()=>{await e.transaction(async()=>{if(i>8)throw console.log("test rollback"),new Error("test rollback");await e.execute(a=>a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}))})});return e.execute(i=>i.selectFrom("test").selectAll()).then(async i=>(await e.destroy(),console.log(i),i))}const mg=new RN({async database(){const t=await FN({locateFile:()=>UN});return new t.Database(await KN("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),GN("sqljs",t)},isThrottle:!0}});function yg(){const t=dm();function e(){Uf(mg).then(r=>{t.value=r})}return{result:t,run:e}}function wg(t){return new Worker(""+new URL("sqljsWorker-0tiftVYk.js",import.meta.url).href,{type:"module",name:t?.name})}function Ng(t){return new Worker(""+new URL("officialWasmWorker-X3o_eXZG.js",import.meta.url).href,{type:"module",name:t?.name})}var gg=(t=new Map)=>({on(e,r){t.get(e)?.push(r)||t.set(e,[r])},off(e,r){let i;e?r?(i=t.get(e))&&i.splice(i.indexOf(r)>>>0,1):t.set(e,[]):t.clear()},emit(e,...r){t.get(e)?.slice().map(i=>i(...r))},once(e,r){let i=(...a)=>{r(...a),this.off(e,i)};this.on(e,i)}});function bg(){return"locks"in navigator}async function $f(){const t=async()=>{const e=await navigator?.storage.getDirectory?.();if(!e)return!1;try{return(await(await e.getFileHandle("_CHECK",{create:!0})).createSyncAccessHandle()).close(),!0}catch{return!1}finally{await e.removeEntry("_CHECK")}};if("importScripts"in globalThis)return t();try{if(typeof Worker>"u")return!1;const e=URL.createObjectURL(new Blob([`(${t})().then(postMessage)`],{type:"text/javascript"})),r=new Worker(e),i=await new Promise((a,l)=>{r.onmessage=({data:f})=>{a(f)},r.onerror=f=>{f.preventDefault(),l(!1)}});return r.terminate(),URL.revokeObjectURL(e),i}catch{return!1}}function Qf(){let t=!1;try{new Worker("data:,",{get type(){t=!0}}).terminate()}finally{return t}}function Md(t,e){return typeof t=="function"?t(e):t}function vg(t){return t?new Worker(new URL(""+new URL("worker-Cs2xuRzF.js",import.meta.url).href,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-z_uG8b6d.js",import.meta.url).href,import.meta.url))}function xg(t){return t?new URL(""+new URL("wa-sqlite-async-5YBo1gYB.wasm",import.meta.url).href,import.meta.url).href:new URL(""+new URL("wa-sqlite-1p_8Y4mq.wasm",import.meta.url).href,import.meta.url).href}var Og=class{constructor(t){ee(this,"config");ee(this,"worker");ee(this,"connection");ee(this,"connectionMutex",new Cg);ee(this,"mitt");this.config=t}async init(){try{!await navigator.storage.persisted()&&await navigator.storage.persist()}catch{}const t=this.config.preferOPFS??!0?await $f():!1;this.mitt=gg(),this.worker=Md(this.config.worker||vg,t||Qf()),this.worker.onmessage=({data:{type:e,...r}})=>{this.mitt?.emit(e,r)},this.worker.postMessage({type:"init",fileName:this.config.fileName,url:Md(this.config.url||xg,!t),useOPFS:t}),await new Promise((e,r)=>{this.mitt?.once("init",({err:i})=>{i?r(i):e()})}),this.connection=new qg(this.worker,this.mitt),await this.config.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(qr.raw("begin"))}async commitTransaction(t){await t.executeQuery(qr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(qr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{this.mitt?.once("close",({err:r})=>{r?e(r):(this.worker?.terminate(),this.mitt?.off(),this.mitt=void 0,t())})})}},Cg=class{constructor(){ee(this,"promise");ee(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t?.()}},qg=class{constructor(t,e){ee(this,"worker");ee(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("SQLite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:r,query:i}=t,a=ce.is(i);return this.worker.postMessage({type:"run",isSelect:a,sql:r,parameters:e}),new Promise((l,f)=>{!this.mitt&&f("kysely instance has been destroyed"),this.mitt.once("run",({data:y,err:N})=>{!N&&y?l(y):f(N)})})}},no,Fd,_g=(Fd=class{constructor(t){q(this,no,void 0);S(this,no,t)}createDriver(){return new Og(s(this,no))}createQueryCompiler(){return new If}createAdapter(){return new Af}createIntrospector(t){return new kf(t)}},no=new WeakMap,Fd);const Wg=new _g({fileName:"wa-sqlite-worker-test"});async function Ig(){console.log("start wa-sqlite-worker test"),Uf(Wg).then(async t=>{t?.forEach(a=>console.log("[wa-sqlite-worker]",a));const e=Qf(),r=bg(),i=await $f();console.log("support module worker:",e),console.log("support IDBBatchAtomicVFS:",r),console.log("support AccessHandlePoolVFS:",i)})}const Eg=rt("h1",null,[Ps(" test "),rt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ps(" WASM dialect ")],-1),Tg=rt("br",null,null,-1),kg=rt("h3",null,"see worker result in console",-1),Sg=rt("h3",null,[Ps(" you can explore "),rt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ps(" file using "),rt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),Ag=rt("br",null,null,-1),Rg={class:"buttons"},Dg=rt("br",null,null,-1),Pg=rt("div",null," result run in main thread: ",-1),Lg=Am({__name:"App",setup(t){const e=new wg,{result:r,run:i}=yg(),a=new Ng;function l(){i()}function f(){e.postMessage("")}function y(){a.postMessage("")}function N(){Ig()}async function d(){try{(await window.indexedDB.databases()).forEach(R=>window.indexedDB.deleteDatabase(R.name))}catch{}}async function x(){console.clear(),await Ad("sqljs"),await Ad("sqljsWorker"),await d();const _=await navigator.storage?.getDirectory();try{await _.removeEntry("test.db")}catch{}try{await _.removeEntry("test.db-journal")}catch{}try{await _.removeEntry("wa-sqlite-worker-test",{recursive:!0})}catch{}}return(_,R)=>(dy(),py(gr,null,[Eg,Tg,kg,Sg,Ag,rt("div",Rg,[rt("button",{onClick:R[0]||(R[0]=F=>l())}," test sqljs in main thread "),rt("button",{onClick:R[1]||(R[1]=F=>f())}," test sqljs in Worker "),rt("button",{onClick:R[2]||(R[2]=F=>y())}," test officialWasm in Worker "),rt("button",{onClick:R[3]||(R[3]=F=>N())}," test wa-sqlite in Worker (Better Compability) "),rt("button",{onClick:R[4]||(R[4]=F=>x())}," clear ")]),Dg,Pg,rt("pre",null,""+Fp(dh(r))+`
  `,1)],64))}});Xy(Lg).mount("#root");
