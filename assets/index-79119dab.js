var Im=Object.defineProperty;var Tm=(t,e,n)=>e in t?Im(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>(Tm(t,typeof e!="symbol"?e+"":e,n),n),vl=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var i=(t,e,n)=>(vl(t,e,"read from private field"),n?n.call(t):e.get(t)),W=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},z=(t,e,n,r)=>(vl(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Ne=(t,e,n)=>(vl(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function wf(t,e){const n=Object.create(null),r=t.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return e?a=>!!n[a.toLowerCase()]:a=>!!n[a]}const st={},zs=[],Xn=()=>{},Sm=()=>!1,km=/^on[^a-z]/,nl=t=>km.test(t),gf=t=>t.startsWith("onUpdate:"),Ct=Object.assign,bf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Am=Object.prototype.hasOwnProperty,Be=(t,e)=>Am.call(t,e),Ce=Array.isArray,Vs=t=>rl(t)==="[object Map]",bd=t=>rl(t)==="[object Set]",Te=t=>typeof t=="function",It=t=>typeof t=="string",Nf=t=>typeof t=="symbol",lt=t=>t!==null&&typeof t=="object",Nd=t=>lt(t)&&Te(t.then)&&Te(t.catch),vd=Object.prototype.toString,rl=t=>vd.call(t),Wm=t=>rl(t).slice(8,-1),_d=t=>rl(t)==="[object Object]",vf=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Du=wf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),il=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Rm=/-(\w)/g,No=il(t=>t.replace(Rm,(e,n)=>n?n.toUpperCase():"")),Dm=/\B([A-Z])/g,Io=il(t=>t.replace(Dm,"-$1").toLowerCase()),xd=il(t=>t.charAt(0).toUpperCase()+t.slice(1)),_l=il(t=>t?`on${xd(t)}`:""),va=(t,e)=>!Object.is(t,e),xl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Hu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Pm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let oh;const Rl=()=>oh||(oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _f(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],a=It(r)?Fm(r):_f(r);if(a)for(const c in a)e[c]=a[c]}return e}else{if(It(t))return t;if(lt(t))return t}}const Lm=/;(?![^(]*\))/g,Mm=/:([^]+)/,Bm=/\/\*[^]*?\*\//g;function Fm(t){const e={};return t.replace(Bm,"").split(Lm).forEach(n=>{if(n){const r=n.split(Mm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xf(t){let e="";if(It(t))e=t;else if(Ce(t))for(let n=0;n<t.length;n++){const r=xf(t[n]);r&&(e+=r+" ")}else if(lt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Um="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$m=wf(Um);function Ed(t){return!!t||t===""}const Qm=t=>It(t)?t:t==null?"":Ce(t)||lt(t)&&(t.toString===vd||!Te(t.toString))?JSON.stringify(t,Od,2):String(t),Od=(t,e)=>e&&e.__v_isRef?Od(t,e.value):Vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,a])=>(n[`${r} =>`]=a,n),{})}:bd(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!Ce(e)&&!_d(e)?String(e):e;let $n;class jm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$n,!e&&$n&&(this.index=($n.scopes||($n.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=$n;try{return $n=this,e()}finally{$n=n}}}on(){$n=this}off(){$n=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function zm(t,e=$n){e&&e.active&&e.effects.push(t)}function Vm(){return $n}const Ef=t=>{const e=new Set(t);return e.w=0,e.n=0,e},qd=t=>(t.w&fi)>0,Cd=t=>(t.n&fi)>0,Hm=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=fi},Km=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const a=e[r];qd(a)&&!Cd(a)?a.delete(t):e[n++]=a,a.w&=~fi,a.n&=~fi}e.length=n}},Dl=new WeakMap;let oa=0,fi=1;const Pl=30;let Jn;const as=Symbol(""),Ll=Symbol("");class Of{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,zm(this,r)}run(){if(!this.active)return this.fn();let e=Jn,n=ui;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Jn,Jn=this,ui=!0,fi=1<<++oa,oa<=Pl?Hm(this):ah(this),this.fn()}finally{oa<=Pl&&Km(this),fi=1<<--oa,Jn=this.parent,ui=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Jn===this?this.deferStop=!0:this.active&&(ah(this),this.onStop&&this.onStop(),this.active=!1)}}function ah(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ui=!0;const Id=[];function To(){Id.push(ui),ui=!1}function So(){const t=Id.pop();ui=t===void 0?!0:t}function dn(t,e,n){if(ui&&Jn){let r=Dl.get(t);r||Dl.set(t,r=new Map);let a=r.get(n);a||r.set(n,a=Ef()),Td(a)}}function Td(t,e){let n=!1;oa<=Pl?Cd(t)||(t.n|=fi,n=!qd(t)):n=!t.has(Jn),n&&(t.add(Jn),Jn.deps.push(t))}function kr(t,e,n,r,a,c){const m=Dl.get(t);if(!m)return;let g=[];if(e==="clear")g=[...m.values()];else if(n==="length"&&Ce(t)){const N=Number(r);m.forEach((d,T)=>{(T==="length"||T>=N)&&g.push(d)})}else switch(n!==void 0&&g.push(m.get(n)),e){case"add":Ce(t)?vf(n)&&g.push(m.get("length")):(g.push(m.get(as)),Vs(t)&&g.push(m.get(Ll)));break;case"delete":Ce(t)||(g.push(m.get(as)),Vs(t)&&g.push(m.get(Ll)));break;case"set":Vs(t)&&g.push(m.get(as));break}if(g.length===1)g[0]&&Ml(g[0]);else{const N=[];for(const d of g)d&&N.push(...d);Ml(Ef(N))}}function Ml(t,e){const n=Ce(t)?t:[...t];for(const r of n)r.computed&&uh(r);for(const r of n)r.computed||uh(r)}function uh(t,e){(t!==Jn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Jm=wf("__proto__,__v_isRef,__isVue"),Sd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nf)),Gm=qf(),Ym=qf(!1,!0),Xm=qf(!0),ch=Zm();function Zm(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ue(this);for(let c=0,m=this.length;c<m;c++)dn(r,"get",c+"");const a=r[e](...n);return a===-1||a===!1?r[e](...n.map(Ue)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){To();const r=Ue(this)[e].apply(this,n);return So(),r}}),t}function ey(t){const e=Ue(this);return dn(e,"has",t),e.hasOwnProperty(t)}function qf(t=!1,e=!1){return function(r,a,c){if(a==="__v_isReactive")return!t;if(a==="__v_isReadonly")return t;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&c===(t?e?yy:Dd:e?Rd:Wd).get(r))return r;const m=Ce(r);if(!t){if(m&&Be(ch,a))return Reflect.get(ch,a,c);if(a==="hasOwnProperty")return ey}const g=Reflect.get(r,a,c);return(Nf(a)?Sd.has(a):Jm(a))||(t||dn(r,"get",a),e)?g:Vt(g)?m&&vf(a)?g:g.value:lt(g)?t?Pd(g):Tf(g):g}}const ty=kd(),ny=kd(!0);function kd(t=!1){return function(n,r,a,c){let m=n[r];if(vo(m)&&Vt(m)&&!Vt(a))return!1;if(!t&&(!Ku(a)&&!vo(a)&&(m=Ue(m),a=Ue(a)),!Ce(n)&&Vt(m)&&!Vt(a)))return m.value=a,!0;const g=Ce(n)&&vf(r)?Number(r)<n.length:Be(n,r),N=Reflect.set(n,r,a,c);return n===Ue(c)&&(g?va(a,m)&&kr(n,"set",r,a):kr(n,"add",r,a)),N}}function ry(t,e){const n=Be(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&kr(t,"delete",e,void 0),r}function iy(t,e){const n=Reflect.has(t,e);return(!Nf(e)||!Sd.has(e))&&dn(t,"has",e),n}function sy(t){return dn(t,"iterate",Ce(t)?"length":as),Reflect.ownKeys(t)}const Ad={get:Gm,set:ty,deleteProperty:ry,has:iy,ownKeys:sy},oy={get:Xm,set(t,e){return!0},deleteProperty(t,e){return!0}},ay=Ct({},Ad,{get:Ym,set:ny}),Cf=t=>t,sl=t=>Reflect.getPrototypeOf(t);function Ou(t,e,n=!1,r=!1){t=t.__v_raw;const a=Ue(t),c=Ue(e);n||(e!==c&&dn(a,"get",e),dn(a,"get",c));const{has:m}=sl(a),g=r?Cf:n?kf:_a;if(m.call(a,e))return g(t.get(e));if(m.call(a,c))return g(t.get(c));t!==a&&t.get(e)}function qu(t,e=!1){const n=this.__v_raw,r=Ue(n),a=Ue(t);return e||(t!==a&&dn(r,"has",t),dn(r,"has",a)),t===a?n.has(t):n.has(t)||n.has(a)}function Cu(t,e=!1){return t=t.__v_raw,!e&&dn(Ue(t),"iterate",as),Reflect.get(t,"size",t)}function lh(t){t=Ue(t);const e=Ue(this);return sl(e).has.call(e,t)||(e.add(t),kr(e,"add",t,t)),this}function fh(t,e){e=Ue(e);const n=Ue(this),{has:r,get:a}=sl(n);let c=r.call(n,t);c||(t=Ue(t),c=r.call(n,t));const m=a.call(n,t);return n.set(t,e),c?va(e,m)&&kr(n,"set",t,e):kr(n,"add",t,e),this}function hh(t){const e=Ue(this),{has:n,get:r}=sl(e);let a=n.call(e,t);a||(t=Ue(t),a=n.call(e,t)),r&&r.call(e,t);const c=e.delete(t);return a&&kr(e,"delete",t,void 0),c}function dh(){const t=Ue(this),e=t.size!==0,n=t.clear();return e&&kr(t,"clear",void 0,void 0),n}function Iu(t,e){return function(r,a){const c=this,m=c.__v_raw,g=Ue(m),N=e?Cf:t?kf:_a;return!t&&dn(g,"iterate",as),m.forEach((d,T)=>r.call(a,N(d),N(T),c))}}function Tu(t,e,n){return function(...r){const a=this.__v_raw,c=Ue(a),m=Vs(c),g=t==="entries"||t===Symbol.iterator&&m,N=t==="keys"&&m,d=a[t](...r),T=n?Cf:e?kf:_a;return!e&&dn(c,"iterate",N?Ll:as),{next(){const{value:P,done:G}=d.next();return G?{value:P,done:G}:{value:g?[T(P[0]),T(P[1])]:T(P),done:G}},[Symbol.iterator](){return this}}}}function jr(t){return function(...e){return t==="delete"?!1:this}}function uy(){const t={get(c){return Ou(this,c)},get size(){return Cu(this)},has:qu,add:lh,set:fh,delete:hh,clear:dh,forEach:Iu(!1,!1)},e={get(c){return Ou(this,c,!1,!0)},get size(){return Cu(this)},has:qu,add:lh,set:fh,delete:hh,clear:dh,forEach:Iu(!1,!0)},n={get(c){return Ou(this,c,!0)},get size(){return Cu(this,!0)},has(c){return qu.call(this,c,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!1)},r={get(c){return Ou(this,c,!0,!0)},get size(){return Cu(this,!0)},has(c){return qu.call(this,c,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{t[c]=Tu(c,!1,!1),n[c]=Tu(c,!0,!1),e[c]=Tu(c,!1,!0),r[c]=Tu(c,!0,!0)}),[t,n,e,r]}const[cy,ly,fy,hy]=uy();function If(t,e){const n=e?t?hy:fy:t?ly:cy;return(r,a,c)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?r:Reflect.get(Be(n,a)&&a in r?n:r,a,c)}const dy={get:If(!1,!1)},py={get:If(!1,!0)},my={get:If(!0,!1)},Wd=new WeakMap,Rd=new WeakMap,Dd=new WeakMap,yy=new WeakMap;function wy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gy(t){return t.__v_skip||!Object.isExtensible(t)?0:wy(Wm(t))}function Tf(t){return vo(t)?t:Sf(t,!1,Ad,dy,Wd)}function by(t){return Sf(t,!1,ay,py,Rd)}function Pd(t){return Sf(t,!0,oy,my,Dd)}function Sf(t,e,n,r,a){if(!lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const c=a.get(t);if(c)return c;const m=gy(t);if(m===0)return t;const g=new Proxy(t,m===2?r:n);return a.set(t,g),g}function Hs(t){return vo(t)?Hs(t.__v_raw):!!(t&&t.__v_isReactive)}function vo(t){return!!(t&&t.__v_isReadonly)}function Ku(t){return!!(t&&t.__v_isShallow)}function Ld(t){return Hs(t)||vo(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Md(t){return Hu(t,"__v_skip",!0),t}const _a=t=>lt(t)?Tf(t):t,kf=t=>lt(t)?Pd(t):t;function Bd(t){ui&&Jn&&(t=Ue(t),Td(t.dep||(t.dep=Ef())))}function Fd(t,e){t=Ue(t);const n=t.dep;n&&Ml(n)}function Vt(t){return!!(t&&t.__v_isRef===!0)}function Ny(t){return vy(t,!1)}function vy(t,e){return Vt(t)?t:new _y(t,e)}class _y{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ue(e),this._value=n?e:_a(e)}get value(){return Bd(this),this._value}set value(e){const n=this.__v_isShallow||Ku(e)||vo(e);e=n?e:Ue(e),va(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:_a(e),Fd(this))}}function Ud(t){return Vt(t)?t.value:t}const xy={get:(t,e,n)=>Ud(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const a=t[e];return Vt(a)&&!Vt(n)?(a.value=n,!0):Reflect.set(t,e,n,r)}};function $d(t){return Hs(t)?t:new Proxy(t,xy)}class Ey{constructor(e,n,r,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Of(e,()=>{this._dirty||(this._dirty=!0,Fd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const e=Ue(this);return Bd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Oy(t,e,n=!1){let r,a;const c=Te(t);return c?(r=t,a=Xn):(r=t.get,a=t.set),new Ey(r,a,c||!a,n)}function ci(t,e,n,r){let a;try{a=r?t(...r):t()}catch(c){ol(c,e,n)}return a}function Zn(t,e,n,r){if(Te(t)){const c=ci(t,e,n,r);return c&&Nd(c)&&c.catch(m=>{ol(m,e,n)}),c}const a=[];for(let c=0;c<t.length;c++)a.push(Zn(t[c],e,n,r));return a}function ol(t,e,n,r=!0){const a=e?e.vnode:null;if(e){let c=e.parent;const m=e.proxy,g=n;for(;c;){const d=c.ec;if(d){for(let T=0;T<d.length;T++)if(d[T](t,m,g)===!1)return}c=c.parent}const N=e.appContext.config.errorHandler;if(N){ci(N,null,10,[t,m,g]);return}}qy(t,n,a,r)}function qy(t,e,n,r=!0){console.error(t)}let xa=!1,Bl=!1;const jt=[];let hr=0;const Ks=[];let xr=null,Bi=0;const Qd=Promise.resolve();let Af=null;function Cy(t){const e=Af||Qd;return t?e.then(this?t.bind(this):t):e}function Iy(t){let e=hr+1,n=jt.length;for(;e<n;){const r=e+n>>>1;Ea(jt[r])<t?e=r+1:n=r}return e}function Wf(t){(!jt.length||!jt.includes(t,xa&&t.allowRecurse?hr+1:hr))&&(t.id==null?jt.push(t):jt.splice(Iy(t.id),0,t),jd())}function jd(){!xa&&!Bl&&(Bl=!0,Af=Qd.then(Vd))}function Ty(t){const e=jt.indexOf(t);e>hr&&jt.splice(e,1)}function Sy(t){Ce(t)?Ks.push(...t):(!xr||!xr.includes(t,t.allowRecurse?Bi+1:Bi))&&Ks.push(t),jd()}function ph(t,e=xa?hr+1:0){for(;e<jt.length;e++){const n=jt[e];n&&n.pre&&(jt.splice(e,1),e--,n())}}function zd(t){if(Ks.length){const e=[...new Set(Ks)];if(Ks.length=0,xr){xr.push(...e);return}for(xr=e,xr.sort((n,r)=>Ea(n)-Ea(r)),Bi=0;Bi<xr.length;Bi++)xr[Bi]();xr=null,Bi=0}}const Ea=t=>t.id==null?1/0:t.id,ky=(t,e)=>{const n=Ea(t)-Ea(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Vd(t){Bl=!1,xa=!0,jt.sort(ky);const e=Xn;try{for(hr=0;hr<jt.length;hr++){const n=jt[hr];n&&n.active!==!1&&ci(n,null,14)}}finally{hr=0,jt.length=0,zd(),xa=!1,Af=null,(jt.length||Ks.length)&&Vd()}}function Ay(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||st;let a=n;const c=e.startsWith("update:"),m=c&&e.slice(7);if(m&&m in r){const T=`${m==="modelValue"?"model":m}Modifiers`,{number:P,trim:G}=r[T]||st;G&&(a=n.map(ne=>It(ne)?ne.trim():ne)),P&&(a=n.map(Pm))}let g,N=r[g=_l(e)]||r[g=_l(No(e))];!N&&c&&(N=r[g=_l(Io(e))]),N&&Zn(N,t,6,a);const d=r[g+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[g])return;t.emitted[g]=!0,Zn(d,t,6,a)}}function Hd(t,e,n=!1){const r=e.emitsCache,a=r.get(t);if(a!==void 0)return a;const c=t.emits;let m={},g=!1;if(!Te(t)){const N=d=>{const T=Hd(d,e,!0);T&&(g=!0,Ct(m,T))};!n&&e.mixins.length&&e.mixins.forEach(N),t.extends&&N(t.extends),t.mixins&&t.mixins.forEach(N)}return!c&&!g?(lt(t)&&r.set(t,null),null):(Ce(c)?c.forEach(N=>m[N]=null):Ct(m,c),lt(t)&&r.set(t,m),m)}function al(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(t,e[0].toLowerCase()+e.slice(1))||Be(t,Io(e))||Be(t,e))}let pr=null,Kd=null;function Ju(t){const e=pr;return pr=t,Kd=t&&t.type.__scopeId||null,e}function Wy(t,e=pr,n){if(!e||t._n)return t;const r=(...a)=>{r._d&&Eh(-1);const c=Ju(e);let m;try{m=t(...a)}finally{Ju(c),r._d&&Eh(1)}return m};return r._n=!0,r._c=!0,r._d=!0,r}function El(t){const{type:e,vnode:n,proxy:r,withProxy:a,props:c,propsOptions:[m],slots:g,attrs:N,emit:d,render:T,renderCache:P,data:G,setupState:ne,ctx:X,inheritAttrs:b}=t;let O,v;const C=Ju(t);try{if(n.shapeFlag&4){const F=a||r;O=lr(T.call(F,F,P,c,ne,G,X)),v=N}else{const F=e;O=lr(F.length>1?F(c,{attrs:N,slots:g,emit:d}):F(c,null)),v=e.props?N:Ry(N)}}catch(F){la.length=0,ol(F,t,1),O=us(Oa)}let R=O;if(v&&b!==!1){const F=Object.keys(v),{shapeFlag:_e}=R;F.length&&_e&7&&(m&&F.some(gf)&&(v=Dy(v,m)),R=_o(R,v))}return n.dirs&&(R=_o(R),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&(R.transition=n.transition),O=R,Ju(C),O}const Ry=t=>{let e;for(const n in t)(n==="class"||n==="style"||nl(n))&&((e||(e={}))[n]=t[n]);return e},Dy=(t,e)=>{const n={};for(const r in t)(!gf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Py(t,e,n){const{props:r,children:a,component:c}=t,{props:m,children:g,patchFlag:N}=e,d=c.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&N>=0){if(N&1024)return!0;if(N&16)return r?mh(r,m,d):!!m;if(N&8){const T=e.dynamicProps;for(let P=0;P<T.length;P++){const G=T[P];if(m[G]!==r[G]&&!al(d,G))return!0}}}else return(a||g)&&(!g||!g.$stable)?!0:r===m?!1:r?m?mh(r,m,d):!0:!!m;return!1}function mh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let a=0;a<r.length;a++){const c=r[a];if(e[c]!==t[c]&&!al(n,c))return!0}return!1}function Ly({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const My=t=>t.__isSuspense;function By(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Sy(t)}const Su={};function Ol(t,e,n){return Jd(t,e,n)}function Jd(t,e,{immediate:n,deep:r,flush:a,onTrack:c,onTrigger:m}=st){var g;const N=Vm()===((g=zt)==null?void 0:g.scope)?zt:null;let d,T=!1,P=!1;if(Vt(t)?(d=()=>t.value,T=Ku(t)):Hs(t)?(d=()=>t,r=!0):Ce(t)?(P=!0,T=t.some(F=>Hs(F)||Ku(F)),d=()=>t.map(F=>{if(Vt(F))return F.value;if(Hs(F))return Ms(F);if(Te(F))return ci(F,N,2)})):Te(t)?e?d=()=>ci(t,N,2):d=()=>{if(!(N&&N.isUnmounted))return G&&G(),Zn(t,N,3,[ne])}:d=Xn,e&&r){const F=d;d=()=>Ms(F())}let G,ne=F=>{G=C.onStop=()=>{ci(F,N,4)}},X;if(Ia)if(ne=Xn,e?n&&Zn(e,N,3,[d(),P?[]:void 0,ne]):d(),a==="sync"){const F=Lw();X=F.__watcherHandles||(F.__watcherHandles=[])}else return Xn;let b=P?new Array(t.length).fill(Su):Su;const O=()=>{if(C.active)if(e){const F=C.run();(r||T||(P?F.some((_e,ae)=>va(_e,b[ae])):va(F,b)))&&(G&&G(),Zn(e,N,3,[F,b===Su?void 0:P&&b[0]===Su?[]:b,ne]),b=F)}else C.run()};O.allowRecurse=!!e;let v;a==="sync"?v=O:a==="post"?v=()=>un(O,N&&N.suspense):(O.pre=!0,N&&(O.id=N.uid),v=()=>Wf(O));const C=new Of(d,v);e?n?O():b=C.run():a==="post"?un(C.run.bind(C),N&&N.suspense):C.run();const R=()=>{C.stop(),N&&N.scope&&bf(N.scope.effects,C)};return X&&X.push(R),R}function Fy(t,e,n){const r=this.proxy,a=It(t)?t.includes(".")?Gd(r,t):()=>r[t]:t.bind(r,r);let c;Te(e)?c=e:(c=e.handler,n=e);const m=zt;xo(this);const g=Jd(a,c.bind(r),n);return m?xo(m):cs(),g}function Gd(t,e){const n=e.split(".");return()=>{let r=t;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function Ms(t,e){if(!lt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Vt(t))Ms(t.value,e);else if(Ce(t))for(let n=0;n<t.length;n++)Ms(t[n],e);else if(bd(t)||Vs(t))t.forEach(n=>{Ms(n,e)});else if(_d(t))for(const n in t)Ms(t[n],e);return t}function Pi(t,e,n,r){const a=t.dirs,c=e&&e.dirs;for(let m=0;m<a.length;m++){const g=a[m];c&&(g.oldValue=c[m].value);let N=g.dir[r];N&&(To(),Zn(N,n,8,[t.el,g,t,e]),So())}}function Uy(t,e){return Te(t)?(()=>Ct({name:t.name},e,{setup:t}))():t}const Pu=t=>!!t.type.__asyncLoader,Yd=t=>t.type.__isKeepAlive;function $y(t,e){Xd(t,"a",e)}function Qy(t,e){Xd(t,"da",e)}function Xd(t,e,n=zt){const r=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(ul(e,r,n),n){let a=n.parent;for(;a&&a.parent;)Yd(a.parent.vnode)&&jy(r,e,n,a),a=a.parent}}function jy(t,e,n,r){const a=ul(e,t,r,!0);Zd(()=>{bf(r[e],a)},n)}function ul(t,e,n=zt,r=!1){if(n){const a=n[t]||(n[t]=[]),c=e.__weh||(e.__weh=(...m)=>{if(n.isUnmounted)return;To(),xo(n);const g=Zn(e,n,t,m);return cs(),So(),g});return r?a.unshift(c):a.push(c),c}}const Rr=t=>(e,n=zt)=>(!Ia||t==="sp")&&ul(t,(...r)=>e(...r),n),zy=Rr("bm"),Vy=Rr("m"),Hy=Rr("bu"),Ky=Rr("u"),Jy=Rr("bum"),Zd=Rr("um"),Gy=Rr("sp"),Yy=Rr("rtg"),Xy=Rr("rtc");function Zy(t,e=zt){ul("ec",t,e)}const ew=Symbol.for("v-ndc"),Fl=t=>t?cp(t)?Mf(t)||t.proxy:Fl(t.parent):null,ca=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fl(t.parent),$root:t=>Fl(t.root),$emit:t=>t.emit,$options:t=>Rf(t),$forceUpdate:t=>t.f||(t.f=()=>Wf(t.update)),$nextTick:t=>t.n||(t.n=Cy.bind(t.proxy)),$watch:t=>Fy.bind(t)}),ql=(t,e)=>t!==st&&!t.__isScriptSetup&&Be(t,e),tw={get({_:t},e){const{ctx:n,setupState:r,data:a,props:c,accessCache:m,type:g,appContext:N}=t;let d;if(e[0]!=="$"){const ne=m[e];if(ne!==void 0)switch(ne){case 1:return r[e];case 2:return a[e];case 4:return n[e];case 3:return c[e]}else{if(ql(r,e))return m[e]=1,r[e];if(a!==st&&Be(a,e))return m[e]=2,a[e];if((d=t.propsOptions[0])&&Be(d,e))return m[e]=3,c[e];if(n!==st&&Be(n,e))return m[e]=4,n[e];Ul&&(m[e]=0)}}const T=ca[e];let P,G;if(T)return e==="$attrs"&&dn(t,"get",e),T(t);if((P=g.__cssModules)&&(P=P[e]))return P;if(n!==st&&Be(n,e))return m[e]=4,n[e];if(G=N.config.globalProperties,Be(G,e))return G[e]},set({_:t},e,n){const{data:r,setupState:a,ctx:c}=t;return ql(a,e)?(a[e]=n,!0):r!==st&&Be(r,e)?(r[e]=n,!0):Be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(c[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:a,propsOptions:c}},m){let g;return!!n[m]||t!==st&&Be(t,m)||ql(e,m)||(g=c[0])&&Be(g,m)||Be(r,m)||Be(ca,m)||Be(a.config.globalProperties,m)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function yh(t){return Ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ul=!0;function nw(t){const e=Rf(t),n=t.proxy,r=t.ctx;Ul=!1,e.beforeCreate&&wh(e.beforeCreate,t,"bc");const{data:a,computed:c,methods:m,watch:g,provide:N,inject:d,created:T,beforeMount:P,mounted:G,beforeUpdate:ne,updated:X,activated:b,deactivated:O,beforeDestroy:v,beforeUnmount:C,destroyed:R,unmounted:F,render:_e,renderTracked:ae,renderTriggered:ge,errorCaptured:Tt,serverPrefetch:Wn,expose:pn,inheritAttrs:Rn,components:mn,directives:et,filters:en}=e;if(d&&rw(d,r,null),m)for(const pe in m){const qe=m[pe];Te(qe)&&(r[pe]=qe.bind(n))}if(a){const pe=a.call(n,n);lt(pe)&&(t.data=Tf(pe))}if(Ul=!0,c)for(const pe in c){const qe=c[pe],rt=Te(qe)?qe.bind(n,n):Te(qe.get)?qe.get.bind(n,n):Xn,de=!Te(qe)&&Te(qe.set)?qe.set.bind(n):Xn,ke=Dw({get:rt,set:de});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>ke.value,set:St=>ke.value=St})}if(g)for(const pe in g)ep(g[pe],r,n,pe);if(N){const pe=Te(N)?N.call(n):N;Reflect.ownKeys(pe).forEach(qe=>{cw(qe,pe[qe])})}T&&wh(T,t,"c");function ft(pe,qe){Ce(qe)?qe.forEach(rt=>pe(rt.bind(n))):qe&&pe(qe.bind(n))}if(ft(zy,P),ft(Vy,G),ft(Hy,ne),ft(Ky,X),ft($y,b),ft(Qy,O),ft(Zy,Tt),ft(Xy,ae),ft(Yy,ge),ft(Jy,C),ft(Zd,F),ft(Gy,Wn),Ce(pn))if(pn.length){const pe=t.exposed||(t.exposed={});pn.forEach(qe=>{Object.defineProperty(pe,qe,{get:()=>n[qe],set:rt=>n[qe]=rt})})}else t.exposed||(t.exposed={});_e&&t.render===Xn&&(t.render=_e),Rn!=null&&(t.inheritAttrs=Rn),mn&&(t.components=mn),et&&(t.directives=et)}function rw(t,e,n=Xn){Ce(t)&&(t=$l(t));for(const r in t){const a=t[r];let c;lt(a)?"default"in a?c=Lu(a.from||r,a.default,!0):c=Lu(a.from||r):c=Lu(a),Vt(c)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:m=>c.value=m}):e[r]=c}}function wh(t,e,n){Zn(Ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ep(t,e,n,r){const a=r.includes(".")?Gd(n,r):()=>n[r];if(It(t)){const c=e[t];Te(c)&&Ol(a,c)}else if(Te(t))Ol(a,t.bind(n));else if(lt(t))if(Ce(t))t.forEach(c=>ep(c,e,n,r));else{const c=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(c)&&Ol(a,c,t)}}function Rf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:a,optionsCache:c,config:{optionMergeStrategies:m}}=t.appContext,g=c.get(e);let N;return g?N=g:!a.length&&!n&&!r?N=e:(N={},a.length&&a.forEach(d=>Gu(N,d,m,!0)),Gu(N,e,m)),lt(e)&&c.set(e,N),N}function Gu(t,e,n,r=!1){const{mixins:a,extends:c}=e;c&&Gu(t,c,n,!0),a&&a.forEach(m=>Gu(t,m,n,!0));for(const m in e)if(!(r&&m==="expose")){const g=iw[m]||n&&n[m];t[m]=g?g(t[m],e[m]):e[m]}return t}const iw={data:gh,props:bh,emits:bh,methods:aa,computed:aa,beforeCreate:Jt,created:Jt,beforeMount:Jt,mounted:Jt,beforeUpdate:Jt,updated:Jt,beforeDestroy:Jt,beforeUnmount:Jt,destroyed:Jt,unmounted:Jt,activated:Jt,deactivated:Jt,errorCaptured:Jt,serverPrefetch:Jt,components:aa,directives:aa,watch:ow,provide:gh,inject:sw};function gh(t,e){return e?t?function(){return Ct(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function sw(t,e){return aa($l(t),$l(e))}function $l(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Jt(t,e){return t?[...new Set([].concat(t,e))]:e}function aa(t,e){return t?Ct(Object.create(null),t,e):e}function bh(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:Ct(Object.create(null),yh(t),yh(e??{})):e}function ow(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const r in e)n[r]=Jt(t[r],e[r]);return n}function tp(){return{app:null,config:{isNativeTag:Sm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aw=0;function uw(t,e){return function(r,a=null){Te(r)||(r=Ct({},r)),a!=null&&!lt(a)&&(a=null);const c=tp(),m=new Set;let g=!1;const N=c.app={_uid:aw++,_component:r,_props:a,_container:null,_context:c,_instance:null,version:Mw,get config(){return c.config},set config(d){},use(d,...T){return m.has(d)||(d&&Te(d.install)?(m.add(d),d.install(N,...T)):Te(d)&&(m.add(d),d(N,...T))),N},mixin(d){return c.mixins.includes(d)||c.mixins.push(d),N},component(d,T){return T?(c.components[d]=T,N):c.components[d]},directive(d,T){return T?(c.directives[d]=T,N):c.directives[d]},mount(d,T,P){if(!g){const G=us(r,a);return G.appContext=c,T&&e?e(G,d):t(G,d,P),g=!0,N._container=d,d.__vue_app__=N,Mf(G.component)||G.component.proxy}},unmount(){g&&(t(null,N._container),delete N._container.__vue_app__)},provide(d,T){return c.provides[d]=T,N},runWithContext(d){Yu=N;try{return d()}finally{Yu=null}}};return N}}let Yu=null;function cw(t,e){if(zt){let n=zt.provides;const r=zt.parent&&zt.parent.provides;r===n&&(n=zt.provides=Object.create(r)),n[t]=e}}function Lu(t,e,n=!1){const r=zt||pr;if(r||Yu){const a=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Yu._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return n&&Te(e)?e.call(r&&r.proxy):e}}function lw(t,e,n,r=!1){const a={},c={};Hu(c,ll,1),t.propsDefaults=Object.create(null),np(t,e,a,c);for(const m in t.propsOptions[0])m in a||(a[m]=void 0);n?t.props=r?a:by(a):t.type.props?t.props=a:t.props=c,t.attrs=c}function fw(t,e,n,r){const{props:a,attrs:c,vnode:{patchFlag:m}}=t,g=Ue(a),[N]=t.propsOptions;let d=!1;if((r||m>0)&&!(m&16)){if(m&8){const T=t.vnode.dynamicProps;for(let P=0;P<T.length;P++){let G=T[P];if(al(t.emitsOptions,G))continue;const ne=e[G];if(N)if(Be(c,G))ne!==c[G]&&(c[G]=ne,d=!0);else{const X=No(G);a[X]=Ql(N,g,X,ne,t,!1)}else ne!==c[G]&&(c[G]=ne,d=!0)}}}else{np(t,e,a,c)&&(d=!0);let T;for(const P in g)(!e||!Be(e,P)&&((T=Io(P))===P||!Be(e,T)))&&(N?n&&(n[P]!==void 0||n[T]!==void 0)&&(a[P]=Ql(N,g,P,void 0,t,!0)):delete a[P]);if(c!==g)for(const P in c)(!e||!Be(e,P))&&(delete c[P],d=!0)}d&&kr(t,"set","$attrs")}function np(t,e,n,r){const[a,c]=t.propsOptions;let m=!1,g;if(e)for(let N in e){if(Du(N))continue;const d=e[N];let T;a&&Be(a,T=No(N))?!c||!c.includes(T)?n[T]=d:(g||(g={}))[T]=d:al(t.emitsOptions,N)||(!(N in r)||d!==r[N])&&(r[N]=d,m=!0)}if(c){const N=Ue(n),d=g||st;for(let T=0;T<c.length;T++){const P=c[T];n[P]=Ql(a,N,P,d[P],t,!Be(d,P))}}return m}function Ql(t,e,n,r,a,c){const m=t[n];if(m!=null){const g=Be(m,"default");if(g&&r===void 0){const N=m.default;if(m.type!==Function&&!m.skipFactory&&Te(N)){const{propsDefaults:d}=a;n in d?r=d[n]:(xo(a),r=d[n]=N.call(null,e),cs())}else r=N}m[0]&&(c&&!g?r=!1:m[1]&&(r===""||r===Io(n))&&(r=!0))}return r}function rp(t,e,n=!1){const r=e.propsCache,a=r.get(t);if(a)return a;const c=t.props,m={},g=[];let N=!1;if(!Te(t)){const T=P=>{N=!0;const[G,ne]=rp(P,e,!0);Ct(m,G),ne&&g.push(...ne)};!n&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!c&&!N)return lt(t)&&r.set(t,zs),zs;if(Ce(c))for(let T=0;T<c.length;T++){const P=No(c[T]);Nh(P)&&(m[P]=st)}else if(c)for(const T in c){const P=No(T);if(Nh(P)){const G=c[T],ne=m[P]=Ce(G)||Te(G)?{type:G}:Ct({},G);if(ne){const X=xh(Boolean,ne.type),b=xh(String,ne.type);ne[0]=X>-1,ne[1]=b<0||X<b,(X>-1||Be(ne,"default"))&&g.push(P)}}}const d=[m,g];return lt(t)&&r.set(t,d),d}function Nh(t){return t[0]!=="$"}function vh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function _h(t,e){return vh(t)===vh(e)}function xh(t,e){return Ce(e)?e.findIndex(n=>_h(n,t)):Te(e)&&_h(e,t)?0:-1}const ip=t=>t[0]==="_"||t==="$stable",Df=t=>Ce(t)?t.map(lr):[lr(t)],hw=(t,e,n)=>{if(e._n)return e;const r=Wy((...a)=>Df(e(...a)),n);return r._c=!1,r},sp=(t,e,n)=>{const r=t._ctx;for(const a in t){if(ip(a))continue;const c=t[a];if(Te(c))e[a]=hw(a,c,r);else if(c!=null){const m=Df(c);e[a]=()=>m}}},op=(t,e)=>{const n=Df(e);t.slots.default=()=>n},dw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ue(e),Hu(e,"_",n)):sp(e,t.slots={})}else t.slots={},e&&op(t,e);Hu(t.slots,ll,1)},pw=(t,e,n)=>{const{vnode:r,slots:a}=t;let c=!0,m=st;if(r.shapeFlag&32){const g=e._;g?n&&g===1?c=!1:(Ct(a,e),!n&&g===1&&delete a._):(c=!e.$stable,sp(e,a)),m=e}else e&&(op(t,e),m={default:1});if(c)for(const g in a)!ip(g)&&!(g in m)&&delete a[g]};function jl(t,e,n,r,a=!1){if(Ce(t)){t.forEach((G,ne)=>jl(G,e&&(Ce(e)?e[ne]:e),n,r,a));return}if(Pu(r)&&!a)return;const c=r.shapeFlag&4?Mf(r.component)||r.component.proxy:r.el,m=a?null:c,{i:g,r:N}=t,d=e&&e.r,T=g.refs===st?g.refs={}:g.refs,P=g.setupState;if(d!=null&&d!==N&&(It(d)?(T[d]=null,Be(P,d)&&(P[d]=null)):Vt(d)&&(d.value=null)),Te(N))ci(N,g,12,[m,T]);else{const G=It(N),ne=Vt(N);if(G||ne){const X=()=>{if(t.f){const b=G?Be(P,N)?P[N]:T[N]:N.value;a?Ce(b)&&bf(b,c):Ce(b)?b.includes(c)||b.push(c):G?(T[N]=[c],Be(P,N)&&(P[N]=T[N])):(N.value=[c],t.k&&(T[t.k]=N.value))}else G?(T[N]=m,Be(P,N)&&(P[N]=m)):ne&&(N.value=m,t.k&&(T[t.k]=m))};m?(X.id=-1,un(X,n)):X()}}}const un=By;function mw(t){return yw(t)}function yw(t,e){const n=Rl();n.__VUE__=!0;const{insert:r,remove:a,patchProp:c,createElement:m,createText:g,createComment:N,setText:d,setElementText:T,parentNode:P,nextSibling:G,setScopeId:ne=Xn,insertStaticContent:X}=t,b=(x,q,A,M=null,H=null,ee=null,$=!1,V=null,re=!!q.dynamicChildren)=>{if(x===q)return;x&&!ra(x,q)&&(M=fe(x),St(x,H,ee,!0),x=null),q.patchFlag===-2&&(re=!1,q.dynamicChildren=null);const{type:K,ref:ce,shapeFlag:oe}=q;switch(K){case cl:O(x,q,A,M);break;case Oa:v(x,q,A,M);break;case Cl:x==null&&C(q,A,M,$);break;case cr:mn(x,q,A,M,H,ee,$,V,re);break;default:oe&1?_e(x,q,A,M,H,ee,$,V,re):oe&6?et(x,q,A,M,H,ee,$,V,re):(oe&64||oe&128)&&K.process(x,q,A,M,H,ee,$,V,re,Dn)}ce!=null&&H&&jl(ce,x&&x.ref,ee,q||x,!q)},O=(x,q,A,M)=>{if(x==null)r(q.el=g(q.children),A,M);else{const H=q.el=x.el;q.children!==x.children&&d(H,q.children)}},v=(x,q,A,M)=>{x==null?r(q.el=N(q.children||""),A,M):q.el=x.el},C=(x,q,A,M)=>{[x.el,x.anchor]=X(x.children,q,A,M,x.el,x.anchor)},R=({el:x,anchor:q},A,M)=>{let H;for(;x&&x!==q;)H=G(x),r(x,A,M),x=H;r(q,A,M)},F=({el:x,anchor:q})=>{let A;for(;x&&x!==q;)A=G(x),a(x),x=A;a(q)},_e=(x,q,A,M,H,ee,$,V,re)=>{$=$||q.type==="svg",x==null?ae(q,A,M,H,ee,$,V,re):Wn(x,q,H,ee,$,V,re)},ae=(x,q,A,M,H,ee,$,V)=>{let re,K;const{type:ce,props:oe,shapeFlag:ue,transition:me,dirs:xe}=x;if(re=x.el=m(x.type,ee,oe&&oe.is,oe),ue&8?T(re,x.children):ue&16&&Tt(x.children,re,null,M,H,ee&&ce!=="foreignObject",$,V),xe&&Pi(x,null,M,"created"),ge(re,x,x.scopeId,$,M),oe){for(const Re in oe)Re!=="value"&&!Du(Re)&&c(re,Re,null,oe[Re],ee,x.children,M,H,nn);"value"in oe&&c(re,"value",null,oe.value),(K=oe.onVnodeBeforeMount)&&rr(K,M,x)}xe&&Pi(x,null,M,"beforeMount");const $e=(!H||H&&!H.pendingBranch)&&me&&!me.persisted;$e&&me.beforeEnter(re),r(re,q,A),((K=oe&&oe.onVnodeMounted)||$e||xe)&&un(()=>{K&&rr(K,M,x),$e&&me.enter(re),xe&&Pi(x,null,M,"mounted")},H)},ge=(x,q,A,M,H)=>{if(A&&ne(x,A),M)for(let ee=0;ee<M.length;ee++)ne(x,M[ee]);if(H){let ee=H.subTree;if(q===ee){const $=H.vnode;ge(x,$,$.scopeId,$.slotScopeIds,H.parent)}}},Tt=(x,q,A,M,H,ee,$,V,re=0)=>{for(let K=re;K<x.length;K++){const ce=x[K]=V?Kr(x[K]):lr(x[K]);b(null,ce,q,A,M,H,ee,$,V)}},Wn=(x,q,A,M,H,ee,$)=>{const V=q.el=x.el;let{patchFlag:re,dynamicChildren:K,dirs:ce}=q;re|=x.patchFlag&16;const oe=x.props||st,ue=q.props||st;let me;A&&Li(A,!1),(me=ue.onVnodeBeforeUpdate)&&rr(me,A,q,x),ce&&Pi(q,x,A,"beforeUpdate"),A&&Li(A,!0);const xe=H&&q.type!=="foreignObject";if(K?pn(x.dynamicChildren,K,V,A,M,xe,ee):$||qe(x,q,V,null,A,M,xe,ee,!1),re>0){if(re&16)Rn(V,q,oe,ue,A,M,H);else if(re&2&&oe.class!==ue.class&&c(V,"class",null,ue.class,H),re&4&&c(V,"style",oe.style,ue.style,H),re&8){const $e=q.dynamicProps;for(let Re=0;Re<$e.length;Re++){const tt=$e[Re],he=oe[tt],wn=ue[tt];(wn!==he||tt==="value")&&c(V,tt,he,wn,H,x.children,A,M,nn)}}re&1&&x.children!==q.children&&T(V,q.children)}else!$&&K==null&&Rn(V,q,oe,ue,A,M,H);((me=ue.onVnodeUpdated)||ce)&&un(()=>{me&&rr(me,A,q,x),ce&&Pi(q,x,A,"updated")},M)},pn=(x,q,A,M,H,ee,$)=>{for(let V=0;V<q.length;V++){const re=x[V],K=q[V],ce=re.el&&(re.type===cr||!ra(re,K)||re.shapeFlag&70)?P(re.el):A;b(re,K,ce,null,M,H,ee,$,!0)}},Rn=(x,q,A,M,H,ee,$)=>{if(A!==M){if(A!==st)for(const V in A)!Du(V)&&!(V in M)&&c(x,V,A[V],null,$,q.children,H,ee,nn);for(const V in M){if(Du(V))continue;const re=M[V],K=A[V];re!==K&&V!=="value"&&c(x,V,K,re,$,q.children,H,ee,nn)}"value"in M&&c(x,"value",A.value,M.value)}},mn=(x,q,A,M,H,ee,$,V,re)=>{const K=q.el=x?x.el:g(""),ce=q.anchor=x?x.anchor:g("");let{patchFlag:oe,dynamicChildren:ue,slotScopeIds:me}=q;me&&(V=V?V.concat(me):me),x==null?(r(K,A,M),r(ce,A,M),Tt(q.children,A,ce,H,ee,$,V,re)):oe>0&&oe&64&&ue&&x.dynamicChildren?(pn(x.dynamicChildren,ue,A,H,ee,$,V),(q.key!=null||H&&q===H.subTree)&&ap(x,q,!0)):qe(x,q,A,ce,H,ee,$,V,re)},et=(x,q,A,M,H,ee,$,V,re)=>{q.slotScopeIds=V,x==null?q.shapeFlag&512?H.ctx.activate(q,A,M,$,re):en(q,A,M,H,ee,$,re):tn(x,q,re)},en=(x,q,A,M,H,ee,$)=>{const V=x.component=Tw(x,M,H);if(Yd(x)&&(V.ctx.renderer=Dn),Sw(V),V.asyncDep){if(H&&H.registerDep(V,ft),!x.el){const re=V.subTree=us(Oa);v(null,re,q,A)}return}ft(V,x,q,A,H,ee,$)},tn=(x,q,A)=>{const M=q.component=x.component;if(Py(x,q,A))if(M.asyncDep&&!M.asyncResolved){pe(M,q,A);return}else M.next=q,Ty(M.update),M.update();else q.el=x.el,M.vnode=q},ft=(x,q,A,M,H,ee,$)=>{const V=()=>{if(x.isMounted){let{next:ce,bu:oe,u:ue,parent:me,vnode:xe}=x,$e=ce,Re;Li(x,!1),ce?(ce.el=xe.el,pe(x,ce,$)):ce=xe,oe&&xl(oe),(Re=ce.props&&ce.props.onVnodeBeforeUpdate)&&rr(Re,me,ce,xe),Li(x,!0);const tt=El(x),he=x.subTree;x.subTree=tt,b(he,tt,P(he.el),fe(he),x,H,ee),ce.el=tt.el,$e===null&&Ly(x,tt.el),ue&&un(ue,H),(Re=ce.props&&ce.props.onVnodeUpdated)&&un(()=>rr(Re,me,ce,xe),H)}else{let ce;const{el:oe,props:ue}=q,{bm:me,m:xe,parent:$e}=x,Re=Pu(q);if(Li(x,!1),me&&xl(me),!Re&&(ce=ue&&ue.onVnodeBeforeMount)&&rr(ce,$e,q),Li(x,!0),oe&&ze){const tt=()=>{x.subTree=El(x),ze(oe,x.subTree,x,H,null)};Re?q.type.__asyncLoader().then(()=>!x.isUnmounted&&tt()):tt()}else{const tt=x.subTree=El(x);b(null,tt,A,M,x,H,ee),q.el=tt.el}if(xe&&un(xe,H),!Re&&(ce=ue&&ue.onVnodeMounted)){const tt=q;un(()=>rr(ce,$e,tt),H)}(q.shapeFlag&256||$e&&Pu($e.vnode)&&$e.vnode.shapeFlag&256)&&x.a&&un(x.a,H),x.isMounted=!0,q=A=M=null}},re=x.effect=new Of(V,()=>Wf(K),x.scope),K=x.update=()=>re.run();K.id=x.uid,Li(x,!0),K()},pe=(x,q,A)=>{q.component=x;const M=x.vnode.props;x.vnode=q,x.next=null,fw(x,q.props,M,A),pw(x,q.children,A),To(),ph(),So()},qe=(x,q,A,M,H,ee,$,V,re=!1)=>{const K=x&&x.children,ce=x?x.shapeFlag:0,oe=q.children,{patchFlag:ue,shapeFlag:me}=q;if(ue>0){if(ue&128){de(K,oe,A,M,H,ee,$,V,re);return}else if(ue&256){rt(K,oe,A,M,H,ee,$,V,re);return}}me&8?(ce&16&&nn(K,H,ee),oe!==K&&T(A,oe)):ce&16?me&16?de(K,oe,A,M,H,ee,$,V,re):nn(K,H,ee,!0):(ce&8&&T(A,""),me&16&&Tt(oe,A,M,H,ee,$,V,re))},rt=(x,q,A,M,H,ee,$,V,re)=>{x=x||zs,q=q||zs;const K=x.length,ce=q.length,oe=Math.min(K,ce);let ue;for(ue=0;ue<oe;ue++){const me=q[ue]=re?Kr(q[ue]):lr(q[ue]);b(x[ue],me,A,null,H,ee,$,V,re)}K>ce?nn(x,H,ee,!0,!1,oe):Tt(q,A,M,H,ee,$,V,re,oe)},de=(x,q,A,M,H,ee,$,V,re)=>{let K=0;const ce=q.length;let oe=x.length-1,ue=ce-1;for(;K<=oe&&K<=ue;){const me=x[K],xe=q[K]=re?Kr(q[K]):lr(q[K]);if(ra(me,xe))b(me,xe,A,null,H,ee,$,V,re);else break;K++}for(;K<=oe&&K<=ue;){const me=x[oe],xe=q[ue]=re?Kr(q[ue]):lr(q[ue]);if(ra(me,xe))b(me,xe,A,null,H,ee,$,V,re);else break;oe--,ue--}if(K>oe){if(K<=ue){const me=ue+1,xe=me<ce?q[me].el:M;for(;K<=ue;)b(null,q[K]=re?Kr(q[K]):lr(q[K]),A,xe,H,ee,$,V,re),K++}}else if(K>ue)for(;K<=oe;)St(x[K],H,ee,!0),K++;else{const me=K,xe=K,$e=new Map;for(K=xe;K<=ue;K++){const le=q[K]=re?Kr(q[K]):lr(q[K]);le.key!=null&&$e.set(le.key,K)}let Re,tt=0;const he=ue-xe+1;let wn=!1,wi=0;const Ft=new Array(he);for(K=0;K<he;K++)Ft[K]=0;for(K=me;K<=oe;K++){const le=x[K];if(tt>=he){St(le,H,ee,!0);continue}let kt;if(le.key!=null)kt=$e.get(le.key);else for(Re=xe;Re<=ue;Re++)if(Ft[Re-xe]===0&&ra(le,q[Re])){kt=Re;break}kt===void 0?St(le,H,ee,!0):(Ft[kt-xe]=K+1,kt>=wi?wi=kt:wn=!0,b(le,q[kt],A,null,H,ee,$,V,re),tt++)}const ps=wn?ww(Ft):zs;for(Re=ps.length-1,K=he-1;K>=0;K--){const le=xe+K,kt=q[le],te=le+1<ce?q[le+1].el:M;Ft[K]===0?b(null,kt,A,te,H,ee,$,V,re):wn&&(Re<0||K!==ps[Re]?ke(kt,A,te,2):Re--)}}},ke=(x,q,A,M,H=null)=>{const{el:ee,type:$,transition:V,children:re,shapeFlag:K}=x;if(K&6){ke(x.component.subTree,q,A,M);return}if(K&128){x.suspense.move(q,A,M);return}if(K&64){$.move(x,q,A,Dn);return}if($===cr){r(ee,q,A);for(let oe=0;oe<re.length;oe++)ke(re[oe],q,A,M);r(x.anchor,q,A);return}if($===Cl){R(x,q,A);return}if(M!==2&&K&1&&V)if(M===0)V.beforeEnter(ee),r(ee,q,A),un(()=>V.enter(ee),H);else{const{leave:oe,delayLeave:ue,afterLeave:me}=V,xe=()=>r(ee,q,A),$e=()=>{oe(ee,()=>{xe(),me&&me()})};ue?ue(ee,xe,$e):$e()}else r(ee,q,A)},St=(x,q,A,M=!1,H=!1)=>{const{type:ee,props:$,ref:V,children:re,dynamicChildren:K,shapeFlag:ce,patchFlag:oe,dirs:ue}=x;if(V!=null&&jl(V,null,A,x,!0),ce&256){q.ctx.deactivate(x);return}const me=ce&1&&ue,xe=!Pu(x);let $e;if(xe&&($e=$&&$.onVnodeBeforeUnmount)&&rr($e,q,x),ce&6)yn(x.component,A,M);else{if(ce&128){x.suspense.unmount(A,M);return}me&&Pi(x,null,q,"beforeUnmount"),ce&64?x.type.remove(x,q,A,H,Dn,M):K&&(ee!==cr||oe>0&&oe&64)?nn(K,q,A,!1,!0):(ee===cr&&oe&384||!H&&ce&16)&&nn(re,q,A),M&&br(x)}(xe&&($e=$&&$.onVnodeUnmounted)||me)&&un(()=>{$e&&rr($e,q,x),me&&Pi(x,null,q,"unmounted")},A)},br=x=>{const{type:q,el:A,anchor:M,transition:H}=x;if(q===cr){ds(A,M);return}if(q===Cl){F(x);return}const ee=()=>{a(A),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(x.shapeFlag&1&&H&&!H.persisted){const{leave:$,delayLeave:V}=H,re=()=>$(A,ee);V?V(x.el,ee,re):re()}else ee()},ds=(x,q)=>{let A;for(;x!==q;)A=G(x),a(x),x=A;a(q)},yn=(x,q,A)=>{const{bum:M,scope:H,update:ee,subTree:$,um:V}=x;M&&xl(M),H.stop(),ee&&(ee.active=!1,St($,x,q,A)),V&&un(V,q),un(()=>{x.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},nn=(x,q,A,M=!1,H=!1,ee=0)=>{for(let $=ee;$<x.length;$++)St(x[$],q,A,M,H)},fe=x=>x.shapeFlag&6?fe(x.component.subTree):x.shapeFlag&128?x.suspense.next():G(x.anchor||x.el),Me=(x,q,A)=>{x==null?q._vnode&&St(q._vnode,null,null,!0):b(q._vnode||null,x,q,null,null,null,A),ph(),zd(),q._vnode=x},Dn={p:b,um:St,m:ke,r:br,mt:en,mc:Tt,pc:qe,pbc:pn,n:fe,o:t};let Bt,ze;return e&&([Bt,ze]=e(Dn)),{render:Me,hydrate:Bt,createApp:uw(Me,Bt)}}function Li({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function ap(t,e,n=!1){const r=t.children,a=e.children;if(Ce(r)&&Ce(a))for(let c=0;c<r.length;c++){const m=r[c];let g=a[c];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=a[c]=Kr(a[c]),g.el=m.el),n||ap(m,g)),g.type===cl&&(g.el=m.el)}}function ww(t){const e=t.slice(),n=[0];let r,a,c,m,g;const N=t.length;for(r=0;r<N;r++){const d=t[r];if(d!==0){if(a=n[n.length-1],t[a]<d){e[r]=a,n.push(r);continue}for(c=0,m=n.length-1;c<m;)g=c+m>>1,t[n[g]]<d?c=g+1:m=g;d<t[n[c]]&&(c>0&&(e[r]=n[c-1]),n[c]=r)}}for(c=n.length,m=n[c-1];c-- >0;)n[c]=m,m=e[m];return n}const gw=t=>t.__isTeleport,cr=Symbol.for("v-fgt"),cl=Symbol.for("v-txt"),Oa=Symbol.for("v-cmt"),Cl=Symbol.for("v-stc"),la=[];let Gn=null;function bw(t=!1){la.push(Gn=t?null:[])}function Nw(){la.pop(),Gn=la[la.length-1]||null}let qa=1;function Eh(t){qa+=t}function vw(t){return t.dynamicChildren=qa>0?Gn||zs:null,Nw(),qa>0&&Gn&&Gn.push(t),t}function _w(t,e,n,r,a,c){return vw(Nt(t,e,n,r,a,c,!0))}function xw(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const ll="__vInternal",up=({key:t})=>t??null,Mu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Vt(t)||Te(t)?{i:pr,r:t,k:e,f:!!n}:t:null);function Nt(t,e=null,n=null,r=0,a=null,c=t===cr?0:1,m=!1,g=!1){const N={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&up(e),ref:e&&Mu(e),scopeId:Kd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:pr};return g?(Pf(N,n),c&128&&t.normalize(N)):n&&(N.shapeFlag|=It(n)?8:16),qa>0&&!m&&Gn&&(N.patchFlag>0||c&6)&&N.patchFlag!==32&&Gn.push(N),N}const us=Ew;function Ew(t,e=null,n=null,r=0,a=null,c=!1){if((!t||t===ew)&&(t=Oa),xw(t)){const g=_o(t,e,!0);return n&&Pf(g,n),qa>0&&!c&&Gn&&(g.shapeFlag&6?Gn[Gn.indexOf(t)]=g:Gn.push(g)),g.patchFlag|=-2,g}if(Rw(t)&&(t=t.__vccOpts),e){e=Ow(e);let{class:g,style:N}=e;g&&!It(g)&&(e.class=xf(g)),lt(N)&&(Ld(N)&&!Ce(N)&&(N=Ct({},N)),e.style=_f(N))}const m=It(t)?1:My(t)?128:gw(t)?64:lt(t)?4:Te(t)?2:0;return Nt(t,e,n,r,a,m,c,!0)}function Ow(t){return t?Ld(t)||ll in t?Ct({},t):t:null}function _o(t,e,n=!1){const{props:r,ref:a,patchFlag:c,children:m}=t,g=e?qw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&up(g),ref:e&&e.ref?n&&a?Ce(a)?a.concat(Mu(e)):[a,Mu(e)]:Mu(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==cr?c===-1?16:c|16:c,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_o(t.ssContent),ssFallback:t.ssFallback&&_o(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ca(t=" ",e=0){return us(cl,null,t,e)}function lr(t){return t==null||typeof t=="boolean"?us(Oa):Ce(t)?us(cr,null,t.slice()):typeof t=="object"?Kr(t):us(cl,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_o(t)}function Pf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ce(e))n=16;else if(typeof e=="object")if(r&65){const a=e.default;a&&(a._c&&(a._d=!1),Pf(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(ll in e)?e._ctx=pr:a===3&&pr&&(pr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:pr},n=32):(e=String(e),r&64?(n=16,e=[Ca(e)]):n=8);t.children=e,t.shapeFlag|=n}function qw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)if(a==="class")e.class!==r.class&&(e.class=xf([e.class,r.class]));else if(a==="style")e.style=_f([e.style,r.style]);else if(nl(a)){const c=e[a],m=r[a];m&&c!==m&&!(Ce(c)&&c.includes(m))&&(e[a]=c?[].concat(c,m):m)}else a!==""&&(e[a]=r[a])}return e}function rr(t,e,n,r=null){Zn(t,e,7,[n,r])}const Cw=tp();let Iw=0;function Tw(t,e,n){const r=t.type,a=(e?e.appContext:t.appContext)||Cw,c={uid:Iw++,vnode:t,type:r,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new jm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rp(r,a),emitsOptions:Hd(r,a),emit:null,emitted:null,propsDefaults:st,inheritAttrs:r.inheritAttrs,ctx:st,data:st,props:st,attrs:st,slots:st,refs:st,setupState:st,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=e?e.root:c,c.emit=Ay.bind(null,c),t.ce&&t.ce(c),c}let zt=null,Lf,As,Oh="__VUE_INSTANCE_SETTERS__";(As=Rl()[Oh])||(As=Rl()[Oh]=[]),As.push(t=>zt=t),Lf=t=>{As.length>1?As.forEach(e=>e(t)):As[0](t)};const xo=t=>{Lf(t),t.scope.on()},cs=()=>{zt&&zt.scope.off(),Lf(null)};function cp(t){return t.vnode.shapeFlag&4}let Ia=!1;function Sw(t,e=!1){Ia=e;const{props:n,children:r}=t.vnode,a=cp(t);lw(t,n,a,e),dw(t,r);const c=a?kw(t,e):void 0;return Ia=!1,c}function kw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Md(new Proxy(t.ctx,tw));const{setup:r}=n;if(r){const a=t.setupContext=r.length>1?Ww(t):null;xo(t),To();const c=ci(r,t,0,[t.props,a]);if(So(),cs(),Nd(c)){if(c.then(cs,cs),e)return c.then(m=>{qh(t,m,e)}).catch(m=>{ol(m,t,0)});t.asyncDep=c}else qh(t,c,e)}else lp(t,e)}function qh(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lt(e)&&(t.setupState=$d(e)),lp(t,n)}let Ch;function lp(t,e,n){const r=t.type;if(!t.render){if(!e&&Ch&&!r.render){const a=r.template||Rf(t).template;if(a){const{isCustomElement:c,compilerOptions:m}=t.appContext.config,{delimiters:g,compilerOptions:N}=r,d=Ct(Ct({isCustomElement:c,delimiters:g},m),N);r.render=Ch(a,d)}}t.render=r.render||Xn}xo(t),To(),nw(t),So(),cs()}function Aw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return dn(t,"get","$attrs"),e[n]}}))}function Ww(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Aw(t)},slots:t.slots,emit:t.emit,expose:e}}function Mf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy($d(Md(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ca)return ca[n](t)},has(e,n){return n in e||n in ca}}))}function Rw(t){return Te(t)&&"__vccOpts"in t}const Dw=(t,e)=>Oy(t,e,Ia),Pw=Symbol.for("v-scx"),Lw=()=>Lu(Pw),Mw="3.3.4",Bw="http://www.w3.org/2000/svg",Fi=typeof document<"u"?document:null,Ih=Fi&&Fi.createElement("template"),Fw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const a=e?Fi.createElementNS(Bw,t):Fi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:t=>Fi.createTextNode(t),createComment:t=>Fi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,a,c){const m=n?n.previousSibling:e.lastChild;if(a&&(a===c||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===c||!(a=a.nextSibling)););else{Ih.innerHTML=r?`<svg>${t}</svg>`:t;const g=Ih.content;if(r){const N=g.firstChild;for(;N.firstChild;)g.appendChild(N.firstChild);g.removeChild(N)}e.insertBefore(g,n)}return[m?m.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Uw(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function $w(t,e,n){const r=t.style,a=It(n);if(n&&!a){if(e&&!It(e))for(const c in e)n[c]==null&&zl(r,c,"");for(const c in n)zl(r,c,n[c])}else{const c=r.display;a?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=c)}}const Th=/\s*!important$/;function zl(t,e,n){if(Ce(n))n.forEach(r=>zl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Qw(t,e);Th.test(n)?t.setProperty(Io(r),n.replace(Th,""),"important"):t[r]=n}}const Sh=["Webkit","Moz","ms"],Il={};function Qw(t,e){const n=Il[e];if(n)return n;let r=No(e);if(r!=="filter"&&r in t)return Il[e]=r;r=xd(r);for(let a=0;a<Sh.length;a++){const c=Sh[a]+r;if(c in t)return Il[e]=c}return e}const kh="http://www.w3.org/1999/xlink";function jw(t,e,n,r,a){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,n);else{const c=$m(e);n==null||c&&!Ed(n)?t.removeAttribute(e):t.setAttribute(e,c?"":n)}}function zw(t,e,n,r,a,c,m){if(e==="innerHTML"||e==="textContent"){r&&m(r,a,c),t[e]=n??"";return}const g=t.tagName;if(e==="value"&&g!=="PROGRESS"&&!g.includes("-")){t._value=n;const d=g==="OPTION"?t.getAttribute("value"):t.value,T=n??"";d!==T&&(t.value=T),n==null&&t.removeAttribute(e);return}let N=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=Ed(n):n==null&&d==="string"?(n="",N=!0):d==="number"&&(n=0,N=!0)}try{t[e]=n}catch{}N&&t.removeAttribute(e)}function Vw(t,e,n,r){t.addEventListener(e,n,r)}function Hw(t,e,n,r){t.removeEventListener(e,n,r)}function Kw(t,e,n,r,a=null){const c=t._vei||(t._vei={}),m=c[e];if(r&&m)m.value=r;else{const[g,N]=Jw(e);if(r){const d=c[e]=Xw(r,a);Vw(t,g,d,N)}else m&&(Hw(t,g,m,N),c[e]=void 0)}}const Ah=/(?:Once|Passive|Capture)$/;function Jw(t){let e;if(Ah.test(t)){e={};let r;for(;r=t.match(Ah);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Io(t.slice(2)),e]}let Tl=0;const Gw=Promise.resolve(),Yw=()=>Tl||(Gw.then(()=>Tl=0),Tl=Date.now());function Xw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Zn(Zw(r,n.value),e,5,[r])};return n.value=t,n.attached=Yw(),n}function Zw(t,e){if(Ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>a=>!a._stopped&&r&&r(a))}else return e}const Wh=/^on[a-z]/,eg=(t,e,n,r,a=!1,c,m,g,N)=>{e==="class"?Uw(t,r,a):e==="style"?$w(t,n,r):nl(e)?gf(e)||Kw(t,e,n,r,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tg(t,e,r,a))?zw(t,e,r,c,m,g,N):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),jw(t,e,r,a))};function tg(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Wh.test(e)&&Te(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Wh.test(e)&&It(n)?!1:e in t}const ng=Ct({patchProp:eg},Fw);let Rh;function rg(){return Rh||(Rh=mw(ng))}const ig=(...t)=>{const e=rg().createApp(...t),{mount:n}=e;return e.mount=r=>{const a=sg(r);if(!a)return;const c=e._component;!Te(c)&&!c.render&&!c.template&&(c.template=a.innerHTML),a.innerHTML="";const m=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),m},e};function sg(t){return It(t)?document.querySelector(t):t}function ls(t){return typeof t>"u"||t===void 0}function wr(t){return typeof t=="string"}function fp(t){return typeof t=="number"}function Xu(t){return typeof t=="boolean"}function Bf(t){return t===null}function og(t){return t instanceof Date}function ag(t){return typeof t=="bigint"}function On(t){return typeof t=="function"}function dr(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function hi(t){return Array.isArray(t)}function Eo(t){return t}const pt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),ut=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Vr=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:ut.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),hp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),ug=["preserve rows","delete rows","drop"],Un=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),di=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:ut.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:ut.create(t),identifier:ut.create(e)})}}),Bu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:di.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Vl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Hl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),yi=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),li=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:di.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:di.createWithSchema(t,e)})}});function An(t){return dr(t)&&On(t.toOperationNode)}function cg(t){return dr(t)&&"expressionType"in t&&An(t)}function lg(t){return dr(t)&&"expression"in t&&wr(t.alias)&&An(t)}const vr=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),pi=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),ko=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),Sl=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return p({...t,on:e==="And"?pi.create(t.on,n):ko.create(t.on,n)})}}),fa=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return p({kind:"JoinNode",joinType:t,table:e,on:Sl.create(n)})},cloneWithOn(t,e){return p({...t,on:t.on?Sl.cloneWithOperation(t.on,"And",e):Sl.create(e)})}}),Ta=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),fg=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],hg=["+","-","*","/","%","^","&","|","#","<<",">>"],dp=["->","->>"],dg=[...fg,...hg,"&&","||"],pg=["exists","not exists"],mg=["not","-",...pg],yg=[...dg,...dp,...mg,"between","between symmetric"],fs=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Dh(t){return wr(t)&&dp.includes(t)}const mt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:ut.create(t)})}}),Ff=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),fl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Ff.create()})}});var Js;class wg{constructor(e){W(this,Js,void 0);z(this,Js,e)}get dynamicReference(){return i(this,Js)}get refType(){}toOperationNode(){return gp(i(this,Js))}}Js=new WeakMap;function pp(t){return dr(t)&&An(t)&&wr(t.dynamicReference)}const Kl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Xt=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return Xt.create([t],[])},createWithChild(t){return Xt.create(["",""],[t])},createWithChildren(t){return Xt.create(new Array(t.length+1).fill(""),t)}});function mp(t){return t==="asc"||t==="desc"}function hl(t){if(t.length===2)return[kl(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>kl(n)):[kl(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function kl(t,e){const n=gg(t);if(Kl.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return Kl.create(n,yp(e))}function gg(t){if(ou(t))return Wo(t);if(pp(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!mp(n))throw new Error(`Invalid order by direction: ${n}`);return Kl.create(Ar(e),yp(n))}return Ar(t)}function yp(t){if(t)return t==="asc"||t==="desc"?Xt.createWithSql(t):t.toOperationNode()}const Jl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),wp=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Gl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function gp(t){return wr(t)?Ar(t):t.toOperationNode()}function Sa(t){return hi(t)?t.map(e=>Yn(e)):[Yn(t)]}function Yn(t){return ou(t)?Wo(t):gp(t)}function bg(t,e){const n=Ar(t);if(Dh(e))return Jl.create(n,wp.create(fs.create(e)));const r=e.slice(0,-1);if(Dh(r))return Jl.create(n,Gl.create(fs.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Ar(t){const e=".";if(!t.includes(e))return fl.create(mt.create(t));const n=t.split(e).map(Uf);if(n.length===3)return vg(n);if(n.length===2)return _g(n);throw new Error(`invalid column reference ${t}`)}function Ng(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Uf);return yi.create(Ar(n),ut.create(r))}else return Ar(t)}function bp(t){return mt.create(t)}function Ph(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(Uf);if(!mp(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return hl([n,r])[0]}else return bp(t)}function vg(t){const[e,n,r]=t;return fl.create(mt.create(r),li.createWithSchema(e,n))}function _g(t){const[e,n]=t;return fl.create(mt.create(n),li.create(e))}function Uf(t){return t.trim()}const Np=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),$f=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),gr=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function vp(t){return hi(t)?xg(t):Zt(t)}function Zt(t){return ou(t)?Wo(t):gr.create(t)}function Qf(t){return fp(t)||Xu(t)||Bf(t)}function jf(t){if(!Qf(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return gr.createImmediate(t)}function xg(t){return t.some(ou)?$f.create(t.map(e=>Zt(e))):Np.create(t)}const Oo=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Ht(t){if(t.length===3)return ha(t[0],t[1],t[2]);if(t.length===1)return Zt(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function ha(t,e,n){return Eg(e)&&_p(n)?Ta.create(Yn(t),Xl(e),gr.createImmediate(n)):Ta.create(Yn(t),Xl(e),vp(n))}function Wr(t,e,n){return Ta.create(Yn(t),Xl(e),Yn(n))}function Lh(t,e){return Yl(Object.entries(t).filter(([,n])=>!ls(n)).map(([n,r])=>ha(n,_p(r)?"is":"=",r)),e)}function Yl(t,e){const n=e==="and"?pi.create:ko.create;if(t.length===0)return gr.createImmediate(e==="and");let r=Mh(t[0]);for(let a=1;a<t.length;++a)r=n(r,Mh(t[a]));return t.length>1?Oo.create(r):r}function Eg(t){return t==="is"||t==="is not"}function _p(t){return Bf(t)||Xu(t)}function Xl(t){if(wr(t)&&yg.includes(t))return fs.create(t);if(An(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Mh(t){return An(t)?t.toOperationNode():t}const qo=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Bh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Zl=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Bh.cloneWithItems(t.partitionBy,e):Bh.create(e)})}}),Zu=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),Fh=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Uh=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return p({...t,having:e==="And"?pi.create(t.having,n):ko.create(t.having,n)})}}),De=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?Fh.cloneWithItems(t.groupBy,e):Fh.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?Uh.cloneWithOperation(t.having,"And",e):Uh.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Le(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Qn;const ma=class ma{constructor(e){W(this,Qn,void 0);z(this,Qn,p(e))}on(...e){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Ht(e))})}onRef(e,n,r){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Wr(e,n,r))})}onTrue(){return new ma({...i(this,Qn),joinNode:fa.cloneWithOn(i(this,Qn).joinNode,Xt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return i(this,Qn).joinNode}};Qn=new WeakMap;let ec=ma;Le(ec,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Og=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function qg(t){return Sa(t).map(Og.create)}var zi;const Ic=class Ic{constructor(e){W(this,zi,void 0);z(this,zi,p(e))}orderBy(e,n){return new Ic({overNode:Zl.cloneWithOrderByItems(i(this,zi).overNode,hl([e,n]))})}partitionBy(e){return new Ic({overNode:Zl.cloneWithPartitionByItems(i(this,zi).overNode,qg(e))})}$call(e){return e(this)}toOperationNode(){return i(this,zi).overNode}};zi=new WeakMap;let tc=Ic;Le(tc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const da=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Ff.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:fl.createSelectAll(t)})}});function hs(t){return On(t)?hs(t(Ao())):hi(t)?t.map(e=>$h(e)):[$h(t)]}function $h(t){return wr(t)?da.create(Ng(t)):pp(t)?da.create(t.toOperationNode()):da.create(Pp(t))}function iu(t){return t?Array.isArray(t)?t.map(Qh):[Qh(t)]:[da.createSelectAll()]}function Qh(t){if(wr(t))return da.createSelectAllFromTable(hn(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Cg=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),Ig=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function Tg(t){const e=On(t)?t(Ao()):t,n=hi(e)?e:p([e]);return Sg(n)}function Sg(t){const e=kg(t);return[p([...e.keys()].map(mt.create)),Cg.create(t.map(n=>Ag(n,e)))]}function kg(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const a of r)!e.has(a)&&n[a]!==void 0&&e.set(a,e.size)}return e}function Ag(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let a=!1;for(const m of n){const g=e.get(m);if(ls(g))continue;const N=t[m];(ls(N)||ou(N))&&(a=!0),r[g]=N}if(n.length<e.size||a){const m=Ig.create();return $f.create(r.map(g=>ls(g)?m:Zt(g)))}return Np.create(r)}const fr=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?Zu.cloneWithFroms(t.from,e):Zu.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),jh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),pa=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?qo.cloneWithItems(t.orderBy,e):qo.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?jh.cloneWithTables(t.using,e):jh.create(e)})}}),ln=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return p({...t,where:e==="And"?pi.create(t.where,n):ko.create(t.where,n)})}}),zh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),Wg=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),We=p({is(t){return De.is(t)||fr.is(t)||nc.is(t)||pa.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?ln.cloneWithOperation(t.where,"And",e):ln.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?zh.cloneWithSelections(t.returning,e):zh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,n){return p({...t,explain:Wg.create(e,n==null?void 0:n.toOperationNode())})}}),Rg=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function zf(t){const e=On(t)?t(Ao()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>Rg.create(mt.create(n),Zt(r)))}const Dg=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class Pg{constructor(e,n){we(this,"insertId");we(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=n}}class dl extends Error{constructor(n){super("no result");we(this,"node");this.node=n}}function pl(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const En=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?ln.cloneWithOperation(t.indexWhere,"And",e):ln.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?ln.cloneWithOperation(t.indexWhere,"Or",e):ln.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?ln.cloneWithOperation(t.updateWhere,"And",e):ln.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?ln.cloneWithOperation(t.updateWhere,"Or",e):ln.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var Ze;const Er=class Er{constructor(e){W(this,Ze,void 0);z(this,Ze,p(e))}column(e){const n=mt.create(e);return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,n]):p([n])})})}columns(e){const n=e.map(mt.create);return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,...n]):p(n)})})}constraint(e){return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{constraint:ut.create(e)})})}expression(e){return new Er({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Er({...i(this,Ze),onConflictNode:En.cloneWithIndexWhere(i(this,Ze).onConflictNode,Ht(e))})}whereRef(e,n,r){return new Er({...i(this,Ze),onConflictNode:En.cloneWithIndexWhere(i(this,Ze).onConflictNode,Wr(e,n,r))})}clearWhere(){return new Er({...i(this,Ze),onConflictNode:En.cloneWithoutIndexWhere(i(this,Ze).onConflictNode)})}doNothing(){return new xp({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ic({...i(this,Ze),onConflictNode:En.cloneWith(i(this,Ze).onConflictNode,{updates:zf(e)})})}$call(e){return e(this)}};Ze=new WeakMap;let rc=Er;Le(rc,"don't await OnConflictBuilder instances.");var La;class xp{constructor(e){W(this,La,void 0);z(this,La,p(e))}toOperationNode(){return i(this,La).onConflictNode}}La=new WeakMap;Le(xp,"don't await OnConflictDoNothingBuilder instances.");var jn;const ya=class ya{constructor(e){W(this,jn,void 0);z(this,jn,p(e))}where(...e){return new ya({...i(this,jn),onConflictNode:En.cloneWithUpdateWhere(i(this,jn).onConflictNode,Ht(e))})}whereRef(e,n,r){return new ya({...i(this,jn),onConflictNode:En.cloneWithUpdateWhere(i(this,jn).onConflictNode,Wr(e,n,r))})}clearWhere(){return new ya({...i(this,jn),onConflictNode:En.cloneWithoutUpdateWhere(i(this,jn).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return i(this,jn).onConflictNode}};jn=new WeakMap;let ic=ya;Le(ic,"don't await OnConflictUpdateBuilder instances.");var Se;const $t=class $t{constructor(e){W(this,Se,void 0);z(this,Se,p(e))}values(e){const[n,r]=Tg(e);return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:n,values:r})})}columns(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:p(e.map(mt.create))})})}expression(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{values:Wo(e)})})}ignore(){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{ignore:!0})})}onConflict(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onConflict:e(new rc({onConflictNode:En.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onDuplicateKey:Dg.create(zf(e))})})}returning(e){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,hs(e))})}returningAll(){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new $t({...i(this,Se)})}$castTo(){return new $t(i(this,Se))}$narrowType(){return new $t(i(this,Se))}$assertType(){return new $t(i(this,Se))}withPlugin(e){return new $t({...i(this,Se),executor:i(this,Se).executor.withPlugin(e)})}toOperationNode(){return i(this,Se).executor.transformQuery(i(this,Se).queryNode,i(this,Se).queryId)}compile(){return i(this,Se).executor.compileQuery(this.toOperationNode(),i(this,Se).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,Se).executor.executeQuery(e,i(this,Se).queryId);return i(this,Se).executor.adapter.supportsReturning&&n.returning?r.rows:[new Pg(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Se).executor.stream(n,e,i(this,Se).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new $t({...i(this,Se),queryNode:We.cloneWithExplain(i(this,Se).queryNode,e,n)}).execute()}};Se=new WeakMap;let ka=$t;Le(ka,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Lg{constructor(e){we(this,"numDeletedRows");this.numDeletedRows=e}}const Ep=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:gr.create(t)})}});var be;const wt=class wt{constructor(e){W(this,be,void 0);z(this,be,p(e))}where(...e){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Ht(e))})}whereRef(e,n,r){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Wr(e,n,r))})}clearWhere(){return new wt({...i(this,be),queryNode:We.cloneWithoutWhere(i(this,be).queryNode)})}using(e){return new wt({...i(this,be),queryNode:pa.cloneWithUsing(i(this,be).queryNode,Wa(e))})}innerJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,fn("FullJoin",e))})}returning(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,hs(e))})}returningAll(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,iu(e))})}orderBy(e,n){return new wt({...i(this,be),queryNode:pa.cloneWithOrderByItems(i(this,be).queryNode,hl([e,n]))})}limit(e){return new wt({...i(this,be),queryNode:pa.cloneWithLimit(i(this,be).queryNode,Ep.create(e))})}$call(e){return e(this)}$if(e,n){return e?n(this):new wt({...i(this,be)})}$castTo(){return new wt(i(this,be))}$narrowType(){return new wt(i(this,be))}$assertType(){return new wt(i(this,be))}withPlugin(e){return new wt({...i(this,be),executor:i(this,be).executor.withPlugin(e)})}toOperationNode(){return i(this,be).executor.transformQuery(i(this,be).queryNode,i(this,be).queryId)}compile(){return i(this,be).executor.compileQuery(this.toOperationNode(),i(this,be).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,be).executor.executeQuery(e,i(this,be).queryId);return i(this,be).executor.adapter.supportsReturning&&n.returning?r.rows:[new Lg(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,be).executor.stream(n,e,i(this,be).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new wt({...i(this,be),queryNode:We.cloneWithExplain(i(this,be).queryNode,e,n)}).execute()}};be=new WeakMap;let sc=wt;Le(sc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Mg{constructor(e,n){we(this,"numUpdatedRows");we(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=n}}var Oe;const vt=class vt{constructor(e){W(this,Oe,void 0);z(this,Oe,p(e))}where(...e){return new vt({...i(this,Oe),queryNode:We.cloneWithWhere(i(this,Oe).queryNode,Ht(e))})}whereRef(e,n,r){return new vt({...i(this,Oe),queryNode:We.cloneWithWhere(i(this,Oe).queryNode,Wr(e,n,r))})}clearWhere(){return new vt({...i(this,Oe),queryNode:We.cloneWithoutWhere(i(this,Oe).queryNode)})}from(e){return new vt({...i(this,Oe),queryNode:nc.cloneWithFromItems(i(this,Oe).queryNode,Wa(e))})}innerJoin(...e){return new vt({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new vt({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new vt({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new vt({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,fn("FullJoin",e))})}set(e){return new vt({...i(this,Oe),queryNode:nc.cloneWithUpdates(i(this,Oe).queryNode,zf(e))})}returning(e){return new vt({...i(this,Oe),queryNode:We.cloneWithReturning(i(this,Oe).queryNode,hs(e))})}returningAll(){return new vt({...i(this,Oe),queryNode:We.cloneWithReturning(i(this,Oe).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new vt({...i(this,Oe)})}$castTo(){return new vt(i(this,Oe))}$narrowType(){return new vt(i(this,Oe))}$assertType(){return new vt(i(this,Oe))}withPlugin(e){return new vt({...i(this,Oe),executor:i(this,Oe).executor.withPlugin(e)})}toOperationNode(){return i(this,Oe).executor.transformQuery(i(this,Oe).queryNode,i(this,Oe).queryId)}compile(){return i(this,Oe).executor.compileQuery(this.toOperationNode(),i(this,Oe).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,Oe).executor.executeQuery(e,i(this,Oe).queryId);return i(this,Oe).executor.adapter.supportsReturning&&n.returning?r.rows:[new Mg(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Oe).executor.stream(n,e,i(this,Oe).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new vt({...i(this,Oe),queryNode:We.cloneWithExplain(i(this,Oe).queryNode,e,n)}).execute()}};Oe=new WeakMap;let oc=vt;Le(oc,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Vh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:li.create(t),columns:e?p(e.map(mt.create)):void 0})}}),ac=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var Or;const Tc=class Tc{constructor(e){W(this,Or,void 0);z(this,Or,p(e))}materialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!0})})}notMaterialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!1})})}toOperationNode(){return i(this,Or).node}};Or=new WeakMap;let uc=Tc;Le(uc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Hh(t,e){const n=e(Kg()).toOperationNode();return On(t)?t(Bg(n)).toOperationNode():ac.create(Op(t),n)}function Bg(t){return e=>new uc({node:ac.create(Op(e),t)})}function Op(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(a=>a.trim());return Vh.create(n,r)}else return Vh.create(t)}const ku=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Kh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Fg(t){let e="";for(let n=0;n<t;++n)e+=Ug();return e}function Ug(){return Kh[~~(Math.random()*Kh.length)]}function He(){return new $g}var Gs;class $g{constructor(){W(this,Gs,void 0)}get queryId(){return i(this,Gs)===void 0&&z(this,Gs,Fg(8)),i(this,Gs)}}Gs=new WeakMap;var Sc;class Vf{constructor(){we(this,"nodeStack",[]);W(this,Sc,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),p(n)}transformNodeImpl(e){return i(this,Sc)[e.kind](e)}transformNodeList(e){return e&&p(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Sc=new WeakMap;const Qg=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Ys,Vi,Hi,kc,qp,Ac,Cp,Wc,Ip,Ki,ua,Ma,ef,Rc,Tp;class jg extends Vf{constructor(n){super();W(this,kc);W(this,Ac);W(this,Wc);W(this,Ki);W(this,Ma);W(this,Rc);W(this,Ys,void 0);W(this,Vi,new Set);W(this,Hi,new Set);z(this,Ys,n)}transformNodeImpl(n){if(!Ne(this,kc,qp).call(this,n))return super.transformNodeImpl(n);const r=Ne(this,Wc,Ip).call(this,n);for(const m of r)i(this,Hi).add(m);const a=Ne(this,Ac,Cp).call(this,n);for(const m of a)i(this,Vi).add(m);const c=super.transformNodeImpl(n);for(const m of a)i(this,Vi).delete(m);for(const m of r)i(this,Hi).delete(m);return c}transformSchemableIdentifier(n){const r=super.transformSchemableIdentifier(n);return r.schema||!i(this,Vi).has(n.identifier.name)?r:{...r,schema:ut.create(i(this,Ys))}}transformReferences(n){const r=super.transformReferences(n);return r.table.table.schema?r:{...r,table:li.createWithSchema(i(this,Ys),r.table.table.identifier.name)}}}Ys=new WeakMap,Vi=new WeakMap,Hi=new WeakMap,kc=new WeakSet,qp=function(n){return n.kind in Qg},Ac=new WeakSet,Cp=function(n){const r=new Set;if("name"in n&&n.name&&di.is(n.name)&&Ne(this,Ma,ef).call(this,n.name,r),"from"in n&&n.from)for(const a of n.from.froms)Ne(this,Ki,ua).call(this,a,r);if("into"in n&&n.into&&Ne(this,Ki,ua).call(this,n.into,r),"table"in n&&n.table&&Ne(this,Ki,ua).call(this,n.table,r),"joins"in n&&n.joins)for(const a of n.joins)Ne(this,Ki,ua).call(this,a.table,r);return r},Wc=new WeakSet,Ip=function(n){const r=new Set;return"with"in n&&n.with&&Ne(this,Rc,Tp).call(this,n.with,r),r},Ki=new WeakSet,ua=function(n,r){const a=li.is(n)?n:yi.is(n)&&li.is(n.node)?n.node:null;a&&Ne(this,Ma,ef).call(this,a.table,r)},Ma=new WeakSet,ef=function(n,r){const a=n.identifier.name;!i(this,Vi).has(a)&&!i(this,Hi).has(a)&&r.add(a)},Rc=new WeakSet,Tp=function(n,r){for(const a of n.expressions){const c=a.name.table.table.identifier.name;i(this,Hi).has(c)||r.add(c)}};var Ba;class su{constructor(e){W(this,Ba,void 0);z(this,Ba,new jg(e))}transformQuery(e){return i(this,Ba).transformNode(e.node)}async transformResult(e){return e.result}}Ba=new WeakMap;var Ve;const $i=class $i{constructor(e){W(this,Ve,void 0);z(this,Ve,p(e))}selectFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.createFrom(Wa(e),i(this,Ve).withNode)})}selectNoFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.cloneWithSelections(De.create(i(this,Ve).withNode),hs(e))})}insertInto(e){return new ka({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(hn(e),i(this,Ve).withNode)})}replaceInto(e){return new ka({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(hn(e),i(this,Ve).withNode,!0)})}deleteFrom(e){return new sc({queryId:He(),executor:i(this,Ve).executor,queryNode:pa.create(Wa(e),i(this,Ve).withNode)})}updateTable(e){return new oc({queryId:He(),executor:i(this,Ve).executor,queryNode:nc.create(Ra(e),i(this,Ve).withNode)})}with(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?ku.cloneWithExpression(i(this,Ve).withNode,r):ku.create(r)})}withRecursive(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?ku.cloneWithExpression(i(this,Ve).withNode,r):ku.create(r,{recursive:!0})})}withPlugin(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPlugin(e)})}withoutPlugins(){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withoutPlugins()})}withSchema(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPluginAtFront(new su(e))})}};Ve=new WeakMap;let cc=$i;var Fa,Xs,Zs;class Jh{constructor(){W(this,Fa,void 0);W(this,Xs,void 0);W(this,Zs,void 0);we(this,"resolve",e=>{i(this,Xs)&&i(this,Xs).call(this,e)});we(this,"reject",e=>{i(this,Zs)&&i(this,Zs).call(this,e)});z(this,Fa,new Promise((e,n)=>{z(this,Zs,n),z(this,Xs,e)}))}get promise(){return i(this,Fa)}}Fa=new WeakMap,Xs=new WeakMap,Zs=new WeakMap;const Gh=new Set;function zg(t){Gh.has(t)||(Gh.add(t),console.log(t))}const Vg=p([]);var Ji,Ua,tf;class Sp{constructor(e=Vg){W(this,Ua);W(this,Ji,void 0);z(this,Ji,e)}get plugins(){return i(this,Ji)}transformQuery(e,n){for(const r of i(this,Ji)){const a=r.transformQuery({node:e,queryId:n});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const a=await r.executeQuery(e),c=await Ne(this,Ua,tf).call(this,a,n);return Hg(a,c),c})}async*stream(e,n,r){const a=new Jh,c=new Jh;this.provideConnection(async g=>(a.resolve(g),await c.promise)).catch(g=>a.reject(g));const m=await a.promise;try{for await(const g of m.streamQuery(e,n))yield await Ne(this,Ua,tf).call(this,g,r)}finally{c.resolve()}}}Ji=new WeakMap,Ua=new WeakSet,tf=async function(e,n){for(const r of i(this,Ji))e=await r.transformResult({result:e,queryId:n});return e};function Hg(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||zg("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Bs extends Sp{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Bs([...this.plugins,e])}withPlugins(e){return new Bs([...this.plugins,...e])}withPluginAtFront(e){return new Bs([e,...this.plugins])}withoutPlugins(){return new Bs([])}}const Hf=new Bs;function Kg(){return new cc({executor:Hf})}function Jg(t,e){return new ec({joinNode:fa.create(t,Ra(e))})}function Gg(){return new tc({overNode:Zl.create()})}function fn(t,e){if(e.length===3)return Xg(t,e[0],e[1],e[2]);if(e.length===2)return Yg(t,e[0],e[1]);throw new Error("not implemented")}function Yg(t,e,n){return n(Jg(t,e)).toOperationNode()}function Xg(t,e,n,r){return fa.createWithOn(t,Ra(e),Wr(n,"=",r))}const Zg=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:gr.create(t)})}}),eb=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function tb(t){return t=On(t)?t(Ao()):t,Sa(t).map(eb.create)}const kp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return p({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Ws(t,e,n){return On(e)&&(e=e(Gf())),hi(e)||(e=[e]),e.map(r=>kp.create(t,Wo(r),n))}var Xr;const th=class th{constructor(e){W(this,Xr,void 0);z(this,Xr,e)}get expressionType(){}as(e){return new Kf(this,e)}or(...e){return new nf(ko.create(i(this,Xr),Ht(e)))}and(...e){return new rf(pi.create(i(this,Xr),Ht(e)))}$castTo(){return new th(i(this,Xr))}toOperationNode(){return i(this,Xr)}};Xr=new WeakMap;let nt=th;var eo,Zr;class Kf{constructor(e,n){W(this,eo,void 0);W(this,Zr,void 0);z(this,eo,e),z(this,Zr,n)}get expression(){return i(this,eo)}get alias(){return i(this,Zr)}toOperationNode(){return yi.create(i(this,eo).toOperationNode(),An(i(this,Zr))?i(this,Zr).toOperationNode():ut.create(i(this,Zr)))}}eo=new WeakMap,Zr=new WeakMap;var Gi;const Dc=class Dc{constructor(e){W(this,Gi,void 0);z(this,Gi,e)}get expressionType(){}as(e){return new Kf(this,e)}or(...e){return new Dc(ko.create(i(this,Gi),Ht(e)))}$castTo(){return new Dc(i(this,Gi))}toOperationNode(){return Oo.create(i(this,Gi))}};Gi=new WeakMap;let nf=Dc;var Yi;const Pc=class Pc{constructor(e){W(this,Yi,void 0);z(this,Yi,e)}get expressionType(){}as(e){return new Kf(this,e)}and(...e){return new Pc(pi.create(i(this,Yi),Ht(e)))}$castTo(){return new Pc(i(this,Yi))}toOperationNode(){return Oo.create(i(this,Yi))}};Yi=new WeakMap;let rf=Pc;var Z;const ve=class ve{constructor(e){W(this,Z,void 0);z(this,Z,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new ve({...i(this,Z),queryNode:We.cloneWithWhere(i(this,Z).queryNode,Ht(e))})}whereRef(e,n,r){return new ve({...i(this,Z),queryNode:We.cloneWithWhere(i(this,Z).queryNode,Wr(e,n,r))})}having(...e){return new ve({...i(this,Z),queryNode:De.cloneWithHaving(i(this,Z).queryNode,Ht(e))})}havingRef(e,n,r){return new ve({...i(this,Z),queryNode:De.cloneWithHaving(i(this,Z).queryNode,Wr(e,n,r))})}select(e){return new ve({...i(this,Z),queryNode:De.cloneWithSelections(i(this,Z).queryNode,hs(e))})}distinctOn(e){return new ve({...i(this,Z),queryNode:De.cloneWithDistinctOn(i(this,Z).queryNode,Sa(e))})}modifyFront(e){return new ve({...i(this,Z),queryNode:De.cloneWithFrontModifier(i(this,Z).queryNode,vr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.createWithExpression(e.toOperationNode()))})}distinct(){return new ve({...i(this,Z),queryNode:De.cloneWithFrontModifier(i(this,Z).queryNode,vr.create("Distinct"))})}forUpdate(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("ForUpdate"))})}forShare(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("ForShare"))})}forKeyShare(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("ForKeyShare"))})}forNoKeyUpdate(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("ForNoKeyUpdate"))})}skipLocked(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("SkipLocked"))})}noWait(){return new ve({...i(this,Z),queryNode:De.cloneWithEndModifier(i(this,Z).queryNode,vr.create("NoWait"))})}selectAll(e){return new ve({...i(this,Z),queryNode:De.cloneWithSelections(i(this,Z).queryNode,iu(e))})}innerJoin(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("InnerJoin",e))})}leftJoin(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("LeftJoin",e))})}rightJoin(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("RightJoin",e))})}fullJoin(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("FullJoin",e))})}innerJoinLateral(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("LateralInnerJoin",e))})}leftJoinLateral(...e){return new ve({...i(this,Z),queryNode:We.cloneWithJoin(i(this,Z).queryNode,fn("LateralLeftJoin",e))})}orderBy(...e){return new ve({...i(this,Z),queryNode:De.cloneWithOrderByItems(i(this,Z).queryNode,hl(e))})}groupBy(e){return new ve({...i(this,Z),queryNode:De.cloneWithGroupByItems(i(this,Z).queryNode,tb(e))})}limit(e){return new ve({...i(this,Z),queryNode:De.cloneWithLimit(i(this,Z).queryNode,Ep.create(e))})}offset(e){return new ve({...i(this,Z),queryNode:De.cloneWithOffset(i(this,Z).queryNode,Zg.create(e))})}union(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("union",e,!1))})}unionAll(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("union",e,!0))})}intersect(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("intersect",e,!1))})}intersectAll(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("intersect",e,!0))})}except(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("except",e,!1))})}exceptAll(e){return new ve({...i(this,Z),queryNode:De.cloneWithSetOperations(i(this,Z).queryNode,Ws("except",e,!0))})}as(e){return new Ap(this,e)}clearSelect(){return new ve({...i(this,Z),queryNode:De.cloneWithoutSelections(i(this,Z).queryNode)})}clearWhere(){return new ve({...i(this,Z),queryNode:We.cloneWithoutWhere(i(this,Z).queryNode)})}clearLimit(){return new ve({...i(this,Z),queryNode:De.cloneWithoutLimit(i(this,Z).queryNode)})}clearOffset(){return new ve({...i(this,Z),queryNode:De.cloneWithoutOffset(i(this,Z).queryNode)})}clearOrderBy(){return new ve({...i(this,Z),queryNode:De.cloneWithoutOrderBy(i(this,Z).queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new ve({...i(this,Z)})}$castTo(){return new ve(i(this,Z))}$narrowType(){return new ve(i(this,Z))}$assertType(){return new ve(i(this,Z))}$asTuple(){return new nt(this.toOperationNode())}withPlugin(e){return new ve({...i(this,Z),executor:i(this,Z).executor.withPlugin(e)})}toOperationNode(){return i(this,Z).executor.transformQuery(i(this,Z).queryNode,i(this,Z).queryId)}compile(){return i(this,Z).executor.compileQuery(this.toOperationNode(),i(this,Z).queryId)}async execute(){const e=this.compile();return(await i(this,Z).executor.executeQuery(e,i(this,Z).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=dl){const n=await this.executeTakeFirst();if(n===void 0)throw pl(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Z).executor.stream(n,e,i(this,Z).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new ve({...i(this,Z),queryNode:We.cloneWithExplain(i(this,Z).queryNode,e,n)}).execute()}};Z=new WeakMap;let lc=ve;Le(lc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function fc(t){return new lc(t)}var to,no;class Ap{constructor(e,n){W(this,to,void 0);W(this,no,void 0);z(this,to,e),z(this,no,n)}get expression(){return i(this,to)}get alias(){return i(this,no)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return yi.create(i(this,to).toOperationNode(),ut.create(i(this,no)))}}to=new WeakMap,no=new WeakMap;Le(Ap,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Fs=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?ln.cloneWithOperation(t.filter,"And",e):ln.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?ln.cloneWithOperation(t.filter,"Or",e):ln.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),nb=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var Nn;const $s=class $s{constructor(e){W(this,Nn,void 0);z(this,Nn,p(e))}get expressionType(){}as(e){return new rb(this,e)}distinct(){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithDistinct(i(this,Nn).aggregateFunctionNode)})}filterWhere(...e){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithFilter(i(this,Nn).aggregateFunctionNode,Ht(e))})}filterWhereRef(e,n,r){return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithFilter(i(this,Nn).aggregateFunctionNode,Wr(e,n,r))})}over(e){const n=Gg();return new $s({...i(this,Nn),aggregateFunctionNode:Fs.cloneWithOver(i(this,Nn).aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,Nn).aggregateFunctionNode}};Nn=new WeakMap;let Aa=$s;Le(Aa,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var ro,io;class rb{constructor(e,n){W(this,ro,void 0);W(this,io,void 0);z(this,ro,e),z(this,io,n)}get expression(){return i(this,ro)}get alias(){return i(this,io)}toOperationNode(){return yi.create(i(this,ro).toOperationNode(),ut.create(i(this,io)))}}ro=new WeakMap,io=new WeakMap;function Wp(){const t=(n,r)=>new nt(nb.create(n,Sa(r))),e=(n,r)=>new Aa({aggregateFunctionNode:Fs.create(n,r?Sa(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(n,...r){return t("coalesce",[n,...r])},count(n){return e("count",[n])},countAll(n){return new Aa({aggregateFunctionNode:Fs.create("count",iu(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])}})}const ib=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function sb(t,e){return ib.create(fs.create(t),Yn(e))}const Jf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),mr=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Jf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var so;class Rp{constructor(e){W(this,so,void 0);z(this,so,p(e))}when(...e){return new Dp({...i(this,so),node:mr.cloneWithWhen(i(this,so).node,Jf.create(Ht(e)))})}}so=new WeakMap;var oo;class Dp{constructor(e){W(this,oo,void 0);z(this,oo,p(e))}then(e){return new ob({...i(this,oo),node:mr.cloneWithThen(i(this,oo).node,Qf(e)?jf(e):Zt(e))})}}oo=new WeakMap;var or;class ob{constructor(e){W(this,or,void 0);z(this,or,p(e))}when(...e){return new Dp({...i(this,or),node:mr.cloneWithWhen(i(this,or).node,Jf.create(Ht(e)))})}else(e){return new ab({...i(this,or),node:mr.cloneWith(i(this,or).node,{else:Qf(e)?jf(e):Zt(e)})})}end(){return new nt(mr.cloneWith(i(this,or).node,{isStatement:!1}))}endCase(){return new nt(mr.cloneWith(i(this,or).node,{isStatement:!0}))}}or=new WeakMap;var ao;class ab{constructor(e){W(this,ao,void 0);z(this,ao,p(e))}end(){return new nt(mr.cloneWith(i(this,ao).node,{isStatement:!1}))}endCase(){return new nt(mr.cloneWith(i(this,ao).node,{isStatement:!0}))}}ao=new WeakMap;const ub=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var ei,$a,of;class sf{constructor(e){W(this,$a);W(this,ei,void 0);z(this,ei,e)}at(e){return Ne(this,$a,of).call(this,"ArrayLocation",e)}key(e){return Ne(this,$a,of).call(this,"Member",e)}}ei=new WeakMap,$a=new WeakSet,of=function(e,n){return new cb(Jl.cloneWithTraversal(i(this,ei),Gl.is(i(this,ei).traversal)?Gl.cloneWithLeg(i(this,ei).traversal,ub.create(e,n)):wp.cloneWithValue(i(this,ei).traversal,gr.createImmediate(n))))};var uo;class cb extends sf{constructor(n){super(n);W(this,uo,void 0);z(this,uo,n)}get expressionType(){}as(n){return new lb(this,n)}$castTo(){return new sf(i(this,uo))}toOperationNode(){return i(this,uo)}}uo=new WeakMap;var co,ti;class lb{constructor(e,n){W(this,co,void 0);W(this,ti,void 0);z(this,co,e),z(this,ti,n)}get expression(){return i(this,co)}get alias(){return i(this,ti)}toOperationNode(){return yi.create(i(this,co).toOperationNode(),An(i(this,ti))?i(this,ti).toOperationNode():ut.create(i(this,ti)))}}co=new WeakMap,ti=new WeakMap;const Yh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Gf(t=Hf){function e(a,c,m){return new nt(ha(a,c,m))}function n(a,c){return new nt(sb(a,c))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return fc({queryId:He(),executor:t,queryNode:De.createFrom(Wa(a))})},selectNoFrom(a){return fc({queryId:He(),executor:t,queryNode:De.cloneWithSelections(De.create(),hs(a))})},case(a){return new Rp({node:mr.create(ls(a)?void 0:Yn(a))})},ref(a,c){return ls(c)?new nt(Ar(a)):new sf(bg(a,c))},val(a){return new nt(vp(a))},refTuple(...a){return new nt(Yh.create(a.map(Yn)))},tuple(...a){return new nt(Yh.create(a.map(Zt)))},lit(a){return new nt(jf(a))},cmpr(a,c,m){return new nt(ha(a,c,m))},bxp(a,c,m){return new nt(ha(a,c,m))},unary:n,not(a){return n("not",a)},exists(a){return n("exists",a)},neg(a){return n("-",a)},between(a,c,m){return new nt(Ta.create(Yn(a),fs.create("between"),pi.create(Zt(c),Zt(m))))},betweenSymmetric(a,c,m){return new nt(Ta.create(Yn(a),fs.create("between symmetric"),pi.create(Zt(c),Zt(m))))},and(a){return hi(a)?new nt(Yl(a,"and")):new nt(Lh(a,"and"))},or(a){return hi(a)?new nt(Yl(a,"or")):new nt(Lh(a,"or"))},parens(...a){const c=Ht(a);return Oo.is(c)?new nt(c):new nt(Oo.create(c))},withSchema(a){return Gf(t.withPluginAtFront(new su(a)))}});return r.fn=Wp(),r.eb=r,r}function Ao(t){return Gf()}function Wo(t){if(An(t))return t.toOperationNode();if(On(t))return t(Ao()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Pp(t){if(An(t))return t.toOperationNode();if(On(t))return t(Ao()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ou(t){return cg(t)||lg(t)||On(t)}function Wa(t){return hi(t)?t.map(e=>Ra(e)):[Ra(t)]}function Ra(t){return wr(t)?fb(t):Pp(t)}function fb(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Lp);return yi.create(hn(n),ut.create(r))}else return hn(t)}function hn(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(Lp);return li.createWithSchema(n,r)}else return li.create(t)}function Lp(t){return t.trim()}const Mp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),dt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:mt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),Bp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:mt.create(t)})}}),Fp=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:mt.create(t),renameTo:mt.create(e)})}}),Yf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?ut.create(e):void 0})}}),hb=["no action","restrict","cascade","set null","set default"],Fu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function Up(t){return An(t)?t.toOperationNode():gr.createImmediate(t)}const Au=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),db=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function hc(t){if(hb.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ge;const Et=class Et{constructor(e){W(this,Ge,void 0);z(this,Ge,e)}autoIncrement(){return new Et(dt.cloneWith(i(this,Ge),{autoIncrement:!0}))}primaryKey(){return new Et(dt.cloneWith(i(this,Ge),{primaryKey:!0}))}references(e){const n=Ar(e);if(!n.table||Ff.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Et(dt.cloneWith(i(this,Ge),{references:Fu.create(n.table,[n.column])}))}onDelete(e){if(!i(this,Ge).references)throw new Error("on delete constraint can only be added for foreign keys");return new Et(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnDelete(i(this,Ge).references,hc(e))}))}onUpdate(e){if(!i(this,Ge).references)throw new Error("on update constraint can only be added for foreign keys");return new Et(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnUpdate(i(this,Ge).references,hc(e))}))}unique(){return new Et(dt.cloneWith(i(this,Ge),{unique:!0}))}notNull(){return new Et(dt.cloneWith(i(this,Ge),{notNull:!0}))}unsigned(){return new Et(dt.cloneWith(i(this,Ge),{unsigned:!0}))}defaultTo(e){return new Et(dt.cloneWith(i(this,Ge),{defaultTo:db.create(Up(e))}))}check(e){return new Et(dt.cloneWith(i(this,Ge),{check:Yf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Et(dt.cloneWith(i(this,Ge),{generated:Au.create({identity:!0,byDefault:!0})}))}stored(){if(!i(this,Ge).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Et(dt.cloneWith(i(this,Ge),{generated:Au.cloneWith(i(this,Ge).generated,{stored:!0})}))}modifyFront(e){return new Et(dt.cloneWithFrontModifier(i(this,Ge),e.toOperationNode()))}modifyEnd(e){return new Et(dt.cloneWithEndModifier(i(this,Ge),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return i(this,Ge)}};Ge=new WeakMap;let mi=Et;Le(mi,"don't await ColumnDefinitionBuilder instances directly.");const $p=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),pb=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function Co(t){return An(t)?t.toOperationNode():pb.create(t)}const dc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Fu.create(e,n),name:r?ut.create(r):void 0})},cloneWith(t,e){return p({...t,...e})}});var Xi;const Lc=class Lc{constructor(e){W(this,Xi,void 0);z(this,Xi,e)}onDelete(e){return new Lc(dc.cloneWith(i(this,Xi),{onDelete:hc(e)}))}onUpdate(e){return new Lc(dc.cloneWith(i(this,Xi),{onUpdate:hc(e)}))}$call(e){return e(this)}toOperationNode(){return i(this,Xi)}};Xi=new WeakMap;let Da=Lc;Le(Da,"don't await ForeignKeyConstraintBuilder instances directly.");const Uu=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),Qp=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}}),$u=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:ut.create(t)})},cloneWith(t,e){return p({...t,...e})}}),ia=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return p({kind:"AlterColumnNode",column:mt.create(t),[e]:n})}});var qr;class Xf{constructor(e){W(this,qr,void 0);z(this,qr,e)}setDataType(e){return new sa(ia.create(i(this,qr),"dataType",Co(e)))}setDefault(e){return new sa(ia.create(i(this,qr),"setDefault",Up(e)))}dropDefault(){return new sa(ia.create(i(this,qr),"dropDefault",!0))}setNotNull(){return new sa(ia.create(i(this,qr),"setNotNull",!0))}dropNotNull(){return new sa(ia.create(i(this,qr),"dropNotNull",!0))}$call(e){return e(this)}}qr=new WeakMap;var Qa;class sa{constructor(e){W(this,Qa,void 0);z(this,Qa,e)}toOperationNode(){return i(this,Qa)}}Qa=new WeakMap;var zn;class Ds{constructor(e){W(this,zn,void 0);z(this,zn,p(e))}toOperationNode(){return i(this,zn).executor.transformQuery(i(this,zn).node,i(this,zn).queryId)}compile(){return i(this,zn).executor.compileQuery(this.toOperationNode(),i(this,zn).queryId)}async execute(){await i(this,zn).executor.executeQuery(this.compile(),i(this,zn).queryId)}}zn=new WeakMap;Le(Ds,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Qt;const Mc=class Mc{constructor(e){W(this,Qt,void 0);z(this,Qt,p(e))}onDelete(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return i(this,Qt).executor.transformQuery(pt.cloneWithTableProps(i(this,Qt).node,{addConstraint:Uu.create(i(this,Qt).constraintBuilder.toOperationNode())}),i(this,Qt).queryId)}compile(){return i(this,Qt).executor.compileQuery(this.toOperationNode(),i(this,Qt).queryId)}async execute(){await i(this,Qt).executor.executeQuery(this.compile(),i(this,Qt).queryId)}};Qt=new WeakMap;let pc=Mc;Le(pc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var gt;const wa=class wa{constructor(e){W(this,gt,void 0);z(this,gt,p(e))}ifExists(){return new wa({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{ifExists:!0})})})}cascade(){return new wa({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new wa({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return i(this,gt).executor.transformQuery(i(this,gt).node,i(this,gt).queryId)}compile(){return i(this,gt).executor.compileQuery(this.toOperationNode(),i(this,gt).queryId)}async execute(){await i(this,gt).executor.executeQuery(this.compile(),i(this,gt).queryId)}};gt=new WeakMap;let mc=wa;Le(mc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const jp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}});var Ye;class zp{constructor(e){W(this,Ye,void 0);z(this,Ye,p(e))}renameTo(e){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{renameTo:hn(e)})})}setSchema(e){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{setSchema:ut.create(e)})})}alterColumn(e,n){const r=n(new Xf(e));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,r.toOperationNode())})}dropColumn(e){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Bp.create(e))})}renameColumn(e,n){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Fp.create(e,n))})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Mp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,$p.create(a.toOperationNode()))})}addUniqueConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(Qp.create(n,e))})})}addCheckConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(Yf.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,a){return new pc({...i(this,Ye),constraintBuilder:new Da(dc.create(n.map(mt.create),hn(r),a.map(mt.create),e))})}addPrimaryKeyConstraint(e,n){return new Ds({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(jp.create(n,e))})})}dropConstraint(e){return new mc({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{dropConstraint:$u.create(e)})})}$call(e){return e(this)}}Ye=new WeakMap;var ht;const Qi=class Qi{constructor(e){W(this,ht,void 0);z(this,ht,p(e))}alterColumn(e,n){const r=n(new Xf(e));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,r.toOperationNode())})}dropColumn(e){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Bp.create(e))})}renameColumn(e,n){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Fp.create(e,n))})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Mp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,$p.create(a.toOperationNode()))})}toOperationNode(){return i(this,ht).executor.transformQuery(i(this,ht).node,i(this,ht).queryId)}compile(){return i(this,ht).executor.compileQuery(this.toOperationNode(),i(this,ht).queryId)}async execute(){await i(this,ht).executor.executeQuery(this.compile(),i(this,ht).queryId)}};ht=new WeakMap;let Yr=Qi;Le(zp,"don't await AlterTableBuilder instances");Le(Xf,"don't await AlterColumnBuilder instances");Le(Yr,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Vp extends Vf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var Xe;const ir=class ir{constructor(e){W(this,Xe,void 0);z(this,Xe,p(e))}ifNotExists(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{ifNotExists:!0})})}unique(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{unique:!0})})}on(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{table:hn(e)})})}column(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[Ph(e)])})}columns(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,e.map(Ph))})}expression(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[e.toOperationNode()])})}using(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{using:Xt.createWithSql(e)})})}where(...e){const n=new Vp;return new ir({...i(this,Xe),node:We.cloneWithWhere(i(this,Xe).node,n.transformNode(Ht(e)))})}$call(e){return e(this)}toOperationNode(){return i(this,Xe).executor.transformQuery(i(this,Xe).node,i(this,Xe).queryId)}compile(){return i(this,Xe).executor.compileQuery(this.toOperationNode(),i(this,Xe).queryId)}async execute(){await i(this,Xe).executor.executeQuery(this.compile(),i(this,Xe).queryId)}};Xe=new WeakMap;let yc=ir;Le(yc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var vn;const nh=class nh{constructor(e){W(this,vn,void 0);z(this,vn,p(e))}ifNotExists(){return new nh({...i(this,vn),node:hp.cloneWith(i(this,vn).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,vn).executor.transformQuery(i(this,vn).node,i(this,vn).queryId)}compile(){return i(this,vn).executor.compileQuery(this.toOperationNode(),i(this,vn).queryId)}async execute(){await i(this,vn).executor.executeQuery(this.compile(),i(this,vn).queryId)}};vn=new WeakMap;let wc=nh;Le(wc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function mb(t){if(ug.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Fe;const kn=class kn{constructor(e){W(this,Fe,void 0);z(this,Fe,p(e))}temporary(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{temporary:!0})})}onCommit(e){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{onCommit:mb(e)})})}ifNotExists(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{ifNotExists:!0})})}addColumn(e,n,r=Eo){const a=r(new mi(dt.create(e,Co(n))));return new kn({...i(this,Fe),node:Un.cloneWithColumn(i(this,Fe).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,jp.create(n,e))})}addUniqueConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,Qp.create(n,e))})}addCheckConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,Yf.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,a,c=Eo){const m=c(new Da(dc.create(n.map(mt.create),hn(r),a.map(mt.create),e)));return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,m.toOperationNode())})}modifyFront(e){return new kn({...i(this,Fe),node:Un.cloneWithFrontModifier(i(this,Fe).node,e.toOperationNode())})}modifyEnd(e){return new kn({...i(this,Fe),node:Un.cloneWithEndModifier(i(this,Fe).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,Fe).executor.transformQuery(i(this,Fe).node,i(this,Fe).queryId)}compile(){return i(this,Fe).executor.compileQuery(this.toOperationNode(),i(this,Fe).queryId)}async execute(){await i(this,Fe).executor.executeQuery(this.compile(),i(this,Fe).queryId)}};Fe=new WeakMap;let gc=kn;Le(gc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Rt;const ga=class ga{constructor(e){W(this,Rt,void 0);z(this,Rt,p(e))}on(e){return new ga({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{table:hn(e)})})}ifExists(){return new ga({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{ifExists:!0})})}cascade(){return new ga({...i(this,Rt),node:Bu.cloneWith(i(this,Rt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Rt).executor.transformQuery(i(this,Rt).node,i(this,Rt).queryId)}compile(){return i(this,Rt).executor.compileQuery(this.toOperationNode(),i(this,Rt).queryId)}async execute(){await i(this,Rt).executor.executeQuery(this.compile(),i(this,Rt).queryId)}};Rt=new WeakMap;let bc=ga;Le(bc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Gt;const Bc=class Bc{constructor(e){W(this,Gt,void 0);z(this,Gt,p(e))}ifExists(){return new Bc({...i(this,Gt),node:Vl.cloneWith(i(this,Gt).node,{ifExists:!0})})}cascade(){return new Bc({...i(this,Gt),node:Vl.cloneWith(i(this,Gt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Gt).executor.transformQuery(i(this,Gt).node,i(this,Gt).queryId)}compile(){return i(this,Gt).executor.compileQuery(this.toOperationNode(),i(this,Gt).queryId)}async execute(){await i(this,Gt).executor.executeQuery(this.compile(),i(this,Gt).queryId)}};Gt=new WeakMap;let Nc=Bc;Le(Nc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Yt;const Fc=class Fc{constructor(e){W(this,Yt,void 0);z(this,Yt,p(e))}ifExists(){return new Fc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{ifExists:!0})})}cascade(){return new Fc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Yt).executor.transformQuery(i(this,Yt).node,i(this,Yt).queryId)}compile(){return i(this,Yt).executor.compileQuery(this.toOperationNode(),i(this,Yt).queryId)}async execute(){await i(this,Yt).executor.executeQuery(this.compile(),i(this,Yt).queryId)}};Yt=new WeakMap;let vc=Fc;Le(vc,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Jr=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Uc;class yb{constructor(){W(this,Uc,new Vp)}transformQuery(e){return i(this,Uc).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Uc=new WeakMap;var ot;const Gr=class Gr{constructor(e){W(this,ot,void 0);z(this,ot,p(e))}temporary(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{temporary:!0})})}materialized(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{materialized:!0})})}ifNotExists(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{ifNotExists:!0})})}orReplace(){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{orReplace:!0})})}columns(e){return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{columns:e.map(bp)})})}as(e){const n=e.withPlugin(new yb).toOperationNode();return new Gr({...i(this,ot),node:Jr.cloneWith(i(this,ot).node,{as:n})})}$call(e){return e(this)}toOperationNode(){return i(this,ot).executor.transformQuery(i(this,ot).node,i(this,ot).queryId)}compile(){return i(this,ot).executor.compileQuery(this.toOperationNode(),i(this,ot).queryId)}async execute(){await i(this,ot).executor.executeQuery(this.compile(),i(this,ot).queryId)}};ot=new WeakMap;let _c=Gr;Le(_c,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Qu=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Dt;const ba=class ba{constructor(e){W(this,Dt,void 0);z(this,Dt,p(e))}materialized(){return new ba({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{materialized:!0})})}ifExists(){return new ba({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{ifExists:!0})})}cascade(){return new ba({...i(this,Dt),node:Qu.cloneWith(i(this,Dt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Dt).executor.transformQuery(i(this,Dt).node,i(this,Dt).queryId)}compile(){return i(this,Dt).executor.compileQuery(this.toOperationNode(),i(this,Dt).queryId)}async execute(){await i(this,Dt).executor.executeQuery(this.compile(),i(this,Dt).queryId)}};Dt=new WeakMap;let xc=ba;Le(xc,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Hp=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:$f.create(e.map(n=>gr.createImmediate(n)))})}});var _n;const rh=class rh{constructor(e){W(this,_n,void 0);z(this,_n,p(e))}toOperationNode(){return i(this,_n).executor.transformQuery(i(this,_n).node,i(this,_n).queryId)}asEnum(e){return new rh({...i(this,_n),node:Hp.cloneWithEnum(i(this,_n).node,e)})}$call(e){return e(this)}compile(){return i(this,_n).executor.compileQuery(this.toOperationNode(),i(this,_n).queryId)}async execute(){await i(this,_n).executor.executeQuery(this.compile(),i(this,_n).queryId)}};_n=new WeakMap;let Ec=rh;Le(Ec,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Kp=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var xn;const ih=class ih{constructor(e){W(this,xn,void 0);z(this,xn,p(e))}ifExists(){return new ih({...i(this,xn),node:Kp.cloneWith(i(this,xn).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,xn).executor.transformQuery(i(this,xn).node,i(this,xn).queryId)}compile(){return i(this,xn).executor.compileQuery(this.toOperationNode(),i(this,xn).queryId)}async execute(){await i(this,xn).executor.executeQuery(this.compile(),i(this,xn).queryId)}};xn=new WeakMap;let Oc=ih;Le(Oc,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Xh(t){const e=".";if(t.includes(e)){const n=t.split(e).map(wb);if(n.length===2)return di.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return di.create(t)}function wb(t){return t.trim()}var Ot;const Na=class Na{constructor(e){W(this,Ot,void 0);z(this,Ot,e)}createTable(e){return new gc({queryId:He(),executor:i(this,Ot),node:Un.create(hn(e))})}dropTable(e){return new vc({queryId:He(),executor:i(this,Ot),node:Hl.create(hn(e))})}createIndex(e){return new yc({queryId:He(),executor:i(this,Ot),node:Vr.create(e)})}dropIndex(e){return new bc({queryId:He(),executor:i(this,Ot),node:Bu.create(e)})}createSchema(e){return new wc({queryId:He(),executor:i(this,Ot),node:hp.create(e)})}dropSchema(e){return new Nc({queryId:He(),executor:i(this,Ot),node:Vl.create(e)})}alterTable(e){return new zp({queryId:He(),executor:i(this,Ot),node:pt.create(hn(e))})}createView(e){return new _c({queryId:He(),executor:i(this,Ot),node:Jr.create(e)})}dropView(e){return new xc({queryId:He(),executor:i(this,Ot),node:Qu.create(e)})}createType(e){return new Ec({queryId:He(),executor:i(this,Ot),node:Hp.create(Xh(e))})}dropType(e){return new Oc({queryId:He(),executor:i(this,Ot),node:Kp.create(Xh(e))})}withPlugin(e){return new Na(i(this,Ot).withPlugin(e))}withoutPlugins(){return new Na(i(this,Ot).withoutPlugins())}withSchema(e){return new Na(i(this,Ot).withPluginAtFront(new su(e)))}};Ot=new WeakMap;let af=Na;class gb{ref(e){return new wg(e)}}var lo;class bb{constructor(e){W(this,lo,void 0);z(this,lo,e)}async provideConnection(e){const n=await i(this,lo).acquireConnection();try{return await e(n)}finally{await i(this,lo).releaseConnection(n)}}}lo=new WeakMap;var ar,ur,Cr;const ji=class ji extends Sp{constructor(n,r,a,c=[]){super(c);W(this,ar,void 0);W(this,ur,void 0);W(this,Cr,void 0);z(this,ar,n),z(this,ur,r),z(this,Cr,a)}get adapter(){return i(this,ur)}compileQuery(n){return i(this,ar).compileQuery(n)}provideConnection(n){return i(this,Cr).provideConnection(n)}withPlugins(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,...n])}withPlugin(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,n])}withPluginAtFront(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[n,...this.plugins])}withConnectionProvider(n){return new ji(i(this,ar),i(this,ur),n,[...this.plugins])}withoutPlugins(){return new ji(i(this,ar),i(this,ur),i(this,Cr),[])}};ar=new WeakMap,ur=new WeakMap,Cr=new WeakMap;let uf=ji;function Zh(){return typeof performance<"u"&&On(performance.now)?performance.now():Date.now()}var Vn,ni,Ir,fo,Tr,ja,$c,Jp,Qc,Gp,jc,Yp,zc,Xp,za,cf;class Nb{constructor(e,n){W(this,$c);W(this,Qc);W(this,jc);W(this,zc);W(this,za);W(this,Vn,void 0);W(this,ni,void 0);W(this,Ir,void 0);W(this,fo,void 0);W(this,Tr,void 0);W(this,ja,new WeakSet);z(this,fo,!1),z(this,Vn,e),z(this,ni,n)}async init(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,Ir)||z(this,Ir,i(this,Vn).init().then(()=>{z(this,fo,!0)}).catch(e=>(z(this,Ir,void 0),Promise.reject(e)))),await i(this,Ir)}async acquireConnection(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,fo)||await this.init();const e=await i(this,Vn).acquireConnection();return i(this,ja).has(e)||(Ne(this,$c,Jp).call(this)&&Ne(this,Qc,Gp).call(this,e),i(this,ja).add(e)),e}async releaseConnection(e){await i(this,Vn).releaseConnection(e)}beginTransaction(e,n){return i(this,Vn).beginTransaction(e,n)}commitTransaction(e){return i(this,Vn).commitTransaction(e)}rollbackTransaction(e){return i(this,Vn).rollbackTransaction(e)}async destroy(){i(this,Ir)&&(await i(this,Ir),i(this,Tr)||z(this,Tr,i(this,Vn).destroy().catch(e=>(z(this,Tr,void 0),Promise.reject(e)))),await i(this,Tr))}}Vn=new WeakMap,ni=new WeakMap,Ir=new WeakMap,fo=new WeakMap,Tr=new WeakMap,ja=new WeakMap,$c=new WeakSet,Jp=function(){return i(this,ni).isLevelEnabled("query")||i(this,ni).isLevelEnabled("error")},Qc=new WeakSet,Gp=function(e){const n=e.executeQuery;e.executeQuery=async r=>{const a=Zh();try{return await n.call(e,r)}catch(c){throw await Ne(this,jc,Yp).call(this,c,r,a),c}finally{await Ne(this,zc,Xp).call(this,r,a)}}},jc=new WeakSet,Yp=async function(e,n,r){await i(this,ni).error(()=>({level:"error",error:e,query:n,queryDurationMillis:Ne(this,za,cf).call(this,r)}))},zc=new WeakSet,Xp=async function(e,n){await i(this,ni).query(()=>({level:"query",query:e,queryDurationMillis:Ne(this,za,cf).call(this,n)}))},za=new WeakSet,cf=function(e){return Zh()-e};var Va,ri,Vc,em;class Zp{constructor(e){W(this,Vc);W(this,Va,void 0);W(this,ri,void 0);z(this,Va,e)}async provideConnection(e){for(;i(this,ri);)await i(this,ri);const n=Ne(this,Vc,em).call(this,e);return z(this,ri,n.then(()=>{z(this,ri,void 0)}).catch(()=>{z(this,ri,void 0)})),n}}Va=new WeakMap,ri=new WeakMap,Vc=new WeakSet,em=async function(e){return await e(i(this,Va))};const vb=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var ii,Zi;class _b{constructor(e){W(this,ii,void 0);W(this,Zi,void 0);On(e)?(z(this,Zi,e),z(this,ii,p({query:!0,error:!0}))):(z(this,Zi,xb),z(this,ii,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return i(this,ii)[e]}async query(e){i(this,ii).query&&await i(this,Zi).call(this,e())}async error(e){i(this,ii).error&&await i(this,Zi).call(this,e())}}ii=new WeakMap,Zi=new WeakMap;function xb(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function Eb(t){return dr(t)&&On(t.compile)}var Pt;const Qs=class Qs extends cc{constructor(n){let r,a;if(Ob(n))r={executor:n.executor},a={...n};else{const c=n.dialect,m=c.createDriver(),g=c.createQueryCompiler(),N=c.createAdapter(),d=new _b(n.log??[]),T=new Nb(m,d),P=new bb(T),G=new uf(g,N,P,n.plugins??[]);r={executor:G},a={config:n,executor:G,dialect:c,driver:T}}super(r);W(this,Pt,void 0);z(this,Pt,p(a))}get schema(){return new af(i(this,Pt).executor)}get dynamic(){return new gb}get introspection(){return i(this,Pt).dialect.createIntrospector(this.withoutPlugins())}case(n){return new Rp({node:mr.create(ls(n)?void 0:Wo(n))})}get fn(){return Wp()}transaction(){return new qc({...i(this,Pt)})}connection(){return new tm({...i(this,Pt)})}withPlugin(n){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withPlugin(n)})}withoutPlugins(){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withoutPlugins()})}withSchema(n){return new Qs({...i(this,Pt),executor:i(this,Pt).executor.withPluginAtFront(new su(n))})}withTables(){return new Qs({...i(this,Pt)})}async destroy(){await i(this,Pt).driver.destroy()}get isTransaction(){return!1}getExecutor(){return i(this,Pt).executor}executeQuery(n,r=He()){const a=Eb(n)?n.compile():n;return this.getExecutor().executeQuery(a,r)}};Pt=new WeakMap;let Pa=Qs;var Hn;const js=class js extends Pa{constructor(n){super(n);W(this,Hn,void 0);z(this,Hn,n)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(n){return new js({...i(this,Hn),executor:i(this,Hn).executor.withPlugin(n)})}withoutPlugins(){return new js({...i(this,Hn),executor:i(this,Hn).executor.withoutPlugins()})}withSchema(n){return new js({...i(this,Hn),executor:i(this,Hn).executor.withPluginAtFront(new su(n))})}withTables(){return new js({...i(this,Hn)})}};Hn=new WeakMap;let lf=js;function Ob(t){return dr(t)&&dr(t.config)&&dr(t.driver)&&dr(t.executor)&&dr(t.dialect)}var es;class tm{constructor(e){W(this,es,void 0);z(this,es,p(e))}async execute(e){return i(this,es).executor.provideConnection(async n=>{const r=i(this,es).executor.withConnectionProvider(new Zp(n)),a=new Pa({...i(this,es),executor:r});return await e(a)})}}es=new WeakMap;Le(tm,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Kn;const sh=class sh{constructor(e){W(this,Kn,void 0);z(this,Kn,p(e))}setIsolationLevel(e){return new sh({...i(this,Kn),isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=i(this,Kn),a={isolationLevel:n};return qb(a),i(this,Kn).executor.provideConnection(async c=>{const m=i(this,Kn).executor.withConnectionProvider(new Zp(c)),g=new lf({...r,executor:m});try{await i(this,Kn).driver.beginTransaction(c,a);const N=await e(g);return await i(this,Kn).driver.commitTransaction(c),N}catch(N){throw await i(this,Kn).driver.rollbackTransaction(c),N}})}};Kn=new WeakMap;let qc=sh;Le(qc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function qb(t){if(t.isolationLevel&&!vb.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var cn,ho,ju,Ha,ff,Ka,hf;const Hc=class Hc{constructor(e){W(this,ho);W(this,Ha);W(this,Ka);W(this,cn,void 0);z(this,cn,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new nm(this,e)}$castTo(){return new Hc({...i(this,cn)})}withPlugin(e){return new Hc({...i(this,cn),plugins:i(this,cn).plugins!==void 0?p([...i(this,cn).plugins,e]):p([e])})}toOperationNode(){return Ne(this,Ha,ff).call(this,Ne(this,ho,ju).call(this))}compile(e){return Ne(this,Ka,hf).call(this,Ne(this,ho,ju).call(this,e))}async execute(e){const n=Ne(this,ho,ju).call(this,e);return n.executeQuery(Ne(this,Ka,hf).call(this,n),i(this,cn).queryId)}};cn=new WeakMap,ho=new WeakSet,ju=function(e){const n=e!==void 0?e.getExecutor():Hf;return i(this,cn).plugins!==void 0?n.withPlugins(i(this,cn).plugins):n},Ha=new WeakSet,ff=function(e){return e.transformQuery(i(this,cn).rawNode,i(this,cn).queryId)},Ka=new WeakSet,hf=function(e){return e.compileQuery(Ne(this,Ha,ff).call(this,e),i(this,cn).queryId)};let Cc=Hc;function zr(t){return new Cc(t)}Le(Cc,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ts,si;class nm{constructor(e,n){W(this,ts,void 0);W(this,si,void 0);z(this,ts,e),z(this,si,n)}get expression(){return i(this,ts)}get alias(){return i(this,si)}get rawBuilder(){return i(this,ts)}toOperationNode(){return yi.create(i(this,ts).toOperationNode(),An(i(this,si))?i(this,si).toOperationNode():ut.create(i(this,si)))}}ts=new WeakMap,si=new WeakMap;Le(nm,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const at=Object.assign((t,...e)=>zr({queryId:He(),rawNode:Xt.create(t,(e==null?void 0:e.map(Zt))??[])}),{ref(t){return zr({queryId:He(),rawNode:Xt.createWithChild(Ar(t))})},val(t){return zr({queryId:He(),rawNode:Xt.createWithChild(Zt(t))})},value(t){return this.val(t)},table(t){return zr({queryId:He(),rawNode:Xt.createWithChild(hn(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:He(),rawNode:Xt.create(e,t.map(ut.create))})},lit(t){return zr({queryId:He(),rawNode:Xt.createWithChild(gr.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:He(),rawNode:Xt.createWithSql(t)})},join(t,e=at`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let a=0;a<t.length;++a)n[2*a]=Zt(t[a]),a!==t.length-1&&(n[2*a+1]=r);return zr({queryId:He(),rawNode:Xt.createWithChildren(n)})}});var Kc;class Cb{constructor(){we(this,"nodeStack",[]);W(this,Kc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));we(this,"visitNode",e=>{this.nodeStack.push(e),i(this,Kc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Kc=new WeakMap;var po,ns;class Ib extends Cb{constructor(){super(...arguments);W(this,po,"");W(this,ns,[])}get numParameters(){return i(this,ns).length}compileQuery(n){return z(this,po,""),z(this,ns,[]),this.visitNode(n),p({query:n,sql:this.getSql(),parameters:[...i(this,ns)]})}getSql(){return i(this,po)}visitSelectQuery(n){var a,c;const r=this.parentNode!==void 0&&!Oo.is(this.parentNode)&&!fr.is(this.parentNode)&&!Jr.is(this.parentNode)&&!kp.is(this.parentNode);this.parentNode===void 0&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("select"),n.distinctOn&&(this.append(" "),this.compileDistinctOn(n.distinctOn)),(a=n.frontModifiers)!=null&&a.length&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.selections&&(this.append(" "),this.compileList(n.selections)),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.groupBy&&(this.append(" "),this.visitNode(n.groupBy)),n.having&&(this.append(" "),this.visitNode(n.having)),n.setOperations&&(this.append(" "),this.compileList(n.setOperations," ")),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.offset&&(this.append(" "),this.visitNode(n.offset)),(c=n.endModifiers)!=null&&c.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...n.endModifiers])," ")),r&&this.append(")")}visitFrom(n){this.append("from "),this.compileList(n.froms)}visitSelection(n){this.visitNode(n.selection)}visitColumn(n){this.visitNode(n.column)}compileDistinctOn(n){this.append("distinct on ("),this.compileList(n),this.append(")")}compileList(n,r=", "){const a=n.length-1;for(let c=0;c<=a;c++)this.visitNode(n[c]),c<a&&this.append(r)}visitWhere(n){this.append("where "),this.visitNode(n.where)}visitHaving(n){this.append("having "),this.visitNode(n.having)}visitInsertQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append(n.replace?"replace":"insert"),n.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(n.into),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.values&&(this.append(" "),this.visitNode(n.values)),n.onConflict&&(this.append(" "),this.visitNode(n.onConflict)),n.onDuplicateKey&&(this.append(" "),this.visitNode(n.onDuplicateKey)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitValues(n){this.append("values "),this.compileList(n.values)}visitDeleteQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("delete "),this.visitNode(n.from),n.using&&(this.append(" "),this.visitNode(n.using)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitReturning(n){this.append("returning "),this.compileList(n.selections)}visitAlias(n){this.visitNode(n.node),this.append(" as "),this.visitNode(n.alias)}visitReference(n){n.table&&(this.visitNode(n.table),this.append(".")),this.visitNode(n.column)}visitSelectAll(n){this.append("*")}visitIdentifier(n){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(n),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(n){if(!wr(n.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(n.name))}visitAnd(n){this.visitNode(n.left),this.append(" and "),this.visitNode(n.right)}visitOr(n){this.visitNode(n.left),this.append(" or "),this.visitNode(n.right)}visitValue(n){n.immediate?this.appendImmediateValue(n.value):this.appendValue(n.value)}visitValueList(n){this.append("("),this.compileList(n.values),this.append(")")}visitTuple(n){this.append("("),this.compileList(n.values),this.append(")")}visitPrimitiveValueList(n){this.append("(");const{values:r}=n;for(let a=0;a<r.length;++a)this.appendValue(r[a]),a!==r.length-1&&this.append(", ");this.append(")")}visitParens(n){this.append("("),this.visitNode(n.node),this.append(")")}visitJoin(n){this.append(Sb[n.joinType]),this.append(" "),this.visitNode(n.table),n.on&&(this.append(" "),this.visitNode(n.on))}visitOn(n){this.append("on "),this.visitNode(n.on)}visitRaw(n){const{sqlFragments:r,parameters:a}=n;for(let c=0;c<r.length;++c)this.append(r[c]),a.length>c&&this.visitNode(a[c])}visitOperator(n){this.append(n.operator)}visitTable(n){this.visitNode(n.table)}visitSchemableIdentifier(n){n.schema&&(this.visitNode(n.schema),this.append(".")),this.visitNode(n.identifier)}visitCreateTable(n){this.append("create "),n.frontModifiers&&n.frontModifiers.length>0&&(this.compileList(n.frontModifiers," "),this.append(" ")),n.temporary&&this.append("temporary "),this.append("table "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.table),this.append(" ("),this.compileList([...n.columns,...n.constraints??[]]),this.append(")"),n.onCommit&&(this.append(" on commit "),this.append(n.onCommit)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}visitColumnDefinition(n){this.visitNode(n.column),this.append(" "),this.visitNode(n.dataType),n.unsigned&&this.append(" unsigned"),n.frontModifiers&&n.frontModifiers.length>0&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.generated&&(this.append(" "),this.visitNode(n.generated)),n.defaultTo&&(this.append(" "),this.visitNode(n.defaultTo)),n.notNull&&this.append(" not null"),n.unique&&this.append(" unique"),n.primaryKey&&this.append(" primary key"),n.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),n.references&&(this.append(" "),this.visitNode(n.references)),n.check&&(this.append(" "),this.visitNode(n.check)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(n){this.append("references "),this.visitNode(n.table),this.append(" ("),this.compileList(n.columns),this.append(")"),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitDropTable(n){this.append("drop table "),n.ifExists&&this.append("if exists "),this.visitNode(n.table),n.cascade&&this.append(" cascade")}visitDataType(n){this.append(n.dataType)}visitOrderBy(n){this.append("order by "),this.compileList(n.items)}visitOrderByItem(n){this.visitNode(n.orderBy),n.direction&&(this.append(" "),this.visitNode(n.direction))}visitGroupBy(n){this.append("group by "),this.compileList(n.items)}visitGroupByItem(n){this.visitNode(n.groupBy)}visitUpdateQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("update "),this.visitNode(n.table),this.append(" set "),n.updates&&this.compileList(n.updates),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitColumnUpdate(n){this.visitNode(n.column),this.append(" = "),this.visitNode(n.value)}visitLimit(n){this.append("limit "),this.visitNode(n.limit)}visitOffset(n){this.append("offset "),this.visitNode(n.offset)}visitOnConflict(n){this.append("on conflict"),n.columns?(this.append(" ("),this.compileList(n.columns),this.append(")")):n.constraint?(this.append(" on constraint "),this.visitNode(n.constraint)):n.indexExpression&&(this.append(" ("),this.visitNode(n.indexExpression),this.append(")")),n.indexWhere&&(this.append(" "),this.visitNode(n.indexWhere)),n.doNothing===!0?this.append(" do nothing"):n.updates&&(this.append(" do update set "),this.compileList(n.updates),n.updateWhere&&(this.append(" "),this.visitNode(n.updateWhere)))}visitOnDuplicateKey(n){this.append("on duplicate key update "),this.compileList(n.updates)}visitCreateIndex(n){this.append("create "),n.unique&&this.append("unique "),this.append("index "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.using&&(this.append(" using "),this.visitNode(n.using)),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.where&&(this.append(" "),this.visitNode(n.where))}visitDropIndex(n){this.append("drop index "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.cascade&&this.append(" cascade")}visitCreateSchema(n){this.append("create schema "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.schema)}visitDropSchema(n){this.append("drop schema "),n.ifExists&&this.append("if exists "),this.visitNode(n.schema),n.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("primary key ("),this.compileList(n.columns),this.append(")")}visitUniqueConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("unique ("),this.compileList(n.columns),this.append(")")}visitCheckConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("check ("),this.visitNode(n.expression),this.append(")")}visitForeignKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("foreign key ("),this.compileList(n.columns),this.append(") "),this.visitNode(n.references),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitList(n){this.compileList(n.items)}visitWith(n){this.append("with "),n.recursive&&this.append("recursive "),this.compileList(n.expressions)}visitCommonTableExpression(n){this.visitNode(n.name),this.append(" as "),Xu(n.materialized)&&(n.materialized||this.append("not "),this.append("materialized ")),this.visitNode(n.expression)}visitCommonTableExpressionName(n){this.visitNode(n.table),n.columns&&(this.append("("),this.compileList(n.columns),this.append(")"))}visitAlterTable(n){this.append("alter table "),this.visitNode(n.table),this.append(" "),n.renameTo&&(this.append("rename to "),this.visitNode(n.renameTo)),n.setSchema&&(this.append("set schema "),this.visitNode(n.setSchema)),n.addConstraint&&this.visitNode(n.addConstraint),n.dropConstraint&&this.visitNode(n.dropConstraint),n.columnAlterations&&this.compileList(n.columnAlterations)}visitAddColumn(n){this.append("add column "),this.visitNode(n.column)}visitRenameColumn(n){this.append("rename column "),this.visitNode(n.column),this.append(" to "),this.visitNode(n.renameTo)}visitDropColumn(n){this.append("drop column "),this.visitNode(n.column)}visitAlterColumn(n){this.append("alter column "),this.visitNode(n.column),this.append(" "),n.dataType&&(this.append("type "),this.visitNode(n.dataType),n.dataTypeExpression&&(this.append("using "),this.visitNode(n.dataTypeExpression))),n.setDefault&&(this.append("set default "),this.visitNode(n.setDefault)),n.dropDefault&&this.append("drop default"),n.setNotNull&&this.append("set not null"),n.dropNotNull&&this.append("drop not null")}visitModifyColumn(n){this.append("modify column "),this.visitNode(n.column)}visitAddConstraint(n){this.append("add "),this.visitNode(n.constraint)}visitDropConstraint(n){this.append("drop constraint "),n.ifExists&&this.append("if exists "),this.visitNode(n.constraintName),n.modifier==="cascade"?this.append(" cascade"):n.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(n){this.append(n.operator),this.append(" "),n.all&&this.append("all "),this.visitNode(n.expression)}visitCreateView(n){this.append("create "),n.orReplace&&this.append("or replace "),n.materialized&&this.append("materialized "),n.temporary&&this.append("temporary "),this.append("view "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),this.append(" "),n.columns&&(this.append("("),this.compileList(n.columns),this.append(") ")),n.as&&(this.append("as "),this.visitNode(n.as))}visitDropView(n){this.append("drop "),n.materialized&&this.append("materialized "),this.append("view "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.cascade&&this.append(" cascade")}visitGenerated(n){this.append("generated "),n.always&&this.append("always "),n.byDefault&&this.append("by default "),this.append("as "),n.identity&&this.append("identity"),n.expression&&(this.append("("),this.visitNode(n.expression),this.append(")")),n.stored&&this.append(" stored")}visitDefaultValue(n){this.append("default "),this.visitNode(n.defaultValue)}visitSelectModifier(n){n.rawModifier?this.visitNode(n.rawModifier):this.append(Tb[n.modifier])}visitCreateType(n){this.append("create type "),this.visitNode(n.name),n.enum&&(this.append(" as enum "),this.visitNode(n.enum))}visitDropType(n){this.append("drop type "),n.ifExists&&this.append("if exists "),this.visitNode(n.name)}visitExplain(n){this.append("explain"),(n.options||n.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),n.options&&(this.visitNode(n.options),n.format&&this.append(this.getExplainOptionsDelimiter())),n.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(n.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(n){this.append("default")}visitAggregateFunction(n){this.append(n.func),this.append("("),n.distinct&&this.append("distinct "),this.compileList(n.aggregated),this.append(")"),n.filter&&(this.append(" filter("),this.visitNode(n.filter),this.append(")")),n.over&&(this.append(" "),this.visitNode(n.over))}visitOver(n){this.append("over("),n.partitionBy&&(this.visitNode(n.partitionBy),n.orderBy&&this.append(" ")),n.orderBy&&this.visitNode(n.orderBy),this.append(")")}visitPartitionBy(n){this.append("partition by "),this.compileList(n.items)}visitPartitionByItem(n){this.visitNode(n.partitionBy)}visitBinaryOperation(n){this.visitNode(n.leftOperand),this.append(" "),this.visitNode(n.operator),this.append(" "),this.visitNode(n.rightOperand)}visitUnaryOperation(n){this.visitNode(n.operator),this.isMinusOperator(n.operator)||this.append(" "),this.visitNode(n.operand)}isMinusOperator(n){return fs.is(n)&&n.operator==="-"}visitUsing(n){this.append("using "),this.compileList(n.tables)}visitFunction(n){this.append(n.func),this.append("("),this.compileList(n.arguments),this.append(")")}visitCase(n){this.append("case"),n.value&&(this.append(" "),this.visitNode(n.value)),n.when&&(this.append(" "),this.compileList(n.when," ")),n.else&&(this.append(" else "),this.visitNode(n.else)),this.append(" end"),n.isStatement&&this.append(" case")}visitWhen(n){this.append("when "),this.visitNode(n.condition),n.result&&(this.append(" then "),this.visitNode(n.result))}visitJSONReference(n){this.visitNode(n.reference),this.visitNode(n.traversal)}visitJSONPath(n){n.inOperator&&this.visitNode(n.inOperator),this.append("'$");for(const r of n.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(n){const r=n.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(n.value)),r&&this.append("]")}visitJSONOperatorChain(n){for(let r=0,a=n.values.length;r<a;r++)r===a-1?this.visitNode(n.operator):this.append("->"),this.visitNode(n.values[r])}append(n){z(this,po,i(this,po)+n)}appendValue(n){this.addParameter(n),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(n){const r=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let c="";for(const m of n)c+=m,m===r?c+=r:m===a&&(c+=a);return c}addParameter(n){i(this,ns).push(n)}appendImmediateValue(n){if(wr(n))this.append(`'${n}'`);else if(fp(n)||Xu(n))this.append(n.toString());else if(Bf(n))this.append("null");else if(og(n))this.appendImmediateValue(n.toISOString());else if(ag(n))this.appendImmediateValue(n.toString());else throw new Error(`invalid immediate value ${n}`)}sortSelectModifiers(n){return n.sort((r,a)=>r.modifier&&a.modifier?ed[r.modifier]-ed[a.modifier]:1),p(n)}}po=new WeakMap,ns=new WeakMap;const Tb=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),ed=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Sb=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),yr=p({raw(t,e=[]){return p({sql:t,query:Xt.createWithSql(t),parameters:p(e)})}}),kb=/"/g;class rm extends Ib{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(kb,'""')}visitDefaultInsertValue(e){this.append("null")}}const im="kysely_migration",sm="kysely_migration_lock";p({__noMigrations__:!0});var mo,Jc,am;class om{constructor(e){W(this,Jc);W(this,mo,void 0);z(this,mo,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=i(this,mo).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",im).where("name","!=",sm));const r=await n.execute();return Promise.all(r.map(({name:a})=>Ne(this,Jc,am).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}mo=new WeakMap,Jc=new WeakSet,am=async function(e){var m,g,N,d,T,P;const n=i(this,mo),r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=(P=(T=(d=(N=(g=(m=r.sql)==null?void 0:m.split(/[\(\),]/))==null?void 0:g.find(G=>G.toLowerCase().includes("autoincrement")))==null?void 0:N.trimStart())==null?void 0:d.split(/\s+/))==null?void 0:T[0])==null?void 0:P.replace(/["`]/g,""),c=await n.selectFrom(at`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:c.map(G=>({name:G.name,dataType:G.type,isNullable:!G.notnull,isAutoIncrementing:G.name===a,hasDefaultValue:G.dflt_value!=null}))}};class um{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}var cm=class{createQueryCompiler(){return new rm}createAdapter(){return new um}createIntrospector(t){return new om(t)}},Ja,md,lm=(md=class{constructor(){W(this,Ja,new Ab);we(this,"connection")}async acquireConnection(){return await i(this,Ja).lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){i(this,Ja).unlock()}},Ja=new WeakMap,md),Ab=class{constructor(){we(this,"promise");we(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e==null||e()}},fm=class{streamQuery(){throw new Error("Sqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t;return["SelectQueryNode","RawNode"].includes(r.kind)?{rows:await this.query(n,e)}:{rows:[],...await this.exec(n,e)}}};function Wb({func:t,delay:e,maxCalls:n}){let r,a=0,c=null;function m(){r&&clearTimeout(r),a=0,c=null}function g(){a>=n?(t(c),m()):(r&&clearTimeout(r),r=setTimeout(()=>{t(c),m(),r=void 0},e))}return N=>{a++,c=N,r===void 0&&a===0?(t(N),a++):g()}}var Rb=class extends lm{constructor(e){super();we(this,"config");we(this,"db");this.config=e}async init(){var e,n,r,a,c,m;if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Db(this.db,(e=this.config.onWrite)==null?void 0:e.func,(n=this.config.onWrite)==null?void 0:n.isThrottle,(r=this.config.onWrite)==null?void 0:r.maxCalls,(a=this.config.onWrite)==null?void 0:a.delay),await((m=(c=this.config).onCreateConnection)==null?void 0:m.call(c,this.connection))}async beginTransaction(e){await e.executeQuery(yr.raw("begin")),e.transactionNum++}async commitTransaction(e){await e.executeQuery(yr.raw("commit")),e.transactionNum--}async rollbackTransaction(e){await e.executeQuery(yr.raw("rollback")),e.transactionNum--}async destroy(){var e;(e=this.db)==null||e.close()}},Db=class extends fm{constructor(e,n,r=!1,a=1e3,c=2e3){super();we(this,"db");we(this,"onWrite");we(this,"transactionNum",0);this.db=e,this.onWrite=n?r?Wb({func:n,maxCalls:a,delay:c}):n:void 0}query(e,n){const r=this.db.prepare(e);r.bind(n);const a=[];for(;r.step();)a.push(r.getAsObject());return r.free(),a}exec(e,n){this.db.run(e,n);const r=BigInt(this.query("SELECT last_insert_rowid() as id")[0].id),a=BigInt(this.db.getRowsModified());return this.transactionNum===0&&this.onWrite&&this.onWrite(this.db.export()),{numAffectedRows:a,insertId:r}}},Ga,yd,Pb=(yd=class extends cm{constructor(e){super();W(this,Ga,void 0);z(this,Ga,e)}createDriver(){return new Rb(i(this,Ga))}},Ga=new WeakMap,yd),Lb=class extends lm{constructor(e){super();we(this,"config");we(this,"db");this.config=e}async init(){var e,n;this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new Mb(this.db),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async destroy(){var e;await((e=this.db)==null?void 0:e.sqlite.close(this.db.db))}},Mb=class extends fm{constructor(e){super();we(this,"sqlite");we(this,"db");this.db=e.db,this.sqlite=e.sqlite}async run(e){const n=this.sqlite.str_new(this.db,e.sql),r=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(n));if(r===null)return[];const a=r.stmt;try{typeof e.param<"u"&&this.sqlite.bind_collection(a,e.param);const c=[];let m=[];for(;await this.sqlite.step(a)===100;){m=m.length===0?this.sqlite.column_names(a):m;const g=this.sqlite.row(a);c.push(m.reduce((N,d,T)=>(N[d]=g[T],N),{}))}return c}finally{await this.sqlite.finalize(a)}}async query(e,n){return await this.run({sql:e,param:n})}async exec(e,n){await this.run({sql:e,param:n});const r=await this.run({sql:"SELECT last_insert_rowid() as id"});return{insertId:BigInt(r[0].id),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ya,wd,Bb=(wd=class extends cm{constructor(e){super();W(this,Ya,void 0);z(this,Ya,e)}createDriver(){return new Lb(i(this,Ya))}},Ya=new WeakMap,wd);function Fb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ub(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var hm={exports:{}};const $b={},Qb=Object.freeze(Object.defineProperty({__proto__:null,default:$b},Symbol.toStringTag,{value:"Module"})),Wu=Ub(Qb);(function(t,e){var n=void 0,r=function(a){return n||(n=new Promise(function(c,m){var g=typeof a<"u"?a:{},N=g.onAbort;g.onAbort=function(o){m(new Error(o)),N&&N(o)},g.postRun=g.postRun||[],g.postRun.push(function(){c(g)}),t=void 0;var d;d||(d=typeof g<"u"?g:{}),d.onRuntimeInitialized=function(){function o(I,J){switch(typeof J){case"boolean":Eu(I,J?1:0);break;case"number":_u(I,J);break;case"string":ta(I,J,-1,-1);break;case"object":if(J===null)ea(I);else if(J.length!=null){var s=Is(J);xu(I,s,J.length,-1),Ai(s)}else Di(I,"Wrong API use : tried to return a value of an unknown type ("+J+").",-1);break;default:ea(I)}}function l(I,J){for(var s=[],u=0;u<I;u+=1){var f=K(J+4*u,"i32"),y=Zo(f);if(y===1||y===2)f=vu(f);else if(y===3)f=bu(f);else if(y===4){y=f,f=gu(y),y=Nu(y);for(var _=new Uint8Array(f),k=0;k<f;k+=1)_[k]=pe[y+k];f=_}else f=null;s.push(f)}return s}function h(I,J){this.La=I,this.db=J,this.Ja=1,this.fb=[]}function w(I,J){if(this.db=J,J=tn(I)+1,this.Ya=ki(J),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");en(I,qe,this.Ya,J),this.eb=this.Ya,this.Ua=this.ib=null}function E(I){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),I!=null){var J=this.filename,s="/",u=J;if(s&&(s=typeof s=="string"?s:gi(s),u=J?ue(s+"/"+J):s),J=rn(!0,!0),u=Ni(u,(J!==void 0?J:438)&4095|32768,0),I){if(typeof I=="string"){s=Array(I.length);for(var f=0,y=I.length;f<y;++f)s[f]=I.charCodeAt(f);I=s}Ns(u,J|146),s=tr(u,577),nr(s,I,0,I.length,0),Qe(s),Ns(u,J)}}this.handleError(ye(this.filename,D)),this.db=K(D,"i32"),Ss(this.db),this.Za={},this.Na={}}var D=Bn(4),U=d.cwrap,ye=U("sqlite3_open","number",["string","number"]),Pe=U("sqlite3_close_v2","number",["number"]),Ae=U("sqlite3_exec","number",["number","string","number","number","number"]),it=U("sqlite3_changes","number",["number"]),In=U("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Jo=U("sqlite3_sql","string",["number"]),Go=U("sqlite3_normalized_sql","string",["number"]),Ri=U("sqlite3_prepare_v2","number",["number","number","number","number","number"]),yl=U("sqlite3_bind_text","number",["number","number","number","number","number"]),Fn=U("sqlite3_bind_blob","number",["number","number","number","number","number"]),Tn=U("sqlite3_bind_double","number",["number","number","number"]),lu=U("sqlite3_bind_int","number",["number","number","number"]),Ts=U("sqlite3_bind_parameter_index","number",["number","string"]),fu=U("sqlite3_step","number",["number"]),hu=U("sqlite3_errmsg","string",["number"]),wl=U("sqlite3_column_count","number",["number"]),Yo=U("sqlite3_data_count","number",["number"]),gl=U("sqlite3_column_double","number",["number","number"]),du=U("sqlite3_column_text","string",["number","number"]),bl=U("sqlite3_column_blob","number",["number","number"]),pu=U("sqlite3_column_bytes","number",["number","number"]),mu=U("sqlite3_column_type","number",["number","number"]),yu=U("sqlite3_column_name","string",["number","number"]),Sn=U("sqlite3_reset","number",["number"]),wu=U("sqlite3_clear_bindings","number",["number"]),Nl=U("sqlite3_finalize","number",["number"]),Xo=U("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Zo=U("sqlite3_value_type","number",["number"]),gu=U("sqlite3_value_bytes","number",["number"]),bu=U("sqlite3_value_text","string",["number"]),Nu=U("sqlite3_value_blob","number",["number"]),vu=U("sqlite3_value_double","number",["number"]),_u=U("sqlite3_result_double","",["number","number"]),ea=U("sqlite3_result_null","",["number"]),ta=U("sqlite3_result_text","",["number","string","number","number"]),xu=U("sqlite3_result_blob","",["number","number","number","number"]),Eu=U("sqlite3_result_int","",["number","number"]),Di=U("sqlite3_result_error","",["number","string","number"]),na=U("sqlite3_aggregate_context","number",["number","number"]),Ss=U("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(I){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(I)?this.xb(I):I!=null&&typeof I=="object"?this.yb(I):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var I=fu(this.La);switch(I){case 100:return!0;case 101:return!1;default:throw this.db.handleError(I)}},h.prototype.sb=function(I){return I==null&&(I=this.Ja,this.Ja+=1),gl(this.La,I)},h.prototype.Cb=function(I){if(I==null&&(I=this.Ja,this.Ja+=1),I=du(this.La,I),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(I)},h.prototype.Db=function(I){return I==null&&(I=this.Ja,this.Ja+=1),du(this.La,I)},h.prototype.getBlob=function(I){I==null&&(I=this.Ja,this.Ja+=1);var J=pu(this.La,I);I=bl(this.La,I);for(var s=new Uint8Array(J),u=0;u<J;u+=1)s[u]=pe[I+u];return s},h.prototype.get=function(I,J){J=J||{},I!=null&&this.bind(I)&&this.step(),I=[];for(var s=Yo(this.La),u=0;u<s;u+=1)switch(mu(this.La,u)){case 1:var f=J.useBigInt?this.Cb(u):this.sb(u);I.push(f);break;case 2:I.push(this.sb(u));break;case 3:I.push(this.Db(u));break;case 4:I.push(this.getBlob(u));break;default:I.push(null)}return I},h.prototype.getColumnNames=function(){for(var I=[],J=wl(this.La),s=0;s<J;s+=1)I.push(yu(this.La,s));return I},h.prototype.getAsObject=function(I,J){I=this.get(I,J),J=this.getColumnNames();for(var s={},u=0;u<J.length;u+=1)s[J[u]]=I[u];return s},h.prototype.getSQL=function(){return Jo(this.La)},h.prototype.getNormalizedSQL=function(){return Go(this.La)},h.prototype.run=function(I){return I!=null&&this.bind(I),this.step(),this.reset()},h.prototype.nb=function(I,J){J==null&&(J=this.Ja,this.Ja+=1),I=tt(I);var s=Is(I);this.fb.push(s),this.db.handleError(yl(this.La,J,s,I.length-1,0))},h.prototype.wb=function(I,J){J==null&&(J=this.Ja,this.Ja+=1);var s=Is(I);this.fb.push(s),this.db.handleError(Fn(this.La,J,s,I.length,0))},h.prototype.mb=function(I,J){J==null&&(J=this.Ja,this.Ja+=1),this.db.handleError((I===(I|0)?lu:Tn)(this.La,J,I))},h.prototype.zb=function(I){I==null&&(I=this.Ja,this.Ja+=1),Fn(this.La,I,0,0,0)},h.prototype.ob=function(I,J){switch(J==null&&(J=this.Ja,this.Ja+=1),typeof I){case"string":this.nb(I,J);return;case"number":this.mb(I,J);return;case"bigint":this.nb(I.toString(),J);return;case"boolean":this.mb(I+0,J);return;case"object":if(I===null){this.zb(J);return}if(I.length!=null){this.wb(I,J);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+I+")."},h.prototype.yb=function(I){var J=this;return Object.keys(I).forEach(function(s){var u=Ts(J.La,s);u!==0&&J.ob(I[s],u)}),!0},h.prototype.xb=function(I){for(var J=0;J<I.length;J+=1)this.ob(I[J],J+1);return!0},h.prototype.reset=function(){return this.freemem(),wu(this.La)===0&&Sn(this.La)===0},h.prototype.freemem=function(){for(var I;(I=this.fb.pop())!==void 0;)Ai(I)},h.prototype.free=function(){this.freemem();var I=Nl(this.La)===0;return delete this.db.Za[this.La],this.La=0,I},w.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var I=Ur(),J=Bn(4);ce(D),ce(J);try{this.db.handleError(Ri(this.db.db,this.eb,-1,D,J)),this.eb=K(J,"i32");var s=K(D,"i32");return s===0?(this.gb(),{done:!0}):(this.Ua=new h(s,this.db),this.db.Za[s]=this.Ua,{value:this.Ua,done:!1})}catch(u){throw this.ib=et(this.eb),this.gb(),u}finally{$r(I)}},w.prototype.gb=function(){Ai(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:et(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(w.prototype[Symbol.iterator]=function(){return this}),E.prototype.run=function(I,J){if(!this.db)throw"Database closed";if(J){I=this.prepare(I,J);try{I.step()}finally{I.free()}}else this.handleError(Ae(this.db,I,0,0,D));return this},E.prototype.exec=function(I,J,s){if(!this.db)throw"Database closed";var u=Ur(),f=null;try{var y=tn(I)+1,_=Bn(y);en(I,pe,_,y);var k=_,S=Bn(4);for(I=[];K(k,"i8")!==0;){ce(D),ce(S),this.handleError(Ri(this.db,k,-1,D,S));var j=K(D,"i32");if(k=K(S,"i32"),j!==0){for(y=null,f=new h(j,this),J!=null&&f.bind(J);f.step();)y===null&&(y={columns:f.getColumnNames(),values:[]},I.push(y)),y.values.push(f.get(null,s));f.free()}}return I}catch(L){throw f&&f.free(),L}finally{$r(u)}},E.prototype.each=function(I,J,s,u,f){typeof J=="function"&&(u=s,s=J,J=void 0),I=this.prepare(I,J);try{for(;I.step();)s(I.getAsObject(null,f))}finally{I.free()}if(typeof u=="function")return u()},E.prototype.prepare=function(I,J){if(ce(D),this.handleError(In(this.db,I,-1,D,0)),I=K(D,"i32"),I===0)throw"Nothing to prepare";var s=new h(I,this);return J!=null&&s.bind(J),this.Za[I]=s},E.prototype.iterateStatements=function(I){return new w(I,this)},E.prototype.export=function(){Object.values(this.Za).forEach(function(J){J.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db));var I=vs(this.filename);return this.handleError(ye(this.filename,D)),this.db=K(D,"i32"),I},E.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(I){I.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db)),_i("/"+this.filename),this.db=null)},E.prototype.handleError=function(I){if(I===0)return null;throw I=hu(this.db),Error(I)},E.prototype.getRowsModified=function(){return it(this.db)},E.prototype.create_function=function(I,J){Object.prototype.hasOwnProperty.call(this.Na,I)&&(Fr(this.Na[I]),delete this.Na[I]);var s=Cs(function(u,f,y){f=l(f,y);try{var _=J.apply(null,f)}catch(k){Di(u,k,-1);return}o(u,_)},"viii");return this.Na[I]=s,this.handleError(Xo(this.db,I,J.length,1,0,s,0,0,0)),this},E.prototype.create_aggregate=function(I,J){var s=J.init||function(){return null},u=J.finalize||function(S){return S},f=J.step;if(!f)throw"An aggregate function must have a step function in "+I;var y={};Object.hasOwnProperty.call(this.Na,I)&&(Fr(this.Na[I]),delete this.Na[I]),J=I+"__finalize",Object.hasOwnProperty.call(this.Na,J)&&(Fr(this.Na[J]),delete this.Na[J]);var _=Cs(function(S,j,L){var B=na(S,1);Object.hasOwnProperty.call(y,B)||(y[B]=s()),j=l(j,L),j=[y[B]].concat(j);try{y[B]=f.apply(null,j)}catch(ie){delete y[B],Di(S,ie,-1)}},"viii"),k=Cs(function(S){var j=na(S,1);try{var L=u(y[j])}catch(B){delete y[j],Di(S,B,-1);return}o(S,L),delete y[j]},"vi");return this.Na[I]=_,this.Na[J]=k,this.handleError(Xo(this.db,I,f.length-1,1,0,0,_,k,0)),this},d.Database=E};var T=Object.assign({},d),P="./this.program",G=typeof window=="object",ne=typeof importScripts=="function",X=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",O,v,C,R,F,_e;X?(b=ne?Wu.dirname(b)+"/":__dirname+"/",_e=()=>{F||(R=Wu,F=Wu)},O=function(o,l){return _e(),o=F.normalize(o),R.readFileSync(o,l?void 0:"utf8")},C=o=>(o=O(o,!0),o.buffer||(o=new Uint8Array(o)),o),v=(o,l,h)=>{_e(),o=F.normalize(o),R.readFile(o,function(w,E){w?h(w):l(E.buffer)})},1<process.argv.length&&(P=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=function(){return"[Emscripten Module object]"}):(G||ne)&&(ne?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",O=o=>{var l=new XMLHttpRequest;return l.open("GET",o,!1),l.send(null),l.responseText},ne&&(C=o=>{var l=new XMLHttpRequest;return l.open("GET",o,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),v=(o,l,h)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?l(w.response):h()},w.onerror=h,w.send(null)});var ae=d.print||console.log.bind(console),ge=d.printErr||console.warn.bind(console);Object.assign(d,T),T=null,d.thisProgram&&(P=d.thisProgram);var Tt;d.wasmBinary&&(Tt=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var Wn,pn=!1,Rn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function mn(o,l,h){var w=l+h;for(h=l;o[h]&&!(h>=w);)++h;if(16<h-l&&o.buffer&&Rn)return Rn.decode(o.subarray(l,h));for(w="";l<h;){var E=o[l++];if(E&128){var D=o[l++]&63;if((E&224)==192)w+=String.fromCharCode((E&31)<<6|D);else{var U=o[l++]&63;E=(E&240)==224?(E&15)<<12|D<<6|U:(E&7)<<18|D<<12|U<<6|o[l++]&63,65536>E?w+=String.fromCharCode(E):(E-=65536,w+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else w+=String.fromCharCode(E)}return w}function et(o,l){return o?mn(qe,o,l):""}function en(o,l,h,w){if(!(0<w))return 0;var E=h;w=h+w-1;for(var D=0;D<o.length;++D){var U=o.charCodeAt(D);if(55296<=U&&57343>=U){var ye=o.charCodeAt(++D);U=65536+((U&1023)<<10)|ye&1023}if(127>=U){if(h>=w)break;l[h++]=U}else{if(2047>=U){if(h+1>=w)break;l[h++]=192|U>>6}else{if(65535>=U){if(h+2>=w)break;l[h++]=224|U>>12}else{if(h+3>=w)break;l[h++]=240|U>>18,l[h++]=128|U>>12&63}l[h++]=128|U>>6&63}l[h++]=128|U&63}}return l[h]=0,h-E}function tn(o){for(var l=0,h=0;h<o.length;++h){var w=o.charCodeAt(h);127>=w?l++:2047>=w?l+=2:55296<=w&&57343>=w?(l+=4,++h):l+=3}return l}var ft,pe,qe,rt,de,ke,St,br;function ds(){var o=Wn.buffer;ft=o,d.HEAP8=pe=new Int8Array(o),d.HEAP16=rt=new Int16Array(o),d.HEAP32=de=new Int32Array(o),d.HEAPU8=qe=new Uint8Array(o),d.HEAPU16=new Uint16Array(o),d.HEAPU32=ke=new Uint32Array(o),d.HEAPF32=St=new Float32Array(o),d.HEAPF64=br=new Float64Array(o)}var yn,nn=[],fe=[],Me=[];function Dn(){var o=d.preRun.shift();nn.unshift(o)}var Bt=0,ze=null;function x(o){throw d.onAbort&&d.onAbort(o),o="Aborted("+o+")",ge(o),pn=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}function q(){return A.startsWith("data:application/octet-stream;base64,")}var A;if(A="sql-wasm.wasm",!q()){var M=A;A=d.locateFile?d.locateFile(M,b):b+M}function H(){var o=A;try{if(o==A&&Tt)return new Uint8Array(Tt);if(C)return C(o);throw"both async and sync fetching of the wasm failed"}catch(l){x(l)}}function ee(){if(!Tt&&(G||ne)){if(typeof fetch=="function"&&!A.startsWith("file://"))return fetch(A,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+A+"'";return o.arrayBuffer()}).catch(function(){return H()});if(v)return new Promise(function(o,l){v(A,function(h){o(new Uint8Array(h))},l)})}return Promise.resolve().then(function(){return H()})}var $,V;function re(o){for(;0<o.length;)o.shift()(d)}function K(o,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":return pe[o>>0];case"i8":return pe[o>>0];case"i16":return rt[o>>1];case"i32":return de[o>>2];case"i64":return de[o>>2];case"float":return St[o>>2];case"double":return br[o>>3];case"*":return ke[o>>2];default:x("invalid type for getValue: "+l)}return null}function ce(o){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":pe[o>>0]=0;break;case"i8":pe[o>>0]=0;break;case"i16":rt[o>>1]=0;break;case"i32":de[o>>2]=0;break;case"i64":V=[0,($=0,1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[o>>2]=V[0],de[o+4>>2]=V[1];break;case"float":St[o>>2]=0;break;case"double":br[o>>3]=0;break;case"*":ke[o>>2]=0;break;default:x("invalid type for setValue: "+l)}}var oe=(o,l)=>{for(var h=0,w=o.length-1;0<=w;w--){var E=o[w];E==="."?o.splice(w,1):E===".."?(o.splice(w,1),h++):h&&(o.splice(w,1),h--)}if(l)for(;h;h--)o.unshift("..");return o},ue=o=>{var l=o.charAt(0)==="/",h=o.substr(-1)==="/";return(o=oe(o.split("/").filter(w=>!!w),!l).join("/"))||l||(o="."),o&&h&&(o+="/"),(l?"/":"")+o},me=o=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=l[0],l=l[1],!o&&!l?".":(l&&(l=l.substr(0,l.length-1)),o+l)},xe=o=>{if(o==="/")return"/";o=ue(o),o=o.replace(/\/$/,"");var l=o.lastIndexOf("/");return l===-1?o:o.substr(l+1)};function $e(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var o=new Uint8Array(1);return()=>(crypto.getRandomValues(o),o[0])}if(X)try{var l=Wu;return()=>l.randomBytes(1)[0]}catch{}return()=>x("randomDevice")}function Re(){for(var o="",l=!1,h=arguments.length-1;-1<=h&&!l;h--){if(l=0<=h?arguments[h]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";o=l+"/"+o,l=l.charAt(0)==="/"}return o=oe(o.split("/").filter(w=>!!w),!l).join("/"),(l?"/":"")+o||"."}function tt(o,l){var h=Array(tn(o)+1);return o=en(o,h,0,h.length),l&&(h.length=o),h}var he=[];function wn(o,l){he[o]={input:[],output:[],Xa:l},bi(o,wi)}var wi={open:function(o){var l=he[o.node.rdev];if(!l)throw new Q(43);o.tty=l,o.seekable=!1},close:function(o){o.tty.Xa.fsync(o.tty)},fsync:function(o){o.tty.Xa.fsync(o.tty)},read:function(o,l,h,w){if(!o.tty||!o.tty.Xa.tb)throw new Q(60);for(var E=0,D=0;D<w;D++){try{var U=o.tty.Xa.tb(o.tty)}catch{throw new Q(29)}if(U===void 0&&E===0)throw new Q(6);if(U==null)break;E++,l[h+D]=U}return E&&(o.node.timestamp=Date.now()),E},write:function(o,l,h,w){if(!o.tty||!o.tty.Xa.jb)throw new Q(60);try{for(var E=0;E<w;E++)o.tty.Xa.jb(o.tty,l[h+E])}catch{throw new Q(29)}return w&&(o.node.timestamp=Date.now()),E}},Ft={tb:function(o){if(!o.input.length){var l=null;if(X){var h=Buffer.alloc(256),w=0;try{w=R.readSync(process.stdin.fd,h,0,256,-1)}catch(E){if(E.toString().includes("EOF"))w=0;else throw E}0<w?l=h.slice(0,w).toString("utf-8"):l=null}else typeof window<"u"&&typeof window.prompt=="function"?(l=window.prompt("Input: "),l!==null&&(l+=`
`)):typeof readline=="function"&&(l=readline(),l!==null&&(l+=`
`));if(!l)return null;o.input=tt(l,!0)}return o.input.shift()},jb:function(o,l){l===null||l===10?(ae(mn(o.output,0)),o.output=[]):l!=0&&o.output.push(l)},fsync:function(o){o.output&&0<o.output.length&&(ae(mn(o.output,0)),o.output=[])}},ps={jb:function(o,l){l===null||l===10?(ge(mn(o.output,0)),o.output=[]):l!=0&&o.output.push(l)},fsync:function(o){o.output&&0<o.output.length&&(ge(mn(o.output,0)),o.output=[])}},le={Qa:null,Ra:function(){return le.createNode(null,"/",16895,0)},createNode:function(o,l,h,w){if((h&61440)===24576||(h&61440)===4096)throw new Q(63);return le.Qa||(le.Qa={dir:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,lookup:le.Ga.lookup,ab:le.Ga.ab,rename:le.Ga.rename,unlink:le.Ga.unlink,rmdir:le.Ga.rmdir,readdir:le.Ga.readdir,symlink:le.Ga.symlink},stream:{Ta:le.Ha.Ta}},file:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:{Ta:le.Ha.Ta,read:le.Ha.read,write:le.Ha.write,lb:le.Ha.lb,bb:le.Ha.bb,cb:le.Ha.cb}},link:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,readlink:le.Ga.readlink},stream:{}},pb:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:gs}}),h=Ro(o,l,h,w),(h.mode&61440)===16384?(h.Ga=le.Qa.dir.node,h.Ha=le.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=le.Qa.file.node,h.Ha=le.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=le.Qa.link.node,h.Ha=le.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=le.Qa.pb.node,h.Ha=le.Qa.pb.stream),h.timestamp=Date.now(),o&&(o.Ia[l]=h,o.timestamp=h.timestamp),h},Jb:function(o){return o.Ia?o.Ia.subarray?o.Ia.subarray(0,o.Ma):new Uint8Array(o.Ia):new Uint8Array(0)},qb:function(o,l){var h=o.Ia?o.Ia.length:0;h>=l||(l=Math.max(l,h*(1048576>h?2:1.125)>>>0),h!=0&&(l=Math.max(l,256)),h=o.Ia,o.Ia=new Uint8Array(l),0<o.Ma&&o.Ia.set(h.subarray(0,o.Ma),0))},Gb:function(o,l){if(o.Ma!=l)if(l==0)o.Ia=null,o.Ma=0;else{var h=o.Ia;o.Ia=new Uint8Array(l),h&&o.Ia.set(h.subarray(0,Math.min(l,o.Ma))),o.Ma=l}},Ga:{Pa:function(o){var l={};return l.dev=(o.mode&61440)===8192?o.id:1,l.ino=o.id,l.mode=o.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=o.rdev,(o.mode&61440)===16384?l.size=4096:(o.mode&61440)===32768?l.size=o.Ma:(o.mode&61440)===40960?l.size=o.link.length:l.size=0,l.atime=new Date(o.timestamp),l.mtime=new Date(o.timestamp),l.ctime=new Date(o.timestamp),l.Ab=4096,l.blocks=Math.ceil(l.size/l.Ab),l},Oa:function(o,l){l.mode!==void 0&&(o.mode=l.mode),l.timestamp!==void 0&&(o.timestamp=l.timestamp),l.size!==void 0&&le.Gb(o,l.size)},lookup:function(){throw Pn[44]},ab:function(o,l,h,w){return le.createNode(o,l,h,w)},rename:function(o,l,h){if((o.mode&61440)===16384){try{var w=er(l,h)}catch{}if(w)for(var E in w.Ia)throw new Q(55)}delete o.parent.Ia[o.name],o.parent.timestamp=Date.now(),o.name=h,l.Ia[h]=o,l.timestamp=o.parent.timestamp,o.parent=l},unlink:function(o,l){delete o.Ia[l],o.timestamp=Date.now()},rmdir:function(o,l){var h=er(o,l),w;for(w in h.Ia)throw new Q(55);delete o.Ia[l],o.timestamp=Date.now()},readdir:function(o){var l=[".",".."],h;for(h in o.Ia)o.Ia.hasOwnProperty(h)&&l.push(h);return l},symlink:function(o,l,h){return o=le.createNode(o,l,41471,0),o.link=h,o},readlink:function(o){if((o.mode&61440)!==40960)throw new Q(28);return o.link}},Ha:{read:function(o,l,h,w,E){var D=o.node.Ia;if(E>=o.node.Ma)return 0;if(o=Math.min(o.node.Ma-E,w),8<o&&D.subarray)l.set(D.subarray(E,E+o),h);else for(w=0;w<o;w++)l[h+w]=D[E+w];return o},write:function(o,l,h,w,E,D){if(l.buffer===pe.buffer&&(D=!1),!w)return 0;if(o=o.node,o.timestamp=Date.now(),l.subarray&&(!o.Ia||o.Ia.subarray)){if(D)return o.Ia=l.subarray(h,h+w),o.Ma=w;if(o.Ma===0&&E===0)return o.Ia=l.slice(h,h+w),o.Ma=w;if(E+w<=o.Ma)return o.Ia.set(l.subarray(h,h+w),E),w}if(le.qb(o,E+w),o.Ia.subarray&&l.subarray)o.Ia.set(l.subarray(h,h+w),E);else for(D=0;D<w;D++)o.Ia[E+D]=l[h+D];return o.Ma=Math.max(o.Ma,E+w),w},Ta:function(o,l,h){if(h===1?l+=o.position:h===2&&(o.node.mode&61440)===32768&&(l+=o.node.Ma),0>l)throw new Q(28);return l},lb:function(o,l,h){le.qb(o.node,l+h),o.node.Ma=Math.max(o.node.Ma,l+h)},bb:function(o,l,h,w,E){if((o.node.mode&61440)!==32768)throw new Q(43);if(o=o.node.Ia,E&2||o.buffer!==ft){if((0<h||h+l<o.length)&&(o.subarray?o=o.subarray(h,h+l):o=Array.prototype.slice.call(o,h,h+l)),h=!0,l=65536*Math.ceil(l/65536),(E=Ho(65536,l))?(qe.fill(0,E,E+l),l=E):l=0,!l)throw new Q(48);pe.set(o,l)}else h=!1,l=o.byteOffset;return{Fb:l,vb:h}},cb:function(o,l,h,w,E){if((o.node.mode&61440)!==32768)throw new Q(43);return E&2||le.Ha.write(o,l,0,w,h,!1),0}}},kt=null,te={},qn=[],Ut=1,gn=null,ms=!0,Q=null,Pn={},At=(o,l={})=>{if(o=Re("/",o),!o)return{path:"",node:null};if(l=Object.assign({rb:!0,kb:0},l),8<l.kb)throw new Q(32);o=oe(o.split("/").filter(U=>!!U),!1);for(var h=kt,w="/",E=0;E<o.length;E++){var D=E===o.length-1;if(D&&l.parent)break;if(h=er(h,o[E]),w=ue(w+"/"+o[E]),h.Va&&(!D||D&&l.rb)&&(h=h.Va.root),!D||l.Sa){for(D=0;(h.mode&61440)===40960;)if(h=Fo(w),w=Re(me(w),h),h=At(w,{kb:l.kb+1}).node,40<D++)throw new Q(32)}}return{path:w,node:h}},gi=o=>{for(var l;;){if(o===o.parent)return o=o.Ra.ub,l?o[o.length-1]!=="/"?o+"/"+l:o+l:o;l=l?o.name+"/"+l:o.name,o=o.parent}},ys=(o,l)=>{for(var h=0,w=0;w<l.length;w++)h=(h<<5)-h+l.charCodeAt(w)|0;return(o+h>>>0)%gn.length},Nr=o=>{var l=ys(o.parent.id,o.name);if(gn[l]===o)gn[l]=o.Wa;else for(l=gn[l];l;){if(l.Wa===o){l.Wa=o.Wa;break}l=l.Wa}},er=(o,l)=>{var h;if(h=(h=Dr(o,"x"))?h:o.Ga.lookup?0:2)throw new Q(h,o);for(h=gn[ys(o.id,l)];h;h=h.Wa){var w=h.name;if(h.parent.id===o.id&&w===l)return h}return o.Ga.lookup(o,l)},Ro=(o,l,h,w)=>(o=new zo(o,l,h,w),l=ys(o.parent.id,o.name),o.Wa=gn[l],gn[l]=o),ml={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Do=o=>{var l=["r","w","rw"][o&3];return o&512&&(l+="w"),l},Dr=(o,l)=>{if(ms)return 0;if(!l.includes("r")||o.mode&292){if(l.includes("w")&&!(o.mode&146)||l.includes("x")&&!(o.mode&73))return 2}else return 2;return 0},ws=(o,l)=>{try{return er(o,l),20}catch{}return Dr(o,"wx")},Po=(o,l,h)=>{try{var w=er(o,l)}catch(E){return E.Ka}if(o=Dr(o,"wx"))return o;if(h){if((w.mode&61440)!==16384)return 54;if(w===w.parent||gi(w)==="/")return 10}else if((w.mode&61440)===16384)return 31;return 0},Lo=(o=0)=>{for(;4096>=o;o++)if(!qn[o])return o;throw new Q(33)},bn=(o,l)=>(Ci||(Ci=function(){this.$a={}},Ci.prototype={},Object.defineProperties(Ci.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},flags:{get:function(){return this.$a.flags},set:function(h){this.$a.flags=h}},position:{get:function(){return this.$a.position},set:function(h){this.$a.position=h}}})),o=Object.assign(new Ci,o),l=Lo(l),o.fd=l,qn[l]=o),gs={open:o=>{o.Ha=te[o.node.rdev].Ha,o.Ha.open&&o.Ha.open(o)},Ta:()=>{throw new Q(70)}},bi=(o,l)=>{te[o]={Ha:l}},Mo=(o,l)=>{var h=l==="/",w=!l;if(h&&kt)throw new Q(10);if(!h&&!w){var E=At(l,{rb:!1});if(l=E.path,E=E.node,E.Va)throw new Q(10);if((E.mode&61440)!==16384)throw new Q(54)}l={type:o,Kb:{},ub:l,Eb:[]},o=o.Ra(l),o.Ra=l,l.root=o,h?kt=o:E&&(E.Va=l,E.Ra&&E.Ra.Eb.push(l))},Ni=(o,l,h)=>{var w=At(o,{parent:!0}).node;if(o=xe(o),!o||o==="."||o==="..")throw new Q(28);var E=ws(w,o);if(E)throw new Q(E);if(!w.Ga.ab)throw new Q(63);return w.Ga.ab(w,o,l,h)},Kt=(o,l)=>Ni(o,(l!==void 0?l:511)&1023|16384,0),vi=(o,l,h)=>{typeof h>"u"&&(h=l,l=438),Ni(o,l|8192,h)},bs=(o,l)=>{if(!Re(o))throw new Q(44);var h=At(l,{parent:!0}).node;if(!h)throw new Q(44);l=xe(l);var w=ws(h,l);if(w)throw new Q(w);if(!h.Ga.symlink)throw new Q(63);h.Ga.symlink(h,l,o)},Bo=o=>{var l=At(o,{parent:!0}).node;o=xe(o);var h=er(l,o),w=Po(l,o,!0);if(w)throw new Q(w);if(!l.Ga.rmdir)throw new Q(63);if(h.Va)throw new Q(10);l.Ga.rmdir(l,o),Nr(h)},_i=o=>{var l=At(o,{parent:!0}).node;if(!l)throw new Q(44);o=xe(o);var h=er(l,o),w=Po(l,o,!1);if(w)throw new Q(w);if(!l.Ga.unlink)throw new Q(63);if(h.Va)throw new Q(10);l.Ga.unlink(l,o),Nr(h)},Fo=o=>{if(o=At(o).node,!o)throw new Q(44);if(!o.Ga.readlink)throw new Q(28);return Re(gi(o.parent),o.Ga.readlink(o))},Pr=(o,l)=>{if(o=At(o,{Sa:!l}).node,!o)throw new Q(44);if(!o.Ga.Pa)throw new Q(63);return o.Ga.Pa(o)},Uo=o=>Pr(o,!0),Ns=(o,l)=>{if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new Q(63);o.Ga.Oa(o,{mode:l&4095|o.mode&-4096,timestamp:Date.now()})},Lr=(o,l)=>{if(0>l)throw new Q(28);if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new Q(63);if((o.mode&61440)===16384)throw new Q(31);if((o.mode&61440)!==32768)throw new Q(28);var h=Dr(o,"w");if(h)throw new Q(h);o.Ga.Oa(o,{size:l,timestamp:Date.now()})},tr=(o,l,h)=>{if(o==="")throw new Q(44);if(typeof l=="string"){var w=ml[l];if(typeof w>"u")throw Error("Unknown file open mode: "+l);l=w}if(h=l&64?(typeof h>"u"?438:h)&4095|32768:0,typeof o=="object")var E=o;else{o=ue(o);try{E=At(o,{Sa:!(l&131072)}).node}catch{}}if(w=!1,l&64)if(E){if(l&128)throw new Q(20)}else E=Ni(o,h,0),w=!0;if(!E)throw new Q(44);if((E.mode&61440)===8192&&(l&=-513),l&65536&&(E.mode&61440)!==16384)throw new Q(54);if(!w&&(h=E?(E.mode&61440)===40960?32:(E.mode&61440)===16384&&(Do(l)!=="r"||l&512)?31:Dr(E,Do(l)):44))throw new Q(h);return l&512&&!w&&Lr(E,0),l&=-131713,E=bn({node:E,path:gi(E),flags:l,seekable:!0,position:0,Ha:E.Ha,Ib:[],error:!1}),E.Ha.open&&E.Ha.open(E),!d.logReadFiles||l&1||(Ii||(Ii={}),o in Ii||(Ii[o]=1)),E},Qe=o=>{if(o.fd===null)throw new Q(8);o.hb&&(o.hb=null);try{o.Ha.close&&o.Ha.close(o)}catch(l){throw l}finally{qn[o.fd]=null}o.fd=null},Mr=(o,l,h)=>{if(o.fd===null)throw new Q(8);if(!o.seekable||!o.Ha.Ta)throw new Q(70);if(h!=0&&h!=1&&h!=2)throw new Q(28);o.position=o.Ha.Ta(o,l,h),o.Ib=[]},xi=(o,l,h,w,E)=>{if(0>w||0>E)throw new Q(28);if(o.fd===null)throw new Q(8);if((o.flags&2097155)===1)throw new Q(8);if((o.node.mode&61440)===16384)throw new Q(31);if(!o.Ha.read)throw new Q(28);var D=typeof E<"u";if(!D)E=o.position;else if(!o.seekable)throw new Q(70);return l=o.Ha.read(o,l,h,w,E),D||(o.position+=l),l},nr=(o,l,h,w,E)=>{if(0>w||0>E)throw new Q(28);if(o.fd===null)throw new Q(8);if(!(o.flags&2097155))throw new Q(8);if((o.node.mode&61440)===16384)throw new Q(31);if(!o.Ha.write)throw new Q(28);o.seekable&&o.flags&1024&&Mr(o,0,2);var D=typeof E<"u";if(!D)E=o.position;else if(!o.seekable)throw new Q(70);return l=o.Ha.write(o,l,h,w,E,void 0),D||(o.position+=l),l},vs=o=>{var l,h=tr(o,h||0);o=Pr(o).size;var w=new Uint8Array(o);return xi(h,w,0,o,0),l=w,Qe(h),l},Ei=()=>{Q||(Q=function(o,l){this.node=l,this.Hb=function(h){this.Ka=h},this.Hb(o),this.message="FS error"},Q.prototype=Error(),Q.prototype.constructor=Q,[44].forEach(o=>{Pn[o]=new Q(o),Pn[o].stack="<generic error, no stack>"}))},Oi,rn=(o,l)=>{var h=0;return o&&(h|=365),l&&(h|=146),h},Cn=(o,l,h)=>{o=ue("/dev/"+o);var w=rn(!!l,!!h);qi||(qi=64);var E=qi++<<8|0;bi(E,{open:D=>{D.seekable=!1},close:()=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(D,U,ye,Pe)=>{for(var Ae=0,it=0;it<Pe;it++){try{var In=l()}catch{throw new Q(29)}if(In===void 0&&Ae===0)throw new Q(6);if(In==null)break;Ae++,U[ye+it]=In}return Ae&&(D.node.timestamp=Date.now()),Ae},write:(D,U,ye,Pe)=>{for(var Ae=0;Ae<Pe;Ae++)try{h(U[ye+Ae])}catch{throw new Q(29)}return Pe&&(D.node.timestamp=Date.now()),Ae}}),vi(o,w,E)},qi,Ke={},Ci,Ii;function Ln(o,l,h){if(l.charAt(0)==="/")return l;if(o=o===-100?"/":sn(o).path,l.length==0){if(!h)throw new Q(44);return o}return ue(o+"/"+l)}function Ti(o,l,h){try{var w=o(l)}catch(E){if(E&&E.node&&ue(l)!==ue(gi(E.node)))return-54;throw E}return de[h>>2]=w.dev,de[h+8>>2]=w.ino,de[h+12>>2]=w.mode,ke[h+16>>2]=w.nlink,de[h+20>>2]=w.uid,de[h+24>>2]=w.gid,de[h+28>>2]=w.rdev,V=[w.size>>>0,($=w.size,1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[h+40>>2]=V[0],de[h+44>>2]=V[1],de[h+48>>2]=4096,de[h+52>>2]=w.blocks,V=[Math.floor(w.atime.getTime()/1e3)>>>0,($=Math.floor(w.atime.getTime()/1e3),1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[h+56>>2]=V[0],de[h+60>>2]=V[1],ke[h+64>>2]=0,V=[Math.floor(w.mtime.getTime()/1e3)>>>0,($=Math.floor(w.mtime.getTime()/1e3),1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[h+72>>2]=V[0],de[h+76>>2]=V[1],ke[h+80>>2]=0,V=[Math.floor(w.ctime.getTime()/1e3)>>>0,($=Math.floor(w.ctime.getTime()/1e3),1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[h+88>>2]=V[0],de[h+92>>2]=V[1],ke[h+96>>2]=0,V=[w.ino>>>0,($=w.ino,1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[h+104>>2]=V[0],de[h+108>>2]=V[1],0}var Br=void 0;function Si(){return Br+=4,de[Br-4>>2]}function sn(o){if(o=qn[o],!o)throw new Q(8);return o}function _s(o){return ke[o>>2]+4294967296*de[o+4>>2]}function $o(o){var l=tn(o)+1,h=ki(l);return h&&en(o,pe,h,l),h}function au(o,l,h){function w(Pe){return(Pe=Pe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Pe[1]:"GMT"}var E=new Date().getFullYear(),D=new Date(E,0,1),U=new Date(E,6,1);E=D.getTimezoneOffset();var ye=U.getTimezoneOffset();de[o>>2]=60*Math.max(E,ye),de[l>>2]=+(E!=ye),o=w(D),l=w(U),o=$o(o),l=$o(l),ye<E?(ke[h>>2]=o,ke[h+4>>2]=l):(ke[h>>2]=l,ke[h+4>>2]=o)}function xs(o,l,h){xs.Bb||(xs.Bb=!0,au(o,l,h))}var Qo;Qo=X?()=>{var o=process.hrtime();return 1e3*o[0]+o[1]/1e6}:()=>performance.now();var Es={};function jo(){if(!Os){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:P||"./this.program"},l;for(l in Es)Es[l]===void 0?delete o[l]:o[l]=Es[l];var h=[];for(l in o)h.push(l+"="+o[l]);Os=h}return Os}var Os,Mn=void 0,qs=[];function Cs(o,l){if(!Mn){Mn=new WeakMap;var h=yn.length;if(Mn)for(var w=0;w<0+h;w++){var E=yn.get(w);E&&Mn.set(E,w)}}if(Mn.has(o))return Mn.get(o);if(qs.length)h=qs.pop();else{try{yn.grow(1)}catch(ye){throw ye instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ye}h=yn.length-1}try{yn.set(h,o)}catch(ye){if(!(ye instanceof TypeError))throw ye;if(typeof WebAssembly.Function=="function"){w=WebAssembly.Function,E={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var D={parameters:[],results:l[0]=="v"?[]:[E[l[0]]]},U=1;U<l.length;++U)D.parameters.push(E[l[U]]);l=new w(D,o)}else{for(w=[1,96],E=l.slice(0,1),l=l.slice(1),D={i:127,p:127,j:126,f:125,d:124},U=l.length,128>U?w.push(U):w.push(U%128|128,U>>7),U=0;U<l.length;++U)w.push(D[l[U]]);E=="v"?w.push(0):w.push(1,D[E]),l=[0,97,115,109,1,0,0,0,1],E=w.length,128>E?l.push(E):l.push(E%128|128,E>>7),l.push.apply(l,w),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:o}}).exports.f}yn.set(h,l)}return Mn.set(o,h),h}function Fr(o){Mn.delete(yn.get(o)),qs.push(o)}function Is(o){var l=ki(o.length);return o.subarray||o.slice||(o=new Uint8Array(o)),qe.set(o,l),l}function uu(o,l,h,w){var E={string:Ae=>{var it=0;if(Ae!=null&&Ae!==0){var In=(Ae.length<<2)+1;it=Bn(In),en(Ae,qe,it,In)}return it},array:Ae=>{var it=Bn(Ae.length);return pe.set(Ae,it),it}};o=d["_"+o];var D=[],U=0;if(w)for(var ye=0;ye<w.length;ye++){var Pe=E[h[ye]];Pe?(U===0&&(U=Ur()),D[ye]=Pe(w[ye])):D[ye]=w[ye]}return h=o.apply(null,D),h=function(Ae){return U!==0&&$r(U),l==="string"?et(Ae):l==="boolean"?!!Ae:Ae}(h)}function zo(o,l,h,w){o||(o=this),this.parent=o,this.Ra=o.Ra,this.Va=null,this.id=Ut++,this.name=l,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(zo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(o){o?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(o){o?this.mode|=146:this.mode&=-147}}}),Ei(),gn=Array(4096),Mo(le,"/"),Kt("/tmp"),Kt("/home"),Kt("/home/web_user"),(()=>{Kt("/dev"),bi(259,{read:()=>0,write:(l,h,w,E)=>E}),vi("/dev/null",259),wn(1280,Ft),wn(1536,ps),vi("/dev/tty",1280),vi("/dev/tty1",1536);var o=$e();Cn("random",o),Cn("urandom",o),Kt("/dev/shm"),Kt("/dev/shm/tmp")})(),(()=>{Kt("/proc");var o=Kt("/proc/self");Kt("/proc/self/fd"),Mo({Ra:()=>{var l=Ro(o,"fd",16895,73);return l.Ga={lookup:(h,w)=>{var E=qn[+w];if(!E)throw new Q(8);return h={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>E.path}},h.parent=h}},l}},"/proc/self/fd")})();var cu={a:function(o,l,h,w){x("Assertion failed: "+et(o)+", at: "+[l?et(l):"unknown filename",h,w?et(w):"unknown function"])},h:function(o,l){try{return o=et(o),Ns(o,l),0}catch(h){if(typeof Ke>"u"||!(h instanceof Q))throw h;return-h.Ka}},H:function(o,l,h){try{if(l=et(l),l=Ln(o,l),h&-8)return-28;var w=At(l,{Sa:!0}).node;return w?(o="",h&4&&(o+="r"),h&2&&(o+="w"),h&1&&(o+="x"),o&&Dr(w,o)?-2:0):-44}catch(E){if(typeof Ke>"u"||!(E instanceof Q))throw E;return-E.Ka}},i:function(o,l){try{var h=qn[o];if(!h)throw new Q(8);return Ns(h.node,l),0}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return-w.Ka}},g:function(o){try{var l=qn[o];if(!l)throw new Q(8);var h=l.node,w=typeof h=="string"?At(h,{Sa:!0}).node:h;if(!w.Ga.Oa)throw new Q(63);return w.Ga.Oa(w,{timestamp:Date.now()}),0}catch(E){if(typeof Ke>"u"||!(E instanceof Q))throw E;return-E.Ka}},b:function(o,l,h){Br=h;try{var w=sn(o);switch(l){case 0:var E=Si();return 0>E?-28:bn(w,E).fd;case 1:case 2:return 0;case 3:return w.flags;case 4:return E=Si(),w.flags|=E,0;case 5:return E=Si(),rt[E+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return de[Vo()>>2]=28,-1;default:return-28}}catch(D){if(typeof Ke>"u"||!(D instanceof Q))throw D;return-D.Ka}},G:function(o,l){try{var h=sn(o);return Ti(Pr,h.path,l)}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return-w.Ka}},l:function(o,l,h){try{if(l=h+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*h:NaN,isNaN(l))return-61;var w=qn[o];if(!w)throw new Q(8);if(!(w.flags&2097155))throw new Q(28);return Lr(w.node,l),0}catch(E){if(typeof Ke>"u"||!(E instanceof Q))throw E;return-E.Ka}},B:function(o,l){try{if(l===0)return-28;var h=tn("/")+1;return l<h?-68:(en("/",qe,o,l),h)}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return-w.Ka}},E:function(o,l){try{return o=et(o),Ti(Uo,o,l)}catch(h){if(typeof Ke>"u"||!(h instanceof Q))throw h;return-h.Ka}},y:function(o,l,h){try{return l=et(l),l=Ln(o,l),l=ue(l),l[l.length-1]==="/"&&(l=l.substr(0,l.length-1)),Kt(l,h),0}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return-w.Ka}},D:function(o,l,h,w){try{l=et(l);var E=w&256;return l=Ln(o,l,w&4096),Ti(E?Uo:Pr,l,h)}catch(D){if(typeof Ke>"u"||!(D instanceof Q))throw D;return-D.Ka}},v:function(o,l,h,w){Br=w;try{l=et(l),l=Ln(o,l);var E=w?Si():0;return tr(l,h,E).fd}catch(D){if(typeof Ke>"u"||!(D instanceof Q))throw D;return-D.Ka}},t:function(o,l,h,w){try{if(l=et(l),l=Ln(o,l),0>=w)return-28;var E=Fo(l),D=Math.min(w,tn(E)),U=pe[h+D];return en(E,qe,h,w+1),pe[h+D]=U,D}catch(ye){if(typeof Ke>"u"||!(ye instanceof Q))throw ye;return-ye.Ka}},s:function(o){try{return o=et(o),Bo(o),0}catch(l){if(typeof Ke>"u"||!(l instanceof Q))throw l;return-l.Ka}},F:function(o,l){try{return o=et(o),Ti(Pr,o,l)}catch(h){if(typeof Ke>"u"||!(h instanceof Q))throw h;return-h.Ka}},p:function(o,l,h){try{return l=et(l),l=Ln(o,l),h===0?_i(l):h===512?Bo(l):x("Invalid flags passed to unlinkat"),0}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return-w.Ka}},o:function(o,l,h){try{if(l=et(l),l=Ln(o,l,!0),h){var w=_s(h),E=de[h+8>>2];D=1e3*w+E/1e6,h+=16,w=_s(h),E=de[h+8>>2],U=1e3*w+E/1e6}else var D=Date.now(),U=D;o=D;var ye=At(l,{Sa:!0}).node;return ye.Ga.Oa(ye,{timestamp:Math.max(o,U)}),0}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof Q))throw Pe;return-Pe.Ka}},e:function(){return Date.now()},j:function(o,l){o=new Date(1e3*_s(o)),de[l>>2]=o.getSeconds(),de[l+4>>2]=o.getMinutes(),de[l+8>>2]=o.getHours(),de[l+12>>2]=o.getDate(),de[l+16>>2]=o.getMonth(),de[l+20>>2]=o.getFullYear()-1900,de[l+24>>2]=o.getDay();var h=new Date(o.getFullYear(),0,1);de[l+28>>2]=(o.getTime()-h.getTime())/864e5|0,de[l+36>>2]=-(60*o.getTimezoneOffset());var w=new Date(o.getFullYear(),6,1).getTimezoneOffset();h=h.getTimezoneOffset(),de[l+32>>2]=(w!=h&&o.getTimezoneOffset()==Math.min(h,w))|0},w:function(o,l,h,w,E,D){try{var U=sn(w);if(l&2&&!(h&2)&&(U.flags&2097155)!==2)throw new Q(2);if((U.flags&2097155)===1)throw new Q(2);if(!U.Ha.bb)throw new Q(43);var ye=U.Ha.bb(U,o,E,l,h),Pe=ye.Fb;return de[D>>2]=ye.vb,Pe}catch(Ae){if(typeof Ke>"u"||!(Ae instanceof Q))throw Ae;return-Ae.Ka}},x:function(o,l,h,w,E,D){try{var U=sn(E);if(h&2){var ye=qe.slice(o,o+l);U&&U.Ha.cb&&U.Ha.cb(U,ye,D,l,w)}}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof Q))throw Pe;return-Pe.Ka}},n:xs,q:function(){return 2147483648},d:Qo,c:function(o){var l=qe.length;if(o>>>=0,2147483648<o)return!1;for(var h=1;4>=h;h*=2){var w=l*(1+.2/h);w=Math.min(w,o+100663296);var E=Math;w=Math.max(o,w),E=E.min.call(E,2147483648,w+(65536-w%65536)%65536);e:{try{Wn.grow(E-ft.byteLength+65535>>>16),ds();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},z:function(o,l){var h=0;return jo().forEach(function(w,E){var D=l+h;for(E=ke[o+4*E>>2]=D,D=0;D<w.length;++D)pe[E++>>0]=w.charCodeAt(D);pe[E>>0]=0,h+=w.length+1}),0},A:function(o,l){var h=jo();ke[o>>2]=h.length;var w=0;return h.forEach(function(E){w+=E.length+1}),ke[l>>2]=w,0},f:function(o){try{var l=sn(o);return Qe(l),0}catch(h){if(typeof Ke>"u"||!(h instanceof Q))throw h;return h.Ka}},m:function(o,l){try{var h=sn(o);return pe[l>>0]=h.tty?2:(h.mode&61440)===16384?3:(h.mode&61440)===40960?7:4,0}catch(w){if(typeof Ke>"u"||!(w instanceof Q))throw w;return w.Ka}},u:function(o,l,h,w){try{e:{var E=sn(o);o=l;for(var D=l=0;D<h;D++){var U=ke[o>>2],ye=ke[o+4>>2];o+=8;var Pe=xi(E,pe,U,ye);if(0>Pe){var Ae=-1;break e}if(l+=Pe,Pe<ye)break}Ae=l}return ke[w>>2]=Ae,0}catch(it){if(typeof Ke>"u"||!(it instanceof Q))throw it;return it.Ka}},k:function(o,l,h,w,E){try{if(l=h+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*h:NaN,isNaN(l))return 61;var D=sn(o);return Mr(D,l,w),V=[D.position>>>0,($=D.position,1<=+Math.abs($)?0<$?(Math.min(+Math.floor($/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],de[E>>2]=V[0],de[E+4>>2]=V[1],D.hb&&l===0&&w===0&&(D.hb=null),0}catch(U){if(typeof Ke>"u"||!(U instanceof Q))throw U;return U.Ka}},C:function(o){try{var l=sn(o);return l.Ha&&l.Ha.fsync?l.Ha.fsync(l):0}catch(h){if(typeof Ke>"u"||!(h instanceof Q))throw h;return h.Ka}},r:function(o,l,h,w){try{e:{var E=sn(o);o=l;for(var D=l=0;D<h;D++){var U=ke[o>>2],ye=ke[o+4>>2];o+=8;var Pe=nr(E,pe,U,ye);if(0>Pe){var Ae=-1;break e}l+=Pe}Ae=l}return ke[w>>2]=Ae,0}catch(it){if(typeof Ke>"u"||!(it instanceof Q))throw it;return it.Ka}}};(function(){function o(E){d.asm=E.exports,Wn=d.asm.I,ds(),yn=d.asm.Aa,fe.unshift(d.asm.J),Bt--,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),Bt==0&&ze&&(E=ze,ze=null,E())}function l(E){o(E.instance)}function h(E){return ee().then(function(D){return WebAssembly.instantiate(D,w)}).then(function(D){return D}).then(E,function(D){ge("failed to asynchronously prepare wasm: "+D),x(D)})}var w={a:cu};if(Bt++,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),d.instantiateWasm)try{return d.instantiateWasm(w,o)}catch(E){return ge("Module.instantiateWasm callback failed with error: "+E),!1}return function(){return Tt||typeof WebAssembly.instantiateStreaming!="function"||q()||A.startsWith("file://")||X||typeof fetch!="function"?h(l):fetch(A,{credentials:"same-origin"}).then(function(E){return WebAssembly.instantiateStreaming(E,w).then(l,function(D){return ge("wasm streaming compile failed: "+D),ge("falling back to ArrayBuffer instantiation"),h(l)})})}(),{}})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.J).apply(null,arguments)},d._sqlite3_free=function(){return(d._sqlite3_free=d.asm.K).apply(null,arguments)},d._sqlite3_value_double=function(){return(d._sqlite3_value_double=d.asm.L).apply(null,arguments)},d._sqlite3_value_text=function(){return(d._sqlite3_value_text=d.asm.M).apply(null,arguments)};var Vo=d.___errno_location=function(){return(Vo=d.___errno_location=d.asm.N).apply(null,arguments)};d._sqlite3_prepare_v2=function(){return(d._sqlite3_prepare_v2=d.asm.O).apply(null,arguments)},d._sqlite3_step=function(){return(d._sqlite3_step=d.asm.P).apply(null,arguments)},d._sqlite3_finalize=function(){return(d._sqlite3_finalize=d.asm.Q).apply(null,arguments)},d._sqlite3_reset=function(){return(d._sqlite3_reset=d.asm.R).apply(null,arguments)},d._sqlite3_value_int=function(){return(d._sqlite3_value_int=d.asm.S).apply(null,arguments)},d._sqlite3_clear_bindings=function(){return(d._sqlite3_clear_bindings=d.asm.T).apply(null,arguments)},d._sqlite3_value_blob=function(){return(d._sqlite3_value_blob=d.asm.U).apply(null,arguments)},d._sqlite3_value_bytes=function(){return(d._sqlite3_value_bytes=d.asm.V).apply(null,arguments)},d._sqlite3_value_type=function(){return(d._sqlite3_value_type=d.asm.W).apply(null,arguments)},d._sqlite3_result_blob=function(){return(d._sqlite3_result_blob=d.asm.X).apply(null,arguments)},d._sqlite3_result_double=function(){return(d._sqlite3_result_double=d.asm.Y).apply(null,arguments)},d._sqlite3_result_error=function(){return(d._sqlite3_result_error=d.asm.Z).apply(null,arguments)},d._sqlite3_result_int=function(){return(d._sqlite3_result_int=d.asm._).apply(null,arguments)},d._sqlite3_result_int64=function(){return(d._sqlite3_result_int64=d.asm.$).apply(null,arguments)},d._sqlite3_result_null=function(){return(d._sqlite3_result_null=d.asm.aa).apply(null,arguments)},d._sqlite3_result_text=function(){return(d._sqlite3_result_text=d.asm.ba).apply(null,arguments)},d._sqlite3_sql=function(){return(d._sqlite3_sql=d.asm.ca).apply(null,arguments)},d._sqlite3_aggregate_context=function(){return(d._sqlite3_aggregate_context=d.asm.da).apply(null,arguments)},d._sqlite3_column_count=function(){return(d._sqlite3_column_count=d.asm.ea).apply(null,arguments)},d._sqlite3_data_count=function(){return(d._sqlite3_data_count=d.asm.fa).apply(null,arguments)},d._sqlite3_column_blob=function(){return(d._sqlite3_column_blob=d.asm.ga).apply(null,arguments)},d._sqlite3_column_bytes=function(){return(d._sqlite3_column_bytes=d.asm.ha).apply(null,arguments)},d._sqlite3_column_double=function(){return(d._sqlite3_column_double=d.asm.ia).apply(null,arguments)},d._sqlite3_column_text=function(){return(d._sqlite3_column_text=d.asm.ja).apply(null,arguments)},d._sqlite3_column_type=function(){return(d._sqlite3_column_type=d.asm.ka).apply(null,arguments)},d._sqlite3_column_name=function(){return(d._sqlite3_column_name=d.asm.la).apply(null,arguments)},d._sqlite3_bind_blob=function(){return(d._sqlite3_bind_blob=d.asm.ma).apply(null,arguments)},d._sqlite3_bind_double=function(){return(d._sqlite3_bind_double=d.asm.na).apply(null,arguments)},d._sqlite3_bind_int=function(){return(d._sqlite3_bind_int=d.asm.oa).apply(null,arguments)},d._sqlite3_bind_text=function(){return(d._sqlite3_bind_text=d.asm.pa).apply(null,arguments)},d._sqlite3_bind_parameter_index=function(){return(d._sqlite3_bind_parameter_index=d.asm.qa).apply(null,arguments)},d._sqlite3_normalized_sql=function(){return(d._sqlite3_normalized_sql=d.asm.ra).apply(null,arguments)},d._sqlite3_errmsg=function(){return(d._sqlite3_errmsg=d.asm.sa).apply(null,arguments)},d._sqlite3_exec=function(){return(d._sqlite3_exec=d.asm.ta).apply(null,arguments)},d._sqlite3_changes=function(){return(d._sqlite3_changes=d.asm.ua).apply(null,arguments)},d._sqlite3_close_v2=function(){return(d._sqlite3_close_v2=d.asm.va).apply(null,arguments)},d._sqlite3_create_function_v2=function(){return(d._sqlite3_create_function_v2=d.asm.wa).apply(null,arguments)},d._sqlite3_open=function(){return(d._sqlite3_open=d.asm.xa).apply(null,arguments)};var ki=d._malloc=function(){return(ki=d._malloc=d.asm.ya).apply(null,arguments)},Ai=d._free=function(){return(Ai=d._free=d.asm.za).apply(null,arguments)};d._RegisterExtensionFunctions=function(){return(d._RegisterExtensionFunctions=d.asm.Ba).apply(null,arguments)};var Ho=d._emscripten_builtin_memalign=function(){return(Ho=d._emscripten_builtin_memalign=d.asm.Ca).apply(null,arguments)},Ur=d.stackSave=function(){return(Ur=d.stackSave=d.asm.Da).apply(null,arguments)},$r=d.stackRestore=function(){return($r=d.stackRestore=d.asm.Ea).apply(null,arguments)},Bn=d.stackAlloc=function(){return(Bn=d.stackAlloc=d.asm.Fa).apply(null,arguments)};d.UTF8ToString=et,d.stackAlloc=Bn,d.stackSave=Ur,d.stackRestore=$r,d.cwrap=function(o,l,h,w){h=h||[];var E=h.every(D=>D==="number"||D==="boolean");return l!=="string"&&E&&!w?d["_"+o]:function(){return uu(o,l,h,arguments)}};var Wi;ze=function o(){Wi||Ko(),Wi||(ze=o)};function Ko(){function o(){if(!Wi&&(Wi=!0,d.calledRun=!0,!pn)){if(d.noFSInit||Oi||(Oi=!0,Ei(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?Cn("stdin",d.stdin):bs("/dev/tty","/dev/stdin"),d.stdout?Cn("stdout",null,d.stdout):bs("/dev/tty","/dev/stdout"),d.stderr?Cn("stderr",null,d.stderr):bs("/dev/tty1","/dev/stderr"),tr("/dev/stdin",0),tr("/dev/stdout",1),tr("/dev/stderr",1)),ms=!1,re(fe),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var l=d.postRun.shift();Me.unshift(l)}re(Me)}}if(!(0<Bt)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Dn();re(nn),0<Bt||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),o()},1)):o())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Ko(),g}),n)};t.exports=r,t.exports.default=r})(hm);var jb=hm.exports;const zb=Fb(jb),Vb=""+new URL("sql-wasm-18fc45ef.wasm",import.meta.url).href,Hb="sqlitevfs",Us=new Map,Kb=2048,Jb=65536;class Gb{constructor(e){we(this,"_data");we(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,n){if(e>=this._size)return 0;const r=this._data.subarray(e,Math.min(this._size,e+n.length));return n.set(r),r.length}reserve(e){if(this._data.length>=e)return;const n=e-this._data.length,r=Math.min(Jb,Math.max(Kb,this._data.length)),a=new Uint8Array(this._data.length+Math.max(r,n));a.set(this._data),this._data=a}write(e,n){return this.reserve(e+n.length),this._data.set(n,e),this._size=Math.max(this._size,e+n.length),n.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const Yb=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Zf=new Promise((t,e)=>{const n=Yb.open(Hb,1);n.onupgradeneeded=()=>n.result.createObjectStore("files",{keyPath:"name"}),n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)});async function Xb(t){const e=await Zf,n=await new Promise((r,a)=>{const m=e.transaction("files","readonly").objectStore("files").get(t);m.onsuccess=()=>r(m.result),m.onerror=()=>a(m.error)});if(n&&!Us.has(t)){const r=new Gb(n.data);return Us.set(t,r),r}else return Us.has(t)?Us.get(t):null}async function Zb(t,e){const n=await Zf;await new Promise((r,a)=>{const m=n.transaction("files","readwrite").objectStore("files").put({name:t,data:e});m.onsuccess=()=>r(!0),m.onerror=()=>a(m.error)})}async function td(t){const e=await Zf;await new Promise((n,r)=>{const c=e.transaction("files","readwrite").objectStore("files").delete(t);c.onsuccess=()=>n(!0),c.onerror=()=>r(c.error)})}async function eN(t,e){if(await Zb(t,e),Us.has(t)){const n=Us.get(t);n.truncate(0),n.write(0,e)}}var dm=t=>{if(pm(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},nd=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,tN=t=>{if(pm(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(nd.test(t))return new Date(t);try{return JSON.parse(t,(e,n)=>typeof n=="string"&&nd.exec(n)?new Date(n):n)}catch{return t}}};function pm(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var nN=class extends Vf{constructor(e){super();we(this,"serializer");this.serializer=e||dm}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:n}=e;if(n.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:r,...a}=n,c=this.serializer(r);return r===c?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:c}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},rN=class{constructor(t={}){we(this,"serializeParametersTransformer");we(this,"deserializer");we(this,"only");we(this,"ctx");const{deserializer:e=tN,selectOrRawOnly:n=!1,serializer:r}=t;this.serializeParametersTransformer=new nN(r),this.deserializer=e,this.only=n}transformQuery({node:t,queryId:e}){var n;return this.only&&(t.kind==="SelectQueryNode"||t.kind==="RawNode")&&((n=this.ctx)==null||n.add(e)),this.serializeParametersTransformer.transformNode(t)}async parseResult(t){return t.length?await Promise.all(t.map(async e=>{const n={...e};for(const r in n)n[r]=await this.deserializer(n[r]);return n})):[]}async transformResult({result:t,queryId:e}){var r,a;const n=async()=>({...t,rows:await this.parseResult(t.rows)});return this.only?(r=this.ctx)!=null&&r.has(e)?((a=this.ctx)==null||a.delete(e),await n()):t:await n()}};function iN(t){return`__pre_${t}`}function sN(t,e=n=>n){return{setParam:n=>{let r;return(a,c)=>{if(!r){const{parameters:m,sql:g,query:N}=n({qb:t,param:iN}).compile();r={sql:g,query:(c==null?void 0:c(N))||{kind:N.kind},parameters:m}}return{...r,parameters:r.parameters.map(m=>typeof m=="string"&&m.startsWith("__pre_")?e(a[m.slice(6)]):m)}}}}}async function oN(t){return(await at`PRAGMA integrity_check`.execute(t)).rows[0].integrity_check==="ok"}async function aN(t,e){const n=e||`sp_${Date.now()%1e8}`;return await at`savepoint ${at.raw(n)}`.execute(t),{release:async()=>{await at`release savepoint ${at.raw(n)}`.execute(t)},rollback:async()=>{await at`rollback to savepoint ${at.raw(n)}`.execute(t)}}}function rd(t){const{logger:e,merge:n,queryNode:r}=t;return a=>{const{level:c,queryDurationMillis:m,query:{parameters:g,sql:N,query:d}}=a,T=c==="error"?a.error:void 0;let P=N.replace(/\r?\n/g," ").replace(/\s+/g," ");n&&g.forEach(ne=>{P=P.replace("?",typeof ne=="string"?ne:JSON.stringify(ne))});const G={sql:P,params:g,duration:m,error:T};r&&(G.queryNode=d),e(G)}}var uN=class extends Error{constructor(){super("db file maybe broken")}};function cN(t){return t.toOperationNode().kind==="SelectQueryNode"}var lN=class{constructor(t){we(this,"kysely");we(this,"trxCount",0);we(this,"trx");we(this,"logger");we(this,"serializer",dm);var g;const{dialect:e,logger:n,onQuery:r,plugins:a=[],serializerPluginOptions:c}=t;this.logger=n,c!=null&&c.serializer&&(this.serializer=c.serializer),a.push(new rN(c));let m;r===!0?m=rd({logger:((g=this.logger)==null?void 0:g.debug)||console.log,merge:!0}):r&&(m=rd(r)),this.kysely=new Pa({dialect:e,log:m,plugins:a})}async syncSchema(t,e){var n,r;try{if(e&&!await oN(this.kysely))return(n=this.logger)==null||n.error("integrity check fail"),{ready:!1,error:new uN};await t(this.kysely,this.logger)}catch(a){return this.logError(a,"sync table fail"),{ready:!1,error:a}}return(r=this.logger)==null||r.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){var n;e&&((n=this.logger)==null||n.error(e,t instanceof Error?t:void 0))}async transaction(t,e){var a;if(!this.trx)try{return await this.kysely.transaction().execute(async c=>{var g;return this.trx=c,(g=this.logger)==null||g.debug("run in transaction"),await t(c)})}catch(c){this.logError(c,e);return}finally{this.trx=void 0}this.trxCount++;const n=this.getDB(),r=await aN(n,`sp_${this.trxCount}`);(a=this.logger)==null||a.debug(`run in savepoint:${this.trxCount}`);try{const c=await t(n);return await r.release(),this.trxCount--,c}catch(c){await r.rollback(),this.logError(c,e),this.trxCount--;return}}async execute(t,e){try{return await t(this.getDB()).execute()}catch(n){this.logError(n,e);return}}async executeTakeFirst(t,e){try{let n=t(this.getDB());return cN(n)&&(n=n.limit(1)),await n.executeTakeFirstOrThrow()}catch(n){this.logError(n,e);return}}precompile(t){var e,n;return(n=(e=this.logger)==null?void 0:e.debug)==null||n.call(e,"precompile"),sN(t(this.kysely),this.serializer)}async executeCompiled(t,e){try{return await this.getDB().executeQuery(t)}catch(n){this.logError(n,e);return}}async executeCompiledTakeList(t,e){const n=await this.executeCompiled(t,e);return n==null?void 0:n.rows}async raw(t,e){try{return typeof t=="string"?await this.getDB().executeQuery(yr.raw(t)):await t.execute(this.getDB())}catch(n){this.logError(n,e);return}}async destroy(){var t;(t=this.logger)==null||t.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},mm="__TIME_TRIGGER__";function fN(t,e){const{create:n,update:r}=(e==null?void 0:e.timeTrigger)||{},a={type:"date",defaultTo:mm};return n===!0?t.createAt=a:n&&(t[n]=a),r===!0?t.updateAt={...a,notNull:0}:r&&(t[r]={...a,notNull:0}),{columns:t,...e}}function ym(t){let e="text",n=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":n=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:n}}function df(t){return Array.isArray(t)?t:[t]}function hN(t){return typeof t=="function"}async function Ru(t,e){await t.schema.dropTable(e).execute()}async function id(t,e,n){const{index:r,...a}=n;await t.transaction().execute(async c=>{const m=await pf(c,e,a);await gm(c,e,m),await wm(c,e,r)})}async function wm(t,e,n){for(const r of n||[]){const a=df(r);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function pf(t,e,{columns:n,primary:r,timeTrigger:a,unique:c},m=!1){const g=a?{triggerKey:"rowid",update:void 0}:void 0;let N=!1,d=t.schema.createTable(e);m&&(d=d.temporary());for(const[T,P]of Object.entries(n)){let G="text";const{type:ne,notNull:X,defaultTo:b}=P,O=ym(ne);G=O.dataType,d=d.addColumn(T,G,v=>O.isIncrements?(N=!0,g&&(g.triggerKey=T),v.autoIncrement().primaryKey()):b===mm?(g&&X===0&&(g.update=T),v.defaultTo(at`CURRENT_TIMESTAMP`)):(X===!0&&(v=v.notNull()),b!==void 0&&(v=v.defaultTo(hN(b)?b(at):b)),v))}if(!N&&r){const T=df(r);d=d.addPrimaryKeyConstraint(`pk#${T.join("#")}`,T)}for(const T of c||[]){const P=df(T);d=d.addUniqueConstraint(`un#${P.join("#")}`,P)}return await d.ifNotExists().execute(),g}async function gm(t,e,n){if(!n||!n.update)return;const{triggerKey:r,update:a}=n,c=`tgr_${e}_${a}`;await at`create trigger if not exists ${at.ref(c)}
after update
on ${at.table(e)}
begin
  update ${at.table(e)}
  set ${at.ref(a)} = CURRENT_TIMESTAMP
  where ${at.ref(r)} = NEW.${at.ref(r)};
end`.execute(t)}function dN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,n=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,r,a]=t.replace(/\r?\n/g,"").match(e),c={columns:{},name:r,primary:void 0,unique:[]},m=a.matchAll(n);for(const g of m){const[,N,d,T]=g;if(N.startsWith("pk#")){const[,...P]=N.split("#");c.primary=P}else if(N.startsWith("un#")){const[,...P]=N.split("#");c.unique.push(P)}else c.columns[N]={type:d,notNull:!!T}}return c}async function pN(t,e=[]){const n=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",im).where("name","!=",sm).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(c=>c.and(e.map(m=>c("name","not like",`${m}%`))))).select(["name","sql","type"]).$castTo().execute(),r={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:c,type:m}of n)c&&(m==="table"?r.existTables[a]=dN(c):m==="index"?r.indexList.push(a):r.triggerList.push(a));return r}async function mN(t,e,n={},r){const{reserveOldData:a,truncateIfExists:c=[],log:m,excludeTablePrefix:g}=n,N=X=>m&&(r==null?void 0:r.debug(X)),{existTables:d,indexList:T,triggerList:P}=await pN(t,g);N("====== sync tables start ======");const G=new Set(Array.isArray(c)?c:c?Object.keys(d):[]);for(const X of T)await t.schema.dropIndex(X).ifExists().execute();for(const X of P)await at`drop trigger if exists ${at.ref(X)}`.execute(t);for(const[X,b]of Object.entries(d))X in e?(N(`diff table: ${X}`),await ne(X,b,e[X])):(N(`remove table: ${X}`),await Ru(t,X));for(const[X,b]of Object.entries(e))X in d||(N(`create table: ${X}`),await id(t,X,b));N("======= sync tables end =======");async function ne(X,b,O){if(G.has(X)){await t.transaction().execute(async F=>{await Ru(F,X),await id(F,X,O),N("clear and sync structure")});return}const{index:v,...C}=O,R=yN(b.columns,O.columns);if(R.length===Object.keys(b.columns).length){N("same table structure, skip");return}N("different table structure, update"),await t.transaction().execute(async F=>{const _e=`_temp_${X}`;await pf(F,_e,b,!0),await F.insertInto(_e).expression(ge=>ge.selectFrom(X).selectAll()).execute(),await Ru(F,X);const ae=await pf(F,X,C);R.length&&await F.insertInto(X).columns(R).expression(ge=>ge.selectFrom(_e).select(R)).execute(),await wm(F,X,v),await gm(F,X,ae),!a&&await Ru(F,_e)}).then(()=>N(`restore columns: ${R}`)).catch(F=>r==null?void 0:r.error(`fail to sync ${X}`,F))}}function yN(t,e){const n=[];for(const[r,a]of Object.entries(e))if(r in t){const{type:c,notNull:m=!1}=t[r];ym(a.type).dataType===c&&(a.notNull||!1)===m&&n.push(r)}return n}function wN(t,e={}){const{log:n}=e;return async(r,a)=>{await mN(r,t,e,n?a:void 0)}}const gN={test:fN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function eh(t){const e=new lN({dialect:t}),n=await e.syncSchema(wN(gN));if(!n.ready)throw n.error;console.log("test"),console.log(await e.raw(at`PRAGMA table_info(${at.table("test")});`)),console.log(await e.raw(at`select last_insert_rowid()`));for(let r=0;r<10;r++)await e.transaction(async a=>{await a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}).execute()});return e.execute(r=>r.selectFrom("test").selectAll())}const bN=new Pb({async database(){const t=await zb({locateFile:()=>Vb});return new t.Database(await Xb("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),eN("sqljs",t)},isThrottle:!0}});function NN(){const t=Ny();function e(){eh(bN).then(n=>{t.value=n})}return{result:t,run:e}}function vN(){return new Worker(""+new URL("sqljsWorker-7ab6a459.js",import.meta.url).href)}function _N(){return new Worker(""+new URL("officialWasmWorker-a2753aed.js",import.meta.url).href)}const je=0,xN=5,bt=10,bm=12,Nm=14,Mi=21,Al=25,EN=27,sd=100,ON=101,qN=3850,CN=522,IN=1,TN=2,vm=4,SN=8,Ps=0,Ui=1,zu=2,kN=3,Vu=4,AN=512,WN=1024,RN=2048,DN=16384,od=1,ad=2,ud=3,cd=4,ld=5,fd=0x7fffffffffffffffn,hd=-0x8000000000000000n;class _r extends Error{constructor(e,n){super(e),this.code=n}}const Rs=!0;function PN(t){const e={},n=t._getSqliteFree(),r=t._malloc(8),a=[r,r+4];function c(b){if(typeof b!="string")return 0;const O=t.lengthBytesUTF8(b),v=t._sqlite3_malloc(O+1);return t.stringToUTF8(b,v,O+1),v}function m(b,O){return BigInt(O)<<32n|BigInt(b)&0xffffffffn}const g=function(){const b=BigInt(Number.MAX_SAFE_INTEGER)>>32n,O=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(v,C){return C>b||C<O?m(v,C):C*4294967296+(v&2147483647)-(v&2147483648)}}(),N=new Set;function d(b){if(!N.has(b))throw new _r("not a database",Mi)}const T=new Map;function P(b){if(!T.has(b))throw new _r("not a statement",Mi)}e.bind_collection=function(b,O){P(b);const v=Array.isArray(O),C=e.bind_parameter_count(b);for(let R=1;R<=C;++R){const F=v?R-1:e.bind_parameter_name(b,R),_e=O[F];_e!==void 0&&e.bind(b,R,_e)}return je},e.bind=function(b,O,v){switch(P(b),typeof v){case"number":return v===(v|0)?e.bind_int(b,O,v):e.bind_double(b,O,v);case"string":return e.bind_text(b,O,v);default:return v instanceof Uint8Array||Array.isArray(v)?e.bind_blob(b,O,v):v===null?e.bind_null(b,O):typeof v=="bigint"?e.bind_int64(b,O,v):v===void 0?EN:(console.warn("unknown binding converted to null",v),e.bind_null(b,O))}},e.bind_blob=function(){const b="sqlite3_bind_blob",O=t.cwrap(b,...Ee("nnnnn:n"));return function(v,C,R){P(v);const F=R.byteLength??R.length,_e=t._sqlite3_malloc(F);t.HEAPU8.subarray(_e).set(R);const ae=O(v,C,_e,F,n);return X(b,ae,T.get(v))}}(),e.bind_parameter_count=function(){const b="sqlite3_bind_parameter_count",O=t.cwrap(b,...Ee("n:n"));return function(v){return P(v),O(v)}}(),e.bind_double=function(){const b="sqlite3_bind_double",O=t.cwrap(b,...Ee("nnn:n"));return function(v,C,R){P(v);const F=O(v,C,R);return X(b,F,T.get(v))}}(),e.bind_int=function(){const b="sqlite3_bind_int",O=t.cwrap(b,...Ee("nnn:n"));return function(v,C,R){if(P(v),R>2147483647||R<-2147483648)return Al;const F=O(v,C,R);return X(b,F,T.get(v))}}(),e.bind_int64=function(){const b="sqlite3_bind_int64",O=t.cwrap(b,...Ee("nnnn:n"));return function(v,C,R){if(P(v),R>fd||R<hd)return Al;const F=R&0xffffffffn,_e=R>>32n,ae=O(v,C,Number(F),Number(_e));return X(b,ae,T.get(v))}}(),e.bind_null=function(){const b="sqlite3_bind_null",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){P(v);const R=O(v,C);return X(b,R,T.get(v))}}(),e.bind_parameter_name=function(){const b="sqlite3_bind_parameter_name",O=t.cwrap(b,...Ee("n:s"));return function(v,C){return P(v),O(v,C)}}(),e.bind_text=function(){const b="sqlite3_bind_text",O=t.cwrap(b,...Ee("nnnnn:n"));return function(v,C,R){P(v);const F=c(R),_e=O(v,C,F,-1,n);return X(b,_e,T.get(v))}}(),e.changes=function(){const b="sqlite3_changes",O=t.cwrap(b,...Ee("n:n"));return function(v){return d(v),O(v)}}(),e.close=function(){const b="sqlite3_close",O=t.cwrap(b,...Ee("n:n"),{async:Rs});return async function(v){d(v);const C=await O(v);return N.delete(v),X(b,C,v)}}(),e.column=function(b,O){P(b);const v=e.column_type(b,O);switch(v){case cd:return e.column_blob(b,O);case ad:return e.column_double(b,O);case od:const C=e.column_int(b,O),R=t.getTempRet0();return g(C,R);case ld:return null;case ud:return e.column_text(b,O);default:throw new _r("unknown type",v)}},e.column_blob=function(){const b="sqlite3_column_blob",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){P(v);const R=e.column_bytes(v,C),F=O(v,C);return t.HEAPU8.subarray(F,F+R)}}(),e.column_bytes=function(){const b="sqlite3_column_bytes",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){return P(v),O(v,C)}}(),e.column_count=function(){const b="sqlite3_column_count",O=t.cwrap(b,...Ee("n:n"));return function(v){return P(v),O(v)}}(),e.column_double=function(){const b="sqlite3_column_double",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){return P(v),O(v,C)}}(),e.column_int=function(){const b="sqlite3_column_int64",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){return P(v),O(v,C)}}(),e.column_int64=function(){const b="sqlite3_column_int64",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){P(v);const R=O(v,C),F=t.getTempRet0();return m(R,F)}}(),e.column_name=function(){const b="sqlite3_column_name",O=t.cwrap(b,...Ee("nn:s"));return function(v,C){return P(v),O(v,C)}}(),e.column_names=function(b){const O=[],v=e.column_count(b);for(let C=0;C<v;++C)O.push(e.column_name(b,C));return O},e.column_text=function(){const b="sqlite3_column_text",O=t.cwrap(b,...Ee("nn:s"));return function(v,C){return P(v),O(v,C)}}(),e.column_type=function(){const b="sqlite3_column_type",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){return P(v),O(v,C)}}(),e.create_function=function(b,O,v,C,R,F,_e,ae){if(d(b),F&&!_e&&!ae){const ge=t.createFunction(b,O,v,C,R,F);return X("sqlite3_create_function",ge,b)}if(!F&&_e&&ae){const ge=t.createAggregate(b,O,v,C,R,_e,ae);return X("sqlite3_create_function",ge,b)}throw new _r("invalid function combination",Mi)},e.create_module=function(b,O,v,C){d(b);const R=t.createModule(b,O,v,C);return X("sqlite3_create_module",R,b)},e.data_count=function(){const b="sqlite3_data_count",O=t.cwrap(b,...Ee("n:n"));return function(v){return P(v),O(v)}}(),e.declare_vtab=function(){const b="sqlite3_declare_vtab",O=t.cwrap(b,...Ee("ns:n"));return function(v,C){const R=O(v,C);return X("sqlite3_declare_vtab",R)}}(),e.exec=async function(b,O,v){for await(const C of e.statements(b,O)){let R;for(;await e.step(C)===sd;)if(v){R=R??e.column_names(C);const F=e.row(C);await v(F,R)}}return je},e.finalize=function(){const b="sqlite3_finalize",O=t.cwrap(b,...Ee("n:n"),{async:Rs});return async function(v){if(!T.has(v))return Mi;const C=await O(v);return T.get(v),T.delete(v),C}}(),e.get_autocommit=function(){const b="sqlite3_get_autocommit",O=t.cwrap(b,...Ee("n:n"));return function(v){return O(v)}}(),e.libversion=function(){const b="sqlite3_libversion",O=t.cwrap(b,...Ee(":s"));return function(){return O()}}(),e.libversion_number=function(){const b="sqlite3_libversion_number",O=t.cwrap(b,...Ee(":n"));return function(){return O()}}(),e.limit=function(){const b="sqlite3_limit",O=t.cwrap(b,...Ee("nnn:n"));return function(v,C,R){return O(v,C,R)}}(),e.open_v2=function(){const b="sqlite3_open_v2",O=t.cwrap(b,...Ee("snnn:n"),{async:Rs});return async function(v,C,R){C=C||vm|TN,R=c(R);const F=await O(v,a[0],C,R),_e=t.getValue(a[0],"*");return N.add(_e),t._sqlite3_free(R),t.ccall("RegisterExtensionFunctions","void",["number"],[_e]),X(b,F),_e}}(),e.prepare_v2=function(){const b="sqlite3_prepare_v2",O=t.cwrap(b,...Ee("nnnnn:n"),{async:Rs});return async function(v,C){const R=await O(v,C,-1,a[0],a[1]);X(b,R,v);const F=t.getValue(a[0],"*");return F?(T.set(F,v),{stmt:F,sql:t.getValue(a[1],"*")}):null}}(),e.progress_handler=function(b,O,v,C){d(b),t.progressHandler(b,O,v,C)},e.reset=function(){const b="sqlite3_reset",O=t.cwrap(b,...Ee("n:n"),{async:Rs});return async function(v){P(v);const C=await O(v);return X(b,C,T.get(v))}}(),e.result=function(b,O){switch(typeof O){case"number":O===(O|0)?e.result_int(b,O):e.result_double(b,O);break;case"string":e.result_text(b,O);break;default:if(O instanceof Uint8Array||Array.isArray(O))e.result_blob(b,O);else if(O===null)e.result_null(b);else{if(typeof O=="bigint")return e.result_int64(b,O);console.warn("unknown result converted to null",O),e.result_null(b)}break}},e.result_blob=function(){const b="sqlite3_result_blob",O=t.cwrap(b,...Ee("nnnn:n"));return function(v,C){const R=C.byteLength??C.length,F=t._sqlite3_malloc(R);t.HEAPU8.subarray(F).set(C),O(v,F,R,n)}}(),e.result_double=function(){const b="sqlite3_result_double",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){O(v,C)}}(),e.result_int=function(){const b="sqlite3_result_int",O=t.cwrap(b,...Ee("nn:n"));return function(v,C){O(v,C)}}(),e.result_int64=function(){const b="sqlite3_result_int64",O=t.cwrap(b,...Ee("nnn:n"));return function(v,C){if(C>fd||C<hd)return Al;const R=C&0xffffffffn,F=C>>32n;O(v,Number(R),Number(F))}}(),e.result_null=function(){const b="sqlite3_result_null",O=t.cwrap(b,...Ee("n:n"));return function(v){O(v)}}(),e.result_text=function(){const b="sqlite3_result_text",O=t.cwrap(b,...Ee("nnnn:n"));return function(v,C){const R=c(C);O(v,R,-1,n)}}(),e.row=function(b){const O=[],v=e.data_count(b);for(let C=0;C<v;++C){const R=e.column(b,C);O.push((R==null?void 0:R.buffer)===t.HEAPU8.buffer?R.slice():R)}return O},e.set_authorizer=function(b,O,v){d(b);const C=t.setAuthorizer(b,O,v);return X("sqlite3_set_authorizer",C,b)},e.sql=function(){const b="sqlite3_sql",O=t.cwrap(b,...Ee("n:s"));return function(v){return P(v),O(v)}}(),e.statements=function(b,O){return async function*(){const v=e.str_new(b,O);let C={stmt:null,sql:e.str_value(v)};try{for(;C=await e.prepare_v2(b,C.sql);)yield C.stmt,e.finalize(C.stmt),C.stmt=null}finally{C!=null&&C.stmt&&e.finalize(C.stmt),e.str_finish(v)}}()},e.step=function(){const b="sqlite3_step",O=t.cwrap(b,...Ee("n:n"),{async:Rs});return async function(v){P(v);const C=await O(v);return X(b,C,T.get(v),[sd,ON])}}();let G=0;const ne=new Map;e.str_new=function(b,O=""){const v=t.lengthBytesUTF8(O),C=G++&4294967295,R={offset:t._sqlite3_malloc(v+1),bytes:v};return ne.set(C,R),t.stringToUTF8(O,R.offset,R.bytes+1),C},e.str_appendall=function(b,O){if(!ne.has(b))throw new _r("not a string",Mi);const v=ne.get(b),C=t.lengthBytesUTF8(O),R=v.bytes+C,F=t._sqlite3_malloc(R+1);t.HEAPU8.subarray(F,F+R+1).set(t.HEAPU8.subarray(v.offset,v.offset+v.bytes)),t.stringToUTF8(O,F+v.bytes,C+1),t._sqlite3_free(v.offset),v.offset=F,v.bytes=R,ne.set(b,v)},e.str_finish=function(b){if(!ne.has(b))throw new _r("not a string",Mi);const O=ne.get(b);ne.delete(b),t._sqlite3_free(O.offset)},e.str_value=function(b){if(!ne.has(b))throw new _r("not a string",Mi);return ne.get(b).offset},e.user_data=function(b){return t.getFunctionUserData(b)},e.value=function(b){const O=e.value_type(b);switch(O){case cd:return e.value_blob(b);case ad:return e.value_double(b);case od:const v=e.value_int(b),C=t.getTempRet0();return g(v,C);case ld:return null;case ud:return e.value_text(b);default:throw new _r("unknown type",O)}},e.value_blob=function(){const b="sqlite3_value_blob",O=t.cwrap(b,...Ee("n:n"));return function(v){const C=e.value_bytes(v),R=O(v);return t.HEAPU8.subarray(R,R+C)}}(),e.value_bytes=function(){const b="sqlite3_value_bytes",O=t.cwrap(b,...Ee("n:n"));return function(v){return O(v)}}(),e.value_double=function(){const b="sqlite3_value_double",O=t.cwrap(b,...Ee("n:n"));return function(v){return O(v)}}(),e.value_int=function(){const b="sqlite3_value_int64",O=t.cwrap(b,...Ee("n:n"));return function(v){return O(v)}}(),e.value_int64=function(){const b="sqlite3_value_int64",O=t.cwrap(b,...Ee("n:n"));return function(v){const C=O(v),R=t.getTempRet0();return m(C,R)}}(),e.value_text=function(){const b="sqlite3_value_text",O=t.cwrap(b,...Ee("n:s"));return function(v){return O(v)}}(),e.value_type=function(){const b="sqlite3_value_type",O=t.cwrap(b,...Ee("n:n"));return function(v){return O(v)}}(),e.vfs_register=function(b,O){const v=t.registerVFS(b,O);return X("sqlite3_vfs_register",v)};function X(b,O,v=null,C=[je]){if(C.includes(O))return O;const R=v?t.ccall("sqlite3_errmsg","string",["number"],[v]):b;throw new _r(R,O)}return e}function Ee(t){const e=[],n=t.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const r=[];for(let a of n[1])switch(a){case"n":r.push("number");break;case"s":r.push("string");break}return e.push(r),e}var LN=(()=>{var t=import.meta.url;return function(e={}){var n;n||(n=typeof e<"u"?e:{});var r,a;n.ready=new Promise((s,u)=>{r=s,a=u});var c=Object.assign({},n),m="./this.program",g=(s,u)=>{throw u},N=typeof window=="object",d=typeof importScripts=="function",T="",P;(N||d)&&(d?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),t&&(T=t),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",d&&(P=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var G=n.print||console.log.bind(console),ne=n.printErr||console.warn.bind(console);Object.assign(n,c),c=null,n.thisProgram&&(m=n.thisProgram),n.quit&&(g=n.quit);var X;n.wasmBinary&&(X=n.wasmBinary);var b=n.noExitRuntime||!0;typeof WebAssembly!="object"&&rt("no native wasm support detected");var O,v=!1,C,R,F,_e,ae,ge,Tt,Wn;function pn(){var s=O.buffer;n.HEAP8=R=new Int8Array(s),n.HEAP16=_e=new Int16Array(s),n.HEAP32=ae=new Int32Array(s),n.HEAPU8=F=new Uint8Array(s),n.HEAPU16=new Uint16Array(s),n.HEAPU32=ge=new Uint32Array(s),n.HEAPF32=Tt=new Float32Array(s),n.HEAPF64=Wn=new Float64Array(s)}var Rn=[],mn=[],et=[],en=[],tn=0;function ft(){var s=n.preRun.shift();Rn.unshift(s)}var pe=0,qe=null;function rt(s){throw n.onAbort&&n.onAbort(s),s="Aborted("+s+")",ne(s),v=!0,C=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),a(s),s}function de(s){return s.startsWith("data:application/octet-stream;base64,")}var ke;if(n.locateFile){if(ke="wa-sqlite-async.wasm",!de(ke)){var St=ke;ke=n.locateFile?n.locateFile(St,T):T+St}}else ke=new URL(""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,self.location).href;function br(s){try{if(s==ke&&X)return new Uint8Array(X);if(P)return P(s);throw"both async and sync fetching of the wasm failed"}catch(u){rt(u)}}function ds(s){return X||!N&&!d||typeof fetch!="function"?Promise.resolve().then(()=>br(s)):fetch(s,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+s+"'";return u.arrayBuffer()}).catch(()=>br(s))}function yn(s,u,f){return ds(s).then(y=>WebAssembly.instantiate(y,u)).then(y=>y).then(f,y=>{ne("failed to asynchronously prepare wasm: "+y),rt(y)})}function nn(s,u){var f=ke;return X||typeof WebAssembly.instantiateStreaming!="function"||de(f)||typeof fetch!="function"?yn(f,s,u):fetch(f,{credentials:"same-origin"}).then(y=>WebAssembly.instantiateStreaming(y,s).then(u,function(_){return ne("wasm streaming compile failed: "+_),ne("falling back to ArrayBuffer instantiation"),yn(f,s,u)}))}var fe,Me;function Dn(s){this.name="ExitStatus",this.message="Program terminated with exit("+s+")",this.status=s}function Bt(s){for(;0<s.length;)s.shift()(n)}function ze(s,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return R[s>>0];case"i8":return R[s>>0];case"i16":return _e[s>>1];case"i32":return ae[s>>2];case"i64":return ae[s>>2];case"float":return Tt[s>>2];case"double":return Wn[s>>3];case"*":return ge[s>>2];default:rt("invalid type for getValue: "+u)}}function x(s,u,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":R[s>>0]=u;break;case"i8":R[s>>0]=u;break;case"i16":_e[s>>1]=u;break;case"i32":ae[s>>2]=u;break;case"i64":Me=[u>>>0,(fe=u,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[s>>2]=Me[0],ae[s+4>>2]=Me[1];break;case"float":Tt[s>>2]=u;break;case"double":Wn[s>>3]=u;break;case"*":ge[s>>2]=u;break;default:rt("invalid type for setValue: "+f)}}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function A(s,u,f){var y=u+f;for(f=u;s[f]&&!(f>=y);)++f;if(16<f-u&&s.buffer&&q)return q.decode(s.subarray(u,f));for(y="";u<f;){var _=s[u++];if(_&128){var k=s[u++]&63;if((_&224)==192)y+=String.fromCharCode((_&31)<<6|k);else{var S=s[u++]&63;_=(_&240)==224?(_&15)<<12|k<<6|S:(_&7)<<18|k<<12|S<<6|s[u++]&63,65536>_?y+=String.fromCharCode(_):(_-=65536,y+=String.fromCharCode(55296|_>>10,56320|_&1023))}}else y+=String.fromCharCode(_)}return y}function M(s,u){return s?A(F,s,u):""}var H=(s,u)=>{for(var f=0,y=s.length-1;0<=y;y--){var _=s[y];_==="."?s.splice(y,1):_===".."?(s.splice(y,1),f++):f&&(s.splice(y,1),f--)}if(u)for(;f;f--)s.unshift("..");return s},ee=s=>{var u=s.charAt(0)==="/",f=s.substr(-1)==="/";return(s=H(s.split("/").filter(y=>!!y),!u).join("/"))||u||(s="."),s&&f&&(s+="/"),(u?"/":"")+s},$=s=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=u[0],u=u[1],!s&&!u?".":(u&&(u=u.substr(0,u.length-1)),s+u)},V=s=>{if(s==="/")return"/";s=ee(s),s=s.replace(/\/$/,"");var u=s.lastIndexOf("/");return u===-1?s:s.substr(u+1)};function re(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return s=>crypto.getRandomValues(s);rt("initRandomDevice")}function K(s){return(K=re())(s)}function ce(){for(var s="",u=!1,f=arguments.length-1;-1<=f&&!u;f--){if(u=0<=f?arguments[f]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";s=u+"/"+s,u=u.charAt(0)==="/"}return s=H(s.split("/").filter(y=>!!y),!u).join("/"),(u?"/":"")+s||"."}function oe(s){for(var u=0,f=0;f<s.length;++f){var y=s.charCodeAt(f);127>=y?u++:2047>=y?u+=2:55296<=y&&57343>=y?(u+=4,++f):u+=3}return u}function ue(s,u,f,y){if(!(0<y))return 0;var _=f;y=f+y-1;for(var k=0;k<s.length;++k){var S=s.charCodeAt(k);if(55296<=S&&57343>=S){var j=s.charCodeAt(++k);S=65536+((S&1023)<<10)|j&1023}if(127>=S){if(f>=y)break;u[f++]=S}else{if(2047>=S){if(f+1>=y)break;u[f++]=192|S>>6}else{if(65535>=S){if(f+2>=y)break;u[f++]=224|S>>12}else{if(f+3>=y)break;u[f++]=240|S>>18,u[f++]=128|S>>12&63}u[f++]=128|S>>6&63}u[f++]=128|S&63}}return u[f]=0,f-_}var me=[];function xe(s,u){me[s]={input:[],Rb:[],bc:u},ws(s,$e)}var $e={open:function(s){var u=me[s.node.ec];if(!u)throw new te(43);s.Sb=u,s.seekable=!1},close:function(s){s.Sb.bc.ic(s.Sb)},ic:function(s){s.Sb.bc.ic(s.Sb)},read:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.zc)throw new te(60);for(var _=0,k=0;k<y;k++){try{var S=s.Sb.bc.zc(s.Sb)}catch{throw new te(29)}if(S===void 0&&_===0)throw new te(6);if(S==null)break;_++,u[f+k]=S}return _&&(s.node.timestamp=Date.now()),_},write:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.sc)throw new te(60);try{for(var _=0;_<y;_++)s.Sb.bc.sc(s.Sb,u[f+_])}catch{throw new te(29)}return y&&(s.node.timestamp=Date.now()),_}},Re={zc:function(s){if(!s.input.length){var u=null;if(typeof window<"u"&&typeof window.prompt=="function"?(u=window.prompt("Input: "),u!==null&&(u+=`
`)):typeof readline=="function"&&(u=readline(),u!==null&&(u+=`
`)),!u)return null;var f=Array(oe(u)+1);u=ue(u,f,0,f.length),f.length=u,s.input=f}return s.input.shift()},sc:function(s,u){u===null||u===10?(G(A(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(G(A(s.Rb,0)),s.Rb=[])}},tt={sc:function(s,u){u===null||u===10?(ne(A(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(ne(A(s.Rb,0)),s.Rb=[])}},he={Vb:null,Ub:function(){return he.createNode(null,"/",16895,0)},createNode:function(s,u,f,y){if((f&61440)===24576||(f&61440)===4096)throw new te(63);return he.Vb||(he.Vb={dir:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,cc:he.Cb.cc,jc:he.Cb.jc,Cc:he.Cb.Cc,oc:he.Cb.oc,mc:he.Cb.mc,Bc:he.Cb.Bc,nc:he.Cb.nc},stream:{Zb:he.Mb.Zb}},file:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:{Zb:he.Mb.Zb,read:he.Mb.read,write:he.Mb.write,vc:he.Mb.vc,kc:he.Mb.kc,lc:he.Mb.lc}},link:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,fc:he.Cb.fc},stream:{}},wc:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:Dr}}),f=At(s,u,f,y),(f.mode&61440)===16384?(f.Cb=he.Vb.dir.node,f.Mb=he.Vb.dir.stream,f.Nb={}):(f.mode&61440)===32768?(f.Cb=he.Vb.file.node,f.Mb=he.Vb.file.stream,f.Pb=0,f.Nb=null):(f.mode&61440)===40960?(f.Cb=he.Vb.link.node,f.Mb=he.Vb.link.stream):(f.mode&61440)===8192&&(f.Cb=he.Vb.wc.node,f.Mb=he.Vb.wc.stream),f.timestamp=Date.now(),s&&(s.Nb[u]=f,s.timestamp=f.timestamp),f},Uc:function(s){return s.Nb?s.Nb.subarray?s.Nb.subarray(0,s.Pb):new Uint8Array(s.Nb):new Uint8Array(0)},xc:function(s,u){var f=s.Nb?s.Nb.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),f!=0&&(u=Math.max(u,256)),f=s.Nb,s.Nb=new Uint8Array(u),0<s.Pb&&s.Nb.set(f.subarray(0,s.Pb),0))},Qc:function(s,u){if(s.Pb!=u)if(u==0)s.Nb=null,s.Pb=0;else{var f=s.Nb;s.Nb=new Uint8Array(u),f&&s.Nb.set(f.subarray(0,Math.min(u,s.Pb))),s.Pb=u}},Cb:{Tb:function(s){var u={};return u.Ic=(s.mode&61440)===8192?s.id:1,u.qc=s.id,u.mode=s.mode,u.Oc=1,u.uid=0,u.Lc=0,u.ec=s.ec,(s.mode&61440)===16384?u.size=4096:(s.mode&61440)===32768?u.size=s.Pb:(s.mode&61440)===40960?u.size=s.link.length:u.size=0,u.Ec=new Date(s.timestamp),u.Nc=new Date(s.timestamp),u.Hc=new Date(s.timestamp),u.Fc=4096,u.Gc=Math.ceil(u.size/u.Fc),u},Qb:function(s,u){u.mode!==void 0&&(s.mode=u.mode),u.timestamp!==void 0&&(s.timestamp=u.timestamp),u.size!==void 0&&he.Qc(s,u.size)},cc:function(){throw qn[44]},jc:function(s,u,f,y){return he.createNode(s,u,f,y)},Cc:function(s,u,f){if((s.mode&61440)===16384){try{var y=Pn(u,f)}catch{}if(y)for(var _ in y.Nb)throw new te(55)}delete s.parent.Nb[s.name],s.parent.timestamp=Date.now(),s.name=f,u.Nb[f]=s,u.timestamp=s.parent.timestamp,s.parent=u},oc:function(s,u){delete s.Nb[u],s.timestamp=Date.now()},mc:function(s,u){var f=Pn(s,u),y;for(y in f.Nb)throw new te(55);delete s.Nb[u],s.timestamp=Date.now()},Bc:function(s){var u=[".",".."],f;for(f in s.Nb)s.Nb.hasOwnProperty(f)&&u.push(f);return u},nc:function(s,u,f){return s=he.createNode(s,u,41471,0),s.link=f,s},fc:function(s){if((s.mode&61440)!==40960)throw new te(28);return s.link}},Mb:{read:function(s,u,f,y,_){var k=s.node.Nb;if(_>=s.node.Pb)return 0;if(s=Math.min(s.node.Pb-_,y),8<s&&k.subarray)u.set(k.subarray(_,_+s),f);else for(y=0;y<s;y++)u[f+y]=k[_+y];return s},write:function(s,u,f,y,_,k){if(u.buffer===R.buffer&&(k=!1),!y)return 0;if(s=s.node,s.timestamp=Date.now(),u.subarray&&(!s.Nb||s.Nb.subarray)){if(k)return s.Nb=u.subarray(f,f+y),s.Pb=y;if(s.Pb===0&&_===0)return s.Nb=u.slice(f,f+y),s.Pb=y;if(_+y<=s.Pb)return s.Nb.set(u.subarray(f,f+y),_),y}if(he.xc(s,_+y),s.Nb.subarray&&u.subarray)s.Nb.set(u.subarray(f,f+y),_);else for(k=0;k<y;k++)s.Nb[_+k]=u[f+k];return s.Pb=Math.max(s.Pb,_+y),y},Zb:function(s,u,f){if(f===1?u+=s.position:f===2&&(s.node.mode&61440)===32768&&(u+=s.node.Pb),0>u)throw new te(28);return u},vc:function(s,u,f){he.xc(s.node,u+f),s.node.Pb=Math.max(s.node.Pb,u+f)},kc:function(s,u,f,y,_){if((s.node.mode&61440)!==32768)throw new te(43);if(s=s.node.Nb,_&2||s.buffer!==R.buffer){if((0<f||f+u<s.length)&&(s.subarray?s=s.subarray(f,f+u):s=Array.prototype.slice.call(s,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(_=Nu(65536,u))?(F.fill(0,_,_+u),u=_):u=0,!u)throw new te(48);R.set(s,u)}else f=!1,u=s.byteOffset;return{Pc:u,Dc:f}},lc:function(s,u,f,y){return he.Mb.write(s,u,0,y,f,!1),0}}},wn=null,wi={},Ft=[],ps=1,le=null,kt=!0,te=null,qn={},Ut=(s,u={})=>{if(s=ce(s),!s)return{path:"",node:null};if(u=Object.assign({yc:!0,tc:0},u),8<u.tc)throw new te(32);s=s.split("/").filter(S=>!!S);for(var f=wn,y="/",_=0;_<s.length;_++){var k=_===s.length-1;if(k&&u.parent)break;if(f=Pn(f,s[_]),y=ee(y+"/"+s[_]),f.$b&&(!k||k&&u.yc)&&(f=f.$b.root),!k||u.Yb){for(k=0;(f.mode&61440)===40960;)if(f=Ni(y),y=ce($(y),f),f=Ut(y,{tc:u.tc+1}).node,40<k++)throw new te(32)}}return{path:y,node:f}},gn=s=>{for(var u;;){if(s===s.parent)return s=s.Ub.Ac,u?s[s.length-1]!=="/"?s+"/"+u:s+u:s;u=u?s.name+"/"+u:s.name,s=s.parent}},ms=(s,u)=>{for(var f=0,y=0;y<u.length;y++)f=(f<<5)-f+u.charCodeAt(y)|0;return(s+f>>>0)%le.length},Q=s=>{var u=ms(s.parent.id,s.name);if(le[u]===s)le[u]=s.ac;else for(u=le[u];u;){if(u.ac===s){u.ac=s.ac;break}u=u.ac}},Pn=(s,u)=>{var f;if(f=(f=Nr(s,"x"))?f:s.Cb.cc?0:2)throw new te(f,s);for(f=le[ms(s.id,u)];f;f=f.ac){var y=f.name;if(f.parent.id===s.id&&y===u)return f}return s.Cb.cc(s,u)},At=(s,u,f,y)=>(s=new wu(s,u,f,y),u=ms(s.parent.id,s.name),s.ac=le[u],le[u]=s),gi={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},ys=s=>{var u=["r","w","rw"][s&3];return s&512&&(u+="w"),u},Nr=(s,u)=>{if(kt)return 0;if(!u.includes("r")||s.mode&292){if(u.includes("w")&&!(s.mode&146)||u.includes("x")&&!(s.mode&73))return 2}else return 2;return 0},er=(s,u)=>{try{return Pn(s,u),20}catch{}return Nr(s,"wx")},Ro=(s,u,f)=>{try{var y=Pn(s,u)}catch(_){return _.Ob}if(s=Nr(s,"wx"))return s;if(f){if((y.mode&61440)!==16384)return 54;if(y===y.parent||gn(y)==="/")return 10}else if((y.mode&61440)===16384)return 31;return 0},ml=(s=0)=>{for(;4096>=s;s++)if(!Ft[s])return s;throw new te(33)},Do=(s,u)=>(Mr||(Mr=function(){this.hc={}},Mr.prototype={},Object.defineProperties(Mr.prototype,{object:{get:function(){return this.node},set:function(f){this.node=f}},flags:{get:function(){return this.hc.flags},set:function(f){this.hc.flags=f}},position:{get:function(){return this.hc.position},set:function(f){this.hc.position=f}}})),s=Object.assign(new Mr,s),u=ml(u),s.Wb=u,Ft[u]=s),Dr={open:s=>{s.Mb=wi[s.node.ec].Mb,s.Mb.open&&s.Mb.open(s)},Zb:()=>{throw new te(70)}},ws=(s,u)=>{wi[s]={Mb:u}},Po=(s,u)=>{var f=u==="/",y=!u;if(f&&wn)throw new te(10);if(!f&&!y){var _=Ut(u,{yc:!1});if(u=_.path,_=_.node,_.$b)throw new te(10);if((_.mode&61440)!==16384)throw new te(54)}u={type:s,Wc:{},Ac:u,Mc:[]},s=s.Ub(u),s.Ub=u,u.root=s,f?wn=s:_&&(_.$b=u,_.Ub&&_.Ub.Mc.push(u))},Lo=(s,u,f)=>{var y=Ut(s,{parent:!0}).node;if(s=V(s),!s||s==="."||s==="..")throw new te(28);var _=er(y,s);if(_)throw new te(_);if(!y.Cb.jc)throw new te(63);return y.Cb.jc(y,s,u,f)},bn=(s,u)=>Lo(s,(u!==void 0?u:511)&1023|16384,0),gs=(s,u,f)=>{typeof f>"u"&&(f=u,u=438),Lo(s,u|8192,f)},bi=(s,u)=>{if(!ce(s))throw new te(44);var f=Ut(u,{parent:!0}).node;if(!f)throw new te(44);u=V(u);var y=er(f,u);if(y)throw new te(y);if(!f.Cb.nc)throw new te(63);f.Cb.nc(f,u,s)},Mo=s=>{var u=Ut(s,{parent:!0}).node;s=V(s);var f=Pn(u,s),y=Ro(u,s,!0);if(y)throw new te(y);if(!u.Cb.mc)throw new te(63);if(f.$b)throw new te(10);u.Cb.mc(u,s),Q(f)},Ni=s=>{if(s=Ut(s).node,!s)throw new te(44);if(!s.Cb.fc)throw new te(28);return ce(gn(s.parent),s.Cb.fc(s))},Kt=(s,u)=>{if(s=Ut(s,{Yb:!u}).node,!s)throw new te(44);if(!s.Cb.Tb)throw new te(63);return s.Cb.Tb(s)},vi=s=>Kt(s,!0),bs=(s,u)=>{if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new te(63);s.Cb.Qb(s,{mode:u&4095|s.mode&-4096,timestamp:Date.now()})},Bo=(s,u)=>{if(0>u)throw new te(28);if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new te(63);if((s.mode&61440)===16384)throw new te(31);if((s.mode&61440)!==32768)throw new te(28);var f=Nr(s,"w");if(f)throw new te(f);s.Cb.Qb(s,{size:u,timestamp:Date.now()})},_i=(s,u,f)=>{if(s==="")throw new te(44);if(typeof u=="string"){var y=gi[u];if(typeof y>"u")throw Error("Unknown file open mode: "+u);u=y}if(f=u&64?(typeof f>"u"?438:f)&4095|32768:0,typeof s=="object")var _=s;else{s=ee(s);try{_=Ut(s,{Yb:!(u&131072)}).node}catch{}}if(y=!1,u&64)if(_){if(u&128)throw new te(20)}else _=Lo(s,f,0),y=!0;if(!_)throw new te(44);if((_.mode&61440)===8192&&(u&=-513),u&65536&&(_.mode&61440)!==16384)throw new te(54);if(!y&&(f=_?(_.mode&61440)===40960?32:(_.mode&61440)===16384&&(ys(u)!=="r"||u&512)?31:Nr(_,ys(u)):44))throw new te(f);return u&512&&!y&&Bo(_,0),u&=-131713,_=Do({node:_,path:gn(_),flags:u,seekable:!0,position:0,Mb:_.Mb,Tc:[],error:!1}),_.Mb.open&&_.Mb.open(_),!n.logReadFiles||u&1||(xi||(xi={}),s in xi||(xi[s]=1)),_},Fo=(s,u,f)=>{if(s.Wb===null)throw new te(8);if(!s.seekable||!s.Mb.Zb)throw new te(70);if(f!=0&&f!=1&&f!=2)throw new te(28);s.position=s.Mb.Zb(s,u,f),s.Tc=[]},Pr=()=>{te||(te=function(s,u){this.name="ErrnoError",this.node=u,this.Rc=function(f){this.Ob=f},this.Rc(s),this.message="FS error"},te.prototype=Error(),te.prototype.constructor=te,[44].forEach(s=>{qn[s]=new te(s),qn[s].stack="<generic error, no stack>"}))},Uo,Ns=(s,u)=>{var f=0;return s&&(f|=365),u&&(f|=146),f},Lr=(s,u,f)=>{s=ee("/dev/"+s);var y=Ns(!!u,!!f);tr||(tr=64);var _=tr++<<8|0;ws(_,{open:k=>{k.seekable=!1},close:()=>{f&&f.buffer&&f.buffer.length&&f(10)},read:(k,S,j,L)=>{for(var B=0,ie=0;ie<L;ie++){try{var Y=u()}catch{throw new te(29)}if(Y===void 0&&B===0)throw new te(6);if(Y==null)break;B++,S[j+ie]=Y}return B&&(k.node.timestamp=Date.now()),B},write:(k,S,j,L)=>{for(var B=0;B<L;B++)try{f(S[j+B])}catch{throw new te(29)}return L&&(k.node.timestamp=Date.now()),B}}),gs(s,y,_)},tr,Qe={},Mr,xi;function nr(s,u,f){if(u.charAt(0)==="/")return u;if(s=s===-100?"/":rn(s).path,u.length==0){if(!f)throw new te(44);return s}return ee(s+"/"+u)}function vs(s,u,f){try{var y=s(u)}catch(k){if(k&&k.node&&ee(u)!==ee(gn(k.node)))return-54;throw k}ae[f>>2]=y.Ic,ae[f+8>>2]=y.qc,ae[f+12>>2]=y.mode,ge[f+16>>2]=y.Oc,ae[f+20>>2]=y.uid,ae[f+24>>2]=y.Lc,ae[f+28>>2]=y.ec,Me=[y.size>>>0,(fe=y.size,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+40>>2]=Me[0],ae[f+44>>2]=Me[1],ae[f+48>>2]=4096,ae[f+52>>2]=y.Gc,s=y.Ec.getTime(),u=y.Nc.getTime();var _=y.Hc.getTime();return Me=[Math.floor(s/1e3)>>>0,(fe=Math.floor(s/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+56>>2]=Me[0],ae[f+60>>2]=Me[1],ge[f+64>>2]=s%1e3*1e3,Me=[Math.floor(u/1e3)>>>0,(fe=Math.floor(u/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+72>>2]=Me[0],ae[f+76>>2]=Me[1],ge[f+80>>2]=u%1e3*1e3,Me=[Math.floor(_/1e3)>>>0,(fe=Math.floor(_/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+88>>2]=Me[0],ae[f+92>>2]=Me[1],ge[f+96>>2]=_%1e3*1e3,Me=[y.qc>>>0,(fe=y.qc,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[f+104>>2]=Me[0],ae[f+108>>2]=Me[1],0}var Ei=void 0;function Oi(){return Ei+=4,ae[Ei-4>>2]}function rn(s){if(s=Ft[s],!s)throw new te(8);return s}function Cn(s,u,f){return ue(s,F,u,f)}function qi(s){return ge[s>>2]+4294967296*ae[s+4>>2]}var Ke=[0,31,60,91,121,152,182,213,244,274,305,335],Ci=[0,31,59,90,120,151,181,212,243,273,304,334];function Ii(s){var u=oe(s)+1,f=Zo(u);return f&&Cn(s,f,u),f}var Ln={};function Ti(){if(!Br){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},u;for(u in Ln)Ln[u]===void 0?delete s[u]:s[u]=Ln[u];var f=[];for(u in s)f.push(u+"="+s[u]);Br=f}return Br}var Br;function Si(){}function sn(){}function _s(){}function $o(){}function au(){}function xs(){}function Qo(){}function Es(){}function jo(){}function Os(){}function Mn(){}function qs(){}function Cs(){}function Fr(){}function Is(){}function uu(){}function zo(){}function cu(){}function Vo(){}function ki(){}function Ai(){}function Ho(){}function Ur(){}function $r(){}function Bn(){}function Wi(){}function Ko(){}function o(){}function l(){}function h(){}function w(){}function E(){}function D(){}function U(){}function ye(){}function Pe(){}function Ae(){}function it(){}function In(){}function Jo(s){C=s,b||0<tn||(n.onExit&&n.onExit(s),v=!0),g(s,new Dn(s))}function Go(s){s instanceof Dn||s=="unwind"||g(1,s)}function Ri(s){try{s()}catch(u){rt(u)}}function yl(s){var u={},f;for(f in s)(function(y){var _=s[y];u[y]=typeof _=="function"?function(){Ts.push(y);try{return _.apply(null,arguments)}finally{v||(Ts.pop()===y||rt(),Tn&&Fn===1&&Ts.length===0&&(Fn=0,Ri(Eu),typeof Fibers<"u"&&Fibers.Xc()))}}:_})(f);return u}var Fn=0,Tn=null,lu=0,Ts=[],fu={},hu={},wl=0,Yo=null,gl=[];function du(){return new Promise((s,u)=>{Yo={resolve:s,reject:u}})}function bl(){var s=Zo(12300),u=s+12;ae[s>>2]=u,ae[s+4>>2]=u+12288,u=Ts[0];var f=fu[u];return f===void 0&&(f=wl++,fu[u]=f,hu[f]=u),ae[s+8>>2]=f,s}function pu(s){if(!v){if(Fn===0){var u=!1,f=!1;s((y=0)=>{if(!v&&(lu=y,u=!0,f)){Fn=2,Ri(()=>Di(Tn)),y=!1;try{var _=(0,n.asm[hu[ae[Tn+8>>2]]])()}catch(j){_=j,y=!0}var k=!1;if(!Tn){var S=Yo;S&&(Yo=null,(y?S.reject:S.resolve)(_),k=!0)}if(y&&!k)throw _}}),f=!0,u||(Fn=1,Tn=bl(),Ri(()=>xu(Tn)))}else Fn===2?(Fn=0,Ri(na),gu(Tn),Tn=null,gl.forEach(y=>{if(!v)try{if(y(),!(b||0<tn))try{C=y=C,Jo(y)}catch(_){Go(_)}}catch(_){Go(_)}})):rt("invalid state: "+Fn);return lu}}function mu(s){return pu(u=>{s().then(u)})}var yu={};function Sn(s,u,f,y,_){function k(Y){return--tn,L!==0&&ea(L),u==="string"?M(Y):u==="boolean"?!!Y:Y}var S={string:Y=>{var se=0;if(Y!=null&&Y!==0){se=oe(Y)+1;var Ie=ta(se);Cn(Y,Ie,se),se=Ie}return se},array:Y=>{var se=ta(Y.length);return R.set(Y,se),se}};s=n["_"+s];var j=[],L=0;if(y)for(var B=0;B<y.length;B++){var ie=S[f[B]];ie?(L===0&&(L=_u()),j[B]=ie(y[B])):j[B]=y[B]}return f=Tn,y=s.apply(null,j),tn+=1,_=_&&_.async,Tn!=f?du().then(k):(y=k(y),_?Promise.resolve(y):y)}function wu(s,u,f,y){s||(s=this),this.parent=s,this.Ub=s.Ub,this.$b=null,this.id=ps++,this.name=u,this.mode=f,this.Cb={},this.Mb={},this.ec=y}Object.defineProperties(wu.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(s){s?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(s){s?this.mode|=146:this.mode&=-147}}}),Pr(),le=Array(4096),Po(he,"/"),bn("/tmp"),bn("/home"),bn("/home/web_user"),(()=>{bn("/dev"),ws(259,{read:()=>0,write:(y,_,k,S)=>S}),gs("/dev/null",259),xe(1280,Re),xe(1536,tt),gs("/dev/tty",1280),gs("/dev/tty1",1536);var s=new Uint8Array(1024),u=0,f=()=>(u===0&&(u=K(s).byteLength),s[--u]);Lr("random",f),Lr("urandom",f),bn("/dev/shm"),bn("/dev/shm/tmp")})(),(()=>{bn("/proc");var s=bn("/proc/self");bn("/proc/self/fd"),Po({Ub:()=>{var u=At(s,"fd",16895,73);return u.Cb={cc:(f,y)=>{var _=Ft[+y];if(!_)throw new te(8);return f={parent:null,Ub:{Ac:"fake"},Cb:{fc:()=>_.path}},f.parent=f}},u}},"/proc/self/fd")})(),function(){const s=new Map;n.setAuthorizer=function(u,f,y){return f?s.set(u,{f,uc:y}):s.delete(u),Sn("set_authorizer","number",["number"],[u])},Si=function(u,f,y,_,k,S){if(s.has(u)){const{f:j,uc:L}=s.get(u);return j(L,f,y?M(y):null,_?M(_):null,k?M(k):null,S?M(S):null)}return 0}}(),function(){const s=new Map,u=new Map;n.createFunction=function(f,y,_,k,S,j){const L=s.size;return s.set(L,{f:j,Xb:S}),Sn("create_function","number","number string number number number number".split(" "),[f,y,_,k,L,0])},n.createAggregate=function(f,y,_,k,S,j,L){const B=s.size;return s.set(B,{step:j,Jc:L,Xb:S}),Sn("create_function","number","number string number number number number".split(" "),[f,y,_,k,B,1])},n.getFunctionUserData=function(f){return u.get(f)},_s=function(f,y,_,k){f=s.get(f),u.set(y,f.Xb),f.f(y,new Uint32Array(F.buffer,k,_)),u.delete(y)},au=function(f,y,_,k){f=s.get(f),u.set(y,f.Xb),f.step(y,new Uint32Array(F.buffer,k,_)),u.delete(y)},sn=function(f,y){f=s.get(f),u.set(y,f.Xb),f.Jc(y),u.delete(y)}}(),function(){const s=new Map;n.progressHandler=function(u,f,y,_){return y?s.set(u,{f:y,uc:_}):s.delete(u),Sn("progress_handler",null,["number","number"],[u,f])},$o=function(u){if(s.has(u)){const{f,uc:y}=s.get(u);return f(y)}return 0}}(),function(){function s(L,B){const ie=`get${L}`,Y=`set${L}`;return new Proxy(new DataView(F.buffer,B,L==="Int32"?4:8),{get(se,Ie){if(Ie===ie)return function(Je,xt){if(!xt)throw Error("must be little endian");return se[Ie](Je,xt)};if(Ie===Y)return function(Je,xt,yt){if(!yt)throw Error("must be little endian");return se[Ie](Je,xt,yt)};if(typeof Ie=="string"&&Ie.match(/^(get)|(set)/))throw Error("invalid type");return se[Ie]}})}const u=typeof yu=="object",f=new Map,y=new Map,_=new Map,k=u?new Set:null,S=u?new Set:null,j=new Map;Ho=function(L,B,ie,Y){j.set(M(L),{size:B,dc:Array.from(new Uint32Array(F.buffer,Y,ie))})},n.createModule=function(L,B,ie,Y){u&&(ie.handleAsync=mu);const se=f.size;return f.set(se,{module:ie,Xb:Y}),Y=0,ie.xCreate&&(Y|=1),ie.xConnect&&(Y|=2),ie.xBestIndex&&(Y|=4),ie.xDisconnect&&(Y|=8),ie.xDestroy&&(Y|=16),ie.xOpen&&(Y|=32),ie.xClose&&(Y|=64),ie.xFilter&&(Y|=128),ie.xNext&&(Y|=256),ie.xEof&&(Y|=512),ie.xColumn&&(Y|=1024),ie.xRowid&&(Y|=2048),ie.xUpdate&&(Y|=4096),ie.xBegin&&(Y|=8192),ie.xSync&&(Y|=16384),ie.xCommit&&(Y|=32768),ie.xRollback&&(Y|=65536),ie.xFindFunction&&(Y|=131072),ie.xRename&&(Y|=262144),Sn("create_module","number",["number","string","number","number"],[L,B,se,Y])},qs=function(L,B,ie,Y,se,Ie){if(B=f.get(B),y.set(se,B),u){k.delete(se);for(const Je of k)y.delete(Je)}return Y=Array.from(new Uint32Array(F.buffer,Y,ie)).map(Je=>M(Je)),B.module.xCreate(L,B.Xb,Y,se,s("Int32",Ie))},Mn=function(L,B,ie,Y,se,Ie){if(B=f.get(B),y.set(se,B),u){k.delete(se);for(const Je of k)y.delete(Je)}return Y=Array.from(new Uint32Array(F.buffer,Y,ie)).map(Je=>M(Je)),B.module.xConnect(L,B.Xb,Y,se,s("Int32",Ie))},Qo=function(L,B){var ie=y.get(L),Y=j.get("sqlite3_index_info").dc;const se={};se.nConstraint=ze(B+Y[0],"i32"),se.aConstraint=[];for(var Ie=ze(B+Y[1],"*"),Je=j.get("sqlite3_index_constraint").size,xt=0;xt<se.nConstraint;++xt){var yt=se.aConstraint,on=yt.push,Wt=Ie+xt*Je,ks=j.get("sqlite3_index_constraint").dc,Qr={};Qr.iColumn=ze(Wt+ks[0],"i32"),Qr.op=ze(Wt+ks[1],"i8"),Qr.usable=!!ze(Wt+ks[2],"i8"),on.call(yt,Qr)}for(se.nOrderBy=ze(B+Y[2],"i32"),se.aOrderBy=[],Ie=ze(B+Y[3],"*"),Je=j.get("sqlite3_index_orderby").size,xt=0;xt<se.nOrderBy;++xt)yt=se.aOrderBy,on=yt.push,Wt=Ie+xt*Je,ks=j.get("sqlite3_index_orderby").dc,Qr={},Qr.iColumn=ze(Wt+ks[0],"i32"),Qr.desc=!!ze(Wt+ks[1],"i8"),on.call(yt,Qr);for(se.aConstraintUsage=[],Ie=0;Ie<se.nConstraint;++Ie)se.aConstraintUsage.push({argvIndex:0,omit:!1});for(se.idxNum=ze(B+Y[5],"i32"),se.idxStr=null,se.orderByConsumed=!!ze(B+Y[8],"i8"),se.estimatedCost=ze(B+Y[9],"double"),se.estimatedRows=ze(B+Y[10],"i64"),se.idxFlags=ze(B+Y[11],"i32"),se.colUsed=ze(B+Y[12],"i64"),L=ie.module.xBestIndex(L,se),ie=j.get("sqlite3_index_info").dc,Y=ze(B+ie[4],"*"),Ie=j.get("sqlite3_index_constraint_usage").size,on=0;on<se.nConstraint;++on)Je=Y+on*Ie,yt=se.aConstraintUsage[on],Wt=j.get("sqlite3_index_constraint_usage").dc,x(Je+Wt[0],yt.argvIndex,"i32"),x(Je+Wt[1],yt.omit?1:0,"i8");return x(B+ie[5],se.idxNum,"i32"),typeof se.idxStr=="string"&&(Y=oe(se.idxStr),Ie=Sn("sqlite3_malloc","number",["number"],[Y+1]),Cn(se.idxStr,Ie,Y+1),x(B+ie[6],Ie,"*"),x(B+ie[7],1,"i32")),x(B+ie[8],se.orderByConsumed,"i32"),x(B+ie[9],se.estimatedCost,"double"),x(B+ie[10],se.estimatedRows,"i64"),x(B+ie[11],se.idxFlags,"i32"),L},Fr=function(L){const B=y.get(L);return u?k.add(L):y.delete(L),B.module.xDisconnect(L)},Cs=function(L){const B=y.get(L);return u?k.add(L):y.delete(L),B.module.xDestroy(L)},cu=function(L,B){const ie=y.get(L);if(_.set(B,ie),u){S.delete(B);for(const Y of S)_.delete(Y)}return ie.module.xOpen(L,B)},Es=function(L){const B=_.get(L);return u?S.add(L):_.delete(L),B.module.xClose(L)},Is=function(L){return _.get(L).module.xEof(L)?1:0},uu=function(L,B,ie,Y,se){const Ie=_.get(L);return ie=ie?M(ie):null,se=new Uint32Array(F.buffer,se,Y),Ie.module.xFilter(L,B,ie,se)},zo=function(L){return _.get(L).module.xNext(L)},jo=function(L,B,ie){return _.get(L).module.xColumn(L,B,ie)},Ai=function(L,B){return _.get(L).module.xRowid(L,s("BigInt64",B))},$r=function(L,B,ie,Y){const se=y.get(L);return ie=new Uint32Array(F.buffer,ie,B),se.module.xUpdate(L,ie,s("BigInt64",Y))},xs=function(L){return y.get(L).module.xBegin(L)},Ur=function(L){return y.get(L).module.xSync(L)},Os=function(L){return y.get(L).module.xCommit(L)},ki=function(L){return y.get(L).module.xRollback(L)},Vo=function(L,B){const ie=y.get(L);return B=M(B),ie.module.xRename(L,B)}}(),function(){function s(S,j){const L=`get${S}`,B=`set${S}`;return new Proxy(new DataView(F.buffer,j,S==="Int32"?4:8),{get(ie,Y){if(Y===L)return function(se,Ie){if(!Ie)throw Error("must be little endian");return ie[Y](se,Ie)};if(Y===B)return function(se,Ie,Je){if(!Je)throw Error("must be little endian");return ie[Y](se,Ie,Je)};if(typeof Y=="string"&&Y.match(/^(get)|(set)/))throw Error("invalid type");return ie[Y]}})}function u(S){return S>>=2,ge[S]+ge[S+1]*2**32}const f=typeof yu=="object",y=new Map,_=new Map;n.registerVFS=function(S,j){if(Sn("sqlite3_vfs_find","number",["string"],[S.name]))throw Error(`VFS '${S.name}' already registered`);f&&(S.handleAsync=mu);var L=S.Vc??64;const B=n._malloc(4);return j=Sn("register_vfs","number",["string","number","number","number"],[S.name,L,j?1:0,B]),j||(L=ze(B,"*"),y.set(L,S)),n._free(B),j};const k=f?new Set:null;Ko=function(S){const j=_.get(S);return f?k.add(S):_.delete(S),j.xClose(S)},U=function(S,j,L,B){return _.get(S).xRead(S,F.subarray(j,j+L),u(B))},In=function(S,j,L,B){return _.get(S).xWrite(S,F.subarray(j,j+L),u(B))},Ae=function(S,j){return _.get(S).xTruncate(S,u(j))},Pe=function(S,j){return _.get(S).xSync(S,j)},w=function(S,j){const L=_.get(S);return j=s("BigInt64",j),L.xFileSize(S,j)},E=function(S,j){return _.get(S).xLock(S,j)},it=function(S,j){return _.get(S).xUnlock(S,j)},Wi=function(S,j){const L=_.get(S);return j=s("Int32",j),L.xCheckReservedLock(S,j)},h=function(S,j,L){const B=_.get(S);return L=new DataView(F.buffer,L),B.xFileControl(S,j,L)},ye=function(S){return _.get(S).xSectorSize(S)},l=function(S){return _.get(S).xDeviceCharacteristics(S)},D=function(S,j,L,B,ie){if(S=y.get(S),_.set(L,S),f){k.delete(L);for(var Y of k)_.delete(Y)}if(Y=null,B&64){Y=1;const se=[];for(;Y;){const Ie=F[j++];if(Ie)se.push(Ie);else switch(F[j]||(Y=null),Y){case 1:se.push(63),Y=2;break;case 2:se.push(61),Y=3;break;case 3:se.push(38),Y=2}}Y=new TextDecoder().decode(new Uint8Array(se))}else j&&(Y=M(j));return ie=s("Int32",ie),S.xOpen(Y,L,B,ie)},o=function(S,j,L){return y.get(S).xDelete(M(j),L)},Bn=function(S,j,L,B){return S=y.get(S),B=s("Int32",B),S.xAccess(M(j),L,B)}}();var Nl={a:function(s,u,f,y){rt("Assertion failed: "+M(s)+", at: "+[u?M(u):"unknown filename",f,y?M(y):"unknown function"])},K:function(s,u){try{return s=M(s),bs(s,u),0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},M:function(s,u,f){try{if(u=M(u),u=nr(s,u),f&-8)return-28;var y=Ut(u,{Yb:!0}).node;return y?(s="",f&4&&(s+="r"),f&2&&(s+="w"),f&1&&(s+="x"),s&&Nr(y,s)?-2:0):-44}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},L:function(s,u){try{var f=Ft[s];if(!f)throw new te(8);return bs(f.node,u),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},J:function(s){try{var u=Ft[s];if(!u)throw new te(8);var f=u.node,y=typeof f=="string"?Ut(f,{Yb:!0}).node:f;if(!y.Cb.Qb)throw new te(63);return y.Cb.Qb(y,{timestamp:Date.now()}),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},b:function(s,u,f){Ei=f;try{var y=rn(s);switch(u){case 0:var _=Oi();return 0>_?-28:Do(y,_).Wb;case 1:case 2:return 0;case 3:return y.flags;case 4:return _=Oi(),y.flags|=_,0;case 5:return _=Oi(),_e[_+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ae[Xo()>>2]=28,-1;default:return-28}}catch(k){if(typeof Qe>"u"||k.name!=="ErrnoError")throw k;return-k.Ob}},I:function(s,u){try{var f=rn(s);return vs(Kt,f.path,u)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},j:function(s,u,f){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return-61;var y=Ft[s];if(!y)throw new te(8);if(!(y.flags&2097155))throw new te(28);return Bo(y.node,u),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},C:function(s,u){try{if(u===0)return-28;var f=oe("/")+1;return u<f?-68:(Cn("/",s,u),f)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},F:function(s,u){try{return s=M(s),vs(vi,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},z:function(s,u,f){try{return u=M(u),u=nr(s,u),u=ee(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),bn(u,f),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},E:function(s,u,f,y){try{u=M(u);var _=y&256;return u=nr(s,u,y&4096),vs(_?vi:Kt,u,f)}catch(k){if(typeof Qe>"u"||k.name!=="ErrnoError")throw k;return-k.Ob}},u:function(s,u,f,y){Ei=y;try{u=M(u),u=nr(s,u);var _=y?Oi():0;return _i(u,f,_).Wb}catch(k){if(typeof Qe>"u"||k.name!=="ErrnoError")throw k;return-k.Ob}},s:function(s,u,f,y){try{if(u=M(u),u=nr(s,u),0>=y)return-28;var _=Ni(u),k=Math.min(y,oe(_)),S=R[f+k];return Cn(_,f,y+1),R[f+k]=S,k}catch(j){if(typeof Qe>"u"||j.name!=="ErrnoError")throw j;return-j.Ob}},r:function(s){try{return s=M(s),Mo(s),0}catch(u){if(typeof Qe>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(s,u){try{return s=M(s),vs(Kt,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},o:function(s,u,f){try{if(u=M(u),u=nr(s,u),f===0){s=u;var y=Ut(s,{parent:!0}).node;if(!y)throw new te(44);var _=V(s),k=Pn(y,_),S=Ro(y,_,!1);if(S)throw new te(S);if(!y.Cb.oc)throw new te(63);if(k.$b)throw new te(10);y.Cb.oc(y,_),Q(k)}else f===512?Mo(u):rt("Invalid flags passed to unlinkat");return 0}catch(j){if(typeof Qe>"u"||j.name!=="ErrnoError")throw j;return-j.Ob}},n:function(s,u,f){try{if(u=M(u),u=nr(s,u,!0),f){var y=qi(f),_=ae[f+8>>2];k=1e3*y+_/1e6,f+=16,y=qi(f),_=ae[f+8>>2],S=1e3*y+_/1e6}else var k=Date.now(),S=k;s=k;var j=Ut(u,{Yb:!0}).node;return j.Cb.Qb(j,{timestamp:Math.max(s,S)}),0}catch(L){if(typeof Qe>"u"||L.name!=="ErrnoError")throw L;return-L.Ob}},y:function(s,u){s=new Date(1e3*qi(s)),ae[u>>2]=s.getSeconds(),ae[u+4>>2]=s.getMinutes(),ae[u+8>>2]=s.getHours(),ae[u+12>>2]=s.getDate(),ae[u+16>>2]=s.getMonth(),ae[u+20>>2]=s.getFullYear()-1900,ae[u+24>>2]=s.getDay();var f=s.getFullYear();ae[u+28>>2]=(f%4!==0||f%100===0&&f%400!==0?Ci:Ke)[s.getMonth()]+s.getDate()-1|0,ae[u+36>>2]=-(60*s.getTimezoneOffset()),f=new Date(s.getFullYear(),6,1).getTimezoneOffset();var y=new Date(s.getFullYear(),0,1).getTimezoneOffset();ae[u+32>>2]=(f!=y&&s.getTimezoneOffset()==Math.min(y,f))|0},w:function(s,u,f,y,_,k,S){try{var j=rn(y);if(u&2&&!(f&2)&&(j.flags&2097155)!==2)throw new te(2);if((j.flags&2097155)===1)throw new te(2);if(!j.Mb.kc)throw new te(43);var L=j.Mb.kc(j,s,_,u,f),B=L.Pc;return ae[k>>2]=L.Dc,ge[S>>2]=B,0}catch(ie){if(typeof Qe>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Ob}},x:function(s,u,f,y,_,k){try{var S=rn(_);if(f&2){if((S.node.mode&61440)!==32768)throw new te(43);y&2||S.Mb.lc&&S.Mb.lc(S,F.slice(s,s+u),k,u,y)}}catch(j){if(typeof Qe>"u"||j.name!=="ErrnoError")throw j;return-j.Ob}},p:function(s,u,f){function y(L){return(L=L.toTimeString().match(/\(([A-Za-z ]+)\)$/))?L[1]:"GMT"}var _=new Date().getFullYear(),k=new Date(_,0,1),S=new Date(_,6,1);_=k.getTimezoneOffset();var j=S.getTimezoneOffset();ge[s>>2]=60*Math.max(_,j),ae[u>>2]=+(_!=j),s=y(k),u=y(S),s=Ii(s),u=Ii(u),j<_?(ge[f>>2]=s,ge[f+4>>2]=u):(ge[f>>2]=u,ge[f+4>>2]=s)},e:function(){return Date.now()},d:()=>performance.now(),l:function(s){var u=F.length;if(s>>>=0,2147483648<s)return!1;for(var f=1;4>=f;f*=2){var y=u*(1+.2/f);y=Math.min(y,s+100663296);var _=Math,k=_.min;y=Math.max(s,y),y+=(65536-y%65536)%65536;e:{var S=O.buffer;try{O.grow(k.call(_,2147483648,y)-S.byteLength+65535>>>16),pn();var j=1;break e}catch{}j=void 0}if(j)return!0}return!1},A:function(s,u){var f=0;return Ti().forEach(function(y,_){var k=u+f;for(_=ge[s+4*_>>2]=k,k=0;k<y.length;++k)R[_++>>0]=y.charCodeAt(k);R[_>>0]=0,f+=y.length+1}),0},B:function(s,u){var f=Ti();ge[s>>2]=f.length;var y=0;return f.forEach(function(_){y+=_.length+1}),ge[u>>2]=y,0},f:function(s){try{var u=rn(s);if(u.Wb===null)throw new te(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(f){throw f}finally{Ft[u.Wb]=null}return u.Wb=null,0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},m:function(s,u){try{var f=rn(s);return R[u>>0]=f.Sb?2:(f.mode&61440)===16384?3:(f.mode&61440)===40960?7:4,_e[u+2>>1]=0,Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[u+8>>2]=Me[0],ae[u+12>>2]=Me[1],Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[u+16>>2]=Me[0],ae[u+20>>2]=Me[1],0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return y.Ob}},t:function(s,u,f,y){try{e:{var _=rn(s);s=u;for(var k,S=u=0;S<f;S++){var j=ge[s>>2],L=ge[s+4>>2];s+=8;var B=_,ie=j,Y=L,se=k,Ie=R;if(0>Y||0>se)throw new te(28);if(B.Wb===null)throw new te(8);if((B.flags&2097155)===1)throw new te(8);if((B.node.mode&61440)===16384)throw new te(31);if(!B.Mb.read)throw new te(28);var Je=typeof se<"u";if(!Je)se=B.position;else if(!B.seekable)throw new te(70);var xt=B.Mb.read(B,Ie,ie,Y,se);Je||(B.position+=xt);var yt=xt;if(0>yt){var on=-1;break e}if(u+=yt,yt<L)break;typeof k<"u"&&(k+=yt)}on=u}return ge[y>>2]=on,0}catch(Wt){if(typeof Qe>"u"||Wt.name!=="ErrnoError")throw Wt;return Wt.Ob}},i:function(s,u,f,y,_){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return 61;var k=rn(s);return Fo(k,u,y),Me=[k.position>>>0,(fe=k.position,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],ae[_>>2]=Me[0],ae[_+4>>2]=Me[1],k.pc&&u===0&&y===0&&(k.pc=null),0}catch(S){if(typeof Qe>"u"||S.name!=="ErrnoError")throw S;return S.Ob}},D:function(s){try{var u=rn(s);return pu(function(f){var y=u.node.Ub;y.type.Sc?y.type.Sc(y,!1,function(_){f(_?function(){return 29}:0)}):f(0)})}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},q:function(s,u,f,y){try{e:{var _=rn(s);s=u;for(var k,S=u=0;S<f;S++){var j=ge[s>>2],L=ge[s+4>>2];s+=8;var B=_,ie=j,Y=L,se=k,Ie=R;if(0>Y||0>se)throw new te(28);if(B.Wb===null)throw new te(8);if(!(B.flags&2097155))throw new te(8);if((B.node.mode&61440)===16384)throw new te(31);if(!B.Mb.write)throw new te(28);B.seekable&&B.flags&1024&&Fo(B,0,2);var Je=typeof se<"u";if(!Je)se=B.position;else if(!B.seekable)throw new te(70);var xt=B.Mb.write(B,Ie,ie,Y,se,void 0);Je||(B.position+=xt);var yt=xt;if(0>yt){var on=-1;break e}u+=yt,typeof k<"u"&&(k+=yt)}on=u}return ge[y>>2]=on,0}catch(Wt){if(typeof Qe>"u"||Wt.name!=="ErrnoError")throw Wt;return Wt.Ob}},ra:Si,N:sn,ga:_s,ca:$o,Y:au,la:xs,G:Qo,h:Es,oa:jo,ja:Os,ea:Mn,fa:qs,k:Cs,v:Fr,pa:Is,g:uu,qa:zo,da:cu,ha:Vo,ia:ki,na:Ai,c:Ho,ka:Ur,ma:$r,aa:Bn,V:Wi,$:Ko,ba:o,S:l,U:h,Z:w,X:E,R:D,Q:U,T:ye,_:Pe,O:Ae,W:it,P:In};(function(){function s(f){if(f=f.exports,f=yl(f),n.asm=f,O=n.asm.sa,pn(),mn.unshift(n.asm.ta),pe--,n.monitorRunDependencies&&n.monitorRunDependencies(pe),pe==0&&qe){var y=qe;qe=null,y()}return f}var u={a:Nl};if(pe++,n.monitorRunDependencies&&n.monitorRunDependencies(pe),n.instantiateWasm)try{return n.instantiateWasm(u,s)}catch(f){ne("Module.instantiateWasm callback failed with error: "+f),a(f)}return nn(u,function(f){s(f.instance)}).catch(a),{}})(),n._sqlite3_vfs_find=function(){return(n._sqlite3_vfs_find=n.asm.ua).apply(null,arguments)},n._sqlite3_malloc=function(){return(n._sqlite3_malloc=n.asm.va).apply(null,arguments)},n._sqlite3_free=function(){return(n._sqlite3_free=n.asm.wa).apply(null,arguments)},n._sqlite3_prepare_v2=function(){return(n._sqlite3_prepare_v2=n.asm.xa).apply(null,arguments)},n._sqlite3_step=function(){return(n._sqlite3_step=n.asm.ya).apply(null,arguments)},n._sqlite3_column_int64=function(){return(n._sqlite3_column_int64=n.asm.za).apply(null,arguments)},n._sqlite3_column_int=function(){return(n._sqlite3_column_int=n.asm.Aa).apply(null,arguments)},n._sqlite3_finalize=function(){return(n._sqlite3_finalize=n.asm.Ba).apply(null,arguments)},n._sqlite3_reset=function(){return(n._sqlite3_reset=n.asm.Ca).apply(null,arguments)},n._sqlite3_clear_bindings=function(){return(n._sqlite3_clear_bindings=n.asm.Da).apply(null,arguments)},n._sqlite3_value_blob=function(){return(n._sqlite3_value_blob=n.asm.Ea).apply(null,arguments)},n._sqlite3_value_text=function(){return(n._sqlite3_value_text=n.asm.Fa).apply(null,arguments)},n._sqlite3_value_bytes=function(){return(n._sqlite3_value_bytes=n.asm.Ga).apply(null,arguments)},n._sqlite3_value_double=function(){return(n._sqlite3_value_double=n.asm.Ha).apply(null,arguments)},n._sqlite3_value_int=function(){return(n._sqlite3_value_int=n.asm.Ia).apply(null,arguments)},n._sqlite3_value_int64=function(){return(n._sqlite3_value_int64=n.asm.Ja).apply(null,arguments)},n._sqlite3_value_type=function(){return(n._sqlite3_value_type=n.asm.Ka).apply(null,arguments)},n._sqlite3_result_blob=function(){return(n._sqlite3_result_blob=n.asm.La).apply(null,arguments)},n._sqlite3_result_double=function(){return(n._sqlite3_result_double=n.asm.Ma).apply(null,arguments)},n._sqlite3_result_error=function(){return(n._sqlite3_result_error=n.asm.Na).apply(null,arguments)},n._sqlite3_result_int=function(){return(n._sqlite3_result_int=n.asm.Oa).apply(null,arguments)},n._sqlite3_result_int64=function(){return(n._sqlite3_result_int64=n.asm.Pa).apply(null,arguments)},n._sqlite3_result_null=function(){return(n._sqlite3_result_null=n.asm.Qa).apply(null,arguments)},n._sqlite3_result_text=function(){return(n._sqlite3_result_text=n.asm.Ra).apply(null,arguments)},n._sqlite3_column_count=function(){return(n._sqlite3_column_count=n.asm.Sa).apply(null,arguments)},n._sqlite3_data_count=function(){return(n._sqlite3_data_count=n.asm.Ta).apply(null,arguments)},n._sqlite3_column_blob=function(){return(n._sqlite3_column_blob=n.asm.Ua).apply(null,arguments)},n._sqlite3_column_bytes=function(){return(n._sqlite3_column_bytes=n.asm.Va).apply(null,arguments)},n._sqlite3_column_double=function(){return(n._sqlite3_column_double=n.asm.Wa).apply(null,arguments)},n._sqlite3_column_text=function(){return(n._sqlite3_column_text=n.asm.Xa).apply(null,arguments)},n._sqlite3_column_type=function(){return(n._sqlite3_column_type=n.asm.Ya).apply(null,arguments)},n._sqlite3_column_name=function(){return(n._sqlite3_column_name=n.asm.Za).apply(null,arguments)},n._sqlite3_bind_blob=function(){return(n._sqlite3_bind_blob=n.asm._a).apply(null,arguments)},n._sqlite3_bind_double=function(){return(n._sqlite3_bind_double=n.asm.$a).apply(null,arguments)},n._sqlite3_bind_int=function(){return(n._sqlite3_bind_int=n.asm.ab).apply(null,arguments)},n._sqlite3_bind_int64=function(){return(n._sqlite3_bind_int64=n.asm.bb).apply(null,arguments)},n._sqlite3_bind_null=function(){return(n._sqlite3_bind_null=n.asm.cb).apply(null,arguments)},n._sqlite3_bind_text=function(){return(n._sqlite3_bind_text=n.asm.db).apply(null,arguments)},n._sqlite3_bind_parameter_count=function(){return(n._sqlite3_bind_parameter_count=n.asm.eb).apply(null,arguments)},n._sqlite3_bind_parameter_name=function(){return(n._sqlite3_bind_parameter_name=n.asm.fb).apply(null,arguments)},n._sqlite3_sql=function(){return(n._sqlite3_sql=n.asm.gb).apply(null,arguments)},n._sqlite3_exec=function(){return(n._sqlite3_exec=n.asm.hb).apply(null,arguments)},n._sqlite3_errmsg=function(){return(n._sqlite3_errmsg=n.asm.ib).apply(null,arguments)},n._sqlite3_declare_vtab=function(){return(n._sqlite3_declare_vtab=n.asm.jb).apply(null,arguments)},n._sqlite3_libversion=function(){return(n._sqlite3_libversion=n.asm.kb).apply(null,arguments)},n._sqlite3_libversion_number=function(){return(n._sqlite3_libversion_number=n.asm.lb).apply(null,arguments)},n._sqlite3_changes=function(){return(n._sqlite3_changes=n.asm.mb).apply(null,arguments)},n._sqlite3_close=function(){return(n._sqlite3_close=n.asm.nb).apply(null,arguments)},n._sqlite3_limit=function(){return(n._sqlite3_limit=n.asm.ob).apply(null,arguments)},n._sqlite3_open_v2=function(){return(n._sqlite3_open_v2=n.asm.pb).apply(null,arguments)},n._sqlite3_get_autocommit=function(){return(n._sqlite3_get_autocommit=n.asm.qb).apply(null,arguments)};function Xo(){return(Xo=n.asm.rb).apply(null,arguments)}var Zo=n._malloc=function(){return(Zo=n._malloc=n.asm.sb).apply(null,arguments)},gu=n._free=function(){return(gu=n._free=n.asm.tb).apply(null,arguments)};n._RegisterExtensionFunctions=function(){return(n._RegisterExtensionFunctions=n.asm.ub).apply(null,arguments)},n._set_authorizer=function(){return(n._set_authorizer=n.asm.vb).apply(null,arguments)},n._create_function=function(){return(n._create_function=n.asm.wb).apply(null,arguments)},n._create_module=function(){return(n._create_module=n.asm.xb).apply(null,arguments)},n._progress_handler=function(){return(n._progress_handler=n.asm.yb).apply(null,arguments)},n._register_vfs=function(){return(n._register_vfs=n.asm.zb).apply(null,arguments)},n._getSqliteFree=function(){return(n._getSqliteFree=n.asm.Ab).apply(null,arguments)};var bu=n._main=function(){return(bu=n._main=n.asm.Bb).apply(null,arguments)};function Nu(){return(Nu=n.asm.Db).apply(null,arguments)}function vu(){return(vu=n.asm.Eb).apply(null,arguments)}function _u(){return(_u=n.asm.Fb).apply(null,arguments)}function ea(){return(ea=n.asm.Gb).apply(null,arguments)}function ta(){return(ta=n.asm.Hb).apply(null,arguments)}function xu(){return(xu=n.asm.Ib).apply(null,arguments)}function Eu(){return(Eu=n.asm.Jb).apply(null,arguments)}function Di(){return(Di=n.asm.Kb).apply(null,arguments)}function na(){return(na=n.asm.Lb).apply(null,arguments)}n.getTempRet0=vu,n.ccall=Sn,n.cwrap=function(s,u,f,y){var _=!f||f.every(k=>k==="number"||k==="boolean");return u!=="string"&&_&&!y?n["_"+s]:function(){return Sn(s,u,f,arguments,y)}},n.setValue=x,n.getValue=ze,n.UTF8ToString=M,n.stringToUTF8=Cn,n.lengthBytesUTF8=oe;var Ss;qe=function s(){Ss||I(),Ss||(qe=s)};function I(){function s(){if(!Ss&&(Ss=!0,n.calledRun=!0,!v)){if(n.noFSInit||Uo||(Uo=!0,Pr(),n.stdin=n.stdin,n.stdout=n.stdout,n.stderr=n.stderr,n.stdin?Lr("stdin",n.stdin):bi("/dev/tty","/dev/stdin"),n.stdout?Lr("stdout",null,n.stdout):bi("/dev/tty","/dev/stdout"),n.stderr?Lr("stderr",null,n.stderr):bi("/dev/tty1","/dev/stderr"),_i("/dev/stdin",0),_i("/dev/stdout",1),_i("/dev/stderr",1)),kt=!1,Bt(mn),Bt(et),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),J){var u=bu;try{var f=u(0,0);C=f,Jo(f)}catch(y){Go(y)}}if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)u=n.postRun.shift(),en.unshift(u);Bt(en)}}if(!(0<pe)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ft();Bt(Rn),0<pe||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),s()},1)):s())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();var J=!0;return n.noInitialRun&&(J=!1),I(),e.ready}})();class MN{constructor(){we(this,"mxPathName",64)}xClose(e){return bt}xRead(e,n,r){return bt}xWrite(e,n,r){return bt}xTruncate(e,n){return bt}xSync(e,n){return je}xFileSize(e,n){return bt}xLock(e,n){return je}xUnlock(e,n){return je}xCheckReservedLock(e,n){return n.setInt32(0,0,!0),je}xFileControl(e,n,r){return bm}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 0}xOpen(e,n,r,a){return Nm}xDelete(e,n){return bt}xAccess(e,n,r){return bt}handleAsync(e){return e()}}const BN=Ps|Ui|zu|kN|Vu;var Lt,yo,Xa,Za,mf,Gc,_m,Yc,xm;class FN{constructor(){W(this,Za);W(this,Gc);W(this,Yc);W(this,Lt,Ps);we(this,"timeoutMillis",0);W(this,yo,new Map);W(this,Xa,Promise.resolve(0))}get state(){return i(this,Lt)}async lock(e){return Ne(this,Za,mf).call(this,Ne(this,Gc,_m),e)}async unlock(e){return Ne(this,Za,mf).call(this,Ne(this,Yc,xm),e)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(e,n){return new Promise(async(r,a)=>{try{await navigator.locks.request(e,n,c=>{if(r(c),c)return new Promise(m=>i(this,yo).set(e,m))})}catch(c){a(c)}})}_releaseWebLock(e){var n;(n=i(this,yo).get(e))==null||n(),i(this,yo).delete(e)}async _pollWebLock(e){var r;return(r=(await navigator.locks.query()).held.find(({name:a})=>a===e))==null?void 0:r.mode}_getTimeoutSignal(){if(this.timeoutMillis){const e=new AbortController;return setTimeout(()=>e.abort(),this.timeoutMillis),e.signal}}}Lt=new WeakMap,yo=new WeakMap,Xa=new WeakMap,Za=new WeakSet,mf=async function(e,n){const r=n&BN;try{const a=()=>e.call(this,r);return await z(this,Xa,i(this,Xa).then(a,a)),z(this,Lt,r),je}catch(a){return a.name==="AbortError"?xN:(console.error(a),qN)}},Gc=new WeakSet,_m=async function(e){if(e===i(this,Lt))return je;switch(i(this,Lt)){case Ps:switch(e){case Ui:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case Ui:switch(e){case zu:return this._SHAREDtoRESERVED();case Vu:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case zu:switch(e){case Vu:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}},Yc=new WeakSet,xm=async function(e){if(e===i(this,Lt))return je;switch(i(this,Lt)){case Vu:switch(e){case Ui:return this._EXCLUSIVEtoSHARED();case Ps:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case zu:switch(e){case Ui:return this._RESERVEDtoSHARED();case Ps:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}case Ui:switch(e){case Ps:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Lt)} -> ${e}`)}};class UN extends FN{constructor(e){super(),this._lockName=e+"-outer",this._reservedName=e+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}const $N=5e3;let QN=0;const Wl=new WeakMap;function sr(...t){}var wo,go,eu,qt,tu,bo,rs,Xc,Em;class jN{constructor(e,n={durability:"default"}){W(this,Xc);W(this,wo,void 0);W(this,go,void 0);W(this,eu,void 0);W(this,qt,null);W(this,tu,0);W(this,bo,Promise.resolve());W(this,rs,Promise.resolve());z(this,go,Promise.resolve(e).then(r=>z(this,wo,r))),z(this,eu,n)}async close(){const e=i(this,wo)??await i(this,go);await i(this,bo),await this.sync(),e.close()}async run(e,n){const r=i(this,bo).then(()=>Ne(this,Xc,Em).call(this,e,n));return z(this,bo,r.catch(()=>{})),r}async sync(){await i(this,rs),z(this,rs,Promise.resolve())}}wo=new WeakMap,go=new WeakMap,eu=new WeakMap,qt=new WeakMap,tu=new WeakMap,bo=new WeakMap,rs=new WeakMap,Xc=new WeakSet,Em=async function(e,n){var a,c;const r=i(this,wo)??await i(this,go);if(e==="readwrite"&&((a=i(this,qt))==null?void 0:a.mode)==="readonly")z(this,qt,null);else if(performance.now()-i(this,tu)>$N){try{(c=i(this,qt))==null||c.commit()}catch(m){if(m.name!=="InvalidStateError")throw m}await new Promise(m=>setTimeout(m)),z(this,qt,null)}for(let m=0;m<2;++m){if(!i(this,qt)){z(this,qt,r.transaction(r.objectStoreNames,e,i(this,eu)));const g=z(this,tu,performance.now());z(this,rs,i(this,rs).then(()=>new Promise((N,d)=>{i(this,qt).addEventListener("complete",T=>{N(),i(this,qt)===T.target&&z(this,qt,null),sr(`transaction ${Wl.get(T.target)} complete`)}),i(this,qt).addEventListener("abort",T=>{console.warn("tx abort",(performance.now()-g)/1e3);const P=T.target.error;d(P),i(this,qt)===T.target&&z(this,qt,null),sr(`transaction ${Wl.get(T.target)} aborted`,P)})}))),Wl.set(i(this,qt),QN++)}try{const g=Object.fromEntries(Array.from(r.objectStoreNames,N=>[N,new zN(i(this,qt).objectStore(N))]));return await n(g)}catch(g){if(z(this,qt,null),m)throw g}}};function Hr(t){return new Promise((e,n)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>n(t.error))})}var _t;class zN{constructor(e){W(this,_t,void 0);z(this,_t,e)}get(e){sr(`get ${i(this,_t).name}`,e);const n=i(this,_t).get(e);return Hr(n)}getAll(e,n){sr(`getAll ${i(this,_t).name}`,e,n);const r=i(this,_t).getAll(e,n);return Hr(r)}getKey(e){sr(`getKey ${i(this,_t).name}`,e);const n=i(this,_t).getKey(e);return Hr(n)}getAllKeys(e,n){sr(`getAllKeys ${i(this,_t).name}`,e,n);const r=i(this,_t).getAllKeys(e,n);return Hr(r)}put(e,n){sr(`put ${i(this,_t).name}`,e,n);const r=i(this,_t).put(e,n);return Hr(r)}delete(e){sr(`delete ${i(this,_t).name}`,e);const n=i(this,_t).delete(e);return Hr(n)}clear(){sr(`clear ${i(this,_t).name}`);const e=i(this,_t).clear();return Hr(e)}index(e){return new VN(i(this,_t).index(e))}}_t=new WeakMap;var is;class VN{constructor(e){W(this,is,void 0);z(this,is,e)}getAllKeys(e,n){sr(`IDBIndex.getAllKeys ${i(this,is).objectStore.name}<${i(this,is).name}>`,e,n);const r=i(this,is).getAllKeys(e,n);return Hr(r)}}is=new WeakMap;const HN=512,dd=3e3,pd={durability:"default",purge:"deferred",purgeAtLeast:16};function an(...t){}var oi,Mt,ct,ss,os,Sr,nu,yf,Zc,Om,el,qm,ai,Ls,tl,Cm;class KN extends MN{constructor(n="wa-sqlite",r=pd){super();W(this,nu);W(this,Zc);W(this,el);W(this,ai);W(this,tl);W(this,oi,void 0);W(this,Mt,new Map);W(this,ct,void 0);W(this,ss,new Set);W(this,os,performance.now());W(this,Sr,new Set);this.name=n,z(this,oi,Object.assign({},pd,r)),z(this,ct,new jN(JN(n),{durability:i(this,oi).durability}))}async close(){var n;for(const r of i(this,Mt).keys())await this.xClose(r);await((n=i(this,ct))==null?void 0:n.close()),z(this,ct,null)}xOpen(n,r,a,c){return this.handleAsync(async()=>{n===null&&(n=`null_${r}`),an(`xOpen ${n} 0x${r.toString(16)} 0x${a.toString(16)}`);try{const m=new URL(n,"http://localhost/"),g={path:m.pathname,flags:a,block0:null,locks:new UN(m.pathname)};return i(this,Mt).set(r,g),await i(this,ct).run("readwrite",async({blocks:N})=>{if(g.block0=await N.get(Ne(this,ai,Ls).call(this,g,0)),!g.block0)if(a&vm)g.block0={path:g.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},N.put(g.block0);else throw new Error(`file not found: ${g.path}`)}),c.setInt32(0,a&IN,!0),je}catch(m){return console.error(m),Nm}})}xClose(n){return this.handleAsync(async()=>{try{const r=i(this,Mt).get(n);return r&&(an(`xClose ${r.path}`),i(this,Mt).delete(n),r.flags&SN&&i(this,ct).run("readwrite",({blocks:a})=>{a.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),je}catch(r){return console.error(r),bt}})}xRead(n,r,a){return this.handleAsync(async()=>{const c=i(this,Mt).get(n);an(`xRead ${c.path} ${r.byteLength} ${a}`);try{return await i(this,ct).run("readonly",async({blocks:g})=>{let N=0;for(;N<r.byteLength;){const d=a+N,T=d<c.block0.data.byteLength?c.block0:await g.get(Ne(this,ai,Ls).call(this,c,-d));if(!T||T.data.byteLength-T.offset<=d)return r.fill(0,N),CN;const P=r.subarray(N),G=d+T.offset,ne=Math.min(Math.max(T.data.byteLength-G,0),P.byteLength);P.set(T.data.subarray(G,G+ne)),N+=ne}return je})}catch(m){return console.error(m),bt}})}xWrite(n,r,a){const c=i(this,Sr).has(n);if(c||performance.now()-i(this,os)>dd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n),await new Promise(N=>setTimeout(N));const g=Ne(this,nu,yf).call(this,n,r,a);return z(this,os,performance.now()),g});return c&&i(this,Sr).delete(n),m}return Ne(this,nu,yf).call(this,n,r,a)}xTruncate(n,r){const a=i(this,Mt).get(n);an(`xTruncate ${a.path} ${r}`);try{Object.assign(a.block0,{fileSize:r,data:a.block0.data.slice(0,r)});const c=Object.assign({},a.block0);return i(this,ct).run("readwrite",({blocks:m})=>{m.delete(Ne(this,ai,Ls).call(this,a,-1/0,-r)),m.put(c)}),je}catch(c){return console.error(c),bt}}xSync(n,r){const a=i(this,Sr).has(n);if(a||i(this,oi).durability!=="relaxed"||performance.now()-i(this,os)>dd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n);const g=await Ne(this,Zc,Om).call(this,n,r);return z(this,os,performance.now()),g});return a&&i(this,Sr).delete(n),m}const c=i(this,Mt).get(n);return an(`xSync ${c.path} ${r}`),je}xFileSize(n,r){const a=i(this,Mt).get(n);return an(`xFileSize ${a.path}`),r.setBigInt64(0,BigInt(a.block0.fileSize),!0),je}xLock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xLock ${a.path} ${r}`);try{const c=await a.locks.lock(r);return c===je&&a.locks.state===Ui&&(a.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get(Ne(this,ai,Ls).call(this,a,0)))),c}catch(c){return console.error(c),bt}})}xUnlock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xUnlock ${a.path} ${r}`);try{return a.locks.unlock(r)}catch(c){return console.error(c),bt}})}xCheckReservedLock(n,r){return this.handleAsync(async()=>{const a=i(this,Mt).get(n);an(`xCheckReservedLock ${a.path}`);const c=await a.locks.isSomewhereReserved();return r.setInt32(0,c?1:0,!0),je})}xSectorSize(n){return HN}xDeviceCharacteristics(n){return DN|AN|WN|RN}xFileControl(n,r,a){const c=i(this,Mt).get(n);switch(an(`xFileControl ${c.path} ${r}`),r){case 11:return c.overwrite=!0,je;case 21:if(c.overwrite)try{return this.handleAsync(async()=>(await Ne(this,tl,Cm).call(this,c),je))}catch(m){return console.error(m),bt}return je;case 22:return c.overwrite=!1,je;case 31:return this.handleAsync(async()=>{try{return c.block0.version--,c.changedPages=new Set,i(this,ct).run("readwrite",async({blocks:m})=>{const g=await m.index("version").getAllKeys(IDBKeyRange.bound([c.path],[c.path,c.block0.version]));for(const N of g)m.delete(N)}),je}catch(m){return console.error(m),bt}});case 32:try{const m=Object.assign({},c.block0);m.data=m.data.slice();const g=c.changedPages;return c.changedPages=null,i(this,ct).run("readwrite",async({blocks:N})=>{N.put(m);const d=await N.get([c.path,"purge",0])??{path:c.path,offset:"purge",version:0,data:new Map,count:0};d.count+=g.size;for(const T of g)d.data.set(T,m.version);N.put(d),Ne(this,el,qm).call(this,c.path,d.count)}),je}catch(m){return console.error(m),bt}case 33:return this.handleAsync(async()=>{try{return c.changedPages=null,c.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get([c.path,0,c.block0.version+1])),je}catch(m){return console.error(m),bt}});default:return bm}}xAccess(n,r,a){return this.handleAsync(async()=>{try{const c=new URL(n,"file://localhost/").pathname;an(`xAccess ${c} ${r}`);const m=await i(this,ct).run("readonly",({blocks:g})=>g.getKey(Ne(this,ai,Ls).call(this,{path:c},0)));return a.setInt32(0,m?1:0,!0),je}catch(c){return console.error(c),bt}})}xDelete(n,r){return this.handleAsync(async()=>{const a=new URL(n,"file://localhost/").pathname;try{return i(this,ct).run("readwrite",({blocks:c})=>c.delete(IDBKeyRange.bound([a],[a,[]]))),r&&await i(this,ct).sync(),je}catch(c){return console.error(c),bt}})}async purge(n){const r=Date.now();await i(this,ct).run("readwrite",async({blocks:a})=>{const c=await a.get([n,"purge",0]);if(c){for(const[m,g]of c.data)a.delete(IDBKeyRange.bound([n,m,g],[n,m,1/0],!0,!1));await a.delete([n,"purge",0])}an(`purge ${n} ${(c==null?void 0:c.data.size)??0} pages in ${Date.now()-r} ms`)})}}oi=new WeakMap,Mt=new WeakMap,ct=new WeakMap,ss=new WeakMap,os=new WeakMap,Sr=new WeakMap,nu=new WeakSet,yf=function(n,r,a){const c=i(this,Mt).get(n);an(`xWrite ${c.path} ${r.byteLength} ${a}`);try{const m=c.block0.fileSize;c.block0.fileSize=Math.max(c.block0.fileSize,a+r.byteLength);const g=a===0?c.block0:{path:c.path,offset:-a,version:c.block0.version,data:null};return g.data=r.slice(),c.changedPages?(m===c.block0.fileSize&&c.changedPages.add(-a),a!==0&&i(this,ct).run("readwrite",({blocks:N})=>N.put(g))):i(this,ct).run("readwrite",({blocks:N})=>N.put(g)),je}catch(m){return console.error(m),bt}},Zc=new WeakSet,Om=async function(n,r){const a=i(this,Mt).get(n);an(`xSync ${a.path} ${r}`);try{await i(this,ct).sync()}catch(c){return console.error(c),bt}return je},el=new WeakSet,qm=function(n,r){i(this,oi).purge==="manual"||i(this,ss).has(n)||r<i(this,oi).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(n),i(this,ss).delete(n)}):setTimeout(()=>{this.purge(n),i(this,ss).delete(n)}),i(this,ss).add(n))},ai=new WeakSet,Ls=function(n,r,a=0){const c=!r||-r<n.block0.data.length?-1/0:n.block0.version;return IDBKeyRange.bound([n.path,r,c],[n.path,a,1/0])},tl=new WeakSet,Cm=async function(n){const r=n.block0.data.length;if(r<18)return;const a=new DataView(n.block0.data.buffer,n.block0.data.byteOffset);let c=a.getUint16(16);if(c===1&&(c=65536),c===r)return;const m=Math.max(r,c),g=m/r,N=m/c,T=a.getUint32(28)*c,P=n.block0.version;await i(this,ct).run("readwrite",async({blocks:G})=>{const ne=await G.index("version").getAllKeys(IDBKeyRange.bound([n.path,P+1],[n.path,1/0]));for(const X of ne)G.delete(X);G.delete([n.path,"purge",0]);for(let X=0;X<T;X+=m){const b=await G.getAll(IDBKeyRange.lowerBound([n.path,-(X+m),1/0]),g);for(const O of b)G.delete([O.path,O.offset,O.version]);if(N===1){const O=new Uint8Array(c);for(const C of b)O.set(C.data,-(X+C.offset));const v={path:n.path,offset:-X,version:P,data:O};v.offset===0&&(v.fileSize=T,n.block0=v),G.put(v)}else{const O=b[0];for(let v=0;v<N;++v){const C=-(X+v*c);if(-C>=T)break;const R={path:O.path,offset:C,version:P,data:O.data.subarray(v*c,(v+1)*c)};R.offset===0&&(R.fileSize=T,n.block0=R),G.put(R)}}}})};function JN(t){return new Promise((e,n)=>{const r=globalThis.indexedDB.open(t,5);r.addEventListener("upgradeneeded",function(){r.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),r.addEventListener("success",()=>{e(r.result)}),r.addEventListener("error",()=>{n(r.error)})})}const GN=""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,YN=new Bb({async database(){const t=await LN({locateFile:()=>GN}),e=PN(t),n="wa-sqlite-test";e.vfs_register(new KN(n));const r=await e.open_v2(n,void 0,n);return{sqlite:e,db:r}}});function XN(){console.log("start wa-sqlite test"),eh(YN).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite]",e))})}function ZN(t=new Map){let e=(c,m)=>{let g=t.get(c);g?g.push(m):t.set(c,[m])},n=(c,m)=>{if(!c){t.clear();return}let g=t.get(c);g&&(m?g.splice(g.indexOf(m)>>>0,1):t.set(c,[]))};return{emit:(c,...m)=>{for(let g of t.get(c)||[])g(...m)},on:e,once:(c,m)=>{const g=(...N)=>{n(c,g),m(...N)};e(c,g)},off:n}}var e0=class{constructor(t){we(this,"config");we(this,"worker");we(this,"connection");we(this,"connectionMutex",new t0);we(this,"mitt");this.config=t}async init(){var e,n;this.worker=this.config.worker??new Worker(new URL(""+new URL("worker-e552ba61.js",import.meta.url).href,self.location),{type:"module"}),this.mitt=ZN(),this.worker.onmessage=({data:{type:r,...a}})=>{var c;(c=this.mitt)==null||c.emit(r,a)};const t={type:"init",dbName:this.config.dbName,url:this.config.url};this.worker.postMessage(t),await new Promise((r,a)=>{var c;(c=this.mitt)==null||c.once("init",({err:m})=>{m?a(m):r()})}),this.connection=new n0(this.worker,this.mitt),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{var n;(n=this.mitt)==null||n.once("close",({err:r})=>{var a,c;r?e(r):((a=this.worker)==null||a.terminate(),(c=this.mitt)==null||c.off(),this.mitt=void 0,t())})})}},t0=class{constructor(){we(this,"promise");we(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t==null||t()}},n0=class{constructor(t,e){we(this,"worker");we(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("wasqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t,c={type:"run",mode:r.kind==="SelectQueryNode"?"query":r.kind==="RawNode"?"raw":"exec",sql:n,parameters:e};return this.worker.postMessage(c),new Promise((m,g)=>{!this.mitt&&g("kysely instance has been destroyed"),this.mitt.once("run",({data:N,err:d})=>{!d&&N?m(N):g(d)})})}},ru,gd,r0=(gd=class{constructor(t){W(this,ru,void 0);z(this,ru,t)}createDriver(){return new e0(i(this,ru))}createQueryCompiler(){return new rm}createAdapter(){return new um}createIntrospector(t){return new om(t)}},ru=new WeakMap,gd);const i0=new r0({dbName:"wa-sqlite-worker-test"});function s0(){console.log("start wa-sqlite-worker test"),eh(i0).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite-worker]",e))})}const o0=Nt("h1",null,[Ca(" test "),Nt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ca(" WASM dialect ")],-1),a0=Nt("br",null,null,-1),u0=Nt("h3",null,"see worker result in console",-1),c0=Nt("h3",null,[Ca(" you can explore "),Nt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ca(" file using "),Nt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),l0=Nt("br",null,null,-1),f0={class:"buttons"},h0=Nt("br",null,null,-1),d0=Nt("div",null," result run in main thread: ",-1),p0=Uy({__name:"App",setup(t){const e=new vN,{result:n,run:r}=NN(),a=new _N;function c(){r()}function m(){e.postMessage("")}function g(){a.postMessage("")}function N(){XN()}function d(){s0()}async function T(){(await window.indexedDB.databases()).forEach(ne=>{window.indexedDB.deleteDatabase(ne.name)})}async function P(){const G=await navigator.storage.getDirectory();await td("sqljs"),await td("sqlijsWorker"),await T();try{await G.removeEntry("test.db")}catch{}try{await G.removeEntry("test.db-journal")}catch{}console.log("clear all")}return(G,ne)=>(bw(),_w(cr,null,[o0,a0,u0,c0,l0,Nt("div",f0,[Nt("button",{onClick:ne[0]||(ne[0]=X=>c())}," test sqljs in main thread "),Nt("button",{onClick:ne[1]||(ne[1]=X=>m())}," test sqljs in Worker "),Nt("button",{onClick:ne[2]||(ne[2]=X=>g())}," test officialWasm in Worker "),Nt("button",{onClick:ne[3]||(ne[3]=X=>N())}," test wa-sqlite in main thread "),Nt("button",{onClick:ne[4]||(ne[4]=X=>d())}," test wa-sqlite in Worker "),Nt("button",{onClick:ne[5]||(ne[5]=X=>P())}," clear ")]),h0,d0,Nt("pre",null,""+Qm(Ud(n))+`
  `,1)],64))}});ig(p0).mount("#root");
