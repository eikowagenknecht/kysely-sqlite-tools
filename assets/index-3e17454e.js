var Tm=Object.defineProperty;var Sm=(t,e,n)=>e in t?Tm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>(Sm(t,typeof e!="symbol"?e+"":e,n),n),_l=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var i=(t,e,n)=>(_l(t,e,"read from private field"),n?n.call(t):e.get(t)),W=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,r)=>(_l(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var ve=(t,e,n)=>(_l(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function gf(t,e){const n=Object.create(null),r=t.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return e?a=>!!n[a.toLowerCase()]:a=>!!n[a]}const ot={},Vs=[],Xn=()=>{},Am=()=>!1,km=/^on[^a-z]/,nl=t=>km.test(t),bf=t=>t.startsWith("onUpdate:"),Mt=Object.assign,Nf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Wm=Object.prototype.hasOwnProperty,Be=(t,e)=>Wm.call(t,e),Ce=Array.isArray,Hs=t=>il(t)==="[object Map]",Nd=t=>il(t)==="[object Set]",Te=t=>typeof t=="function",It=t=>typeof t=="string",rl=t=>typeof t=="symbol",lt=t=>t!==null&&typeof t=="object",vd=t=>(lt(t)||Te(t))&&Te(t.then)&&Te(t.catch),_d=Object.prototype.toString,il=t=>_d.call(t),Rm=t=>il(t).slice(8,-1),xd=t=>il(t)==="[object Object]",vf=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Du=gf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Dm=/-(\w)/g,vo=sl(t=>t.replace(Dm,(e,n)=>n?n.toUpperCase():"")),Pm=/\B([A-Z])/g,To=sl(t=>t.replace(Pm,"-$1").toLowerCase()),Ed=sl(t=>t.charAt(0).toUpperCase()+t.slice(1)),xl=sl(t=>t?`on${Ed(t)}`:""),fs=(t,e)=>!Object.is(t,e),El=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Hu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Lm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let sh;const Dl=()=>sh||(sh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _f(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],a=It(r)?Um(r):_f(r);if(a)for(const c in a)e[c]=a[c]}return e}else if(It(t)||lt(t))return t}const Mm=/;(?![^(]*\))/g,Bm=/:([^]+)/,Fm=/\/\*[^]*?\*\//g;function Um(t){const e={};return t.replace(Fm,"").split(Mm).forEach(n=>{if(n){const r=n.split(Bm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xf(t){let e="";if(It(t))e=t;else if(Ce(t))for(let n=0;n<t.length;n++){const r=xf(t[n]);r&&(e+=r+" ")}else if(lt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const $m="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qm=gf($m);function Od(t){return!!t||t===""}const jm=t=>It(t)?t:t==null?"":Ce(t)||lt(t)&&(t.toString===_d||!Te(t.toString))?JSON.stringify(t,qd,2):String(t),qd=(t,e)=>e&&e.__v_isRef?qd(t,e.value):Hs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,a])=>(n[`${r} =>`]=a,n),{})}:Nd(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!Ce(e)&&!xd(e)?String(e):e;let $n;class zm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$n,!e&&$n&&(this.index=($n.scopes||($n.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=$n;try{return $n=this,e()}finally{$n=n}}}on(){$n=this}off(){$n=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function Vm(t,e=$n){e&&e.active&&e.effects.push(t)}function Hm(){return $n}const Ef=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Cd=t=>(t.w&fi)>0,Id=t=>(t.n&fi)>0,Km=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=fi},Jm=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const a=e[r];Cd(a)&&!Id(a)?a.delete(t):e[n++]=a,a.w&=~fi,a.n&=~fi}e.length=n}},Pl=new WeakMap;let aa=0,fi=1;const Ll=30;let Jn;const as=Symbol(""),Ml=Symbol("");class Of{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Vm(this,r)}run(){if(!this.active)return this.fn();let e=Jn,n=ui;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Jn,Jn=this,ui=!0,fi=1<<++aa,aa<=Ll?Km(this):oh(this),this.fn()}finally{aa<=Ll&&Jm(this),fi=1<<--aa,Jn=this.parent,ui=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Jn===this?this.deferStop=!0:this.active&&(oh(this),this.onStop&&this.onStop(),this.active=!1)}}function oh(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ui=!0;const Td=[];function So(){Td.push(ui),ui=!1}function Ao(){const t=Td.pop();ui=t===void 0?!0:t}function pn(t,e,n){if(ui&&Jn){let r=Pl.get(t);r||Pl.set(t,r=new Map);let a=r.get(n);a||r.set(n,a=Ef()),Sd(a)}}function Sd(t,e){let n=!1;aa<=Ll?Id(t)||(t.n|=fi,n=!Cd(t)):n=!t.has(Jn),n&&(t.add(Jn),Jn.deps.push(t))}function Ar(t,e,n,r,a,c){const m=Pl.get(t);if(!m)return;let g=[];if(e==="clear")g=[...m.values()];else if(n==="length"&&Ce(t)){const v=Number(r);m.forEach((d,C)=>{(C==="length"||!rl(C)&&C>=v)&&g.push(d)})}else switch(n!==void 0&&g.push(m.get(n)),e){case"add":Ce(t)?vf(n)&&g.push(m.get("length")):(g.push(m.get(as)),Hs(t)&&g.push(m.get(Ml)));break;case"delete":Ce(t)||(g.push(m.get(as)),Hs(t)&&g.push(m.get(Ml)));break;case"set":Hs(t)&&g.push(m.get(as));break}if(g.length===1)g[0]&&Bl(g[0]);else{const v=[];for(const d of g)d&&v.push(...d);Bl(Ef(v))}}function Bl(t,e){const n=Ce(t)?t:[...t];for(const r of n)r.computed&&ah(r);for(const r of n)r.computed||ah(r)}function ah(t,e){(t!==Jn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Gm=gf("__proto__,__v_isRef,__isVue"),Ad=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(rl)),uh=Ym();function Ym(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ue(this);for(let c=0,m=this.length;c<m;c++)pn(r,"get",c+"");const a=r[e](...n);return a===-1||a===!1?r[e](...n.map(Ue)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){So();const r=Ue(this)[e].apply(this,n);return Ao(),r}}),t}function Xm(t){const e=Ue(this);return pn(e,"has",t),e.hasOwnProperty(t)}class kd{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,r){const a=this._isReadonly,c=this._shallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return c;if(n==="__v_raw"&&r===(a?c?fy:Pd:c?Dd:Rd).get(e))return e;const m=Ce(e);if(!a){if(m&&Be(uh,n))return Reflect.get(uh,n,r);if(n==="hasOwnProperty")return Xm}const g=Reflect.get(e,n,r);return(rl(n)?Ad.has(n):Gm(n))||(a||pn(e,"get",n),c)?g:Vt(g)?m&&vf(n)?g:g.value:lt(g)?a?Ld(g):If(g):g}}class Wd extends kd{constructor(e=!1){super(!1,e)}set(e,n,r,a){let c=e[n];if(_o(c)&&Vt(c)&&!Vt(r))return!1;if(!this._shallow&&(!Ku(r)&&!_o(r)&&(c=Ue(c),r=Ue(r)),!Ce(e)&&Vt(c)&&!Vt(r)))return c.value=r,!0;const m=Ce(e)&&vf(n)?Number(n)<e.length:Be(e,n),g=Reflect.set(e,n,r,a);return e===Ue(a)&&(m?fs(r,c)&&Ar(e,"set",n,r):Ar(e,"add",n,r)),g}deleteProperty(e,n){const r=Be(e,n);e[n];const a=Reflect.deleteProperty(e,n);return a&&r&&Ar(e,"delete",n,void 0),a}has(e,n){const r=Reflect.has(e,n);return(!rl(n)||!Ad.has(n))&&pn(e,"has",n),r}ownKeys(e){return pn(e,"iterate",Ce(e)?"length":as),Reflect.ownKeys(e)}}class Zm extends kd{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ey=new Wd,ty=new Zm,ny=new Wd(!0),qf=t=>t,ol=t=>Reflect.getPrototypeOf(t);function Ou(t,e,n=!1,r=!1){t=t.__v_raw;const a=Ue(t),c=Ue(e);n||(fs(e,c)&&pn(a,"get",e),pn(a,"get",c));const{has:m}=ol(a),g=r?qf:n?Sf:_a;if(m.call(a,e))return g(t.get(e));if(m.call(a,c))return g(t.get(c));t!==a&&t.get(e)}function qu(t,e=!1){const n=this.__v_raw,r=Ue(n),a=Ue(t);return e||(fs(t,a)&&pn(r,"has",t),pn(r,"has",a)),t===a?n.has(t):n.has(t)||n.has(a)}function Cu(t,e=!1){return t=t.__v_raw,!e&&pn(Ue(t),"iterate",as),Reflect.get(t,"size",t)}function ch(t){t=Ue(t);const e=Ue(this);return ol(e).has.call(e,t)||(e.add(t),Ar(e,"add",t,t)),this}function lh(t,e){e=Ue(e);const n=Ue(this),{has:r,get:a}=ol(n);let c=r.call(n,t);c||(t=Ue(t),c=r.call(n,t));const m=a.call(n,t);return n.set(t,e),c?fs(e,m)&&Ar(n,"set",t,e):Ar(n,"add",t,e),this}function fh(t){const e=Ue(this),{has:n,get:r}=ol(e);let a=n.call(e,t);a||(t=Ue(t),a=n.call(e,t)),r&&r.call(e,t);const c=e.delete(t);return a&&Ar(e,"delete",t,void 0),c}function hh(){const t=Ue(this),e=t.size!==0,n=t.clear();return e&&Ar(t,"clear",void 0,void 0),n}function Iu(t,e){return function(r,a){const c=this,m=c.__v_raw,g=Ue(m),v=e?qf:t?Sf:_a;return!t&&pn(g,"iterate",as),m.forEach((d,C)=>r.call(a,v(d),v(C),c))}}function Tu(t,e,n){return function(...r){const a=this.__v_raw,c=Ue(a),m=Hs(c),g=t==="entries"||t===Symbol.iterator&&m,v=t==="keys"&&m,d=a[t](...r),C=n?qf:e?Sf:_a;return!e&&pn(c,"iterate",v?Ml:as),{next(){const{value:R,done:G}=d.next();return G?{value:R,done:G}:{value:g?[C(R[0]),C(R[1])]:C(R),done:G}},[Symbol.iterator](){return this}}}}function jr(t){return function(...e){return t==="delete"?!1:this}}function ry(){const t={get(c){return Ou(this,c)},get size(){return Cu(this)},has:qu,add:ch,set:lh,delete:fh,clear:hh,forEach:Iu(!1,!1)},e={get(c){return Ou(this,c,!1,!0)},get size(){return Cu(this)},has:qu,add:ch,set:lh,delete:fh,clear:hh,forEach:Iu(!1,!0)},n={get(c){return Ou(this,c,!0)},get size(){return Cu(this,!0)},has(c){return qu.call(this,c,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!1)},r={get(c){return Ou(this,c,!0,!0)},get size(){return Cu(this,!0)},has(c){return qu.call(this,c,!0)},add:jr("add"),set:jr("set"),delete:jr("delete"),clear:jr("clear"),forEach:Iu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{t[c]=Tu(c,!1,!1),n[c]=Tu(c,!0,!1),e[c]=Tu(c,!1,!0),r[c]=Tu(c,!0,!0)}),[t,n,e,r]}const[iy,sy,oy,ay]=ry();function Cf(t,e){const n=e?t?ay:oy:t?sy:iy;return(r,a,c)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?r:Reflect.get(Be(n,a)&&a in r?n:r,a,c)}const uy={get:Cf(!1,!1)},cy={get:Cf(!1,!0)},ly={get:Cf(!0,!1)},Rd=new WeakMap,Dd=new WeakMap,Pd=new WeakMap,fy=new WeakMap;function hy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dy(t){return t.__v_skip||!Object.isExtensible(t)?0:hy(Rm(t))}function If(t){return _o(t)?t:Tf(t,!1,ey,uy,Rd)}function py(t){return Tf(t,!1,ny,cy,Dd)}function Ld(t){return Tf(t,!0,ty,ly,Pd)}function Tf(t,e,n,r,a){if(!lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const c=a.get(t);if(c)return c;const m=dy(t);if(m===0)return t;const g=new Proxy(t,m===2?r:n);return a.set(t,g),g}function Ks(t){return _o(t)?Ks(t.__v_raw):!!(t&&t.__v_isReactive)}function _o(t){return!!(t&&t.__v_isReadonly)}function Ku(t){return!!(t&&t.__v_isShallow)}function Md(t){return Ks(t)||_o(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Bd(t){return Hu(t,"__v_skip",!0),t}const _a=t=>lt(t)?If(t):t,Sf=t=>lt(t)?Ld(t):t;function Fd(t){ui&&Jn&&(t=Ue(t),Sd(t.dep||(t.dep=Ef())))}function Ud(t,e){t=Ue(t);const n=t.dep;n&&Bl(n)}function Vt(t){return!!(t&&t.__v_isRef===!0)}function my(t){return yy(t,!1)}function yy(t,e){return Vt(t)?t:new wy(t,e)}class wy{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ue(e),this._value=n?e:_a(e)}get value(){return Fd(this),this._value}set value(e){const n=this.__v_isShallow||Ku(e)||_o(e);e=n?e:Ue(e),fs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:_a(e),Ud(this))}}function $d(t){return Vt(t)?t.value:t}const gy={get:(t,e,n)=>$d(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const a=t[e];return Vt(a)&&!Vt(n)?(a.value=n,!0):Reflect.set(t,e,n,r)}};function Qd(t){return Ks(t)?t:new Proxy(t,gy)}class by{constructor(e,n,r,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Of(e,()=>{this._dirty||(this._dirty=!0,Ud(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const e=Ue(this);return Fd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ny(t,e,n=!1){let r,a;const c=Te(t);return c?(r=t,a=Xn):(r=t.get,a=t.set),new by(r,a,c||!a,n)}function ci(t,e,n,r){let a;try{a=r?t(...r):t()}catch(c){al(c,e,n)}return a}function Zn(t,e,n,r){if(Te(t)){const c=ci(t,e,n,r);return c&&vd(c)&&c.catch(m=>{al(m,e,n)}),c}const a=[];for(let c=0;c<t.length;c++)a.push(Zn(t[c],e,n,r));return a}function al(t,e,n,r=!0){const a=e?e.vnode:null;if(e){let c=e.parent;const m=e.proxy,g=n;for(;c;){const d=c.ec;if(d){for(let C=0;C<d.length;C++)if(d[C](t,m,g)===!1)return}c=c.parent}const v=e.appContext.config.errorHandler;if(v){ci(v,null,10,[t,m,g]);return}}vy(t,n,a,r)}function vy(t,e,n,r=!0){console.error(t)}let xa=!1,Fl=!1;const jt=[];let hr=0;const Js=[];let xr=null,Bi=0;const jd=Promise.resolve();let Af=null;function _y(t){const e=Af||jd;return t?e.then(this?t.bind(this):t):e}function xy(t){let e=hr+1,n=jt.length;for(;e<n;){const r=e+n>>>1,a=jt[r],c=Ea(a);c<t||c===t&&a.pre?e=r+1:n=r}return e}function kf(t){(!jt.length||!jt.includes(t,xa&&t.allowRecurse?hr+1:hr))&&(t.id==null?jt.push(t):jt.splice(xy(t.id),0,t),zd())}function zd(){!xa&&!Fl&&(Fl=!0,Af=jd.then(Hd))}function Ey(t){const e=jt.indexOf(t);e>hr&&jt.splice(e,1)}function Oy(t){Ce(t)?Js.push(...t):(!xr||!xr.includes(t,t.allowRecurse?Bi+1:Bi))&&Js.push(t),zd()}function dh(t,e=xa?hr+1:0){for(;e<jt.length;e++){const n=jt[e];n&&n.pre&&(jt.splice(e,1),e--,n())}}function Vd(t){if(Js.length){const e=[...new Set(Js)];if(Js.length=0,xr){xr.push(...e);return}for(xr=e,xr.sort((n,r)=>Ea(n)-Ea(r)),Bi=0;Bi<xr.length;Bi++)xr[Bi]();xr=null,Bi=0}}const Ea=t=>t.id==null?1/0:t.id,qy=(t,e)=>{const n=Ea(t)-Ea(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Hd(t){Fl=!1,xa=!0,jt.sort(qy);const e=Xn;try{for(hr=0;hr<jt.length;hr++){const n=jt[hr];n&&n.active!==!1&&ci(n,null,14)}}finally{hr=0,jt.length=0,Vd(),xa=!1,Af=null,(jt.length||Js.length)&&Hd()}}function Cy(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ot;let a=n;const c=e.startsWith("update:"),m=c&&e.slice(7);if(m&&m in r){const C=`${m==="modelValue"?"model":m}Modifiers`,{number:R,trim:G}=r[C]||ot;G&&(a=n.map(te=>It(te)?te.trim():te)),R&&(a=n.map(Lm))}let g,v=r[g=xl(e)]||r[g=xl(vo(e))];!v&&c&&(v=r[g=xl(To(e))]),v&&Zn(v,t,6,a);const d=r[g+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[g])return;t.emitted[g]=!0,Zn(d,t,6,a)}}function Kd(t,e,n=!1){const r=e.emitsCache,a=r.get(t);if(a!==void 0)return a;const c=t.emits;let m={},g=!1;if(!Te(t)){const v=d=>{const C=Kd(d,e,!0);C&&(g=!0,Mt(m,C))};!n&&e.mixins.length&&e.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}return!c&&!g?(lt(t)&&r.set(t,null),null):(Ce(c)?c.forEach(v=>m[v]=null):Mt(m,c),lt(t)&&r.set(t,m),m)}function ul(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(t,e[0].toLowerCase()+e.slice(1))||Be(t,To(e))||Be(t,e))}let pr=null,Jd=null;function Ju(t){const e=pr;return pr=t,Jd=t&&t.type.__scopeId||null,e}function Iy(t,e=pr,n){if(!e||t._n)return t;const r=(...a)=>{r._d&&xh(-1);const c=Ju(e);let m;try{m=t(...a)}finally{Ju(c),r._d&&xh(1)}return m};return r._n=!0,r._c=!0,r._d=!0,r}function Ol(t){const{type:e,vnode:n,proxy:r,withProxy:a,props:c,propsOptions:[m],slots:g,attrs:v,emit:d,render:C,renderCache:R,data:G,setupState:te,ctx:ae,inheritAttrs:b}=t;let E,N;const I=Ju(t);try{if(n.shapeFlag&4){const V=a||r;E=lr(C.call(V,V,R,c,te,G,ae)),N=v}else{const V=e;E=lr(V.length>1?V(c,{attrs:v,slots:g,emit:d}):V(c,null)),N=e.props?v:Ty(v)}}catch(V){fa.length=0,al(V,t,1),E=us(Oa)}let M=E;if(N&&b!==!1){const V=Object.keys(N),{shapeFlag:Ne}=M;V.length&&Ne&7&&(m&&V.some(bf)&&(N=Sy(N,m)),M=xo(M,N))}return n.dirs&&(M=xo(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),E=M,Ju(I),E}const Ty=t=>{let e;for(const n in t)(n==="class"||n==="style"||nl(n))&&((e||(e={}))[n]=t[n]);return e},Sy=(t,e)=>{const n={};for(const r in t)(!bf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ay(t,e,n){const{props:r,children:a,component:c}=t,{props:m,children:g,patchFlag:v}=e,d=c.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return r?ph(r,m,d):!!m;if(v&8){const C=e.dynamicProps;for(let R=0;R<C.length;R++){const G=C[R];if(m[G]!==r[G]&&!ul(d,G))return!0}}}else return(a||g)&&(!g||!g.$stable)?!0:r===m?!1:r?m?ph(r,m,d):!0:!!m;return!1}function ph(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let a=0;a<r.length;a++){const c=r[a];if(e[c]!==t[c]&&!ul(n,c))return!0}return!1}function ky({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Wy=t=>t.__isSuspense;function Ry(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Oy(t)}const Su={};function ql(t,e,n){return Gd(t,e,n)}function Gd(t,e,{immediate:n,deep:r,flush:a,onTrack:c,onTrigger:m}=ot){var g;const v=Hm()===((g=zt)==null?void 0:g.scope)?zt:null;let d,C=!1,R=!1;if(Vt(t)?(d=()=>t.value,C=Ku(t)):Ks(t)?(d=()=>t,r=!0):Ce(t)?(R=!0,C=t.some(V=>Ks(V)||Ku(V)),d=()=>t.map(V=>{if(Vt(V))return V.value;if(Ks(V))return Bs(V);if(Te(V))return ci(V,v,2)})):Te(t)?e?d=()=>ci(t,v,2):d=()=>{if(!(v&&v.isUnmounted))return G&&G(),Zn(t,v,3,[te])}:d=Xn,e&&r){const V=d;d=()=>Bs(V())}let G,te=V=>{G=I.onStop=()=>{ci(V,v,4)}},ae;if(Ia)if(te=Xn,e?n&&Zn(e,v,3,[d(),R?[]:void 0,te]):d(),a==="sync"){const V=Ww();ae=V.__watcherHandles||(V.__watcherHandles=[])}else return Xn;let b=R?new Array(t.length).fill(Su):Su;const E=()=>{if(I.active)if(e){const V=I.run();(r||C||(R?V.some((Ne,re)=>fs(Ne,b[re])):fs(V,b)))&&(G&&G(),Zn(e,v,3,[V,b===Su?void 0:R&&b[0]===Su?[]:b,te]),b=V)}else I.run()};E.allowRecurse=!!e;let N;a==="sync"?N=E:a==="post"?N=()=>cn(E,v&&v.suspense):(E.pre=!0,v&&(E.id=v.uid),N=()=>kf(E));const I=new Of(d,N);e?n?E():b=I.run():a==="post"?cn(I.run.bind(I),v&&v.suspense):I.run();const M=()=>{I.stop(),v&&v.scope&&Nf(v.scope.effects,I)};return ae&&ae.push(M),M}function Dy(t,e,n){const r=this.proxy,a=It(t)?t.includes(".")?Yd(r,t):()=>r[t]:t.bind(r,r);let c;Te(e)?c=e:(c=e.handler,n=e);const m=zt;Eo(this);const g=Gd(a,c.bind(r),n);return m?Eo(m):cs(),g}function Yd(t,e){const n=e.split(".");return()=>{let r=t;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function Bs(t,e){if(!lt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Vt(t))Bs(t.value,e);else if(Ce(t))for(let n=0;n<t.length;n++)Bs(t[n],e);else if(Nd(t)||Hs(t))t.forEach(n=>{Bs(n,e)});else if(xd(t))for(const n in t)Bs(t[n],e);return t}function Pi(t,e,n,r){const a=t.dirs,c=e&&e.dirs;for(let m=0;m<a.length;m++){const g=a[m];c&&(g.oldValue=c[m].value);let v=g.dir[r];v&&(So(),Zn(v,n,8,[t.el,g,t,e]),Ao())}}/*! #__NO_SIDE_EFFECTS__ */function Py(t,e){return Te(t)?(()=>Mt({name:t.name},e,{setup:t}))():t}const Pu=t=>!!t.type.__asyncLoader,Xd=t=>t.type.__isKeepAlive;function Ly(t,e){Zd(t,"a",e)}function My(t,e){Zd(t,"da",e)}function Zd(t,e,n=zt){const r=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(cl(e,r,n),n){let a=n.parent;for(;a&&a.parent;)Xd(a.parent.vnode)&&By(r,e,n,a),a=a.parent}}function By(t,e,n,r){const a=cl(e,t,r,!0);ep(()=>{Nf(r[e],a)},n)}function cl(t,e,n=zt,r=!1){if(n){const a=n[t]||(n[t]=[]),c=e.__weh||(e.__weh=(...m)=>{if(n.isUnmounted)return;So(),Eo(n);const g=Zn(e,n,t,m);return cs(),Ao(),g});return r?a.unshift(c):a.push(c),c}}const Rr=t=>(e,n=zt)=>(!Ia||t==="sp")&&cl(t,(...r)=>e(...r),n),Fy=Rr("bm"),Uy=Rr("m"),$y=Rr("bu"),Qy=Rr("u"),jy=Rr("bum"),ep=Rr("um"),zy=Rr("sp"),Vy=Rr("rtg"),Hy=Rr("rtc");function Ky(t,e=zt){cl("ec",t,e)}const Jy=Symbol.for("v-ndc"),Ul=t=>t?lp(t)?Lf(t)||t.proxy:Ul(t.parent):null,la=Mt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ul(t.parent),$root:t=>Ul(t.root),$emit:t=>t.emit,$options:t=>Wf(t),$forceUpdate:t=>t.f||(t.f=()=>kf(t.update)),$nextTick:t=>t.n||(t.n=_y.bind(t.proxy)),$watch:t=>Dy.bind(t)}),Cl=(t,e)=>t!==ot&&!t.__isScriptSetup&&Be(t,e),Gy={get({_:t},e){const{ctx:n,setupState:r,data:a,props:c,accessCache:m,type:g,appContext:v}=t;let d;if(e[0]!=="$"){const te=m[e];if(te!==void 0)switch(te){case 1:return r[e];case 2:return a[e];case 4:return n[e];case 3:return c[e]}else{if(Cl(r,e))return m[e]=1,r[e];if(a!==ot&&Be(a,e))return m[e]=2,a[e];if((d=t.propsOptions[0])&&Be(d,e))return m[e]=3,c[e];if(n!==ot&&Be(n,e))return m[e]=4,n[e];$l&&(m[e]=0)}}const C=la[e];let R,G;if(C)return e==="$attrs"&&pn(t,"get",e),C(t);if((R=g.__cssModules)&&(R=R[e]))return R;if(n!==ot&&Be(n,e))return m[e]=4,n[e];if(G=v.config.globalProperties,Be(G,e))return G[e]},set({_:t},e,n){const{data:r,setupState:a,ctx:c}=t;return Cl(a,e)?(a[e]=n,!0):r!==ot&&Be(r,e)?(r[e]=n,!0):Be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(c[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:a,propsOptions:c}},m){let g;return!!n[m]||t!==ot&&Be(t,m)||Cl(e,m)||(g=c[0])&&Be(g,m)||Be(r,m)||Be(la,m)||Be(a.config.globalProperties,m)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function mh(t){return Ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let $l=!0;function Yy(t){const e=Wf(t),n=t.proxy,r=t.ctx;$l=!1,e.beforeCreate&&yh(e.beforeCreate,t,"bc");const{data:a,computed:c,methods:m,watch:g,provide:v,inject:d,created:C,beforeMount:R,mounted:G,beforeUpdate:te,updated:ae,activated:b,deactivated:E,beforeDestroy:N,beforeUnmount:I,destroyed:M,unmounted:V,render:Ne,renderTracked:re,renderTriggered:ye,errorCaptured:vt,serverPrefetch:Kt,expose:mn,inheritAttrs:Rn,components:yn,directives:tt,filters:tn}=e;if(d&&Xy(d,r,null),m)for(const pe in m){const qe=m[pe];Te(qe)&&(r[pe]=qe.bind(n))}if(a){const pe=a.call(n,n);lt(pe)&&(t.data=If(pe))}if($l=!0,c)for(const pe in c){const qe=c[pe],it=Te(qe)?qe.bind(n,n):Te(qe.get)?qe.get.bind(n,n):Xn,de=!Te(qe)&&Te(qe.set)?qe.set.bind(n):Xn,Ae=Aw({get:it,set:de});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:Tt=>Ae.value=Tt})}if(g)for(const pe in g)tp(g[pe],r,n,pe);if(v){const pe=Te(v)?v.call(n):v;Reflect.ownKeys(pe).forEach(qe=>{iw(qe,pe[qe])})}C&&yh(C,t,"c");function ft(pe,qe){Ce(qe)?qe.forEach(it=>pe(it.bind(n))):qe&&pe(qe.bind(n))}if(ft(Fy,R),ft(Uy,G),ft($y,te),ft(Qy,ae),ft(Ly,b),ft(My,E),ft(Ky,vt),ft(Hy,re),ft(Vy,ye),ft(jy,I),ft(ep,V),ft(zy,Kt),Ce(mn))if(mn.length){const pe=t.exposed||(t.exposed={});mn.forEach(qe=>{Object.defineProperty(pe,qe,{get:()=>n[qe],set:it=>n[qe]=it})})}else t.exposed||(t.exposed={});Ne&&t.render===Xn&&(t.render=Ne),Rn!=null&&(t.inheritAttrs=Rn),yn&&(t.components=yn),tt&&(t.directives=tt)}function Xy(t,e,n=Xn){Ce(t)&&(t=Ql(t));for(const r in t){const a=t[r];let c;lt(a)?"default"in a?c=Lu(a.from||r,a.default,!0):c=Lu(a.from||r):c=Lu(a),Vt(c)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:m=>c.value=m}):e[r]=c}}function yh(t,e,n){Zn(Ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tp(t,e,n,r){const a=r.includes(".")?Yd(n,r):()=>n[r];if(It(t)){const c=e[t];Te(c)&&ql(a,c)}else if(Te(t))ql(a,t.bind(n));else if(lt(t))if(Ce(t))t.forEach(c=>tp(c,e,n,r));else{const c=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(c)&&ql(a,c,t)}}function Wf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:a,optionsCache:c,config:{optionMergeStrategies:m}}=t.appContext,g=c.get(e);let v;return g?v=g:!a.length&&!n&&!r?v=e:(v={},a.length&&a.forEach(d=>Gu(v,d,m,!0)),Gu(v,e,m)),lt(e)&&c.set(e,v),v}function Gu(t,e,n,r=!1){const{mixins:a,extends:c}=e;c&&Gu(t,c,n,!0),a&&a.forEach(m=>Gu(t,m,n,!0));for(const m in e)if(!(r&&m==="expose")){const g=Zy[m]||n&&n[m];t[m]=g?g(t[m],e[m]):e[m]}return t}const Zy={data:wh,props:gh,emits:gh,methods:ua,computed:ua,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:ua,directives:ua,watch:tw,provide:wh,inject:ew};function wh(t,e){return e?t?function(){return Mt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function ew(t,e){return ua(Ql(t),Ql(e))}function Ql(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Gt(t,e){return t?[...new Set([].concat(t,e))]:e}function ua(t,e){return t?Mt(Object.create(null),t,e):e}function gh(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:Mt(Object.create(null),mh(t),mh(e??{})):e}function tw(t,e){if(!t)return e;if(!e)return t;const n=Mt(Object.create(null),t);for(const r in e)n[r]=Gt(t[r],e[r]);return n}function np(){return{app:null,config:{isNativeTag:Am,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nw=0;function rw(t,e){return function(r,a=null){Te(r)||(r=Mt({},r)),a!=null&&!lt(a)&&(a=null);const c=np(),m=new WeakSet;let g=!1;const v=c.app={_uid:nw++,_component:r,_props:a,_container:null,_context:c,_instance:null,version:Rw,get config(){return c.config},set config(d){},use(d,...C){return m.has(d)||(d&&Te(d.install)?(m.add(d),d.install(v,...C)):Te(d)&&(m.add(d),d(v,...C))),v},mixin(d){return c.mixins.includes(d)||c.mixins.push(d),v},component(d,C){return C?(c.components[d]=C,v):c.components[d]},directive(d,C){return C?(c.directives[d]=C,v):c.directives[d]},mount(d,C,R){if(!g){const G=us(r,a);return G.appContext=c,C&&e?e(G,d):t(G,d,R),g=!0,v._container=d,d.__vue_app__=v,Lf(G.component)||G.component.proxy}},unmount(){g&&(t(null,v._container),delete v._container.__vue_app__)},provide(d,C){return c.provides[d]=C,v},runWithContext(d){Yu=v;try{return d()}finally{Yu=null}}};return v}}let Yu=null;function iw(t,e){if(zt){let n=zt.provides;const r=zt.parent&&zt.parent.provides;r===n&&(n=zt.provides=Object.create(r)),n[t]=e}}function Lu(t,e,n=!1){const r=zt||pr;if(r||Yu){const a=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Yu._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return n&&Te(e)?e.call(r&&r.proxy):e}}function sw(t,e,n,r=!1){const a={},c={};Hu(c,fl,1),t.propsDefaults=Object.create(null),rp(t,e,a,c);for(const m in t.propsOptions[0])m in a||(a[m]=void 0);n?t.props=r?a:py(a):t.type.props?t.props=a:t.props=c,t.attrs=c}function ow(t,e,n,r){const{props:a,attrs:c,vnode:{patchFlag:m}}=t,g=Ue(a),[v]=t.propsOptions;let d=!1;if((r||m>0)&&!(m&16)){if(m&8){const C=t.vnode.dynamicProps;for(let R=0;R<C.length;R++){let G=C[R];if(ul(t.emitsOptions,G))continue;const te=e[G];if(v)if(Be(c,G))te!==c[G]&&(c[G]=te,d=!0);else{const ae=vo(G);a[ae]=jl(v,g,ae,te,t,!1)}else te!==c[G]&&(c[G]=te,d=!0)}}}else{rp(t,e,a,c)&&(d=!0);let C;for(const R in g)(!e||!Be(e,R)&&((C=To(R))===R||!Be(e,C)))&&(v?n&&(n[R]!==void 0||n[C]!==void 0)&&(a[R]=jl(v,g,R,void 0,t,!0)):delete a[R]);if(c!==g)for(const R in c)(!e||!Be(e,R))&&(delete c[R],d=!0)}d&&Ar(t,"set","$attrs")}function rp(t,e,n,r){const[a,c]=t.propsOptions;let m=!1,g;if(e)for(let v in e){if(Du(v))continue;const d=e[v];let C;a&&Be(a,C=vo(v))?!c||!c.includes(C)?n[C]=d:(g||(g={}))[C]=d:ul(t.emitsOptions,v)||(!(v in r)||d!==r[v])&&(r[v]=d,m=!0)}if(c){const v=Ue(n),d=g||ot;for(let C=0;C<c.length;C++){const R=c[C];n[R]=jl(a,v,R,d[R],t,!Be(d,R))}}return m}function jl(t,e,n,r,a,c){const m=t[n];if(m!=null){const g=Be(m,"default");if(g&&r===void 0){const v=m.default;if(m.type!==Function&&!m.skipFactory&&Te(v)){const{propsDefaults:d}=a;n in d?r=d[n]:(Eo(a),r=d[n]=v.call(null,e),cs())}else r=v}m[0]&&(c&&!g?r=!1:m[1]&&(r===""||r===To(n))&&(r=!0))}return r}function ip(t,e,n=!1){const r=e.propsCache,a=r.get(t);if(a)return a;const c=t.props,m={},g=[];let v=!1;if(!Te(t)){const C=R=>{v=!0;const[G,te]=ip(R,e,!0);Mt(m,G),te&&g.push(...te)};!n&&e.mixins.length&&e.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}if(!c&&!v)return lt(t)&&r.set(t,Vs),Vs;if(Ce(c))for(let C=0;C<c.length;C++){const R=vo(c[C]);bh(R)&&(m[R]=ot)}else if(c)for(const C in c){const R=vo(C);if(bh(R)){const G=c[C],te=m[R]=Ce(G)||Te(G)?{type:G}:Mt({},G);if(te){const ae=_h(Boolean,te.type),b=_h(String,te.type);te[0]=ae>-1,te[1]=b<0||ae<b,(ae>-1||Be(te,"default"))&&g.push(R)}}}const d=[m,g];return lt(t)&&r.set(t,d),d}function bh(t){return t[0]!=="$"}function Nh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function vh(t,e){return Nh(t)===Nh(e)}function _h(t,e){return Ce(e)?e.findIndex(n=>vh(n,t)):Te(e)&&vh(e,t)?0:-1}const sp=t=>t[0]==="_"||t==="$stable",Rf=t=>Ce(t)?t.map(lr):[lr(t)],aw=(t,e,n)=>{if(e._n)return e;const r=Iy((...a)=>Rf(e(...a)),n);return r._c=!1,r},op=(t,e,n)=>{const r=t._ctx;for(const a in t){if(sp(a))continue;const c=t[a];if(Te(c))e[a]=aw(a,c,r);else if(c!=null){const m=Rf(c);e[a]=()=>m}}},ap=(t,e)=>{const n=Rf(e);t.slots.default=()=>n},uw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ue(e),Hu(e,"_",n)):op(e,t.slots={})}else t.slots={},e&&ap(t,e);Hu(t.slots,fl,1)},cw=(t,e,n)=>{const{vnode:r,slots:a}=t;let c=!0,m=ot;if(r.shapeFlag&32){const g=e._;g?n&&g===1?c=!1:(Mt(a,e),!n&&g===1&&delete a._):(c=!e.$stable,op(e,a)),m=e}else e&&(ap(t,e),m={default:1});if(c)for(const g in a)!sp(g)&&m[g]==null&&delete a[g]};function zl(t,e,n,r,a=!1){if(Ce(t)){t.forEach((G,te)=>zl(G,e&&(Ce(e)?e[te]:e),n,r,a));return}if(Pu(r)&&!a)return;const c=r.shapeFlag&4?Lf(r.component)||r.component.proxy:r.el,m=a?null:c,{i:g,r:v}=t,d=e&&e.r,C=g.refs===ot?g.refs={}:g.refs,R=g.setupState;if(d!=null&&d!==v&&(It(d)?(C[d]=null,Be(R,d)&&(R[d]=null)):Vt(d)&&(d.value=null)),Te(v))ci(v,g,12,[m,C]);else{const G=It(v),te=Vt(v);if(G||te){const ae=()=>{if(t.f){const b=G?Be(R,v)?R[v]:C[v]:v.value;a?Ce(b)&&Nf(b,c):Ce(b)?b.includes(c)||b.push(c):G?(C[v]=[c],Be(R,v)&&(R[v]=C[v])):(v.value=[c],t.k&&(C[t.k]=v.value))}else G?(C[v]=m,Be(R,v)&&(R[v]=m)):te&&(v.value=m,t.k&&(C[t.k]=m))};m?(ae.id=-1,cn(ae,n)):ae()}}}const cn=Ry;function lw(t){return fw(t)}function fw(t,e){const n=Dl();n.__VUE__=!0;const{insert:r,remove:a,patchProp:c,createElement:m,createText:g,createComment:v,setText:d,setElementText:C,parentNode:R,nextSibling:G,setScopeId:te=Xn,insertStaticContent:ae}=t,b=(x,q,k,L=null,K=null,Z=null,U=!1,z=null,ne=!!q.dynamicChildren)=>{if(x===q)return;x&&!ia(x,q)&&(L=fe(x),Tt(x,K,Z,!0),x=null),q.patchFlag===-2&&(ne=!1,q.dynamicChildren=null);const{type:H,ref:ce,shapeFlag:oe}=q;switch(H){case ll:E(x,q,k,L);break;case Oa:N(x,q,k,L);break;case Il:x==null&&I(q,k,L,U);break;case cr:yn(x,q,k,L,K,Z,U,z,ne);break;default:oe&1?Ne(x,q,k,L,K,Z,U,z,ne):oe&6?tt(x,q,k,L,K,Z,U,z,ne):(oe&64||oe&128)&&H.process(x,q,k,L,K,Z,U,z,ne,Dn)}ce!=null&&K&&zl(ce,x&&x.ref,Z,q||x,!q)},E=(x,q,k,L)=>{if(x==null)r(q.el=g(q.children),k,L);else{const K=q.el=x.el;q.children!==x.children&&d(K,q.children)}},N=(x,q,k,L)=>{x==null?r(q.el=v(q.children||""),k,L):q.el=x.el},I=(x,q,k,L)=>{[x.el,x.anchor]=ae(x.children,q,k,L,x.el,x.anchor)},M=({el:x,anchor:q},k,L)=>{let K;for(;x&&x!==q;)K=G(x),r(x,k,L),x=K;r(q,k,L)},V=({el:x,anchor:q})=>{let k;for(;x&&x!==q;)k=G(x),a(x),x=k;a(q)},Ne=(x,q,k,L,K,Z,U,z,ne)=>{U=U||q.type==="svg",x==null?re(q,k,L,K,Z,U,z,ne):Kt(x,q,K,Z,U,z,ne)},re=(x,q,k,L,K,Z,U,z)=>{let ne,H;const{type:ce,props:oe,shapeFlag:ue,transition:me,dirs:xe}=x;if(ne=x.el=m(x.type,Z,oe&&oe.is,oe),ue&8?C(ne,x.children):ue&16&&vt(x.children,ne,null,L,K,Z&&ce!=="foreignObject",U,z),xe&&Pi(x,null,L,"created"),ye(ne,x,x.scopeId,U,L),oe){for(const Re in oe)Re!=="value"&&!Du(Re)&&c(ne,Re,null,oe[Re],Z,x.children,L,K,rn);"value"in oe&&c(ne,"value",null,oe.value),(H=oe.onVnodeBeforeMount)&&rr(H,L,x)}xe&&Pi(x,null,L,"beforeMount");const $e=hw(K,me);$e&&me.beforeEnter(ne),r(ne,q,k),((H=oe&&oe.onVnodeMounted)||$e||xe)&&cn(()=>{H&&rr(H,L,x),$e&&me.enter(ne),xe&&Pi(x,null,L,"mounted")},K)},ye=(x,q,k,L,K)=>{if(k&&te(x,k),L)for(let Z=0;Z<L.length;Z++)te(x,L[Z]);if(K){let Z=K.subTree;if(q===Z){const U=K.vnode;ye(x,U,U.scopeId,U.slotScopeIds,K.parent)}}},vt=(x,q,k,L,K,Z,U,z,ne=0)=>{for(let H=ne;H<x.length;H++){const ce=x[H]=z?Kr(x[H]):lr(x[H]);b(null,ce,q,k,L,K,Z,U,z)}},Kt=(x,q,k,L,K,Z,U)=>{const z=q.el=x.el;let{patchFlag:ne,dynamicChildren:H,dirs:ce}=q;ne|=x.patchFlag&16;const oe=x.props||ot,ue=q.props||ot;let me;k&&Li(k,!1),(me=ue.onVnodeBeforeUpdate)&&rr(me,k,q,x),ce&&Pi(q,x,k,"beforeUpdate"),k&&Li(k,!0);const xe=K&&q.type!=="foreignObject";if(H?mn(x.dynamicChildren,H,z,k,L,xe,Z):U||qe(x,q,z,null,k,L,xe,Z,!1),ne>0){if(ne&16)Rn(z,q,oe,ue,k,L,K);else if(ne&2&&oe.class!==ue.class&&c(z,"class",null,ue.class,K),ne&4&&c(z,"style",oe.style,ue.style,K),ne&8){const $e=q.dynamicProps;for(let Re=0;Re<$e.length;Re++){const nt=$e[Re],he=oe[nt],gn=ue[nt];(gn!==he||nt==="value")&&c(z,nt,he,gn,K,x.children,k,L,rn)}}ne&1&&x.children!==q.children&&C(z,q.children)}else!U&&H==null&&Rn(z,q,oe,ue,k,L,K);((me=ue.onVnodeUpdated)||ce)&&cn(()=>{me&&rr(me,k,q,x),ce&&Pi(q,x,k,"updated")},L)},mn=(x,q,k,L,K,Z,U)=>{for(let z=0;z<q.length;z++){const ne=x[z],H=q[z],ce=ne.el&&(ne.type===cr||!ia(ne,H)||ne.shapeFlag&70)?R(ne.el):k;b(ne,H,ce,null,L,K,Z,U,!0)}},Rn=(x,q,k,L,K,Z,U)=>{if(k!==L){if(k!==ot)for(const z in k)!Du(z)&&!(z in L)&&c(x,z,k[z],null,U,q.children,K,Z,rn);for(const z in L){if(Du(z))continue;const ne=L[z],H=k[z];ne!==H&&z!=="value"&&c(x,z,H,ne,U,q.children,K,Z,rn)}"value"in L&&c(x,"value",k.value,L.value)}},yn=(x,q,k,L,K,Z,U,z,ne)=>{const H=q.el=x?x.el:g(""),ce=q.anchor=x?x.anchor:g("");let{patchFlag:oe,dynamicChildren:ue,slotScopeIds:me}=q;me&&(z=z?z.concat(me):me),x==null?(r(H,k,L),r(ce,k,L),vt(q.children,k,ce,K,Z,U,z,ne)):oe>0&&oe&64&&ue&&x.dynamicChildren?(mn(x.dynamicChildren,ue,k,K,Z,U,z),(q.key!=null||K&&q===K.subTree)&&up(x,q,!0)):qe(x,q,k,ce,K,Z,U,z,ne)},tt=(x,q,k,L,K,Z,U,z,ne)=>{q.slotScopeIds=z,x==null?q.shapeFlag&512?K.ctx.activate(q,k,L,U,ne):tn(q,k,L,K,Z,U,ne):nn(x,q,ne)},tn=(x,q,k,L,K,Z,U)=>{const z=x.component=Ow(x,L,K);if(Xd(x)&&(z.ctx.renderer=Dn),qw(z),z.asyncDep){if(K&&K.registerDep(z,ft),!x.el){const ne=z.subTree=us(Oa);N(null,ne,q,k)}return}ft(z,x,q,k,K,Z,U)},nn=(x,q,k)=>{const L=q.component=x.component;if(Ay(x,q,k))if(L.asyncDep&&!L.asyncResolved){pe(L,q,k);return}else L.next=q,Ey(L.update),L.update();else q.el=x.el,L.vnode=q},ft=(x,q,k,L,K,Z,U)=>{const z=()=>{if(x.isMounted){let{next:ce,bu:oe,u:ue,parent:me,vnode:xe}=x,$e=ce,Re;Li(x,!1),ce?(ce.el=xe.el,pe(x,ce,U)):ce=xe,oe&&El(oe),(Re=ce.props&&ce.props.onVnodeBeforeUpdate)&&rr(Re,me,ce,xe),Li(x,!0);const nt=Ol(x),he=x.subTree;x.subTree=nt,b(he,nt,R(he.el),fe(he),x,K,Z),ce.el=nt.el,$e===null&&ky(x,nt.el),ue&&cn(ue,K),(Re=ce.props&&ce.props.onVnodeUpdated)&&cn(()=>rr(Re,me,ce,xe),K)}else{let ce;const{el:oe,props:ue}=q,{bm:me,m:xe,parent:$e}=x,Re=Pu(q);if(Li(x,!1),me&&El(me),!Re&&(ce=ue&&ue.onVnodeBeforeMount)&&rr(ce,$e,q),Li(x,!0),oe&&ze){const nt=()=>{x.subTree=Ol(x),ze(oe,x.subTree,x,K,null)};Re?q.type.__asyncLoader().then(()=>!x.isUnmounted&&nt()):nt()}else{const nt=x.subTree=Ol(x);b(null,nt,k,L,x,K,Z),q.el=nt.el}if(xe&&cn(xe,K),!Re&&(ce=ue&&ue.onVnodeMounted)){const nt=q;cn(()=>rr(ce,$e,nt),K)}(q.shapeFlag&256||$e&&Pu($e.vnode)&&$e.vnode.shapeFlag&256)&&x.a&&cn(x.a,K),x.isMounted=!0,q=k=L=null}},ne=x.effect=new Of(z,()=>kf(H),x.scope),H=x.update=()=>ne.run();H.id=x.uid,Li(x,!0),H()},pe=(x,q,k)=>{q.component=x;const L=x.vnode.props;x.vnode=q,x.next=null,ow(x,q.props,L,k),cw(x,q.children,k),So(),dh(),Ao()},qe=(x,q,k,L,K,Z,U,z,ne=!1)=>{const H=x&&x.children,ce=x?x.shapeFlag:0,oe=q.children,{patchFlag:ue,shapeFlag:me}=q;if(ue>0){if(ue&128){de(H,oe,k,L,K,Z,U,z,ne);return}else if(ue&256){it(H,oe,k,L,K,Z,U,z,ne);return}}me&8?(ce&16&&rn(H,K,Z),oe!==H&&C(k,oe)):ce&16?me&16?de(H,oe,k,L,K,Z,U,z,ne):rn(H,K,Z,!0):(ce&8&&C(k,""),me&16&&vt(oe,k,L,K,Z,U,z,ne))},it=(x,q,k,L,K,Z,U,z,ne)=>{x=x||Vs,q=q||Vs;const H=x.length,ce=q.length,oe=Math.min(H,ce);let ue;for(ue=0;ue<oe;ue++){const me=q[ue]=ne?Kr(q[ue]):lr(q[ue]);b(x[ue],me,k,null,K,Z,U,z,ne)}H>ce?rn(x,K,Z,!0,!1,oe):vt(q,k,L,K,Z,U,z,ne,oe)},de=(x,q,k,L,K,Z,U,z,ne)=>{let H=0;const ce=q.length;let oe=x.length-1,ue=ce-1;for(;H<=oe&&H<=ue;){const me=x[H],xe=q[H]=ne?Kr(q[H]):lr(q[H]);if(ia(me,xe))b(me,xe,k,null,K,Z,U,z,ne);else break;H++}for(;H<=oe&&H<=ue;){const me=x[oe],xe=q[ue]=ne?Kr(q[ue]):lr(q[ue]);if(ia(me,xe))b(me,xe,k,null,K,Z,U,z,ne);else break;oe--,ue--}if(H>oe){if(H<=ue){const me=ue+1,xe=me<ce?q[me].el:L;for(;H<=ue;)b(null,q[H]=ne?Kr(q[H]):lr(q[H]),k,xe,K,Z,U,z,ne),H++}}else if(H>ue)for(;H<=oe;)Tt(x[H],K,Z,!0),H++;else{const me=H,xe=H,$e=new Map;for(H=xe;H<=ue;H++){const le=q[H]=ne?Kr(q[H]):lr(q[H]);le.key!=null&&$e.set(le.key,H)}let Re,nt=0;const he=ue-xe+1;let gn=!1,wi=0;const Ft=new Array(he);for(H=0;H<he;H++)Ft[H]=0;for(H=me;H<=oe;H++){const le=x[H];if(nt>=he){Tt(le,K,Z,!0);continue}let St;if(le.key!=null)St=$e.get(le.key);else for(Re=xe;Re<=ue;Re++)if(Ft[Re-xe]===0&&ia(le,q[Re])){St=Re;break}St===void 0?Tt(le,K,Z,!0):(Ft[St-xe]=H+1,St>=wi?wi=St:gn=!0,b(le,q[St],k,null,K,Z,U,z,ne),nt++)}const ms=gn?dw(Ft):Vs;for(Re=ms.length-1,H=he-1;H>=0;H--){const le=xe+H,St=q[le],ee=le+1<ce?q[le+1].el:L;Ft[H]===0?b(null,St,k,ee,K,Z,U,z,ne):gn&&(Re<0||H!==ms[Re]?Ae(St,k,ee,2):Re--)}}},Ae=(x,q,k,L,K=null)=>{const{el:Z,type:U,transition:z,children:ne,shapeFlag:H}=x;if(H&6){Ae(x.component.subTree,q,k,L);return}if(H&128){x.suspense.move(q,k,L);return}if(H&64){U.move(x,q,k,Dn);return}if(U===cr){r(Z,q,k);for(let oe=0;oe<ne.length;oe++)Ae(ne[oe],q,k,L);r(x.anchor,q,k);return}if(U===Il){M(x,q,k);return}if(L!==2&&H&1&&z)if(L===0)z.beforeEnter(Z),r(Z,q,k),cn(()=>z.enter(Z),K);else{const{leave:oe,delayLeave:ue,afterLeave:me}=z,xe=()=>r(Z,q,k),$e=()=>{oe(Z,()=>{xe(),me&&me()})};ue?ue(Z,xe,$e):$e()}else r(Z,q,k)},Tt=(x,q,k,L=!1,K=!1)=>{const{type:Z,props:U,ref:z,children:ne,dynamicChildren:H,shapeFlag:ce,patchFlag:oe,dirs:ue}=x;if(z!=null&&zl(z,null,k,x,!0),ce&256){q.ctx.deactivate(x);return}const me=ce&1&&ue,xe=!Pu(x);let $e;if(xe&&($e=U&&U.onVnodeBeforeUnmount)&&rr($e,q,x),ce&6)wn(x.component,k,L);else{if(ce&128){x.suspense.unmount(k,L);return}me&&Pi(x,null,q,"beforeUnmount"),ce&64?x.type.remove(x,q,k,K,Dn,L):H&&(Z!==cr||oe>0&&oe&64)?rn(H,q,k,!1,!0):(Z===cr&&oe&384||!K&&ce&16)&&rn(ne,q,k),L&&br(x)}(xe&&($e=U&&U.onVnodeUnmounted)||me)&&cn(()=>{$e&&rr($e,q,x),me&&Pi(x,null,q,"unmounted")},k)},br=x=>{const{type:q,el:k,anchor:L,transition:K}=x;if(q===cr){ps(k,L);return}if(q===Il){V(x);return}const Z=()=>{a(k),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(x.shapeFlag&1&&K&&!K.persisted){const{leave:U,delayLeave:z}=K,ne=()=>U(k,Z);z?z(x.el,Z,ne):ne()}else Z()},ps=(x,q)=>{let k;for(;x!==q;)k=G(x),a(x),x=k;a(q)},wn=(x,q,k)=>{const{bum:L,scope:K,update:Z,subTree:U,um:z}=x;L&&El(L),K.stop(),Z&&(Z.active=!1,Tt(U,x,q,k)),z&&cn(z,q),cn(()=>{x.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},rn=(x,q,k,L=!1,K=!1,Z=0)=>{for(let U=Z;U<x.length;U++)Tt(x[U],q,k,L,K)},fe=x=>x.shapeFlag&6?fe(x.component.subTree):x.shapeFlag&128?x.suspense.next():G(x.anchor||x.el),Me=(x,q,k)=>{x==null?q._vnode&&Tt(q._vnode,null,null,!0):b(q._vnode||null,x,q,null,null,null,k),dh(),Vd(),q._vnode=x},Dn={p:b,um:Tt,m:Ae,r:br,mt:tn,mc:vt,pc:qe,pbc:mn,n:fe,o:t};let Bt,ze;return e&&([Bt,ze]=e(Dn)),{render:Me,hydrate:Bt,createApp:rw(Me,Bt)}}function Li({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function hw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function up(t,e,n=!1){const r=t.children,a=e.children;if(Ce(r)&&Ce(a))for(let c=0;c<r.length;c++){const m=r[c];let g=a[c];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=a[c]=Kr(a[c]),g.el=m.el),n||up(m,g)),g.type===ll&&(g.el=m.el)}}function dw(t){const e=t.slice(),n=[0];let r,a,c,m,g;const v=t.length;for(r=0;r<v;r++){const d=t[r];if(d!==0){if(a=n[n.length-1],t[a]<d){e[r]=a,n.push(r);continue}for(c=0,m=n.length-1;c<m;)g=c+m>>1,t[n[g]]<d?c=g+1:m=g;d<t[n[c]]&&(c>0&&(e[r]=n[c-1]),n[c]=r)}}for(c=n.length,m=n[c-1];c-- >0;)n[c]=m,m=e[m];return n}const pw=t=>t.__isTeleport,cr=Symbol.for("v-fgt"),ll=Symbol.for("v-txt"),Oa=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),fa=[];let Gn=null;function mw(t=!1){fa.push(Gn=t?null:[])}function yw(){fa.pop(),Gn=fa[fa.length-1]||null}let qa=1;function xh(t){qa+=t}function ww(t){return t.dynamicChildren=qa>0?Gn||Vs:null,yw(),qa>0&&Gn&&Gn.push(t),t}function gw(t,e,n,r,a,c){return ww(Nt(t,e,n,r,a,c,!0))}function bw(t){return t?t.__v_isVNode===!0:!1}function ia(t,e){return t.type===e.type&&t.key===e.key}const fl="__vInternal",cp=({key:t})=>t??null,Mu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Vt(t)||Te(t)?{i:pr,r:t,k:e,f:!!n}:t:null);function Nt(t,e=null,n=null,r=0,a=null,c=t===cr?0:1,m=!1,g=!1){const v={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&cp(e),ref:e&&Mu(e),scopeId:Jd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:pr};return g?(Df(v,n),c&128&&t.normalize(v)):n&&(v.shapeFlag|=It(n)?8:16),qa>0&&!m&&Gn&&(v.patchFlag>0||c&6)&&v.patchFlag!==32&&Gn.push(v),v}const us=Nw;function Nw(t,e=null,n=null,r=0,a=null,c=!1){if((!t||t===Jy)&&(t=Oa),bw(t)){const g=xo(t,e,!0);return n&&Df(g,n),qa>0&&!c&&Gn&&(g.shapeFlag&6?Gn[Gn.indexOf(t)]=g:Gn.push(g)),g.patchFlag|=-2,g}if(Sw(t)&&(t=t.__vccOpts),e){e=vw(e);let{class:g,style:v}=e;g&&!It(g)&&(e.class=xf(g)),lt(v)&&(Md(v)&&!Ce(v)&&(v=Mt({},v)),e.style=_f(v))}const m=It(t)?1:Wy(t)?128:pw(t)?64:lt(t)?4:Te(t)?2:0;return Nt(t,e,n,r,a,m,c,!0)}function vw(t){return t?Md(t)||fl in t?Mt({},t):t:null}function xo(t,e,n=!1){const{props:r,ref:a,patchFlag:c,children:m}=t,g=e?_w(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&cp(g),ref:e&&e.ref?n&&a?Ce(a)?a.concat(Mu(e)):[a,Mu(e)]:Mu(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==cr?c===-1?16:c|16:c,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xo(t.ssContent),ssFallback:t.ssFallback&&xo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ca(t=" ",e=0){return us(ll,null,t,e)}function lr(t){return t==null||typeof t=="boolean"?us(Oa):Ce(t)?us(cr,null,t.slice()):typeof t=="object"?Kr(t):us(ll,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xo(t)}function Df(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ce(e))n=16;else if(typeof e=="object")if(r&65){const a=e.default;a&&(a._c&&(a._d=!1),Df(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(fl in e)?e._ctx=pr:a===3&&pr&&(pr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:pr},n=32):(e=String(e),r&64?(n=16,e=[Ca(e)]):n=8);t.children=e,t.shapeFlag|=n}function _w(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)if(a==="class")e.class!==r.class&&(e.class=xf([e.class,r.class]));else if(a==="style")e.style=_f([e.style,r.style]);else if(nl(a)){const c=e[a],m=r[a];m&&c!==m&&!(Ce(c)&&c.includes(m))&&(e[a]=c?[].concat(c,m):m)}else a!==""&&(e[a]=r[a])}return e}function rr(t,e,n,r=null){Zn(t,e,7,[n,r])}const xw=np();let Ew=0;function Ow(t,e,n){const r=t.type,a=(e?e.appContext:t.appContext)||xw,c={uid:Ew++,vnode:t,type:r,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new zm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ip(r,a),emitsOptions:Kd(r,a),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:r.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=e?e.root:c,c.emit=Cy.bind(null,c),t.ce&&t.ce(c),c}let zt=null,Pf,Ws,Eh="__VUE_INSTANCE_SETTERS__";(Ws=Dl()[Eh])||(Ws=Dl()[Eh]=[]),Ws.push(t=>zt=t),Pf=t=>{Ws.length>1?Ws.forEach(e=>e(t)):Ws[0](t)};const Eo=t=>{Pf(t),t.scope.on()},cs=()=>{zt&&zt.scope.off(),Pf(null)};function lp(t){return t.vnode.shapeFlag&4}let Ia=!1;function qw(t,e=!1){Ia=e;const{props:n,children:r}=t.vnode,a=lp(t);sw(t,n,a,e),uw(t,r);const c=a?Cw(t,e):void 0;return Ia=!1,c}function Cw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Bd(new Proxy(t.ctx,Gy));const{setup:r}=n;if(r){const a=t.setupContext=r.length>1?Tw(t):null;Eo(t),So();const c=ci(r,t,0,[t.props,a]);if(Ao(),cs(),vd(c)){if(c.then(cs,cs),e)return c.then(m=>{Oh(t,m,e)}).catch(m=>{al(m,t,0)});t.asyncDep=c}else Oh(t,c,e)}else fp(t,e)}function Oh(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lt(e)&&(t.setupState=Qd(e)),fp(t,n)}let qh;function fp(t,e,n){const r=t.type;if(!t.render){if(!e&&qh&&!r.render){const a=r.template||Wf(t).template;if(a){const{isCustomElement:c,compilerOptions:m}=t.appContext.config,{delimiters:g,compilerOptions:v}=r,d=Mt(Mt({isCustomElement:c,delimiters:g},m),v);r.render=qh(a,d)}}t.render=r.render||Xn}{Eo(t),So();try{Yy(t)}finally{Ao(),cs()}}}function Iw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return pn(t,"get","$attrs"),e[n]}}))}function Tw(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Iw(t)},slots:t.slots,emit:t.emit,expose:e}}function Lf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Qd(Bd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in la)return la[n](t)},has(e,n){return n in e||n in la}}))}function Sw(t){return Te(t)&&"__vccOpts"in t}const Aw=(t,e)=>Ny(t,e,Ia),kw=Symbol.for("v-scx"),Ww=()=>Lu(kw),Rw="3.3.7",Dw="http://www.w3.org/2000/svg",Fi=typeof document<"u"?document:null,Ch=Fi&&Fi.createElement("template"),Pw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const a=e?Fi.createElementNS(Dw,t):Fi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:t=>Fi.createTextNode(t),createComment:t=>Fi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,a,c){const m=n?n.previousSibling:e.lastChild;if(a&&(a===c||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===c||!(a=a.nextSibling)););else{Ch.innerHTML=r?`<svg>${t}</svg>`:t;const g=Ch.content;if(r){const v=g.firstChild;for(;v.firstChild;)g.appendChild(v.firstChild);g.removeChild(v)}e.insertBefore(g,n)}return[m?m.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Lw=Symbol("_vtc");function Mw(t,e,n){const r=t[Lw];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Bw=Symbol("_vod");function Fw(t,e,n){const r=t.style,a=It(n);if(n&&!a){if(e&&!It(e))for(const c in e)n[c]==null&&Vl(r,c,"");for(const c in n)Vl(r,c,n[c])}else{const c=r.display;a?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),Bw in t&&(r.display=c)}}const Ih=/\s*!important$/;function Vl(t,e,n){if(Ce(n))n.forEach(r=>Vl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Uw(t,e);Ih.test(n)?t.setProperty(To(r),n.replace(Ih,""),"important"):t[r]=n}}const Th=["Webkit","Moz","ms"],Tl={};function Uw(t,e){const n=Tl[e];if(n)return n;let r=vo(e);if(r!=="filter"&&r in t)return Tl[e]=r;r=Ed(r);for(let a=0;a<Th.length;a++){const c=Th[a]+r;if(c in t)return Tl[e]=c}return e}const Sh="http://www.w3.org/1999/xlink";function $w(t,e,n,r,a){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Sh,e.slice(6,e.length)):t.setAttributeNS(Sh,e,n);else{const c=Qm(e);n==null||c&&!Od(n)?t.removeAttribute(e):t.setAttribute(e,c?"":n)}}function Qw(t,e,n,r,a,c,m){if(e==="innerHTML"||e==="textContent"){r&&m(r,a,c),t[e]=n??"";return}const g=t.tagName;if(e==="value"&&g!=="PROGRESS"&&!g.includes("-")){t._value=n;const d=g==="OPTION"?t.getAttribute("value"):t.value,C=n??"";d!==C&&(t.value=C),n==null&&t.removeAttribute(e);return}let v=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=Od(n):n==null&&d==="string"?(n="",v=!0):d==="number"&&(n=0,v=!0)}try{t[e]=n}catch{}v&&t.removeAttribute(e)}function jw(t,e,n,r){t.addEventListener(e,n,r)}function zw(t,e,n,r){t.removeEventListener(e,n,r)}const Ah=Symbol("_vei");function Vw(t,e,n,r,a=null){const c=t[Ah]||(t[Ah]={}),m=c[e];if(r&&m)m.value=r;else{const[g,v]=Hw(e);if(r){const d=c[e]=Gw(r,a);jw(t,g,d,v)}else m&&(zw(t,g,m,v),c[e]=void 0)}}const kh=/(?:Once|Passive|Capture)$/;function Hw(t){let e;if(kh.test(t)){e={};let r;for(;r=t.match(kh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):To(t.slice(2)),e]}let Sl=0;const Kw=Promise.resolve(),Jw=()=>Sl||(Kw.then(()=>Sl=0),Sl=Date.now());function Gw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Zn(Yw(r,n.value),e,5,[r])};return n.value=t,n.attached=Jw(),n}function Yw(t,e){if(Ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>a=>!a._stopped&&r&&r(a))}else return e}const Wh=/^on[a-z]/,Xw=(t,e,n,r,a=!1,c,m,g,v)=>{e==="class"?Mw(t,r,a):e==="style"?Fw(t,n,r):nl(e)?bf(e)||Vw(t,e,n,r,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Zw(t,e,r,a))?Qw(t,e,r,c,m,g,v):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),$w(t,e,r,a))};function Zw(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Wh.test(e)&&Te(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Wh.test(e)&&It(n)?!1:e in t}const eg=Mt({patchProp:Xw},Pw);let Rh;function tg(){return Rh||(Rh=lw(eg))}const ng=(...t)=>{const e=tg().createApp(...t),{mount:n}=e;return e.mount=r=>{const a=rg(r);if(!a)return;const c=e._component;!Te(c)&&!c.render&&!c.template&&(c.template=a.innerHTML),a.innerHTML="";const m=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),m},e};function rg(t){return It(t)?document.querySelector(t):t}function ls(t){return typeof t>"u"||t===void 0}function wr(t){return typeof t=="string"}function hp(t){return typeof t=="number"}function Xu(t){return typeof t=="boolean"}function Mf(t){return t===null}function ig(t){return t instanceof Date}function sg(t){return typeof t=="bigint"}function qn(t){return typeof t=="function"}function dr(t){return typeof t=="object"&&t!==null}function p(t){return Object.freeze(t)}function hi(t){return Array.isArray(t)}function Oo(t){return t}const pt=p({is(t){return t.kind==="AlterTableNode"},create(t){return p({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return p({...t,...e})},cloneWithColumnAlteration(t,e){return p({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),ut=p({is(t){return t.kind==="IdentifierNode"},create(t){return p({kind:"IdentifierNode",name:t})}}),Vr=p({is(t){return t.kind==="CreateIndexNode"},create(t){return p({kind:"CreateIndexNode",name:ut.create(t)})},cloneWith(t,e){return p({...t,...e})},cloneWithColumns(t,e){return p({...t,columns:[...t.columns||[],...e]})}}),dp=p({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return p({kind:"CreateSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),og=["preserve rows","delete rows","drop"],Un=p({is(t){return t.kind==="CreateTableNode"},create(t){return p({kind:"CreateTableNode",table:t,columns:p([])})},cloneWithColumn(t,e){return p({...t,columns:p([...t.columns,e])})},cloneWithConstraint(t,e){return p({...t,constraints:t.constraints?p([...t.constraints,e]):p([e])})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWith(t,e){return p({...t,...e})}}),di=p({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return p({kind:"SchemableIdentifierNode",identifier:ut.create(t)})},createWithSchema(t,e){return p({kind:"SchemableIdentifierNode",schema:ut.create(t),identifier:ut.create(e)})}}),Bu=p({is(t){return t.kind==="DropIndexNode"},create(t,e){return p({kind:"DropIndexNode",name:di.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Hl=p({is(t){return t.kind==="DropSchemaNode"},create(t,e){return p({kind:"DropSchemaNode",schema:ut.create(t),...e})},cloneWith(t,e){return p({...t,...e})}}),Kl=p({is(t){return t.kind==="DropTableNode"},create(t,e){return p({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return p({...t,...e})}}),yi=p({is(t){return t.kind==="AliasNode"},create(t,e){return p({kind:"AliasNode",node:t,alias:e})}}),li=p({is(t){return t.kind==="TableNode"},create(t){return p({kind:"TableNode",table:di.create(t)})},createWithSchema(t,e){return p({kind:"TableNode",table:di.createWithSchema(t,e)})}});function Wn(t){return dr(t)&&qn(t.toOperationNode)}function ag(t){return dr(t)&&"expressionType"in t&&Wn(t)}function ug(t){return dr(t)&&"expression"in t&&wr(t.alias)&&Wn(t)}const vr=p({is(t){return t.kind==="SelectModifierNode"},create(t){return p({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return p({kind:"SelectModifierNode",rawModifier:t})}}),pi=p({is(t){return t.kind==="AndNode"},create(t,e){return p({kind:"AndNode",left:t,right:e})}}),ko=p({is(t){return t.kind==="OrNode"},create(t,e){return p({kind:"OrNode",left:t,right:e})}}),Al=p({is(t){return t.kind==="OnNode"},create(t){return p({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return p({...t,on:e==="And"?pi.create(t.on,n):ko.create(t.on,n)})}}),ha=p({is(t){return t.kind==="JoinNode"},create(t,e){return p({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return p({kind:"JoinNode",joinType:t,table:e,on:Al.create(n)})},cloneWithOn(t,e){return p({...t,on:t.on?Al.cloneWithOperation(t.on,"And",e):Al.create(e)})}}),Ta=p({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return p({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),cg=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],lg=["+","-","*","/","%","^","&","|","#","<<",">>"],pp=["->","->>"],fg=[...cg,...lg,"&&","||"],hg=["exists","not exists"],dg=["not","-",...hg],pg=[...fg,...pp,...dg,"between","between symmetric"],hs=p({is(t){return t.kind==="OperatorNode"},create(t){return p({kind:"OperatorNode",operator:t})}});function Dh(t){return wr(t)&&pp.includes(t)}const mt=p({is(t){return t.kind==="ColumnNode"},create(t){return p({kind:"ColumnNode",column:ut.create(t)})}}),Bf=p({is(t){return t.kind==="SelectAllNode"},create(){return p({kind:"SelectAllNode"})}}),hl=p({is(t){return t.kind==="ReferenceNode"},create(t,e){return p({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return p({kind:"ReferenceNode",table:t,column:Bf.create()})}});var Gs;class mg{constructor(e){W(this,Gs,void 0);j(this,Gs,e)}get dynamicReference(){return i(this,Gs)}get refType(){}toOperationNode(){return bp(i(this,Gs))}}Gs=new WeakMap;function mp(t){return dr(t)&&Wn(t)&&wr(t.dynamicReference)}const Jl=p({is(t){return t.kind==="OrderByItemNode"},create(t,e){return p({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Zt=p({is(t){return t.kind==="RawNode"},create(t,e){return p({kind:"RawNode",sqlFragments:p(t),parameters:p(e)})},createWithSql(t){return Zt.create([t],[])},createWithChild(t){return Zt.create(["",""],[t])},createWithChildren(t){return Zt.create(new Array(t.length+1).fill(""),t)}});function yp(t){return t==="asc"||t==="desc"}function dl(t){if(t.length===2)return[kl(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>kl(n)):[kl(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function kl(t,e){const n=yg(t);if(Jl.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return Jl.create(n,wp(e))}function yg(t){if(ou(t))return Ro(t);if(mp(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!yp(n))throw new Error(`Invalid order by direction: ${n}`);return Jl.create(kr(e),wp(n))}return kr(t)}function wp(t){if(t)return t==="asc"||t==="desc"?Zt.createWithSql(t):t.toOperationNode()}const Gl=p({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return p({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return p({...t,traversal:e})}}),gp=p({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return p({kind:"JSONOperatorChainNode",operator:t,values:p([])})},cloneWithValue(t,e){return p({...t,values:p([...t.values,e])})}}),Yl=p({is(t){return t.kind==="JSONPathNode"},create(t){return p({kind:"JSONPathNode",inOperator:t,pathLegs:p([])})},cloneWithLeg(t,e){return p({...t,pathLegs:p([...t.pathLegs,e])})}});function bp(t){return wr(t)?kr(t):t.toOperationNode()}function Sa(t){return hi(t)?t.map(e=>Yn(e)):[Yn(t)]}function Yn(t){return ou(t)?Ro(t):bp(t)}function wg(t,e){const n=kr(t);if(Dh(e))return Gl.create(n,gp.create(hs.create(e)));const r=e.slice(0,-1);if(Dh(r))return Gl.create(n,Yl.create(hs.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function kr(t){const e=".";if(!t.includes(e))return hl.create(mt.create(t));const n=t.split(e).map(Ff);if(n.length===3)return bg(n);if(n.length===2)return Ng(n);throw new Error(`invalid column reference ${t}`)}function gg(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Ff);return yi.create(kr(n),ut.create(r))}else return kr(t)}function Np(t){return mt.create(t)}function Ph(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(Ff);if(!yp(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return dl([n,r])[0]}else return Np(t)}function bg(t){const[e,n,r]=t;return hl.create(mt.create(r),li.createWithSchema(e,n))}function Ng(t){const[e,n]=t;return hl.create(mt.create(n),li.create(e))}function Ff(t){return t.trim()}const vp=p({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return p({kind:"PrimitiveValueListNode",values:p([...t])})}}),Uf=p({is(t){return t.kind==="ValueListNode"},create(t){return p({kind:"ValueListNode",values:p(t)})}}),gr=p({is(t){return t.kind==="ValueNode"},create(t){return p({kind:"ValueNode",value:t})},createImmediate(t){return p({kind:"ValueNode",value:t,immediate:!0})}});function _p(t){return hi(t)?vg(t):en(t)}function en(t){return ou(t)?Ro(t):gr.create(t)}function $f(t){return hp(t)||Xu(t)||Mf(t)}function Qf(t){if(!$f(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return gr.createImmediate(t)}function vg(t){return t.some(ou)?Uf.create(t.map(e=>en(e))):vp.create(t)}const qo=p({is(t){return t.kind==="ParensNode"},create(t){return p({kind:"ParensNode",node:t})}});function Ht(t){if(t.length===3)return da(t[0],t[1],t[2]);if(t.length===1)return en(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function da(t,e,n){return _g(e)&&xp(n)?Ta.create(Yn(t),Zl(e),gr.createImmediate(n)):Ta.create(Yn(t),Zl(e),_p(n))}function Wr(t,e,n){return Ta.create(Yn(t),Zl(e),Yn(n))}function Lh(t,e){return Xl(Object.entries(t).filter(([,n])=>!ls(n)).map(([n,r])=>da(n,xp(r)?"is":"=",r)),e)}function Xl(t,e){const n=e==="and"?pi.create:ko.create;if(t.length===0)return gr.createImmediate(e==="and");let r=Mh(t[0]);for(let a=1;a<t.length;++a)r=n(r,Mh(t[a]));return t.length>1?qo.create(r):r}function _g(t){return t==="is"||t==="is not"}function xp(t){return Mf(t)||Xu(t)}function Zl(t){if(wr(t)&&pg.includes(t))return hs.create(t);if(Wn(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Mh(t){return Wn(t)?t.toOperationNode():t}const Co=p({is(t){return t.kind==="OrderByNode"},create(t){return p({kind:"OrderByNode",items:p([...t])})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Bh=p({is(t){return t.kind==="PartitionByNode"},create(t){return p({kind:"PartitionByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),ef=p({is(t){return t.kind==="OverNode"},create(){return p({kind:"OverNode"})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Co.cloneWithItems(t.orderBy,e):Co.create(e)})},cloneWithPartitionByItems(t,e){return p({...t,partitionBy:t.partitionBy?Bh.cloneWithItems(t.partitionBy,e):Bh.create(e)})}}),Zu=p({is(t){return t.kind==="FromNode"},create(t){return p({kind:"FromNode",froms:p(t)})},cloneWithFroms(t,e){return p({...t,froms:p([...t.froms,...e])})}}),Fh=p({is(t){return t.kind==="GroupByNode"},create(t){return p({kind:"GroupByNode",items:p(t)})},cloneWithItems(t,e){return p({...t,items:p([...t.items,...e])})}}),Uh=p({is(t){return t.kind==="HavingNode"},create(t){return p({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return p({...t,having:e==="And"?pi.create(t.having,n):ko.create(t.having,n)})}}),De=p({is(t){return t.kind==="SelectQueryNode"},create(t){return p({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return p({kind:"SelectQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})},cloneWithDistinctOn(t,e){return p({...t,distinctOn:t.distinctOn?p([...t.distinctOn,...e]):p(e)})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):p([e])})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):p([e])})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Co.cloneWithItems(t.orderBy,e):Co.create(e)})},cloneWithGroupByItems(t,e){return p({...t,groupBy:t.groupBy?Fh.cloneWithItems(t.groupBy,e):Fh.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithOffset(t,e){return p({...t,offset:e})},cloneWithHaving(t,e){return p({...t,having:t.having?Uh.cloneWithOperation(t.having,"And",e):Uh.create(e)})},cloneWithSetOperations(t,e){return p({...t,setOperations:t.setOperations?p([...t.setOperations,...e]):p([...e])})},cloneWithoutSelections(t){return p({...t,selections:[]})},cloneWithoutLimit(t){return p({...t,limit:void 0})},cloneWithoutOffset(t){return p({...t,offset:void 0})},cloneWithoutOrderBy(t){return p({...t,orderBy:void 0})}});function Le(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var Qn;const ya=class ya{constructor(e){W(this,Qn,void 0);j(this,Qn,p(e))}on(...e){return new ya({...i(this,Qn),joinNode:ha.cloneWithOn(i(this,Qn).joinNode,Ht(e))})}onRef(e,n,r){return new ya({...i(this,Qn),joinNode:ha.cloneWithOn(i(this,Qn).joinNode,Wr(e,n,r))})}onTrue(){return new ya({...i(this,Qn),joinNode:ha.cloneWithOn(i(this,Qn).joinNode,Zt.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return i(this,Qn).joinNode}};Qn=new WeakMap;let ec=ya;Le(ec,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const xg=p({is(t){return t.kind==="PartitionByItemNode"},create(t){return p({kind:"PartitionByItemNode",partitionBy:t})}});function Eg(t){return Sa(t).map(xg.create)}var zi;const Ic=class Ic{constructor(e){W(this,zi,void 0);j(this,zi,p(e))}orderBy(e,n){return new Ic({overNode:ef.cloneWithOrderByItems(i(this,zi).overNode,dl([e,n]))})}partitionBy(e){return new Ic({overNode:ef.cloneWithPartitionByItems(i(this,zi).overNode,Eg(e))})}$call(e){return e(this)}toOperationNode(){return i(this,zi).overNode}};zi=new WeakMap;let tc=Ic;Le(tc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const pa=p({is(t){return t.kind==="SelectionNode"},create(t){return p({kind:"SelectionNode",selection:t})},createSelectAll(){return p({kind:"SelectionNode",selection:Bf.create()})},createSelectAllFromTable(t){return p({kind:"SelectionNode",selection:hl.createSelectAll(t)})}});function ds(t){return qn(t)?ds(t(Wo())):hi(t)?t.map(e=>$h(e)):[$h(t)]}function $h(t){return wr(t)?pa.create(gg(t)):mp(t)?pa.create(t.toOperationNode()):pa.create(Lp(t))}function iu(t){return t?Array.isArray(t)?t.map(Qh):[Qh(t)]:[pa.createSelectAll()]}function Qh(t){if(wr(t))return pa.createSelectAllFromTable(dn(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const Og=p({is(t){return t.kind==="ValuesNode"},create(t){return p({kind:"ValuesNode",values:p(t)})}}),qg=p({is(t){return t.kind==="DefaultInsertValueNode"},create(){return p({kind:"DefaultInsertValueNode"})}});function Cg(t){const e=qn(t)?t(Wo()):t,n=hi(e)?e:p([e]);return Ig(n)}function Ig(t){const e=Tg(t);return[p([...e.keys()].map(mt.create)),Og.create(t.map(n=>Sg(n,e)))]}function Tg(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const a of r)!e.has(a)&&n[a]!==void 0&&e.set(a,e.size)}return e}function Sg(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let a=!1;for(const m of n){const g=e.get(m);if(ls(g))continue;const v=t[m];(ls(v)||ou(v))&&(a=!0),r[g]=v}if(n.length<e.size||a){const m=qg.create();return Uf.create(r.map(g=>ls(g)?m:en(g)))}return vp.create(r)}const fr=p({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return p({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},cloneWith(t,e){return p({...t,...e})}}),nc=p({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return p({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return p({...t,from:t.from?Zu.cloneWithFroms(t.from,e):Zu.create(e)})},cloneWithUpdates(t,e){return p({...t,updates:t.updates?p([...t.updates,...e]):e})}}),jh=p({is(t){return t.kind==="UsingNode"},create(t){return p({kind:"UsingNode",tables:p(t)})},cloneWithTables(t,e){return p({...t,tables:p([...t.tables,...e])})}}),ma=p({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return p({kind:"DeleteQueryNode",from:Zu.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return p({...t,orderBy:t.orderBy?Co.cloneWithItems(t.orderBy,e):Co.create(e)})},cloneWithLimit(t,e){return p({...t,limit:e})},cloneWithUsing(t,e){return p({...t,using:t.using!==void 0?jh.cloneWithTables(t.using,e):jh.create(e)})}}),fn=p({is(t){return t.kind==="WhereNode"},create(t){return p({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return p({...t,where:e==="And"?pi.create(t.where,n):ko.create(t.where,n)})}}),zh=p({is(t){return t.kind==="ReturningNode"},create(t){return p({kind:"ReturningNode",selections:p(t)})},cloneWithSelections(t,e){return p({...t,selections:t.selections?p([...t.selections,...e]):p(e)})}}),Ag=p({is(t){return t.kind==="ExplainNode"},create(t,e){return p({kind:"ExplainNode",format:t,options:e})}}),We=p({is(t){return De.is(t)||fr.is(t)||nc.is(t)||ma.is(t)},cloneWithWhere(t,e){return p({...t,where:t.where?fn.cloneWithOperation(t.where,"And",e):fn.create(e)})},cloneWithJoin(t,e){return p({...t,joins:t.joins?p([...t.joins,e]):p([e])})},cloneWithReturning(t,e){return p({...t,returning:t.returning?zh.cloneWithSelections(t.returning,e):zh.create(e)})},cloneWithoutWhere(t){return p({...t,where:void 0})},cloneWithExplain(t,e,n){return p({...t,explain:Ag.create(e,n==null?void 0:n.toOperationNode())})}}),kg=p({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return p({kind:"ColumnUpdateNode",column:t,value:e})}});function jf(t){const e=qn(t)?t(Wo()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>kg.create(mt.create(n),en(r)))}const Wg=p({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return p({kind:"OnDuplicateKeyNode",updates:t})}});class Rg{constructor(e,n){ge(this,"insertId");ge(this,"numInsertedOrUpdatedRows");this.insertId=e,this.numInsertedOrUpdatedRows=n}}class pl extends Error{constructor(n){super("no result");ge(this,"node");this.node=n}}function ml(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const On=p({is(t){return t.kind==="OnConflictNode"},create(){return p({kind:"OnConflictNode"})},cloneWith(t,e){return p({...t,...e})},cloneWithIndexWhere(t,e){return p({...t,indexWhere:t.indexWhere?fn.cloneWithOperation(t.indexWhere,"And",e):fn.create(e)})},cloneWithIndexOrWhere(t,e){return p({...t,indexWhere:t.indexWhere?fn.cloneWithOperation(t.indexWhere,"Or",e):fn.create(e)})},cloneWithUpdateWhere(t,e){return p({...t,updateWhere:t.updateWhere?fn.cloneWithOperation(t.updateWhere,"And",e):fn.create(e)})},cloneWithUpdateOrWhere(t,e){return p({...t,updateWhere:t.updateWhere?fn.cloneWithOperation(t.updateWhere,"Or",e):fn.create(e)})},cloneWithoutIndexWhere(t){return p({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return p({...t,updateWhere:void 0})}});var Ze;const Er=class Er{constructor(e){W(this,Ze,void 0);j(this,Ze,p(e))}column(e){const n=mt.create(e);return new Er({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,n]):p([n])})})}columns(e){const n=e.map(mt.create);return new Er({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{columns:i(this,Ze).onConflictNode.columns?p([...i(this,Ze).onConflictNode.columns,...n]):p(n)})})}constraint(e){return new Er({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{constraint:ut.create(e)})})}expression(e){return new Er({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Er({...i(this,Ze),onConflictNode:On.cloneWithIndexWhere(i(this,Ze).onConflictNode,Ht(e))})}whereRef(e,n,r){return new Er({...i(this,Ze),onConflictNode:On.cloneWithIndexWhere(i(this,Ze).onConflictNode,Wr(e,n,r))})}clearWhere(){return new Er({...i(this,Ze),onConflictNode:On.cloneWithoutIndexWhere(i(this,Ze).onConflictNode)})}doNothing(){return new Ep({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ic({...i(this,Ze),onConflictNode:On.cloneWith(i(this,Ze).onConflictNode,{updates:jf(e)})})}$call(e){return e(this)}};Ze=new WeakMap;let rc=Er;Le(rc,"don't await OnConflictBuilder instances.");var La;class Ep{constructor(e){W(this,La,void 0);j(this,La,p(e))}toOperationNode(){return i(this,La).onConflictNode}}La=new WeakMap;Le(Ep,"don't await OnConflictDoNothingBuilder instances.");var jn;const wa=class wa{constructor(e){W(this,jn,void 0);j(this,jn,p(e))}where(...e){return new wa({...i(this,jn),onConflictNode:On.cloneWithUpdateWhere(i(this,jn).onConflictNode,Ht(e))})}whereRef(e,n,r){return new wa({...i(this,jn),onConflictNode:On.cloneWithUpdateWhere(i(this,jn).onConflictNode,Wr(e,n,r))})}clearWhere(){return new wa({...i(this,jn),onConflictNode:On.cloneWithoutUpdateWhere(i(this,jn).onConflictNode)})}$call(e){return e(this)}toOperationNode(){return i(this,jn).onConflictNode}};jn=new WeakMap;let ic=wa;Le(ic,"don't await OnConflictUpdateBuilder instances.");var Se;const $t=class $t{constructor(e){W(this,Se,void 0);j(this,Se,p(e))}values(e){const[n,r]=Cg(e);return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:n,values:r})})}columns(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{columns:p(e.map(mt.create))})})}expression(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{values:Ro(e)})})}ignore(){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{ignore:!0})})}onConflict(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onConflict:e(new rc({onConflictNode:On.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new $t({...i(this,Se),queryNode:fr.cloneWith(i(this,Se).queryNode,{onDuplicateKey:Wg.create(jf(e))})})}returning(e){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,ds(e))})}returningAll(){return new $t({...i(this,Se),queryNode:We.cloneWithReturning(i(this,Se).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new $t({...i(this,Se)})}$castTo(){return new $t(i(this,Se))}$narrowType(){return new $t(i(this,Se))}$assertType(){return new $t(i(this,Se))}withPlugin(e){return new $t({...i(this,Se),executor:i(this,Se).executor.withPlugin(e)})}toOperationNode(){return i(this,Se).executor.transformQuery(i(this,Se).queryNode,i(this,Se).queryId)}compile(){return i(this,Se).executor.compileQuery(this.toOperationNode(),i(this,Se).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,Se).executor.executeQuery(e,i(this,Se).queryId);return i(this,Se).executor.adapter.supportsReturning&&n.returning?r.rows:[new Rg(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const n=await this.executeTakeFirst();if(n===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Se).executor.stream(n,e,i(this,Se).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new $t({...i(this,Se),queryNode:We.cloneWithExplain(i(this,Se).queryNode,e,n)}).execute()}};Se=new WeakMap;let Aa=$t;Le(Aa,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Dg{constructor(e){ge(this,"numDeletedRows");this.numDeletedRows=e}}const Op=p({is(t){return t.kind==="LimitNode"},create(t){return p({kind:"LimitNode",limit:gr.create(t)})}});var be;const wt=class wt{constructor(e){W(this,be,void 0);j(this,be,p(e))}where(...e){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Ht(e))})}whereRef(e,n,r){return new wt({...i(this,be),queryNode:We.cloneWithWhere(i(this,be).queryNode,Wr(e,n,r))})}clearWhere(){return new wt({...i(this,be),queryNode:We.cloneWithoutWhere(i(this,be).queryNode)})}using(e){return new wt({...i(this,be),queryNode:ma.cloneWithUsing(i(this,be).queryNode,Wa(e))})}innerJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,hn("InnerJoin",e))})}leftJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,hn("LeftJoin",e))})}rightJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,hn("RightJoin",e))})}fullJoin(...e){return new wt({...i(this,be),queryNode:We.cloneWithJoin(i(this,be).queryNode,hn("FullJoin",e))})}returning(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,ds(e))})}returningAll(e){return new wt({...i(this,be),queryNode:We.cloneWithReturning(i(this,be).queryNode,iu(e))})}orderBy(e,n){return new wt({...i(this,be),queryNode:ma.cloneWithOrderByItems(i(this,be).queryNode,dl([e,n]))})}limit(e){return new wt({...i(this,be),queryNode:ma.cloneWithLimit(i(this,be).queryNode,Op.create(e))})}$call(e){return e(this)}$if(e,n){return e?n(this):new wt({...i(this,be)})}$castTo(){return new wt(i(this,be))}$narrowType(){return new wt(i(this,be))}$assertType(){return new wt(i(this,be))}withPlugin(e){return new wt({...i(this,be),executor:i(this,be).executor.withPlugin(e)})}toOperationNode(){return i(this,be).executor.transformQuery(i(this,be).queryNode,i(this,be).queryId)}compile(){return i(this,be).executor.compileQuery(this.toOperationNode(),i(this,be).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,be).executor.executeQuery(e,i(this,be).queryId);return i(this,be).executor.adapter.supportsReturning&&n.returning?r.rows:[new Dg(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const n=await this.executeTakeFirst();if(n===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,be).executor.stream(n,e,i(this,be).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new wt({...i(this,be),queryNode:We.cloneWithExplain(i(this,be).queryNode,e,n)}).execute()}};be=new WeakMap;let sc=wt;Le(sc,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class Pg{constructor(e,n){ge(this,"numUpdatedRows");ge(this,"numChangedRows");this.numUpdatedRows=e,this.numChangedRows=n}}var Oe;const _t=class _t{constructor(e){W(this,Oe,void 0);j(this,Oe,p(e))}where(...e){return new _t({...i(this,Oe),queryNode:We.cloneWithWhere(i(this,Oe).queryNode,Ht(e))})}whereRef(e,n,r){return new _t({...i(this,Oe),queryNode:We.cloneWithWhere(i(this,Oe).queryNode,Wr(e,n,r))})}clearWhere(){return new _t({...i(this,Oe),queryNode:We.cloneWithoutWhere(i(this,Oe).queryNode)})}from(e){return new _t({...i(this,Oe),queryNode:nc.cloneWithFromItems(i(this,Oe).queryNode,Wa(e))})}innerJoin(...e){return new _t({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,hn("InnerJoin",e))})}leftJoin(...e){return new _t({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,hn("LeftJoin",e))})}rightJoin(...e){return new _t({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,hn("RightJoin",e))})}fullJoin(...e){return new _t({...i(this,Oe),queryNode:We.cloneWithJoin(i(this,Oe).queryNode,hn("FullJoin",e))})}set(e){return new _t({...i(this,Oe),queryNode:nc.cloneWithUpdates(i(this,Oe).queryNode,jf(e))})}returning(e){return new _t({...i(this,Oe),queryNode:We.cloneWithReturning(i(this,Oe).queryNode,ds(e))})}returningAll(){return new _t({...i(this,Oe),queryNode:We.cloneWithReturning(i(this,Oe).queryNode,iu())})}$call(e){return e(this)}$if(e,n){return e?n(this):new _t({...i(this,Oe)})}$castTo(){return new _t(i(this,Oe))}$narrowType(){return new _t(i(this,Oe))}$assertType(){return new _t(i(this,Oe))}withPlugin(e){return new _t({...i(this,Oe),executor:i(this,Oe).executor.withPlugin(e)})}toOperationNode(){return i(this,Oe).executor.transformQuery(i(this,Oe).queryNode,i(this,Oe).queryId)}compile(){return i(this,Oe).executor.compileQuery(this.toOperationNode(),i(this,Oe).queryId)}async execute(){const e=this.compile(),n=e.query,r=await i(this,Oe).executor.executeQuery(e,i(this,Oe).queryId);return i(this,Oe).executor.adapter.supportsReturning&&n.returning?r.rows:[new Pg(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const n=await this.executeTakeFirst();if(n===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,Oe).executor.stream(n,e,i(this,Oe).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new _t({...i(this,Oe),queryNode:We.cloneWithExplain(i(this,Oe).queryNode,e,n)}).execute()}};Oe=new WeakMap;let oc=_t;Le(oc,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Vh=p({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return p({kind:"CommonTableExpressionNameNode",table:li.create(t),columns:e?p(e.map(mt.create)):void 0})}}),ac=p({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return p({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return p({...t,...e})}});var Or;const Tc=class Tc{constructor(e){W(this,Or,void 0);j(this,Or,p(e))}materialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!0})})}notMaterialized(){return new Tc({...i(this,Or),node:ac.cloneWith(i(this,Or).node,{materialized:!1})})}toOperationNode(){return i(this,Or).node}};Or=new WeakMap;let uc=Tc;Le(uc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Hh(t,e){const n=e(Vg()).toOperationNode();return qn(t)?t(Lg(n)).toOperationNode():ac.create(qp(t),n)}function Lg(t){return e=>new uc({node:ac.create(qp(e),t)})}function qp(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(a=>a.trim());return Vh.create(n,r)}else return Vh.create(t)}const Au=p({is(t){return t.kind==="WithNode"},create(t,e){return p({kind:"WithNode",expressions:p([t]),...e})},cloneWithExpression(t,e){return p({...t,expressions:p([...t.expressions,e])})}}),Kh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Mg(t){let e="";for(let n=0;n<t;++n)e+=Bg();return e}function Bg(){return Kh[~~(Math.random()*Kh.length)]}function He(){return new Fg}var Ys;class Fg{constructor(){W(this,Ys,void 0)}get queryId(){return i(this,Ys)===void 0&&j(this,Ys,Mg(8)),i(this,Ys)}}Ys=new WeakMap;var Sc;class zf{constructor(){ge(this,"nodeStack",[]);W(this,Sc,p({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)}))}transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),p(n)}transformNodeImpl(e){return i(this,Sc)[e.kind](e)}transformNodeList(e){return e&&p(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:p([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}Sc=new WeakMap;const Ug=p({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});var Xs,Vi,Hi,Ac,Cp,kc,Ip,Wc,Tp,Ki,ca,Ma,tf,Rc,Sp;class $g extends zf{constructor(n){super();W(this,Ac);W(this,kc);W(this,Wc);W(this,Ki);W(this,Ma);W(this,Rc);W(this,Xs,void 0);W(this,Vi,new Set);W(this,Hi,new Set);j(this,Xs,n)}transformNodeImpl(n){if(!ve(this,Ac,Cp).call(this,n))return super.transformNodeImpl(n);const r=ve(this,Wc,Tp).call(this,n);for(const m of r)i(this,Hi).add(m);const a=ve(this,kc,Ip).call(this,n);for(const m of a)i(this,Vi).add(m);const c=super.transformNodeImpl(n);for(const m of a)i(this,Vi).delete(m);for(const m of r)i(this,Hi).delete(m);return c}transformSchemableIdentifier(n){const r=super.transformSchemableIdentifier(n);return r.schema||!i(this,Vi).has(n.identifier.name)?r:{...r,schema:ut.create(i(this,Xs))}}transformReferences(n){const r=super.transformReferences(n);return r.table.table.schema?r:{...r,table:li.createWithSchema(i(this,Xs),r.table.table.identifier.name)}}}Xs=new WeakMap,Vi=new WeakMap,Hi=new WeakMap,Ac=new WeakSet,Cp=function(n){return n.kind in Ug},kc=new WeakSet,Ip=function(n){const r=new Set;if("name"in n&&n.name&&di.is(n.name)&&ve(this,Ma,tf).call(this,n.name,r),"from"in n&&n.from)for(const a of n.from.froms)ve(this,Ki,ca).call(this,a,r);if("into"in n&&n.into&&ve(this,Ki,ca).call(this,n.into,r),"table"in n&&n.table&&ve(this,Ki,ca).call(this,n.table,r),"joins"in n&&n.joins)for(const a of n.joins)ve(this,Ki,ca).call(this,a.table,r);return r},Wc=new WeakSet,Tp=function(n){const r=new Set;return"with"in n&&n.with&&ve(this,Rc,Sp).call(this,n.with,r),r},Ki=new WeakSet,ca=function(n,r){const a=li.is(n)?n:yi.is(n)&&li.is(n.node)?n.node:null;a&&ve(this,Ma,tf).call(this,a.table,r)},Ma=new WeakSet,tf=function(n,r){const a=n.identifier.name;!i(this,Vi).has(a)&&!i(this,Hi).has(a)&&r.add(a)},Rc=new WeakSet,Sp=function(n,r){for(const a of n.expressions){const c=a.name.table.table.identifier.name;i(this,Hi).has(c)||r.add(c)}};var Ba;class su{constructor(e){W(this,Ba,void 0);j(this,Ba,new $g(e))}transformQuery(e){return i(this,Ba).transformNode(e.node)}async transformResult(e){return e.result}}Ba=new WeakMap;var Ve;const $i=class $i{constructor(e){W(this,Ve,void 0);j(this,Ve,p(e))}selectFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.createFrom(Wa(e),i(this,Ve).withNode)})}selectNoFrom(e){return fc({queryId:He(),executor:i(this,Ve).executor,queryNode:De.cloneWithSelections(De.create(i(this,Ve).withNode),ds(e))})}insertInto(e){return new Aa({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(dn(e),i(this,Ve).withNode)})}replaceInto(e){return new Aa({queryId:He(),executor:i(this,Ve).executor,queryNode:fr.create(dn(e),i(this,Ve).withNode,!0)})}deleteFrom(e){return new sc({queryId:He(),executor:i(this,Ve).executor,queryNode:ma.create(Wa(e),i(this,Ve).withNode)})}updateTable(e){return new oc({queryId:He(),executor:i(this,Ve).executor,queryNode:nc.create(Ra(e),i(this,Ve).withNode)})}with(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?Au.cloneWithExpression(i(this,Ve).withNode,r):Au.create(r)})}withRecursive(e,n){const r=Hh(e,n);return new $i({...i(this,Ve),withNode:i(this,Ve).withNode?Au.cloneWithExpression(i(this,Ve).withNode,r):Au.create(r,{recursive:!0})})}withPlugin(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPlugin(e)})}withoutPlugins(){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withoutPlugins()})}withSchema(e){return new $i({...i(this,Ve),executor:i(this,Ve).executor.withPluginAtFront(new su(e))})}};Ve=new WeakMap;let cc=$i;var Fa,Zs,eo;class Jh{constructor(){W(this,Fa,void 0);W(this,Zs,void 0);W(this,eo,void 0);ge(this,"resolve",e=>{i(this,Zs)&&i(this,Zs).call(this,e)});ge(this,"reject",e=>{i(this,eo)&&i(this,eo).call(this,e)});j(this,Fa,new Promise((e,n)=>{j(this,eo,n),j(this,Zs,e)}))}get promise(){return i(this,Fa)}}Fa=new WeakMap,Zs=new WeakMap,eo=new WeakMap;const Gh=new Set;function Qg(t){Gh.has(t)||(Gh.add(t),console.log(t))}const jg=p([]);var Ji,Ua,nf;class Ap{constructor(e=jg){W(this,Ua);W(this,Ji,void 0);j(this,Ji,e)}get plugins(){return i(this,Ji)}transformQuery(e,n){for(const r of i(this,Ji)){const a=r.transformQuery({node:e,queryId:n});if(a.kind===e.kind)e=a;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${a.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const a=await r.executeQuery(e),c=await ve(this,Ua,nf).call(this,a,n);return zg(a,c),c})}async*stream(e,n,r){const a=new Jh,c=new Jh;this.provideConnection(async g=>(a.resolve(g),await c.promise)).catch(g=>a.reject(g));const m=await a.promise;try{for await(const g of m.streamQuery(e,n))yield await ve(this,Ua,nf).call(this,g,r)}finally{c.resolve()}}}Ji=new WeakMap,Ua=new WeakSet,nf=async function(e,n){for(const r of i(this,Ji))e=await r.transformResult({result:e,queryId:n});return e};function zg(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||Qg("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Fs extends Ap{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Fs([...this.plugins,e])}withPlugins(e){return new Fs([...this.plugins,...e])}withPluginAtFront(e){return new Fs([e,...this.plugins])}withoutPlugins(){return new Fs([])}}const Vf=new Fs;function Vg(){return new cc({executor:Vf})}function Hg(t,e){return new ec({joinNode:ha.create(t,Ra(e))})}function Kg(){return new tc({overNode:ef.create()})}function hn(t,e){if(e.length===3)return Gg(t,e[0],e[1],e[2]);if(e.length===2)return Jg(t,e[0],e[1]);throw new Error("not implemented")}function Jg(t,e,n){return n(Hg(t,e)).toOperationNode()}function Gg(t,e,n,r){return ha.createWithOn(t,Ra(e),Wr(n,"=",r))}const Yg=p({is(t){return t.kind==="OffsetNode"},create(t){return p({kind:"OffsetNode",offset:gr.create(t)})}}),Xg=p({is(t){return t.kind==="GroupByItemNode"},create(t){return p({kind:"GroupByItemNode",groupBy:t})}});function Zg(t){return t=qn(t)?t(Wo()):t,Sa(t).map(Xg.create)}const kp=p({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return p({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Rs(t,e,n){return qn(e)&&(e=e(Jf())),hi(e)||(e=[e]),e.map(r=>kp.create(t,Ro(r),n))}var Xr;const eh=class eh{constructor(e){W(this,Xr,void 0);j(this,Xr,e)}get expressionType(){}as(e){return new Hf(this,e)}or(...e){return new rf(ko.create(i(this,Xr),Ht(e)))}and(...e){return new sf(pi.create(i(this,Xr),Ht(e)))}$castTo(){return new eh(i(this,Xr))}toOperationNode(){return i(this,Xr)}};Xr=new WeakMap;let rt=eh;var to,Zr;class Hf{constructor(e,n){W(this,to,void 0);W(this,Zr,void 0);j(this,to,e),j(this,Zr,n)}get expression(){return i(this,to)}get alias(){return i(this,Zr)}toOperationNode(){return yi.create(i(this,to).toOperationNode(),Wn(i(this,Zr))?i(this,Zr).toOperationNode():ut.create(i(this,Zr)))}}to=new WeakMap,Zr=new WeakMap;var Gi;const Dc=class Dc{constructor(e){W(this,Gi,void 0);j(this,Gi,e)}get expressionType(){}as(e){return new Hf(this,e)}or(...e){return new Dc(ko.create(i(this,Gi),Ht(e)))}$castTo(){return new Dc(i(this,Gi))}toOperationNode(){return qo.create(i(this,Gi))}};Gi=new WeakMap;let rf=Dc;var Yi;const Pc=class Pc{constructor(e){W(this,Yi,void 0);j(this,Yi,e)}get expressionType(){}as(e){return new Hf(this,e)}and(...e){return new Pc(pi.create(i(this,Yi),Ht(e)))}$castTo(){return new Pc(i(this,Yi))}toOperationNode(){return qo.create(i(this,Yi))}};Yi=new WeakMap;let sf=Pc;var X;const _e=class _e{constructor(e){W(this,X,void 0);j(this,X,p(e))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new _e({...i(this,X),queryNode:We.cloneWithWhere(i(this,X).queryNode,Ht(e))})}whereRef(e,n,r){return new _e({...i(this,X),queryNode:We.cloneWithWhere(i(this,X).queryNode,Wr(e,n,r))})}having(...e){return new _e({...i(this,X),queryNode:De.cloneWithHaving(i(this,X).queryNode,Ht(e))})}havingRef(e,n,r){return new _e({...i(this,X),queryNode:De.cloneWithHaving(i(this,X).queryNode,Wr(e,n,r))})}select(e){return new _e({...i(this,X),queryNode:De.cloneWithSelections(i(this,X).queryNode,ds(e))})}distinctOn(e){return new _e({...i(this,X),queryNode:De.cloneWithDistinctOn(i(this,X).queryNode,Sa(e))})}modifyFront(e){return new _e({...i(this,X),queryNode:De.cloneWithFrontModifier(i(this,X).queryNode,vr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.createWithExpression(e.toOperationNode()))})}distinct(){return new _e({...i(this,X),queryNode:De.cloneWithFrontModifier(i(this,X).queryNode,vr.create("Distinct"))})}forUpdate(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForUpdate"))})}forShare(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForShare"))})}forKeyShare(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForKeyShare"))})}forNoKeyUpdate(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("ForNoKeyUpdate"))})}skipLocked(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("SkipLocked"))})}noWait(){return new _e({...i(this,X),queryNode:De.cloneWithEndModifier(i(this,X).queryNode,vr.create("NoWait"))})}selectAll(e){return new _e({...i(this,X),queryNode:De.cloneWithSelections(i(this,X).queryNode,iu(e))})}innerJoin(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("InnerJoin",e))})}leftJoin(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("LeftJoin",e))})}rightJoin(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("RightJoin",e))})}fullJoin(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("FullJoin",e))})}innerJoinLateral(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("LateralInnerJoin",e))})}leftJoinLateral(...e){return new _e({...i(this,X),queryNode:We.cloneWithJoin(i(this,X).queryNode,hn("LateralLeftJoin",e))})}orderBy(...e){return new _e({...i(this,X),queryNode:De.cloneWithOrderByItems(i(this,X).queryNode,dl(e))})}groupBy(e){return new _e({...i(this,X),queryNode:De.cloneWithGroupByItems(i(this,X).queryNode,Zg(e))})}limit(e){return new _e({...i(this,X),queryNode:De.cloneWithLimit(i(this,X).queryNode,Op.create(e))})}offset(e){return new _e({...i(this,X),queryNode:De.cloneWithOffset(i(this,X).queryNode,Yg.create(e))})}union(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("union",e,!1))})}unionAll(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("union",e,!0))})}intersect(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("intersect",e,!1))})}intersectAll(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("intersect",e,!0))})}except(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("except",e,!1))})}exceptAll(e){return new _e({...i(this,X),queryNode:De.cloneWithSetOperations(i(this,X).queryNode,Rs("except",e,!0))})}as(e){return new Wp(this,e)}clearSelect(){return new _e({...i(this,X),queryNode:De.cloneWithoutSelections(i(this,X).queryNode)})}clearWhere(){return new _e({...i(this,X),queryNode:We.cloneWithoutWhere(i(this,X).queryNode)})}clearLimit(){return new _e({...i(this,X),queryNode:De.cloneWithoutLimit(i(this,X).queryNode)})}clearOffset(){return new _e({...i(this,X),queryNode:De.cloneWithoutOffset(i(this,X).queryNode)})}clearOrderBy(){return new _e({...i(this,X),queryNode:De.cloneWithoutOrderBy(i(this,X).queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new _e({...i(this,X)})}$castTo(){return new _e(i(this,X))}$narrowType(){return new _e(i(this,X))}$assertType(){return new _e(i(this,X))}$asTuple(){return new rt(this.toOperationNode())}withPlugin(e){return new _e({...i(this,X),executor:i(this,X).executor.withPlugin(e)})}toOperationNode(){return i(this,X).executor.transformQuery(i(this,X).queryNode,i(this,X).queryId)}compile(){return i(this,X).executor.compileQuery(this.toOperationNode(),i(this,X).queryId)}async execute(){const e=this.compile();return(await i(this,X).executor.executeQuery(e,i(this,X).queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=pl){const n=await this.executeTakeFirst();if(n===void 0)throw ml(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=i(this,X).executor.stream(n,e,i(this,X).queryId);for await(const a of r)yield*a.rows}async explain(e,n){return await new _e({...i(this,X),queryNode:We.cloneWithExplain(i(this,X).queryNode,e,n)}).execute()}};X=new WeakMap;let lc=_e;Le(lc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function fc(t){return new lc(t)}var no,ro;class Wp{constructor(e,n){W(this,no,void 0);W(this,ro,void 0);j(this,no,e),j(this,ro,n)}get expression(){return i(this,no)}get alias(){return i(this,ro)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return yi.create(i(this,no).toOperationNode(),ut.create(i(this,ro)))}}no=new WeakMap,ro=new WeakMap;Le(Wp,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Us=p({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return p({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return p({...t,distinct:!0})},cloneWithFilter(t,e){return p({...t,filter:t.filter?fn.cloneWithOperation(t.filter,"And",e):fn.create(e)})},cloneWithOrFilter(t,e){return p({...t,filter:t.filter?fn.cloneWithOperation(t.filter,"Or",e):fn.create(e)})},cloneWithOver(t,e){return p({...t,over:e})}}),eb=p({is(t){return t.kind==="FunctionNode"},create(t,e){return p({kind:"FunctionNode",func:t,arguments:e})}});var vn;const Qs=class Qs{constructor(e){W(this,vn,void 0);j(this,vn,p(e))}get expressionType(){}as(e){return new tb(this,e)}distinct(){return new Qs({...i(this,vn),aggregateFunctionNode:Us.cloneWithDistinct(i(this,vn).aggregateFunctionNode)})}filterWhere(...e){return new Qs({...i(this,vn),aggregateFunctionNode:Us.cloneWithFilter(i(this,vn).aggregateFunctionNode,Ht(e))})}filterWhereRef(e,n,r){return new Qs({...i(this,vn),aggregateFunctionNode:Us.cloneWithFilter(i(this,vn).aggregateFunctionNode,Wr(e,n,r))})}over(e){const n=Kg();return new Qs({...i(this,vn),aggregateFunctionNode:Us.cloneWithOver(i(this,vn).aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,vn).aggregateFunctionNode}};vn=new WeakMap;let ka=Qs;Le(ka,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var io,so;class tb{constructor(e,n){W(this,io,void 0);W(this,so,void 0);j(this,io,e),j(this,so,n)}get expression(){return i(this,io)}get alias(){return i(this,so)}toOperationNode(){return yi.create(i(this,io).toOperationNode(),ut.create(i(this,so)))}}io=new WeakMap,so=new WeakMap;function Rp(){const t=(n,r)=>new rt(eb.create(n,Sa(r))),e=(n,r)=>new ka({aggregateFunctionNode:Us.create(n,r?Sa(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(n,...r){return t("coalesce",[n,...r])},count(n){return e("count",[n])},countAll(n){return new ka({aggregateFunctionNode:Us.create("count",iu(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])}})}const nb=p({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return p({kind:"UnaryOperationNode",operator:t,operand:e})}});function rb(t,e){return nb.create(hs.create(t),Yn(e))}const Kf=p({is(t){return t.kind==="WhenNode"},create(t){return p({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return p({...t,result:e})}}),mr=p({is(t){return t.kind==="CaseNode"},create(t){return p({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return p({...t,when:p(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return p({...t,when:t.when?p([...t.when.slice(0,-1),Kf.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return p({...t,...e})}});var oo;class Dp{constructor(e){W(this,oo,void 0);j(this,oo,p(e))}when(...e){return new Pp({...i(this,oo),node:mr.cloneWithWhen(i(this,oo).node,Kf.create(Ht(e)))})}}oo=new WeakMap;var ao;class Pp{constructor(e){W(this,ao,void 0);j(this,ao,p(e))}then(e){return new ib({...i(this,ao),node:mr.cloneWithThen(i(this,ao).node,$f(e)?Qf(e):en(e))})}}ao=new WeakMap;var or;class ib{constructor(e){W(this,or,void 0);j(this,or,p(e))}when(...e){return new Pp({...i(this,or),node:mr.cloneWithWhen(i(this,or).node,Kf.create(Ht(e)))})}else(e){return new sb({...i(this,or),node:mr.cloneWith(i(this,or).node,{else:$f(e)?Qf(e):en(e)})})}end(){return new rt(mr.cloneWith(i(this,or).node,{isStatement:!1}))}endCase(){return new rt(mr.cloneWith(i(this,or).node,{isStatement:!0}))}}or=new WeakMap;var uo;class sb{constructor(e){W(this,uo,void 0);j(this,uo,p(e))}end(){return new rt(mr.cloneWith(i(this,uo).node,{isStatement:!1}))}endCase(){return new rt(mr.cloneWith(i(this,uo).node,{isStatement:!0}))}}uo=new WeakMap;const ob=p({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return p({kind:"JSONPathLegNode",type:t,value:e})}});var ei,$a,af;class of{constructor(e){W(this,$a);W(this,ei,void 0);j(this,ei,e)}at(e){return ve(this,$a,af).call(this,"ArrayLocation",e)}key(e){return ve(this,$a,af).call(this,"Member",e)}}ei=new WeakMap,$a=new WeakSet,af=function(e,n){return new ab(Gl.cloneWithTraversal(i(this,ei),Yl.is(i(this,ei).traversal)?Yl.cloneWithLeg(i(this,ei).traversal,ob.create(e,n)):gp.cloneWithValue(i(this,ei).traversal,gr.createImmediate(n))))};var co;class ab extends of{constructor(n){super(n);W(this,co,void 0);j(this,co,n)}get expressionType(){}as(n){return new ub(this,n)}$castTo(){return new of(i(this,co))}toOperationNode(){return i(this,co)}}co=new WeakMap;var lo,ti;class ub{constructor(e,n){W(this,lo,void 0);W(this,ti,void 0);j(this,lo,e),j(this,ti,n)}get expression(){return i(this,lo)}get alias(){return i(this,ti)}toOperationNode(){return yi.create(i(this,lo).toOperationNode(),Wn(i(this,ti))?i(this,ti).toOperationNode():ut.create(i(this,ti)))}}lo=new WeakMap,ti=new WeakMap;const Yh=p({is(t){return t.kind==="TupleNode"},create(t){return p({kind:"TupleNode",values:p(t)})}});function Jf(t=Vf){function e(a,c,m){return new rt(da(a,c,m))}function n(a,c){return new rt(rb(a,c))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(a){return fc({queryId:He(),executor:t,queryNode:De.createFrom(Wa(a))})},selectNoFrom(a){return fc({queryId:He(),executor:t,queryNode:De.cloneWithSelections(De.create(),ds(a))})},case(a){return new Dp({node:mr.create(ls(a)?void 0:Yn(a))})},ref(a,c){return ls(c)?new rt(kr(a)):new of(wg(a,c))},val(a){return new rt(_p(a))},refTuple(...a){return new rt(Yh.create(a.map(Yn)))},tuple(...a){return new rt(Yh.create(a.map(en)))},lit(a){return new rt(Qf(a))},cmpr(a,c,m){return new rt(da(a,c,m))},bxp(a,c,m){return new rt(da(a,c,m))},unary:n,not(a){return n("not",a)},exists(a){return n("exists",a)},neg(a){return n("-",a)},between(a,c,m){return new rt(Ta.create(Yn(a),hs.create("between"),pi.create(en(c),en(m))))},betweenSymmetric(a,c,m){return new rt(Ta.create(Yn(a),hs.create("between symmetric"),pi.create(en(c),en(m))))},and(a){return hi(a)?new rt(Xl(a,"and")):new rt(Lh(a,"and"))},or(a){return hi(a)?new rt(Xl(a,"or")):new rt(Lh(a,"or"))},parens(...a){const c=Ht(a);return qo.is(c)?new rt(c):new rt(qo.create(c))},withSchema(a){return Jf(t.withPluginAtFront(new su(a)))}});return r.fn=Rp(),r.eb=r,r}function Wo(t){return Jf()}function Ro(t){if(Wn(t))return t.toOperationNode();if(qn(t))return t(Wo()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Lp(t){if(Wn(t))return t.toOperationNode();if(qn(t))return t(Wo()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ou(t){return ag(t)||ug(t)||qn(t)}function Wa(t){return hi(t)?t.map(e=>Ra(e)):[Ra(t)]}function Ra(t){return wr(t)?cb(t):Lp(t)}function cb(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(Mp);return yi.create(dn(n),ut.create(r))}else return dn(t)}function dn(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(Mp);return li.createWithSchema(n,r)}else return li.create(t)}function Mp(t){return t.trim()}const Bp=p({is(t){return t.kind==="AddColumnNode"},create(t){return p({kind:"AddColumnNode",column:t})}}),dt=p({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return p({kind:"ColumnDefinitionNode",column:mt.create(t),dataType:e})},cloneWithFrontModifier(t,e){return p({...t,frontModifiers:t.frontModifiers?p([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return p({...t,endModifiers:t.endModifiers?p([...t.endModifiers,e]):[e]})},cloneWith(t,e){return p({...t,...e})}}),Fp=p({is(t){return t.kind==="DropColumnNode"},create(t){return p({kind:"DropColumnNode",column:mt.create(t)})}}),Up=p({is(t){return t.kind==="RenameColumnNode"},create(t,e){return p({kind:"RenameColumnNode",column:mt.create(t),renameTo:mt.create(e)})}}),Gf=p({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return p({kind:"CheckConstraintNode",expression:t,name:e?ut.create(e):void 0})}}),lb=["no action","restrict","cascade","set null","set default"],Fu=p({is(t){return t.kind==="ReferencesNode"},create(t,e){return p({kind:"ReferencesNode",table:t,columns:p([...e])})},cloneWithOnDelete(t,e){return p({...t,onDelete:e})},cloneWithOnUpdate(t,e){return p({...t,onUpdate:e})}});function $p(t){return Wn(t)?t.toOperationNode():gr.createImmediate(t)}const ku=p({is(t){return t.kind==="GeneratedNode"},create(t){return p({kind:"GeneratedNode",...t})},createWithExpression(t){return p({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return p({...t,...e})}}),fb=p({is(t){return t.kind==="DefaultValueNode"},create(t){return p({kind:"DefaultValueNode",defaultValue:t})}});function hc(t){if(lb.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ge;const Ot=class Ot{constructor(e){W(this,Ge,void 0);j(this,Ge,e)}autoIncrement(){return new Ot(dt.cloneWith(i(this,Ge),{autoIncrement:!0}))}primaryKey(){return new Ot(dt.cloneWith(i(this,Ge),{primaryKey:!0}))}references(e){const n=kr(e);if(!n.table||Bf.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Ot(dt.cloneWith(i(this,Ge),{references:Fu.create(n.table,[n.column])}))}onDelete(e){if(!i(this,Ge).references)throw new Error("on delete constraint can only be added for foreign keys");return new Ot(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnDelete(i(this,Ge).references,hc(e))}))}onUpdate(e){if(!i(this,Ge).references)throw new Error("on update constraint can only be added for foreign keys");return new Ot(dt.cloneWith(i(this,Ge),{references:Fu.cloneWithOnUpdate(i(this,Ge).references,hc(e))}))}unique(){return new Ot(dt.cloneWith(i(this,Ge),{unique:!0}))}notNull(){return new Ot(dt.cloneWith(i(this,Ge),{notNull:!0}))}unsigned(){return new Ot(dt.cloneWith(i(this,Ge),{unsigned:!0}))}defaultTo(e){return new Ot(dt.cloneWith(i(this,Ge),{defaultTo:fb.create($p(e))}))}check(e){return new Ot(dt.cloneWith(i(this,Ge),{check:Gf.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Ot(dt.cloneWith(i(this,Ge),{generated:ku.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Ot(dt.cloneWith(i(this,Ge),{generated:ku.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Ot(dt.cloneWith(i(this,Ge),{generated:ku.create({identity:!0,byDefault:!0})}))}stored(){if(!i(this,Ge).generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Ot(dt.cloneWith(i(this,Ge),{generated:ku.cloneWith(i(this,Ge).generated,{stored:!0})}))}modifyFront(e){return new Ot(dt.cloneWithFrontModifier(i(this,Ge),e.toOperationNode()))}modifyEnd(e){return new Ot(dt.cloneWithEndModifier(i(this,Ge),e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return i(this,Ge)}};Ge=new WeakMap;let mi=Ot;Le(mi,"don't await ColumnDefinitionBuilder instances directly.");const Qp=p({is(t){return t.kind==="ModifyColumnNode"},create(t){return p({kind:"ModifyColumnNode",column:t})}}),hb=p({is(t){return t.kind==="DataTypeNode"},create(t){return p({kind:"DataTypeNode",dataType:t})}});function Io(t){return Wn(t)?t.toOperationNode():hb.create(t)}const dc=p({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return p({kind:"ForeignKeyConstraintNode",columns:t,references:Fu.create(e,n),name:r?ut.create(r):void 0})},cloneWith(t,e){return p({...t,...e})}});var Xi;const Lc=class Lc{constructor(e){W(this,Xi,void 0);j(this,Xi,e)}onDelete(e){return new Lc(dc.cloneWith(i(this,Xi),{onDelete:hc(e)}))}onUpdate(e){return new Lc(dc.cloneWith(i(this,Xi),{onUpdate:hc(e)}))}$call(e){return e(this)}toOperationNode(){return i(this,Xi)}};Xi=new WeakMap;let Da=Lc;Le(Da,"don't await ForeignKeyConstraintBuilder instances directly.");const Uu=p({is(t){return t.kind==="AddConstraintNode"},create(t){return p({kind:"AddConstraintNode",constraint:t})}}),jp=p({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return p({kind:"UniqueConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}}),$u=p({is(t){return t.kind==="DropConstraintNode"},create(t){return p({kind:"DropConstraintNode",constraintName:ut.create(t)})},cloneWith(t,e){return p({...t,...e})}}),sa=p({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return p({kind:"AlterColumnNode",column:mt.create(t),[e]:n})}});var qr;class Yf{constructor(e){W(this,qr,void 0);j(this,qr,e)}setDataType(e){return new oa(sa.create(i(this,qr),"dataType",Io(e)))}setDefault(e){return new oa(sa.create(i(this,qr),"setDefault",$p(e)))}dropDefault(){return new oa(sa.create(i(this,qr),"dropDefault",!0))}setNotNull(){return new oa(sa.create(i(this,qr),"setNotNull",!0))}dropNotNull(){return new oa(sa.create(i(this,qr),"dropNotNull",!0))}$call(e){return e(this)}}qr=new WeakMap;var Qa;class oa{constructor(e){W(this,Qa,void 0);j(this,Qa,e)}toOperationNode(){return i(this,Qa)}}Qa=new WeakMap;var zn;class Ps{constructor(e){W(this,zn,void 0);j(this,zn,p(e))}toOperationNode(){return i(this,zn).executor.transformQuery(i(this,zn).node,i(this,zn).queryId)}compile(){return i(this,zn).executor.compileQuery(this.toOperationNode(),i(this,zn).queryId)}async execute(){await i(this,zn).executor.executeQuery(this.compile(),i(this,zn).queryId)}}zn=new WeakMap;Le(Ps,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Qt;const Mc=class Mc{constructor(e){W(this,Qt,void 0);j(this,Qt,p(e))}onDelete(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onDelete(e)})}onUpdate(e){return new Mc({...i(this,Qt),constraintBuilder:i(this,Qt).constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return i(this,Qt).executor.transformQuery(pt.cloneWithTableProps(i(this,Qt).node,{addConstraint:Uu.create(i(this,Qt).constraintBuilder.toOperationNode())}),i(this,Qt).queryId)}compile(){return i(this,Qt).executor.compileQuery(this.toOperationNode(),i(this,Qt).queryId)}async execute(){await i(this,Qt).executor.executeQuery(this.compile(),i(this,Qt).queryId)}};Qt=new WeakMap;let pc=Mc;Le(pc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var gt;const ga=class ga{constructor(e){W(this,gt,void 0);j(this,gt,p(e))}ifExists(){return new ga({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{ifExists:!0})})})}cascade(){return new ga({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ga({...i(this,gt),node:pt.cloneWithTableProps(i(this,gt).node,{dropConstraint:$u.cloneWith(i(this,gt).node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return i(this,gt).executor.transformQuery(i(this,gt).node,i(this,gt).queryId)}compile(){return i(this,gt).executor.compileQuery(this.toOperationNode(),i(this,gt).queryId)}async execute(){await i(this,gt).executor.executeQuery(this.compile(),i(this,gt).queryId)}};gt=new WeakMap;let mc=ga;Le(mc,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const zp=p({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return p({kind:"PrimaryKeyConstraintNode",columns:p(t.map(mt.create)),name:e?ut.create(e):void 0})}});var Ye;class Vp{constructor(e){W(this,Ye,void 0);j(this,Ye,p(e))}renameTo(e){return new Ps({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{renameTo:dn(e)})})}setSchema(e){return new Ps({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{setSchema:ut.create(e)})})}alterColumn(e,n){const r=n(new Yf(e));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,r.toOperationNode())})}dropColumn(e){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Fp.create(e))})}renameColumn(e,n){return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Up.create(e,n))})}addColumn(e,n,r=Oo){const a=r(new mi(dt.create(e,Io(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Bp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Oo){const a=r(new mi(dt.create(e,Io(n))));return new Yr({...i(this,Ye),node:pt.cloneWithColumnAlteration(i(this,Ye).node,Qp.create(a.toOperationNode()))})}addUniqueConstraint(e,n){return new Ps({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(jp.create(n,e))})})}addCheckConstraint(e,n){return new Ps({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(Gf.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,a){return new pc({...i(this,Ye),constraintBuilder:new Da(dc.create(n.map(mt.create),dn(r),a.map(mt.create),e))})}addPrimaryKeyConstraint(e,n){return new Ps({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{addConstraint:Uu.create(zp.create(n,e))})})}dropConstraint(e){return new mc({...i(this,Ye),node:pt.cloneWithTableProps(i(this,Ye).node,{dropConstraint:$u.create(e)})})}$call(e){return e(this)}}Ye=new WeakMap;var ht;const Qi=class Qi{constructor(e){W(this,ht,void 0);j(this,ht,p(e))}alterColumn(e,n){const r=n(new Yf(e));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,r.toOperationNode())})}dropColumn(e){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Fp.create(e))})}renameColumn(e,n){return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Up.create(e,n))})}addColumn(e,n,r=Oo){const a=r(new mi(dt.create(e,Io(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Bp.create(a.toOperationNode()))})}modifyColumn(e,n,r=Oo){const a=r(new mi(dt.create(e,Io(n))));return new Qi({...i(this,ht),node:pt.cloneWithColumnAlteration(i(this,ht).node,Qp.create(a.toOperationNode()))})}toOperationNode(){return i(this,ht).executor.transformQuery(i(this,ht).node,i(this,ht).queryId)}compile(){return i(this,ht).executor.compileQuery(this.toOperationNode(),i(this,ht).queryId)}async execute(){await i(this,ht).executor.executeQuery(this.compile(),i(this,ht).queryId)}};ht=new WeakMap;let Yr=Qi;Le(Vp,"don't await AlterTableBuilder instances");Le(Yf,"don't await AlterColumnBuilder instances");Le(Yr,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Hp extends zf{transformValue(e){return{...super.transformValue(e),immediate:!0}}}var Xe;const ir=class ir{constructor(e){W(this,Xe,void 0);j(this,Xe,p(e))}ifNotExists(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{ifNotExists:!0})})}unique(){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{unique:!0})})}on(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{table:dn(e)})})}column(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[Ph(e)])})}columns(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,e.map(Ph))})}expression(e){return new ir({...i(this,Xe),node:Vr.cloneWithColumns(i(this,Xe).node,[e.toOperationNode()])})}using(e){return new ir({...i(this,Xe),node:Vr.cloneWith(i(this,Xe).node,{using:Zt.createWithSql(e)})})}where(...e){const n=new Hp;return new ir({...i(this,Xe),node:We.cloneWithWhere(i(this,Xe).node,n.transformNode(Ht(e)))})}$call(e){return e(this)}toOperationNode(){return i(this,Xe).executor.transformQuery(i(this,Xe).node,i(this,Xe).queryId)}compile(){return i(this,Xe).executor.compileQuery(this.toOperationNode(),i(this,Xe).queryId)}async execute(){await i(this,Xe).executor.executeQuery(this.compile(),i(this,Xe).queryId)}};Xe=new WeakMap;let yc=ir;Le(yc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var _n;const th=class th{constructor(e){W(this,_n,void 0);j(this,_n,p(e))}ifNotExists(){return new th({...i(this,_n),node:dp.cloneWith(i(this,_n).node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,_n).executor.transformQuery(i(this,_n).node,i(this,_n).queryId)}compile(){return i(this,_n).executor.compileQuery(this.toOperationNode(),i(this,_n).queryId)}async execute(){await i(this,_n).executor.executeQuery(this.compile(),i(this,_n).queryId)}};_n=new WeakMap;let wc=th;Le(wc,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function db(t){if(og.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Fe;const kn=class kn{constructor(e){W(this,Fe,void 0);j(this,Fe,p(e))}temporary(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{temporary:!0})})}onCommit(e){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{onCommit:db(e)})})}ifNotExists(){return new kn({...i(this,Fe),node:Un.cloneWith(i(this,Fe).node,{ifNotExists:!0})})}addColumn(e,n,r=Oo){const a=r(new mi(dt.create(e,Io(n))));return new kn({...i(this,Fe),node:Un.cloneWithColumn(i(this,Fe).node,a.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,zp.create(n,e))})}addUniqueConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,jp.create(n,e))})}addCheckConstraint(e,n){return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,Gf.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,a,c=Oo){const m=c(new Da(dc.create(n.map(mt.create),dn(r),a.map(mt.create),e)));return new kn({...i(this,Fe),node:Un.cloneWithConstraint(i(this,Fe).node,m.toOperationNode())})}modifyFront(e){return new kn({...i(this,Fe),node:Un.cloneWithFrontModifier(i(this,Fe).node,e.toOperationNode())})}modifyEnd(e){return new kn({...i(this,Fe),node:Un.cloneWithEndModifier(i(this,Fe).node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return i(this,Fe).executor.transformQuery(i(this,Fe).node,i(this,Fe).queryId)}compile(){return i(this,Fe).executor.compileQuery(this.toOperationNode(),i(this,Fe).queryId)}async execute(){await i(this,Fe).executor.executeQuery(this.compile(),i(this,Fe).queryId)}};Fe=new WeakMap;let gc=kn;Le(gc,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Wt;const ba=class ba{constructor(e){W(this,Wt,void 0);j(this,Wt,p(e))}on(e){return new ba({...i(this,Wt),node:Bu.cloneWith(i(this,Wt).node,{table:dn(e)})})}ifExists(){return new ba({...i(this,Wt),node:Bu.cloneWith(i(this,Wt).node,{ifExists:!0})})}cascade(){return new ba({...i(this,Wt),node:Bu.cloneWith(i(this,Wt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Wt).executor.transformQuery(i(this,Wt).node,i(this,Wt).queryId)}compile(){return i(this,Wt).executor.compileQuery(this.toOperationNode(),i(this,Wt).queryId)}async execute(){await i(this,Wt).executor.executeQuery(this.compile(),i(this,Wt).queryId)}};Wt=new WeakMap;let bc=ba;Le(bc,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Yt;const Bc=class Bc{constructor(e){W(this,Yt,void 0);j(this,Yt,p(e))}ifExists(){return new Bc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{ifExists:!0})})}cascade(){return new Bc({...i(this,Yt),node:Hl.cloneWith(i(this,Yt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Yt).executor.transformQuery(i(this,Yt).node,i(this,Yt).queryId)}compile(){return i(this,Yt).executor.compileQuery(this.toOperationNode(),i(this,Yt).queryId)}async execute(){await i(this,Yt).executor.executeQuery(this.compile(),i(this,Yt).queryId)}};Yt=new WeakMap;let Nc=Bc;Le(Nc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Xt;const Fc=class Fc{constructor(e){W(this,Xt,void 0);j(this,Xt,p(e))}ifExists(){return new Fc({...i(this,Xt),node:Kl.cloneWith(i(this,Xt).node,{ifExists:!0})})}cascade(){return new Fc({...i(this,Xt),node:Kl.cloneWith(i(this,Xt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Xt).executor.transformQuery(i(this,Xt).node,i(this,Xt).queryId)}compile(){return i(this,Xt).executor.compileQuery(this.toOperationNode(),i(this,Xt).queryId)}async execute(){await i(this,Xt).executor.executeQuery(this.compile(),i(this,Xt).queryId)}};Xt=new WeakMap;let vc=Fc;Le(vc,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Jr=p({is(t){return t.kind==="CreateViewNode"},create(t){return p({kind:"CreateViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Uc;class pb{constructor(){W(this,Uc,new Hp)}transformQuery(e){return i(this,Uc).transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}Uc=new WeakMap;var at;const Gr=class Gr{constructor(e){W(this,at,void 0);j(this,at,p(e))}temporary(){return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{temporary:!0})})}materialized(){return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{materialized:!0})})}ifNotExists(){return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{ifNotExists:!0})})}orReplace(){return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{orReplace:!0})})}columns(e){return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{columns:e.map(Np)})})}as(e){const n=e.withPlugin(new pb).toOperationNode();return new Gr({...i(this,at),node:Jr.cloneWith(i(this,at).node,{as:n})})}$call(e){return e(this)}toOperationNode(){return i(this,at).executor.transformQuery(i(this,at).node,i(this,at).queryId)}compile(){return i(this,at).executor.compileQuery(this.toOperationNode(),i(this,at).queryId)}async execute(){await i(this,at).executor.executeQuery(this.compile(),i(this,at).queryId)}};at=new WeakMap;let _c=Gr;Le(_c,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Qu=p({is(t){return t.kind==="DropViewNode"},create(t){return p({kind:"DropViewNode",name:di.create(t)})},cloneWith(t,e){return p({...t,...e})}});var Rt;const Na=class Na{constructor(e){W(this,Rt,void 0);j(this,Rt,p(e))}materialized(){return new Na({...i(this,Rt),node:Qu.cloneWith(i(this,Rt).node,{materialized:!0})})}ifExists(){return new Na({...i(this,Rt),node:Qu.cloneWith(i(this,Rt).node,{ifExists:!0})})}cascade(){return new Na({...i(this,Rt),node:Qu.cloneWith(i(this,Rt).node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,Rt).executor.transformQuery(i(this,Rt).node,i(this,Rt).queryId)}compile(){return i(this,Rt).executor.compileQuery(this.toOperationNode(),i(this,Rt).queryId)}async execute(){await i(this,Rt).executor.executeQuery(this.compile(),i(this,Rt).queryId)}};Rt=new WeakMap;let xc=Na;Le(xc,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Kp=p({is(t){return t.kind==="CreateTypeNode"},create(t){return p({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return p({...t,enum:Uf.create(e.map(n=>gr.createImmediate(n)))})}});var xn;const nh=class nh{constructor(e){W(this,xn,void 0);j(this,xn,p(e))}toOperationNode(){return i(this,xn).executor.transformQuery(i(this,xn).node,i(this,xn).queryId)}asEnum(e){return new nh({...i(this,xn),node:Kp.cloneWithEnum(i(this,xn).node,e)})}$call(e){return e(this)}compile(){return i(this,xn).executor.compileQuery(this.toOperationNode(),i(this,xn).queryId)}async execute(){await i(this,xn).executor.executeQuery(this.compile(),i(this,xn).queryId)}};xn=new WeakMap;let Ec=nh;Le(Ec,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Jp=p({is(t){return t.kind==="DropTypeNode"},create(t){return p({kind:"DropTypeNode",name:t})},cloneWith(t,e){return p({...t,...e})}});var En;const rh=class rh{constructor(e){W(this,En,void 0);j(this,En,p(e))}ifExists(){return new rh({...i(this,En),node:Jp.cloneWith(i(this,En).node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return i(this,En).executor.transformQuery(i(this,En).node,i(this,En).queryId)}compile(){return i(this,En).executor.compileQuery(this.toOperationNode(),i(this,En).queryId)}async execute(){await i(this,En).executor.executeQuery(this.compile(),i(this,En).queryId)}};En=new WeakMap;let Oc=rh;Le(Oc,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Xh(t){const e=".";if(t.includes(e)){const n=t.split(e).map(mb);if(n.length===2)return di.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return di.create(t)}function mb(t){return t.trim()}var qt;const va=class va{constructor(e){W(this,qt,void 0);j(this,qt,e)}createTable(e){return new gc({queryId:He(),executor:i(this,qt),node:Un.create(dn(e))})}dropTable(e){return new vc({queryId:He(),executor:i(this,qt),node:Kl.create(dn(e))})}createIndex(e){return new yc({queryId:He(),executor:i(this,qt),node:Vr.create(e)})}dropIndex(e){return new bc({queryId:He(),executor:i(this,qt),node:Bu.create(e)})}createSchema(e){return new wc({queryId:He(),executor:i(this,qt),node:dp.create(e)})}dropSchema(e){return new Nc({queryId:He(),executor:i(this,qt),node:Hl.create(e)})}alterTable(e){return new Vp({queryId:He(),executor:i(this,qt),node:pt.create(dn(e))})}createView(e){return new _c({queryId:He(),executor:i(this,qt),node:Jr.create(e)})}dropView(e){return new xc({queryId:He(),executor:i(this,qt),node:Qu.create(e)})}createType(e){return new Ec({queryId:He(),executor:i(this,qt),node:Kp.create(Xh(e))})}dropType(e){return new Oc({queryId:He(),executor:i(this,qt),node:Jp.create(Xh(e))})}withPlugin(e){return new va(i(this,qt).withPlugin(e))}withoutPlugins(){return new va(i(this,qt).withoutPlugins())}withSchema(e){return new va(i(this,qt).withPluginAtFront(new su(e)))}};qt=new WeakMap;let uf=va;class yb{ref(e){return new mg(e)}}var fo;class wb{constructor(e){W(this,fo,void 0);j(this,fo,e)}async provideConnection(e){const n=await i(this,fo).acquireConnection();try{return await e(n)}finally{await i(this,fo).releaseConnection(n)}}}fo=new WeakMap;var ar,ur,Cr;const ji=class ji extends Ap{constructor(n,r,a,c=[]){super(c);W(this,ar,void 0);W(this,ur,void 0);W(this,Cr,void 0);j(this,ar,n),j(this,ur,r),j(this,Cr,a)}get adapter(){return i(this,ur)}compileQuery(n){return i(this,ar).compileQuery(n)}provideConnection(n){return i(this,Cr).provideConnection(n)}withPlugins(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,...n])}withPlugin(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[...this.plugins,n])}withPluginAtFront(n){return new ji(i(this,ar),i(this,ur),i(this,Cr),[n,...this.plugins])}withConnectionProvider(n){return new ji(i(this,ar),i(this,ur),n,[...this.plugins])}withoutPlugins(){return new ji(i(this,ar),i(this,ur),i(this,Cr),[])}};ar=new WeakMap,ur=new WeakMap,Cr=new WeakMap;let cf=ji;function Zh(){return typeof performance<"u"&&qn(performance.now)?performance.now():Date.now()}var Vn,ni,Ir,ho,Tr,ja,$c,Gp,Qc,Yp,jc,Xp,zc,Zp,za,lf;class gb{constructor(e,n){W(this,$c);W(this,Qc);W(this,jc);W(this,zc);W(this,za);W(this,Vn,void 0);W(this,ni,void 0);W(this,Ir,void 0);W(this,ho,void 0);W(this,Tr,void 0);W(this,ja,new WeakSet);j(this,ho,!1),j(this,Vn,e),j(this,ni,n)}async init(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,Ir)||j(this,Ir,i(this,Vn).init().then(()=>{j(this,ho,!0)}).catch(e=>(j(this,Ir,void 0),Promise.reject(e)))),await i(this,Ir)}async acquireConnection(){if(i(this,Tr))throw new Error("driver has already been destroyed");i(this,ho)||await this.init();const e=await i(this,Vn).acquireConnection();return i(this,ja).has(e)||(ve(this,$c,Gp).call(this)&&ve(this,Qc,Yp).call(this,e),i(this,ja).add(e)),e}async releaseConnection(e){await i(this,Vn).releaseConnection(e)}beginTransaction(e,n){return i(this,Vn).beginTransaction(e,n)}commitTransaction(e){return i(this,Vn).commitTransaction(e)}rollbackTransaction(e){return i(this,Vn).rollbackTransaction(e)}async destroy(){i(this,Ir)&&(await i(this,Ir),i(this,Tr)||j(this,Tr,i(this,Vn).destroy().catch(e=>(j(this,Tr,void 0),Promise.reject(e)))),await i(this,Tr))}}Vn=new WeakMap,ni=new WeakMap,Ir=new WeakMap,ho=new WeakMap,Tr=new WeakMap,ja=new WeakMap,$c=new WeakSet,Gp=function(){return i(this,ni).isLevelEnabled("query")||i(this,ni).isLevelEnabled("error")},Qc=new WeakSet,Yp=function(e){const n=e.executeQuery;e.executeQuery=async r=>{const a=Zh();try{return await n.call(e,r)}catch(c){throw await ve(this,jc,Xp).call(this,c,r,a),c}finally{await ve(this,zc,Zp).call(this,r,a)}}},jc=new WeakSet,Xp=async function(e,n,r){await i(this,ni).error(()=>({level:"error",error:e,query:n,queryDurationMillis:ve(this,za,lf).call(this,r)}))},zc=new WeakSet,Zp=async function(e,n){await i(this,ni).query(()=>({level:"query",query:e,queryDurationMillis:ve(this,za,lf).call(this,n)}))},za=new WeakSet,lf=function(e){return Zh()-e};var Va,ri,Vc,tm;class em{constructor(e){W(this,Vc);W(this,Va,void 0);W(this,ri,void 0);j(this,Va,e)}async provideConnection(e){for(;i(this,ri);)await i(this,ri);const n=ve(this,Vc,tm).call(this,e);return j(this,ri,n.then(()=>{j(this,ri,void 0)}).catch(()=>{j(this,ri,void 0)})),n}}Va=new WeakMap,ri=new WeakMap,Vc=new WeakSet,tm=async function(e){return await e(i(this,Va))};const bb=["read uncommitted","read committed","repeatable read","serializable"];p(["query","error"]);var ii,Zi;class Nb{constructor(e){W(this,ii,void 0);W(this,Zi,void 0);qn(e)?(j(this,Zi,e),j(this,ii,p({query:!0,error:!0}))):(j(this,Zi,vb),j(this,ii,p({query:e.includes("query"),error:e.includes("error")})))}isLevelEnabled(e){return i(this,ii)[e]}async query(e){i(this,ii).query&&await i(this,Zi).call(this,e())}async error(e){i(this,ii).error&&await i(this,Zi).call(this,e())}}ii=new WeakMap,Zi=new WeakMap;function vb(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function _b(t){return dr(t)&&qn(t.compile)}var Dt;const js=class js extends cc{constructor(n){let r,a;if(xb(n))r={executor:n.executor},a={...n};else{const c=n.dialect,m=c.createDriver(),g=c.createQueryCompiler(),v=c.createAdapter(),d=new Nb(n.log??[]),C=new gb(m,d),R=new wb(C),G=new cf(g,v,R,n.plugins??[]);r={executor:G},a={config:n,executor:G,dialect:c,driver:C}}super(r);W(this,Dt,void 0);j(this,Dt,p(a))}get schema(){return new uf(i(this,Dt).executor)}get dynamic(){return new yb}get introspection(){return i(this,Dt).dialect.createIntrospector(this.withoutPlugins())}case(n){return new Dp({node:mr.create(ls(n)?void 0:Ro(n))})}get fn(){return Rp()}transaction(){return new qc({...i(this,Dt)})}connection(){return new nm({...i(this,Dt)})}withPlugin(n){return new js({...i(this,Dt),executor:i(this,Dt).executor.withPlugin(n)})}withoutPlugins(){return new js({...i(this,Dt),executor:i(this,Dt).executor.withoutPlugins()})}withSchema(n){return new js({...i(this,Dt),executor:i(this,Dt).executor.withPluginAtFront(new su(n))})}withTables(){return new js({...i(this,Dt)})}async destroy(){await i(this,Dt).driver.destroy()}get isTransaction(){return!1}getExecutor(){return i(this,Dt).executor}executeQuery(n,r=He()){const a=_b(n)?n.compile():n;return this.getExecutor().executeQuery(a,r)}};Dt=new WeakMap;let Pa=js;var Hn;const zs=class zs extends Pa{constructor(n){super(n);W(this,Hn,void 0);j(this,Hn,n)}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(n){return new zs({...i(this,Hn),executor:i(this,Hn).executor.withPlugin(n)})}withoutPlugins(){return new zs({...i(this,Hn),executor:i(this,Hn).executor.withoutPlugins()})}withSchema(n){return new zs({...i(this,Hn),executor:i(this,Hn).executor.withPluginAtFront(new su(n))})}withTables(){return new zs({...i(this,Hn)})}};Hn=new WeakMap;let ff=zs;function xb(t){return dr(t)&&dr(t.config)&&dr(t.driver)&&dr(t.executor)&&dr(t.dialect)}var es;class nm{constructor(e){W(this,es,void 0);j(this,es,p(e))}async execute(e){return i(this,es).executor.provideConnection(async n=>{const r=i(this,es).executor.withConnectionProvider(new em(n)),a=new Pa({...i(this,es),executor:r});return await e(a)})}}es=new WeakMap;Le(nm,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Kn;const ih=class ih{constructor(e){W(this,Kn,void 0);j(this,Kn,p(e))}setIsolationLevel(e){return new ih({...i(this,Kn),isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=i(this,Kn),a={isolationLevel:n};return Eb(a),i(this,Kn).executor.provideConnection(async c=>{const m=i(this,Kn).executor.withConnectionProvider(new em(c)),g=new ff({...r,executor:m});try{await i(this,Kn).driver.beginTransaction(c,a);const v=await e(g);return await i(this,Kn).driver.commitTransaction(c),v}catch(v){throw await i(this,Kn).driver.rollbackTransaction(c),v}})}};Kn=new WeakMap;let qc=ih;Le(qc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Eb(t){if(t.isolationLevel&&!bb.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var ln,po,ju,Ha,hf,Ka,df;const Hc=class Hc{constructor(e){W(this,po);W(this,Ha);W(this,Ka);W(this,ln,void 0);j(this,ln,p(e))}get expressionType(){}get isRawBuilder(){return!0}as(e){return new rm(this,e)}$castTo(){return new Hc({...i(this,ln)})}withPlugin(e){return new Hc({...i(this,ln),plugins:i(this,ln).plugins!==void 0?p([...i(this,ln).plugins,e]):p([e])})}toOperationNode(){return ve(this,Ha,hf).call(this,ve(this,po,ju).call(this))}compile(e){return ve(this,Ka,df).call(this,ve(this,po,ju).call(this,e))}async execute(e){const n=ve(this,po,ju).call(this,e);return n.executeQuery(ve(this,Ka,df).call(this,n),i(this,ln).queryId)}};ln=new WeakMap,po=new WeakSet,ju=function(e){const n=e!==void 0?e.getExecutor():Vf;return i(this,ln).plugins!==void 0?n.withPlugins(i(this,ln).plugins):n},Ha=new WeakSet,hf=function(e){return e.transformQuery(i(this,ln).rawNode,i(this,ln).queryId)},Ka=new WeakSet,df=function(e){return e.compileQuery(ve(this,Ha,hf).call(this,e),i(this,ln).queryId)};let Cc=Hc;function zr(t){return new Cc(t)}Le(Cc,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ts,si;class rm{constructor(e,n){W(this,ts,void 0);W(this,si,void 0);j(this,ts,e),j(this,si,n)}get expression(){return i(this,ts)}get alias(){return i(this,si)}get rawBuilder(){return i(this,ts)}toOperationNode(){return yi.create(i(this,ts).toOperationNode(),Wn(i(this,si))?i(this,si).toOperationNode():ut.create(i(this,si)))}}ts=new WeakMap,si=new WeakMap;Le(rm,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const et=Object.assign((t,...e)=>zr({queryId:He(),rawNode:Zt.create(t,(e==null?void 0:e.map(en))??[])}),{ref(t){return zr({queryId:He(),rawNode:Zt.createWithChild(kr(t))})},val(t){return zr({queryId:He(),rawNode:Zt.createWithChild(en(t))})},value(t){return this.val(t)},table(t){return zr({queryId:He(),rawNode:Zt.createWithChild(dn(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",zr({queryId:He(),rawNode:Zt.create(e,t.map(ut.create))})},lit(t){return zr({queryId:He(),rawNode:Zt.createWithChild(gr.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return zr({queryId:He(),rawNode:Zt.createWithSql(t)})},join(t,e=et`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let a=0;a<t.length;++a)n[2*a]=en(t[a]),a!==t.length-1&&(n[2*a+1]=r);return zr({queryId:He(),rawNode:Zt.createWithChildren(n)})}});var Kc;class Ob{constructor(){ge(this,"nodeStack",[]);W(this,Kc,p({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)}));ge(this,"visitNode",e=>{this.nodeStack.push(e),i(this,Kc)[e.kind](e),this.nodeStack.pop()})}get parentNode(){return this.nodeStack[this.nodeStack.length-2]}}Kc=new WeakMap;var mo,ns;class qb extends Ob{constructor(){super(...arguments);W(this,mo,"");W(this,ns,[])}get numParameters(){return i(this,ns).length}compileQuery(n){return j(this,mo,""),j(this,ns,[]),this.visitNode(n),p({query:n,sql:this.getSql(),parameters:[...i(this,ns)]})}getSql(){return i(this,mo)}visitSelectQuery(n){var a,c;const r=this.parentNode!==void 0&&!qo.is(this.parentNode)&&!fr.is(this.parentNode)&&!Jr.is(this.parentNode)&&!kp.is(this.parentNode);this.parentNode===void 0&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("select"),n.distinctOn&&(this.append(" "),this.compileDistinctOn(n.distinctOn)),(a=n.frontModifiers)!=null&&a.length&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.selections&&(this.append(" "),this.compileList(n.selections)),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.groupBy&&(this.append(" "),this.visitNode(n.groupBy)),n.having&&(this.append(" "),this.visitNode(n.having)),n.setOperations&&(this.append(" "),this.compileList(n.setOperations," ")),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.offset&&(this.append(" "),this.visitNode(n.offset)),(c=n.endModifiers)!=null&&c.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...n.endModifiers])," ")),r&&this.append(")")}visitFrom(n){this.append("from "),this.compileList(n.froms)}visitSelection(n){this.visitNode(n.selection)}visitColumn(n){this.visitNode(n.column)}compileDistinctOn(n){this.append("distinct on ("),this.compileList(n),this.append(")")}compileList(n,r=", "){const a=n.length-1;for(let c=0;c<=a;c++)this.visitNode(n[c]),c<a&&this.append(r)}visitWhere(n){this.append("where "),this.visitNode(n.where)}visitHaving(n){this.append("having "),this.visitNode(n.having)}visitInsertQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append(n.replace?"replace":"insert"),n.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(n.into),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.values&&(this.append(" "),this.visitNode(n.values)),n.onConflict&&(this.append(" "),this.visitNode(n.onConflict)),n.onDuplicateKey&&(this.append(" "),this.visitNode(n.onDuplicateKey)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitValues(n){this.append("values "),this.compileList(n.values)}visitDeleteQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("delete "),this.visitNode(n.from),n.using&&(this.append(" "),this.visitNode(n.using)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.orderBy&&(this.append(" "),this.visitNode(n.orderBy)),n.limit&&(this.append(" "),this.visitNode(n.limit)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitReturning(n){this.append("returning "),this.compileList(n.selections)}visitAlias(n){this.visitNode(n.node),this.append(" as "),this.visitNode(n.alias)}visitReference(n){n.table&&(this.visitNode(n.table),this.append(".")),this.visitNode(n.column)}visitSelectAll(n){this.append("*")}visitIdentifier(n){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(n),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(n){if(!wr(n.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(n.name))}visitAnd(n){this.visitNode(n.left),this.append(" and "),this.visitNode(n.right)}visitOr(n){this.visitNode(n.left),this.append(" or "),this.visitNode(n.right)}visitValue(n){n.immediate?this.appendImmediateValue(n.value):this.appendValue(n.value)}visitValueList(n){this.append("("),this.compileList(n.values),this.append(")")}visitTuple(n){this.append("("),this.compileList(n.values),this.append(")")}visitPrimitiveValueList(n){this.append("(");const{values:r}=n;for(let a=0;a<r.length;++a)this.appendValue(r[a]),a!==r.length-1&&this.append(", ");this.append(")")}visitParens(n){this.append("("),this.visitNode(n.node),this.append(")")}visitJoin(n){this.append(Ib[n.joinType]),this.append(" "),this.visitNode(n.table),n.on&&(this.append(" "),this.visitNode(n.on))}visitOn(n){this.append("on "),this.visitNode(n.on)}visitRaw(n){const{sqlFragments:r,parameters:a}=n;for(let c=0;c<r.length;++c)this.append(r[c]),a.length>c&&this.visitNode(a[c])}visitOperator(n){this.append(n.operator)}visitTable(n){this.visitNode(n.table)}visitSchemableIdentifier(n){n.schema&&(this.visitNode(n.schema),this.append(".")),this.visitNode(n.identifier)}visitCreateTable(n){this.append("create "),n.frontModifiers&&n.frontModifiers.length>0&&(this.compileList(n.frontModifiers," "),this.append(" ")),n.temporary&&this.append("temporary "),this.append("table "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.table),this.append(" ("),this.compileList([...n.columns,...n.constraints??[]]),this.append(")"),n.onCommit&&(this.append(" on commit "),this.append(n.onCommit)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}visitColumnDefinition(n){this.visitNode(n.column),this.append(" "),this.visitNode(n.dataType),n.unsigned&&this.append(" unsigned"),n.frontModifiers&&n.frontModifiers.length>0&&(this.append(" "),this.compileList(n.frontModifiers," ")),n.generated&&(this.append(" "),this.visitNode(n.generated)),n.defaultTo&&(this.append(" "),this.visitNode(n.defaultTo)),n.notNull&&this.append(" not null"),n.unique&&this.append(" unique"),n.primaryKey&&this.append(" primary key"),n.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),n.references&&(this.append(" "),this.visitNode(n.references)),n.check&&(this.append(" "),this.visitNode(n.check)),n.endModifiers&&n.endModifiers.length>0&&(this.append(" "),this.compileList(n.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(n){this.append("references "),this.visitNode(n.table),this.append(" ("),this.compileList(n.columns),this.append(")"),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitDropTable(n){this.append("drop table "),n.ifExists&&this.append("if exists "),this.visitNode(n.table),n.cascade&&this.append(" cascade")}visitDataType(n){this.append(n.dataType)}visitOrderBy(n){this.append("order by "),this.compileList(n.items)}visitOrderByItem(n){this.visitNode(n.orderBy),n.direction&&(this.append(" "),this.visitNode(n.direction))}visitGroupBy(n){this.append("group by "),this.compileList(n.items)}visitGroupByItem(n){this.visitNode(n.groupBy)}visitUpdateQuery(n){const r=this.nodeStack.find(We.is)!==n;!r&&n.explain&&(this.visitNode(n.explain),this.append(" ")),r&&this.append("("),n.with&&(this.visitNode(n.with),this.append(" ")),this.append("update "),this.visitNode(n.table),this.append(" set "),n.updates&&this.compileList(n.updates),n.from&&(this.append(" "),this.visitNode(n.from)),n.joins&&(this.append(" "),this.compileList(n.joins," ")),n.where&&(this.append(" "),this.visitNode(n.where)),n.returning&&(this.append(" "),this.visitNode(n.returning)),r&&this.append(")")}visitColumnUpdate(n){this.visitNode(n.column),this.append(" = "),this.visitNode(n.value)}visitLimit(n){this.append("limit "),this.visitNode(n.limit)}visitOffset(n){this.append("offset "),this.visitNode(n.offset)}visitOnConflict(n){this.append("on conflict"),n.columns?(this.append(" ("),this.compileList(n.columns),this.append(")")):n.constraint?(this.append(" on constraint "),this.visitNode(n.constraint)):n.indexExpression&&(this.append(" ("),this.visitNode(n.indexExpression),this.append(")")),n.indexWhere&&(this.append(" "),this.visitNode(n.indexWhere)),n.doNothing===!0?this.append(" do nothing"):n.updates&&(this.append(" do update set "),this.compileList(n.updates),n.updateWhere&&(this.append(" "),this.visitNode(n.updateWhere)))}visitOnDuplicateKey(n){this.append("on duplicate key update "),this.compileList(n.updates)}visitCreateIndex(n){this.append("create "),n.unique&&this.append("unique "),this.append("index "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.using&&(this.append(" using "),this.visitNode(n.using)),n.columns&&(this.append(" ("),this.compileList(n.columns),this.append(")")),n.where&&(this.append(" "),this.visitNode(n.where))}visitDropIndex(n){this.append("drop index "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.table&&(this.append(" on "),this.visitNode(n.table)),n.cascade&&this.append(" cascade")}visitCreateSchema(n){this.append("create schema "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.schema)}visitDropSchema(n){this.append("drop schema "),n.ifExists&&this.append("if exists "),this.visitNode(n.schema),n.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("primary key ("),this.compileList(n.columns),this.append(")")}visitUniqueConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("unique ("),this.compileList(n.columns),this.append(")")}visitCheckConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("check ("),this.visitNode(n.expression),this.append(")")}visitForeignKeyConstraint(n){n.name&&(this.append("constraint "),this.visitNode(n.name),this.append(" ")),this.append("foreign key ("),this.compileList(n.columns),this.append(") "),this.visitNode(n.references),n.onDelete&&(this.append(" on delete "),this.append(n.onDelete)),n.onUpdate&&(this.append(" on update "),this.append(n.onUpdate))}visitList(n){this.compileList(n.items)}visitWith(n){this.append("with "),n.recursive&&this.append("recursive "),this.compileList(n.expressions)}visitCommonTableExpression(n){this.visitNode(n.name),this.append(" as "),Xu(n.materialized)&&(n.materialized||this.append("not "),this.append("materialized ")),this.visitNode(n.expression)}visitCommonTableExpressionName(n){this.visitNode(n.table),n.columns&&(this.append("("),this.compileList(n.columns),this.append(")"))}visitAlterTable(n){this.append("alter table "),this.visitNode(n.table),this.append(" "),n.renameTo&&(this.append("rename to "),this.visitNode(n.renameTo)),n.setSchema&&(this.append("set schema "),this.visitNode(n.setSchema)),n.addConstraint&&this.visitNode(n.addConstraint),n.dropConstraint&&this.visitNode(n.dropConstraint),n.columnAlterations&&this.compileList(n.columnAlterations)}visitAddColumn(n){this.append("add column "),this.visitNode(n.column)}visitRenameColumn(n){this.append("rename column "),this.visitNode(n.column),this.append(" to "),this.visitNode(n.renameTo)}visitDropColumn(n){this.append("drop column "),this.visitNode(n.column)}visitAlterColumn(n){this.append("alter column "),this.visitNode(n.column),this.append(" "),n.dataType&&(this.append("type "),this.visitNode(n.dataType),n.dataTypeExpression&&(this.append("using "),this.visitNode(n.dataTypeExpression))),n.setDefault&&(this.append("set default "),this.visitNode(n.setDefault)),n.dropDefault&&this.append("drop default"),n.setNotNull&&this.append("set not null"),n.dropNotNull&&this.append("drop not null")}visitModifyColumn(n){this.append("modify column "),this.visitNode(n.column)}visitAddConstraint(n){this.append("add "),this.visitNode(n.constraint)}visitDropConstraint(n){this.append("drop constraint "),n.ifExists&&this.append("if exists "),this.visitNode(n.constraintName),n.modifier==="cascade"?this.append(" cascade"):n.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(n){this.append(n.operator),this.append(" "),n.all&&this.append("all "),this.visitNode(n.expression)}visitCreateView(n){this.append("create "),n.orReplace&&this.append("or replace "),n.materialized&&this.append("materialized "),n.temporary&&this.append("temporary "),this.append("view "),n.ifNotExists&&this.append("if not exists "),this.visitNode(n.name),this.append(" "),n.columns&&(this.append("("),this.compileList(n.columns),this.append(") ")),n.as&&(this.append("as "),this.visitNode(n.as))}visitDropView(n){this.append("drop "),n.materialized&&this.append("materialized "),this.append("view "),n.ifExists&&this.append("if exists "),this.visitNode(n.name),n.cascade&&this.append(" cascade")}visitGenerated(n){this.append("generated "),n.always&&this.append("always "),n.byDefault&&this.append("by default "),this.append("as "),n.identity&&this.append("identity"),n.expression&&(this.append("("),this.visitNode(n.expression),this.append(")")),n.stored&&this.append(" stored")}visitDefaultValue(n){this.append("default "),this.visitNode(n.defaultValue)}visitSelectModifier(n){n.rawModifier?this.visitNode(n.rawModifier):this.append(Cb[n.modifier])}visitCreateType(n){this.append("create type "),this.visitNode(n.name),n.enum&&(this.append(" as enum "),this.visitNode(n.enum))}visitDropType(n){this.append("drop type "),n.ifExists&&this.append("if exists "),this.visitNode(n.name)}visitExplain(n){this.append("explain"),(n.options||n.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),n.options&&(this.visitNode(n.options),n.format&&this.append(this.getExplainOptionsDelimiter())),n.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(n.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(n){this.append("default")}visitAggregateFunction(n){this.append(n.func),this.append("("),n.distinct&&this.append("distinct "),this.compileList(n.aggregated),this.append(")"),n.filter&&(this.append(" filter("),this.visitNode(n.filter),this.append(")")),n.over&&(this.append(" "),this.visitNode(n.over))}visitOver(n){this.append("over("),n.partitionBy&&(this.visitNode(n.partitionBy),n.orderBy&&this.append(" ")),n.orderBy&&this.visitNode(n.orderBy),this.append(")")}visitPartitionBy(n){this.append("partition by "),this.compileList(n.items)}visitPartitionByItem(n){this.visitNode(n.partitionBy)}visitBinaryOperation(n){this.visitNode(n.leftOperand),this.append(" "),this.visitNode(n.operator),this.append(" "),this.visitNode(n.rightOperand)}visitUnaryOperation(n){this.visitNode(n.operator),this.isMinusOperator(n.operator)||this.append(" "),this.visitNode(n.operand)}isMinusOperator(n){return hs.is(n)&&n.operator==="-"}visitUsing(n){this.append("using "),this.compileList(n.tables)}visitFunction(n){this.append(n.func),this.append("("),this.compileList(n.arguments),this.append(")")}visitCase(n){this.append("case"),n.value&&(this.append(" "),this.visitNode(n.value)),n.when&&(this.append(" "),this.compileList(n.when," ")),n.else&&(this.append(" else "),this.visitNode(n.else)),this.append(" end"),n.isStatement&&this.append(" case")}visitWhen(n){this.append("when "),this.visitNode(n.condition),n.result&&(this.append(" then "),this.visitNode(n.result))}visitJSONReference(n){this.visitNode(n.reference),this.visitNode(n.traversal)}visitJSONPath(n){n.inOperator&&this.visitNode(n.inOperator),this.append("'$");for(const r of n.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(n){const r=n.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(n.value)),r&&this.append("]")}visitJSONOperatorChain(n){for(let r=0,a=n.values.length;r<a;r++)r===a-1?this.visitNode(n.operator):this.append("->"),this.visitNode(n.values[r])}append(n){j(this,mo,i(this,mo)+n)}appendValue(n){this.addParameter(n),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(n){const r=this.getLeftIdentifierWrapper(),a=this.getRightIdentifierWrapper();let c="";for(const m of n)c+=m,m===r?c+=r:m===a&&(c+=a);return c}addParameter(n){i(this,ns).push(n)}appendImmediateValue(n){if(wr(n))this.append(`'${n}'`);else if(hp(n)||Xu(n))this.append(n.toString());else if(Mf(n))this.append("null");else if(ig(n))this.appendImmediateValue(n.toISOString());else if(sg(n))this.appendImmediateValue(n.toString());else throw new Error(`invalid immediate value ${n}`)}sortSelectModifiers(n){return n.sort((r,a)=>r.modifier&&a.modifier?ed[r.modifier]-ed[a.modifier]:1),p(n)}}mo=new WeakMap,ns=new WeakMap;const Cb=p({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),ed=p({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Ib=p({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"}),yr=p({raw(t,e=[]){return p({sql:t,query:Zt.createWithSql(t),parameters:p(e)})}}),Tb=/"/g;class im extends qb{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(Tb,'""')}visitDefaultInsertValue(e){this.append("null")}}const sm="kysely_migration",om="kysely_migration_lock";p({__noMigrations__:!0});var yo,Jc,um;class am{constructor(e){W(this,Jc);W(this,yo,void 0);j(this,yo,e)}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=i(this,yo).selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",sm).where("name","!=",om));const r=await n.execute();return Promise.all(r.map(({name:a})=>ve(this,Jc,um).call(this,a)))}async getMetadata(e){return{tables:await this.getTables(e)}}}yo=new WeakMap,Jc=new WeakSet,um=async function(e){var m,g,v,d,C,R;const n=i(this,yo),r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),a=(R=(C=(d=(v=(g=(m=r.sql)==null?void 0:m.split(/[\(\),]/))==null?void 0:g.find(G=>G.toLowerCase().includes("autoincrement")))==null?void 0:v.trimStart())==null?void 0:d.split(/\s+/))==null?void 0:C[0])==null?void 0:R.replace(/["`]/g,""),c=await n.selectFrom(et`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:c.map(G=>({name:G.name,dataType:G.type,isNullable:!G.notnull,isAutoIncrementing:G.name===a,hasDefaultValue:G.dflt_value!=null}))}};class cm{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}var lm=class{createQueryCompiler(){return new im}createAdapter(){return new cm}createIntrospector(t){return new am(t)}},Ja,yd,fm=(yd=class{constructor(){W(this,Ja,new Sb);ge(this,"connection")}async acquireConnection(){return await i(this,Ja).lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){i(this,Ja).unlock()}},Ja=new WeakMap,yd),Sb=class{constructor(){ge(this,"promise");ge(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(e=>{this.resolve=e})}unlock(){const e=this.resolve;this.promise=void 0,this.resolve=void 0,e==null||e()}},hm=class{streamQuery(){throw new Error("Sqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t;return["SelectQueryNode","RawNode"].includes(r.kind)?{rows:await this.query(n,e)}:{rows:[],...await this.exec(n,e)}}};function Ab(t,e,n){let r,a=0,c=null;function m(){r&&clearTimeout(r),a=0,c=null}function g(){a>=n?(t(c),m()):(r&&clearTimeout(r),r=setTimeout(()=>{t(c),m(),r=void 0},e))}return v=>{a++,c=v,r===void 0&&a===0?(t(v),a++):g()}}var kb=class extends fm{constructor(e){super();ge(this,"config");ge(this,"db");this.config=e}async init(){var e,n,r,a,c,m;if(this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,!this.db)throw new Error("no database");this.connection=new Wb(this.db,(e=this.config.onWrite)==null?void 0:e.func,(n=this.config.onWrite)==null?void 0:n.isThrottle,(r=this.config.onWrite)==null?void 0:r.delay,(a=this.config.onWrite)==null?void 0:a.maxCalls),await((m=(c=this.config).onCreateConnection)==null?void 0:m.call(c,this.connection))}async beginTransaction(e){await e.executeQuery(yr.raw("begin")),e.transactionNum++}async commitTransaction(e){await e.executeQuery(yr.raw("commit")),e.transactionNum--}async rollbackTransaction(e){await e.executeQuery(yr.raw("rollback")),e.transactionNum--}async destroy(){var e;(e=this.db)==null||e.close()}},Wb=class extends hm{constructor(e,n,r=!1,a=2e3,c=1e3){super();ge(this,"db");ge(this,"onWrite");ge(this,"transactionNum",0);this.db=e,this.onWrite=n?r?Ab(n,a,c):n:void 0}query(e,n){const r=this.db.prepare(e);r.bind(n);const a=[];for(;r.step();)a.push(r.getAsObject());return r.free(),a}exec(e,n){var c;this.db.run(e,n);const r=BigInt(this.query("SELECT last_insert_rowid() as id")[0].id),a=BigInt(this.db.getRowsModified());return this.transactionNum===0&&((c=this.onWrite)==null||c.call(this,this.db.export())),{numAffectedRows:a,insertId:r}}},Ga,wd,Rb=(wd=class extends lm{constructor(e){super();W(this,Ga,void 0);j(this,Ga,e)}createDriver(){return new kb(i(this,Ga))}},Ga=new WeakMap,wd),Db=class extends fm{constructor(e){super();ge(this,"config");ge(this,"db");this.config=e}async init(){var e,n;this.db=typeof this.config.database=="function"?await this.config.database():this.config.database,this.connection=new Pb(this.db),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async destroy(){var e;await((e=this.db)==null?void 0:e.sqlite.close(this.db.db))}},Pb=class extends hm{constructor(e){super();ge(this,"sqlite");ge(this,"db");this.db=e.db,this.sqlite=e.sqlite}async run(e){const n=this.sqlite.str_new(this.db,e.sql),r=await this.sqlite.prepare_v2(this.db,this.sqlite.str_value(n));if(r===null)return[];const a=r.stmt;try{typeof e.param<"u"&&this.sqlite.bind_collection(a,e.param);const c=[];let m=[];for(;await this.sqlite.step(a)===100;){m=m.length===0?this.sqlite.column_names(a):m;const g=this.sqlite.row(a);c.push(m.reduce((v,d,C)=>(v[d]=g[C],v),{}))}return c}finally{await this.sqlite.finalize(a)}}async query(e,n){return await this.run({sql:e,param:n})}async exec(e,n){await this.run({sql:e,param:n});const r=await this.run({sql:"SELECT last_insert_rowid() as id"});return{insertId:BigInt(r[0].id),numAffectedRows:BigInt(this.sqlite.changes(this.db))}}},Ya,gd,Lb=(gd=class extends lm{constructor(e){super();W(this,Ya,void 0);j(this,Ya,e)}createDriver(){return new Db(i(this,Ya))}},Ya=new WeakMap,gd);function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var dm={exports:{}};const Fb={},Ub=Object.freeze(Object.defineProperty({__proto__:null,default:Fb},Symbol.toStringTag,{value:"Module"})),Wu=Bb(Ub);(function(t,e){var n=void 0,r=function(a){return n||(n=new Promise(function(c,m){var g=typeof a<"u"?a:{},v=g.onAbort;g.onAbort=function(o){m(new Error(o)),v&&v(o)},g.postRun=g.postRun||[],g.postRun.push(function(){c(g)}),t=void 0;var d;d||(d=typeof g<"u"?g:{}),d.onRuntimeInitialized=function(){function o(T,J){switch(typeof J){case"boolean":Eu(T,J?1:0);break;case"number":_u(T,J);break;case"string":na(T,J,-1,-1);break;case"object":if(J===null)ta(T);else if(J.length!=null){var s=Ts(J);xu(T,s,J.length,-1),ki(s)}else Di(T,"Wrong API use : tried to return a value of an unknown type ("+J+").",-1);break;default:ta(T)}}function l(T,J){for(var s=[],u=0;u<T;u+=1){var f=H(J+4*u,"i32"),y=ea(f);if(y===1||y===2)f=vu(f);else if(y===3)f=bu(f);else if(y===4){y=f,f=gu(y),y=Nu(y);for(var _=new Uint8Array(f),A=0;A<f;A+=1)_[A]=pe[y+A];f=_}else f=null;s.push(f)}return s}function h(T,J){this.La=T,this.db=J,this.Ja=1,this.fb=[]}function w(T,J){if(this.db=J,J=nn(T)+1,this.Ya=Ai(J),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");tn(T,qe,this.Ya,J),this.eb=this.Ya,this.Ua=this.ib=null}function O(T){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),T!=null){var J=this.filename,s="/",u=J;if(s&&(s=typeof s=="string"?s:gi(s),u=J?ue(s+"/"+J):s),J=sn(!0,!0),u=Ni(u,(J!==void 0?J:438)&4095|32768,0),T){if(typeof T=="string"){s=Array(T.length);for(var f=0,y=T.length;f<y;++f)s[f]=T.charCodeAt(f);T=s}vs(u,J|146),s=tr(u,577),nr(s,T,0,T.length,0),Qe(s),vs(u,J)}}this.handleError(we(this.filename,D)),this.db=H(D,"i32"),As(this.db),this.Za={},this.Na={}}var D=Bn(4),F=d.cwrap,we=F("sqlite3_open","number",["string","number"]),Pe=F("sqlite3_close_v2","number",["number"]),ke=F("sqlite3_exec","number",["number","string","number","number","number"]),st=F("sqlite3_changes","number",["number"]),Tn=F("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Go=F("sqlite3_sql","string",["number"]),Yo=F("sqlite3_normalized_sql","string",["number"]),Ri=F("sqlite3_prepare_v2","number",["number","number","number","number","number"]),wl=F("sqlite3_bind_text","number",["number","number","number","number","number"]),Fn=F("sqlite3_bind_blob","number",["number","number","number","number","number"]),Sn=F("sqlite3_bind_double","number",["number","number","number"]),lu=F("sqlite3_bind_int","number",["number","number","number"]),Ss=F("sqlite3_bind_parameter_index","number",["number","string"]),fu=F("sqlite3_step","number",["number"]),hu=F("sqlite3_errmsg","string",["number"]),gl=F("sqlite3_column_count","number",["number"]),Xo=F("sqlite3_data_count","number",["number"]),bl=F("sqlite3_column_double","number",["number","number"]),du=F("sqlite3_column_text","string",["number","number"]),Nl=F("sqlite3_column_blob","number",["number","number"]),pu=F("sqlite3_column_bytes","number",["number","number"]),mu=F("sqlite3_column_type","number",["number","number"]),yu=F("sqlite3_column_name","string",["number","number"]),An=F("sqlite3_reset","number",["number"]),wu=F("sqlite3_clear_bindings","number",["number"]),vl=F("sqlite3_finalize","number",["number"]),Zo=F("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),ea=F("sqlite3_value_type","number",["number"]),gu=F("sqlite3_value_bytes","number",["number"]),bu=F("sqlite3_value_text","string",["number"]),Nu=F("sqlite3_value_blob","number",["number"]),vu=F("sqlite3_value_double","number",["number"]),_u=F("sqlite3_result_double","",["number","number"]),ta=F("sqlite3_result_null","",["number"]),na=F("sqlite3_result_text","",["number","string","number","number"]),xu=F("sqlite3_result_blob","",["number","number","number","number"]),Eu=F("sqlite3_result_int","",["number","number"]),Di=F("sqlite3_result_error","",["number","string","number"]),ra=F("sqlite3_aggregate_context","number",["number","number"]),As=F("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(T){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(T)?this.xb(T):T!=null&&typeof T=="object"?this.yb(T):!0},h.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var T=fu(this.La);switch(T){case 100:return!0;case 101:return!1;default:throw this.db.handleError(T)}},h.prototype.sb=function(T){return T==null&&(T=this.Ja,this.Ja+=1),bl(this.La,T)},h.prototype.Cb=function(T){if(T==null&&(T=this.Ja,this.Ja+=1),T=du(this.La,T),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(T)},h.prototype.Db=function(T){return T==null&&(T=this.Ja,this.Ja+=1),du(this.La,T)},h.prototype.getBlob=function(T){T==null&&(T=this.Ja,this.Ja+=1);var J=pu(this.La,T);T=Nl(this.La,T);for(var s=new Uint8Array(J),u=0;u<J;u+=1)s[u]=pe[T+u];return s},h.prototype.get=function(T,J){J=J||{},T!=null&&this.bind(T)&&this.step(),T=[];for(var s=Xo(this.La),u=0;u<s;u+=1)switch(mu(this.La,u)){case 1:var f=J.useBigInt?this.Cb(u):this.sb(u);T.push(f);break;case 2:T.push(this.sb(u));break;case 3:T.push(this.Db(u));break;case 4:T.push(this.getBlob(u));break;default:T.push(null)}return T},h.prototype.getColumnNames=function(){for(var T=[],J=gl(this.La),s=0;s<J;s+=1)T.push(yu(this.La,s));return T},h.prototype.getAsObject=function(T,J){T=this.get(T,J),J=this.getColumnNames();for(var s={},u=0;u<J.length;u+=1)s[J[u]]=T[u];return s},h.prototype.getSQL=function(){return Go(this.La)},h.prototype.getNormalizedSQL=function(){return Yo(this.La)},h.prototype.run=function(T){return T!=null&&this.bind(T),this.step(),this.reset()},h.prototype.nb=function(T,J){J==null&&(J=this.Ja,this.Ja+=1),T=nt(T);var s=Ts(T);this.fb.push(s),this.db.handleError(wl(this.La,J,s,T.length-1,0))},h.prototype.wb=function(T,J){J==null&&(J=this.Ja,this.Ja+=1);var s=Ts(T);this.fb.push(s),this.db.handleError(Fn(this.La,J,s,T.length,0))},h.prototype.mb=function(T,J){J==null&&(J=this.Ja,this.Ja+=1),this.db.handleError((T===(T|0)?lu:Sn)(this.La,J,T))},h.prototype.zb=function(T){T==null&&(T=this.Ja,this.Ja+=1),Fn(this.La,T,0,0,0)},h.prototype.ob=function(T,J){switch(J==null&&(J=this.Ja,this.Ja+=1),typeof T){case"string":this.nb(T,J);return;case"number":this.mb(T,J);return;case"bigint":this.nb(T.toString(),J);return;case"boolean":this.mb(T+0,J);return;case"object":if(T===null){this.zb(J);return}if(T.length!=null){this.wb(T,J);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+T+")."},h.prototype.yb=function(T){var J=this;return Object.keys(T).forEach(function(s){var u=Ss(J.La,s);u!==0&&J.ob(T[s],u)}),!0},h.prototype.xb=function(T){for(var J=0;J<T.length;J+=1)this.ob(T[J],J+1);return!0},h.prototype.reset=function(){return this.freemem(),wu(this.La)===0&&An(this.La)===0},h.prototype.freemem=function(){for(var T;(T=this.fb.pop())!==void 0;)ki(T)},h.prototype.free=function(){this.freemem();var T=vl(this.La)===0;return delete this.db.Za[this.La],this.La=0,T},w.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var T=Ur(),J=Bn(4);ce(D),ce(J);try{this.db.handleError(Ri(this.db.db,this.eb,-1,D,J)),this.eb=H(J,"i32");var s=H(D,"i32");return s===0?(this.gb(),{done:!0}):(this.Ua=new h(s,this.db),this.db.Za[s]=this.Ua,{value:this.Ua,done:!1})}catch(u){throw this.ib=tt(this.eb),this.gb(),u}finally{$r(T)}},w.prototype.gb=function(){ki(this.Ya),this.Ya=null},w.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:tt(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(w.prototype[Symbol.iterator]=function(){return this}),O.prototype.run=function(T,J){if(!this.db)throw"Database closed";if(J){T=this.prepare(T,J);try{T.step()}finally{T.free()}}else this.handleError(ke(this.db,T,0,0,D));return this},O.prototype.exec=function(T,J,s){if(!this.db)throw"Database closed";var u=Ur(),f=null;try{var y=nn(T)+1,_=Bn(y);tn(T,pe,_,y);var A=_,S=Bn(4);for(T=[];H(A,"i8")!==0;){ce(D),ce(S),this.handleError(Ri(this.db,A,-1,D,S));var Q=H(D,"i32");if(A=H(S,"i32"),Q!==0){for(y=null,f=new h(Q,this),J!=null&&f.bind(J);f.step();)y===null&&(y={columns:f.getColumnNames(),values:[]},T.push(y)),y.values.push(f.get(null,s));f.free()}}return T}catch(P){throw f&&f.free(),P}finally{$r(u)}},O.prototype.each=function(T,J,s,u,f){typeof J=="function"&&(u=s,s=J,J=void 0),T=this.prepare(T,J);try{for(;T.step();)s(T.getAsObject(null,f))}finally{T.free()}if(typeof u=="function")return u()},O.prototype.prepare=function(T,J){if(ce(D),this.handleError(Tn(this.db,T,-1,D,0)),T=H(D,"i32"),T===0)throw"Nothing to prepare";var s=new h(T,this);return J!=null&&s.bind(J),this.Za[T]=s},O.prototype.iterateStatements=function(T){return new w(T,this)},O.prototype.export=function(){Object.values(this.Za).forEach(function(J){J.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db));var T=_s(this.filename);return this.handleError(we(this.filename,D)),this.db=H(D,"i32"),T},O.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(T){T.free()}),Object.values(this.Na).forEach(Fr),this.Na={},this.handleError(Pe(this.db)),_i("/"+this.filename),this.db=null)},O.prototype.handleError=function(T){if(T===0)return null;throw T=hu(this.db),Error(T)},O.prototype.getRowsModified=function(){return st(this.db)},O.prototype.create_function=function(T,J){Object.prototype.hasOwnProperty.call(this.Na,T)&&(Fr(this.Na[T]),delete this.Na[T]);var s=Is(function(u,f,y){f=l(f,y);try{var _=J.apply(null,f)}catch(A){Di(u,A,-1);return}o(u,_)},"viii");return this.Na[T]=s,this.handleError(Zo(this.db,T,J.length,1,0,s,0,0,0)),this},O.prototype.create_aggregate=function(T,J){var s=J.init||function(){return null},u=J.finalize||function(S){return S},f=J.step;if(!f)throw"An aggregate function must have a step function in "+T;var y={};Object.hasOwnProperty.call(this.Na,T)&&(Fr(this.Na[T]),delete this.Na[T]),J=T+"__finalize",Object.hasOwnProperty.call(this.Na,J)&&(Fr(this.Na[J]),delete this.Na[J]);var _=Is(function(S,Q,P){var B=ra(S,1);Object.hasOwnProperty.call(y,B)||(y[B]=s()),Q=l(Q,P),Q=[y[B]].concat(Q);try{y[B]=f.apply(null,Q)}catch(ie){delete y[B],Di(S,ie,-1)}},"viii"),A=Is(function(S){var Q=ra(S,1);try{var P=u(y[Q])}catch(B){delete y[Q],Di(S,B,-1);return}o(S,P),delete y[Q]},"vi");return this.Na[T]=_,this.Na[J]=A,this.handleError(Zo(this.db,T,f.length-1,1,0,0,_,A,0)),this},d.Database=O};var C=Object.assign({},d),R="./this.program",G=typeof window=="object",te=typeof importScripts=="function",ae=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",E,N,I,M,V,Ne;ae?(b=te?Wu.dirname(b)+"/":__dirname+"/",Ne=()=>{V||(M=Wu,V=Wu)},E=function(o,l){return Ne(),o=V.normalize(o),M.readFileSync(o,l?void 0:"utf8")},I=o=>(o=E(o,!0),o.buffer||(o=new Uint8Array(o)),o),N=(o,l,h)=>{Ne(),o=V.normalize(o),M.readFile(o,function(w,O){w?h(w):l(O.buffer)})},1<process.argv.length&&(R=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=d,d.inspect=function(){return"[Emscripten Module object]"}):(G||te)&&(te?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",E=o=>{var l=new XMLHttpRequest;return l.open("GET",o,!1),l.send(null),l.responseText},te&&(I=o=>{var l=new XMLHttpRequest;return l.open("GET",o,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),N=(o,l,h)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?l(w.response):h()},w.onerror=h,w.send(null)});var re=d.print||console.log.bind(console),ye=d.printErr||console.warn.bind(console);Object.assign(d,C),C=null,d.thisProgram&&(R=d.thisProgram);var vt;d.wasmBinary&&(vt=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var Kt,mn=!1,Rn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function yn(o,l,h){var w=l+h;for(h=l;o[h]&&!(h>=w);)++h;if(16<h-l&&o.buffer&&Rn)return Rn.decode(o.subarray(l,h));for(w="";l<h;){var O=o[l++];if(O&128){var D=o[l++]&63;if((O&224)==192)w+=String.fromCharCode((O&31)<<6|D);else{var F=o[l++]&63;O=(O&240)==224?(O&15)<<12|D<<6|F:(O&7)<<18|D<<12|F<<6|o[l++]&63,65536>O?w+=String.fromCharCode(O):(O-=65536,w+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else w+=String.fromCharCode(O)}return w}function tt(o,l){return o?yn(qe,o,l):""}function tn(o,l,h,w){if(!(0<w))return 0;var O=h;w=h+w-1;for(var D=0;D<o.length;++D){var F=o.charCodeAt(D);if(55296<=F&&57343>=F){var we=o.charCodeAt(++D);F=65536+((F&1023)<<10)|we&1023}if(127>=F){if(h>=w)break;l[h++]=F}else{if(2047>=F){if(h+1>=w)break;l[h++]=192|F>>6}else{if(65535>=F){if(h+2>=w)break;l[h++]=224|F>>12}else{if(h+3>=w)break;l[h++]=240|F>>18,l[h++]=128|F>>12&63}l[h++]=128|F>>6&63}l[h++]=128|F&63}}return l[h]=0,h-O}function nn(o){for(var l=0,h=0;h<o.length;++h){var w=o.charCodeAt(h);127>=w?l++:2047>=w?l+=2:55296<=w&&57343>=w?(l+=4,++h):l+=3}return l}var ft,pe,qe,it,de,Ae,Tt,br;function ps(){var o=Kt.buffer;ft=o,d.HEAP8=pe=new Int8Array(o),d.HEAP16=it=new Int16Array(o),d.HEAP32=de=new Int32Array(o),d.HEAPU8=qe=new Uint8Array(o),d.HEAPU16=new Uint16Array(o),d.HEAPU32=Ae=new Uint32Array(o),d.HEAPF32=Tt=new Float32Array(o),d.HEAPF64=br=new Float64Array(o)}var wn,rn=[],fe=[],Me=[];function Dn(){var o=d.preRun.shift();rn.unshift(o)}var Bt=0,ze=null;function x(o){throw d.onAbort&&d.onAbort(o),o="Aborted("+o+")",ye(o),mn=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}function q(){return k.startsWith("data:application/octet-stream;base64,")}var k;if(k="sql-wasm.wasm",!q()){var L=k;k=d.locateFile?d.locateFile(L,b):b+L}function K(){var o=k;try{if(o==k&&vt)return new Uint8Array(vt);if(I)return I(o);throw"both async and sync fetching of the wasm failed"}catch(l){x(l)}}function Z(){if(!vt&&(G||te)){if(typeof fetch=="function"&&!k.startsWith("file://"))return fetch(k,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+k+"'";return o.arrayBuffer()}).catch(function(){return K()});if(N)return new Promise(function(o,l){N(k,function(h){o(new Uint8Array(h))},l)})}return Promise.resolve().then(function(){return K()})}var U,z;function ne(o){for(;0<o.length;)o.shift()(d)}function H(o,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":return pe[o>>0];case"i8":return pe[o>>0];case"i16":return it[o>>1];case"i32":return de[o>>2];case"i64":return de[o>>2];case"float":return Tt[o>>2];case"double":return br[o>>3];case"*":return Ae[o>>2];default:x("invalid type for getValue: "+l)}return null}function ce(o){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":pe[o>>0]=0;break;case"i8":pe[o>>0]=0;break;case"i16":it[o>>1]=0;break;case"i32":de[o>>2]=0;break;case"i64":z=[0,(U=0,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[o>>2]=z[0],de[o+4>>2]=z[1];break;case"float":Tt[o>>2]=0;break;case"double":br[o>>3]=0;break;case"*":Ae[o>>2]=0;break;default:x("invalid type for setValue: "+l)}}var oe=(o,l)=>{for(var h=0,w=o.length-1;0<=w;w--){var O=o[w];O==="."?o.splice(w,1):O===".."?(o.splice(w,1),h++):h&&(o.splice(w,1),h--)}if(l)for(;h;h--)o.unshift("..");return o},ue=o=>{var l=o.charAt(0)==="/",h=o.substr(-1)==="/";return(o=oe(o.split("/").filter(w=>!!w),!l).join("/"))||l||(o="."),o&&h&&(o+="/"),(l?"/":"")+o},me=o=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=l[0],l=l[1],!o&&!l?".":(l&&(l=l.substr(0,l.length-1)),o+l)},xe=o=>{if(o==="/")return"/";o=ue(o),o=o.replace(/\/$/,"");var l=o.lastIndexOf("/");return l===-1?o:o.substr(l+1)};function $e(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var o=new Uint8Array(1);return()=>(crypto.getRandomValues(o),o[0])}if(ae)try{var l=Wu;return()=>l.randomBytes(1)[0]}catch{}return()=>x("randomDevice")}function Re(){for(var o="",l=!1,h=arguments.length-1;-1<=h&&!l;h--){if(l=0<=h?arguments[h]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";o=l+"/"+o,l=l.charAt(0)==="/"}return o=oe(o.split("/").filter(w=>!!w),!l).join("/"),(l?"/":"")+o||"."}function nt(o,l){var h=Array(nn(o)+1);return o=tn(o,h,0,h.length),l&&(h.length=o),h}var he=[];function gn(o,l){he[o]={input:[],output:[],Xa:l},bi(o,wi)}var wi={open:function(o){var l=he[o.node.rdev];if(!l)throw new $(43);o.tty=l,o.seekable=!1},close:function(o){o.tty.Xa.fsync(o.tty)},fsync:function(o){o.tty.Xa.fsync(o.tty)},read:function(o,l,h,w){if(!o.tty||!o.tty.Xa.tb)throw new $(60);for(var O=0,D=0;D<w;D++){try{var F=o.tty.Xa.tb(o.tty)}catch{throw new $(29)}if(F===void 0&&O===0)throw new $(6);if(F==null)break;O++,l[h+D]=F}return O&&(o.node.timestamp=Date.now()),O},write:function(o,l,h,w){if(!o.tty||!o.tty.Xa.jb)throw new $(60);try{for(var O=0;O<w;O++)o.tty.Xa.jb(o.tty,l[h+O])}catch{throw new $(29)}return w&&(o.node.timestamp=Date.now()),O}},Ft={tb:function(o){if(!o.input.length){var l=null;if(ae){var h=Buffer.alloc(256),w=0;try{w=M.readSync(process.stdin.fd,h,0,256,-1)}catch(O){if(O.toString().includes("EOF"))w=0;else throw O}0<w?l=h.slice(0,w).toString("utf-8"):l=null}else typeof window<"u"&&typeof window.prompt=="function"?(l=window.prompt("Input: "),l!==null&&(l+=`
`)):typeof readline=="function"&&(l=readline(),l!==null&&(l+=`
`));if(!l)return null;o.input=nt(l,!0)}return o.input.shift()},jb:function(o,l){l===null||l===10?(re(yn(o.output,0)),o.output=[]):l!=0&&o.output.push(l)},fsync:function(o){o.output&&0<o.output.length&&(re(yn(o.output,0)),o.output=[])}},ms={jb:function(o,l){l===null||l===10?(ye(yn(o.output,0)),o.output=[]):l!=0&&o.output.push(l)},fsync:function(o){o.output&&0<o.output.length&&(ye(yn(o.output,0)),o.output=[])}},le={Qa:null,Ra:function(){return le.createNode(null,"/",16895,0)},createNode:function(o,l,h,w){if((h&61440)===24576||(h&61440)===4096)throw new $(63);return le.Qa||(le.Qa={dir:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,lookup:le.Ga.lookup,ab:le.Ga.ab,rename:le.Ga.rename,unlink:le.Ga.unlink,rmdir:le.Ga.rmdir,readdir:le.Ga.readdir,symlink:le.Ga.symlink},stream:{Ta:le.Ha.Ta}},file:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:{Ta:le.Ha.Ta,read:le.Ha.read,write:le.Ha.write,lb:le.Ha.lb,bb:le.Ha.bb,cb:le.Ha.cb}},link:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa,readlink:le.Ga.readlink},stream:{}},pb:{node:{Pa:le.Ga.Pa,Oa:le.Ga.Oa},stream:bs}}),h=Do(o,l,h,w),(h.mode&61440)===16384?(h.Ga=le.Qa.dir.node,h.Ha=le.Qa.dir.stream,h.Ia={}):(h.mode&61440)===32768?(h.Ga=le.Qa.file.node,h.Ha=le.Qa.file.stream,h.Ma=0,h.Ia=null):(h.mode&61440)===40960?(h.Ga=le.Qa.link.node,h.Ha=le.Qa.link.stream):(h.mode&61440)===8192&&(h.Ga=le.Qa.pb.node,h.Ha=le.Qa.pb.stream),h.timestamp=Date.now(),o&&(o.Ia[l]=h,o.timestamp=h.timestamp),h},Jb:function(o){return o.Ia?o.Ia.subarray?o.Ia.subarray(0,o.Ma):new Uint8Array(o.Ia):new Uint8Array(0)},qb:function(o,l){var h=o.Ia?o.Ia.length:0;h>=l||(l=Math.max(l,h*(1048576>h?2:1.125)>>>0),h!=0&&(l=Math.max(l,256)),h=o.Ia,o.Ia=new Uint8Array(l),0<o.Ma&&o.Ia.set(h.subarray(0,o.Ma),0))},Gb:function(o,l){if(o.Ma!=l)if(l==0)o.Ia=null,o.Ma=0;else{var h=o.Ia;o.Ia=new Uint8Array(l),h&&o.Ia.set(h.subarray(0,Math.min(l,o.Ma))),o.Ma=l}},Ga:{Pa:function(o){var l={};return l.dev=(o.mode&61440)===8192?o.id:1,l.ino=o.id,l.mode=o.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=o.rdev,(o.mode&61440)===16384?l.size=4096:(o.mode&61440)===32768?l.size=o.Ma:(o.mode&61440)===40960?l.size=o.link.length:l.size=0,l.atime=new Date(o.timestamp),l.mtime=new Date(o.timestamp),l.ctime=new Date(o.timestamp),l.Ab=4096,l.blocks=Math.ceil(l.size/l.Ab),l},Oa:function(o,l){l.mode!==void 0&&(o.mode=l.mode),l.timestamp!==void 0&&(o.timestamp=l.timestamp),l.size!==void 0&&le.Gb(o,l.size)},lookup:function(){throw Pn[44]},ab:function(o,l,h,w){return le.createNode(o,l,h,w)},rename:function(o,l,h){if((o.mode&61440)===16384){try{var w=er(l,h)}catch{}if(w)for(var O in w.Ia)throw new $(55)}delete o.parent.Ia[o.name],o.parent.timestamp=Date.now(),o.name=h,l.Ia[h]=o,l.timestamp=o.parent.timestamp,o.parent=l},unlink:function(o,l){delete o.Ia[l],o.timestamp=Date.now()},rmdir:function(o,l){var h=er(o,l),w;for(w in h.Ia)throw new $(55);delete o.Ia[l],o.timestamp=Date.now()},readdir:function(o){var l=[".",".."],h;for(h in o.Ia)o.Ia.hasOwnProperty(h)&&l.push(h);return l},symlink:function(o,l,h){return o=le.createNode(o,l,41471,0),o.link=h,o},readlink:function(o){if((o.mode&61440)!==40960)throw new $(28);return o.link}},Ha:{read:function(o,l,h,w,O){var D=o.node.Ia;if(O>=o.node.Ma)return 0;if(o=Math.min(o.node.Ma-O,w),8<o&&D.subarray)l.set(D.subarray(O,O+o),h);else for(w=0;w<o;w++)l[h+w]=D[O+w];return o},write:function(o,l,h,w,O,D){if(l.buffer===pe.buffer&&(D=!1),!w)return 0;if(o=o.node,o.timestamp=Date.now(),l.subarray&&(!o.Ia||o.Ia.subarray)){if(D)return o.Ia=l.subarray(h,h+w),o.Ma=w;if(o.Ma===0&&O===0)return o.Ia=l.slice(h,h+w),o.Ma=w;if(O+w<=o.Ma)return o.Ia.set(l.subarray(h,h+w),O),w}if(le.qb(o,O+w),o.Ia.subarray&&l.subarray)o.Ia.set(l.subarray(h,h+w),O);else for(D=0;D<w;D++)o.Ia[O+D]=l[h+D];return o.Ma=Math.max(o.Ma,O+w),w},Ta:function(o,l,h){if(h===1?l+=o.position:h===2&&(o.node.mode&61440)===32768&&(l+=o.node.Ma),0>l)throw new $(28);return l},lb:function(o,l,h){le.qb(o.node,l+h),o.node.Ma=Math.max(o.node.Ma,l+h)},bb:function(o,l,h,w,O){if((o.node.mode&61440)!==32768)throw new $(43);if(o=o.node.Ia,O&2||o.buffer!==ft){if((0<h||h+l<o.length)&&(o.subarray?o=o.subarray(h,h+l):o=Array.prototype.slice.call(o,h,h+l)),h=!0,l=65536*Math.ceil(l/65536),(O=Ko(65536,l))?(qe.fill(0,O,O+l),l=O):l=0,!l)throw new $(48);pe.set(o,l)}else h=!1,l=o.byteOffset;return{Fb:l,vb:h}},cb:function(o,l,h,w,O){if((o.node.mode&61440)!==32768)throw new $(43);return O&2||le.Ha.write(o,l,0,w,h,!1),0}}},St=null,ee={},Cn=[],Ut=1,bn=null,ys=!0,$=null,Pn={},At=(o,l={})=>{if(o=Re("/",o),!o)return{path:"",node:null};if(l=Object.assign({rb:!0,kb:0},l),8<l.kb)throw new $(32);o=oe(o.split("/").filter(F=>!!F),!1);for(var h=St,w="/",O=0;O<o.length;O++){var D=O===o.length-1;if(D&&l.parent)break;if(h=er(h,o[O]),w=ue(w+"/"+o[O]),h.Va&&(!D||D&&l.rb)&&(h=h.Va.root),!D||l.Sa){for(D=0;(h.mode&61440)===40960;)if(h=Uo(w),w=Re(me(w),h),h=At(w,{kb:l.kb+1}).node,40<D++)throw new $(32)}}return{path:w,node:h}},gi=o=>{for(var l;;){if(o===o.parent)return o=o.Ra.ub,l?o[o.length-1]!=="/"?o+"/"+l:o+l:o;l=l?o.name+"/"+l:o.name,o=o.parent}},ws=(o,l)=>{for(var h=0,w=0;w<l.length;w++)h=(h<<5)-h+l.charCodeAt(w)|0;return(o+h>>>0)%bn.length},Nr=o=>{var l=ws(o.parent.id,o.name);if(bn[l]===o)bn[l]=o.Wa;else for(l=bn[l];l;){if(l.Wa===o){l.Wa=o.Wa;break}l=l.Wa}},er=(o,l)=>{var h;if(h=(h=Dr(o,"x"))?h:o.Ga.lookup?0:2)throw new $(h,o);for(h=bn[ws(o.id,l)];h;h=h.Wa){var w=h.name;if(h.parent.id===o.id&&w===l)return h}return o.Ga.lookup(o,l)},Do=(o,l,h,w)=>(o=new Vo(o,l,h,w),l=ws(o.parent.id,o.name),o.Wa=bn[l],bn[l]=o),yl={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Po=o=>{var l=["r","w","rw"][o&3];return o&512&&(l+="w"),l},Dr=(o,l)=>{if(ys)return 0;if(!l.includes("r")||o.mode&292){if(l.includes("w")&&!(o.mode&146)||l.includes("x")&&!(o.mode&73))return 2}else return 2;return 0},gs=(o,l)=>{try{return er(o,l),20}catch{}return Dr(o,"wx")},Lo=(o,l,h)=>{try{var w=er(o,l)}catch(O){return O.Ka}if(o=Dr(o,"wx"))return o;if(h){if((w.mode&61440)!==16384)return 54;if(w===w.parent||gi(w)==="/")return 10}else if((w.mode&61440)===16384)return 31;return 0},Mo=(o=0)=>{for(;4096>=o;o++)if(!Cn[o])return o;throw new $(33)},Nn=(o,l)=>(Ci||(Ci=function(){this.$a={}},Ci.prototype={},Object.defineProperties(Ci.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},flags:{get:function(){return this.$a.flags},set:function(h){this.$a.flags=h}},position:{get:function(){return this.$a.position},set:function(h){this.$a.position=h}}})),o=Object.assign(new Ci,o),l=Mo(l),o.fd=l,Cn[l]=o),bs={open:o=>{o.Ha=ee[o.node.rdev].Ha,o.Ha.open&&o.Ha.open(o)},Ta:()=>{throw new $(70)}},bi=(o,l)=>{ee[o]={Ha:l}},Bo=(o,l)=>{var h=l==="/",w=!l;if(h&&St)throw new $(10);if(!h&&!w){var O=At(l,{rb:!1});if(l=O.path,O=O.node,O.Va)throw new $(10);if((O.mode&61440)!==16384)throw new $(54)}l={type:o,Kb:{},ub:l,Eb:[]},o=o.Ra(l),o.Ra=l,l.root=o,h?St=o:O&&(O.Va=l,O.Ra&&O.Ra.Eb.push(l))},Ni=(o,l,h)=>{var w=At(o,{parent:!0}).node;if(o=xe(o),!o||o==="."||o==="..")throw new $(28);var O=gs(w,o);if(O)throw new $(O);if(!w.Ga.ab)throw new $(63);return w.Ga.ab(w,o,l,h)},Jt=(o,l)=>Ni(o,(l!==void 0?l:511)&1023|16384,0),vi=(o,l,h)=>{typeof h>"u"&&(h=l,l=438),Ni(o,l|8192,h)},Ns=(o,l)=>{if(!Re(o))throw new $(44);var h=At(l,{parent:!0}).node;if(!h)throw new $(44);l=xe(l);var w=gs(h,l);if(w)throw new $(w);if(!h.Ga.symlink)throw new $(63);h.Ga.symlink(h,l,o)},Fo=o=>{var l=At(o,{parent:!0}).node;o=xe(o);var h=er(l,o),w=Lo(l,o,!0);if(w)throw new $(w);if(!l.Ga.rmdir)throw new $(63);if(h.Va)throw new $(10);l.Ga.rmdir(l,o),Nr(h)},_i=o=>{var l=At(o,{parent:!0}).node;if(!l)throw new $(44);o=xe(o);var h=er(l,o),w=Lo(l,o,!1);if(w)throw new $(w);if(!l.Ga.unlink)throw new $(63);if(h.Va)throw new $(10);l.Ga.unlink(l,o),Nr(h)},Uo=o=>{if(o=At(o).node,!o)throw new $(44);if(!o.Ga.readlink)throw new $(28);return Re(gi(o.parent),o.Ga.readlink(o))},Pr=(o,l)=>{if(o=At(o,{Sa:!l}).node,!o)throw new $(44);if(!o.Ga.Pa)throw new $(63);return o.Ga.Pa(o)},$o=o=>Pr(o,!0),vs=(o,l)=>{if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new $(63);o.Ga.Oa(o,{mode:l&4095|o.mode&-4096,timestamp:Date.now()})},Lr=(o,l)=>{if(0>l)throw new $(28);if(o=typeof o=="string"?At(o,{Sa:!0}).node:o,!o.Ga.Oa)throw new $(63);if((o.mode&61440)===16384)throw new $(31);if((o.mode&61440)!==32768)throw new $(28);var h=Dr(o,"w");if(h)throw new $(h);o.Ga.Oa(o,{size:l,timestamp:Date.now()})},tr=(o,l,h)=>{if(o==="")throw new $(44);if(typeof l=="string"){var w=yl[l];if(typeof w>"u")throw Error("Unknown file open mode: "+l);l=w}if(h=l&64?(typeof h>"u"?438:h)&4095|32768:0,typeof o=="object")var O=o;else{o=ue(o);try{O=At(o,{Sa:!(l&131072)}).node}catch{}}if(w=!1,l&64)if(O){if(l&128)throw new $(20)}else O=Ni(o,h,0),w=!0;if(!O)throw new $(44);if((O.mode&61440)===8192&&(l&=-513),l&65536&&(O.mode&61440)!==16384)throw new $(54);if(!w&&(h=O?(O.mode&61440)===40960?32:(O.mode&61440)===16384&&(Po(l)!=="r"||l&512)?31:Dr(O,Po(l)):44))throw new $(h);return l&512&&!w&&Lr(O,0),l&=-131713,O=Nn({node:O,path:gi(O),flags:l,seekable:!0,position:0,Ha:O.Ha,Ib:[],error:!1}),O.Ha.open&&O.Ha.open(O),!d.logReadFiles||l&1||(Ii||(Ii={}),o in Ii||(Ii[o]=1)),O},Qe=o=>{if(o.fd===null)throw new $(8);o.hb&&(o.hb=null);try{o.Ha.close&&o.Ha.close(o)}catch(l){throw l}finally{Cn[o.fd]=null}o.fd=null},Mr=(o,l,h)=>{if(o.fd===null)throw new $(8);if(!o.seekable||!o.Ha.Ta)throw new $(70);if(h!=0&&h!=1&&h!=2)throw new $(28);o.position=o.Ha.Ta(o,l,h),o.Ib=[]},xi=(o,l,h,w,O)=>{if(0>w||0>O)throw new $(28);if(o.fd===null)throw new $(8);if((o.flags&2097155)===1)throw new $(8);if((o.node.mode&61440)===16384)throw new $(31);if(!o.Ha.read)throw new $(28);var D=typeof O<"u";if(!D)O=o.position;else if(!o.seekable)throw new $(70);return l=o.Ha.read(o,l,h,w,O),D||(o.position+=l),l},nr=(o,l,h,w,O)=>{if(0>w||0>O)throw new $(28);if(o.fd===null)throw new $(8);if(!(o.flags&2097155))throw new $(8);if((o.node.mode&61440)===16384)throw new $(31);if(!o.Ha.write)throw new $(28);o.seekable&&o.flags&1024&&Mr(o,0,2);var D=typeof O<"u";if(!D)O=o.position;else if(!o.seekable)throw new $(70);return l=o.Ha.write(o,l,h,w,O,void 0),D||(o.position+=l),l},_s=o=>{var l,h=tr(o,h||0);o=Pr(o).size;var w=new Uint8Array(o);return xi(h,w,0,o,0),l=w,Qe(h),l},Ei=()=>{$||($=function(o,l){this.node=l,this.Hb=function(h){this.Ka=h},this.Hb(o),this.message="FS error"},$.prototype=Error(),$.prototype.constructor=$,[44].forEach(o=>{Pn[o]=new $(o),Pn[o].stack="<generic error, no stack>"}))},Oi,sn=(o,l)=>{var h=0;return o&&(h|=365),l&&(h|=146),h},In=(o,l,h)=>{o=ue("/dev/"+o);var w=sn(!!l,!!h);qi||(qi=64);var O=qi++<<8|0;bi(O,{open:D=>{D.seekable=!1},close:()=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(D,F,we,Pe)=>{for(var ke=0,st=0;st<Pe;st++){try{var Tn=l()}catch{throw new $(29)}if(Tn===void 0&&ke===0)throw new $(6);if(Tn==null)break;ke++,F[we+st]=Tn}return ke&&(D.node.timestamp=Date.now()),ke},write:(D,F,we,Pe)=>{for(var ke=0;ke<Pe;ke++)try{h(F[we+ke])}catch{throw new $(29)}return Pe&&(D.node.timestamp=Date.now()),ke}}),vi(o,w,O)},qi,Ke={},Ci,Ii;function Ln(o,l,h){if(l.charAt(0)==="/")return l;if(o=o===-100?"/":on(o).path,l.length==0){if(!h)throw new $(44);return o}return ue(o+"/"+l)}function Ti(o,l,h){try{var w=o(l)}catch(O){if(O&&O.node&&ue(l)!==ue(gi(O.node)))return-54;throw O}return de[h>>2]=w.dev,de[h+8>>2]=w.ino,de[h+12>>2]=w.mode,Ae[h+16>>2]=w.nlink,de[h+20>>2]=w.uid,de[h+24>>2]=w.gid,de[h+28>>2]=w.rdev,z=[w.size>>>0,(U=w.size,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+40>>2]=z[0],de[h+44>>2]=z[1],de[h+48>>2]=4096,de[h+52>>2]=w.blocks,z=[Math.floor(w.atime.getTime()/1e3)>>>0,(U=Math.floor(w.atime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+56>>2]=z[0],de[h+60>>2]=z[1],Ae[h+64>>2]=0,z=[Math.floor(w.mtime.getTime()/1e3)>>>0,(U=Math.floor(w.mtime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+72>>2]=z[0],de[h+76>>2]=z[1],Ae[h+80>>2]=0,z=[Math.floor(w.ctime.getTime()/1e3)>>>0,(U=Math.floor(w.ctime.getTime()/1e3),1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+88>>2]=z[0],de[h+92>>2]=z[1],Ae[h+96>>2]=0,z=[w.ino>>>0,(U=w.ino,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[h+104>>2]=z[0],de[h+108>>2]=z[1],0}var Br=void 0;function Si(){return Br+=4,de[Br-4>>2]}function on(o){if(o=Cn[o],!o)throw new $(8);return o}function xs(o){return Ae[o>>2]+4294967296*de[o+4>>2]}function Qo(o){var l=nn(o)+1,h=Ai(l);return h&&tn(o,pe,h,l),h}function au(o,l,h){function w(Pe){return(Pe=Pe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Pe[1]:"GMT"}var O=new Date().getFullYear(),D=new Date(O,0,1),F=new Date(O,6,1);O=D.getTimezoneOffset();var we=F.getTimezoneOffset();de[o>>2]=60*Math.max(O,we),de[l>>2]=+(O!=we),o=w(D),l=w(F),o=Qo(o),l=Qo(l),we<O?(Ae[h>>2]=o,Ae[h+4>>2]=l):(Ae[h>>2]=l,Ae[h+4>>2]=o)}function Es(o,l,h){Es.Bb||(Es.Bb=!0,au(o,l,h))}var jo;jo=ae?()=>{var o=process.hrtime();return 1e3*o[0]+o[1]/1e6}:()=>performance.now();var Os={};function zo(){if(!qs){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"},l;for(l in Os)Os[l]===void 0?delete o[l]:o[l]=Os[l];var h=[];for(l in o)h.push(l+"="+o[l]);qs=h}return qs}var qs,Mn=void 0,Cs=[];function Is(o,l){if(!Mn){Mn=new WeakMap;var h=wn.length;if(Mn)for(var w=0;w<0+h;w++){var O=wn.get(w);O&&Mn.set(O,w)}}if(Mn.has(o))return Mn.get(o);if(Cs.length)h=Cs.pop();else{try{wn.grow(1)}catch(we){throw we instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":we}h=wn.length-1}try{wn.set(h,o)}catch(we){if(!(we instanceof TypeError))throw we;if(typeof WebAssembly.Function=="function"){w=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var D={parameters:[],results:l[0]=="v"?[]:[O[l[0]]]},F=1;F<l.length;++F)D.parameters.push(O[l[F]]);l=new w(D,o)}else{for(w=[1,96],O=l.slice(0,1),l=l.slice(1),D={i:127,p:127,j:126,f:125,d:124},F=l.length,128>F?w.push(F):w.push(F%128|128,F>>7),F=0;F<l.length;++F)w.push(D[l[F]]);O=="v"?w.push(0):w.push(1,D[O]),l=[0,97,115,109,1,0,0,0,1],O=w.length,128>O?l.push(O):l.push(O%128|128,O>>7),l.push.apply(l,w),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:o}}).exports.f}wn.set(h,l)}return Mn.set(o,h),h}function Fr(o){Mn.delete(wn.get(o)),Cs.push(o)}function Ts(o){var l=Ai(o.length);return o.subarray||o.slice||(o=new Uint8Array(o)),qe.set(o,l),l}function uu(o,l,h,w){var O={string:ke=>{var st=0;if(ke!=null&&ke!==0){var Tn=(ke.length<<2)+1;st=Bn(Tn),tn(ke,qe,st,Tn)}return st},array:ke=>{var st=Bn(ke.length);return pe.set(ke,st),st}};o=d["_"+o];var D=[],F=0;if(w)for(var we=0;we<w.length;we++){var Pe=O[h[we]];Pe?(F===0&&(F=Ur()),D[we]=Pe(w[we])):D[we]=w[we]}return h=o.apply(null,D),h=function(ke){return F!==0&&$r(F),l==="string"?tt(ke):l==="boolean"?!!ke:ke}(h)}function Vo(o,l,h,w){o||(o=this),this.parent=o,this.Ra=o.Ra,this.Va=null,this.id=Ut++,this.name=l,this.mode=h,this.Ga={},this.Ha={},this.rdev=w}Object.defineProperties(Vo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(o){o?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(o){o?this.mode|=146:this.mode&=-147}}}),Ei(),bn=Array(4096),Bo(le,"/"),Jt("/tmp"),Jt("/home"),Jt("/home/web_user"),(()=>{Jt("/dev"),bi(259,{read:()=>0,write:(l,h,w,O)=>O}),vi("/dev/null",259),gn(1280,Ft),gn(1536,ms),vi("/dev/tty",1280),vi("/dev/tty1",1536);var o=$e();In("random",o),In("urandom",o),Jt("/dev/shm"),Jt("/dev/shm/tmp")})(),(()=>{Jt("/proc");var o=Jt("/proc/self");Jt("/proc/self/fd"),Bo({Ra:()=>{var l=Do(o,"fd",16895,73);return l.Ga={lookup:(h,w)=>{var O=Cn[+w];if(!O)throw new $(8);return h={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>O.path}},h.parent=h}},l}},"/proc/self/fd")})();var cu={a:function(o,l,h,w){x("Assertion failed: "+tt(o)+", at: "+[l?tt(l):"unknown filename",h,w?tt(w):"unknown function"])},h:function(o,l){try{return o=tt(o),vs(o,l),0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},H:function(o,l,h){try{if(l=tt(l),l=Ln(o,l),h&-8)return-28;var w=At(l,{Sa:!0}).node;return w?(o="",h&4&&(o+="r"),h&2&&(o+="w"),h&1&&(o+="x"),o&&Dr(w,o)?-2:0):-44}catch(O){if(typeof Ke>"u"||!(O instanceof $))throw O;return-O.Ka}},i:function(o,l){try{var h=Cn[o];if(!h)throw new $(8);return vs(h.node,l),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},g:function(o){try{var l=Cn[o];if(!l)throw new $(8);var h=l.node,w=typeof h=="string"?At(h,{Sa:!0}).node:h;if(!w.Ga.Oa)throw new $(63);return w.Ga.Oa(w,{timestamp:Date.now()}),0}catch(O){if(typeof Ke>"u"||!(O instanceof $))throw O;return-O.Ka}},b:function(o,l,h){Br=h;try{var w=on(o);switch(l){case 0:var O=Si();return 0>O?-28:Nn(w,O).fd;case 1:case 2:return 0;case 3:return w.flags;case 4:return O=Si(),w.flags|=O,0;case 5:return O=Si(),it[O+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return de[Ho()>>2]=28,-1;default:return-28}}catch(D){if(typeof Ke>"u"||!(D instanceof $))throw D;return-D.Ka}},G:function(o,l){try{var h=on(o);return Ti(Pr,h.path,l)}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},l:function(o,l,h){try{if(l=h+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*h:NaN,isNaN(l))return-61;var w=Cn[o];if(!w)throw new $(8);if(!(w.flags&2097155))throw new $(28);return Lr(w.node,l),0}catch(O){if(typeof Ke>"u"||!(O instanceof $))throw O;return-O.Ka}},B:function(o,l){try{if(l===0)return-28;var h=nn("/")+1;return l<h?-68:(tn("/",qe,o,l),h)}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},E:function(o,l){try{return o=tt(o),Ti($o,o,l)}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},y:function(o,l,h){try{return l=tt(l),l=Ln(o,l),l=ue(l),l[l.length-1]==="/"&&(l=l.substr(0,l.length-1)),Jt(l,h),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},D:function(o,l,h,w){try{l=tt(l);var O=w&256;return l=Ln(o,l,w&4096),Ti(O?$o:Pr,l,h)}catch(D){if(typeof Ke>"u"||!(D instanceof $))throw D;return-D.Ka}},v:function(o,l,h,w){Br=w;try{l=tt(l),l=Ln(o,l);var O=w?Si():0;return tr(l,h,O).fd}catch(D){if(typeof Ke>"u"||!(D instanceof $))throw D;return-D.Ka}},t:function(o,l,h,w){try{if(l=tt(l),l=Ln(o,l),0>=w)return-28;var O=Uo(l),D=Math.min(w,nn(O)),F=pe[h+D];return tn(O,qe,h,w+1),pe[h+D]=F,D}catch(we){if(typeof Ke>"u"||!(we instanceof $))throw we;return-we.Ka}},s:function(o){try{return o=tt(o),Fo(o),0}catch(l){if(typeof Ke>"u"||!(l instanceof $))throw l;return-l.Ka}},F:function(o,l){try{return o=tt(o),Ti(Pr,o,l)}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return-h.Ka}},p:function(o,l,h){try{return l=tt(l),l=Ln(o,l),h===0?_i(l):h===512?Fo(l):x("Invalid flags passed to unlinkat"),0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return-w.Ka}},o:function(o,l,h){try{if(l=tt(l),l=Ln(o,l,!0),h){var w=xs(h),O=de[h+8>>2];D=1e3*w+O/1e6,h+=16,w=xs(h),O=de[h+8>>2],F=1e3*w+O/1e6}else var D=Date.now(),F=D;o=D;var we=At(l,{Sa:!0}).node;return we.Ga.Oa(we,{timestamp:Math.max(o,F)}),0}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof $))throw Pe;return-Pe.Ka}},e:function(){return Date.now()},j:function(o,l){o=new Date(1e3*xs(o)),de[l>>2]=o.getSeconds(),de[l+4>>2]=o.getMinutes(),de[l+8>>2]=o.getHours(),de[l+12>>2]=o.getDate(),de[l+16>>2]=o.getMonth(),de[l+20>>2]=o.getFullYear()-1900,de[l+24>>2]=o.getDay();var h=new Date(o.getFullYear(),0,1);de[l+28>>2]=(o.getTime()-h.getTime())/864e5|0,de[l+36>>2]=-(60*o.getTimezoneOffset());var w=new Date(o.getFullYear(),6,1).getTimezoneOffset();h=h.getTimezoneOffset(),de[l+32>>2]=(w!=h&&o.getTimezoneOffset()==Math.min(h,w))|0},w:function(o,l,h,w,O,D){try{var F=on(w);if(l&2&&!(h&2)&&(F.flags&2097155)!==2)throw new $(2);if((F.flags&2097155)===1)throw new $(2);if(!F.Ha.bb)throw new $(43);var we=F.Ha.bb(F,o,O,l,h),Pe=we.Fb;return de[D>>2]=we.vb,Pe}catch(ke){if(typeof Ke>"u"||!(ke instanceof $))throw ke;return-ke.Ka}},x:function(o,l,h,w,O,D){try{var F=on(O);if(h&2){var we=qe.slice(o,o+l);F&&F.Ha.cb&&F.Ha.cb(F,we,D,l,w)}}catch(Pe){if(typeof Ke>"u"||!(Pe instanceof $))throw Pe;return-Pe.Ka}},n:Es,q:function(){return 2147483648},d:jo,c:function(o){var l=qe.length;if(o>>>=0,2147483648<o)return!1;for(var h=1;4>=h;h*=2){var w=l*(1+.2/h);w=Math.min(w,o+100663296);var O=Math;w=Math.max(o,w),O=O.min.call(O,2147483648,w+(65536-w%65536)%65536);e:{try{Kt.grow(O-ft.byteLength+65535>>>16),ps();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},z:function(o,l){var h=0;return zo().forEach(function(w,O){var D=l+h;for(O=Ae[o+4*O>>2]=D,D=0;D<w.length;++D)pe[O++>>0]=w.charCodeAt(D);pe[O>>0]=0,h+=w.length+1}),0},A:function(o,l){var h=zo();Ae[o>>2]=h.length;var w=0;return h.forEach(function(O){w+=O.length+1}),Ae[l>>2]=w,0},f:function(o){try{var l=on(o);return Qe(l),0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return h.Ka}},m:function(o,l){try{var h=on(o);return pe[l>>0]=h.tty?2:(h.mode&61440)===16384?3:(h.mode&61440)===40960?7:4,0}catch(w){if(typeof Ke>"u"||!(w instanceof $))throw w;return w.Ka}},u:function(o,l,h,w){try{e:{var O=on(o);o=l;for(var D=l=0;D<h;D++){var F=Ae[o>>2],we=Ae[o+4>>2];o+=8;var Pe=xi(O,pe,F,we);if(0>Pe){var ke=-1;break e}if(l+=Pe,Pe<we)break}ke=l}return Ae[w>>2]=ke,0}catch(st){if(typeof Ke>"u"||!(st instanceof $))throw st;return st.Ka}},k:function(o,l,h,w,O){try{if(l=h+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*h:NaN,isNaN(l))return 61;var D=on(o);return Mr(D,l,w),z=[D.position>>>0,(U=D.position,1<=+Math.abs(U)?0<U?(Math.min(+Math.floor(U/4294967296),4294967295)|0)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],de[O>>2]=z[0],de[O+4>>2]=z[1],D.hb&&l===0&&w===0&&(D.hb=null),0}catch(F){if(typeof Ke>"u"||!(F instanceof $))throw F;return F.Ka}},C:function(o){try{var l=on(o);return l.Ha&&l.Ha.fsync?l.Ha.fsync(l):0}catch(h){if(typeof Ke>"u"||!(h instanceof $))throw h;return h.Ka}},r:function(o,l,h,w){try{e:{var O=on(o);o=l;for(var D=l=0;D<h;D++){var F=Ae[o>>2],we=Ae[o+4>>2];o+=8;var Pe=nr(O,pe,F,we);if(0>Pe){var ke=-1;break e}l+=Pe}ke=l}return Ae[w>>2]=ke,0}catch(st){if(typeof Ke>"u"||!(st instanceof $))throw st;return st.Ka}}};(function(){function o(O){d.asm=O.exports,Kt=d.asm.I,ps(),wn=d.asm.Aa,fe.unshift(d.asm.J),Bt--,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),Bt==0&&ze&&(O=ze,ze=null,O())}function l(O){o(O.instance)}function h(O){return Z().then(function(D){return WebAssembly.instantiate(D,w)}).then(function(D){return D}).then(O,function(D){ye("failed to asynchronously prepare wasm: "+D),x(D)})}var w={a:cu};if(Bt++,d.monitorRunDependencies&&d.monitorRunDependencies(Bt),d.instantiateWasm)try{return d.instantiateWasm(w,o)}catch(O){return ye("Module.instantiateWasm callback failed with error: "+O),!1}return function(){return vt||typeof WebAssembly.instantiateStreaming!="function"||q()||k.startsWith("file://")||ae||typeof fetch!="function"?h(l):fetch(k,{credentials:"same-origin"}).then(function(O){return WebAssembly.instantiateStreaming(O,w).then(l,function(D){return ye("wasm streaming compile failed: "+D),ye("falling back to ArrayBuffer instantiation"),h(l)})})}(),{}})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.J).apply(null,arguments)},d._sqlite3_free=function(){return(d._sqlite3_free=d.asm.K).apply(null,arguments)},d._sqlite3_value_double=function(){return(d._sqlite3_value_double=d.asm.L).apply(null,arguments)},d._sqlite3_value_text=function(){return(d._sqlite3_value_text=d.asm.M).apply(null,arguments)};var Ho=d.___errno_location=function(){return(Ho=d.___errno_location=d.asm.N).apply(null,arguments)};d._sqlite3_prepare_v2=function(){return(d._sqlite3_prepare_v2=d.asm.O).apply(null,arguments)},d._sqlite3_step=function(){return(d._sqlite3_step=d.asm.P).apply(null,arguments)},d._sqlite3_finalize=function(){return(d._sqlite3_finalize=d.asm.Q).apply(null,arguments)},d._sqlite3_reset=function(){return(d._sqlite3_reset=d.asm.R).apply(null,arguments)},d._sqlite3_value_int=function(){return(d._sqlite3_value_int=d.asm.S).apply(null,arguments)},d._sqlite3_clear_bindings=function(){return(d._sqlite3_clear_bindings=d.asm.T).apply(null,arguments)},d._sqlite3_value_blob=function(){return(d._sqlite3_value_blob=d.asm.U).apply(null,arguments)},d._sqlite3_value_bytes=function(){return(d._sqlite3_value_bytes=d.asm.V).apply(null,arguments)},d._sqlite3_value_type=function(){return(d._sqlite3_value_type=d.asm.W).apply(null,arguments)},d._sqlite3_result_blob=function(){return(d._sqlite3_result_blob=d.asm.X).apply(null,arguments)},d._sqlite3_result_double=function(){return(d._sqlite3_result_double=d.asm.Y).apply(null,arguments)},d._sqlite3_result_error=function(){return(d._sqlite3_result_error=d.asm.Z).apply(null,arguments)},d._sqlite3_result_int=function(){return(d._sqlite3_result_int=d.asm._).apply(null,arguments)},d._sqlite3_result_int64=function(){return(d._sqlite3_result_int64=d.asm.$).apply(null,arguments)},d._sqlite3_result_null=function(){return(d._sqlite3_result_null=d.asm.aa).apply(null,arguments)},d._sqlite3_result_text=function(){return(d._sqlite3_result_text=d.asm.ba).apply(null,arguments)},d._sqlite3_sql=function(){return(d._sqlite3_sql=d.asm.ca).apply(null,arguments)},d._sqlite3_aggregate_context=function(){return(d._sqlite3_aggregate_context=d.asm.da).apply(null,arguments)},d._sqlite3_column_count=function(){return(d._sqlite3_column_count=d.asm.ea).apply(null,arguments)},d._sqlite3_data_count=function(){return(d._sqlite3_data_count=d.asm.fa).apply(null,arguments)},d._sqlite3_column_blob=function(){return(d._sqlite3_column_blob=d.asm.ga).apply(null,arguments)},d._sqlite3_column_bytes=function(){return(d._sqlite3_column_bytes=d.asm.ha).apply(null,arguments)},d._sqlite3_column_double=function(){return(d._sqlite3_column_double=d.asm.ia).apply(null,arguments)},d._sqlite3_column_text=function(){return(d._sqlite3_column_text=d.asm.ja).apply(null,arguments)},d._sqlite3_column_type=function(){return(d._sqlite3_column_type=d.asm.ka).apply(null,arguments)},d._sqlite3_column_name=function(){return(d._sqlite3_column_name=d.asm.la).apply(null,arguments)},d._sqlite3_bind_blob=function(){return(d._sqlite3_bind_blob=d.asm.ma).apply(null,arguments)},d._sqlite3_bind_double=function(){return(d._sqlite3_bind_double=d.asm.na).apply(null,arguments)},d._sqlite3_bind_int=function(){return(d._sqlite3_bind_int=d.asm.oa).apply(null,arguments)},d._sqlite3_bind_text=function(){return(d._sqlite3_bind_text=d.asm.pa).apply(null,arguments)},d._sqlite3_bind_parameter_index=function(){return(d._sqlite3_bind_parameter_index=d.asm.qa).apply(null,arguments)},d._sqlite3_normalized_sql=function(){return(d._sqlite3_normalized_sql=d.asm.ra).apply(null,arguments)},d._sqlite3_errmsg=function(){return(d._sqlite3_errmsg=d.asm.sa).apply(null,arguments)},d._sqlite3_exec=function(){return(d._sqlite3_exec=d.asm.ta).apply(null,arguments)},d._sqlite3_changes=function(){return(d._sqlite3_changes=d.asm.ua).apply(null,arguments)},d._sqlite3_close_v2=function(){return(d._sqlite3_close_v2=d.asm.va).apply(null,arguments)},d._sqlite3_create_function_v2=function(){return(d._sqlite3_create_function_v2=d.asm.wa).apply(null,arguments)},d._sqlite3_open=function(){return(d._sqlite3_open=d.asm.xa).apply(null,arguments)};var Ai=d._malloc=function(){return(Ai=d._malloc=d.asm.ya).apply(null,arguments)},ki=d._free=function(){return(ki=d._free=d.asm.za).apply(null,arguments)};d._RegisterExtensionFunctions=function(){return(d._RegisterExtensionFunctions=d.asm.Ba).apply(null,arguments)};var Ko=d._emscripten_builtin_memalign=function(){return(Ko=d._emscripten_builtin_memalign=d.asm.Ca).apply(null,arguments)},Ur=d.stackSave=function(){return(Ur=d.stackSave=d.asm.Da).apply(null,arguments)},$r=d.stackRestore=function(){return($r=d.stackRestore=d.asm.Ea).apply(null,arguments)},Bn=d.stackAlloc=function(){return(Bn=d.stackAlloc=d.asm.Fa).apply(null,arguments)};d.UTF8ToString=tt,d.stackAlloc=Bn,d.stackSave=Ur,d.stackRestore=$r,d.cwrap=function(o,l,h,w){h=h||[];var O=h.every(D=>D==="number"||D==="boolean");return l!=="string"&&O&&!w?d["_"+o]:function(){return uu(o,l,h,arguments)}};var Wi;ze=function o(){Wi||Jo(),Wi||(ze=o)};function Jo(){function o(){if(!Wi&&(Wi=!0,d.calledRun=!0,!mn)){if(d.noFSInit||Oi||(Oi=!0,Ei(),d.stdin=d.stdin,d.stdout=d.stdout,d.stderr=d.stderr,d.stdin?In("stdin",d.stdin):Ns("/dev/tty","/dev/stdin"),d.stdout?In("stdout",null,d.stdout):Ns("/dev/tty","/dev/stdout"),d.stderr?In("stderr",null,d.stderr):Ns("/dev/tty1","/dev/stderr"),tr("/dev/stdin",0),tr("/dev/stdout",1),tr("/dev/stderr",1)),ys=!1,ne(fe),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var l=d.postRun.shift();Me.unshift(l)}ne(Me)}}if(!(0<Bt)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Dn();ne(rn),0<Bt||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),o()},1)):o())}}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Jo(),g}),n)};t.exports=r,t.exports.default=r})(dm);var $b=dm.exports;const Qb=Mb($b),jb=""+new URL("sql-wasm-18fc45ef.wasm",import.meta.url).href,zb="sqlitevfs",$s=new Map,Vb=2048,Hb=65536;class Kb{constructor(e){ge(this,"_data");ge(this,"_size");this._data=e??new Uint8Array,this._size=this._data.length}get size(){return this._size}read(e,n){if(e>=this._size)return 0;const r=this._data.subarray(e,Math.min(this._size,e+n.length));return n.set(r),r.length}reserve(e){if(this._data.length>=e)return;const n=e-this._data.length,r=Math.min(Hb,Math.max(Vb,this._data.length)),a=new Uint8Array(this._data.length+Math.max(r,n));a.set(this._data),this._data=a}write(e,n){return this.reserve(e+n.length),this._data.set(n,e),this._size=Math.max(this._size,e+n.length),n.length}truncate(e){this._size=e}toUint8Array(){return this._data.subarray(0,this._size)}}const Jb=globalThis.indexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB,Xf=new Promise((t,e)=>{const n=Jb.open(zb,1);n.onupgradeneeded=()=>n.result.createObjectStore("files",{keyPath:"name"}),n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)});async function Gb(t){const e=await Xf,n=await new Promise((r,a)=>{const m=e.transaction("files","readonly").objectStore("files").get(t);m.onsuccess=()=>r(m.result),m.onerror=()=>a(m.error)});if(n&&!$s.has(t)){const r=new Kb(n.data);return $s.set(t,r),r}else return $s.has(t)?$s.get(t):null}async function Yb(t,e){const n=await Xf;await new Promise((r,a)=>{const m=n.transaction("files","readwrite").objectStore("files").put({name:t,data:e});m.onsuccess=()=>r(!0),m.onerror=()=>a(m.error)})}async function td(t){const e=await Xf;await new Promise((n,r)=>{const c=e.transaction("files","readwrite").objectStore("files").delete(t);c.onsuccess=()=>n(!0),c.onerror=()=>r(c.error)})}async function Xb(t,e){if(await Yb(t,e),$s.has(t)){const n=$s.get(t);n.truncate(0),n.write(0,e)}}var pm=t=>{if(mm(t)||typeof t=="string")return t;if(typeof t=="boolean")return`${t}`;if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return t}},nd=/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?$/,Zb=t=>{if(mm(t))return t;if(typeof t=="string"){if(/^(true|false)$/.test(t))return t==="true";if(nd.test(t))return new Date(t);try{return JSON.parse(t,(e,n)=>typeof n=="string"&&nd.exec(n)?new Date(n):n)}catch{return t}}};function mm(t){return t==null||typeof t=="bigint"||typeof t=="number"||typeof t=="object"&&"buffer"in t}var eN=class extends zf{constructor(e){super();ge(this,"serializer");this.serializer=e||pm}transformPrimitiveValueList(e){return{...e,values:e.values.map(this.serializer)}}transformColumnUpdate(e){const{value:n}=e;if(n.kind!=="ValueNode")return super.transformColumnUpdate(e);const{value:r,...a}=n,c=this.serializer(r);return r===c?super.transformColumnUpdate(e):super.transformColumnUpdate({...e,value:{...a,value:c}})}transformValue(e){return{...e,value:this.serializer(e.value)}}},tN=class{constructor(t={}){ge(this,"serializeParametersTransformer");ge(this,"deserializer");ge(this,"only");ge(this,"ctx");const{deserializer:e=Zb,selectOrRawOnly:n=!1,serializer:r}=t;this.serializeParametersTransformer=new eN(r),this.deserializer=e,this.only=n}transformQuery({node:t,queryId:e}){var n;return this.only&&(t.kind==="SelectQueryNode"||t.kind==="RawNode")&&((n=this.ctx)==null||n.add(e)),this.serializeParametersTransformer.transformNode(t)}async parseResult(t){return t.length?await Promise.all(t.map(async e=>{const n={...e};for(const r in n)n[r]=await this.deserializer(n[r]);return n})):[]}async transformResult({result:t,queryId:e}){var r,a;const n=async()=>({...t,rows:await this.parseResult(t.rows)});return this.only?(r=this.ctx)!=null&&r.has(e)?((a=this.ctx)==null||a.delete(e),await n()):t:await n()}};function nN(t){return`__pre_${t}`}function rN(t,e=n=>n){return{setParam:n=>{let r;return(a,c)=>{if(!r){const{parameters:m,sql:g,query:v}=n({qb:t,param:nN}).compile();r={sql:g,query:(c==null?void 0:c(v))||{kind:v.kind},parameters:m}}return{...r,parameters:r.parameters.map(m=>typeof m=="string"&&m.startsWith("__pre_")?e(a[m.slice(6)]):m)}}}}}async function iN(t){return(await et`PRAGMA integrity_check`.execute(t)).rows[0].integrity_check==="ok"}async function rd(t,e){return e?(await et`PRAGMA user_version = ${et.raw(`${e}`)}`.execute(t),e):(await et`PRAGMA user_version`.execute(t)).rows[0].user_version}async function sN(t,e){const n=e||`sp_${Date.now()%1e8}`;return await et`savepoint ${et.raw(n)}`.execute(t),{release:async()=>{await et`release savepoint ${et.raw(n)}`.execute(t)},rollback:async()=>{await et`rollback to savepoint ${et.raw(n)}`.execute(t)}}}function id(t){const{logger:e,merge:n,queryNode:r}=t;return a=>{const{level:c,queryDurationMillis:m,query:{parameters:g,sql:v,query:d}}=a,C=c==="error"?a.error:void 0;let R=v.replace(/\r?\n/g," ").replace(/\s+/g," ");n&&g.forEach(te=>{R=R.replace("?",typeof te=="string"?te:JSON.stringify(te))});const G={sql:R,params:g,duration:m,error:C};r&&(G.queryNode=d),e(G)}}var oN=class extends Error{constructor(){super("db file maybe broken")}};function aN(t){return t.toOperationNode().kind==="SelectQueryNode"}var uN=class{constructor(t){ge(this,"kysely");ge(this,"trxCount",0);ge(this,"trx");ge(this,"logger");ge(this,"serializer",pm);var g;const{dialect:e,logger:n,onQuery:r,plugins:a=[],serializerPluginOptions:c}=t;this.logger=n,c!=null&&c.serializer&&(this.serializer=c.serializer),a.push(new tN(c));let m;r===!0?m=id({logger:((g=this.logger)==null?void 0:g.debug)||console.log,merge:!0}):r&&(m=id(r)),this.kysely=new Pa({dialect:e,log:m,plugins:a})}async syncSchema(t,e){var n,r;try{if(e&&!await iN(this.kysely))return(n=this.logger)==null||n.error("integrity check fail"),{ready:!1,error:new oN};await t(this.kysely,this.logger)}catch(a){return this.logError(a,"sync table fail"),{ready:!1,error:a}}return(r=this.logger)==null||r.info("table updated"),{ready:!0}}getDB(){return this.trx||this.kysely}logError(t,e){var n;e&&((n=this.logger)==null||n.error(e,t instanceof Error?t:void 0))}async transaction(t,e){var a;if(!this.trx)try{return await this.kysely.transaction().execute(async c=>{var g;return this.trx=c,(g=this.logger)==null||g.debug("run in transaction"),await t(c)})}catch(c){this.logError(c,e);return}finally{this.trx=void 0}this.trxCount++;const n=this.getDB(),r=await sN(n,`sp_${this.trxCount}`);(a=this.logger)==null||a.debug(`run in savepoint:${this.trxCount}`);try{const c=await t(n);return await r.release(),this.trxCount--,c}catch(c){await r.rollback(),this.logError(c,e),this.trxCount--;return}}async execute(t,e){try{return await t(this.getDB()).execute()}catch(n){this.logError(n,e);return}}async executeTakeFirst(t,e){try{let n=t(this.getDB());return aN(n)&&(n=n.limit(1)),await n.executeTakeFirstOrThrow()}catch(n){this.logError(n,e);return}}precompile(t){var e,n;return(n=(e=this.logger)==null?void 0:e.debug)==null||n.call(e,"precompile"),rN(t(this.kysely),this.serializer)}async executeCompiled(t,e){try{return await this.getDB().executeQuery(t)}catch(n){this.logError(n,e);return}}async executeCompiledTakeList(t,e){const n=await this.executeCompiled(t,e);return n==null?void 0:n.rows}async raw(t,e){try{return typeof t=="string"?await this.getDB().executeQuery(yr.raw(t)):await t.execute(this.getDB())}catch(n){this.logError(n,e);return}}async destroy(){var t;(t=this.logger)==null||t.info("destroyed"),await this.kysely.destroy(),this.trx=void 0}},ym="__TIME_TRIGGER__";function cN(t,e){const{create:n,update:r}=(e==null?void 0:e.timeTrigger)||{},a={type:"date",defaultTo:ym};return n===!0?t.createAt=a:n&&(t[n]=a),r===!0?t.updateAt={...a,notNull:0}:r&&(t[r]={...a,notNull:0}),{columns:t,...e}}function wm(t){let e="text",n=!1;switch(t){case"boolean":case"date":case"object":case"string":e="text";break;case"float":e="real";break;case"increments":n=!0;case"int":e="integer";break;default:e=t}return{dataType:e,isIncrements:n}}function pf(t){return Array.isArray(t)?t:[t]}function lN(t){return typeof t=="function"}async function Ru(t,e){await t.schema.dropTable(e).execute()}async function sd(t,e,n){const{index:r,...a}=n;await t.transaction().execute(async c=>{const m=await mf(c,e,a);await bm(c,e,m),await gm(c,e,r)})}async function gm(t,e,n){for(const r of n||[]){const a=pf(r);await t.schema.createIndex(`idx_${e}_${a.join("_")}`).on(e).columns(a).ifNotExists().execute()}}async function mf(t,e,{columns:n,primary:r,timeTrigger:a,unique:c},m=!1){const g=a?{triggerKey:"rowid",update:void 0}:void 0;let v=!1,d=t.schema.createTable(e);m&&(d=d.temporary());for(const[C,R]of Object.entries(n)){let G="text";const{type:te,notNull:ae,defaultTo:b}=R,E=wm(te);G=E.dataType,d=d.addColumn(C,G,N=>E.isIncrements?(v=!0,g&&(g.triggerKey=C),N.autoIncrement().primaryKey()):b===ym?(g&&ae===0&&(g.update=C),N.defaultTo(et`CURRENT_TIMESTAMP`)):(ae===!0&&(N=N.notNull()),b!==void 0&&(N=N.defaultTo(lN(b)?b(et):b)),N))}if(!v&&r){const C=pf(r);d=d.addPrimaryKeyConstraint(`pk#${C.join("#")}`,C)}for(const C of c||[]){const R=pf(C);d=d.addUniqueConstraint(`un#${R.join("#")}`,R)}return await d.ifNotExists().execute(),g}async function bm(t,e,n){if(!n||!n.update)return;const{triggerKey:r,update:a}=n,c=`tgr_${e}_${a}`;await et`create trigger if not exists ${et.ref(c)}
after update
on ${et.table(e)}
begin
  update ${et.table(e)}
  set ${et.ref(a)} = CURRENT_TIMESTAMP
  where ${et.ref(r)} = NEW.${et.ref(r)};
end`.execute(t)}function fN(t){const e=/create table (?:if not exist)?\s*"([^"]+)".*?\((.*)\)/i,n=/"([^"]+)"\s+(\w+)\s?(not null)?/gi,[,r,a]=t.replace(/\r?\n/g,"").match(e),c={columns:{},name:r,primary:void 0,unique:[]},m=a.matchAll(n);for(const g of m){const[,v,d,C]=g;if(v.startsWith("pk#")){const[,...R]=v.split("#");c.primary=R}else if(v.startsWith("un#")){const[,...R]=v.split("#");c.unique.push(R)}else c.columns[v]={type:d,notNull:!!C}}return c}async function hN(t,e=[]){const n=await t.selectFrom("sqlite_master").where("type","in",["table","trigger","index"]).where("name","!=",sm).where("name","!=",om).where("name","not like","sqlite_%").$if(!!e.length,a=>a.where(c=>c.and(e.map(m=>c("name","not like",`${m}%`))))).select(["name","sql","type"]).$castTo().execute(),r={existTables:{},indexList:[],triggerList:[]};for(const{name:a,sql:c,type:m}of n)c&&(m==="table"?r.existTables[a]=fN(c):m==="index"?r.indexList.push(a):r.triggerList.push(a));return r}async function dN(t,e,n={},r){const{reserveOldData:a,truncateIfExists:c=[],log:m,version:{current:g,skipSyncWhenSame:v}={},excludeTablePrefix:d}=n;if(v&&g===await rd(t))return;await rd(t,g);const C=E=>m&&(r==null?void 0:r.debug(E)),{existTables:R,indexList:G,triggerList:te}=await hN(t,d);C("====== sync tables start ======");const ae=new Set(Array.isArray(c)?c:c?Object.keys(R):[]);for(const E of G)await t.schema.dropIndex(E).ifExists().execute();for(const E of te)await et`drop trigger if exists ${et.ref(E)}`.execute(t);for(const[E,N]of Object.entries(R))E in e?(C(`diff table: ${E}`),await b(E,N,e[E])):(C(`remove table: ${E}`),await Ru(t,E));for(const[E,N]of Object.entries(e))E in R||(C(`create table: ${E}`),await sd(t,E,N));C("======= sync tables end =======");async function b(E,N,I){if(ae.has(E)){await t.transaction().execute(async re=>{await Ru(re,E),await sd(re,E,I),C("clear and sync structure")});return}const{index:M,...V}=I,Ne=pN(N.columns,I.columns);if(Ne.length===Object.keys(N.columns).length){C("same table structure, skip");return}C("different table structure, update"),await t.transaction().execute(async re=>{const ye=`_temp_${E}`;await mf(re,ye,N,!0),await re.insertInto(ye).expression(Kt=>Kt.selectFrom(E).selectAll()).execute(),await Ru(re,E);const vt=await mf(re,E,V);Ne.length&&await re.insertInto(E).columns(Ne).expression(Kt=>Kt.selectFrom(ye).select(Ne)).execute(),await gm(re,E,M),await bm(re,E,vt),!a&&await Ru(re,ye)}).then(()=>C(`restore columns: ${Ne}`)).catch(re=>r==null?void 0:r.error(`fail to sync ${E}`,re))}}function pN(t,e){const n=[];for(const[r,a]of Object.entries(e))if(r in t){const{type:c,notNull:m=!1}=t[r];wm(a.type).dataType===c&&(a.notNull||!1)===m&&n.push(r)}return n}function mN(t,e={}){const{log:n}=e;return async(r,a)=>{await dN(r,t,e,n?a:void 0)}}const yN={test:cN({id:{type:"increments"},name:{type:"string"},blobtest:{type:"blob"}},{timeTrigger:{create:!0,update:!0}})};async function Zf(t){const e=new uN({dialect:t}),n=await e.syncSchema(mN(yN));if(!n.ready)throw n.error;console.log("test"),console.log(await e.raw(et`PRAGMA table_info(${et.table("test")});`)),console.log(await e.raw(et`select last_insert_rowid()`));for(let r=0;r<10;r++)await e.transaction(async a=>{await a.insertInto("test").values({name:`test at ${Date.now()}`,blobtest:Uint8Array.from([2,3,4,5,6,7,8])}).execute()});return e.execute(r=>r.selectFrom("test").selectAll())}const wN=new Rb({async database(){const t=await Qb({locateFile:()=>jb});return new t.Database(await Gb("sqljs"))},onWrite:{func(t){console.log(`[sqljs] write to indexeddb, length: ${t.length}`),Xb("sqljs",t)},isThrottle:!0}});function gN(){const t=my();function e(){Zf(wN).then(n=>{t.value=n})}return{result:t,run:e}}function bN(){return new Worker(""+new URL("sqljsWorker-6950805d.js",import.meta.url).href)}function NN(){return new Worker(""+new URL("officialWasmWorker-c7f817f2.js",import.meta.url).href)}const je=0,vN=5,bt=10,Nm=12,vm=14,Mi=21,Wl=25,_N=27,od=100,xN=101,EN=3850,ON=522,qN=1,CN=2,_m=4,IN=8,Ls=0,Ui=1,zu=2,TN=3,Vu=4,SN=512,AN=1024,kN=2048,WN=16384,ad=1,ud=2,cd=3,ld=4,fd=5,hd=0x7fffffffffffffffn,dd=-0x8000000000000000n;class _r extends Error{constructor(e,n){super(e),this.code=n}}const Ds=!0;function RN(t){const e={},n=t._getSqliteFree(),r=t._malloc(8),a=[r,r+4];function c(b){if(typeof b!="string")return 0;const E=t.lengthBytesUTF8(b),N=t._sqlite3_malloc(E+1);return t.stringToUTF8(b,N,E+1),N}function m(b,E){return BigInt(E)<<32n|BigInt(b)&0xffffffffn}const g=function(){const b=BigInt(Number.MAX_SAFE_INTEGER)>>32n,E=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(N,I){return I>b||I<E?m(N,I):I*4294967296+(N&2147483647)-(N&2147483648)}}(),v=new Set;function d(b){if(!v.has(b))throw new _r("not a database",Mi)}const C=new Map;function R(b){if(!C.has(b))throw new _r("not a statement",Mi)}e.bind_collection=function(b,E){R(b);const N=Array.isArray(E),I=e.bind_parameter_count(b);for(let M=1;M<=I;++M){const V=N?M-1:e.bind_parameter_name(b,M),Ne=E[V];Ne!==void 0&&e.bind(b,M,Ne)}return je},e.bind=function(b,E,N){switch(R(b),typeof N){case"number":return N===(N|0)?e.bind_int(b,E,N):e.bind_double(b,E,N);case"string":return e.bind_text(b,E,N);default:return N instanceof Uint8Array||Array.isArray(N)?e.bind_blob(b,E,N):N===null?e.bind_null(b,E):typeof N=="bigint"?e.bind_int64(b,E,N):N===void 0?_N:(console.warn("unknown binding converted to null",N),e.bind_null(b,E))}},e.bind_blob=function(){const b="sqlite3_bind_blob",E=t.cwrap(b,...Ee("nnnnn:n"));return function(N,I,M){R(N);const V=M.byteLength??M.length,Ne=t._sqlite3_malloc(V);t.HEAPU8.subarray(Ne).set(M);const re=E(N,I,Ne,V,n);return ae(b,re,C.get(N))}}(),e.bind_parameter_count=function(){const b="sqlite3_bind_parameter_count",E=t.cwrap(b,...Ee("n:n"));return function(N){return R(N),E(N)}}(),e.bind_double=function(){const b="sqlite3_bind_double",E=t.cwrap(b,...Ee("nnn:n"));return function(N,I,M){R(N);const V=E(N,I,M);return ae(b,V,C.get(N))}}(),e.bind_int=function(){const b="sqlite3_bind_int",E=t.cwrap(b,...Ee("nnn:n"));return function(N,I,M){if(R(N),M>2147483647||M<-2147483648)return Wl;const V=E(N,I,M);return ae(b,V,C.get(N))}}(),e.bind_int64=function(){const b="sqlite3_bind_int64",E=t.cwrap(b,...Ee("nnnn:n"));return function(N,I,M){if(R(N),M>hd||M<dd)return Wl;const V=M&0xffffffffn,Ne=M>>32n,re=E(N,I,Number(V),Number(Ne));return ae(b,re,C.get(N))}}(),e.bind_null=function(){const b="sqlite3_bind_null",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){R(N);const M=E(N,I);return ae(b,M,C.get(N))}}(),e.bind_parameter_name=function(){const b="sqlite3_bind_parameter_name",E=t.cwrap(b,...Ee("n:s"));return function(N,I){return R(N),E(N,I)}}(),e.bind_text=function(){const b="sqlite3_bind_text",E=t.cwrap(b,...Ee("nnnnn:n"));return function(N,I,M){R(N);const V=c(M),Ne=E(N,I,V,-1,n);return ae(b,Ne,C.get(N))}}(),e.changes=function(){const b="sqlite3_changes",E=t.cwrap(b,...Ee("n:n"));return function(N){return d(N),E(N)}}(),e.close=function(){const b="sqlite3_close",E=t.cwrap(b,...Ee("n:n"),{async:Ds});return async function(N){d(N);const I=await E(N);return v.delete(N),ae(b,I,N)}}(),e.column=function(b,E){R(b);const N=e.column_type(b,E);switch(N){case ld:return e.column_blob(b,E);case ud:return e.column_double(b,E);case ad:const I=e.column_int(b,E),M=t.getTempRet0();return g(I,M);case fd:return null;case cd:return e.column_text(b,E);default:throw new _r("unknown type",N)}},e.column_blob=function(){const b="sqlite3_column_blob",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){R(N);const M=e.column_bytes(N,I),V=E(N,I);return t.HEAPU8.subarray(V,V+M)}}(),e.column_bytes=function(){const b="sqlite3_column_bytes",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){return R(N),E(N,I)}}(),e.column_count=function(){const b="sqlite3_column_count",E=t.cwrap(b,...Ee("n:n"));return function(N){return R(N),E(N)}}(),e.column_double=function(){const b="sqlite3_column_double",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){return R(N),E(N,I)}}(),e.column_int=function(){const b="sqlite3_column_int64",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){return R(N),E(N,I)}}(),e.column_int64=function(){const b="sqlite3_column_int64",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){R(N);const M=E(N,I),V=t.getTempRet0();return m(M,V)}}(),e.column_name=function(){const b="sqlite3_column_name",E=t.cwrap(b,...Ee("nn:s"));return function(N,I){return R(N),E(N,I)}}(),e.column_names=function(b){const E=[],N=e.column_count(b);for(let I=0;I<N;++I)E.push(e.column_name(b,I));return E},e.column_text=function(){const b="sqlite3_column_text",E=t.cwrap(b,...Ee("nn:s"));return function(N,I){return R(N),E(N,I)}}(),e.column_type=function(){const b="sqlite3_column_type",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){return R(N),E(N,I)}}(),e.create_function=function(b,E,N,I,M,V,Ne,re){if(d(b),V&&!Ne&&!re){const ye=t.createFunction(b,E,N,I,M,V);return ae("sqlite3_create_function",ye,b)}if(!V&&Ne&&re){const ye=t.createAggregate(b,E,N,I,M,Ne,re);return ae("sqlite3_create_function",ye,b)}throw new _r("invalid function combination",Mi)},e.create_module=function(b,E,N,I){d(b);const M=t.createModule(b,E,N,I);return ae("sqlite3_create_module",M,b)},e.data_count=function(){const b="sqlite3_data_count",E=t.cwrap(b,...Ee("n:n"));return function(N){return R(N),E(N)}}(),e.declare_vtab=function(){const b="sqlite3_declare_vtab",E=t.cwrap(b,...Ee("ns:n"));return function(N,I){const M=E(N,I);return ae("sqlite3_declare_vtab",M)}}(),e.exec=async function(b,E,N){for await(const I of e.statements(b,E)){let M;for(;await e.step(I)===od;)if(N){M=M??e.column_names(I);const V=e.row(I);await N(V,M)}}return je},e.finalize=function(){const b="sqlite3_finalize",E=t.cwrap(b,...Ee("n:n"),{async:Ds});return async function(N){if(!C.has(N))return Mi;const I=await E(N);return C.get(N),C.delete(N),I}}(),e.get_autocommit=function(){const b="sqlite3_get_autocommit",E=t.cwrap(b,...Ee("n:n"));return function(N){return E(N)}}(),e.libversion=function(){const b="sqlite3_libversion",E=t.cwrap(b,...Ee(":s"));return function(){return E()}}(),e.libversion_number=function(){const b="sqlite3_libversion_number",E=t.cwrap(b,...Ee(":n"));return function(){return E()}}(),e.limit=function(){const b="sqlite3_limit",E=t.cwrap(b,...Ee("nnn:n"));return function(N,I,M){return E(N,I,M)}}(),e.open_v2=function(){const b="sqlite3_open_v2",E=t.cwrap(b,...Ee("snnn:n"),{async:Ds});return async function(N,I,M){I=I||_m|CN,M=c(M);const V=await E(N,a[0],I,M),Ne=t.getValue(a[0],"*");return v.add(Ne),t._sqlite3_free(M),t.ccall("RegisterExtensionFunctions","void",["number"],[Ne]),ae(b,V),Ne}}(),e.prepare_v2=function(){const b="sqlite3_prepare_v2",E=t.cwrap(b,...Ee("nnnnn:n"),{async:Ds});return async function(N,I){const M=await E(N,I,-1,a[0],a[1]);ae(b,M,N);const V=t.getValue(a[0],"*");return V?(C.set(V,N),{stmt:V,sql:t.getValue(a[1],"*")}):null}}(),e.progress_handler=function(b,E,N,I){d(b),t.progressHandler(b,E,N,I)},e.reset=function(){const b="sqlite3_reset",E=t.cwrap(b,...Ee("n:n"),{async:Ds});return async function(N){R(N);const I=await E(N);return ae(b,I,C.get(N))}}(),e.result=function(b,E){switch(typeof E){case"number":E===(E|0)?e.result_int(b,E):e.result_double(b,E);break;case"string":e.result_text(b,E);break;default:if(E instanceof Uint8Array||Array.isArray(E))e.result_blob(b,E);else if(E===null)e.result_null(b);else{if(typeof E=="bigint")return e.result_int64(b,E);console.warn("unknown result converted to null",E),e.result_null(b)}break}},e.result_blob=function(){const b="sqlite3_result_blob",E=t.cwrap(b,...Ee("nnnn:n"));return function(N,I){const M=I.byteLength??I.length,V=t._sqlite3_malloc(M);t.HEAPU8.subarray(V).set(I),E(N,V,M,n)}}(),e.result_double=function(){const b="sqlite3_result_double",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){E(N,I)}}(),e.result_int=function(){const b="sqlite3_result_int",E=t.cwrap(b,...Ee("nn:n"));return function(N,I){E(N,I)}}(),e.result_int64=function(){const b="sqlite3_result_int64",E=t.cwrap(b,...Ee("nnn:n"));return function(N,I){if(I>hd||I<dd)return Wl;const M=I&0xffffffffn,V=I>>32n;E(N,Number(M),Number(V))}}(),e.result_null=function(){const b="sqlite3_result_null",E=t.cwrap(b,...Ee("n:n"));return function(N){E(N)}}(),e.result_text=function(){const b="sqlite3_result_text",E=t.cwrap(b,...Ee("nnnn:n"));return function(N,I){const M=c(I);E(N,M,-1,n)}}(),e.row=function(b){const E=[],N=e.data_count(b);for(let I=0;I<N;++I){const M=e.column(b,I);E.push((M==null?void 0:M.buffer)===t.HEAPU8.buffer?M.slice():M)}return E},e.set_authorizer=function(b,E,N){d(b);const I=t.setAuthorizer(b,E,N);return ae("sqlite3_set_authorizer",I,b)},e.sql=function(){const b="sqlite3_sql",E=t.cwrap(b,...Ee("n:s"));return function(N){return R(N),E(N)}}(),e.statements=function(b,E){return async function*(){const N=e.str_new(b,E);let I={stmt:null,sql:e.str_value(N)};try{for(;I=await e.prepare_v2(b,I.sql);)yield I.stmt,e.finalize(I.stmt),I.stmt=null}finally{I!=null&&I.stmt&&e.finalize(I.stmt),e.str_finish(N)}}()},e.step=function(){const b="sqlite3_step",E=t.cwrap(b,...Ee("n:n"),{async:Ds});return async function(N){R(N);const I=await E(N);return ae(b,I,C.get(N),[od,xN])}}();let G=0;const te=new Map;e.str_new=function(b,E=""){const N=t.lengthBytesUTF8(E),I=G++&4294967295,M={offset:t._sqlite3_malloc(N+1),bytes:N};return te.set(I,M),t.stringToUTF8(E,M.offset,M.bytes+1),I},e.str_appendall=function(b,E){if(!te.has(b))throw new _r("not a string",Mi);const N=te.get(b),I=t.lengthBytesUTF8(E),M=N.bytes+I,V=t._sqlite3_malloc(M+1);t.HEAPU8.subarray(V,V+M+1).set(t.HEAPU8.subarray(N.offset,N.offset+N.bytes)),t.stringToUTF8(E,V+N.bytes,I+1),t._sqlite3_free(N.offset),N.offset=V,N.bytes=M,te.set(b,N)},e.str_finish=function(b){if(!te.has(b))throw new _r("not a string",Mi);const E=te.get(b);te.delete(b),t._sqlite3_free(E.offset)},e.str_value=function(b){if(!te.has(b))throw new _r("not a string",Mi);return te.get(b).offset},e.user_data=function(b){return t.getFunctionUserData(b)},e.value=function(b){const E=e.value_type(b);switch(E){case ld:return e.value_blob(b);case ud:return e.value_double(b);case ad:const N=e.value_int(b),I=t.getTempRet0();return g(N,I);case fd:return null;case cd:return e.value_text(b);default:throw new _r("unknown type",E)}},e.value_blob=function(){const b="sqlite3_value_blob",E=t.cwrap(b,...Ee("n:n"));return function(N){const I=e.value_bytes(N),M=E(N);return t.HEAPU8.subarray(M,M+I)}}(),e.value_bytes=function(){const b="sqlite3_value_bytes",E=t.cwrap(b,...Ee("n:n"));return function(N){return E(N)}}(),e.value_double=function(){const b="sqlite3_value_double",E=t.cwrap(b,...Ee("n:n"));return function(N){return E(N)}}(),e.value_int=function(){const b="sqlite3_value_int64",E=t.cwrap(b,...Ee("n:n"));return function(N){return E(N)}}(),e.value_int64=function(){const b="sqlite3_value_int64",E=t.cwrap(b,...Ee("n:n"));return function(N){const I=E(N),M=t.getTempRet0();return m(I,M)}}(),e.value_text=function(){const b="sqlite3_value_text",E=t.cwrap(b,...Ee("n:s"));return function(N){return E(N)}}(),e.value_type=function(){const b="sqlite3_value_type",E=t.cwrap(b,...Ee("n:n"));return function(N){return E(N)}}(),e.vfs_register=function(b,E){const N=t.registerVFS(b,E);return ae("sqlite3_vfs_register",N)};function ae(b,E,N=null,I=[je]){if(I.includes(E))return E;const M=N?t.ccall("sqlite3_errmsg","string",["number"],[N]):b;throw new _r(M,E)}return e}function Ee(t){const e=[],n=t.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const r=[];for(let a of n[1])switch(a){case"n":r.push("number");break;case"s":r.push("string");break}return e.push(r),e}var DN=(()=>{var t=import.meta.url;return function(e={}){var n;n||(n=typeof e<"u"?e:{});var r,a;n.ready=new Promise((s,u)=>{r=s,a=u});var c=Object.assign({},n),m="./this.program",g=(s,u)=>{throw u},v=typeof window=="object",d=typeof importScripts=="function",C="",R;(v||d)&&(d?C=self.location.href:typeof document<"u"&&document.currentScript&&(C=document.currentScript.src),t&&(C=t),C.indexOf("blob:")!==0?C=C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1):C="",d&&(R=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var G=n.print||console.log.bind(console),te=n.printErr||console.warn.bind(console);Object.assign(n,c),c=null,n.thisProgram&&(m=n.thisProgram),n.quit&&(g=n.quit);var ae;n.wasmBinary&&(ae=n.wasmBinary);var b=n.noExitRuntime||!0;typeof WebAssembly!="object"&&it("no native wasm support detected");var E,N=!1,I,M,V,Ne,re,ye,vt,Kt;function mn(){var s=E.buffer;n.HEAP8=M=new Int8Array(s),n.HEAP16=Ne=new Int16Array(s),n.HEAP32=re=new Int32Array(s),n.HEAPU8=V=new Uint8Array(s),n.HEAPU16=new Uint16Array(s),n.HEAPU32=ye=new Uint32Array(s),n.HEAPF32=vt=new Float32Array(s),n.HEAPF64=Kt=new Float64Array(s)}var Rn=[],yn=[],tt=[],tn=[],nn=0;function ft(){var s=n.preRun.shift();Rn.unshift(s)}var pe=0,qe=null;function it(s){throw n.onAbort&&n.onAbort(s),s="Aborted("+s+")",te(s),N=!0,I=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),a(s),s}function de(s){return s.startsWith("data:application/octet-stream;base64,")}var Ae;if(n.locateFile){if(Ae="wa-sqlite-async.wasm",!de(Ae)){var Tt=Ae;Ae=n.locateFile?n.locateFile(Tt,C):C+Tt}}else Ae=new URL(""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,self.location).href;function br(s){try{if(s==Ae&&ae)return new Uint8Array(ae);if(R)return R(s);throw"both async and sync fetching of the wasm failed"}catch(u){it(u)}}function ps(s){return ae||!v&&!d||typeof fetch!="function"?Promise.resolve().then(()=>br(s)):fetch(s,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+s+"'";return u.arrayBuffer()}).catch(()=>br(s))}function wn(s,u,f){return ps(s).then(y=>WebAssembly.instantiate(y,u)).then(y=>y).then(f,y=>{te("failed to asynchronously prepare wasm: "+y),it(y)})}function rn(s,u){var f=Ae;return ae||typeof WebAssembly.instantiateStreaming!="function"||de(f)||typeof fetch!="function"?wn(f,s,u):fetch(f,{credentials:"same-origin"}).then(y=>WebAssembly.instantiateStreaming(y,s).then(u,function(_){return te("wasm streaming compile failed: "+_),te("falling back to ArrayBuffer instantiation"),wn(f,s,u)}))}var fe,Me;function Dn(s){this.name="ExitStatus",this.message="Program terminated with exit("+s+")",this.status=s}function Bt(s){for(;0<s.length;)s.shift()(n)}function ze(s,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return M[s>>0];case"i8":return M[s>>0];case"i16":return Ne[s>>1];case"i32":return re[s>>2];case"i64":return re[s>>2];case"float":return vt[s>>2];case"double":return Kt[s>>3];case"*":return ye[s>>2];default:it("invalid type for getValue: "+u)}}function x(s,u,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":M[s>>0]=u;break;case"i8":M[s>>0]=u;break;case"i16":Ne[s>>1]=u;break;case"i32":re[s>>2]=u;break;case"i64":Me=[u>>>0,(fe=u,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[s>>2]=Me[0],re[s+4>>2]=Me[1];break;case"float":vt[s>>2]=u;break;case"double":Kt[s>>3]=u;break;case"*":ye[s>>2]=u;break;default:it("invalid type for setValue: "+f)}}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function k(s,u,f){var y=u+f;for(f=u;s[f]&&!(f>=y);)++f;if(16<f-u&&s.buffer&&q)return q.decode(s.subarray(u,f));for(y="";u<f;){var _=s[u++];if(_&128){var A=s[u++]&63;if((_&224)==192)y+=String.fromCharCode((_&31)<<6|A);else{var S=s[u++]&63;_=(_&240)==224?(_&15)<<12|A<<6|S:(_&7)<<18|A<<12|S<<6|s[u++]&63,65536>_?y+=String.fromCharCode(_):(_-=65536,y+=String.fromCharCode(55296|_>>10,56320|_&1023))}}else y+=String.fromCharCode(_)}return y}function L(s,u){return s?k(V,s,u):""}var K=(s,u)=>{for(var f=0,y=s.length-1;0<=y;y--){var _=s[y];_==="."?s.splice(y,1):_===".."?(s.splice(y,1),f++):f&&(s.splice(y,1),f--)}if(u)for(;f;f--)s.unshift("..");return s},Z=s=>{var u=s.charAt(0)==="/",f=s.substr(-1)==="/";return(s=K(s.split("/").filter(y=>!!y),!u).join("/"))||u||(s="."),s&&f&&(s+="/"),(u?"/":"")+s},U=s=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=u[0],u=u[1],!s&&!u?".":(u&&(u=u.substr(0,u.length-1)),s+u)},z=s=>{if(s==="/")return"/";s=Z(s),s=s.replace(/\/$/,"");var u=s.lastIndexOf("/");return u===-1?s:s.substr(u+1)};function ne(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return s=>crypto.getRandomValues(s);it("initRandomDevice")}function H(s){return(H=ne())(s)}function ce(){for(var s="",u=!1,f=arguments.length-1;-1<=f&&!u;f--){if(u=0<=f?arguments[f]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";s=u+"/"+s,u=u.charAt(0)==="/"}return s=K(s.split("/").filter(y=>!!y),!u).join("/"),(u?"/":"")+s||"."}function oe(s){for(var u=0,f=0;f<s.length;++f){var y=s.charCodeAt(f);127>=y?u++:2047>=y?u+=2:55296<=y&&57343>=y?(u+=4,++f):u+=3}return u}function ue(s,u,f,y){if(!(0<y))return 0;var _=f;y=f+y-1;for(var A=0;A<s.length;++A){var S=s.charCodeAt(A);if(55296<=S&&57343>=S){var Q=s.charCodeAt(++A);S=65536+((S&1023)<<10)|Q&1023}if(127>=S){if(f>=y)break;u[f++]=S}else{if(2047>=S){if(f+1>=y)break;u[f++]=192|S>>6}else{if(65535>=S){if(f+2>=y)break;u[f++]=224|S>>12}else{if(f+3>=y)break;u[f++]=240|S>>18,u[f++]=128|S>>12&63}u[f++]=128|S>>6&63}u[f++]=128|S&63}}return u[f]=0,f-_}var me=[];function xe(s,u){me[s]={input:[],Rb:[],bc:u},gs(s,$e)}var $e={open:function(s){var u=me[s.node.ec];if(!u)throw new ee(43);s.Sb=u,s.seekable=!1},close:function(s){s.Sb.bc.ic(s.Sb)},ic:function(s){s.Sb.bc.ic(s.Sb)},read:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.zc)throw new ee(60);for(var _=0,A=0;A<y;A++){try{var S=s.Sb.bc.zc(s.Sb)}catch{throw new ee(29)}if(S===void 0&&_===0)throw new ee(6);if(S==null)break;_++,u[f+A]=S}return _&&(s.node.timestamp=Date.now()),_},write:function(s,u,f,y){if(!s.Sb||!s.Sb.bc.sc)throw new ee(60);try{for(var _=0;_<y;_++)s.Sb.bc.sc(s.Sb,u[f+_])}catch{throw new ee(29)}return y&&(s.node.timestamp=Date.now()),_}},Re={zc:function(s){if(!s.input.length){var u=null;if(typeof window<"u"&&typeof window.prompt=="function"?(u=window.prompt("Input: "),u!==null&&(u+=`
`)):typeof readline=="function"&&(u=readline(),u!==null&&(u+=`
`)),!u)return null;var f=Array(oe(u)+1);u=ue(u,f,0,f.length),f.length=u,s.input=f}return s.input.shift()},sc:function(s,u){u===null||u===10?(G(k(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(G(k(s.Rb,0)),s.Rb=[])}},nt={sc:function(s,u){u===null||u===10?(te(k(s.Rb,0)),s.Rb=[]):u!=0&&s.Rb.push(u)},ic:function(s){s.Rb&&0<s.Rb.length&&(te(k(s.Rb,0)),s.Rb=[])}},he={Vb:null,Ub:function(){return he.createNode(null,"/",16895,0)},createNode:function(s,u,f,y){if((f&61440)===24576||(f&61440)===4096)throw new ee(63);return he.Vb||(he.Vb={dir:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,cc:he.Cb.cc,jc:he.Cb.jc,Cc:he.Cb.Cc,oc:he.Cb.oc,mc:he.Cb.mc,Bc:he.Cb.Bc,nc:he.Cb.nc},stream:{Zb:he.Mb.Zb}},file:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:{Zb:he.Mb.Zb,read:he.Mb.read,write:he.Mb.write,vc:he.Mb.vc,kc:he.Mb.kc,lc:he.Mb.lc}},link:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb,fc:he.Cb.fc},stream:{}},wc:{node:{Tb:he.Cb.Tb,Qb:he.Cb.Qb},stream:Dr}}),f=At(s,u,f,y),(f.mode&61440)===16384?(f.Cb=he.Vb.dir.node,f.Mb=he.Vb.dir.stream,f.Nb={}):(f.mode&61440)===32768?(f.Cb=he.Vb.file.node,f.Mb=he.Vb.file.stream,f.Pb=0,f.Nb=null):(f.mode&61440)===40960?(f.Cb=he.Vb.link.node,f.Mb=he.Vb.link.stream):(f.mode&61440)===8192&&(f.Cb=he.Vb.wc.node,f.Mb=he.Vb.wc.stream),f.timestamp=Date.now(),s&&(s.Nb[u]=f,s.timestamp=f.timestamp),f},Uc:function(s){return s.Nb?s.Nb.subarray?s.Nb.subarray(0,s.Pb):new Uint8Array(s.Nb):new Uint8Array(0)},xc:function(s,u){var f=s.Nb?s.Nb.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),f!=0&&(u=Math.max(u,256)),f=s.Nb,s.Nb=new Uint8Array(u),0<s.Pb&&s.Nb.set(f.subarray(0,s.Pb),0))},Qc:function(s,u){if(s.Pb!=u)if(u==0)s.Nb=null,s.Pb=0;else{var f=s.Nb;s.Nb=new Uint8Array(u),f&&s.Nb.set(f.subarray(0,Math.min(u,s.Pb))),s.Pb=u}},Cb:{Tb:function(s){var u={};return u.Ic=(s.mode&61440)===8192?s.id:1,u.qc=s.id,u.mode=s.mode,u.Oc=1,u.uid=0,u.Lc=0,u.ec=s.ec,(s.mode&61440)===16384?u.size=4096:(s.mode&61440)===32768?u.size=s.Pb:(s.mode&61440)===40960?u.size=s.link.length:u.size=0,u.Ec=new Date(s.timestamp),u.Nc=new Date(s.timestamp),u.Hc=new Date(s.timestamp),u.Fc=4096,u.Gc=Math.ceil(u.size/u.Fc),u},Qb:function(s,u){u.mode!==void 0&&(s.mode=u.mode),u.timestamp!==void 0&&(s.timestamp=u.timestamp),u.size!==void 0&&he.Qc(s,u.size)},cc:function(){throw Cn[44]},jc:function(s,u,f,y){return he.createNode(s,u,f,y)},Cc:function(s,u,f){if((s.mode&61440)===16384){try{var y=Pn(u,f)}catch{}if(y)for(var _ in y.Nb)throw new ee(55)}delete s.parent.Nb[s.name],s.parent.timestamp=Date.now(),s.name=f,u.Nb[f]=s,u.timestamp=s.parent.timestamp,s.parent=u},oc:function(s,u){delete s.Nb[u],s.timestamp=Date.now()},mc:function(s,u){var f=Pn(s,u),y;for(y in f.Nb)throw new ee(55);delete s.Nb[u],s.timestamp=Date.now()},Bc:function(s){var u=[".",".."],f;for(f in s.Nb)s.Nb.hasOwnProperty(f)&&u.push(f);return u},nc:function(s,u,f){return s=he.createNode(s,u,41471,0),s.link=f,s},fc:function(s){if((s.mode&61440)!==40960)throw new ee(28);return s.link}},Mb:{read:function(s,u,f,y,_){var A=s.node.Nb;if(_>=s.node.Pb)return 0;if(s=Math.min(s.node.Pb-_,y),8<s&&A.subarray)u.set(A.subarray(_,_+s),f);else for(y=0;y<s;y++)u[f+y]=A[_+y];return s},write:function(s,u,f,y,_,A){if(u.buffer===M.buffer&&(A=!1),!y)return 0;if(s=s.node,s.timestamp=Date.now(),u.subarray&&(!s.Nb||s.Nb.subarray)){if(A)return s.Nb=u.subarray(f,f+y),s.Pb=y;if(s.Pb===0&&_===0)return s.Nb=u.slice(f,f+y),s.Pb=y;if(_+y<=s.Pb)return s.Nb.set(u.subarray(f,f+y),_),y}if(he.xc(s,_+y),s.Nb.subarray&&u.subarray)s.Nb.set(u.subarray(f,f+y),_);else for(A=0;A<y;A++)s.Nb[_+A]=u[f+A];return s.Pb=Math.max(s.Pb,_+y),y},Zb:function(s,u,f){if(f===1?u+=s.position:f===2&&(s.node.mode&61440)===32768&&(u+=s.node.Pb),0>u)throw new ee(28);return u},vc:function(s,u,f){he.xc(s.node,u+f),s.node.Pb=Math.max(s.node.Pb,u+f)},kc:function(s,u,f,y,_){if((s.node.mode&61440)!==32768)throw new ee(43);if(s=s.node.Nb,_&2||s.buffer!==M.buffer){if((0<f||f+u<s.length)&&(s.subarray?s=s.subarray(f,f+u):s=Array.prototype.slice.call(s,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(_=Nu(65536,u))?(V.fill(0,_,_+u),u=_):u=0,!u)throw new ee(48);M.set(s,u)}else f=!1,u=s.byteOffset;return{Pc:u,Dc:f}},lc:function(s,u,f,y){return he.Mb.write(s,u,0,y,f,!1),0}}},gn=null,wi={},Ft=[],ms=1,le=null,St=!0,ee=null,Cn={},Ut=(s,u={})=>{if(s=ce(s),!s)return{path:"",node:null};if(u=Object.assign({yc:!0,tc:0},u),8<u.tc)throw new ee(32);s=s.split("/").filter(S=>!!S);for(var f=gn,y="/",_=0;_<s.length;_++){var A=_===s.length-1;if(A&&u.parent)break;if(f=Pn(f,s[_]),y=Z(y+"/"+s[_]),f.$b&&(!A||A&&u.yc)&&(f=f.$b.root),!A||u.Yb){for(A=0;(f.mode&61440)===40960;)if(f=Ni(y),y=ce(U(y),f),f=Ut(y,{tc:u.tc+1}).node,40<A++)throw new ee(32)}}return{path:y,node:f}},bn=s=>{for(var u;;){if(s===s.parent)return s=s.Ub.Ac,u?s[s.length-1]!=="/"?s+"/"+u:s+u:s;u=u?s.name+"/"+u:s.name,s=s.parent}},ys=(s,u)=>{for(var f=0,y=0;y<u.length;y++)f=(f<<5)-f+u.charCodeAt(y)|0;return(s+f>>>0)%le.length},$=s=>{var u=ys(s.parent.id,s.name);if(le[u]===s)le[u]=s.ac;else for(u=le[u];u;){if(u.ac===s){u.ac=s.ac;break}u=u.ac}},Pn=(s,u)=>{var f;if(f=(f=Nr(s,"x"))?f:s.Cb.cc?0:2)throw new ee(f,s);for(f=le[ys(s.id,u)];f;f=f.ac){var y=f.name;if(f.parent.id===s.id&&y===u)return f}return s.Cb.cc(s,u)},At=(s,u,f,y)=>(s=new wu(s,u,f,y),u=ys(s.parent.id,s.name),s.ac=le[u],le[u]=s),gi={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},ws=s=>{var u=["r","w","rw"][s&3];return s&512&&(u+="w"),u},Nr=(s,u)=>{if(St)return 0;if(!u.includes("r")||s.mode&292){if(u.includes("w")&&!(s.mode&146)||u.includes("x")&&!(s.mode&73))return 2}else return 2;return 0},er=(s,u)=>{try{return Pn(s,u),20}catch{}return Nr(s,"wx")},Do=(s,u,f)=>{try{var y=Pn(s,u)}catch(_){return _.Ob}if(s=Nr(s,"wx"))return s;if(f){if((y.mode&61440)!==16384)return 54;if(y===y.parent||bn(y)==="/")return 10}else if((y.mode&61440)===16384)return 31;return 0},yl=(s=0)=>{for(;4096>=s;s++)if(!Ft[s])return s;throw new ee(33)},Po=(s,u)=>(Mr||(Mr=function(){this.hc={}},Mr.prototype={},Object.defineProperties(Mr.prototype,{object:{get:function(){return this.node},set:function(f){this.node=f}},flags:{get:function(){return this.hc.flags},set:function(f){this.hc.flags=f}},position:{get:function(){return this.hc.position},set:function(f){this.hc.position=f}}})),s=Object.assign(new Mr,s),u=yl(u),s.Wb=u,Ft[u]=s),Dr={open:s=>{s.Mb=wi[s.node.ec].Mb,s.Mb.open&&s.Mb.open(s)},Zb:()=>{throw new ee(70)}},gs=(s,u)=>{wi[s]={Mb:u}},Lo=(s,u)=>{var f=u==="/",y=!u;if(f&&gn)throw new ee(10);if(!f&&!y){var _=Ut(u,{yc:!1});if(u=_.path,_=_.node,_.$b)throw new ee(10);if((_.mode&61440)!==16384)throw new ee(54)}u={type:s,Wc:{},Ac:u,Mc:[]},s=s.Ub(u),s.Ub=u,u.root=s,f?gn=s:_&&(_.$b=u,_.Ub&&_.Ub.Mc.push(u))},Mo=(s,u,f)=>{var y=Ut(s,{parent:!0}).node;if(s=z(s),!s||s==="."||s==="..")throw new ee(28);var _=er(y,s);if(_)throw new ee(_);if(!y.Cb.jc)throw new ee(63);return y.Cb.jc(y,s,u,f)},Nn=(s,u)=>Mo(s,(u!==void 0?u:511)&1023|16384,0),bs=(s,u,f)=>{typeof f>"u"&&(f=u,u=438),Mo(s,u|8192,f)},bi=(s,u)=>{if(!ce(s))throw new ee(44);var f=Ut(u,{parent:!0}).node;if(!f)throw new ee(44);u=z(u);var y=er(f,u);if(y)throw new ee(y);if(!f.Cb.nc)throw new ee(63);f.Cb.nc(f,u,s)},Bo=s=>{var u=Ut(s,{parent:!0}).node;s=z(s);var f=Pn(u,s),y=Do(u,s,!0);if(y)throw new ee(y);if(!u.Cb.mc)throw new ee(63);if(f.$b)throw new ee(10);u.Cb.mc(u,s),$(f)},Ni=s=>{if(s=Ut(s).node,!s)throw new ee(44);if(!s.Cb.fc)throw new ee(28);return ce(bn(s.parent),s.Cb.fc(s))},Jt=(s,u)=>{if(s=Ut(s,{Yb:!u}).node,!s)throw new ee(44);if(!s.Cb.Tb)throw new ee(63);return s.Cb.Tb(s)},vi=s=>Jt(s,!0),Ns=(s,u)=>{if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new ee(63);s.Cb.Qb(s,{mode:u&4095|s.mode&-4096,timestamp:Date.now()})},Fo=(s,u)=>{if(0>u)throw new ee(28);if(s=typeof s=="string"?Ut(s,{Yb:!0}).node:s,!s.Cb.Qb)throw new ee(63);if((s.mode&61440)===16384)throw new ee(31);if((s.mode&61440)!==32768)throw new ee(28);var f=Nr(s,"w");if(f)throw new ee(f);s.Cb.Qb(s,{size:u,timestamp:Date.now()})},_i=(s,u,f)=>{if(s==="")throw new ee(44);if(typeof u=="string"){var y=gi[u];if(typeof y>"u")throw Error("Unknown file open mode: "+u);u=y}if(f=u&64?(typeof f>"u"?438:f)&4095|32768:0,typeof s=="object")var _=s;else{s=Z(s);try{_=Ut(s,{Yb:!(u&131072)}).node}catch{}}if(y=!1,u&64)if(_){if(u&128)throw new ee(20)}else _=Mo(s,f,0),y=!0;if(!_)throw new ee(44);if((_.mode&61440)===8192&&(u&=-513),u&65536&&(_.mode&61440)!==16384)throw new ee(54);if(!y&&(f=_?(_.mode&61440)===40960?32:(_.mode&61440)===16384&&(ws(u)!=="r"||u&512)?31:Nr(_,ws(u)):44))throw new ee(f);return u&512&&!y&&Fo(_,0),u&=-131713,_=Po({node:_,path:bn(_),flags:u,seekable:!0,position:0,Mb:_.Mb,Tc:[],error:!1}),_.Mb.open&&_.Mb.open(_),!n.logReadFiles||u&1||(xi||(xi={}),s in xi||(xi[s]=1)),_},Uo=(s,u,f)=>{if(s.Wb===null)throw new ee(8);if(!s.seekable||!s.Mb.Zb)throw new ee(70);if(f!=0&&f!=1&&f!=2)throw new ee(28);s.position=s.Mb.Zb(s,u,f),s.Tc=[]},Pr=()=>{ee||(ee=function(s,u){this.name="ErrnoError",this.node=u,this.Rc=function(f){this.Ob=f},this.Rc(s),this.message="FS error"},ee.prototype=Error(),ee.prototype.constructor=ee,[44].forEach(s=>{Cn[s]=new ee(s),Cn[s].stack="<generic error, no stack>"}))},$o,vs=(s,u)=>{var f=0;return s&&(f|=365),u&&(f|=146),f},Lr=(s,u,f)=>{s=Z("/dev/"+s);var y=vs(!!u,!!f);tr||(tr=64);var _=tr++<<8|0;gs(_,{open:A=>{A.seekable=!1},close:()=>{f&&f.buffer&&f.buffer.length&&f(10)},read:(A,S,Q,P)=>{for(var B=0,ie=0;ie<P;ie++){try{var Y=u()}catch{throw new ee(29)}if(Y===void 0&&B===0)throw new ee(6);if(Y==null)break;B++,S[Q+ie]=Y}return B&&(A.node.timestamp=Date.now()),B},write:(A,S,Q,P)=>{for(var B=0;B<P;B++)try{f(S[Q+B])}catch{throw new ee(29)}return P&&(A.node.timestamp=Date.now()),B}}),bs(s,y,_)},tr,Qe={},Mr,xi;function nr(s,u,f){if(u.charAt(0)==="/")return u;if(s=s===-100?"/":sn(s).path,u.length==0){if(!f)throw new ee(44);return s}return Z(s+"/"+u)}function _s(s,u,f){try{var y=s(u)}catch(A){if(A&&A.node&&Z(u)!==Z(bn(A.node)))return-54;throw A}re[f>>2]=y.Ic,re[f+8>>2]=y.qc,re[f+12>>2]=y.mode,ye[f+16>>2]=y.Oc,re[f+20>>2]=y.uid,re[f+24>>2]=y.Lc,re[f+28>>2]=y.ec,Me=[y.size>>>0,(fe=y.size,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[f+40>>2]=Me[0],re[f+44>>2]=Me[1],re[f+48>>2]=4096,re[f+52>>2]=y.Gc,s=y.Ec.getTime(),u=y.Nc.getTime();var _=y.Hc.getTime();return Me=[Math.floor(s/1e3)>>>0,(fe=Math.floor(s/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[f+56>>2]=Me[0],re[f+60>>2]=Me[1],ye[f+64>>2]=s%1e3*1e3,Me=[Math.floor(u/1e3)>>>0,(fe=Math.floor(u/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[f+72>>2]=Me[0],re[f+76>>2]=Me[1],ye[f+80>>2]=u%1e3*1e3,Me=[Math.floor(_/1e3)>>>0,(fe=Math.floor(_/1e3),1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[f+88>>2]=Me[0],re[f+92>>2]=Me[1],ye[f+96>>2]=_%1e3*1e3,Me=[y.qc>>>0,(fe=y.qc,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[f+104>>2]=Me[0],re[f+108>>2]=Me[1],0}var Ei=void 0;function Oi(){return Ei+=4,re[Ei-4>>2]}function sn(s){if(s=Ft[s],!s)throw new ee(8);return s}function In(s,u,f){return ue(s,V,u,f)}function qi(s){return ye[s>>2]+4294967296*re[s+4>>2]}var Ke=[0,31,60,91,121,152,182,213,244,274,305,335],Ci=[0,31,59,90,120,151,181,212,243,273,304,334];function Ii(s){var u=oe(s)+1,f=ea(u);return f&&In(s,f,u),f}var Ln={};function Ti(){if(!Br){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},u;for(u in Ln)Ln[u]===void 0?delete s[u]:s[u]=Ln[u];var f=[];for(u in s)f.push(u+"="+s[u]);Br=f}return Br}var Br;function Si(){}function on(){}function xs(){}function Qo(){}function au(){}function Es(){}function jo(){}function Os(){}function zo(){}function qs(){}function Mn(){}function Cs(){}function Is(){}function Fr(){}function Ts(){}function uu(){}function Vo(){}function cu(){}function Ho(){}function Ai(){}function ki(){}function Ko(){}function Ur(){}function $r(){}function Bn(){}function Wi(){}function Jo(){}function o(){}function l(){}function h(){}function w(){}function O(){}function D(){}function F(){}function we(){}function Pe(){}function ke(){}function st(){}function Tn(){}function Go(s){I=s,b||0<nn||(n.onExit&&n.onExit(s),N=!0),g(s,new Dn(s))}function Yo(s){s instanceof Dn||s=="unwind"||g(1,s)}function Ri(s){try{s()}catch(u){it(u)}}function wl(s){var u={},f;for(f in s)(function(y){var _=s[y];u[y]=typeof _=="function"?function(){Ss.push(y);try{return _.apply(null,arguments)}finally{N||(Ss.pop()===y||it(),Sn&&Fn===1&&Ss.length===0&&(Fn=0,Ri(Eu),typeof Fibers<"u"&&Fibers.Xc()))}}:_})(f);return u}var Fn=0,Sn=null,lu=0,Ss=[],fu={},hu={},gl=0,Xo=null,bl=[];function du(){return new Promise((s,u)=>{Xo={resolve:s,reject:u}})}function Nl(){var s=ea(12300),u=s+12;re[s>>2]=u,re[s+4>>2]=u+12288,u=Ss[0];var f=fu[u];return f===void 0&&(f=gl++,fu[u]=f,hu[f]=u),re[s+8>>2]=f,s}function pu(s){if(!N){if(Fn===0){var u=!1,f=!1;s((y=0)=>{if(!N&&(lu=y,u=!0,f)){Fn=2,Ri(()=>Di(Sn)),y=!1;try{var _=(0,n.asm[hu[re[Sn+8>>2]]])()}catch(Q){_=Q,y=!0}var A=!1;if(!Sn){var S=Xo;S&&(Xo=null,(y?S.reject:S.resolve)(_),A=!0)}if(y&&!A)throw _}}),f=!0,u||(Fn=1,Sn=Nl(),Ri(()=>xu(Sn)))}else Fn===2?(Fn=0,Ri(ra),gu(Sn),Sn=null,bl.forEach(y=>{if(!N)try{if(y(),!(b||0<nn))try{I=y=I,Go(y)}catch(_){Yo(_)}}catch(_){Yo(_)}})):it("invalid state: "+Fn);return lu}}function mu(s){return pu(u=>{s().then(u)})}var yu={};function An(s,u,f,y,_){function A(Y){return--nn,P!==0&&ta(P),u==="string"?L(Y):u==="boolean"?!!Y:Y}var S={string:Y=>{var se=0;if(Y!=null&&Y!==0){se=oe(Y)+1;var Ie=na(se);In(Y,Ie,se),se=Ie}return se},array:Y=>{var se=na(Y.length);return M.set(Y,se),se}};s=n["_"+s];var Q=[],P=0;if(y)for(var B=0;B<y.length;B++){var ie=S[f[B]];ie?(P===0&&(P=_u()),Q[B]=ie(y[B])):Q[B]=y[B]}return f=Sn,y=s.apply(null,Q),nn+=1,_=_&&_.async,Sn!=f?du().then(A):(y=A(y),_?Promise.resolve(y):y)}function wu(s,u,f,y){s||(s=this),this.parent=s,this.Ub=s.Ub,this.$b=null,this.id=ms++,this.name=u,this.mode=f,this.Cb={},this.Mb={},this.ec=y}Object.defineProperties(wu.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(s){s?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(s){s?this.mode|=146:this.mode&=-147}}}),Pr(),le=Array(4096),Lo(he,"/"),Nn("/tmp"),Nn("/home"),Nn("/home/web_user"),(()=>{Nn("/dev"),gs(259,{read:()=>0,write:(y,_,A,S)=>S}),bs("/dev/null",259),xe(1280,Re),xe(1536,nt),bs("/dev/tty",1280),bs("/dev/tty1",1536);var s=new Uint8Array(1024),u=0,f=()=>(u===0&&(u=H(s).byteLength),s[--u]);Lr("random",f),Lr("urandom",f),Nn("/dev/shm"),Nn("/dev/shm/tmp")})(),(()=>{Nn("/proc");var s=Nn("/proc/self");Nn("/proc/self/fd"),Lo({Ub:()=>{var u=At(s,"fd",16895,73);return u.Cb={cc:(f,y)=>{var _=Ft[+y];if(!_)throw new ee(8);return f={parent:null,Ub:{Ac:"fake"},Cb:{fc:()=>_.path}},f.parent=f}},u}},"/proc/self/fd")})(),function(){const s=new Map;n.setAuthorizer=function(u,f,y){return f?s.set(u,{f,uc:y}):s.delete(u),An("set_authorizer","number",["number"],[u])},Si=function(u,f,y,_,A,S){if(s.has(u)){const{f:Q,uc:P}=s.get(u);return Q(P,f,y?L(y):null,_?L(_):null,A?L(A):null,S?L(S):null)}return 0}}(),function(){const s=new Map,u=new Map;n.createFunction=function(f,y,_,A,S,Q){const P=s.size;return s.set(P,{f:Q,Xb:S}),An("create_function","number","number string number number number number".split(" "),[f,y,_,A,P,0])},n.createAggregate=function(f,y,_,A,S,Q,P){const B=s.size;return s.set(B,{step:Q,Jc:P,Xb:S}),An("create_function","number","number string number number number number".split(" "),[f,y,_,A,B,1])},n.getFunctionUserData=function(f){return u.get(f)},xs=function(f,y,_,A){f=s.get(f),u.set(y,f.Xb),f.f(y,new Uint32Array(V.buffer,A,_)),u.delete(y)},au=function(f,y,_,A){f=s.get(f),u.set(y,f.Xb),f.step(y,new Uint32Array(V.buffer,A,_)),u.delete(y)},on=function(f,y){f=s.get(f),u.set(y,f.Xb),f.Jc(y),u.delete(y)}}(),function(){const s=new Map;n.progressHandler=function(u,f,y,_){return y?s.set(u,{f:y,uc:_}):s.delete(u),An("progress_handler",null,["number","number"],[u,f])},Qo=function(u){if(s.has(u)){const{f,uc:y}=s.get(u);return f(y)}return 0}}(),function(){function s(P,B){const ie=`get${P}`,Y=`set${P}`;return new Proxy(new DataView(V.buffer,B,P==="Int32"?4:8),{get(se,Ie){if(Ie===ie)return function(Je,Et){if(!Et)throw Error("must be little endian");return se[Ie](Je,Et)};if(Ie===Y)return function(Je,Et,yt){if(!yt)throw Error("must be little endian");return se[Ie](Je,Et,yt)};if(typeof Ie=="string"&&Ie.match(/^(get)|(set)/))throw Error("invalid type");return se[Ie]}})}const u=typeof yu=="object",f=new Map,y=new Map,_=new Map,A=u?new Set:null,S=u?new Set:null,Q=new Map;Ko=function(P,B,ie,Y){Q.set(L(P),{size:B,dc:Array.from(new Uint32Array(V.buffer,Y,ie))})},n.createModule=function(P,B,ie,Y){u&&(ie.handleAsync=mu);const se=f.size;return f.set(se,{module:ie,Xb:Y}),Y=0,ie.xCreate&&(Y|=1),ie.xConnect&&(Y|=2),ie.xBestIndex&&(Y|=4),ie.xDisconnect&&(Y|=8),ie.xDestroy&&(Y|=16),ie.xOpen&&(Y|=32),ie.xClose&&(Y|=64),ie.xFilter&&(Y|=128),ie.xNext&&(Y|=256),ie.xEof&&(Y|=512),ie.xColumn&&(Y|=1024),ie.xRowid&&(Y|=2048),ie.xUpdate&&(Y|=4096),ie.xBegin&&(Y|=8192),ie.xSync&&(Y|=16384),ie.xCommit&&(Y|=32768),ie.xRollback&&(Y|=65536),ie.xFindFunction&&(Y|=131072),ie.xRename&&(Y|=262144),An("create_module","number",["number","string","number","number"],[P,B,se,Y])},Cs=function(P,B,ie,Y,se,Ie){if(B=f.get(B),y.set(se,B),u){A.delete(se);for(const Je of A)y.delete(Je)}return Y=Array.from(new Uint32Array(V.buffer,Y,ie)).map(Je=>L(Je)),B.module.xCreate(P,B.Xb,Y,se,s("Int32",Ie))},Mn=function(P,B,ie,Y,se,Ie){if(B=f.get(B),y.set(se,B),u){A.delete(se);for(const Je of A)y.delete(Je)}return Y=Array.from(new Uint32Array(V.buffer,Y,ie)).map(Je=>L(Je)),B.module.xConnect(P,B.Xb,Y,se,s("Int32",Ie))},jo=function(P,B){var ie=y.get(P),Y=Q.get("sqlite3_index_info").dc;const se={};se.nConstraint=ze(B+Y[0],"i32"),se.aConstraint=[];for(var Ie=ze(B+Y[1],"*"),Je=Q.get("sqlite3_index_constraint").size,Et=0;Et<se.nConstraint;++Et){var yt=se.aConstraint,an=yt.push,kt=Ie+Et*Je,ks=Q.get("sqlite3_index_constraint").dc,Qr={};Qr.iColumn=ze(kt+ks[0],"i32"),Qr.op=ze(kt+ks[1],"i8"),Qr.usable=!!ze(kt+ks[2],"i8"),an.call(yt,Qr)}for(se.nOrderBy=ze(B+Y[2],"i32"),se.aOrderBy=[],Ie=ze(B+Y[3],"*"),Je=Q.get("sqlite3_index_orderby").size,Et=0;Et<se.nOrderBy;++Et)yt=se.aOrderBy,an=yt.push,kt=Ie+Et*Je,ks=Q.get("sqlite3_index_orderby").dc,Qr={},Qr.iColumn=ze(kt+ks[0],"i32"),Qr.desc=!!ze(kt+ks[1],"i8"),an.call(yt,Qr);for(se.aConstraintUsage=[],Ie=0;Ie<se.nConstraint;++Ie)se.aConstraintUsage.push({argvIndex:0,omit:!1});for(se.idxNum=ze(B+Y[5],"i32"),se.idxStr=null,se.orderByConsumed=!!ze(B+Y[8],"i8"),se.estimatedCost=ze(B+Y[9],"double"),se.estimatedRows=ze(B+Y[10],"i64"),se.idxFlags=ze(B+Y[11],"i32"),se.colUsed=ze(B+Y[12],"i64"),P=ie.module.xBestIndex(P,se),ie=Q.get("sqlite3_index_info").dc,Y=ze(B+ie[4],"*"),Ie=Q.get("sqlite3_index_constraint_usage").size,an=0;an<se.nConstraint;++an)Je=Y+an*Ie,yt=se.aConstraintUsage[an],kt=Q.get("sqlite3_index_constraint_usage").dc,x(Je+kt[0],yt.argvIndex,"i32"),x(Je+kt[1],yt.omit?1:0,"i8");return x(B+ie[5],se.idxNum,"i32"),typeof se.idxStr=="string"&&(Y=oe(se.idxStr),Ie=An("sqlite3_malloc","number",["number"],[Y+1]),In(se.idxStr,Ie,Y+1),x(B+ie[6],Ie,"*"),x(B+ie[7],1,"i32")),x(B+ie[8],se.orderByConsumed,"i32"),x(B+ie[9],se.estimatedCost,"double"),x(B+ie[10],se.estimatedRows,"i64"),x(B+ie[11],se.idxFlags,"i32"),P},Fr=function(P){const B=y.get(P);return u?A.add(P):y.delete(P),B.module.xDisconnect(P)},Is=function(P){const B=y.get(P);return u?A.add(P):y.delete(P),B.module.xDestroy(P)},cu=function(P,B){const ie=y.get(P);if(_.set(B,ie),u){S.delete(B);for(const Y of S)_.delete(Y)}return ie.module.xOpen(P,B)},Os=function(P){const B=_.get(P);return u?S.add(P):_.delete(P),B.module.xClose(P)},Ts=function(P){return _.get(P).module.xEof(P)?1:0},uu=function(P,B,ie,Y,se){const Ie=_.get(P);return ie=ie?L(ie):null,se=new Uint32Array(V.buffer,se,Y),Ie.module.xFilter(P,B,ie,se)},Vo=function(P){return _.get(P).module.xNext(P)},zo=function(P,B,ie){return _.get(P).module.xColumn(P,B,ie)},ki=function(P,B){return _.get(P).module.xRowid(P,s("BigInt64",B))},$r=function(P,B,ie,Y){const se=y.get(P);return ie=new Uint32Array(V.buffer,ie,B),se.module.xUpdate(P,ie,s("BigInt64",Y))},Es=function(P){return y.get(P).module.xBegin(P)},Ur=function(P){return y.get(P).module.xSync(P)},qs=function(P){return y.get(P).module.xCommit(P)},Ai=function(P){return y.get(P).module.xRollback(P)},Ho=function(P,B){const ie=y.get(P);return B=L(B),ie.module.xRename(P,B)}}(),function(){function s(S,Q){const P=`get${S}`,B=`set${S}`;return new Proxy(new DataView(V.buffer,Q,S==="Int32"?4:8),{get(ie,Y){if(Y===P)return function(se,Ie){if(!Ie)throw Error("must be little endian");return ie[Y](se,Ie)};if(Y===B)return function(se,Ie,Je){if(!Je)throw Error("must be little endian");return ie[Y](se,Ie,Je)};if(typeof Y=="string"&&Y.match(/^(get)|(set)/))throw Error("invalid type");return ie[Y]}})}function u(S){return S>>=2,ye[S]+ye[S+1]*2**32}const f=typeof yu=="object",y=new Map,_=new Map;n.registerVFS=function(S,Q){if(An("sqlite3_vfs_find","number",["string"],[S.name]))throw Error(`VFS '${S.name}' already registered`);f&&(S.handleAsync=mu);var P=S.Vc??64;const B=n._malloc(4);return Q=An("register_vfs","number",["string","number","number","number"],[S.name,P,Q?1:0,B]),Q||(P=ze(B,"*"),y.set(P,S)),n._free(B),Q};const A=f?new Set:null;Jo=function(S){const Q=_.get(S);return f?A.add(S):_.delete(S),Q.xClose(S)},F=function(S,Q,P,B){return _.get(S).xRead(S,V.subarray(Q,Q+P),u(B))},Tn=function(S,Q,P,B){return _.get(S).xWrite(S,V.subarray(Q,Q+P),u(B))},ke=function(S,Q){return _.get(S).xTruncate(S,u(Q))},Pe=function(S,Q){return _.get(S).xSync(S,Q)},w=function(S,Q){const P=_.get(S);return Q=s("BigInt64",Q),P.xFileSize(S,Q)},O=function(S,Q){return _.get(S).xLock(S,Q)},st=function(S,Q){return _.get(S).xUnlock(S,Q)},Wi=function(S,Q){const P=_.get(S);return Q=s("Int32",Q),P.xCheckReservedLock(S,Q)},h=function(S,Q,P){const B=_.get(S);return P=new DataView(V.buffer,P),B.xFileControl(S,Q,P)},we=function(S){return _.get(S).xSectorSize(S)},l=function(S){return _.get(S).xDeviceCharacteristics(S)},D=function(S,Q,P,B,ie){if(S=y.get(S),_.set(P,S),f){A.delete(P);for(var Y of A)_.delete(Y)}if(Y=null,B&64){Y=1;const se=[];for(;Y;){const Ie=V[Q++];if(Ie)se.push(Ie);else switch(V[Q]||(Y=null),Y){case 1:se.push(63),Y=2;break;case 2:se.push(61),Y=3;break;case 3:se.push(38),Y=2}}Y=new TextDecoder().decode(new Uint8Array(se))}else Q&&(Y=L(Q));return ie=s("Int32",ie),S.xOpen(Y,P,B,ie)},o=function(S,Q,P){return y.get(S).xDelete(L(Q),P)},Bn=function(S,Q,P,B){return S=y.get(S),B=s("Int32",B),S.xAccess(L(Q),P,B)}}();var vl={a:function(s,u,f,y){it("Assertion failed: "+L(s)+", at: "+[u?L(u):"unknown filename",f,y?L(y):"unknown function"])},K:function(s,u){try{return s=L(s),Ns(s,u),0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},M:function(s,u,f){try{if(u=L(u),u=nr(s,u),f&-8)return-28;var y=Ut(u,{Yb:!0}).node;return y?(s="",f&4&&(s+="r"),f&2&&(s+="w"),f&1&&(s+="x"),s&&Nr(y,s)?-2:0):-44}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},L:function(s,u){try{var f=Ft[s];if(!f)throw new ee(8);return Ns(f.node,u),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},J:function(s){try{var u=Ft[s];if(!u)throw new ee(8);var f=u.node,y=typeof f=="string"?Ut(f,{Yb:!0}).node:f;if(!y.Cb.Qb)throw new ee(63);return y.Cb.Qb(y,{timestamp:Date.now()}),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},b:function(s,u,f){Ei=f;try{var y=sn(s);switch(u){case 0:var _=Oi();return 0>_?-28:Po(y,_).Wb;case 1:case 2:return 0;case 3:return y.flags;case 4:return _=Oi(),y.flags|=_,0;case 5:return _=Oi(),Ne[_+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return re[Zo()>>2]=28,-1;default:return-28}}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},I:function(s,u){try{var f=sn(s);return _s(Jt,f.path,u)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},j:function(s,u,f){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return-61;var y=Ft[s];if(!y)throw new ee(8);if(!(y.flags&2097155))throw new ee(28);return Fo(y.node,u),0}catch(_){if(typeof Qe>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},C:function(s,u){try{if(u===0)return-28;var f=oe("/")+1;return u<f?-68:(In("/",s,u),f)}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},F:function(s,u){try{return s=L(s),_s(vi,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},z:function(s,u,f){try{return u=L(u),u=nr(s,u),u=Z(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),Nn(u,f),0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return-y.Ob}},E:function(s,u,f,y){try{u=L(u);var _=y&256;return u=nr(s,u,y&4096),_s(_?vi:Jt,u,f)}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},u:function(s,u,f,y){Ei=y;try{u=L(u),u=nr(s,u);var _=y?Oi():0;return _i(u,f,_).Wb}catch(A){if(typeof Qe>"u"||A.name!=="ErrnoError")throw A;return-A.Ob}},s:function(s,u,f,y){try{if(u=L(u),u=nr(s,u),0>=y)return-28;var _=Ni(u),A=Math.min(y,oe(_)),S=M[f+A];return In(_,f,y+1),M[f+A]=S,A}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},r:function(s){try{return s=L(s),Bo(s),0}catch(u){if(typeof Qe>"u"||u.name!=="ErrnoError")throw u;return-u.Ob}},H:function(s,u){try{return s=L(s),_s(Jt,s,u)}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return-f.Ob}},o:function(s,u,f){try{if(u=L(u),u=nr(s,u),f===0){s=u;var y=Ut(s,{parent:!0}).node;if(!y)throw new ee(44);var _=z(s),A=Pn(y,_),S=Do(y,_,!1);if(S)throw new ee(S);if(!y.Cb.oc)throw new ee(63);if(A.$b)throw new ee(10);y.Cb.oc(y,_),$(A)}else f===512?Bo(u):it("Invalid flags passed to unlinkat");return 0}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},n:function(s,u,f){try{if(u=L(u),u=nr(s,u,!0),f){var y=qi(f),_=re[f+8>>2];A=1e3*y+_/1e6,f+=16,y=qi(f),_=re[f+8>>2],S=1e3*y+_/1e6}else var A=Date.now(),S=A;s=A;var Q=Ut(u,{Yb:!0}).node;return Q.Cb.Qb(Q,{timestamp:Math.max(s,S)}),0}catch(P){if(typeof Qe>"u"||P.name!=="ErrnoError")throw P;return-P.Ob}},y:function(s,u){s=new Date(1e3*qi(s)),re[u>>2]=s.getSeconds(),re[u+4>>2]=s.getMinutes(),re[u+8>>2]=s.getHours(),re[u+12>>2]=s.getDate(),re[u+16>>2]=s.getMonth(),re[u+20>>2]=s.getFullYear()-1900,re[u+24>>2]=s.getDay();var f=s.getFullYear();re[u+28>>2]=(f%4!==0||f%100===0&&f%400!==0?Ci:Ke)[s.getMonth()]+s.getDate()-1|0,re[u+36>>2]=-(60*s.getTimezoneOffset()),f=new Date(s.getFullYear(),6,1).getTimezoneOffset();var y=new Date(s.getFullYear(),0,1).getTimezoneOffset();re[u+32>>2]=(f!=y&&s.getTimezoneOffset()==Math.min(y,f))|0},w:function(s,u,f,y,_,A,S){try{var Q=sn(y);if(u&2&&!(f&2)&&(Q.flags&2097155)!==2)throw new ee(2);if((Q.flags&2097155)===1)throw new ee(2);if(!Q.Mb.kc)throw new ee(43);var P=Q.Mb.kc(Q,s,_,u,f),B=P.Pc;return re[A>>2]=P.Dc,ye[S>>2]=B,0}catch(ie){if(typeof Qe>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Ob}},x:function(s,u,f,y,_,A){try{var S=sn(_);if(f&2){if((S.node.mode&61440)!==32768)throw new ee(43);y&2||S.Mb.lc&&S.Mb.lc(S,V.slice(s,s+u),A,u,y)}}catch(Q){if(typeof Qe>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Ob}},p:function(s,u,f){function y(P){return(P=P.toTimeString().match(/\(([A-Za-z ]+)\)$/))?P[1]:"GMT"}var _=new Date().getFullYear(),A=new Date(_,0,1),S=new Date(_,6,1);_=A.getTimezoneOffset();var Q=S.getTimezoneOffset();ye[s>>2]=60*Math.max(_,Q),re[u>>2]=+(_!=Q),s=y(A),u=y(S),s=Ii(s),u=Ii(u),Q<_?(ye[f>>2]=s,ye[f+4>>2]=u):(ye[f>>2]=u,ye[f+4>>2]=s)},e:function(){return Date.now()},d:()=>performance.now(),l:function(s){var u=V.length;if(s>>>=0,2147483648<s)return!1;for(var f=1;4>=f;f*=2){var y=u*(1+.2/f);y=Math.min(y,s+100663296);var _=Math,A=_.min;y=Math.max(s,y),y+=(65536-y%65536)%65536;e:{var S=E.buffer;try{E.grow(A.call(_,2147483648,y)-S.byteLength+65535>>>16),mn();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},A:function(s,u){var f=0;return Ti().forEach(function(y,_){var A=u+f;for(_=ye[s+4*_>>2]=A,A=0;A<y.length;++A)M[_++>>0]=y.charCodeAt(A);M[_>>0]=0,f+=y.length+1}),0},B:function(s,u){var f=Ti();ye[s>>2]=f.length;var y=0;return f.forEach(function(_){y+=_.length+1}),ye[u>>2]=y,0},f:function(s){try{var u=sn(s);if(u.Wb===null)throw new ee(8);u.pc&&(u.pc=null);try{u.Mb.close&&u.Mb.close(u)}catch(f){throw f}finally{Ft[u.Wb]=null}return u.Wb=null,0}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},m:function(s,u){try{var f=sn(s);return M[u>>0]=f.Sb?2:(f.mode&61440)===16384?3:(f.mode&61440)===40960?7:4,Ne[u+2>>1]=0,Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[u+8>>2]=Me[0],re[u+12>>2]=Me[1],Me=[0,(fe=0,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[u+16>>2]=Me[0],re[u+20>>2]=Me[1],0}catch(y){if(typeof Qe>"u"||y.name!=="ErrnoError")throw y;return y.Ob}},t:function(s,u,f,y){try{e:{var _=sn(s);s=u;for(var A,S=u=0;S<f;S++){var Q=ye[s>>2],P=ye[s+4>>2];s+=8;var B=_,ie=Q,Y=P,se=A,Ie=M;if(0>Y||0>se)throw new ee(28);if(B.Wb===null)throw new ee(8);if((B.flags&2097155)===1)throw new ee(8);if((B.node.mode&61440)===16384)throw new ee(31);if(!B.Mb.read)throw new ee(28);var Je=typeof se<"u";if(!Je)se=B.position;else if(!B.seekable)throw new ee(70);var Et=B.Mb.read(B,Ie,ie,Y,se);Je||(B.position+=Et);var yt=Et;if(0>yt){var an=-1;break e}if(u+=yt,yt<P)break;typeof A<"u"&&(A+=yt)}an=u}return ye[y>>2]=an,0}catch(kt){if(typeof Qe>"u"||kt.name!=="ErrnoError")throw kt;return kt.Ob}},i:function(s,u,f,y,_){try{if(u=f+2097152>>>0<4194305-!!u?(u>>>0)+4294967296*f:NaN,isNaN(u))return 61;var A=sn(s);return Uo(A,u,y),Me=[A.position>>>0,(fe=A.position,1<=+Math.abs(fe)?0<fe?+Math.floor(fe/4294967296)>>>0:~~+Math.ceil((fe-+(~~fe>>>0))/4294967296)>>>0:0)],re[_>>2]=Me[0],re[_+4>>2]=Me[1],A.pc&&u===0&&y===0&&(A.pc=null),0}catch(S){if(typeof Qe>"u"||S.name!=="ErrnoError")throw S;return S.Ob}},D:function(s){try{var u=sn(s);return pu(function(f){var y=u.node.Ub;y.type.Sc?y.type.Sc(y,!1,function(_){f(_?function(){return 29}:0)}):f(0)})}catch(f){if(typeof Qe>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},q:function(s,u,f,y){try{e:{var _=sn(s);s=u;for(var A,S=u=0;S<f;S++){var Q=ye[s>>2],P=ye[s+4>>2];s+=8;var B=_,ie=Q,Y=P,se=A,Ie=M;if(0>Y||0>se)throw new ee(28);if(B.Wb===null)throw new ee(8);if(!(B.flags&2097155))throw new ee(8);if((B.node.mode&61440)===16384)throw new ee(31);if(!B.Mb.write)throw new ee(28);B.seekable&&B.flags&1024&&Uo(B,0,2);var Je=typeof se<"u";if(!Je)se=B.position;else if(!B.seekable)throw new ee(70);var Et=B.Mb.write(B,Ie,ie,Y,se,void 0);Je||(B.position+=Et);var yt=Et;if(0>yt){var an=-1;break e}u+=yt,typeof A<"u"&&(A+=yt)}an=u}return ye[y>>2]=an,0}catch(kt){if(typeof Qe>"u"||kt.name!=="ErrnoError")throw kt;return kt.Ob}},ra:Si,N:on,ga:xs,ca:Qo,Y:au,la:Es,G:jo,h:Os,oa:zo,ja:qs,ea:Mn,fa:Cs,k:Is,v:Fr,pa:Ts,g:uu,qa:Vo,da:cu,ha:Ho,ia:Ai,na:ki,c:Ko,ka:Ur,ma:$r,aa:Bn,V:Wi,$:Jo,ba:o,S:l,U:h,Z:w,X:O,R:D,Q:F,T:we,_:Pe,O:ke,W:st,P:Tn};(function(){function s(f){if(f=f.exports,f=wl(f),n.asm=f,E=n.asm.sa,mn(),yn.unshift(n.asm.ta),pe--,n.monitorRunDependencies&&n.monitorRunDependencies(pe),pe==0&&qe){var y=qe;qe=null,y()}return f}var u={a:vl};if(pe++,n.monitorRunDependencies&&n.monitorRunDependencies(pe),n.instantiateWasm)try{return n.instantiateWasm(u,s)}catch(f){te("Module.instantiateWasm callback failed with error: "+f),a(f)}return rn(u,function(f){s(f.instance)}).catch(a),{}})(),n._sqlite3_vfs_find=function(){return(n._sqlite3_vfs_find=n.asm.ua).apply(null,arguments)},n._sqlite3_malloc=function(){return(n._sqlite3_malloc=n.asm.va).apply(null,arguments)},n._sqlite3_free=function(){return(n._sqlite3_free=n.asm.wa).apply(null,arguments)},n._sqlite3_prepare_v2=function(){return(n._sqlite3_prepare_v2=n.asm.xa).apply(null,arguments)},n._sqlite3_step=function(){return(n._sqlite3_step=n.asm.ya).apply(null,arguments)},n._sqlite3_column_int64=function(){return(n._sqlite3_column_int64=n.asm.za).apply(null,arguments)},n._sqlite3_column_int=function(){return(n._sqlite3_column_int=n.asm.Aa).apply(null,arguments)},n._sqlite3_finalize=function(){return(n._sqlite3_finalize=n.asm.Ba).apply(null,arguments)},n._sqlite3_reset=function(){return(n._sqlite3_reset=n.asm.Ca).apply(null,arguments)},n._sqlite3_clear_bindings=function(){return(n._sqlite3_clear_bindings=n.asm.Da).apply(null,arguments)},n._sqlite3_value_blob=function(){return(n._sqlite3_value_blob=n.asm.Ea).apply(null,arguments)},n._sqlite3_value_text=function(){return(n._sqlite3_value_text=n.asm.Fa).apply(null,arguments)},n._sqlite3_value_bytes=function(){return(n._sqlite3_value_bytes=n.asm.Ga).apply(null,arguments)},n._sqlite3_value_double=function(){return(n._sqlite3_value_double=n.asm.Ha).apply(null,arguments)},n._sqlite3_value_int=function(){return(n._sqlite3_value_int=n.asm.Ia).apply(null,arguments)},n._sqlite3_value_int64=function(){return(n._sqlite3_value_int64=n.asm.Ja).apply(null,arguments)},n._sqlite3_value_type=function(){return(n._sqlite3_value_type=n.asm.Ka).apply(null,arguments)},n._sqlite3_result_blob=function(){return(n._sqlite3_result_blob=n.asm.La).apply(null,arguments)},n._sqlite3_result_double=function(){return(n._sqlite3_result_double=n.asm.Ma).apply(null,arguments)},n._sqlite3_result_error=function(){return(n._sqlite3_result_error=n.asm.Na).apply(null,arguments)},n._sqlite3_result_int=function(){return(n._sqlite3_result_int=n.asm.Oa).apply(null,arguments)},n._sqlite3_result_int64=function(){return(n._sqlite3_result_int64=n.asm.Pa).apply(null,arguments)},n._sqlite3_result_null=function(){return(n._sqlite3_result_null=n.asm.Qa).apply(null,arguments)},n._sqlite3_result_text=function(){return(n._sqlite3_result_text=n.asm.Ra).apply(null,arguments)},n._sqlite3_column_count=function(){return(n._sqlite3_column_count=n.asm.Sa).apply(null,arguments)},n._sqlite3_data_count=function(){return(n._sqlite3_data_count=n.asm.Ta).apply(null,arguments)},n._sqlite3_column_blob=function(){return(n._sqlite3_column_blob=n.asm.Ua).apply(null,arguments)},n._sqlite3_column_bytes=function(){return(n._sqlite3_column_bytes=n.asm.Va).apply(null,arguments)},n._sqlite3_column_double=function(){return(n._sqlite3_column_double=n.asm.Wa).apply(null,arguments)},n._sqlite3_column_text=function(){return(n._sqlite3_column_text=n.asm.Xa).apply(null,arguments)},n._sqlite3_column_type=function(){return(n._sqlite3_column_type=n.asm.Ya).apply(null,arguments)},n._sqlite3_column_name=function(){return(n._sqlite3_column_name=n.asm.Za).apply(null,arguments)},n._sqlite3_bind_blob=function(){return(n._sqlite3_bind_blob=n.asm._a).apply(null,arguments)},n._sqlite3_bind_double=function(){return(n._sqlite3_bind_double=n.asm.$a).apply(null,arguments)},n._sqlite3_bind_int=function(){return(n._sqlite3_bind_int=n.asm.ab).apply(null,arguments)},n._sqlite3_bind_int64=function(){return(n._sqlite3_bind_int64=n.asm.bb).apply(null,arguments)},n._sqlite3_bind_null=function(){return(n._sqlite3_bind_null=n.asm.cb).apply(null,arguments)},n._sqlite3_bind_text=function(){return(n._sqlite3_bind_text=n.asm.db).apply(null,arguments)},n._sqlite3_bind_parameter_count=function(){return(n._sqlite3_bind_parameter_count=n.asm.eb).apply(null,arguments)},n._sqlite3_bind_parameter_name=function(){return(n._sqlite3_bind_parameter_name=n.asm.fb).apply(null,arguments)},n._sqlite3_sql=function(){return(n._sqlite3_sql=n.asm.gb).apply(null,arguments)},n._sqlite3_exec=function(){return(n._sqlite3_exec=n.asm.hb).apply(null,arguments)},n._sqlite3_errmsg=function(){return(n._sqlite3_errmsg=n.asm.ib).apply(null,arguments)},n._sqlite3_declare_vtab=function(){return(n._sqlite3_declare_vtab=n.asm.jb).apply(null,arguments)},n._sqlite3_libversion=function(){return(n._sqlite3_libversion=n.asm.kb).apply(null,arguments)},n._sqlite3_libversion_number=function(){return(n._sqlite3_libversion_number=n.asm.lb).apply(null,arguments)},n._sqlite3_changes=function(){return(n._sqlite3_changes=n.asm.mb).apply(null,arguments)},n._sqlite3_close=function(){return(n._sqlite3_close=n.asm.nb).apply(null,arguments)},n._sqlite3_limit=function(){return(n._sqlite3_limit=n.asm.ob).apply(null,arguments)},n._sqlite3_open_v2=function(){return(n._sqlite3_open_v2=n.asm.pb).apply(null,arguments)},n._sqlite3_get_autocommit=function(){return(n._sqlite3_get_autocommit=n.asm.qb).apply(null,arguments)};function Zo(){return(Zo=n.asm.rb).apply(null,arguments)}var ea=n._malloc=function(){return(ea=n._malloc=n.asm.sb).apply(null,arguments)},gu=n._free=function(){return(gu=n._free=n.asm.tb).apply(null,arguments)};n._RegisterExtensionFunctions=function(){return(n._RegisterExtensionFunctions=n.asm.ub).apply(null,arguments)},n._set_authorizer=function(){return(n._set_authorizer=n.asm.vb).apply(null,arguments)},n._create_function=function(){return(n._create_function=n.asm.wb).apply(null,arguments)},n._create_module=function(){return(n._create_module=n.asm.xb).apply(null,arguments)},n._progress_handler=function(){return(n._progress_handler=n.asm.yb).apply(null,arguments)},n._register_vfs=function(){return(n._register_vfs=n.asm.zb).apply(null,arguments)},n._getSqliteFree=function(){return(n._getSqliteFree=n.asm.Ab).apply(null,arguments)};var bu=n._main=function(){return(bu=n._main=n.asm.Bb).apply(null,arguments)};function Nu(){return(Nu=n.asm.Db).apply(null,arguments)}function vu(){return(vu=n.asm.Eb).apply(null,arguments)}function _u(){return(_u=n.asm.Fb).apply(null,arguments)}function ta(){return(ta=n.asm.Gb).apply(null,arguments)}function na(){return(na=n.asm.Hb).apply(null,arguments)}function xu(){return(xu=n.asm.Ib).apply(null,arguments)}function Eu(){return(Eu=n.asm.Jb).apply(null,arguments)}function Di(){return(Di=n.asm.Kb).apply(null,arguments)}function ra(){return(ra=n.asm.Lb).apply(null,arguments)}n.getTempRet0=vu,n.ccall=An,n.cwrap=function(s,u,f,y){var _=!f||f.every(A=>A==="number"||A==="boolean");return u!=="string"&&_&&!y?n["_"+s]:function(){return An(s,u,f,arguments,y)}},n.setValue=x,n.getValue=ze,n.UTF8ToString=L,n.stringToUTF8=In,n.lengthBytesUTF8=oe;var As;qe=function s(){As||T(),As||(qe=s)};function T(){function s(){if(!As&&(As=!0,n.calledRun=!0,!N)){if(n.noFSInit||$o||($o=!0,Pr(),n.stdin=n.stdin,n.stdout=n.stdout,n.stderr=n.stderr,n.stdin?Lr("stdin",n.stdin):bi("/dev/tty","/dev/stdin"),n.stdout?Lr("stdout",null,n.stdout):bi("/dev/tty","/dev/stdout"),n.stderr?Lr("stderr",null,n.stderr):bi("/dev/tty1","/dev/stderr"),_i("/dev/stdin",0),_i("/dev/stdout",1),_i("/dev/stderr",1)),St=!1,Bt(yn),Bt(tt),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),J){var u=bu;try{var f=u(0,0);I=f,Go(f)}catch(y){Yo(y)}}if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)u=n.postRun.shift(),tn.unshift(u);Bt(tn)}}if(!(0<pe)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ft();Bt(Rn),0<pe||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),s()},1)):s())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();var J=!0;return n.noInitialRun&&(J=!1),T(),e.ready}})();class PN{constructor(){ge(this,"mxPathName",64)}xClose(e){return bt}xRead(e,n,r){return bt}xWrite(e,n,r){return bt}xTruncate(e,n){return bt}xSync(e,n){return je}xFileSize(e,n){return bt}xLock(e,n){return je}xUnlock(e,n){return je}xCheckReservedLock(e,n){return n.setInt32(0,0,!0),je}xFileControl(e,n,r){return Nm}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 0}xOpen(e,n,r,a){return vm}xDelete(e,n){return bt}xAccess(e,n,r){return bt}handleAsync(e){return e()}}const LN=Ls|Ui|zu|TN|Vu;var Pt,wo,Xa,Za,yf,Gc,xm,Yc,Em;class MN{constructor(){W(this,Za);W(this,Gc);W(this,Yc);W(this,Pt,Ls);ge(this,"timeoutMillis",0);W(this,wo,new Map);W(this,Xa,Promise.resolve(0))}get state(){return i(this,Pt)}async lock(e){return ve(this,Za,yf).call(this,ve(this,Gc,xm),e)}async unlock(e){return ve(this,Za,yf).call(this,ve(this,Yc,Em),e)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(e,n){return new Promise(async(r,a)=>{try{await navigator.locks.request(e,n,c=>{if(r(c),c)return new Promise(m=>i(this,wo).set(e,m))})}catch(c){a(c)}})}_releaseWebLock(e){var n;(n=i(this,wo).get(e))==null||n(),i(this,wo).delete(e)}async _pollWebLock(e){var r;return(r=(await navigator.locks.query()).held.find(({name:a})=>a===e))==null?void 0:r.mode}_getTimeoutSignal(){if(this.timeoutMillis){const e=new AbortController;return setTimeout(()=>e.abort(),this.timeoutMillis),e.signal}}}Pt=new WeakMap,wo=new WeakMap,Xa=new WeakMap,Za=new WeakSet,yf=async function(e,n){const r=n&LN;try{const a=()=>e.call(this,r);return await j(this,Xa,i(this,Xa).then(a,a)),j(this,Pt,r),je}catch(a){return a.name==="AbortError"?vN:(console.error(a),EN)}},Gc=new WeakSet,xm=async function(e){if(e===i(this,Pt))return je;switch(i(this,Pt)){case Ls:switch(e){case Ui:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}case Ui:switch(e){case zu:return this._SHAREDtoRESERVED();case Vu:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}case zu:switch(e){case Vu:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}},Yc=new WeakSet,Em=async function(e){if(e===i(this,Pt))return je;switch(i(this,Pt)){case Vu:switch(e){case Ui:return this._EXCLUSIVEtoSHARED();case Ls:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}case zu:switch(e){case Ui:return this._RESERVEDtoSHARED();case Ls:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}case Ui:switch(e){case Ls:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}default:throw new Error(`unexpected transition ${i(this,Pt)} -> ${e}`)}};class BN extends MN{constructor(e){super(),this._lockName=e+"-outer",this._reservedName=e+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}const FN=5e3;let UN=0;const Rl=new WeakMap;function sr(...t){}var go,bo,eu,Ct,tu,No,rs,Xc,Om;class $N{constructor(e,n={durability:"default"}){W(this,Xc);W(this,go,void 0);W(this,bo,void 0);W(this,eu,void 0);W(this,Ct,null);W(this,tu,0);W(this,No,Promise.resolve());W(this,rs,Promise.resolve());j(this,bo,Promise.resolve(e).then(r=>j(this,go,r))),j(this,eu,n)}async close(){const e=i(this,go)??await i(this,bo);await i(this,No),await this.sync(),e.close()}async run(e,n){const r=i(this,No).then(()=>ve(this,Xc,Om).call(this,e,n));return j(this,No,r.catch(()=>{})),r}async sync(){await i(this,rs),j(this,rs,Promise.resolve())}}go=new WeakMap,bo=new WeakMap,eu=new WeakMap,Ct=new WeakMap,tu=new WeakMap,No=new WeakMap,rs=new WeakMap,Xc=new WeakSet,Om=async function(e,n){var a,c;const r=i(this,go)??await i(this,bo);if(e==="readwrite"&&((a=i(this,Ct))==null?void 0:a.mode)==="readonly")j(this,Ct,null);else if(performance.now()-i(this,tu)>FN){try{(c=i(this,Ct))==null||c.commit()}catch(m){if(m.name!=="InvalidStateError")throw m}await new Promise(m=>setTimeout(m)),j(this,Ct,null)}for(let m=0;m<2;++m){if(!i(this,Ct)){j(this,Ct,r.transaction(r.objectStoreNames,e,i(this,eu)));const g=j(this,tu,performance.now());j(this,rs,i(this,rs).then(()=>new Promise((v,d)=>{i(this,Ct).addEventListener("complete",C=>{v(),i(this,Ct)===C.target&&j(this,Ct,null),sr(`transaction ${Rl.get(C.target)} complete`)}),i(this,Ct).addEventListener("abort",C=>{console.warn("tx abort",(performance.now()-g)/1e3);const R=C.target.error;d(R),i(this,Ct)===C.target&&j(this,Ct,null),sr(`transaction ${Rl.get(C.target)} aborted`,R)})}))),Rl.set(i(this,Ct),UN++)}try{const g=Object.fromEntries(Array.from(r.objectStoreNames,v=>[v,new QN(i(this,Ct).objectStore(v))]));return await n(g)}catch(g){if(j(this,Ct,null),m)throw g}}};function Hr(t){return new Promise((e,n)=>{t.addEventListener("success",()=>e(t.result)),t.addEventListener("error",()=>n(t.error))})}var xt;class QN{constructor(e){W(this,xt,void 0);j(this,xt,e)}get(e){sr(`get ${i(this,xt).name}`,e);const n=i(this,xt).get(e);return Hr(n)}getAll(e,n){sr(`getAll ${i(this,xt).name}`,e,n);const r=i(this,xt).getAll(e,n);return Hr(r)}getKey(e){sr(`getKey ${i(this,xt).name}`,e);const n=i(this,xt).getKey(e);return Hr(n)}getAllKeys(e,n){sr(`getAllKeys ${i(this,xt).name}`,e,n);const r=i(this,xt).getAllKeys(e,n);return Hr(r)}put(e,n){sr(`put ${i(this,xt).name}`,e,n);const r=i(this,xt).put(e,n);return Hr(r)}delete(e){sr(`delete ${i(this,xt).name}`,e);const n=i(this,xt).delete(e);return Hr(n)}clear(){sr(`clear ${i(this,xt).name}`);const e=i(this,xt).clear();return Hr(e)}index(e){return new jN(i(this,xt).index(e))}}xt=new WeakMap;var is;class jN{constructor(e){W(this,is,void 0);j(this,is,e)}getAllKeys(e,n){sr(`IDBIndex.getAllKeys ${i(this,is).objectStore.name}<${i(this,is).name}>`,e,n);const r=i(this,is).getAllKeys(e,n);return Hr(r)}}is=new WeakMap;const zN=512,pd=3e3,md={durability:"default",purge:"deferred",purgeAtLeast:16};function un(...t){}var oi,Lt,ct,ss,os,Sr,nu,wf,Zc,qm,el,Cm,ai,Ms,tl,Im;class VN extends PN{constructor(n="wa-sqlite",r=md){super();W(this,nu);W(this,Zc);W(this,el);W(this,ai);W(this,tl);W(this,oi,void 0);W(this,Lt,new Map);W(this,ct,void 0);W(this,ss,new Set);W(this,os,performance.now());W(this,Sr,new Set);this.name=n,j(this,oi,Object.assign({},md,r)),j(this,ct,new $N(HN(n),{durability:i(this,oi).durability}))}async close(){var n;for(const r of i(this,Lt).keys())await this.xClose(r);await((n=i(this,ct))==null?void 0:n.close()),j(this,ct,null)}xOpen(n,r,a,c){return this.handleAsync(async()=>{n===null&&(n=`null_${r}`),un(`xOpen ${n} 0x${r.toString(16)} 0x${a.toString(16)}`);try{const m=new URL(n,"http://localhost/"),g={path:m.pathname,flags:a,block0:null,locks:new BN(m.pathname)};return i(this,Lt).set(r,g),await i(this,ct).run("readwrite",async({blocks:v})=>{if(g.block0=await v.get(ve(this,ai,Ms).call(this,g,0)),!g.block0)if(a&_m)g.block0={path:g.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},v.put(g.block0);else throw new Error(`file not found: ${g.path}`)}),c.setInt32(0,a&qN,!0),je}catch(m){return console.error(m),vm}})}xClose(n){return this.handleAsync(async()=>{try{const r=i(this,Lt).get(n);return r&&(un(`xClose ${r.path}`),i(this,Lt).delete(n),r.flags&IN&&i(this,ct).run("readwrite",({blocks:a})=>{a.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),je}catch(r){return console.error(r),bt}})}xRead(n,r,a){return this.handleAsync(async()=>{const c=i(this,Lt).get(n);un(`xRead ${c.path} ${r.byteLength} ${a}`);try{return await i(this,ct).run("readonly",async({blocks:g})=>{let v=0;for(;v<r.byteLength;){const d=a+v,C=d<c.block0.data.byteLength?c.block0:await g.get(ve(this,ai,Ms).call(this,c,-d));if(!C||C.data.byteLength-C.offset<=d)return r.fill(0,v),ON;const R=r.subarray(v),G=d+C.offset,te=Math.min(Math.max(C.data.byteLength-G,0),R.byteLength);R.set(C.data.subarray(G,G+te)),v+=te}return je})}catch(m){return console.error(m),bt}})}xWrite(n,r,a){const c=i(this,Sr).has(n);if(c||performance.now()-i(this,os)>pd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n),await new Promise(v=>setTimeout(v));const g=ve(this,nu,wf).call(this,n,r,a);return j(this,os,performance.now()),g});return c&&i(this,Sr).delete(n),m}return ve(this,nu,wf).call(this,n,r,a)}xTruncate(n,r){const a=i(this,Lt).get(n);un(`xTruncate ${a.path} ${r}`);try{Object.assign(a.block0,{fileSize:r,data:a.block0.data.slice(0,r)});const c=Object.assign({},a.block0);return i(this,ct).run("readwrite",({blocks:m})=>{m.delete(ve(this,ai,Ms).call(this,a,-1/0,-r)),m.put(c)}),je}catch(c){return console.error(c),bt}}xSync(n,r){const a=i(this,Sr).has(n);if(a||i(this,oi).durability!=="relaxed"||performance.now()-i(this,os)>pd){const m=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&i(this,Sr).add(n);const g=await ve(this,Zc,qm).call(this,n,r);return j(this,os,performance.now()),g});return a&&i(this,Sr).delete(n),m}const c=i(this,Lt).get(n);return un(`xSync ${c.path} ${r}`),je}xFileSize(n,r){const a=i(this,Lt).get(n);return un(`xFileSize ${a.path}`),r.setBigInt64(0,BigInt(a.block0.fileSize),!0),je}xLock(n,r){return this.handleAsync(async()=>{const a=i(this,Lt).get(n);un(`xLock ${a.path} ${r}`);try{const c=await a.locks.lock(r);return c===je&&a.locks.state===Ui&&(a.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get(ve(this,ai,Ms).call(this,a,0)))),c}catch(c){return console.error(c),bt}})}xUnlock(n,r){return this.handleAsync(async()=>{const a=i(this,Lt).get(n);un(`xUnlock ${a.path} ${r}`);try{return a.locks.unlock(r)}catch(c){return console.error(c),bt}})}xCheckReservedLock(n,r){return this.handleAsync(async()=>{const a=i(this,Lt).get(n);un(`xCheckReservedLock ${a.path}`);const c=await a.locks.isSomewhereReserved();return r.setInt32(0,c?1:0,!0),je})}xSectorSize(n){return zN}xDeviceCharacteristics(n){return WN|SN|AN|kN}xFileControl(n,r,a){const c=i(this,Lt).get(n);switch(un(`xFileControl ${c.path} ${r}`),r){case 11:return c.overwrite=!0,je;case 21:if(c.overwrite)try{return this.handleAsync(async()=>(await ve(this,tl,Im).call(this,c),je))}catch(m){return console.error(m),bt}return je;case 22:return c.overwrite=!1,je;case 31:return this.handleAsync(async()=>{try{return c.block0.version--,c.changedPages=new Set,i(this,ct).run("readwrite",async({blocks:m})=>{const g=await m.index("version").getAllKeys(IDBKeyRange.bound([c.path],[c.path,c.block0.version]));for(const v of g)m.delete(v)}),je}catch(m){return console.error(m),bt}});case 32:try{const m=Object.assign({},c.block0);m.data=m.data.slice();const g=c.changedPages;return c.changedPages=null,i(this,ct).run("readwrite",async({blocks:v})=>{v.put(m);const d=await v.get([c.path,"purge",0])??{path:c.path,offset:"purge",version:0,data:new Map,count:0};d.count+=g.size;for(const C of g)d.data.set(C,m.version);v.put(d),ve(this,el,Cm).call(this,c.path,d.count)}),je}catch(m){return console.error(m),bt}case 33:return this.handleAsync(async()=>{try{return c.changedPages=null,c.block0=await i(this,ct).run("readonly",({blocks:m})=>m.get([c.path,0,c.block0.version+1])),je}catch(m){return console.error(m),bt}});default:return Nm}}xAccess(n,r,a){return this.handleAsync(async()=>{try{const c=new URL(n,"file://localhost/").pathname;un(`xAccess ${c} ${r}`);const m=await i(this,ct).run("readonly",({blocks:g})=>g.getKey(ve(this,ai,Ms).call(this,{path:c},0)));return a.setInt32(0,m?1:0,!0),je}catch(c){return console.error(c),bt}})}xDelete(n,r){return this.handleAsync(async()=>{const a=new URL(n,"file://localhost/").pathname;try{return i(this,ct).run("readwrite",({blocks:c})=>c.delete(IDBKeyRange.bound([a],[a,[]]))),r&&await i(this,ct).sync(),je}catch(c){return console.error(c),bt}})}async purge(n){const r=Date.now();await i(this,ct).run("readwrite",async({blocks:a})=>{const c=await a.get([n,"purge",0]);if(c){for(const[m,g]of c.data)a.delete(IDBKeyRange.bound([n,m,g],[n,m,1/0],!0,!1));await a.delete([n,"purge",0])}un(`purge ${n} ${(c==null?void 0:c.data.size)??0} pages in ${Date.now()-r} ms`)})}}oi=new WeakMap,Lt=new WeakMap,ct=new WeakMap,ss=new WeakMap,os=new WeakMap,Sr=new WeakMap,nu=new WeakSet,wf=function(n,r,a){const c=i(this,Lt).get(n);un(`xWrite ${c.path} ${r.byteLength} ${a}`);try{const m=c.block0.fileSize;c.block0.fileSize=Math.max(c.block0.fileSize,a+r.byteLength);const g=a===0?c.block0:{path:c.path,offset:-a,version:c.block0.version,data:null};return g.data=r.slice(),c.changedPages?(m===c.block0.fileSize&&c.changedPages.add(-a),a!==0&&i(this,ct).run("readwrite",({blocks:v})=>v.put(g))):i(this,ct).run("readwrite",({blocks:v})=>v.put(g)),je}catch(m){return console.error(m),bt}},Zc=new WeakSet,qm=async function(n,r){const a=i(this,Lt).get(n);un(`xSync ${a.path} ${r}`);try{await i(this,ct).sync()}catch(c){return console.error(c),bt}return je},el=new WeakSet,Cm=function(n,r){i(this,oi).purge==="manual"||i(this,ss).has(n)||r<i(this,oi).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(n),i(this,ss).delete(n)}):setTimeout(()=>{this.purge(n),i(this,ss).delete(n)}),i(this,ss).add(n))},ai=new WeakSet,Ms=function(n,r,a=0){const c=!r||-r<n.block0.data.length?-1/0:n.block0.version;return IDBKeyRange.bound([n.path,r,c],[n.path,a,1/0])},tl=new WeakSet,Im=async function(n){const r=n.block0.data.length;if(r<18)return;const a=new DataView(n.block0.data.buffer,n.block0.data.byteOffset);let c=a.getUint16(16);if(c===1&&(c=65536),c===r)return;const m=Math.max(r,c),g=m/r,v=m/c,C=a.getUint32(28)*c,R=n.block0.version;await i(this,ct).run("readwrite",async({blocks:G})=>{const te=await G.index("version").getAllKeys(IDBKeyRange.bound([n.path,R+1],[n.path,1/0]));for(const ae of te)G.delete(ae);G.delete([n.path,"purge",0]);for(let ae=0;ae<C;ae+=m){const b=await G.getAll(IDBKeyRange.lowerBound([n.path,-(ae+m),1/0]),g);for(const E of b)G.delete([E.path,E.offset,E.version]);if(v===1){const E=new Uint8Array(c);for(const I of b)E.set(I.data,-(ae+I.offset));const N={path:n.path,offset:-ae,version:R,data:E};N.offset===0&&(N.fileSize=C,n.block0=N),G.put(N)}else{const E=b[0];for(let N=0;N<v;++N){const I=-(ae+N*c);if(-I>=C)break;const M={path:E.path,offset:I,version:R,data:E.data.subarray(N*c,(N+1)*c)};M.offset===0&&(M.fileSize=C,n.block0=M),G.put(M)}}}})};function HN(t){return new Promise((e,n)=>{const r=globalThis.indexedDB.open(t,5);r.addEventListener("upgradeneeded",function(){r.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),r.addEventListener("success",()=>{e(r.result)}),r.addEventListener("error",()=>{n(r.error)})})}const KN=""+new URL("wa-sqlite-async-24800831.wasm",import.meta.url).href,JN=new Lb({async database(){const t=await DN({locateFile:()=>KN}),e=RN(t),n="wa-sqlite-test";e.vfs_register(new VN(n));const r=await e.open_v2(n,void 0,n);return{sqlite:e,db:r}}});function GN(){console.log("start wa-sqlite test"),Zf(JN).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite]",e))})}function YN(t=new Map){let e=(c,m)=>t.has(c)?t.get(c).push(m):t.set(c,[m]),n=(c,m)=>{let g;c?(g=t.get(c))&&(m?g.splice(g.indexOf(m)>>>0,1):t.set(c,[])):t.clear()};return{emit:(c,...m)=>t.has(c)&&t.get(c).slice().forEach(g=>g(...m)),on:e,once:(c,m)=>{const g=(...v)=>{m(...v),n(c,g)};e(c,g)},off:n}}var XN=class{constructor(t){ge(this,"config");ge(this,"worker");ge(this,"connection");ge(this,"connectionMutex",new ZN);ge(this,"mitt");this.config=t}async init(){var e,n;this.worker=this.config.worker??new Worker(new URL(""+new URL("worker-e552ba61.js",import.meta.url).href,self.location),{type:"module"}),this.mitt=YN(),this.worker.onmessage=({data:{type:r,...a}})=>{var c;(c=this.mitt)==null||c.emit(r,a)};const t={type:"init",dbName:this.config.dbName,url:this.config.url};this.worker.postMessage(t),await new Promise((r,a)=>{var c;(c=this.mitt)==null||c.once("init",({err:m})=>{m?a(m):r()})}),this.connection=new e0(this.worker,this.mitt),await((n=(e=this.config).onCreateConnection)==null?void 0:n.call(e,this.connection))}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(t){await t.executeQuery(yr.raw("begin"))}async commitTransaction(t){await t.executeQuery(yr.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(yr.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(this.worker)return this.worker.postMessage({type:"close"}),new Promise((t,e)=>{var n;(n=this.mitt)==null||n.once("close",({err:r})=>{var a,c;r?e(r):((a=this.worker)==null||a.terminate(),(c=this.mitt)==null||c.off(),this.mitt=void 0,t())})})}},ZN=class{constructor(){ge(this,"promise");ge(this,"resolve")}async lock(){for(;this.promise;)await this.promise;this.promise=new Promise(t=>{this.resolve=t})}unlock(){const t=this.resolve;this.promise=void 0,this.resolve=void 0,t==null||t()}},e0=class{constructor(t,e){ge(this,"worker");ge(this,"mitt");this.worker=t,this.mitt=e}streamQuery(){throw new Error("wasqlite driver doesn't support streaming")}async executeQuery(t){const{parameters:e,sql:n,query:r}=t,c={type:"run",mode:r.kind==="SelectQueryNode"?"query":r.kind==="RawNode"?"raw":"exec",sql:n,parameters:e};return this.worker.postMessage(c),new Promise((m,g)=>{!this.mitt&&g("kysely instance has been destroyed"),this.mitt.once("run",({data:v,err:d})=>{!d&&v?m(v):g(d)})})}},ru,bd,t0=(bd=class{constructor(t){W(this,ru,void 0);j(this,ru,t)}createDriver(){return new XN(i(this,ru))}createQueryCompiler(){return new im}createAdapter(){return new cm}createIntrospector(t){return new am(t)}},ru=new WeakMap,bd);const n0=new t0({dbName:"wa-sqlite-worker-test"});function r0(){console.log("start wa-sqlite-worker test"),Zf(n0).then(t=>{t==null||t.forEach(e=>console.log("[wa-sqlite-worker]",e))})}const i0=Nt("h1",null,[Ca(" test "),Nt("a",{href:"https://github.com/kysely-org/kysely",target:"_blank"},"Kysely"),Ca(" WASM dialect ")],-1),s0=Nt("br",null,null,-1),o0=Nt("h3",null,"see worker result in console",-1),a0=Nt("h3",null,[Ca(" you can explore "),Nt("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API#origin_private_file_system",target:"_blank"}," OPFS "),Ca(" file using "),Nt("a",{href:"https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd",target:"_blank"}," opfs-explorer ")],-1),u0=Nt("br",null,null,-1),c0={class:"buttons"},l0=Nt("br",null,null,-1),f0=Nt("div",null," result run in main thread: ",-1),h0=Py({__name:"App",setup(t){const e=new bN,{result:n,run:r}=gN(),a=new NN;function c(){r()}function m(){e.postMessage("")}function g(){a.postMessage("")}function v(){GN()}function d(){r0()}async function C(){(await window.indexedDB.databases()).forEach(te=>{window.indexedDB.deleteDatabase(te.name)})}async function R(){const G=await navigator.storage.getDirectory();await td("sqljs"),await td("sqlijsWorker"),await C();try{await G.removeEntry("test.db")}catch{}try{await G.removeEntry("test.db-journal")}catch{}console.log("clear all")}return(G,te)=>(mw(),gw(cr,null,[i0,s0,o0,a0,u0,Nt("div",c0,[Nt("button",{onClick:te[0]||(te[0]=ae=>c())}," test sqljs in main thread "),Nt("button",{onClick:te[1]||(te[1]=ae=>m())}," test sqljs in Worker "),Nt("button",{onClick:te[2]||(te[2]=ae=>g())}," test officialWasm in Worker "),Nt("button",{onClick:te[3]||(te[3]=ae=>v())}," test wa-sqlite in main thread "),Nt("button",{onClick:te[4]||(te[4]=ae=>d())}," test wa-sqlite in Worker "),Nt("button",{onClick:te[5]||(te[5]=ae=>R())}," clear ")]),l0,f0,Nt("pre",null,""+jm($d(n))+`
  `,1)],64))}});ng(h0).mount("#root");
