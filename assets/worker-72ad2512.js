var as=Object.defineProperty;var cs=(C,K,D)=>K in C?as(C,K,{enumerable:!0,configurable:!0,writable:!0,value:D}):C[K]=D;var Ye=(C,K,D)=>(cs(C,typeof K!="symbol"?K+"":K,D),D),Ze=(C,K,D)=>{if(!K.has(C))throw TypeError("Cannot "+D)};var y=(C,K,D)=>(Ze(C,K,"read from private field"),D?D.call(C):K.get(C)),F=(C,K,D)=>{if(K.has(C))throw TypeError("Cannot add the same private member more than once");K instanceof WeakSet?K.add(C):K.set(C,D)},X=(C,K,D,Yt)=>(Ze(C,K,"write to private field"),Yt?Yt.call(C,D):K.set(C,D),D);var ot=(C,K,D)=>(Ze(C,K,"access private method"),D);(function(){var rt,Ht,Gt,Jt,Ge,ce,ri,le,ii,hn,Qt,Mt,te,tt,ee,Vt,Nt,fe,si,mn,J,_n,Ot,pn,Et,it,Y,Lt,kt,yt,ne,Je,he,oi,me,ui,xt,Xt,_e,ai,dn;"use strict";var C=0,K=5,D=10,Yt=12,tn=14,Ct=21,Te=25,ci=27,Ne=100,li=101,fi=3850,hi=522,mi=1,_i=2,en=4,pi=8,Bt=0,Tt=1,ue=2,di=3,ae=4,wi=512,bi=1024,yi=2048,gi=16384,nn=1,rn=2,sn=3,on=4,un=5,an=0x7fffffffffffffffn,cn=-0x8000000000000000n,bt=class extends Error{constructor(u,s){super(u),this.code=s}},Ft=!0;function vi(u){const s={},r=u._getSqliteFree(),v=u._malloc(8),d=[v,v+4];function A(c){if(typeof c!="string")return 0;const l=u.lengthBytesUTF8(c),a=u._sqlite3_malloc(l+1);return u.stringToUTF8(c,a,l+1),a}function T(c,l){return BigInt(l)<<32n|BigInt(c)&0xffffffffn}const P=function(){const c=BigInt(Number.MAX_SAFE_INTEGER)>>32n,l=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(a,h){return h>c||h<l?T(a,h):h*4294967296+(a&2147483647)-(a&2147483648)}}(),Z=new Set;function $(c){if(!Z.has(c))throw new bt("not a database",Ct)}const U=new Map;function L(c){if(!U.has(c))throw new bt("not a statement",Ct)}s.bind_collection=function(c,l){L(c);const a=Array.isArray(l),h=s.bind_parameter_count(c);for(let w=1;w<=h;++w){const q=a?w-1:s.bind_parameter_name(c,w),W=l[q];W!==void 0&&s.bind(c,w,W)}return C},s.bind=function(c,l,a){switch(L(c),typeof a){case"number":return a===(a|0)?s.bind_int(c,l,a):s.bind_double(c,l,a);case"string":return s.bind_text(c,l,a);default:return a instanceof Uint8Array||Array.isArray(a)?s.bind_blob(c,l,a):a===null?s.bind_null(c,l):typeof a=="bigint"?s.bind_int64(c,l,a):a===void 0?ci:(console.warn("unknown binding converted to null",a),s.bind_null(c,l))}},s.bind_blob=function(){const c="sqlite3_bind_blob",l=u.cwrap(c,...N("nnnnn:n"));return function(a,h,w){L(a);const q=w.byteLength??w.length,W=u._sqlite3_malloc(q);u.HEAPU8.subarray(W).set(w);const R=l(a,h,W,q,r);return H(c,R,U.get(a))}}(),s.bind_parameter_count=function(){const c="sqlite3_bind_parameter_count",l=u.cwrap(c,...N("n:n"));return function(a){return L(a),l(a)}}(),s.bind_double=function(){const c="sqlite3_bind_double",l=u.cwrap(c,...N("nnn:n"));return function(a,h,w){L(a);const q=l(a,h,w);return H(c,q,U.get(a))}}(),s.bind_int=function(){const c="sqlite3_bind_int",l=u.cwrap(c,...N("nnn:n"));return function(a,h,w){if(L(a),w>2147483647||w<-2147483648)return Te;const q=l(a,h,w);return H(c,q,U.get(a))}}(),s.bind_int64=function(){const c="sqlite3_bind_int64",l=u.cwrap(c,...N("nnnn:n"));return function(a,h,w){if(L(a),w>an||w<cn)return Te;const q=w&0xffffffffn,W=w>>32n,R=l(a,h,Number(q),Number(W));return H(c,R,U.get(a))}}(),s.bind_null=function(){const c="sqlite3_bind_null",l=u.cwrap(c,...N("nn:n"));return function(a,h){L(a);const w=l(a,h);return H(c,w,U.get(a))}}(),s.bind_parameter_name=function(){const c="sqlite3_bind_parameter_name",l=u.cwrap(c,...N("n:s"));return function(a,h){return L(a),l(a,h)}}(),s.bind_text=function(){const c="sqlite3_bind_text",l=u.cwrap(c,...N("nnnnn:n"));return function(a,h,w){L(a);const q=A(w),W=l(a,h,q,-1,r);return H(c,W,U.get(a))}}(),s.changes=function(){const c="sqlite3_changes",l=u.cwrap(c,...N("n:n"));return function(a){return $(a),l(a)}}(),s.close=function(){const c="sqlite3_close",l=u.cwrap(c,...N("n:n"),{async:Ft});return async function(a){$(a);const h=await l(a);return Z.delete(a),H(c,h,a)}}(),s.column=function(c,l){L(c);const a=s.column_type(c,l);switch(a){case on:return s.column_blob(c,l);case rn:return s.column_double(c,l);case nn:const h=s.column_int(c,l),w=u.getTempRet0();return P(h,w);case un:return null;case sn:return s.column_text(c,l);default:throw new bt("unknown type",a)}},s.column_blob=function(){const c="sqlite3_column_blob",l=u.cwrap(c,...N("nn:n"));return function(a,h){L(a);const w=s.column_bytes(a,h),q=l(a,h);return u.HEAPU8.subarray(q,q+w)}}(),s.column_bytes=function(){const c="sqlite3_column_bytes",l=u.cwrap(c,...N("nn:n"));return function(a,h){return L(a),l(a,h)}}(),s.column_count=function(){const c="sqlite3_column_count",l=u.cwrap(c,...N("n:n"));return function(a){return L(a),l(a)}}(),s.column_double=function(){const c="sqlite3_column_double",l=u.cwrap(c,...N("nn:n"));return function(a,h){return L(a),l(a,h)}}(),s.column_int=function(){const c="sqlite3_column_int64",l=u.cwrap(c,...N("nn:n"));return function(a,h){return L(a),l(a,h)}}(),s.column_int64=function(){const c="sqlite3_column_int64",l=u.cwrap(c,...N("nn:n"));return function(a,h){L(a);const w=l(a,h),q=u.getTempRet0();return T(w,q)}}(),s.column_name=function(){const c="sqlite3_column_name",l=u.cwrap(c,...N("nn:s"));return function(a,h){return L(a),l(a,h)}}(),s.column_names=function(c){const l=[],a=s.column_count(c);for(let h=0;h<a;++h)l.push(s.column_name(c,h));return l},s.column_text=function(){const c="sqlite3_column_text",l=u.cwrap(c,...N("nn:s"));return function(a,h){return L(a),l(a,h)}}(),s.column_type=function(){const c="sqlite3_column_type",l=u.cwrap(c,...N("nn:n"));return function(a,h){return L(a),l(a,h)}}(),s.create_function=function(c,l,a,h,w,q,W,R){if($(c),q&&!W&&!R){const z=u.createFunction(c,l,a,h,w,q);return H("sqlite3_create_function",z,c)}if(!q&&W&&R){const z=u.createAggregate(c,l,a,h,w,W,R);return H("sqlite3_create_function",z,c)}throw new bt("invalid function combination",Ct)},s.create_module=function(c,l,a,h){$(c);const w=u.createModule(c,l,a,h);return H("sqlite3_create_module",w,c)},s.data_count=function(){const c="sqlite3_data_count",l=u.cwrap(c,...N("n:n"));return function(a){return L(a),l(a)}}(),s.declare_vtab=function(){const c="sqlite3_declare_vtab",l=u.cwrap(c,...N("ns:n"));return function(a,h){const w=l(a,h);return H("sqlite3_declare_vtab",w)}}(),s.exec=async function(c,l,a){for await(const h of s.statements(c,l)){let w;for(;await s.step(h)===Ne;)if(a){w=w??s.column_names(h);const q=s.row(h);await a(q,w)}}return C},s.finalize=function(){const c="sqlite3_finalize",l=u.cwrap(c,...N("n:n"),{async:Ft});return async function(a){if(!U.has(a))return Ct;const h=await l(a);return U.get(a),U.delete(a),h}}(),s.get_autocommit=function(){const c="sqlite3_get_autocommit",l=u.cwrap(c,...N("n:n"));return function(a){return l(a)}}(),s.libversion=function(){const c="sqlite3_libversion",l=u.cwrap(c,...N(":s"));return function(){return l()}}(),s.libversion_number=function(){const c="sqlite3_libversion_number",l=u.cwrap(c,...N(":n"));return function(){return l()}}(),s.limit=function(){const c="sqlite3_limit",l=u.cwrap(c,...N("nnn:n"));return function(a,h,w){return l(a,h,w)}}(),s.open_v2=function(){const c="sqlite3_open_v2",l=u.cwrap(c,...N("snnn:n"),{async:Ft});return async function(a,h,w){h=h||en|_i,w=A(w);const q=await l(a,d[0],h,w),W=u.getValue(d[0],"*");return Z.add(W),u._sqlite3_free(w),u.ccall("RegisterExtensionFunctions","void",["number"],[W]),H(c,q),W}}(),s.prepare_v2=function(){const c="sqlite3_prepare_v2",l=u.cwrap(c,...N("nnnnn:n"),{async:Ft});return async function(a,h){const w=await l(a,h,-1,d[0],d[1]);H(c,w,a);const q=u.getValue(d[0],"*");return q?(U.set(q,a),{stmt:q,sql:u.getValue(d[1],"*")}):null}}(),s.progress_handler=function(c,l,a,h){$(c),u.progressHandler(c,l,a,h)},s.reset=function(){const c="sqlite3_reset",l=u.cwrap(c,...N("n:n"),{async:Ft});return async function(a){L(a);const h=await l(a);return H(c,h,U.get(a))}}(),s.result=function(c,l){switch(typeof l){case"number":l===(l|0)?s.result_int(c,l):s.result_double(c,l);break;case"string":s.result_text(c,l);break;default:if(l instanceof Uint8Array||Array.isArray(l))s.result_blob(c,l);else if(l===null)s.result_null(c);else{if(typeof l=="bigint")return s.result_int64(c,l);console.warn("unknown result converted to null",l),s.result_null(c)}break}},s.result_blob=function(){const c="sqlite3_result_blob",l=u.cwrap(c,...N("nnnn:n"));return function(a,h){const w=h.byteLength??h.length,q=u._sqlite3_malloc(w);u.HEAPU8.subarray(q).set(h),l(a,q,w,r)}}(),s.result_double=function(){const c="sqlite3_result_double",l=u.cwrap(c,...N("nn:n"));return function(a,h){l(a,h)}}(),s.result_int=function(){const c="sqlite3_result_int",l=u.cwrap(c,...N("nn:n"));return function(a,h){l(a,h)}}(),s.result_int64=function(){const c="sqlite3_result_int64",l=u.cwrap(c,...N("nnn:n"));return function(a,h){if(h>an||h<cn)return Te;const w=h&0xffffffffn,q=h>>32n;l(a,Number(w),Number(q))}}(),s.result_null=function(){const c="sqlite3_result_null",l=u.cwrap(c,...N("n:n"));return function(a){l(a)}}(),s.result_text=function(){const c="sqlite3_result_text",l=u.cwrap(c,...N("nnnn:n"));return function(a,h){const w=A(h);l(a,w,-1,r)}}(),s.row=function(c){const l=[],a=s.data_count(c);for(let h=0;h<a;++h){const w=s.column(c,h);l.push((w==null?void 0:w.buffer)===u.HEAPU8.buffer?w.slice():w)}return l},s.set_authorizer=function(c,l,a){$(c);const h=u.setAuthorizer(c,l,a);return H("sqlite3_set_authorizer",h,c)},s.sql=function(){const c="sqlite3_sql",l=u.cwrap(c,...N("n:s"));return function(a){return L(a),l(a)}}(),s.statements=function(c,l){return async function*(){const a=s.str_new(c,l);let h={stmt:null,sql:s.str_value(a)};try{for(;h=await s.prepare_v2(c,h.sql);)yield h.stmt,s.finalize(h.stmt),h.stmt=null}finally{h!=null&&h.stmt&&s.finalize(h.stmt),s.str_finish(a)}}()},s.step=function(){const c="sqlite3_step",l=u.cwrap(c,...N("n:n"),{async:Ft});return async function(a){L(a);const h=await l(a);return H(c,h,U.get(a),[Ne,li])}}();let gt=0;const V=new Map;s.str_new=function(c,l=""){const a=u.lengthBytesUTF8(l),h=gt++&4294967295,w={offset:u._sqlite3_malloc(a+1),bytes:a};return V.set(h,w),u.stringToUTF8(l,w.offset,w.bytes+1),h},s.str_appendall=function(c,l){if(!V.has(c))throw new bt("not a string",Ct);const a=V.get(c),h=u.lengthBytesUTF8(l),w=a.bytes+h,q=u._sqlite3_malloc(w+1);u.HEAPU8.subarray(q,q+w+1).set(u.HEAPU8.subarray(a.offset,a.offset+a.bytes)),u.stringToUTF8(l,q+a.bytes,h+1),u._sqlite3_free(a.offset),a.offset=q,a.bytes=w,V.set(c,a)},s.str_finish=function(c){if(!V.has(c))throw new bt("not a string",Ct);const l=V.get(c);V.delete(c),u._sqlite3_free(l.offset)},s.str_value=function(c){if(!V.has(c))throw new bt("not a string",Ct);return V.get(c).offset},s.user_data=function(c){return u.getFunctionUserData(c)},s.value=function(c){const l=s.value_type(c);switch(l){case on:return s.value_blob(c);case rn:return s.value_double(c);case nn:const a=s.value_int(c),h=u.getTempRet0();return P(a,h);case un:return null;case sn:return s.value_text(c);default:throw new bt("unknown type",l)}},s.value_blob=function(){const c="sqlite3_value_blob",l=u.cwrap(c,...N("n:n"));return function(a){const h=s.value_bytes(a),w=l(a);return u.HEAPU8.subarray(w,w+h)}}(),s.value_bytes=function(){const c="sqlite3_value_bytes",l=u.cwrap(c,...N("n:n"));return function(a){return l(a)}}(),s.value_double=function(){const c="sqlite3_value_double",l=u.cwrap(c,...N("n:n"));return function(a){return l(a)}}(),s.value_int=function(){const c="sqlite3_value_int64",l=u.cwrap(c,...N("n:n"));return function(a){return l(a)}}(),s.value_int64=function(){const c="sqlite3_value_int64",l=u.cwrap(c,...N("n:n"));return function(a){const h=l(a),w=u.getTempRet0();return T(h,w)}}(),s.value_text=function(){const c="sqlite3_value_text",l=u.cwrap(c,...N("n:s"));return function(a){return l(a)}}(),s.value_type=function(){const c="sqlite3_value_type",l=u.cwrap(c,...N("n:n"));return function(a){return l(a)}}(),s.vfs_register=function(c,l){const a=u.registerVFS(c,l);return H("sqlite3_vfs_register",a)};function H(c,l,a=null,h=[C]){if(h.includes(l))return l;const w=a?u.ccall("sqlite3_errmsg","string",["number"],[a]):c;throw new bt(w,l)}return s}function N(u){const s=[],r=u.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":s.push("number");break;case"s":s.push("string");break;case"v":s.push(null);break}const v=[];for(let d of r[1])switch(d){case"n":v.push("number");break;case"s":v.push("string");break}return s.push(v),s}var Ei=(()=>{var u=self.location.href;return function(s={}){var r;r||(r=typeof s<"u"?s:{});var v,d;r.ready=new Promise((t,e)=>{v=t,d=e});var A=Object.assign({},r),T="./this.program",P=(t,e)=>{throw e},Z=typeof window=="object",$=typeof importScripts=="function",U="",L;(Z||$)&&($?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),u&&(U=u),U.indexOf("blob:")!==0?U=U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):U="",$&&(L=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var gt=r.print||console.log.bind(console),V=r.printErr||console.warn.bind(console);Object.assign(r,A),A=null,r.thisProgram&&(T=r.thisProgram),r.quit&&(P=r.quit);var H;r.wasmBinary&&(H=r.wasmBinary);var c=r.noExitRuntime||!0;typeof WebAssembly!="object"&&ft("no native wasm support detected");var l,a=!1,h,w,q,W,R,z,ke,De;function wn(){var t=l.buffer;r.HEAP8=w=new Int8Array(t),r.HEAP16=W=new Int16Array(t),r.HEAP32=R=new Int32Array(t),r.HEAPU8=q=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAPU32=z=new Uint32Array(t),r.HEAPF32=ke=new Float32Array(t),r.HEAPF64=De=new Float64Array(t)}var bn=[],yn=[],Bi=[],gn=[],pe=0;function Fi(){var t=r.preRun.shift();bn.unshift(t)}var Dt=0,re=null;function ft(t){throw r.onAbort&&r.onAbort(t),t="Aborted("+t+")",V(t),a=!0,h=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),d(t),t}function vn(t){return t.startsWith("data:application/octet-stream;base64,")}var Pt;if(r.locateFile){if(Pt="wa-sqlite-async.wasm",!vn(Pt)){var En=Pt;Pt=r.locateFile?r.locateFile(En,U):U+En}}else Pt=new URL(""+new URL("wa-sqlite-async-24800831.wasm",self.location.href).href,self.location).href;function xn(t){try{if(t==Pt&&H)return new Uint8Array(H);if(L)return L(t);throw"both async and sync fetching of the wasm failed"}catch(e){ft(e)}}function Hi(t){return H||!Z&&!$||typeof fetch!="function"?Promise.resolve().then(()=>xn(t)):fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>xn(t))}function Sn(t,e,n){return Hi(t).then(i=>WebAssembly.instantiate(i,e)).then(i=>i).then(n,i=>{V("failed to asynchronously prepare wasm: "+i),ft(i)})}function Qi(t,e){var n=Pt;return H||typeof WebAssembly.instantiateStreaming!="function"||vn(n)||typeof fetch!="function"?Sn(n,t,e):fetch(n,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,t).then(e,function(o){return V("wasm streaming compile failed: "+o),V("falling back to ArrayBuffer instantiation"),Sn(n,t,e)}))}var I,Q;function An(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function de(t){for(;0<t.length;)t.shift()(r)}function et(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return w[t>>0];case"i8":return w[t>>0];case"i16":return W[t>>1];case"i32":return R[t>>2];case"i64":return R[t>>2];case"float":return ke[t>>2];case"double":return De[t>>3];case"*":return z[t>>2];default:ft("invalid type for getValue: "+e)}}function _t(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":w[t>>0]=e;break;case"i8":w[t>>0]=e;break;case"i16":W[t>>1]=e;break;case"i32":R[t>>2]=e;break;case"i64":Q=[e>>>0,(I=e,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[t>>2]=Q[0],R[t+4>>2]=Q[1];break;case"float":ke[t>>2]=e;break;case"double":De[t>>3]=e;break;case"*":z[t>>2]=e;break;default:ft("invalid type for setValue: "+n)}}var qn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ie(t,e,n){var i=e+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.buffer&&qn)return qn.decode(t.subarray(e,n));for(i="";e<n;){var o=t[e++];if(o&128){var m=t[e++]&63;if((o&224)==192)i+=String.fromCharCode((o&31)<<6|m);else{var f=t[e++]&63;o=(o&240)==224?(o&15)<<12|m<<6|f:(o&7)<<18|m<<12|f<<6|t[e++]&63,65536>o?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else i+=String.fromCharCode(o)}return i}function B(t,e){return t?ie(q,t,e):""}var Rn=(t,e)=>{for(var n=0,i=t.length-1;0<=i;i--){var o=t[i];o==="."?t.splice(i,1):o===".."?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},St=t=>{var e=t.charAt(0)==="/",n=t.substr(-1)==="/";return(t=Rn(t.split("/").filter(i=>!!i),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Mi=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.substr(0,e.length-1)),t+e)},we=t=>{if(t==="/")return"/";t=St(t),t=t.replace(/\/$/,"");var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)};function Vi(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return t=>crypto.getRandomValues(t);ft("initRandomDevice")}function In(t){return(In=Vi())(t)}function be(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if(e=0<=n?arguments[n]:"/",typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e=e.charAt(0)==="/"}return t=Rn(t.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+t||"."}function Ut(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);127>=i?e++:2047>=i?e+=2:55296<=i&&57343>=i?(e+=4,++n):e+=3}return e}function Cn(t,e,n,i){if(!(0<i))return 0;var o=n;i=n+i-1;for(var m=0;m<t.length;++m){var f=t.charCodeAt(m);if(55296<=f&&57343>=f){var b=t.charCodeAt(++m);f=65536+((f&1023)<<10)|b&1023}if(127>=f){if(n>=i)break;e[n++]=f}else{if(2047>=f){if(n+1>=i)break;e[n++]=192|f>>6}else{if(65535>=f){if(n+2>=i)break;e[n++]=224|f>>12}else{if(n+3>=i)break;e[n++]=240|f>>18,e[n++]=128|f>>12&63}e[n++]=128|f>>6&63}e[n++]=128|f&63}}return e[n]=0,n-o}var Tn=[];function Nn(t,e){Tn[t]={input:[],Rb:[],bc:e},ze(t,Wi)}var Wi={open:function(t){var e=Tn[t.node.ec];if(!e)throw new E(43);t.Sb=e,t.seekable=!1},close:function(t){t.Sb.bc.ic(t.Sb)},ic:function(t){t.Sb.bc.ic(t.Sb)},read:function(t,e,n,i){if(!t.Sb||!t.Sb.bc.zc)throw new E(60);for(var o=0,m=0;m<i;m++){try{var f=t.Sb.bc.zc(t.Sb)}catch{throw new E(29)}if(f===void 0&&o===0)throw new E(6);if(f==null)break;o++,e[n+m]=f}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,i){if(!t.Sb||!t.Sb.bc.sc)throw new E(60);try{for(var o=0;o<i;o++)t.Sb.bc.sc(t.Sb,e[n+o])}catch{throw new E(29)}return i&&(t.node.timestamp=Date.now()),o}},ji={zc:function(t){if(!t.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;var n=Array(Ut(e)+1);e=Cn(e,n,0,n.length),n.length=e,t.input=n}return t.input.shift()},sc:function(t,e){e===null||e===10?(gt(ie(t.Rb,0)),t.Rb=[]):e!=0&&t.Rb.push(e)},ic:function(t){t.Rb&&0<t.Rb.length&&(gt(ie(t.Rb,0)),t.Rb=[])}},Ki={sc:function(t,e){e===null||e===10?(V(ie(t.Rb,0)),t.Rb=[]):e!=0&&t.Rb.push(e)},ic:function(t){t.Rb&&0<t.Rb.length&&(V(ie(t.Rb,0)),t.Rb=[])}},O={Vb:null,Ub:function(){return O.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if((n&61440)===24576||(n&61440)===4096)throw new E(63);return O.Vb||(O.Vb={dir:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb,cc:O.Cb.cc,jc:O.Cb.jc,Cc:O.Cb.Cc,oc:O.Cb.oc,mc:O.Cb.mc,Bc:O.Cb.Bc,nc:O.Cb.nc},stream:{Zb:O.Mb.Zb}},file:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb},stream:{Zb:O.Mb.Zb,read:O.Mb.read,write:O.Mb.write,vc:O.Mb.vc,kc:O.Mb.kc,lc:O.Mb.lc}},link:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb,fc:O.Cb.fc},stream:{}},wc:{node:{Tb:O.Cb.Tb,Qb:O.Cb.Qb},stream:Gi}}),n=Dn(t,e,n,i),(n.mode&61440)===16384?(n.Cb=O.Vb.dir.node,n.Mb=O.Vb.dir.stream,n.Nb={}):(n.mode&61440)===32768?(n.Cb=O.Vb.file.node,n.Mb=O.Vb.file.stream,n.Pb=0,n.Nb=null):(n.mode&61440)===40960?(n.Cb=O.Vb.link.node,n.Mb=O.Vb.link.stream):(n.mode&61440)===8192&&(n.Cb=O.Vb.wc.node,n.Mb=O.Vb.wc.stream),n.timestamp=Date.now(),t&&(t.Nb[e]=n,t.timestamp=n.timestamp),n},Uc:function(t){return t.Nb?t.Nb.subarray?t.Nb.subarray(0,t.Pb):new Uint8Array(t.Nb):new Uint8Array(0)},xc:function(t,e){var n=t.Nb?t.Nb.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),n!=0&&(e=Math.max(e,256)),n=t.Nb,t.Nb=new Uint8Array(e),0<t.Pb&&t.Nb.set(n.subarray(0,t.Pb),0))},Qc:function(t,e){if(t.Pb!=e)if(e==0)t.Nb=null,t.Pb=0;else{var n=t.Nb;t.Nb=new Uint8Array(e),n&&t.Nb.set(n.subarray(0,Math.min(e,t.Pb))),t.Pb=e}},Cb:{Tb:function(t){var e={};return e.Ic=(t.mode&61440)===8192?t.id:1,e.qc=t.id,e.mode=t.mode,e.Oc=1,e.uid=0,e.Lc=0,e.ec=t.ec,(t.mode&61440)===16384?e.size=4096:(t.mode&61440)===32768?e.size=t.Pb:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.Ec=new Date(t.timestamp),e.Nc=new Date(t.timestamp),e.Hc=new Date(t.timestamp),e.Fc=4096,e.Gc=Math.ceil(e.size/e.Fc),e},Qb:function(t,e){e.mode!==void 0&&(t.mode=e.mode),e.timestamp!==void 0&&(t.timestamp=e.timestamp),e.size!==void 0&&O.Qc(t,e.size)},cc:function(){throw Ue[44]},jc:function(t,e,n,i){return O.createNode(t,e,n,i)},Cc:function(t,e,n){if((t.mode&61440)===16384){try{var i=$t(e,n)}catch{}if(i)for(var o in i.Nb)throw new E(55)}delete t.parent.Nb[t.name],t.parent.timestamp=Date.now(),t.name=n,e.Nb[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},oc:function(t,e){delete t.Nb[e],t.timestamp=Date.now()},mc:function(t,e){var n=$t(t,e),i;for(i in n.Nb)throw new E(55);delete t.Nb[e],t.timestamp=Date.now()},Bc:function(t){var e=[".",".."],n;for(n in t.Nb)t.Nb.hasOwnProperty(n)&&e.push(n);return e},nc:function(t,e,n){return t=O.createNode(t,e,41471,0),t.link=n,t},fc:function(t){if((t.mode&61440)!==40960)throw new E(28);return t.link}},Mb:{read:function(t,e,n,i,o){var m=t.node.Nb;if(o>=t.node.Pb)return 0;if(t=Math.min(t.node.Pb-o,i),8<t&&m.subarray)e.set(m.subarray(o,o+t),n);else for(i=0;i<t;i++)e[n+i]=m[o+i];return t},write:function(t,e,n,i,o,m){if(e.buffer===w.buffer&&(m=!1),!i)return 0;if(t=t.node,t.timestamp=Date.now(),e.subarray&&(!t.Nb||t.Nb.subarray)){if(m)return t.Nb=e.subarray(n,n+i),t.Pb=i;if(t.Pb===0&&o===0)return t.Nb=e.slice(n,n+i),t.Pb=i;if(o+i<=t.Pb)return t.Nb.set(e.subarray(n,n+i),o),i}if(O.xc(t,o+i),t.Nb.subarray&&e.subarray)t.Nb.set(e.subarray(n,n+i),o);else for(m=0;m<i;m++)t.Nb[o+m]=e[n+m];return t.Pb=Math.max(t.Pb,o+i),i},Zb:function(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Pb),0>e)throw new E(28);return e},vc:function(t,e,n){O.xc(t.node,e+n),t.node.Pb=Math.max(t.node.Pb,e+n)},kc:function(t,e,n,i,o){if((t.node.mode&61440)!==32768)throw new E(43);if(t=t.node.Nb,o&2||t.buffer!==w.buffer){if((0<n||n+e<t.length)&&(t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e)),n=!0,e=65536*Math.ceil(e/65536),(o=jr(65536,e))?(q.fill(0,o,o+e),e=o):e=0,!e)throw new E(48);w.set(t,e)}else n=!1,e=t.byteOffset;return{Pc:e,Dc:n}},lc:function(t,e,n,i){return O.Mb.write(t,e,0,i,n,!1),0}}},Pe=null,On={},At=[],Xi=1,qt=null,Ln=!0,E=null,Ue={},at=(t,e={})=>{if(t=be(t),!t)return{path:"",node:null};if(e=Object.assign({yc:!0,tc:0},e),8<e.tc)throw new E(32);t=t.split("/").filter(f=>!!f);for(var n=Pe,i="/",o=0;o<t.length;o++){var m=o===t.length-1;if(m&&e.parent)break;if(n=$t(n,t[o]),i=St(i+"/"+t[o]),n.$b&&(!m||m&&e.yc)&&(n=n.$b.root),!m||e.Yb){for(m=0;(n.mode&61440)===40960;)if(n=Hn(i),i=be(Mi(i),n),n=at(i,{tc:e.tc+1}).node,40<m++)throw new E(32)}}return{path:i,node:n}},ye=t=>{for(var e;;){if(t===t.parent)return t=t.Ub.Ac,e?t[t.length-1]!=="/"?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}},$e=(t,e)=>{for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%qt.length},kn=t=>{var e=$e(t.parent.id,t.name);if(qt[e]===t)qt[e]=t.ac;else for(e=qt[e];e;){if(e.ac===t){e.ac=t.ac;break}e=e.ac}},$t=(t,e)=>{var n;if(n=(n=Wt(t,"x"))?n:t.Cb.cc?0:2)throw new E(n,t);for(n=qt[$e(t.id,e)];n;n=n.ac){var i=n.name;if(n.parent.id===t.id&&i===e)return n}return t.Cb.cc(t,e)},Dn=(t,e,n,i)=>(t=new Qr(t,e,n,i),e=$e(t.parent.id,t.name),t.ac=qt[e],qt[e]=t),Yi={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Pn=t=>{var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e},Wt=(t,e)=>{if(Ln)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0},Un=(t,e)=>{try{return $t(t,e),20}catch{}return Wt(t,"wx")},$n=(t,e,n)=>{try{var i=$t(t,e)}catch(o){return o.Ob}if(t=Wt(t,"wx"))return t;if(n){if((i.mode&61440)!==16384)return 54;if(i===i.parent||ye(i)==="/")return 10}else if((i.mode&61440)===16384)return 31;return 0},Zi=(t=0)=>{for(;4096>=t;t++)if(!At[t])return t;throw new E(33)},zn=(t,e)=>(oe||(oe=function(){this.hc={}},oe.prototype={},Object.defineProperties(oe.prototype,{object:{get:function(){return this.node},set:function(n){this.node=n}},flags:{get:function(){return this.hc.flags},set:function(n){this.hc.flags=n}},position:{get:function(){return this.hc.position},set:function(n){this.hc.position=n}}})),t=Object.assign(new oe,t),e=Zi(e),t.Wb=e,At[e]=t),Gi={open:t=>{t.Mb=On[t.node.ec].Mb,t.Mb.open&&t.Mb.open(t)},Zb:()=>{throw new E(70)}},ze=(t,e)=>{On[t]={Mb:e}},Bn=(t,e)=>{var n=e==="/",i=!e;if(n&&Pe)throw new E(10);if(!n&&!i){var o=at(e,{yc:!1});if(e=o.path,o=o.node,o.$b)throw new E(10);if((o.mode&61440)!==16384)throw new E(54)}e={type:t,Wc:{},Ac:e,Mc:[]},t=t.Ub(e),t.Ub=e,e.root=t,n?Pe=t:o&&(o.$b=e,o.Ub&&o.Ub.Mc.push(e))},Be=(t,e,n)=>{var i=at(t,{parent:!0}).node;if(t=we(t),!t||t==="."||t==="..")throw new E(28);var o=Un(i,t);if(o)throw new E(o);if(!i.Cb.jc)throw new E(63);return i.Cb.jc(i,t,e,n)},pt=(t,e)=>Be(t,(e!==void 0?e:511)&1023|16384,0),ge=(t,e,n)=>{typeof n>"u"&&(n=e,e=438),Be(t,e|8192,n)},Fe=(t,e)=>{if(!be(t))throw new E(44);var n=at(e,{parent:!0}).node;if(!n)throw new E(44);e=we(e);var i=Un(n,e);if(i)throw new E(i);if(!n.Cb.nc)throw new E(63);n.Cb.nc(n,e,t)},Fn=t=>{var e=at(t,{parent:!0}).node;t=we(t);var n=$t(e,t),i=$n(e,t,!0);if(i)throw new E(i);if(!e.Cb.mc)throw new E(63);if(n.$b)throw new E(10);e.Cb.mc(e,t),kn(n)},Hn=t=>{if(t=at(t).node,!t)throw new E(44);if(!t.Cb.fc)throw new E(28);return be(ye(t.parent),t.Cb.fc(t))},ve=(t,e)=>{if(t=at(t,{Yb:!e}).node,!t)throw new E(44);if(!t.Cb.Tb)throw new E(63);return t.Cb.Tb(t)},Qn=t=>ve(t,!0),Mn=(t,e)=>{if(t=typeof t=="string"?at(t,{Yb:!0}).node:t,!t.Cb.Qb)throw new E(63);t.Cb.Qb(t,{mode:e&4095|t.mode&-4096,timestamp:Date.now()})},Vn=(t,e)=>{if(0>e)throw new E(28);if(t=typeof t=="string"?at(t,{Yb:!0}).node:t,!t.Cb.Qb)throw new E(63);if((t.mode&61440)===16384)throw new E(31);if((t.mode&61440)!==32768)throw new E(28);var n=Wt(t,"w");if(n)throw new E(n);t.Cb.Qb(t,{size:e,timestamp:Date.now()})},Ee=(t,e,n)=>{if(t==="")throw new E(44);if(typeof e=="string"){var i=Yi[e];if(typeof i>"u")throw Error("Unknown file open mode: "+e);e=i}if(n=e&64?(typeof n>"u"?438:n)&4095|32768:0,typeof t=="object")var o=t;else{t=St(t);try{o=at(t,{Yb:!(e&131072)}).node}catch{}}if(i=!1,e&64)if(o){if(e&128)throw new E(20)}else o=Be(t,n,0),i=!0;if(!o)throw new E(44);if((o.mode&61440)===8192&&(e&=-513),e&65536&&(o.mode&61440)!==16384)throw new E(54);if(!i&&(n=o?(o.mode&61440)===40960?32:(o.mode&61440)===16384&&(Pn(e)!=="r"||e&512)?31:Wt(o,Pn(e)):44))throw new E(n);return e&512&&!i&&Vn(o,0),e&=-131713,o=zn({node:o,path:ye(o),flags:e,seekable:!0,position:0,Mb:o.Mb,Tc:[],error:!1}),o.Mb.open&&o.Mb.open(o),!r.logReadFiles||e&1||(xe||(xe={}),t in xe||(xe[t]=1)),o},Wn=(t,e,n)=>{if(t.Wb===null)throw new E(8);if(!t.seekable||!t.Mb.Zb)throw new E(70);if(n!=0&&n!=1&&n!=2)throw new E(28);t.position=t.Mb.Zb(t,e,n),t.Tc=[]},jn=()=>{E||(E=function(t,e){this.name="ErrnoError",this.node=e,this.Rc=function(n){this.Ob=n},this.Rc(t),this.message="FS error"},E.prototype=Error(),E.prototype.constructor=E,[44].forEach(t=>{Ue[t]=new E(t),Ue[t].stack="<generic error, no stack>"}))},Kn,Ji=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},se=(t,e,n)=>{t=St("/dev/"+t);var i=Ji(!!e,!!n);He||(He=64);var o=He++<<8|0;ze(o,{open:m=>{m.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(m,f,b,_)=>{for(var p=0,x=0;x<_;x++){try{var g=e()}catch{throw new E(29)}if(g===void 0&&p===0)throw new E(6);if(g==null)break;p++,f[b+x]=g}return p&&(m.node.timestamp=Date.now()),p},write:(m,f,b,_)=>{for(var p=0;p<_;p++)try{n(f[b+p])}catch{throw new E(29)}return _&&(m.node.timestamp=Date.now()),p}}),ge(t,i,o)},He,j={},oe,xe;function zt(t,e,n){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":ht(t).path,e.length==0){if(!n)throw new E(44);return t}return St(t+"/"+e)}function Se(t,e,n){try{var i=t(e)}catch(m){if(m&&m.node&&St(e)!==St(ye(m.node)))return-54;throw m}R[n>>2]=i.Ic,R[n+8>>2]=i.qc,R[n+12>>2]=i.mode,z[n+16>>2]=i.Oc,R[n+20>>2]=i.uid,R[n+24>>2]=i.Lc,R[n+28>>2]=i.ec,Q=[i.size>>>0,(I=i.size,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[n+40>>2]=Q[0],R[n+44>>2]=Q[1],R[n+48>>2]=4096,R[n+52>>2]=i.Gc,t=i.Ec.getTime(),e=i.Nc.getTime();var o=i.Hc.getTime();return Q=[Math.floor(t/1e3)>>>0,(I=Math.floor(t/1e3),1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[n+56>>2]=Q[0],R[n+60>>2]=Q[1],z[n+64>>2]=t%1e3*1e3,Q=[Math.floor(e/1e3)>>>0,(I=Math.floor(e/1e3),1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[n+72>>2]=Q[0],R[n+76>>2]=Q[1],z[n+80>>2]=e%1e3*1e3,Q=[Math.floor(o/1e3)>>>0,(I=Math.floor(o/1e3),1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[n+88>>2]=Q[0],R[n+92>>2]=Q[1],z[n+96>>2]=o%1e3*1e3,Q=[i.qc>>>0,(I=i.qc,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[n+104>>2]=Q[0],R[n+108>>2]=Q[1],0}var Ae=void 0;function qe(){return Ae+=4,R[Ae-4>>2]}function ht(t){if(t=At[t],!t)throw new E(8);return t}function jt(t,e,n){return Cn(t,q,e,n)}function Qe(t){return z[t>>2]+4294967296*R[t+4>>2]}var ts=[0,31,60,91,121,152,182,213,244,274,305,335],es=[0,31,59,90,120,151,181,212,243,273,304,334];function Xn(t){var e=Ut(t)+1,n=Ke(e);return n&&jt(t,n,e),n}var Me={};function Yn(){if(!Ve){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:T||"./this.program"},e;for(e in Me)Me[e]===void 0?delete t[e]:t[e]=Me[e];var n=[];for(e in t)n.push(e+"="+t[e]);Ve=n}return Ve}var Ve;function Zn(){}function Gn(){}function Jn(){}function tr(){}function er(){}function nr(){}function rr(){}function ir(){}function sr(){}function or(){}function ur(){}function ar(){}function cr(){}function lr(){}function fr(){}function hr(){}function mr(){}function _r(){}function pr(){}function dr(){}function wr(){}function br(){}function yr(){}function gr(){}function vr(){}function Er(){}function xr(){}function Sr(){}function Ar(){}function qr(){}function Rr(){}function Ir(){}function Cr(){}function Tr(){}function Nr(){}function Or(){}function Lr(){}function kr(){}function Dr(){}function Pr(t){h=t,c||0<pe||(r.onExit&&r.onExit(t),a=!0),P(t,new An(t))}function We(t){t instanceof An||t=="unwind"||P(1,t)}function Re(t){try{t()}catch(e){ft(e)}}function ns(t){var e={},n;for(n in t)(function(i){var o=t[i];e[i]=typeof o=="function"?function(){Ie.push(i);try{return o.apply(null,arguments)}finally{a||(Ie.pop()===i||ft(),dt&&Rt===1&&Ie.length===0&&(Rt=0,Re(Gr),typeof Fibers<"u"&&Fibers.Xc()))}}:o})(n);return e}var Rt=0,dt=null,Ur=0,Ie=[],$r={},zr={},rs=0,je=null,is=[];function ss(){return new Promise((t,e)=>{je={resolve:t,reject:e}})}function os(){var t=Ke(12300),e=t+12;R[t>>2]=e,R[t+4>>2]=e+12288,e=Ie[0];var n=$r[e];return n===void 0&&(n=rs++,$r[e]=n,zr[n]=e),R[t+8>>2]=n,t}function Br(t){if(!a){if(Rt===0){var e=!1,n=!1;t((i=0)=>{if(!a&&(Ur=i,e=!0,n)){Rt=2,Re(()=>Jr(dt)),i=!1;try{var o=(0,r.asm[zr[R[dt+8>>2]]])()}catch(b){o=b,i=!0}var m=!1;if(!dt){var f=je;f&&(je=null,(i?f.reject:f.resolve)(o),m=!0)}if(i&&!m)throw o}}),n=!0,e||(Rt=1,dt=os(),Re(()=>Zr(dt)))}else Rt===2?(Rt=0,Re(ti),Vr(dt),dt=null,is.forEach(i=>{if(!a)try{if(i(),!(c||0<pe))try{h=i=h,Pr(i)}catch(o){We(o)}}catch(o){We(o)}})):ft("invalid state: "+Rt);return Ur}}function Fr(t){return Br(e=>{t().then(e)})}var Hr={};function wt(t,e,n,i,o){function m(g){return--pe,_!==0&&Yr(_),e==="string"?B(g):e==="boolean"?!!g:g}var f={string:g=>{var S=0;if(g!=null&&g!==0){S=Ut(g)+1;var k=Xe(S);jt(g,k,S),S=k}return S},array:g=>{var S=Xe(g.length);return w.set(g,S),S}};t=r["_"+t];var b=[],_=0;if(i)for(var p=0;p<i.length;p++){var x=f[n[p]];x?(_===0&&(_=Xr()),b[p]=x(i[p])):b[p]=i[p]}return n=dt,i=t.apply(null,b),pe+=1,o=o&&o.async,dt!=n?ss().then(m):(i=m(i),o?Promise.resolve(i):i)}function Qr(t,e,n,i){t||(t=this),this.parent=t,this.Ub=t.Ub,this.$b=null,this.id=Xi++,this.name=e,this.mode=n,this.Cb={},this.Mb={},this.ec=i}Object.defineProperties(Qr.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(t){t?this.mode|=146:this.mode&=-147}}}),jn(),qt=Array(4096),Bn(O,"/"),pt("/tmp"),pt("/home"),pt("/home/web_user"),(()=>{pt("/dev"),ze(259,{read:()=>0,write:(i,o,m,f)=>f}),ge("/dev/null",259),Nn(1280,ji),Nn(1536,Ki),ge("/dev/tty",1280),ge("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(e===0&&(e=In(t).byteLength),t[--e]);se("random",n),se("urandom",n),pt("/dev/shm"),pt("/dev/shm/tmp")})(),(()=>{pt("/proc");var t=pt("/proc/self");pt("/proc/self/fd"),Bn({Ub:()=>{var e=Dn(t,"fd",16895,73);return e.Cb={cc:(n,i)=>{var o=At[+i];if(!o)throw new E(8);return n={parent:null,Ub:{Ac:"fake"},Cb:{fc:()=>o.path}},n.parent=n}},e}},"/proc/self/fd")})(),function(){const t=new Map;r.setAuthorizer=function(e,n,i){return n?t.set(e,{f:n,uc:i}):t.delete(e),wt("set_authorizer","number",["number"],[e])},Zn=function(e,n,i,o,m,f){if(t.has(e)){const{f:b,uc:_}=t.get(e);return b(_,n,i?B(i):null,o?B(o):null,m?B(m):null,f?B(f):null)}return 0}}(),function(){const t=new Map,e=new Map;r.createFunction=function(n,i,o,m,f,b){const _=t.size;return t.set(_,{f:b,Xb:f}),wt("create_function","number","number string number number number number".split(" "),[n,i,o,m,_,0])},r.createAggregate=function(n,i,o,m,f,b,_){const p=t.size;return t.set(p,{step:b,Jc:_,Xb:f}),wt("create_function","number","number string number number number number".split(" "),[n,i,o,m,p,1])},r.getFunctionUserData=function(n){return e.get(n)},Jn=function(n,i,o,m){n=t.get(n),e.set(i,n.Xb),n.f(i,new Uint32Array(q.buffer,m,o)),e.delete(i)},er=function(n,i,o,m){n=t.get(n),e.set(i,n.Xb),n.step(i,new Uint32Array(q.buffer,m,o)),e.delete(i)},Gn=function(n,i){n=t.get(n),e.set(i,n.Xb),n.Jc(i),e.delete(i)}}(),function(){const t=new Map;r.progressHandler=function(e,n,i,o){return i?t.set(e,{f:i,uc:o}):t.delete(e),wt("progress_handler",null,["number","number"],[e,n])},tr=function(e){if(t.has(e)){const{f:n,uc:i}=t.get(e);return n(i)}return 0}}(),function(){function t(_,p){const x=`get${_}`,g=`set${_}`;return new Proxy(new DataView(q.buffer,p,_==="Int32"?4:8),{get(S,k){if(k===x)return function(M,nt){if(!nt)throw Error("must be little endian");return S[k](M,nt)};if(k===g)return function(M,nt,G){if(!G)throw Error("must be little endian");return S[k](M,nt,G)};if(typeof k=="string"&&k.match(/^(get)|(set)/))throw Error("invalid type");return S[k]}})}const e=typeof Hr=="object",n=new Map,i=new Map,o=new Map,m=e?new Set:null,f=e?new Set:null,b=new Map;br=function(_,p,x,g){b.set(B(_),{size:p,dc:Array.from(new Uint32Array(q.buffer,g,x))})},r.createModule=function(_,p,x,g){e&&(x.handleAsync=Fr);const S=n.size;return n.set(S,{module:x,Xb:g}),g=0,x.xCreate&&(g|=1),x.xConnect&&(g|=2),x.xBestIndex&&(g|=4),x.xDisconnect&&(g|=8),x.xDestroy&&(g|=16),x.xOpen&&(g|=32),x.xClose&&(g|=64),x.xFilter&&(g|=128),x.xNext&&(g|=256),x.xEof&&(g|=512),x.xColumn&&(g|=1024),x.xRowid&&(g|=2048),x.xUpdate&&(g|=4096),x.xBegin&&(g|=8192),x.xSync&&(g|=16384),x.xCommit&&(g|=32768),x.xRollback&&(g|=65536),x.xFindFunction&&(g|=131072),x.xRename&&(g|=262144),wt("create_module","number",["number","string","number","number"],[_,p,S,g])},ar=function(_,p,x,g,S,k){if(p=n.get(p),i.set(S,p),e){m.delete(S);for(const M of m)i.delete(M)}return g=Array.from(new Uint32Array(q.buffer,g,x)).map(M=>B(M)),p.module.xCreate(_,p.Xb,g,S,t("Int32",k))},ur=function(_,p,x,g,S,k){if(p=n.get(p),i.set(S,p),e){m.delete(S);for(const M of m)i.delete(M)}return g=Array.from(new Uint32Array(q.buffer,g,x)).map(M=>B(M)),p.module.xConnect(_,p.Xb,g,S,t("Int32",k))},rr=function(_,p){var x=i.get(_),g=b.get("sqlite3_index_info").dc;const S={};S.nConstraint=et(p+g[0],"i32"),S.aConstraint=[];for(var k=et(p+g[1],"*"),M=b.get("sqlite3_index_constraint").size,nt=0;nt<S.nConstraint;++nt){var G=S.aConstraint,ct=G.push,st=k+nt*M,Kt=b.get("sqlite3_index_constraint").dc,It={};It.iColumn=et(st+Kt[0],"i32"),It.op=et(st+Kt[1],"i8"),It.usable=!!et(st+Kt[2],"i8"),ct.call(G,It)}for(S.nOrderBy=et(p+g[2],"i32"),S.aOrderBy=[],k=et(p+g[3],"*"),M=b.get("sqlite3_index_orderby").size,nt=0;nt<S.nOrderBy;++nt)G=S.aOrderBy,ct=G.push,st=k+nt*M,Kt=b.get("sqlite3_index_orderby").dc,It={},It.iColumn=et(st+Kt[0],"i32"),It.desc=!!et(st+Kt[1],"i8"),ct.call(G,It);for(S.aConstraintUsage=[],k=0;k<S.nConstraint;++k)S.aConstraintUsage.push({argvIndex:0,omit:!1});for(S.idxNum=et(p+g[5],"i32"),S.idxStr=null,S.orderByConsumed=!!et(p+g[8],"i8"),S.estimatedCost=et(p+g[9],"double"),S.estimatedRows=et(p+g[10],"i64"),S.idxFlags=et(p+g[11],"i32"),S.colUsed=et(p+g[12],"i64"),_=x.module.xBestIndex(_,S),x=b.get("sqlite3_index_info").dc,g=et(p+x[4],"*"),k=b.get("sqlite3_index_constraint_usage").size,ct=0;ct<S.nConstraint;++ct)M=g+ct*k,G=S.aConstraintUsage[ct],st=b.get("sqlite3_index_constraint_usage").dc,_t(M+st[0],G.argvIndex,"i32"),_t(M+st[1],G.omit?1:0,"i8");return _t(p+x[5],S.idxNum,"i32"),typeof S.idxStr=="string"&&(g=Ut(S.idxStr),k=wt("sqlite3_malloc","number",["number"],[g+1]),jt(S.idxStr,k,g+1),_t(p+x[6],k,"*"),_t(p+x[7],1,"i32")),_t(p+x[8],S.orderByConsumed,"i32"),_t(p+x[9],S.estimatedCost,"double"),_t(p+x[10],S.estimatedRows,"i64"),_t(p+x[11],S.idxFlags,"i32"),_},lr=function(_){const p=i.get(_);return e?m.add(_):i.delete(_),p.module.xDisconnect(_)},cr=function(_){const p=i.get(_);return e?m.add(_):i.delete(_),p.module.xDestroy(_)},_r=function(_,p){const x=i.get(_);if(o.set(p,x),e){f.delete(p);for(const g of f)o.delete(g)}return x.module.xOpen(_,p)},ir=function(_){const p=o.get(_);return e?f.add(_):o.delete(_),p.module.xClose(_)},fr=function(_){return o.get(_).module.xEof(_)?1:0},hr=function(_,p,x,g,S){const k=o.get(_);return x=x?B(x):null,S=new Uint32Array(q.buffer,S,g),k.module.xFilter(_,p,x,S)},mr=function(_){return o.get(_).module.xNext(_)},sr=function(_,p,x){return o.get(_).module.xColumn(_,p,x)},wr=function(_,p){return o.get(_).module.xRowid(_,t("BigInt64",p))},gr=function(_,p,x,g){const S=i.get(_);return x=new Uint32Array(q.buffer,x,p),S.module.xUpdate(_,x,t("BigInt64",g))},nr=function(_){return i.get(_).module.xBegin(_)},yr=function(_){return i.get(_).module.xSync(_)},or=function(_){return i.get(_).module.xCommit(_)},dr=function(_){return i.get(_).module.xRollback(_)},pr=function(_,p){const x=i.get(_);return p=B(p),x.module.xRename(_,p)}}(),function(){function t(f,b){const _=`get${f}`,p=`set${f}`;return new Proxy(new DataView(q.buffer,b,f==="Int32"?4:8),{get(x,g){if(g===_)return function(S,k){if(!k)throw Error("must be little endian");return x[g](S,k)};if(g===p)return function(S,k,M){if(!M)throw Error("must be little endian");return x[g](S,k,M)};if(typeof g=="string"&&g.match(/^(get)|(set)/))throw Error("invalid type");return x[g]}})}function e(f){return f>>=2,z[f]+z[f+1]*2**32}const n=typeof Hr=="object",i=new Map,o=new Map;r.registerVFS=function(f,b){if(wt("sqlite3_vfs_find","number",["string"],[f.name]))throw Error(`VFS '${f.name}' already registered`);n&&(f.handleAsync=Fr);var _=f.Vc??64;const p=r._malloc(4);return b=wt("register_vfs","number",["string","number","number","number"],[f.name,_,b?1:0,p]),b||(_=et(p,"*"),i.set(_,f)),r._free(p),b};const m=n?new Set:null;xr=function(f){const b=o.get(f);return n?m.add(f):o.delete(f),b.xClose(f)},Tr=function(f,b,_,p){return o.get(f).xRead(f,q.subarray(b,b+_),e(p))},Dr=function(f,b,_,p){return o.get(f).xWrite(f,q.subarray(b,b+_),e(p))},Lr=function(f,b){return o.get(f).xTruncate(f,e(b))},Or=function(f,b){return o.get(f).xSync(f,b)},Rr=function(f,b){const _=o.get(f);return b=t("BigInt64",b),_.xFileSize(f,b)},Ir=function(f,b){return o.get(f).xLock(f,b)},kr=function(f,b){return o.get(f).xUnlock(f,b)},Er=function(f,b){const _=o.get(f);return b=t("Int32",b),_.xCheckReservedLock(f,b)},qr=function(f,b,_){const p=o.get(f);return _=new DataView(q.buffer,_),p.xFileControl(f,b,_)},Nr=function(f){return o.get(f).xSectorSize(f)},Ar=function(f){return o.get(f).xDeviceCharacteristics(f)},Cr=function(f,b,_,p,x){if(f=i.get(f),o.set(_,f),n){m.delete(_);for(var g of m)o.delete(g)}if(g=null,p&64){g=1;const S=[];for(;g;){const k=q[b++];if(k)S.push(k);else switch(q[b]||(g=null),g){case 1:S.push(63),g=2;break;case 2:S.push(61),g=3;break;case 3:S.push(38),g=2}}g=new TextDecoder().decode(new Uint8Array(S))}else b&&(g=B(b));return x=t("Int32",x),f.xOpen(g,_,p,x)},Sr=function(f,b,_){return i.get(f).xDelete(B(b),_)},vr=function(f,b,_,p){return f=i.get(f),p=t("Int32",p),f.xAccess(B(b),_,p)}}();var us={a:function(t,e,n,i){ft("Assertion failed: "+B(t)+", at: "+[e?B(e):"unknown filename",n,i?B(i):"unknown function"])},K:function(t,e){try{return t=B(t),Mn(t,e),0}catch(n){if(typeof j>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},M:function(t,e,n){try{if(e=B(e),e=zt(t,e),n&-8)return-28;var i=at(e,{Yb:!0}).node;return i?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),t&&Wt(i,t)?-2:0):-44}catch(o){if(typeof j>"u"||o.name!=="ErrnoError")throw o;return-o.Ob}},L:function(t,e){try{var n=At[t];if(!n)throw new E(8);return Mn(n.node,e),0}catch(i){if(typeof j>"u"||i.name!=="ErrnoError")throw i;return-i.Ob}},J:function(t){try{var e=At[t];if(!e)throw new E(8);var n=e.node,i=typeof n=="string"?at(n,{Yb:!0}).node:n;if(!i.Cb.Qb)throw new E(63);return i.Cb.Qb(i,{timestamp:Date.now()}),0}catch(o){if(typeof j>"u"||o.name!=="ErrnoError")throw o;return-o.Ob}},b:function(t,e,n){Ae=n;try{var i=ht(t);switch(e){case 0:var o=qe();return 0>o?-28:zn(i,o).Wb;case 1:case 2:return 0;case 3:return i.flags;case 4:return o=qe(),i.flags|=o,0;case 5:return o=qe(),W[o+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return R[Mr()>>2]=28,-1;default:return-28}}catch(m){if(typeof j>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},I:function(t,e){try{var n=ht(t);return Se(ve,n.path,e)}catch(i){if(typeof j>"u"||i.name!=="ErrnoError")throw i;return-i.Ob}},j:function(t,e,n){try{if(e=n+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*n:NaN,isNaN(e))return-61;var i=At[t];if(!i)throw new E(8);if(!(i.flags&2097155))throw new E(28);return Vn(i.node,e),0}catch(o){if(typeof j>"u"||o.name!=="ErrnoError")throw o;return-o.Ob}},C:function(t,e){try{if(e===0)return-28;var n=Ut("/")+1;return e<n?-68:(jt("/",t,e),n)}catch(i){if(typeof j>"u"||i.name!=="ErrnoError")throw i;return-i.Ob}},F:function(t,e){try{return t=B(t),Se(Qn,t,e)}catch(n){if(typeof j>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},z:function(t,e,n){try{return e=B(e),e=zt(t,e),e=St(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),pt(e,n),0}catch(i){if(typeof j>"u"||i.name!=="ErrnoError")throw i;return-i.Ob}},E:function(t,e,n,i){try{e=B(e);var o=i&256;return e=zt(t,e,i&4096),Se(o?Qn:ve,e,n)}catch(m){if(typeof j>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},u:function(t,e,n,i){Ae=i;try{e=B(e),e=zt(t,e);var o=i?qe():0;return Ee(e,n,o).Wb}catch(m){if(typeof j>"u"||m.name!=="ErrnoError")throw m;return-m.Ob}},s:function(t,e,n,i){try{if(e=B(e),e=zt(t,e),0>=i)return-28;var o=Hn(e),m=Math.min(i,Ut(o)),f=w[n+m];return jt(o,n,i+1),w[n+m]=f,m}catch(b){if(typeof j>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},r:function(t){try{return t=B(t),Fn(t),0}catch(e){if(typeof j>"u"||e.name!=="ErrnoError")throw e;return-e.Ob}},H:function(t,e){try{return t=B(t),Se(ve,t,e)}catch(n){if(typeof j>"u"||n.name!=="ErrnoError")throw n;return-n.Ob}},o:function(t,e,n){try{if(e=B(e),e=zt(t,e),n===0){t=e;var i=at(t,{parent:!0}).node;if(!i)throw new E(44);var o=we(t),m=$t(i,o),f=$n(i,o,!1);if(f)throw new E(f);if(!i.Cb.oc)throw new E(63);if(m.$b)throw new E(10);i.Cb.oc(i,o),kn(m)}else n===512?Fn(e):ft("Invalid flags passed to unlinkat");return 0}catch(b){if(typeof j>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},n:function(t,e,n){try{if(e=B(e),e=zt(t,e,!0),n){var i=Qe(n),o=R[n+8>>2];m=1e3*i+o/1e6,n+=16,i=Qe(n),o=R[n+8>>2],f=1e3*i+o/1e6}else var m=Date.now(),f=m;t=m;var b=at(e,{Yb:!0}).node;return b.Cb.Qb(b,{timestamp:Math.max(t,f)}),0}catch(_){if(typeof j>"u"||_.name!=="ErrnoError")throw _;return-_.Ob}},y:function(t,e){t=new Date(1e3*Qe(t)),R[e>>2]=t.getSeconds(),R[e+4>>2]=t.getMinutes(),R[e+8>>2]=t.getHours(),R[e+12>>2]=t.getDate(),R[e+16>>2]=t.getMonth(),R[e+20>>2]=t.getFullYear()-1900,R[e+24>>2]=t.getDay();var n=t.getFullYear();R[e+28>>2]=(n%4!==0||n%100===0&&n%400!==0?es:ts)[t.getMonth()]+t.getDate()-1|0,R[e+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var i=new Date(t.getFullYear(),0,1).getTimezoneOffset();R[e+32>>2]=(n!=i&&t.getTimezoneOffset()==Math.min(i,n))|0},w:function(t,e,n,i,o,m,f){try{var b=ht(i);if(e&2&&!(n&2)&&(b.flags&2097155)!==2)throw new E(2);if((b.flags&2097155)===1)throw new E(2);if(!b.Mb.kc)throw new E(43);var _=b.Mb.kc(b,t,o,e,n),p=_.Pc;return R[m>>2]=_.Dc,z[f>>2]=p,0}catch(x){if(typeof j>"u"||x.name!=="ErrnoError")throw x;return-x.Ob}},x:function(t,e,n,i,o,m){try{var f=ht(o);if(n&2){if((f.node.mode&61440)!==32768)throw new E(43);i&2||f.Mb.lc&&f.Mb.lc(f,q.slice(t,t+e),m,e,i)}}catch(b){if(typeof j>"u"||b.name!=="ErrnoError")throw b;return-b.Ob}},p:function(t,e,n){function i(_){return(_=_.toTimeString().match(/\(([A-Za-z ]+)\)$/))?_[1]:"GMT"}var o=new Date().getFullYear(),m=new Date(o,0,1),f=new Date(o,6,1);o=m.getTimezoneOffset();var b=f.getTimezoneOffset();z[t>>2]=60*Math.max(o,b),R[e>>2]=+(o!=b),t=i(m),e=i(f),t=Xn(t),e=Xn(e),b<o?(z[n>>2]=t,z[n+4>>2]=e):(z[n>>2]=e,z[n+4>>2]=t)},e:function(){return Date.now()},d:()=>performance.now(),l:function(t){var e=q.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296);var o=Math,m=o.min;i=Math.max(t,i),i+=(65536-i%65536)%65536;t:{var f=l.buffer;try{l.grow(m.call(o,2147483648,i)-f.byteLength+65535>>>16),wn();var b=1;break t}catch{}b=void 0}if(b)return!0}return!1},A:function(t,e){var n=0;return Yn().forEach(function(i,o){var m=e+n;for(o=z[t+4*o>>2]=m,m=0;m<i.length;++m)w[o++>>0]=i.charCodeAt(m);w[o>>0]=0,n+=i.length+1}),0},B:function(t,e){var n=Yn();z[t>>2]=n.length;var i=0;return n.forEach(function(o){i+=o.length+1}),z[e>>2]=i,0},f:function(t){try{var e=ht(t);if(e.Wb===null)throw new E(8);e.pc&&(e.pc=null);try{e.Mb.close&&e.Mb.close(e)}catch(n){throw n}finally{At[e.Wb]=null}return e.Wb=null,0}catch(n){if(typeof j>"u"||n.name!=="ErrnoError")throw n;return n.Ob}},m:function(t,e){try{var n=ht(t);return w[e>>0]=n.Sb?2:(n.mode&61440)===16384?3:(n.mode&61440)===40960?7:4,W[e+2>>1]=0,Q=[0,(I=0,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[e+8>>2]=Q[0],R[e+12>>2]=Q[1],Q=[0,(I=0,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[e+16>>2]=Q[0],R[e+20>>2]=Q[1],0}catch(i){if(typeof j>"u"||i.name!=="ErrnoError")throw i;return i.Ob}},t:function(t,e,n,i){try{t:{var o=ht(t);t=e;for(var m,f=e=0;f<n;f++){var b=z[t>>2],_=z[t+4>>2];t+=8;var p=o,x=b,g=_,S=m,k=w;if(0>g||0>S)throw new E(28);if(p.Wb===null)throw new E(8);if((p.flags&2097155)===1)throw new E(8);if((p.node.mode&61440)===16384)throw new E(31);if(!p.Mb.read)throw new E(28);var M=typeof S<"u";if(!M)S=p.position;else if(!p.seekable)throw new E(70);var nt=p.Mb.read(p,k,x,g,S);M||(p.position+=nt);var G=nt;if(0>G){var ct=-1;break t}if(e+=G,G<_)break;typeof m<"u"&&(m+=G)}ct=e}return z[i>>2]=ct,0}catch(st){if(typeof j>"u"||st.name!=="ErrnoError")throw st;return st.Ob}},i:function(t,e,n,i,o){try{if(e=n+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*n:NaN,isNaN(e))return 61;var m=ht(t);return Wn(m,e,i),Q=[m.position>>>0,(I=m.position,1<=+Math.abs(I)?0<I?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],R[o>>2]=Q[0],R[o+4>>2]=Q[1],m.pc&&e===0&&i===0&&(m.pc=null),0}catch(f){if(typeof j>"u"||f.name!=="ErrnoError")throw f;return f.Ob}},D:function(t){try{var e=ht(t);return Br(function(n){var i=e.node.Ub;i.type.Sc?i.type.Sc(i,!1,function(o){n(o?function(){return 29}:0)}):n(0)})}catch(n){if(typeof j>"u"||n.name!=="ErrnoError")throw n;return n.Ob}},q:function(t,e,n,i){try{t:{var o=ht(t);t=e;for(var m,f=e=0;f<n;f++){var b=z[t>>2],_=z[t+4>>2];t+=8;var p=o,x=b,g=_,S=m,k=w;if(0>g||0>S)throw new E(28);if(p.Wb===null)throw new E(8);if(!(p.flags&2097155))throw new E(8);if((p.node.mode&61440)===16384)throw new E(31);if(!p.Mb.write)throw new E(28);p.seekable&&p.flags&1024&&Wn(p,0,2);var M=typeof S<"u";if(!M)S=p.position;else if(!p.seekable)throw new E(70);var nt=p.Mb.write(p,k,x,g,S,void 0);M||(p.position+=nt);var G=nt;if(0>G){var ct=-1;break t}e+=G,typeof m<"u"&&(m+=G)}ct=e}return z[i>>2]=ct,0}catch(st){if(typeof j>"u"||st.name!=="ErrnoError")throw st;return st.Ob}},ra:Zn,N:Gn,ga:Jn,ca:tr,Y:er,la:nr,G:rr,h:ir,oa:sr,ja:or,ea:ur,fa:ar,k:cr,v:lr,pa:fr,g:hr,qa:mr,da:_r,ha:pr,ia:dr,na:wr,c:br,ka:yr,ma:gr,aa:vr,V:Er,$:xr,ba:Sr,S:Ar,U:qr,Z:Rr,X:Ir,R:Cr,Q:Tr,T:Nr,_:Or,O:Lr,W:kr,P:Dr};(function(){function t(n){if(n=n.exports,n=ns(n),r.asm=n,l=r.asm.sa,wn(),yn.unshift(r.asm.ta),Dt--,r.monitorRunDependencies&&r.monitorRunDependencies(Dt),Dt==0&&re){var i=re;re=null,i()}return n}var e={a:us};if(Dt++,r.monitorRunDependencies&&r.monitorRunDependencies(Dt),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(n){V("Module.instantiateWasm callback failed with error: "+n),d(n)}return Qi(e,function(n){t(n.instance)}).catch(d),{}})(),r._sqlite3_vfs_find=function(){return(r._sqlite3_vfs_find=r.asm.ua).apply(null,arguments)},r._sqlite3_malloc=function(){return(r._sqlite3_malloc=r.asm.va).apply(null,arguments)},r._sqlite3_free=function(){return(r._sqlite3_free=r.asm.wa).apply(null,arguments)},r._sqlite3_prepare_v2=function(){return(r._sqlite3_prepare_v2=r.asm.xa).apply(null,arguments)},r._sqlite3_step=function(){return(r._sqlite3_step=r.asm.ya).apply(null,arguments)},r._sqlite3_column_int64=function(){return(r._sqlite3_column_int64=r.asm.za).apply(null,arguments)},r._sqlite3_column_int=function(){return(r._sqlite3_column_int=r.asm.Aa).apply(null,arguments)},r._sqlite3_finalize=function(){return(r._sqlite3_finalize=r.asm.Ba).apply(null,arguments)},r._sqlite3_reset=function(){return(r._sqlite3_reset=r.asm.Ca).apply(null,arguments)},r._sqlite3_clear_bindings=function(){return(r._sqlite3_clear_bindings=r.asm.Da).apply(null,arguments)},r._sqlite3_value_blob=function(){return(r._sqlite3_value_blob=r.asm.Ea).apply(null,arguments)},r._sqlite3_value_text=function(){return(r._sqlite3_value_text=r.asm.Fa).apply(null,arguments)},r._sqlite3_value_bytes=function(){return(r._sqlite3_value_bytes=r.asm.Ga).apply(null,arguments)},r._sqlite3_value_double=function(){return(r._sqlite3_value_double=r.asm.Ha).apply(null,arguments)},r._sqlite3_value_int=function(){return(r._sqlite3_value_int=r.asm.Ia).apply(null,arguments)},r._sqlite3_value_int64=function(){return(r._sqlite3_value_int64=r.asm.Ja).apply(null,arguments)},r._sqlite3_value_type=function(){return(r._sqlite3_value_type=r.asm.Ka).apply(null,arguments)},r._sqlite3_result_blob=function(){return(r._sqlite3_result_blob=r.asm.La).apply(null,arguments)},r._sqlite3_result_double=function(){return(r._sqlite3_result_double=r.asm.Ma).apply(null,arguments)},r._sqlite3_result_error=function(){return(r._sqlite3_result_error=r.asm.Na).apply(null,arguments)},r._sqlite3_result_int=function(){return(r._sqlite3_result_int=r.asm.Oa).apply(null,arguments)},r._sqlite3_result_int64=function(){return(r._sqlite3_result_int64=r.asm.Pa).apply(null,arguments)},r._sqlite3_result_null=function(){return(r._sqlite3_result_null=r.asm.Qa).apply(null,arguments)},r._sqlite3_result_text=function(){return(r._sqlite3_result_text=r.asm.Ra).apply(null,arguments)},r._sqlite3_column_count=function(){return(r._sqlite3_column_count=r.asm.Sa).apply(null,arguments)},r._sqlite3_data_count=function(){return(r._sqlite3_data_count=r.asm.Ta).apply(null,arguments)},r._sqlite3_column_blob=function(){return(r._sqlite3_column_blob=r.asm.Ua).apply(null,arguments)},r._sqlite3_column_bytes=function(){return(r._sqlite3_column_bytes=r.asm.Va).apply(null,arguments)},r._sqlite3_column_double=function(){return(r._sqlite3_column_double=r.asm.Wa).apply(null,arguments)},r._sqlite3_column_text=function(){return(r._sqlite3_column_text=r.asm.Xa).apply(null,arguments)},r._sqlite3_column_type=function(){return(r._sqlite3_column_type=r.asm.Ya).apply(null,arguments)},r._sqlite3_column_name=function(){return(r._sqlite3_column_name=r.asm.Za).apply(null,arguments)},r._sqlite3_bind_blob=function(){return(r._sqlite3_bind_blob=r.asm._a).apply(null,arguments)},r._sqlite3_bind_double=function(){return(r._sqlite3_bind_double=r.asm.$a).apply(null,arguments)},r._sqlite3_bind_int=function(){return(r._sqlite3_bind_int=r.asm.ab).apply(null,arguments)},r._sqlite3_bind_int64=function(){return(r._sqlite3_bind_int64=r.asm.bb).apply(null,arguments)},r._sqlite3_bind_null=function(){return(r._sqlite3_bind_null=r.asm.cb).apply(null,arguments)},r._sqlite3_bind_text=function(){return(r._sqlite3_bind_text=r.asm.db).apply(null,arguments)},r._sqlite3_bind_parameter_count=function(){return(r._sqlite3_bind_parameter_count=r.asm.eb).apply(null,arguments)},r._sqlite3_bind_parameter_name=function(){return(r._sqlite3_bind_parameter_name=r.asm.fb).apply(null,arguments)},r._sqlite3_sql=function(){return(r._sqlite3_sql=r.asm.gb).apply(null,arguments)},r._sqlite3_exec=function(){return(r._sqlite3_exec=r.asm.hb).apply(null,arguments)},r._sqlite3_errmsg=function(){return(r._sqlite3_errmsg=r.asm.ib).apply(null,arguments)},r._sqlite3_declare_vtab=function(){return(r._sqlite3_declare_vtab=r.asm.jb).apply(null,arguments)},r._sqlite3_libversion=function(){return(r._sqlite3_libversion=r.asm.kb).apply(null,arguments)},r._sqlite3_libversion_number=function(){return(r._sqlite3_libversion_number=r.asm.lb).apply(null,arguments)},r._sqlite3_changes=function(){return(r._sqlite3_changes=r.asm.mb).apply(null,arguments)},r._sqlite3_close=function(){return(r._sqlite3_close=r.asm.nb).apply(null,arguments)},r._sqlite3_limit=function(){return(r._sqlite3_limit=r.asm.ob).apply(null,arguments)},r._sqlite3_open_v2=function(){return(r._sqlite3_open_v2=r.asm.pb).apply(null,arguments)},r._sqlite3_get_autocommit=function(){return(r._sqlite3_get_autocommit=r.asm.qb).apply(null,arguments)};function Mr(){return(Mr=r.asm.rb).apply(null,arguments)}var Ke=r._malloc=function(){return(Ke=r._malloc=r.asm.sb).apply(null,arguments)},Vr=r._free=function(){return(Vr=r._free=r.asm.tb).apply(null,arguments)};r._RegisterExtensionFunctions=function(){return(r._RegisterExtensionFunctions=r.asm.ub).apply(null,arguments)},r._set_authorizer=function(){return(r._set_authorizer=r.asm.vb).apply(null,arguments)},r._create_function=function(){return(r._create_function=r.asm.wb).apply(null,arguments)},r._create_module=function(){return(r._create_module=r.asm.xb).apply(null,arguments)},r._progress_handler=function(){return(r._progress_handler=r.asm.yb).apply(null,arguments)},r._register_vfs=function(){return(r._register_vfs=r.asm.zb).apply(null,arguments)},r._getSqliteFree=function(){return(r._getSqliteFree=r.asm.Ab).apply(null,arguments)};var Wr=r._main=function(){return(Wr=r._main=r.asm.Bb).apply(null,arguments)};function jr(){return(jr=r.asm.Db).apply(null,arguments)}function Kr(){return(Kr=r.asm.Eb).apply(null,arguments)}function Xr(){return(Xr=r.asm.Fb).apply(null,arguments)}function Yr(){return(Yr=r.asm.Gb).apply(null,arguments)}function Xe(){return(Xe=r.asm.Hb).apply(null,arguments)}function Zr(){return(Zr=r.asm.Ib).apply(null,arguments)}function Gr(){return(Gr=r.asm.Jb).apply(null,arguments)}function Jr(){return(Jr=r.asm.Kb).apply(null,arguments)}function ti(){return(ti=r.asm.Lb).apply(null,arguments)}r.getTempRet0=Kr,r.ccall=wt,r.cwrap=function(t,e,n,i){var o=!n||n.every(m=>m==="number"||m==="boolean");return e!=="string"&&o&&!i?r["_"+t]:function(){return wt(t,e,n,arguments,i)}},r.setValue=_t,r.getValue=et,r.UTF8ToString=B,r.stringToUTF8=jt,r.lengthBytesUTF8=Ut;var Ce;re=function t(){Ce||ei(),Ce||(re=t)};function ei(){function t(){if(!Ce&&(Ce=!0,r.calledRun=!0,!a)){if(r.noFSInit||Kn||(Kn=!0,jn(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?se("stdin",r.stdin):Fe("/dev/tty","/dev/stdin"),r.stdout?se("stdout",null,r.stdout):Fe("/dev/tty","/dev/stdout"),r.stderr?se("stderr",null,r.stderr):Fe("/dev/tty1","/dev/stderr"),Ee("/dev/stdin",0),Ee("/dev/stdout",1),Ee("/dev/stderr",1)),Ln=!1,de(yn),de(Bi),v(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),ni){var e=Wr;try{var n=e(0,0);h=n,Pr(n)}catch(i){We(i)}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),gn.unshift(e);de(gn)}}if(!(0<Dt)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Fi();de(bn),0<Dt||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var ni=!0;return r.noInitialRun&&(ni=!1),ei(),s.ready}})(),xi=Ei,Si=class{constructor(){Ye(this,"mxPathName",64)}xClose(u){return D}xRead(u,s,r){return D}xWrite(u,s,r){return D}xTruncate(u,s){return D}xSync(u,s){return C}xFileSize(u,s){return D}xLock(u,s){return C}xUnlock(u,s){return C}xCheckReservedLock(u,s){return s.setInt32(0,0,!0),C}xFileControl(u,s,r){return Yt}xSectorSize(u){return 512}xDeviceCharacteristics(u){return 0}xOpen(u,s,r,v){return tn}xDelete(u,s){return D}xAccess(u,s,r){return D}handleAsync(u){return u()}},Ai=Bt|Tt|ue|di|ae,qi=(hn=class{constructor(){F(this,Jt);F(this,ce);F(this,le);F(this,rt,Bt);Ye(this,"timeoutMillis",0);F(this,Ht,new Map);F(this,Gt,Promise.resolve(0))}get state(){return y(this,rt)}async lock(u){return ot(this,Jt,Ge).call(this,ot(this,ce,ri),u)}async unlock(u){return ot(this,Jt,Ge).call(this,ot(this,le,ii),u)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(u,s){return new Promise(async(r,v)=>{try{await navigator.locks.request(u,s,d=>{if(r(d),d)return new Promise(A=>y(this,Ht).set(u,A))})}catch(d){v(d)}})}_releaseWebLock(u){var s;(s=y(this,Ht).get(u))==null||s(),y(this,Ht).delete(u)}async _pollWebLock(u){var r;return(r=(await navigator.locks.query()).held.find(({name:v})=>v===u))==null?void 0:r.mode}_getTimeoutSignal(){if(this.timeoutMillis){const u=new AbortController;return setTimeout(()=>u.abort(),this.timeoutMillis),u.signal}}},rt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,Jt=new WeakSet,Ge=async function(u,s){const r=s&Ai;try{const v=()=>u.call(this,r);return await X(this,Gt,y(this,Gt).then(v,v)),X(this,rt,r),C}catch(v){return v.name==="AbortError"?K:(console.error(v),fi)}},ce=new WeakSet,ri=async function(u){if(u===y(this,rt))return C;switch(y(this,rt)){case Bt:switch(u){case Tt:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}case Tt:switch(u){case ue:return this._SHAREDtoRESERVED();case ae:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}case ue:switch(u){case ae:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}},le=new WeakSet,ii=async function(u){if(u===y(this,rt))return C;switch(y(this,rt)){case ae:switch(u){case Tt:return this._EXCLUSIVEtoSHARED();case Bt:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}case ue:switch(u){case Tt:return this._RESERVEDtoSHARED();case Bt:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}case Tt:switch(u){case Bt:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}default:throw new Error(`unexpected transition ${y(this,rt)} -> ${u}`)}},hn),Ri=class extends qi{constructor(u){super(),this._lockName=u+"-outer",this._reservedName=u+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}},Ii=5e3,Ci=0,Oe=new WeakMap;function mt(...u){}var Ti=(mn=class{constructor(u,s={durability:"default"}){F(this,fe);F(this,Qt,void 0);F(this,Mt,void 0);F(this,te,void 0);F(this,tt,null);F(this,ee,0);F(this,Vt,Promise.resolve());F(this,Nt,Promise.resolve());X(this,Mt,Promise.resolve(u).then(r=>X(this,Qt,r))),X(this,te,s)}async close(){const u=y(this,Qt)??await y(this,Mt);await y(this,Vt),await this.sync(),u.close()}async run(u,s){const r=y(this,Vt).then(()=>ot(this,fe,si).call(this,u,s));return X(this,Vt,r.catch(()=>{})),r}async sync(){await y(this,Nt),X(this,Nt,Promise.resolve())}},Qt=new WeakMap,Mt=new WeakMap,te=new WeakMap,tt=new WeakMap,ee=new WeakMap,Vt=new WeakMap,Nt=new WeakMap,fe=new WeakSet,si=async function(u,s){var v,d;const r=y(this,Qt)??await y(this,Mt);if(u==="readwrite"&&((v=y(this,tt))==null?void 0:v.mode)==="readonly")X(this,tt,null);else if(performance.now()-y(this,ee)>Ii){try{(d=y(this,tt))==null||d.commit()}catch(A){if(A.name!=="InvalidStateError")throw A}await new Promise(A=>setTimeout(A)),X(this,tt,null)}for(let A=0;A<2;++A){if(!y(this,tt)){X(this,tt,r.transaction(r.objectStoreNames,u,y(this,te)));const T=X(this,ee,performance.now());X(this,Nt,y(this,Nt).then(()=>new Promise((P,Z)=>{y(this,tt).addEventListener("complete",$=>{P(),y(this,tt)===$.target&&X(this,tt,null),mt(`transaction ${Oe.get($.target)} complete`)}),y(this,tt).addEventListener("abort",$=>{console.warn("tx abort",(performance.now()-T)/1e3);const U=$.target.error;Z(U),y(this,tt)===$.target&&X(this,tt,null),mt(`transaction ${Oe.get($.target)} aborted`,U)})}))),Oe.set(y(this,tt),Ci++)}try{const T=Object.fromEntries(Array.from(r.objectStoreNames,P=>[P,new Ni(y(this,tt).objectStore(P))]));return await s(T)}catch(T){if(X(this,tt,null),A)throw T}}},mn);function vt(u){return new Promise((s,r)=>{u.addEventListener("success",()=>s(u.result)),u.addEventListener("error",()=>r(u.error))})}var Ni=(_n=class{constructor(u){F(this,J,void 0);X(this,J,u)}get(u){mt(`get ${y(this,J).name}`,u);const s=y(this,J).get(u);return vt(s)}getAll(u,s){mt(`getAll ${y(this,J).name}`,u,s);const r=y(this,J).getAll(u,s);return vt(r)}getKey(u){mt(`getKey ${y(this,J).name}`,u);const s=y(this,J).getKey(u);return vt(s)}getAllKeys(u,s){mt(`getAllKeys ${y(this,J).name}`,u,s);const r=y(this,J).getAllKeys(u,s);return vt(r)}put(u,s){mt(`put ${y(this,J).name}`,u,s);const r=y(this,J).put(u,s);return vt(r)}delete(u){mt(`delete ${y(this,J).name}`,u);const s=y(this,J).delete(u);return vt(s)}clear(){mt(`clear ${y(this,J).name}`);const u=y(this,J).clear();return vt(u)}index(u){return new Oi(y(this,J).index(u))}},J=new WeakMap,_n),Oi=(pn=class{constructor(u){F(this,Ot,void 0);X(this,Ot,u)}getAllKeys(u,s){mt(`IDBIndex.getAllKeys ${y(this,Ot).objectStore.name}<${y(this,Ot).name}>`,u,s);const r=y(this,Ot).getAllKeys(u,s);return vt(r)}},Ot=new WeakMap,pn),Li=512,ln=3e3,fn={durability:"default",purge:"deferred",purgeAtLeast:16};function ut(...u){}var ki=(dn=class extends Si{constructor(s="wa-sqlite",r=fn){super();F(this,ne);F(this,he);F(this,me);F(this,xt);F(this,_e);F(this,Et,void 0);F(this,it,new Map);F(this,Y,void 0);F(this,Lt,new Set);F(this,kt,performance.now());F(this,yt,new Set);this.name=s,X(this,Et,Object.assign({},fn,r)),X(this,Y,new Ti(Di(s),{durability:y(this,Et).durability}))}async close(){var s;for(const r of y(this,it).keys())await this.xClose(r);await((s=y(this,Y))==null?void 0:s.close()),X(this,Y,null)}xOpen(s,r,v,d){return this.handleAsync(async()=>{s===null&&(s=`null_${r}`),ut(`xOpen ${s} 0x${r.toString(16)} 0x${v.toString(16)}`);try{const A=new URL(s,"http://localhost/"),T={path:A.pathname,flags:v,block0:null,locks:new Ri(A.pathname)};return y(this,it).set(r,T),await y(this,Y).run("readwrite",async({blocks:P})=>{if(T.block0=await P.get(ot(this,xt,Xt).call(this,T,0)),!T.block0)if(v&en)T.block0={path:T.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},P.put(T.block0);else throw new Error(`file not found: ${T.path}`)}),d.setInt32(0,v&mi,!0),C}catch(A){return console.error(A),tn}})}xClose(s){return this.handleAsync(async()=>{try{const r=y(this,it).get(s);return r&&(ut(`xClose ${r.path}`),y(this,it).delete(s),r.flags&pi&&y(this,Y).run("readwrite",({blocks:v})=>{v.delete(IDBKeyRange.bound([r.path],[r.path,[]]))})),C}catch(r){return console.error(r),D}})}xRead(s,r,v){return this.handleAsync(async()=>{const d=y(this,it).get(s);ut(`xRead ${d.path} ${r.byteLength} ${v}`);try{return await y(this,Y).run("readonly",async({blocks:T})=>{let P=0;for(;P<r.byteLength;){const Z=v+P,$=Z<d.block0.data.byteLength?d.block0:await T.get(ot(this,xt,Xt).call(this,d,-Z));if(!$||$.data.byteLength-$.offset<=Z)return r.fill(0,P),hi;const U=r.subarray(P),L=Z+$.offset,gt=Math.min(Math.max($.data.byteLength-L,0),U.byteLength);U.set($.data.subarray(L,L+gt)),P+=gt}return C})}catch(A){return console.error(A),D}})}xWrite(s,r,v){const d=y(this,yt).has(s);if(d||performance.now()-y(this,kt)>ln){const A=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&y(this,yt).add(s),await new Promise(P=>setTimeout(P));const T=ot(this,ne,Je).call(this,s,r,v);return X(this,kt,performance.now()),T});return d&&y(this,yt).delete(s),A}return ot(this,ne,Je).call(this,s,r,v)}xTruncate(s,r){const v=y(this,it).get(s);ut(`xTruncate ${v.path} ${r}`);try{Object.assign(v.block0,{fileSize:r,data:v.block0.data.slice(0,r)});const d=Object.assign({},v.block0);return y(this,Y).run("readwrite",({blocks:A})=>{A.delete(ot(this,xt,Xt).call(this,v,-1/0,-r)),A.put(d)}),C}catch(d){return console.error(d),D}}xSync(s,r){const v=y(this,yt).has(s);if(v||y(this,Et).durability!=="relaxed"||performance.now()-y(this,kt)>ln){const A=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&y(this,yt).add(s);const T=await ot(this,he,oi).call(this,s,r);return X(this,kt,performance.now()),T});return v&&y(this,yt).delete(s),A}const d=y(this,it).get(s);return ut(`xSync ${d.path} ${r}`),C}xFileSize(s,r){const v=y(this,it).get(s);return ut(`xFileSize ${v.path}`),r.setBigInt64(0,BigInt(v.block0.fileSize),!0),C}xLock(s,r){return this.handleAsync(async()=>{const v=y(this,it).get(s);ut(`xLock ${v.path} ${r}`);try{const d=await v.locks.lock(r);return d===C&&v.locks.state===Tt&&(v.block0=await y(this,Y).run("readonly",({blocks:A})=>A.get(ot(this,xt,Xt).call(this,v,0)))),d}catch(d){return console.error(d),D}})}xUnlock(s,r){return this.handleAsync(async()=>{const v=y(this,it).get(s);ut(`xUnlock ${v.path} ${r}`);try{return v.locks.unlock(r)}catch(d){return console.error(d),D}})}xCheckReservedLock(s,r){return this.handleAsync(async()=>{const v=y(this,it).get(s);ut(`xCheckReservedLock ${v.path}`);const d=await v.locks.isSomewhereReserved();return r.setInt32(0,d?1:0,!0),C})}xSectorSize(s){return Li}xDeviceCharacteristics(s){return gi|wi|bi|yi}xFileControl(s,r,v){const d=y(this,it).get(s);switch(ut(`xFileControl ${d.path} ${r}`),r){case 11:return d.overwrite=!0,C;case 21:if(d.overwrite)try{return this.handleAsync(async()=>(await ot(this,_e,ai).call(this,d),C))}catch(A){return console.error(A),D}return C;case 22:return d.overwrite=!1,C;case 31:return this.handleAsync(async()=>{try{return d.block0.version--,d.changedPages=new Set,y(this,Y).run("readwrite",async({blocks:A})=>{const T=await A.index("version").getAllKeys(IDBKeyRange.bound([d.path],[d.path,d.block0.version]));for(const P of T)A.delete(P)}),C}catch(A){return console.error(A),D}});case 32:try{const A=Object.assign({},d.block0);A.data=A.data.slice();const T=d.changedPages;return d.changedPages=null,y(this,Y).run("readwrite",async({blocks:P})=>{P.put(A);const Z=await P.get([d.path,"purge",0])??{path:d.path,offset:"purge",version:0,data:new Map,count:0};Z.count+=T.size;for(const $ of T)Z.data.set($,A.version);P.put(Z),ot(this,me,ui).call(this,d.path,Z.count)}),C}catch(A){return console.error(A),D}case 33:return this.handleAsync(async()=>{try{return d.changedPages=null,d.block0=await y(this,Y).run("readonly",({blocks:A})=>A.get([d.path,0,d.block0.version+1])),C}catch(A){return console.error(A),D}});default:return Yt}}xAccess(s,r,v){return this.handleAsync(async()=>{try{const d=new URL(s,"file://localhost/").pathname;ut(`xAccess ${d} ${r}`);const A=await y(this,Y).run("readonly",({blocks:T})=>T.getKey(ot(this,xt,Xt).call(this,{path:d},0)));return v.setInt32(0,A?1:0,!0),C}catch(d){return console.error(d),D}})}xDelete(s,r){return this.handleAsync(async()=>{const v=new URL(s,"file://localhost/").pathname;try{return y(this,Y).run("readwrite",({blocks:d})=>d.delete(IDBKeyRange.bound([v],[v,[]]))),r&&await y(this,Y).sync(),C}catch(d){return console.error(d),D}})}async purge(s){const r=Date.now();await y(this,Y).run("readwrite",async({blocks:v})=>{const d=await v.get([s,"purge",0]);if(d){for(const[A,T]of d.data)v.delete(IDBKeyRange.bound([s,A,T],[s,A,1/0],!0,!1));await v.delete([s,"purge",0])}ut(`purge ${s} ${(d==null?void 0:d.data.size)??0} pages in ${Date.now()-r} ms`)})}},Et=new WeakMap,it=new WeakMap,Y=new WeakMap,Lt=new WeakMap,kt=new WeakMap,yt=new WeakMap,ne=new WeakSet,Je=function(s,r,v){const d=y(this,it).get(s);ut(`xWrite ${d.path} ${r.byteLength} ${v}`);try{const A=d.block0.fileSize;d.block0.fileSize=Math.max(d.block0.fileSize,v+r.byteLength);const T=v===0?d.block0:{path:d.path,offset:-v,version:d.block0.version,data:null};return T.data=r.slice(),d.changedPages?(A===d.block0.fileSize&&d.changedPages.add(-v),v!==0&&y(this,Y).run("readwrite",({blocks:P})=>P.put(T))):y(this,Y).run("readwrite",({blocks:P})=>P.put(T)),C}catch(A){return console.error(A),D}},he=new WeakSet,oi=async function(s,r){const v=y(this,it).get(s);ut(`xSync ${v.path} ${r}`);try{await y(this,Y).sync()}catch(d){return console.error(d),D}return C},me=new WeakSet,ui=function(s,r){y(this,Et).purge==="manual"||y(this,Lt).has(s)||r<y(this,Et).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(s),y(this,Lt).delete(s)}):setTimeout(()=>{this.purge(s),y(this,Lt).delete(s)}),y(this,Lt).add(s))},xt=new WeakSet,Xt=function(s,r,v=0){const d=!r||-r<s.block0.data.length?-1/0:s.block0.version;return IDBKeyRange.bound([s.path,r,d],[s.path,v,1/0])},_e=new WeakSet,ai=async function(s){const r=s.block0.data.length;if(r<18)return;const v=new DataView(s.block0.data.buffer,s.block0.data.byteOffset);let d=v.getUint16(16);if(d===1&&(d=65536),d===r)return;const A=Math.max(r,d),T=A/r,P=A/d,$=v.getUint32(28)*d,U=s.block0.version;await y(this,Y).run("readwrite",async({blocks:L})=>{const gt=await L.index("version").getAllKeys(IDBKeyRange.bound([s.path,U+1],[s.path,1/0]));for(const V of gt)L.delete(V);L.delete([s.path,"purge",0]);for(let V=0;V<$;V+=A){const H=await L.getAll(IDBKeyRange.lowerBound([s.path,-(V+A),1/0]),T);for(const c of H)L.delete([c.path,c.offset,c.version]);if(P===1){const c=new Uint8Array(d);for(const a of H)c.set(a.data,-(V+a.offset));const l={path:s.path,offset:-V,version:U,data:c};l.offset===0&&(l.fileSize=$,s.block0=l),L.put(l)}else{const c=H[0];for(let l=0;l<P;++l){const a=-(V+l*d);if(-a>=$)break;const h={path:c.path,offset:a,version:U,data:c.data.subarray(l*d,(l+1)*d)};h.offset===0&&(h.fileSize=$,s.block0=h),L.put(h)}}}})},dn);function Di(u){return new Promise((s,r)=>{const v=globalThis.indexedDB.open(u,5);v.addEventListener("upgradeneeded",function(){v.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),v.addEventListener("success",()=>{s(v.result)}),v.addEventListener("error",()=>{r(v.error)})})}var lt,Zt;async function Pi(u,s){const r=await xi({locateFile:()=>s});lt=vi(r),lt.vfs_register(new ki(u)),Zt=await lt.open_v2(u,void 0,u)}async function Le(u,s){const r=lt.str_new(Zt,u),v=await lt.prepare_v2(Zt,lt.str_value(r));if(v===null)return[];const d=v.stmt;try{typeof s<"u"&&lt.bind_collection(d,s);const A=[];let T=[];for(;await lt.step(d)===Ne;){T=T.length===0?lt.column_names(d):T;const P=lt.row(d);A.push(T.reduce((Z,$,U)=>(Z[$]=P[U],Z),{}))}return A}finally{await lt.finalize(d)}}async function Ui(u,s){await Le(u,s);const r=await Le("SELECT last_insert_rowid() as id");return{insertId:BigInt(r[0].id),numAffectedRows:BigInt(lt.changes(Zt)),rows:[]}}async function $i(u,s){return{rows:await Le(u,s)}}async function zi(){await lt.close(Zt)}onmessage=async u=>{const s=u.data,r={type:s.type,msg:{data:null,err:null}};try{switch(s.type){case"run":r.msg.data=s.isQuery?await $i(s.sql,s.parameters):await Ui(s.sql,s.parameters);break;case"close":await zi();break;case"init":await Pi(s.dbName,s.url);break}}catch(v){r.msg.err=v}postMessage(r)}})();
